/*!
 * jQuery JavaScript Library v1.12.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:17Z
 */

/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */

/**
 * Unobtrusive scripting adapter for jQuery
 * https://github.com/rails/jquery-ujs
 *
 * Requires jQuery 1.8.0 or later.
 *
 * Released under the MIT license
 *
 */

/**
* plotly.js v1.0.0
* Copyright 2012-2015, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/

// https://d3js.org Version 4.3.0. Copyright 2016 Mike Bostock.

/**
 * @license
 * lodash 3.10.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -o ./lodash.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */

/**
* plotly.js v1.21.3
* Copyright 2012-2017, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/

function renderWorld(e,t){function a(e,t){e.d3_id==t&&($("#country-name-title").text(""),$("#country-name-title").append("\n      <h1>"+e.name+"</h1>\n    "),$(".current-country-data").append('\n      <section class="country-facts-container">\n        <h3 class="country-fact capital"><span class="country-fact-key">Capital:</span> '+e.capital+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Population:</span> '+e.population+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Languages:</span> '+e.languages+'</h3>\n        <fieldset>\n          <legend><span class="country-fact-key h-background-key">Historical Background:</span></legend>\n          <textarea readonly id="country-background">'+e.background+'</textarea>\n        </fieldset>\n        <h3 class="country-fact"><span class="country-fact-key">Government Type:</span> '+e.government_type+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Dual Citizenship:</span> '+(e.dual_citizenship==!undefined?e.dual_citizenship:"N/A")+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Residency Requirement:</span> '+e.residency_requirement+'</h3>\n\n        <h3 class="country-fact"><span class="country-fact-key">Urbanization:</span> '+e.urbanization+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Net Migration Rate:</span> '+e.net_migration_rate+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">GDP/Capita:</span> '+e.gdp_per_capita+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Unemployment_rate:</span> '+e.unemployment_rate+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Population Below Poverty Line:</span> '+e.population_below_poverty_line+'</h3>\n\n        <h3 class="country-fact"><span class="country-fact-key">Median Age:</span> '+e.median_age+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Sex Ratio:</span> '+e.sex_ratio+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Ethnic Breakdown:</span> '+e.ethnic_breakdown+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Religions:</span> '+e.religions+'</h3>\n\n        <h3 class="country-fact"><span class="country-fact-key">Climate:</span> '+e.climate+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Coastline:</span> '+e.coastline+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Environment:</span> '+e.environment+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Natural Resources:</span> '+e.natural_resources+'</h3>\n        <h3 class="country-fact"><span class="country-fact-key">Exports:</span> '+e.exports+"</h3>\n\n      </section>\n    "))}function f(e,t){$("#city-list").text(""),$(".select-box-placeholder").css("display","none");var n=e.map(function(e){return"<option value="+e.id+"> "+e.name+" </option>"});console.log("cityList",n),n.length!==0?$("#city-list").append('\n      <div class="select-box">\n        <select id="city-name-container">\n          <option value="default" selected>Select a City</option>\n          '+n+"\n        </select>\n      </div>\n    "):$("#city-list").append('\n      <div class="select-box">\n        <select id="city-name-container">\n          <option value="default" selected>No Cities Available</option>\n          '+n+"\n        </select>\n      </div>\n    ")}function l(e){$.ajax({method:"GET",url:"/api/v1/cities/"+e,async:!0,dataType:"json",success:function(t){c(t)}})}function c(e){$(".current-country-data").text(""),$(".current-country-data").append('\n    <section class="city-facts-container">\n      <h3 class="city-fact city"><span class="city-fact-key">Name:</span> '+e.name+'</h3>\n      <h3 class="city-fact"><span class="city-fact-key">Cost as Nomad/Mo:</span> &#36 '+e.cost_as_nomad_us+'</h3>\n      <h3 class="city-fact"><span class="city-fact-key">Cost in ShortTerm/Mo:</span> &#36 '+e.cost_shortterm_us+'</h3>\n      <h3 class="city-fact"><span class="city-fact-key">Cost in Longterm/Mo:</span> &#36 '+e.cost_longterm_us+'</h3>\n      <h3 class="city-fact"><span class="city-fact-key">Cost (Median) of Air BnB:</span> &#36 '+e.air_bnb_median_us+'</h3>\n      <h3 class="city-fact"><span class="city-fact-key">Air BnB vs Apartment Price Ratio:</span> '+e.air_bnb_vs_appartment_price_ratio+'</h3>\n      <h3 class="city-fact"><span class="city-fact-key">Fragile States Index:</span> '+e.fragile_states_index+'</h3>\n      <h3 class="city-fact"><span class="city-fact-key">Press Freedom Index:</span> '+e.press_freedom_index+"</h3>\n    </section>\n  ");var t=[{type:"bar",x:e.city_scores_arrayed.reverse(),y:e.names_arrayed.reverse(),orientation:"h"}],n={title:"Nomad Scores",width:550,height:400,font:{family:"Droid Sans, monospace",size:14,color:"#fff"},line:{color:"#ff583e"},margin:{l:200,r:0,b:50,t:50,pad:4},mode:"markers",marker:{size:14,color:"#fbb341"},paper_bgcolor:"rgba(0, 0, 0, 0)",plot_bgcolor:"rgba(0, 0, 0, 0)"};Plotly.newPlot("bar-graph",t,n,{displayModeBar:!1})}var e=JSON.parse(e),t=d3.tsvParse(t),n={type:"Sphere"},r=topojson.feature(e,e.objects.land),i=topojson.feature(e,e.objects.countries).features,s=topojson.mesh(e,e.objects.countries,function(e,t){return e!==t});i=i.filter(function(e){return t.some(function(t){if(e.id==t.id)return e.name=t.name})}).sort(function(e,t){return e.name.localeCompare(t.name)}),map.insert("path",".graticule").datum(topojson.feature(e,e.objects.land)).attr("class","land").attr("d",path);for(var o=0;o<t.length;o++)for(var u=0;u<i.length;u++)i[u].id==t[o].id&&map.insert("path",".graticule").datum(i[u]).attr("fill",colors.clickable).attr("d",path).attr("class","clickable").attr("world110-country-id",u).attr("database-id",t[o].id).on("click",function(){$(".current-country-data").text(""),$("#bar-graph").text("");var e=$(this).attr("database-id");$.ajax({method:"GET",url:"/api/v1/countries/"+e,async:!0,dataType:"json",success:function(n){a(n,e)}}),$.ajax({method:"GET",url:"/api/v1/country_cities/"+e,async:!0,dataType:"json",success:function(n){f(n,e)}}),d3.selectAll(".clicked").classed("clicked",!1).attr("fill",colors.clickable),d3.select(this).classed("clicked",!0).attr("fill",colors.clicked),function(){d3.select(".clicked").transition().duration(1250).tween("rotate",function(){var e=d3.geoCentroid(i[d3.select(this).attr("world110-country-id")]),t=d3.interpolate(projection.rotate(),[-e[0],-e[1]]);return function(e){projection.rotate(t(e)),map.selectAll("path").attr("d",path)}})}()}).on("mousemove",function(e){var t=d3.select(this);t.classed("clicked")?t.attr("fill",colors.clickhover):t.attr("fill",colors.hover);var n=d3.mouse(map.node()).map(function(e){return parseInt(e)});tooltip.classed("hidden",!1).attr("style","left:"+(n[0]-11)+"px; top:"+(n[1]+290)+"px").html(e.name)}).on("mouseout",function(){var e=d3.select(this);e.classed("clicked")?e.attr("fill",colors.clicked):d3.select(this).attr("fill",colors.clickable)});$("#city-list").on("change","#city-name-container",function(){var e=this.value;l(e)}),map.insert("path",".graticule").datum(topojson.mesh(e,e.objects.countries,function(e,t){return e!==t})).attr("class","boundary").attr("d",path)}(function(e,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)})(typeof window!="undefined"?window:this,function(e,t){function y(e){var t=!!e&&"length"in e&&e.length,n=p.type(e);return n==="function"||p.isWindow(e)?!1:n==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function N(e,t,n){if(p.isFunction(t))return p.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return p.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(T.test(t))return p.filter(t,e,n);t=p.filter(t,e)}return p.grep(e,function(e){return p.inArray(e,t)>-1!==n})}function M(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function D(e){var t={};return p.each(e.match(_)||[],function(e,n){t[n]=!0}),t}function H(){r.addEventListener?(r.removeEventListener("DOMContentLoaded",B),e.removeEventListener("load",B)):(r.detachEvent("onreadystatechange",B),e.detachEvent("onload",B))}function B(){if(r.addEventListener||e.event.type==="load"||r.readyState==="complete")H(),p.ready()}function R(e,t,n){if(n===undefined&&e.nodeType===1){var r="data-"+t.replace(q,"-$1").toLowerCase();n=e.getAttribute(r);if(typeof n=="string"){try{n=n==="true"?!0:n==="false"?!1:n==="null"?null:+n+""===n?+n:I.test(n)?p.parseJSON(n):n}catch(i){}p.data(e,t,n)}else n=undefined}return n}function U(e){var t;for(t in e){if(t==="data"&&p.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function z(e,t,r,i){if(!F(e))return;var s,o,u=p.expando,a=e.nodeType,f=a?p.cache:e,l=a?e[u]:e[u]&&u;if((!l||!f[l]||!i&&!f[l].data)&&r===undefined&&typeof t=="string")return;l||(a?l=e[u]=n.pop()||p.guid++:l=u),f[l]||(f[l]=a?{}:{toJSON:p.noop});if(typeof t=="object"||typeof t=="function")i?f[l]=p.extend(f[l],t):f[l].data=p.extend(f[l].data,t);return o=f[l],i||(o.data||(o.data={}),o=o.data),r!==undefined&&(o[p.camelCase(t)]=r),typeof t=="string"?(s=o[t],s==null&&(s=o[p.camelCase(t)])):s=o,s}function W(e,t,n){if(!F(e))return;var r,i,s=e.nodeType,o=s?p.cache:e,u=s?e[p.expando]:p.expando;if(!o[u])return;if(t){r=n?o[u]:o[u].data;if(r){p.isArray(t)?t=t.concat(p.map(t,p.camelCase)):t in r?t=[t]:(t=p.camelCase(t),t in r?t=[t]:t=t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!U(r):!p.isEmptyObject(r))return}}if(!n){delete o[u].data;if(!U(o[u]))return}s?p.cleanData([e],!0):c.deleteExpando||o!=o.window?delete o[u]:o[u]=undefined}function K(e,t,n,r){var i,s=1,o=20,u=r?function(){return r.cur()}:function(){return p.css(e,t,"")},a=u(),f=n&&n[3]||(p.cssNumber[t]?"":"px"),l=(p.cssNumber[t]||f!=="px"&&+a)&&V.exec(p.css(e,t));if(l&&l[3]!==f){f=f||l[3],n=n||[],l=+a||1;do s=s||".5",l/=s,p.style(e,t,l+f);while(s!==(s=u()/a)&&s!==1&&--o)}return n&&(l=+l||+a||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=f,r.start=l,r.end=i)),i}function nt(e){var t=tt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function it(e,t){var n,r,i=0,s=typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll(t||"*"):undefined;if(!s)for(s=[],n=e.childNodes||e;(r=n[i])!=null;i++)!t||p.nodeName(r,t)?s.push(r):p.merge(s,it(r,t));return t===undefined||t&&p.nodeName(e,t)?p.merge([e],s):s}function st(e,t){var n,r=0;for(;(n=e[r])!=null;r++)p._data(n,"globalEval",!t||p._data(t[r],"globalEval"))}function at(e){G.test(e.type)&&(e.defaultChecked=e.checked)}function ft(e,t,n,r,i){var s,o,u,a,f,l,h,d=e.length,v=nt(t),m=[],g=0;for(;g<d;g++){o=e[g];if(o||o===0)if(p.type(o)==="object")p.merge(m,o.nodeType?[o]:o);else if(!ot.test(o))m.push(t.createTextNode(o));else{a=a||v.appendChild(t.createElement("div")),f=(Y.exec(o)||["",""])[1].toLowerCase(),h=rt[f]||rt._default,a.innerHTML=h[1]+p.htmlPrefilter(o)+h[2],s=h[0];while(s--)a=a.lastChild;!c.leadingWhitespace&&et.test(o)&&m.push(t.createTextNode(et.exec(o)[0]));if(!c.tbody){o=f==="table"&&!ut.test(o)?a.firstChild:h[1]==="<table>"&&!ut.test(o)?a:0,s=o&&o.childNodes.length;while(s--)p.nodeName(l=o.childNodes[s],"tbody")&&!l.childNodes.length&&o.removeChild(l)}p.merge(m,a.childNodes),a.textContent="";while(a.firstChild)a.removeChild(a.firstChild);a=v.lastChild}}a&&v.removeChild(a),c.appendChecked||p.grep(it(m,"input"),at),g=0;while(o=m[g++]){if(r&&p.inArray(o,r)>-1){i&&i.push(o);continue}u=p.contains(o.ownerDocument,o),a=it(v.appendChild(o),"script"),u&&st(a);if(n){s=0;while(o=a[s++])Z.test(o.type||"")&&n.push(o)}}return a=null,v}function vt(){return!0}function mt(){return!1}function gt(){try{return r.activeElement}catch(e){}}function yt(e,t,n,r,i,s){var o,u;if(typeof t=="object"){typeof n!="string"&&(r=r||n,n=undefined);for(u in t)yt(e,u,n,r,t[u],s);return e}r==null&&i==null?(i=n,r=n=undefined):i==null&&(typeof n=="string"?(i=r,r=undefined):(i=r,r=n,n=undefined));if(i===!1)i=mt;else if(!i)return e;return s===1&&(o=i,i=function(e){return p().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=p.guid++)),e.each(function(){p.event.add(this,t,i,r,n)})}function Lt(e,t){return p.nodeName(e,"table")&&p.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function At(e){return e.type=(p.find.attr(e,"type")!==null)+"/"+e.type,e}function Ot(e){var t=Tt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){if(t.nodeType!==1||!p.hasData(e))return;var n,r,i,s=p._data(e),o=p._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)p.event.add(t,n,u[n][r])}o.data&&(o.data=p.extend({},o.data))}function _t(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!c.noCloneEvent&&t[p.expando]){i=p._data(t);for(r in i.events)p.removeEvent(t,r,i.handle);t.removeAttribute(p.expando)}if(n==="script"&&t.text!==e.text)At(t).text=e.text,Ot(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),c.html5Clone&&e.innerHTML&&!p.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&G.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function Dt(e,t,n,r){t=s.apply([],t);var i,o,u,a,f,l,h=0,d=e.length,v=d-1,m=t[0],g=p.isFunction(m);if(g||d>1&&typeof m=="string"&&!c.checkClone&&xt.test(m))return e.each(function(i){var s=e.eq(i);g&&(t[0]=m.call(this,i,s.html())),Dt(s,t,n,r)});if(d){l=ft(t,e[0].ownerDocument,!1,e,r),i=l.firstChild,l.childNodes.length===1&&(l=i);if(i||r){a=p.map(it(l,"script"),At),u=a.length;for(;h<d;h++)o=l,h!==v&&(o=p.clone(o,!0,!0),u&&p.merge(a,it(o,"script"))),n.call(e[h],o,h);if(u){f=a[a.length-1].ownerDocument,p.map(a,Ot);for(h=0;h<u;h++)o=a[h],Z.test(o.type||"")&&!p._data(o,"globalEval")&&p.contains(f,o)&&(o.src?p._evalUrl&&p._evalUrl(o.src):p.globalEval((o.text||o.textContent||o.innerHTML||"").replace(Nt,"")))}l=i=null}}return e}function Pt(e,t,n){var r,i=t?p.filter(t,e):e,s=0;for(;(r=i[s])!=null;s++)!n&&r.nodeType===1&&p.cleanData(it(r)),r.parentNode&&(n&&p.contains(r.ownerDocument,r)&&st(it(r,"script")),r.parentNode.removeChild(r));return e}function jt(e,t){var n=p(t.createElement(e)).appendTo(t.body),r=p.css(n[0],"display");return n.detach(),r}function Ft(e){var t=r,n=Bt[e];if(!n){n=jt(e,t);if(n==="none"||!n)Ht=(Ht||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Ht[0].contentWindow||Ht[0].contentDocument).document,t.write(),t.close(),n=jt(e,t),Ht.detach();Bt[e]=n}return n}function Vt(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function tn(e){if(e in en)return e;var t=e.charAt(0).toUpperCase()+e.slice(1),n=Zt.length;while(n--){e=Zt[n]+t;if(e in en)return e}}function nn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=p._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&J(r)&&(s[o]=p._data(r,"olddisplay",Ft(r.nodeName)))):(i=J(r),(n&&n!=="none"||!i)&&p._data(r,"olddisplay",i?n:p.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function rn(e,t,n){var r=Qt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function sn(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=p.css(e,n+$[s],!0,i)),r?(n==="content"&&(o-=p.css(e,"padding"+$[s],!0,i)),n!=="margin"&&(o-=p.css(e,"border"+$[s]+"Width",!0,i))):(o+=p.css(e,"padding"+$[s],!0,i),n!=="padding"&&(o+=p.css(e,"border"+$[s]+"Width",!0,i)));return o}function on(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=zt(e),o=c.boxSizing&&p.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Wt(e,t,s);if(i<0||i==null)i=e.style[t];if(qt.test(i))return i;r=o&&(c.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+sn(e,t,n||(o?"border":"content"),r,s)+"px"}function un(e,t,n,r,i){return new un.prototype.init(e,t,n,r,i)}function hn(){return e.setTimeout(function(){an=undefined}),an=p.now()}function pn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function dn(e,t,n){var r,i=(gn.tweeners[t]||[]).concat(gn.tweeners["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function vn(e,t,n){var r,i,s,o,u,a,f,l,h=this,d={},v=e.style,m=e.nodeType&&J(e),g=p._data(e,"fxshow");n.queue||(u=p._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,h.always(function(){h.always(function(){u.unqueued--,p.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[v.overflow,v.overflowX,v.overflowY],f=p.css(e,"display"),l=f==="none"?p._data(e,"olddisplay")||Ft(e.nodeName):f,l==="inline"&&p.css(e,"float")==="none"&&(!c.inlineBlockNeedsLayout||Ft(e.nodeName)==="inline"?v.display="inline-block":v.zoom=1)),n.overflow&&(v.overflow="hidden",c.shrinkWrapBlocks()||h.always(function(){v.overflow=n.overflow[0],v.overflowX=n.overflow[1],v.overflowY=n.overflow[2]}));for(r in t){i=t[r];if(ln.exec(i)){delete t[r],s=s||i==="toggle";if(i===(m?"hide":"show")){if(i!=="show"||!g||g[r]===undefined)continue;m=!0}d[r]=g&&g[r]||p.style(e,r)}else f=undefined}if(!p.isEmptyObject(d)){g?"hidden"in g&&(m=g.hidden):g=p._data(e,"fxshow",{}),s&&(g.hidden=!m),m?p(e).show():h.done(function(){p(e).hide()}),h.done(function(){var t;p._removeData(e,"fxshow");for(t in d)p.style(e,t,d[t])});for(r in d)o=dn(m?g[r]:0,r,h),r in g||(g[r]=o.start,m&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}else(f==="none"?Ft(e.nodeName):f)==="inline"&&(v.display=f)}function mn(e,t){var n,r,i,s,o;for(n in e){r=p.camelCase(n),i=t[r],s=e[n],p.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=p.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function gn(e,t,n){var r,i,s=0,o=gn.prefilters.length,u=p.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=an||hn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:p.extend({},t),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},n),originalProperties:t,originalOptions:n,startTime:an||hn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=p.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?(u.notifyWith(e,[f,1,0]),u.resolveWith(e,[f,t])):u.rejectWith(e,[f,t]),this}}),l=f.props;mn(l,f.opts.specialEasing);for(;s<o;s++){r=gn.prefilters[s].call(f,e,l,f.opts);if(r)return p.isFunction(r.stop)&&(p._queueHooks(f.elem,f.opts.queue).stop=p.proxy(r.stop,r)),r}return p.map(l,dn,f),p.isFunction(f.opts.start)&&f.opts.start.call(e,f),p.fx.timer(p.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function An(e){return p.attr(e,"class")||""}function Vn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(_)||[];if(p.isFunction(n))while(r=s[i++])r.charAt(0)==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function $n(e,t,n,r){function o(u){var a;return i[u]=!0,p.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===Un;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Jn(e,t){var n,r,i=p.ajaxSettings.flatOptions||{};for(r in t)t[r]!==undefined&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&p.extend(!0,e,n),e}function Kn(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while(a[0]==="*")a.shift(),i===undefined&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){a.unshift(o);break}if(a[0]in n)s=a[0];else{for(o in n){if(!a[0]||e.converters[o+" "+a[0]]){s=o;break}r||(r=o)}s=s||r}if(s)return s!==a[0]&&a.unshift(s),n[s]}function Qn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function Gn(e){return e.style&&e.style.display||p.css(e,"display")}function Yn(e){if(!p.contains(e.ownerDocument||r,e))return!0;while(e&&e.nodeType===1){if(Gn(e)==="none"||e.type==="hidden")return!0;e=e.parentNode}return!1}function ir(e,t,n,r){var i;if(p.isArray(t))p.each(t,function(t,i){n||er.test(e)?r(e,i):ir(e+"["+(typeof i=="object"&&i!=null?t:"")+"]",i,n,r)});else if(!n&&p.type(t)==="object")for(i in t)ir(e+"["+i+"]",t[i],n,r);else r(e,t)}function ar(){try{return new e.XMLHttpRequest}catch(t){}}function fr(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function pr(e){return p.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=[],r=e.document,i=n.slice,s=n.concat,o=n.push,u=n.indexOf,a={},f=a.toString,l=a.hasOwnProperty,c={},h="1.12.4",p=function(e,t){return new p.fn.init(e,t)},d=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,m=/-([\da-z])/gi,g=function(e,t){return t.toUpperCase()};p.fn=p.prototype={jquery:h,constructor:p,selector:"",length:0,toArray:function(){return i.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:i.call(this)},pushStack:function(e){var t=p.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return p.each(this,e)},map:function(e){return this.pushStack(p.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;typeof o=="boolean"&&(f=o,o=arguments[u]||{},u++),typeof o!="object"&&!p.isFunction(o)&&(o={}),u===a&&(o=this,u--);for(;u<a;u++)if((i=arguments[u])!=null)for(r in i){e=o[r],n=i[r];if(o===n)continue;f&&n&&(p.isPlainObject(n)||(t=p.isArray(n)))?(t?(t=!1,s=e&&p.isArray(e)?e:[]):s=e&&p.isPlainObject(e)?e:{},o[r]=p.extend(f,s,n)):n!==undefined&&(o[r]=n)}return o},p.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return p.type(e)==="function"},isArray:Array.isArray||function(e){return p.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!p.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||p.type(e)!=="object"||e.nodeType||p.isWindow(e))return!1;try{if(e.constructor&&!l.call(e,"constructor")&&!l.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(!c.ownFirst)for(t in e)return l.call(e,t);for(t in e);return t===undefined||l.call(e,t)},type:function(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?a[f.call(e)]||"object":typeof e},globalEval:function(t){t&&p.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(v,"ms-").replace(m,g)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(y(e)){n=e.length;for(;r<n;r++)if(t.call(e[r],r,e[r])===!1)break}else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return e==null?"":(e+"").replace(d,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(y(Object(e))?p.merge(n,typeof e=="string"?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(u)return u.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=+t.length,r=0,i=e.length;while(r<n)e[i++]=t[r++];if(n!==n)while(t[r]!==undefined)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length,u=!n;for(;s<o;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,i,o=0,u=[];if(y(e)){r=e.length;for(;o<r;o++)i=t(e[o],o,n),i!=null&&u.push(i)}else for(o in e)i=t(e[o],o,n),i!=null&&u.push(i);return s.apply([],u)},guid:1,proxy:function(e,t){var n,r,s;return typeof t=="string"&&(s=e[t],t=e,e=s),p.isFunction(e)?(n=i.call(arguments,2),r=function(){return e.apply(t||this,n.concat(i.call(arguments)))},r.guid=e.guid=e.guid||p.guid++,r):undefined},now:function(){return+(new Date)},support:c}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=n[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){a["[object "+t+"]"]=t.toLowerCase()});var b=function(e){function st(e,t,r,i){var s,u,f,l,c,d,g,y,S=t&&t.ownerDocument,x=t?t.nodeType:9;r=r||[];if(typeof e!="string"||!e||x!==1&&x!==9&&x!==11)return r;if(!i){(t?t.ownerDocument||t:E)!==p&&h(t),t=t||p;if(v){if(x!==11&&(d=Y.exec(e)))if(s=d[1]){if(x===9){if(!(f=t.getElementById(s)))return r;if(f.id===s)return r.push(f),r}else if(S&&(f=S.getElementById(s))&&b(t,f)&&f.id===s)return r.push(f),r}else{if(d[2])return D.apply(r,t.getElementsByTagName(e)),r;if((s=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return D.apply(r,t.getElementsByClassName(s)),r}if(n.qsa&&!C[e+" "]&&(!m||!m.test(e))){if(x!==1)S=t,y=e;else if(t.nodeName.toLowerCase()!=="object"){(l=t.getAttribute("id"))?l=l.replace(et,"\\$&"):t.setAttribute("id",l=w),g=o(e),u=g.length,c=$.test(l)?"#"+l:"[id='"+l+"']";while(u--)g[u]=c+" "+mt(g[u]);y=g.join(","),S=Z.test(e)&&dt(t.parentNode)||t}if(y)try{return D.apply(r,S.querySelectorAll(y)),r}catch(T){}finally{l===w&&t.removeAttribute("id")}}}}return a(e.replace(U,"$1"),t,r,i)}function ot(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function ut(e){return e[w]=!0,e}function at(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ft(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function lt(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function pt(e){return ut(function(t){return t=+t,ut(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function dt(e){return e&&typeof e.getElementsByTagName!="undefined"&&e}function vt(){}function mt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function gt(e,t,n){var r=t.dir,i=n&&r==="parentNode",s=x++;return t.first?function(t,n,s){while(t=t[r])if(t.nodeType===1||i)return e(t,n,s)}:function(t,n,o){var u,a,f,l=[S,s];if(o){while(t=t[r])if(t.nodeType===1||i)if(e(t,n,o))return!0}else while(t=t[r])if(t.nodeType===1||i){f=t[w]||(t[w]={}),a=f[t.uniqueID]||(f[t.uniqueID]={});if((u=a[r])&&u[0]===S&&u[1]===s)return l[2]=u[2];a[r]=l;if(l[2]=e(t,n,o))return!0}}}function yt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function bt(e,t,n){var r=0,i=t.length;for(;r<i;r++)st(e,t[r],n);return n}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function Et(e,t,n,r,i,s){return r&&!r[w]&&(r=Et(r)),i&&!i[w]&&(i=Et(i,s)),ut(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||bt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?wt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function St(e){var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=gt(function(e){return e===t},u,!0),c=gt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];for(;a<s;a++)if(n=r.relative[e[a].type])h=[gt(yt(h),n)];else{n=r.filter[e[a].type].apply(null,e[a].matches);if(n[w]){i=++a;for(;i<s;i++)if(r.relative[e[i].type])break;return Et(a>1&&yt(h),a>1&&mt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(U,"$1"),n,a<i&&St(e.slice(a,i)),i<s&&St(e=e.slice(i)),i<s&&mt(e))}h.push(n)}return yt(h)}function xt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,d,m,g=0,y="0",b=s&&[],w=[],E=f,x=s||i&&r.find.TAG("*",l),T=S+=E==null?1:Math.random()||.1,N=x.length;l&&(f=o===p||o||l);for(;y!==N&&(c=x[y])!=null;y++){if(i&&c){d=0,!o&&c.ownerDocument!==p&&(h(c),u=!v);while(m=e[d++])if(m(c,o||p,u)){a.push(c);break}l&&(S=T)}n&&((c=!m&&c)&&g--,s&&b.push(c))}g+=y;if(n&&y!==g){d=0;while(m=t[d++])m(b,w,o,u);if(s){if(g>0)while(y--)!b[y]&&!w[y]&&(w[y]=M.call(a));w=wt(w)}D.apply(a,w),l&&!s&&w.length>0&&g+t.length>1&&st.uniqueSort(a)}return l&&(S=T,f=E),b};return n?ut(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=ot(),N=ot(),C=ot(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){var n=0,r=e.length;for(;n<r;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+j+"*\\]",q=":("+F+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|"+".*"+")\\)|)",R=new RegExp(j+"+","g"),U=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),z=new RegExp("^"+j+"*,"+j+"*"),W=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),X=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),V=new RegExp(q),$=new RegExp("^"+F+"$"),J={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,et=/'|\\/g,tt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),nt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},rt=function(){h()};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(it){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=st.support={},s=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},h=st.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;if(o===p||o.nodeType!==9||!o.documentElement)return p;p=o,d=p.documentElement,v=!s(p),(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=at(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=at(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=G.test(p.getElementsByClassName),n.getById=at(function(e){return d.appendChild(e).id=w,!p.getElementsByName||!p.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!="undefined"&&v){var n=t.getElementById(e);return n?[n]:[]}},r.filter.ID=function(e){var t=e.replace(tt,nt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(tt,nt);return function(e){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e);if(n.qsa)return t.querySelectorAll(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!="undefined"&&v)return t.getElementsByClassName(e)},g=[],m=[];if(n.qsa=G.test(p.querySelectorAll))at(function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a>"+"<select id='"+w+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),at(function(e){var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")});return(n.matchesSelector=G.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&at(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",q)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=G.test(d.compareDocumentPosition),b=t||G.test(d.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,r&1||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===p||e.ownerDocument===E&&b(E,e)?-1:t===p||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:r&4?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,o=[e],u=[t];if(!i||!s)return e===p?-1:t===p?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return lt(e,t);n=e;while(n=n.parentNode)o.unshift(n);n=t;while(n=n.parentNode)u.unshift(n);while(o[r]===u[r])r++;return r?lt(o[r],u[r]):o[r]===E?-1:u[r]===E?1:0},p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){(e.ownerDocument||e)!==p&&h(e),t=t.replace(X,"='$1']");if(n.matchesSelector&&v&&!C[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&e.document.nodeType!==11)return r}catch(i){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},st.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):undefined;return s!==undefined?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},st.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,r=[],i=0,s=0;c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k);if(c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=st.getText=function(e){var t,n="",r=0,s=e.nodeType;if(!s)while(t=e[r++])n+=i(t);else if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(s===3||s===4)return e.nodeValue;return n},r=st.selectors={cacheLength:50,createPseudo:ut,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(tt,nt),e[3]=(e[3]||e[4]||e[5]||"").replace(tt,nt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(tt,nt).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i.replace(R," ")+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u,b=!1;if(m){if(s){while(v){h=t;while(h=h[v])if(u?h.nodeName.toLowerCase()===g:h.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){h=m,c=h[w]||(h[w]={}),l=c[h.uniqueID]||(c[h.uniqueID]={}),f=l[e]||[],p=f[0]===S&&f[1],b=p&&f[2],h=p&&m.childNodes[p];while(h=++p&&h&&h[v]||(b=p=0)||d.pop())if(h.nodeType===1&&++b&&h===t){l[e]=[S,p,b];break}}else{y&&(h=t,c=h[w]||(h[w]={}),l=c[h.uniqueID]||(c[h.uniqueID]={}),f=l[e]||[],p=f[0]===S&&f[1],b=p);if(b===!1)while(h=++p&&h&&h[v]||(b=p=0)||d.pop())if((u?h.nodeName.toLowerCase()===g:h.nodeType===1)&&++b){y&&(c=h[w]||(h[w]={}),l=c[h.uniqueID]||(c[h.uniqueID]={}),l[e]=[S,b]);if(h===t)break}}return b-=i,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ut(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ut(function(e){var t=[],n=[],r=u(e.replace(U,"$1"));return r[w]?ut(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:ut(function(e){return function(t){return st(e,t).length>0}}),contains:ut(function(e){return e=e.replace(tt,nt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:ut(function(e){return $.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(tt,nt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[n<0?n+t:n]}),even:pt(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ct(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ht(t);return vt.prototype=r.filters=r.pseudos,r.setFilters=new vt,o=st.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){if(!n||(i=z.exec(u)))i&&(u=u.slice(i[0].length)||u),a.push(s=[]);n=!1;if(i=W.exec(u))n=i.shift(),s.push({value:n,type:i[0].replace(U," ")}),u=u.slice(n.length);for(o in r.filter)(i=J[o].exec(u))&&(!f[o]||(i=f[o](i)))&&(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?st.error(e):N(e,a).slice(0)},u=st.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=St(t[n]),s[w]?r.push(s):i.push(s);s=C(e,xt(i,r)),s.selector=e}return s},a=st.select=function(e,t,i,s){var a,f,l,c,h,p=typeof e=="function"&&e,d=!s&&o(e=p.selector||e);i=i||[];if(d.length===1){f=d[0]=d[0].slice(0);if(f.length>2&&(l=f[0]).type==="ID"&&n.getById&&t.nodeType===9&&v&&r.relative[f[1].type]){t=(r.find.ID(l.matches[0].replace(tt,nt),t)||[])[0];if(!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=J.needsContext.test(e)?0:f.length;while(a--){l=f[a];if(r.relative[c=l.type])break;if(h=r.find[c])if(s=h(l.matches[0].replace(tt,nt),Z.test(f[0].type)&&dt(t.parentNode)||t)){f.splice(a,1),e=s.length&&mt(f);if(!e)return D.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,!t||Z.test(e)&&dt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=at(function(e){return e.compareDocumentPosition(p.createElement("div"))&1}),at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||ft("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!n.attributes||!at(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&ft("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),at(function(e){return e.getAttribute("disabled")==null})||ft(B,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),st}(e);p.find=b,p.expr=b.selectors,p.expr[":"]=p.expr.pseudos,p.uniqueSort=p.unique=b.uniqueSort,p.text=b.getText,p.isXMLDoc=b.isXML,p.contains=b.contains;var w=function(e,t,n){var r=[],i=n!==undefined;while((e=e[t])&&e.nodeType!==9)if(e.nodeType===1){if(i&&p(e).is(n))break;r.push(e)}return r},E=function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n},S=p.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,T=/^.[^:#\[\.,]*$/;p.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?p.find.matchesSelector(r,e)?[r]:[]:p.find.matches(e,p.grep(t,function(e){return e.nodeType===1}))},p.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(typeof e!="string")return this.pushStack(p(e).filter(function(){for(t=0;t<i;t++)if(p.contains(r[t],this))return!0}));for(t=0;t<i;t++)p.find(e,r[t],n);return n=this.pushStack(i>1?p.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(N(this,e||[],!1))},not:function(e){return this.pushStack(N(this,e||[],!0))},is:function(e){return!!N(this,typeof e=="string"&&S.test(e)?p(e):e||[],!1).length}});var C,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,L=p.fn.init=function(e,t,n){var i,s;if(!e)return this;n=n||C;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=k.exec(e);if(i&&(i[1]||!t)){if(i[1]){t=t instanceof p?t[0]:t,p.merge(this,p.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0));if(x.test(i[1])&&p.isPlainObject(t))for(i in t)p.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}s=r.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return C.find(e);this.length=1,this[0]=s}return this.context=r,this.selector=e,this}return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):p.isFunction(e)?typeof n.ready!="undefined"?n.ready(e):e(p):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),p.makeArray(e,this))};L.prototype=p.fn,C=p(r);var A=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(e){var t,n=p(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(p.contains(this,n[t]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],o=S.test(e)||typeof e!="string"?p(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&p.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?p.uniqueSort(s):s)},index:function(e){return e?typeof e=="string"?p.inArray(this[0],p(e)):p.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),p.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return w(e,"parentNode")},parentsUntil:function(e,t,n){return w(e,"parentNode",n)},next:function(e){return M(e,"nextSibling")},prev:function(e){return M(e,"previousSibling")},nextAll:function(e){return w(e,"nextSibling")},prevAll:function(e){return w(e,"previousSibling")},nextUntil:function(e,t,n){return w(e,"nextSibling",n)},prevUntil:function(e,t,n){return w(e,"previousSibling",n)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){return p.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:p.merge([],e.childNodes)}},function(e,t){p.fn[e]=function(n,r){var i=p.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=p.filter(r,i)),this.length>1&&(O[e]||(i=p.uniqueSort(i)),A.test(e)&&(i=i.reverse())),this.pushStack(i)}});var _=/\S+/g;p.Callbacks=function(e){e=typeof e=="string"?D(e):p.extend({},e);var t,n,r,i,s=[],o=[],u=-1,a=function(){i=e.once,r=t=!0;for(;o.length;u=-1){n=o.shift();while(++u<s.length)s[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=s.length,n=!1)}e.memory||(n=!1),t=!1,i&&(n?s=[]:s="")},f={add:function(){return s&&(n&&!t&&(u=s.length-1,o.push(n)),function r(t){p.each(t,function(t,n){p.isFunction(n)?(!e.unique||!f.has(n))&&s.push(n):n&&n.length&&p.type(n)!=="string"&&r(n)})}(arguments),n&&!t&&a()),this},remove:function(){return p.each(arguments,function(e,t){var n;while((n=p.inArray(t,s,n))>-1)s.splice(n,1),n<=u&&u--}),this},has:function(e){return e?p.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=!0,n||f.disable(),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],o.push(n),t||a()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},p.extend({Deferred:function(e){var t=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return p.Deferred(function(n){p.each(t,function(t,s){var o=p.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&p.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?p.extend(e,r):r}},i={};return r.pipe=r.then,p.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=i.call(arguments),r=n.length,s=r!==1||e&&p.isFunction(e.promise)?r:0,o=s===1?e:p.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?i.call(arguments):r,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(r>1){a=new Array(r),f=new Array(r),l=new Array(r);for(;t<r;t++)n[t]&&p.isFunction(n[t].promise)?n[t].promise().progress(u(t,f,a)).done(u(t,l,n)).fail(o.reject):--s}return s||o.resolveWith(l,n),o.promise()}});var P;p.fn.ready=function(e){return p.ready.promise().done(e),this},p.extend({isReady:!1,readyWait:1,holdReady:function(e){e?p.readyWait++:p.ready(!0)},ready:function(e){if(e===!0?--p.readyWait:p.isReady)return;p.isReady=!0;if(e!==!0&&--p.readyWait>0)return;P.resolveWith(r,[p]),p.fn.triggerHandler&&(p(r).triggerHandler("ready"),p(r).off("ready"))}}),p.ready.promise=function(t){if(!P){P=p.Deferred();if(r.readyState==="complete"||r.readyState!=="loading"&&!r.documentElement.doScroll)e.setTimeout(p.ready);else if(r.addEventListener)r.addEventListener("DOMContentLoaded",B),e.addEventListener("load",B);else{r.attachEvent("onreadystatechange",B),e.attachEvent("onload",B);var n=!1;try{n=e.frameElement==null&&r.documentElement}catch(i){}n&&n.doScroll&&function s(){if(!p.isReady){try{n.doScroll("left")}catch(t){return e.setTimeout(s,50)}H(),p.ready()}}()}}return P.promise(t)},p.ready.promise();var j;for(j in p(c))break;c.ownFirst=j==="0",c.inlineBlockNeedsLayout=!1,p(function(){var e,t,n,i;n=r.getElementsByTagName("body")[0];if(!n||!n.style)return;t=r.createElement("div"),i=r.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!="undefined"&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",c.inlineBlockNeedsLayout=e=t.offsetWidth===3,e&&(n.style.zoom=1)),n.removeChild(i)}),function(){var e=r.createElement("div");c.deleteExpando=!0;try{delete e.test}catch(t){c.deleteExpando=!1}e=null}();var F=function(e){var t=p.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return n!==1&&n!==9?!1:!t||t!==!0&&e.getAttribute("classid")===t},I=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,q=/([A-Z])/g;p.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?p.cache[e[p.expando]]:e[p.expando],!!e&&!U(e)},data:function(e,t,n){return z(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return z(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)}}),p.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(e===undefined){if(this.length){i=p.data(s);if(s.nodeType===1&&!p._data(s,"parsedAttrs")){n=o.length;while(n--)o[n]&&(r=o[n].name,r.indexOf("data-")===0&&(r=p.camelCase(r.slice(5)),R(s,r,i[r])));p._data(s,"parsedAttrs",!0)}}return i}return typeof e=="object"?this.each(function(){p.data(this,e)}):arguments.length>1?this.each(function(){p.data(this,e,t)}):s?R(s,e,p.data(s,e)):undefined},removeData:function(e){return this.each(function(){p.removeData(this,e)})}}),p.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=p._data(e,t),n&&(!r||p.isArray(n)?r=p._data(e,t,p.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=p.queue(e,t),r=n.length,i=n.shift(),s=p._queueHooks(e,t),o=function(){p.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return p._data(e,n)||p._data(e,n,{empty:p.Callbacks("once memory").add(function(){p._removeData(e,t+"queue"),p._removeData(e,n)})})}}),p.fn.extend({queue:function(e,t){var n=2;return typeof e!="string"&&(t=e,e="fx",n--),arguments.length<n?p.queue(this[0],e):t===undefined?this:this.each(function(){var n=p.queue(this,e,t);p._queueHooks(this,e),e==="fx"&&n[0]!=="inprogress"&&p.dequeue(this,e)})},dequeue:function(e){return this.each(function(){p.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=p.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};typeof e!="string"&&(t=e,e=undefined),e=e||"fx";while(o--)n=p._data(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}}),function(){var e;c.shrinkWrapBlocks=function(){if(e!=null)return e;e=!1;var t,n,i;n=r.getElementsByTagName("body")[0];if(!n||!n.style)return;return t=r.createElement("div"),i=r.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!="undefined"&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(r.createElement("div")).style.width="5px",e=t.offsetWidth!==3),n.removeChild(i),e}}();var X=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=new RegExp("^(?:([+-])=|)("+X+")([a-z%]*)$","i"),$=["Top","Right","Bottom","Left"],J=function(e,t){return e=t||e,p.css(e,"display")==="none"||!p.contains(e.ownerDocument,e)},Q=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=n==null;if(p.type(n)==="object"){i=!0;for(u in n)Q(e,t,u,n[u],!0,s,o)}else if(r!==undefined){i=!0,p.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(p(e),n)}));if(t)for(;u<a;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)))}return i?e:f?t.call(e):a?t(e[0],n):s},G=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,et=/^\s+/,tt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";(function(){var e=r.createElement("div"),t=r.createDocumentFragment(),n=r.createElement("input");e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c.leadingWhitespace=e.firstChild.nodeType===3,c.tbody=!e.getElementsByTagName("tbody").length,c.htmlSerialize=!!e.getElementsByTagName("link").length,c.html5Clone=r.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",n.type="checkbox",n.checked=!0,t.appendChild(n),c.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",c.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),n=r.createElement("input"),n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),c.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,c.noCloneEvent=!!e.addEventListener,e[p.expando]=1,c.attributes=!e.getAttribute(p.expando)})();var rt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:c.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};rt.optgroup=rt.option,rt.tbody=rt.tfoot=rt.colgroup=rt.caption=rt.thead,rt.th=rt.td;var ot=/<|&#?\w+;/,ut=/<tbody/i;(function(){var t,n,i=r.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(c[t]=n in e)||(i.setAttribute(n,"t"),c[t]=i.attributes[n].expando===!1);i=null})();var lt=/^(?:input|select|textarea)$/i,ct=/^key/,ht=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,pt=/^(?:focusinfocus|focusoutblur)$/,dt=/^([^.]*)(?:\.(.+)|)/;p.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,d,v,m,g=p._data(e);if(!g)return;n.handler&&(a=n,n=a.handler,i=a.selector),n.guid||(n.guid=p.guid++),(o=g.events)||(o=g.events={}),(l=g.handle)||(l=g.handle=function(e){return typeof p=="undefined"||!!e&&p.event.triggered===e.type?undefined:p.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(_)||[""],u=t.length;while(u--){s=dt.exec(t[u])||[],d=m=s[1],v=(s[2]||"").split(".").sort();if(!d)continue;f=p.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=p.event.special[d]||{},c=p.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&p.expr.match.needsContext.test(i),namespace:v.join(".")},a);if(!(h=o[d])){h=o[d]=[],h.delegateCount=0;if(!f.setup||f.setup.call(e,r,v,l)===!1)e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l)}f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),p.event.global[d]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,d,v,m,g=p.hasData(e)&&p._data(e);if(!g||!(l=g.events))return;t=(t||"").match(_)||[""],f=t.length;while(f--){u=dt.exec(t[f])||[],d=m=u[1],v=(u[2]||"").split(".").sort();if(!d){for(d in l)p.event.remove(e,d+t[f],n,r,!0);continue}c=p.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,h=l[d]||[],u=u[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||m===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,v,g.handle)===!1)&&p.removeEvent(e,d,g.handle),delete l[d])}p.isEmptyObject(l)&&(delete g.handle,p._removeData(e,"events"))},trigger:function(t,n,i,s){var o,u,a,f,c,h,d,v=[i||r],m=l.call(t,"type")?t.type:t,g=l.call(t,"namespace")?t.namespace.split("."):[];a=h=i=i||r;if(i.nodeType===3||i.nodeType===8)return;if(pt.test(m+p.event.triggered))return;m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),u=m.indexOf(":")<0&&"on"+m,t=t[p.expando]?t:new p.Event(m,typeof t=="object"&&t),t.isTrigger=s?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=i),n=n==null?[t]:p.makeArray(n,[t]),c=p.event.special[m]||{};if(!s&&c.trigger&&c.trigger.apply(i,n)===!1)return;if(!s&&!c.noBubble&&!p.isWindow(i)){f=c.delegateType||m,pt.test(f+m)||(a=a.parentNode);for(;a;a=a.parentNode)v.push(a),h=a;h===(i.ownerDocument||r)&&v.push(h.defaultView||h.parentWindow||e)}d=0;while((a=v[d++])&&!t.isPropagationStopped())t.type=d>1?f:c.bindType||m,o=(p._data(a,"events")||{})[t.type]&&p._data(a,"handle"),o&&o.apply(a,n),o=u&&a[u],o&&o.apply&&F(a)&&(t.result=o.apply(a,n),t.result===!1&&t.preventDefault());t.type=m;if(!s&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(v.pop(),n)===!1)&&F(i)&&u&&i[m]&&!p.isWindow(i)){h=i[u],h&&(i[u]=null),p.event.triggered=m;try{i[m]()}catch(y){}p.event.triggered=undefined,h&&(i[u]=h)}return t.result},dispatch:function(e){e=p.event.fix(e);var t,n,r,s,o,u=[],a=i.call(arguments),f=(p._data(this,"events")||{})[e.type]||[],l=p.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=p.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,n=0;while((o=s.handlers[n++])&&!e.isImmediatePropagationStopped())if(!e.rnamespace||e.rnamespace.test(o.namespace))e.handleObj=o,e.data=o.data,r=((p.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),r!==undefined&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(e.type!=="click"||isNaN(e.button)||e.button<1))for(;a!=this;a=a.parentNode||this)if(a.nodeType===1&&(a.disabled!==!0||e.type!=="click")){r=[];for(n=0;n<u;n++)s=t[n],i=s.selector+" ",r[i]===undefined&&(r[i]=s.needsContext?p(i,this).index(a)>-1:p.find(i,this,null,[a]).length),r[i]&&r.push(s);r.length&&o.push({elem:a,handlers:r})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},fix:function(e){if(e[p.expando])return e;var t,n,i,s=e.type,o=e,u=this.fixHooks[s];u||(this.fixHooks[s]=u=ht.test(s)?this.mouseHooks:ct.test(s)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,e=new p.Event(o),t=i.length;while(t--)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||r),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,s,o=t.button,u=t.fromElement;return e.pageX==null&&t.clientX!=null&&(i=e.target.ownerDocument||r,s=i.documentElement,n=i.body,e.pageX=t.clientX+(s&&s.scrollLeft||n&&n.scrollLeft||0)-(s&&s.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(s&&s.scrollTop||n&&n.scrollTop||0)-(s&&s.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?t.toElement:u),!e.which&&o!==undefined&&(e.which=o&1?1:o&2?3:o&4?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==gt()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===gt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(p.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(e){return p.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var r=p.extend(new p.Event,n,{type:e,isSimulated:!0});p.event.trigger(r,null,t),r.isDefaultPrevented()&&n.preventDefault()}},p.removeEvent=r.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},p.Event=function(e,t){if(!(this instanceof p.Event))return new p.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===!1?vt:mt):this.type=e,t&&p.extend(this,t),this.timeStamp=e&&e.timeStamp||p.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:mt,isPropagationStopped:mt,isImmediatePropagationStopped:mt,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=vt;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=vt;if(!e||this.isSimulated)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=vt,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){p.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!p.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),c.submit||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=p.nodeName(t,"input")||p.nodeName(t,"button")?p.prop(t,"form"):undefined;n&&!p._data(n,"submit")&&(p.event.add(n,"submit._submit",function(e){e._submitBubble=!0}),p._data(n,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&p.event.simulate("submit",this.parentNode,e))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}}),c.change||(p.event.special.change={setup:function(){if(lt.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")p.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._justChanged=!0)}),p.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),p.event.simulate("change",this,e)});return!1}p.event.add(this,"beforeactivate._change",function(e){var t=e.target;lt.test(t.nodeName)&&!p._data(t,"change")&&(p.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&p.event.simulate("change",this.parentNode,e)}),p._data(t,"change",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,"._change"),!lt.test(this.nodeName)}}),c.focusin||p.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){p.event.simulate(t,e.target,p.event.fix(e))};p.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=p._data(r,t);i||r.addEventListener(e,n,!0),p._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=p._data(r,t)-1;i?p._data(r,t,i):(r.removeEventListener(e,n,!0),p._removeData(r,t))}}}),p.fn.extend({on:function(e,t,n,r){return yt(this,e,t,n,r)},one:function(e,t,n,r){return yt(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,p(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if(typeof e=="object"){for(i in e)this.off(i,t,e[i]);return this}if(t===!1||typeof t=="function")n=t,t=undefined;return n===!1&&(n=mt),this.each(function(){p.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){p.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return p.event.trigger(e,t,n,!0)}});var bt=/ jQuery\d+="(?:null|\d+)"/g,wt=new RegExp("<(?:"+tt+")[\\s/>]","i"),Et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,St=/<script|<style|<link/i,xt=/checked\s*(?:[^=]|=\s*.checked.)/i,Tt=/^true\/(.*)/,Nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ct=nt(r),kt=Ct.appendChild(r.createElement("div"));p.extend({htmlPrefilter:function(e){return e.replace(Et,"<$1></$2>")},clone:function(e,t,n){var r,i,s,o,u,a=p.contains(e.ownerDocument,e);c.html5Clone||p.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(s=kt.firstChild));if((!c.noCloneEvent||!c.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!p.isXMLDoc(e)){r=it(s),u=it(e);for(o=0;(i=u[o])!=null;++o)r[o]&&_t(i,r[o])}if(t)if(n){u=u||it(e),r=r||it(s);for(o=0;(i=u[o])!=null;o++)Mt(i,r[o])}else Mt(e,s);return r=it(s,"script"),r.length>0&&st(r,!a&&it(e,"script")),r=u=i=null,s},cleanData:function(e,t){var r,i,s,o,u=0,a=p.expando,f=p.cache,l=c.attributes,h=p.event.special;for(;(r=e[u])!=null;u++)if(t||F(r)){s=r[a],o=s&&f[s];if(o){if(o.events)for(i in o.events)h[i]?p.event.remove(r,i):p.removeEvent(r,i,o.handle);f[s]&&(delete f[s],!l&&typeof r.removeAttribute!="undefined"?r.removeAttribute(a):r[a]=undefined,n.push(s))}}}}),p.fn.extend({domManip:Dt,detach:function(e){return Pt(this,e,!0)},remove:function(e){return Pt(this,e)},text:function(e){return Q(this,function(e){return e===undefined?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||r).createTextNode(e))},null,e,arguments.length)},append:function(){return Dt(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Lt(this,e);t.appendChild(e)}})},prepend:function(){return Dt(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Lt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Dt(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Dt(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&p.cleanData(it(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&p.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return p.clone(this,e,t)})},html:function(e){return Q(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined)return t.nodeType===1?t.innerHTML.replace(bt,""):undefined;if(typeof e=="string"&&!St.test(e)&&(c.htmlSerialize||!wt.test(e))&&(c.leadingWhitespace||!et.test(e))&&!rt[(Y.exec(e)||["",""])[1].toLowerCase()]){e=p.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},t.nodeType===1&&(p.cleanData(it(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Dt(this,arguments,function(t){var n=this.parentNode;p.inArray(this,e)<0&&(p.cleanData(it(this)),n&&n.replaceChild(t,this))},e)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){p.fn[e]=function(e){var n,r=0,i=[],s=p(e),u=s.length-1;for(;r<=u;r++)n=r===u?this:this.clone(!0),p(s[r])[t](n),o.apply(i,n.get());return this.pushStack(i)}});var Ht,Bt={HTML:"block",BODY:"block"},It=/^margin/,qt=new RegExp("^("+X+")(?!px)[a-z%]+$","i"),Rt=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i},Ut=r.documentElement;(function(){function l(){var l,c,h=r.documentElement;h.appendChild(a),f.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",t=i=u=!1,n=o=!0,e.getComputedStyle&&(c=e.getComputedStyle(f),t=(c||{}).top!=="1%",u=(c||{}).marginLeft==="2px",i=(c||{width:"4px"}).width==="4px",f.style.marginRight="50%",n=(c||{marginRight:"4px"}).marginRight==="4px",l=f.appendChild(r.createElement("div")),l.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",l.style.marginRight=l.style.width="0",f.style.width="1px",o=!parseFloat((e.getComputedStyle(l)||{}).marginRight),f.removeChild(l)),f.style.display="none",s=f.getClientRects().length===0,s&&(f.style.display="",f.innerHTML="<table><tr><td></td><td>t</td></tr></table>",f.childNodes[0].style.borderCollapse="separate",l=f.getElementsByTagName("td"),l[0].style.cssText="margin:0;border:0;padding:0;display:none",s=l[0].offsetHeight===0,s&&(l[0].style.display="",l[1].style.display="none",s=l[0].offsetHeight===0)),h.removeChild(a)}var t,n,i,s,o,u,a=r.createElement("div"),f=r.createElement("div");if(!f.style)return;f.style.cssText="float:left;opacity:.5",c.opacity=f.style.opacity==="0.5",c.cssFloat=!!f.style.cssFloat,f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",c.clearCloneStyle=f.style.backgroundClip==="content-box",a=r.createElement("div"),a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",f.innerHTML="",a.appendChild(f),c.boxSizing=f.style.boxSizing===""||f.style.MozBoxSizing===""||f.style.WebkitBoxSizing==="",p.extend(c,{reliableHiddenOffsets:function(){return t==null&&l(),s},boxSizingReliable:function(){return t==null&&l(),i},pixelMarginRight:function(){return t==null&&l(),n},pixelPosition:function(){return t==null&&l(),t},reliableMarginRight:function(){return t==null&&l(),o},reliableMarginLeft:function(){return t==null&&l(),u}})})();var zt,Wt,Xt=/^(top|right|bottom|left)$/;e.getComputedStyle?(zt=function(t){var n=t.ownerDocument.defaultView;if(!n||!n.opener)n=e;return n.getComputedStyle(t)},Wt=function(e,t,n){var r,i,s,o,u=e.style;return n=n||zt(e),o=n?n.getPropertyValue(t)||n[t]:undefined,(o===""||o===undefined)&&!p.contains(e.ownerDocument,e)&&(o=p.style(e,t)),n&&!c.pixelMarginRight()&&qt.test(o)&&It.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s),o===undefined?o:o+""}):Ut.currentStyle&&(zt=function(e){return e.currentStyle},Wt=function(e,t,n){var r,i,s,o,u=e.style;return n=n||zt(e),o=n?n[t]:undefined,o==null&&u&&u[t]&&(o=u[t]),qt.test(o)&&!Xt.test(t)&&(r=u.left,i=e.runtimeStyle,s=i&&i.left,s&&(i.left=e.currentStyle.left),u.left=t==="fontSize"?"1em":o,o=u.pixelLeft+"px",u.left=r,s&&(i.left=s)),o===undefined?o:o+""||"auto"});var $t=/alpha\([^)]*\)/i,Jt=/opacity\s*=\s*([^)]*)/i,Kt=/^(none|table(?!-c[ea]).+)/,Qt=new RegExp("^("+X+")(.*)$","i"),Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:"0",fontWeight:"400"},Zt=["Webkit","O","Moz","ms"],en=r.createElement("div").style;p.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":c.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var i,s,o,u=p.camelCase(t),a=e.style;t=p.cssProps[u]||(p.cssProps[u]=tn(u)||u),o=p.cssHooks[t]||p.cssHooks[u];if(n===undefined)return o&&"get"in o&&(i=o.get(e,!1,r))!==undefined?i:a[t];s=typeof n,s==="string"&&(i=V.exec(n))&&i[1]&&(n=K(e,t,i),s="number");if(n==null||n!==n)return;s==="number"&&(n+=i&&i[3]||(p.cssNumber[u]?"":"px")),!c.clearCloneStyle&&n===""&&t.indexOf("background")===0&&(a[t]="inherit");if(!o||!("set"in o)||(n=o.set(e,n,r))!==undefined)try{a[t]=n}catch(f){}},css:function(e,t,n,r){var i,s,o,u=p.camelCase(t);return t=p.cssProps[u]||(p.cssProps[u]=tn(u)||u),o=p.cssHooks[t]||p.cssHooks[u],o&&"get"in o&&(s=o.get(e,!0,n)),s===undefined&&(s=Wt(e,t,r)),s==="normal"&&t in Yt&&(s=Yt[t]),n===""||n?(i=parseFloat(s),n===!0||isFinite(i)?i||0:s):s}}),p.each(["height","width"],function(e,t){p.cssHooks[t]={get:function(e,n,r){if(n)return Kt.test(p.css(e,"display"))&&e.offsetWidth===0?Rt(e,Gt,function(){return on(e,t,r)}):on(e,t,r)},set:function(e,n,r){var i=r&&zt(e);return rn(e,n,r?sn(e,t,r,c.boxSizing&&p.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),c.opacity||(p.cssHooks.opacity={get:function(e,t){return Jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=p.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&p.trim(s.replace($t,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=$t.test(s)?s.replace($t,i):s+" "+i}}),p.cssHooks.marginRight=Vt(c.reliableMarginRight,function(e,t){if(t)return Rt(e,{display:"inline-block"},Wt,[e,"marginRight"])}),p.cssHooks.marginLeft=Vt(c.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Wt(e,"marginLeft"))||(p.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-Rt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(e,t){p.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+$[r]+t]=s[r]||s[r-2]||s[0];return i}},It.test(e)||(p.cssHooks[e+t].set=rn)}),p.fn.extend({css:function(e,t){return Q(this,function(e,t,n){var r,i,s={},o=0;if(p.isArray(t)){r=zt(e),i=t.length;for(;o<i;o++)s[t[o]]=p.css(e,t[o],!1,r);return s}return n!==undefined?p.style(e,t,n):p.css(e,t)},e,t,arguments.length>1)},show:function(){return nn(this,!0)},hide:function(){return nn(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){J(this)?p(this).show():p(this).hide()})}}),p.Tween=un,un.prototype={constructor:un,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||p.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(p.cssNumber[n]?"":"px")},cur:function(){var e=un.propHooks[this.prop];return e&&e.get?e.get(this):un.propHooks._default.get(this)},run:function(e){var t,n=un.propHooks[this.prop];return this.options.duration?this.pos=t=p.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):un.propHooks._default.set(this),this}},un.prototype.init.prototype=un.prototype,un.propHooks={_default:{get:function(e){var t;return e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null?e.elem[e.prop]:(t=p.css(e.elem,e.prop,""),!t||t==="auto"?0:t)},set:function(e){p.fx.step[e.prop]?p.fx.step[e.prop](e):e.elem.nodeType!==1||e.elem.style[p.cssProps[e.prop]]==null&&!p.cssHooks[e.prop]?e.elem[e.prop]=e.now:p.style(e.elem,e.prop,e.now+e.unit)}}},un.propHooks.scrollTop=un.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},p.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},p.fx=un.prototype.init,p.fx.step={};var an,fn,ln=/^(?:toggle|show|hide)$/,cn=/queueHooks$/;p.Animation=p.extend(gn,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return K(n.elem,e,V.exec(t),n),n}]},tweener:function(e,t){p.isFunction(e)?(t=e,e=["*"]):e=e.match(_);var n,r=0,i=e.length;for(;r<i;r++)n=e[r],gn.tweeners[n]=gn.tweeners[n]||[],gn.tweeners[n].unshift(t)},prefilters:[vn],prefilter:function(e,t){t?gn.prefilters.unshift(e):gn.prefilters.push(e)}}),p.speed=function(e,t,n){var r=e&&typeof e=="object"?p.extend({},e):{complete:n||!n&&t||p.isFunction(e)&&e,duration:e,easing:n&&t||t&&!p.isFunction(t)&&t};r.duration=p.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in p.fx.speeds?p.fx.speeds[r.duration]:p.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){p.isFunction(r.old)&&r.old.call(this),r.queue&&p.dequeue(this,r.queue)},r},p.fn.extend({fadeTo:function(e,t,n,r){return this.filter(J).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=p.isEmptyObject(e),s=p.speed(t,n,r),o=function(){var t=gn(this,p.extend({},e),s);(i||p._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return typeof e!="string"&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=e!=null&&e+"queueHooks",s=p.timers,o=p._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&cn.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem===this&&(e==null||s[i].queue===e)&&(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&p.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=p._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=p.timers,o=r?r.length:0;n.finish=!0,p.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),p.each(["toggle","show","hide"],function(e,t){var n=p.fn[t];p.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(pn(t,!0),e,r,i)}}),p.each({slideDown:pn("show"),slideUp:pn("hide"),slideToggle:pn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){p.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),p.timers=[],p.fx.tick=function(){var e,t=p.timers,n=0;an=p.now();for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||p.fx.stop(),an=undefined},p.fx.timer=function(e){p.timers.push(e),e()?p.fx.start():p.timers.pop()},p.fx.interval=13,p.fx.start=function(){fn||(fn=e.setInterval(p.fx.tick,p.fx.interval))},p.fx.stop=function(){e.clearInterval(fn),fn=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(t,n){return t=p.fx?p.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e,t=r.createElement("input"),n=r.createElement("div"),i=r.createElement("select"),s=i.appendChild(r.createElement("option"));n=r.createElement("div"),n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],t.setAttribute("type","checkbox"),n.appendChild(t),e=n.getElementsByTagName("a")[0],e.style.cssText="top:1px",c.getSetAttribute=n.className!=="t",c.style=/top/.test(e.getAttribute("style")),c.hrefNormalized=e.getAttribute("href")==="/a",c.checkOn=!!t.value,c.optSelected=s.selected,c.enctype=!!r.createElement("form").enctype,i.disabled=!0,c.optDisabled=!s.disabled,t=r.createElement("input"),t.setAttribute("value",""),c.input=t.getAttribute("value")==="",t.value="t",t.setAttribute("type","radio"),c.radioValue=t.value==="t"}();var yn=/\r/g,bn=/[\x20\t\r\n\f]+/g;p.fn.extend({val:function(e){var t,n,r,i=this[0];if(!arguments.length){if(i)return t=p.valHooks[i.type]||p.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,typeof n=="string"?n.replace(yn,""):n==null?"":n);return}return r=p.isFunction(e),this.each(function(n){var i;if(this.nodeType!==1)return;r?i=e.call(this,n,p(this).val()):i=e,i==null?i="":typeof i=="number"?i+="":p.isArray(i)&&(i=p.map(i,function(e){return e==null?"":e+""})),t=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,i,"value")===undefined)this.value=i})}}),p.extend({valHooks:{option:{get:function(e){var t=p.find.attr(e,"value");return t!=null?t:p.trim(p.text(e)).replace(bn," ")}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(c.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!p.nodeName(n.parentNode,"optgroup"))){t=p(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=p.makeArray(t),o=i.length;while(o--){r=i[o];if(p.inArray(p.valHooks.option.get(r),s)>-1)try{r.selected=n=!0}catch(u){r.scrollHeight}else r.selected=!1}return n||(e.selectedIndex=-1),i}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(e,t){if(p.isArray(t))return e.checked=p.inArray(p(e).val(),t)>-1}},c.checkOn||(p.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var wn,En,Sn=p.expr.attrHandle,xn=/^(?:checked|selected)$/i,Tn=c.getSetAttribute,Nn=c.input;p.fn.extend({attr:function(e,t){return Q(this,p.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){p.removeAttr(this,e)})}}),p.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(s===3||s===8||s===2)return;if(typeof e.getAttribute=="undefined")return p.prop(e,t,n);if(s!==1||!p.isXMLDoc(e))t=t.toLowerCase(),i=p.attrHooks[t]||(p.expr.match.bool.test(t)?En:wn);if(n!==undefined){if(n===null){p.removeAttr(e,t);return}return i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:(e.setAttribute(t,n+""),n)}return i&&"get"in i&&(r=i.get(e,t))!==null?r:(r=p.find.attr(e,t),r==null?undefined:r)},attrHooks:{type:{set:function(e,t){if(!c.radioValue&&t==="radio"&&p.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(_);if(s&&e.nodeType===1)while(n=s[i++])r=p.propFix[n]||n,p.expr.match.bool.test(n)?Nn&&Tn||!xn.test(n)?e[r]=!1:e[p.camelCase("default-"+n)]=e[r]=!1:p.attr(e,n,""),e.removeAttribute(Tn?n:r)}}),En={set:function(e,t,n){return t===!1?p.removeAttr(e,n):Nn&&Tn||!xn.test(n)?e.setAttribute(!Tn&&p.propFix[n]||n,n):e[p.camelCase("default-"+n)]=e[n]=!0,n}},p.each(p.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Sn[t]||p.find.attr;Nn&&Tn||!xn.test(t)?Sn[t]=function(e,t,r){var i,s;return r||(s=Sn[t],Sn[t]=i,i=n(e,t,r)!=null?t.toLowerCase():null,Sn[t]=s),i}:Sn[t]=function(e,t,n){if(!n)return e[p.camelCase("default-"+t)]?t.toLowerCase():null}});if(!Nn||!Tn)p.attrHooks.value={set:function(e,t,n){if(!p.nodeName(e,"input"))return wn&&wn.set(e,t,n);e.defaultValue=t}};Tn||(wn={set:function(e,t,n){var r=e.getAttributeNode(n);r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="";if(n==="value"||t===e.getAttribute(n))return t}},Sn.id=Sn.name=Sn.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&r.value!==""?r.value:null},p.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:wn.set},p.attrHooks.contenteditable={set:function(e,t,n){wn.set(e,t===""?!1:t,n)}},p.each(["width","height"],function(e,t){p.attrHooks[t]={set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}}})),c.style||(p.attrHooks.style={get:function(e){return e.style.cssText||undefined},set:function(e,t){return e.style.cssText=t+""}});var Cn=/^(?:input|select|textarea|button|object)$/i,kn=/^(?:a|area)$/i;p.fn.extend({prop:function(e,t){return Q(this,p.prop,e,t,arguments.length>1)},removeProp:function(e){return e=p.propFix[e]||e,this.each(function(){try{this[e]=undefined,delete this[e]}catch(t){}})}}),p.extend({prop:function(e,t,n){var r,i,s=e.nodeType;if(s===3||s===8||s===2)return;if(s!==1||!p.isXMLDoc(e))t=p.propFix[t]||t,i=p.propHooks[t];return n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&(r=i.get(e,t))!==null?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=p.find.attr(e,"tabindex");return t?parseInt(t,10):Cn.test(e.nodeName)||kn.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),c.hrefNormalized||p.each(["href","src"],function(e,t){p.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),c.optSelected||(p.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this}),c.enctype||(p.propFix.enctype="encoding");var Ln=/[\t\r\n\f]/g;p.fn.extend({addClass:function(e){var t,n,r,i,s,o,u,a=0;if(p.isFunction(e))return this.each(function(t){p(this).addClass(e.call(this,t,An(this)))});if(typeof e=="string"&&e){t=e.match(_)||[];while(n=this[a++]){i=An(n),r=n.nodeType===1&&(" "+i+" ").replace(Ln," ");if(r){o=0;while(s=t[o++])r.indexOf(" "+s+" ")<0&&(r+=s+" ");u=p.trim(r),i!==u&&p.attr(n,"class",u)}}}return this},removeClass:function(e){var t,n,r,i,s,o,u,a=0;if(p.isFunction(e))return this.each(function(t){p(this).removeClass(e.call(this,t,An(this)))});if(!arguments.length)return this.attr("class","");if(typeof e=="string"&&e){t=e.match(_)||[];while(n=this[a++]){i=An(n),r=n.nodeType===1&&(" "+i+" ").replace(Ln," ");if(r){o=0;while(s=t[o++])while(r.indexOf(" "+s+" ")>-1)r=r.replace(" "+s+" "," ");u=p.trim(r),i!==u&&p.attr(n,"class",u)}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):p.isFunction(e)?this.each(function(n){p(this).toggleClass(e.call(this,n,An(this),t),t)}):this.each(function(){var t,r,i,s;if(n==="string"){r=0,i=p(this),s=e.match(_)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else if(e===undefined||n==="boolean")t=An(this),t&&p._data(this,"__className__",t),p.attr(this,"class",t||e===!1?"":p._data(this,"__className__")||"")})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(n.nodeType===1&&(" "+An(n)+" ").replace(Ln," ").indexOf(t)>-1)return!0;return!1}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){p.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),p.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var On=e.location,Mn=p.now(),_n=/\?/,Dn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;p.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=p.trim(t+"");return i&&!p.trim(i.replace(Dn,function(e,t,i,s){return n&&t&&(r=0),r===0?e:(n=i||t,r+=!s-!i,"")}))?Function("return "+i)():p.error("Invalid JSON: "+t)},p.parseXML=function(t){var n,r;if(!t||typeof t!="string")return null;try{e.DOMParser?(r=new e.DOMParser,n=r.parseFromString(t,"text/xml")):(n=new e.ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=undefined}return(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+t),n};var Pn=/#.*$/,Hn=/([?&])_=[^&]*/,Bn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,jn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fn=/^(?:GET|HEAD)$/,In=/^\/\//,qn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Rn={},Un={},zn="*/".concat("*"),Wn=On.href,Xn=qn.exec(Wn.toLowerCase())||[];p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Wn,type:"GET",isLocal:jn.test(Xn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Jn(Jn(e,p.ajaxSettings),t):Jn(p.ajaxSettings,e)},ajaxPrefilter:Vn(Rn),ajaxTransport:Vn(Un),ajax:function(t,n){function T(t,n,r,i){var l,y,b,E,x,T=n;if(w===2)return;w=2,u&&e.clearTimeout(u),f=undefined,o=i||"",S.readyState=t>0?4:0,l=t>=200&&t<300||t===304,r&&(E=Kn(c,S,r)),E=Qn(c,E,S,l);if(l)c.ifModified&&(x=S.getResponseHeader("Last-Modified"),x&&(p.lastModified[s]=x),x=S.getResponseHeader("etag"),x&&(p.etag[s]=x)),t===204||c.type==="HEAD"?T="nocontent":t===304?T="notmodified":(T=E.state,y=E.data,b=E.error,l=!b);else{b=T;if(t||!T)T="error",t<0&&(t=0)}S.status=t,S.statusText=(n||T)+"",l?v.resolveWith(h,[y,T,S]):v.rejectWith(h,[S,T,b]),S.statusCode(g),g=undefined,a&&d.trigger(l?"ajaxSuccess":"ajaxError",[S,c,l?y:b]),m.fireWith(h,[S,T]),a&&(d.trigger("ajaxComplete",[S,c]),--p.active||p.event.trigger("ajaxStop"))}typeof t=="object"&&(n=t,t=undefined),n=n||{};var r,i,s,o,u,a,f,l,c=p.ajaxSetup({},n),h=c.context||c,d=c.context&&(h.nodeType||h.jquery)?p(h):p.event,v=p.Deferred(),m=p.Callbacks("once memory"),g=c.statusCode||{},y={},b={},w=0,E="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(w===2){if(!l){l={};while(t=Bn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return w===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)g[t]=[g[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||E;return f&&f.abort(t),T(0,t),this}};v.promise(S).complete=m.add,S.success=S.done,S.error=S.fail,c.url=((t||c.url||Wn)+"").replace(Pn,"").replace(In,Xn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=p.trim(c.dataType||"*").toLowerCase().match(_)||[""],c.crossDomain==null&&(r=qn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===Xn[1]&&r[2]===Xn[2]&&(r[3]||(r[1]==="http:"?"80":"443"))===(Xn[3]||(Xn[1]==="http:"?"80":"443")))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=p.param(c.data,c.traditional)),$n(Rn,c,n,S);if(w===2)return S;a=p.event&&c.global,a&&p.active++===0&&p.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Fn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(_n.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Hn.test(s)?s.replace(Hn,"$1_="+Mn++):s+(_n.test(s)?"&":"?")+"_="+Mn++)),c.ifModified&&(p.lastModified[s]&&S.setRequestHeader("If-Modified-Since",p.lastModified[s]),p.etag[s]&&S.setRequestHeader("If-None-Match",p.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+zn+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)S.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,S,c)!==!1&&w!==2){E="abort";for(i in{success:1,error:1,complete:1})S[i](c[i]);f=$n(Un,c,n,S);if(!f)T(-1,"No Transport");else{S.readyState=1,a&&d.trigger("ajaxSend",[S,c]);if(w===2)return S;c.async&&c.timeout>0&&(u=e.setTimeout(function(){S.abort("timeout")},c.timeout));try{w=1,f.send(y,T)}catch(x){if(!(w<2))throw x;T(-1,x)}}return S}return S.abort()},getJSON:function(e,t,n){return p.get(e,t,n,"json")},getScript:function(e,t){return p.get(e,undefined,t,"script")}}),p.each(["get","post"],function(e,t){p[t]=function(e,n,r,i){return p.isFunction(n)&&(i=i||r,r=n,n=undefined),p.ajax(p.extend({url:e,type:t,dataType:i,data:n,success:r},p.isPlainObject(e)&&e))}}),p._evalUrl=function(e){return p.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},p.fn.extend({wrapAll:function(e){if(p.isFunction(e))return this.each(function(t){p(this).wrapAll(e.call(this,t))});if(this[0]){var t=p(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return p.isFunction(e)?this.each(function(t){p(this).wrapInner(e.call(this,t))}):this.each(function(){var t=p(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=p.isFunction(e);return this.each(function(n){p(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}}),p.expr.filters.hidden=function(e){return c.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:Yn(e)},p.expr.filters.visible=function(e){return!p.expr.filters.hidden(e)};var Zn=/%20/g,er=/\[\]$/,tr=/\r?\n/g,nr=/^(?:submit|button|image|reset|file)$/i,rr=/^(?:input|select|textarea|keygen)/i;p.param=function(e,t){var n,r=[],i=function(e,t){t=p.isFunction(t)?t():t==null?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};t===undefined&&(t=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(e)||e.jquery&&!p.isPlainObject(e))p.each(e,function(){i(this.name,this.value)});else for(n in e)ir(n,e[n],t,i);return r.join("&").replace(Zn,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=p.prop(this,"elements");return e?p.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!p(this).is(":disabled")&&rr.test(this.nodeName)&&!nr.test(e)&&(this.checked||!G.test(e))}).map(function(e,t){var n=p(this).val();return n==null?null:p.isArray(n)?p.map(n,function(e){return{name:t.name,value:e.replace(tr,"\r\n")}}):{name:t.name,value:n.replace(tr,"\r\n")}}).get()}}),p.ajaxSettings.xhr=e.ActiveXObject!==undefined?function(){return this.isLocal?fr():r.documentMode>8?ar():/^(get|post|head|put|delete|options)$/i.test(this.type)&&ar()||fr()}:ar;var sr=0,or={},ur=p.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in or)or[e](undefined,!0)}),c.cors=!!ur&&"withCredentials"in ur,ur=c.ajax=!!ur,ur&&p.ajaxTransport(function(t){if(!t.crossDomain||c.cors){var n;return{send:function(r,i){var s,o=t.xhr(),u=++sr;o.open(t.type,t.url,t.async,t.username,t.password);if(t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),!t.crossDomain&&!r["X-Requested-With"]&&(r["X-Requested-With"]="XMLHttpRequest");for(s in r)r[s]!==undefined&&o.setRequestHeader(s,r[s]+"");o.send(t.hasContent&&t.data||null),n=function(e,r){var s,a,f;if(n&&(r||o.readyState===4)){delete or[u],n=undefined,o.onreadystatechange=p.noop;if(r)o.readyState!==4&&o.abort();else{f={},s=o.status,typeof o.responseText=="string"&&(f.text=o.responseText);try{a=o.statusText}catch(l){a=""}!s&&t.isLocal&&!t.crossDomain?s=f.text?200:404:s===1223&&(s=204)}}f&&i(s,a,f,o.getAllResponseHeaders())},t.async?o.readyState===4?e.setTimeout(n):o.onreadystatechange=or[u]=n:n()},abort:function(){n&&n(undefined,!0)}}}}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return p.globalEval(e),e}}}),p.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),p.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=r.head||p("head")[0]||r.documentElement;return{send:function(i,s){t=r.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){if(n||!t.readyState||/loaded|complete/.test(t.readyState))t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||s(200,"success")},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(undefined,!0)}}}});var lr=[],cr=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=lr.pop()||p.expando+"_"+Mn++;return this[e]=!0,e}}),p.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,u=t.jsonp!==!1&&(cr.test(t.url)?"url":typeof t.data=="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&cr.test(t.data)&&"data");if(u||t.dataTypes[0]==="jsonp")return i=t.jsonpCallback=p.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(cr,"$1"+i):t.jsonp!==!1&&(t.url+=(_n.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||p.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){s===undefined?p(e).removeProp(i):e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,lr.push(i)),o&&p.isFunction(s)&&s(o[0]),o=s=undefined}),"script"}),p.parseHTML=function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||r;var i=x.exec(e),s=!n&&[];return i?[t.createElement(i[1])]:(i=ft([e],t,s),s&&s.length&&p(s).remove(),p.merge([],i.childNodes))};var hr=p.fn.load;p.fn.load=function(e,t,n){if(typeof e!="string"&&hr)return hr.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>-1&&(r=p.trim(e.slice(u,e.length)),e=e.slice(0,u)),p.isFunction(t)?(n=t,t=undefined):t&&typeof t=="object"&&(i="POST"),o.length>0&&p.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(r?p("<div>").append(p.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){p.fn[t]=function(e){return this.on(t,e)}}),p.expr.filters.animated=function(e){return p.grep(p.timers,function(t){return e===t.elem}).length},p.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=p.css(e,"position"),c=p(e),h={};l==="static"&&(e.style.position="relative"),u=c.offset(),s=p.css(e,"top"),a=p.css(e,"left"),f=(l==="absolute"||l==="fixed")&&p.inArray("auto",[s,a])>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),p.isFunction(t)&&(t=t.call(e,n,p.extend({},u))),t.top!=null&&(h.top=t.top-u.top+o),t.left!=null&&(h.left=t.left-u.left+i),"using"in t?t.using.call(e,h):c.css(h)}},p.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){p.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],s=i&&i.ownerDocument;if(!s)return;return t=s.documentElement,p.contains(t,i)?(typeof i.getBoundingClientRect!="undefined"&&(r=i.getBoundingClientRect()),n=pr(s),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return p.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),p.nodeName(e[0],"html")||(n=e.offset()),n.top+=p.css(e[0],"borderTopWidth",!0),n.left+=p.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-p.css(r,"marginTop",!0),left:t.left-n.left-p.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&!p.nodeName(e,"html")&&p.css(e,"position")==="static")e=e.offsetParent;return e||Ut})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);p.fn[e]=function(r){return Q(this,function(e,r,i){var s=pr(e);if(i===undefined)return s?t in s?s[t]:s.document.documentElement[r]:e[r];s?s.scrollTo(n?p(s).scrollLeft():i,n?i:p(s).scrollTop()):e[r]=i},e,r,arguments.length,null)}}),p.each(["top","left"],function(e,t){p.cssHooks[t]=Vt(c.pixelPosition,function(e,n){if(n)return n=Wt(e,t),qt.test(n)?p(e).position()[t]+"px":n})}),p.each({Height:"height",Width:"width"},function(e,t){p.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){p.fn[r]=function(r,i){var s=arguments.length&&(n||typeof r!="boolean"),o=n||(r===!0||i===!0?"margin":"border");return Q(this,function(t,n,r){var i;return p.isWindow(t)?t.document.documentElement["client"+e]:t.nodeType===9?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?p.css(t,n,o):p.style(t,n,r,o)},t,s?r:undefined,s,null)}})}),p.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}}),p.fn.size=function(){return this.length},p.fn.andSelf=p.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return p});var dr=e.jQuery,vr=e.$;return p.noConflict=function(t){return e.$===p&&(e.$=vr),t&&e.jQuery===p&&(e.jQuery=dr),p},t||(e.jQuery=e.$=p),p}),function(e,t){"use strict";e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,r=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=n.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&e.data("remote")!==!1},handleRemote:function(r){var i,s,o,u,a,f;if(n.fire(r,"ajax:before")){u=r.data("with-credentials")||null,a=r.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(r.is("form")){i=r.data("ujs:submit-button-formmethod")||r.attr("method"),s=r.data("ujs:submit-button-formaction")||r.attr("action"),o=e(r[0]).serializeArray();var l=r.data("ujs:submit-button");l&&(o.push(l),r.data("ujs:submit-button",null)),r.data("ujs:submit-button-formmethod",null),r.data("ujs:submit-button-formaction",null)}else r.is(n.inputChangeSelector)?(i=r.data("method"),s=r.data("url"),o=r.serialize(),r.data("params")&&(o=o+"&"+r.data("params"))):r.is(n.buttonClickSelector)?(i=r.data("method")||"get",s=r.data("url"),o=r.serialize(),r.data("params")&&(o=o+"&"+r.data("params"))):(i=r.data("method"),s=n.href(r),o=r.data("params")||null);return f={type:i||"GET",data:o,dataType:a,beforeSend:function(e,i){i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script);if(!n.fire(r,"ajax:beforeSend",[e,i]))return!1;r.trigger("ajax:send",e)},success:function(e,t,n){r.trigger("ajax:success",[e,t,n])},complete:function(e,t){r.trigger("ajax:complete",[e,t])},error:function(e,t,n){r.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(s)},u&&(f.xhrFields={withCredentials:u}),s&&(f.url=s),n.ajax(f)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,(!!n.protocol&&n.protocol!==":"||!!n.host)&&t.protocol+"//"+t.host!=n.protocol+"//"+n.host}catch(r){return!0}},handleMethod:function(r){var i=n.href(r),s=r.data("method"),o=r.attr("target"),u=n.csrfToken(),a=n.csrfParam(),f=e('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';a!==t&&u!==t&&!n.isCrossDomain(i)&&(l+='<input name="'+a+'" value="'+u+'" type="hidden" />'),o&&f.attr("target",o),f.hide().append(l).appendTo("body"),f.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,r;n=e.is("button")?"html":"val",r=e.data("disable-with"),r!==t&&(e.data("ujs:enable-with",e[n]()),e[n](r)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var n=e.is("button")?"html":"val";e.data("ujs:enable-with")!==t&&(e[n](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t=e.data("confirm"),r=!1,i;if(!t)return!0;if(n.fire(e,"confirm")){try{r=n.confirm(t)}catch(s){(console.error||console.log).call(console,s.stack||s)}i=n.fire(e,"confirm:complete",[r])}return r&&i},blankInputs:function(t,n,r){var i=e(),s,o,u,a,f=n||"input,textarea",l=t.find(f),c={};return l.each(function(){s=e(this),s.is("input[type=radio]")?(a=s.attr("name"),c[a]||(t.find('input[type=radio]:checked[name="'+a+'"]').length===0&&(u=t.find('input[type=radio][name="'+a+'"]'),i=i.add(u)),c[a]=a)):(o=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):!!s.val(),o===r&&(i=i.add(s)))}),i.length?i:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var r=e.data("disable-with");r!==t&&(e.data("ujs:enable-with",e.html()),e.html(r)),e.bind("click.railsDisable",function(e){return n.stopEverything(e)}),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},n.fire(r,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,r){e.crossDomain||n.CSRFProtection(r)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableElement(t)})}),r.on("ajax:complete",n.linkDisableSelector,function(){n.enableElement(e(this))}),r.on("ajax:complete",n.buttonDisableSelector,function(){n.enableFormElement(e(this))}),r.on("click.rails",n.linkClickSelector,function(t){var r=e(this),i=r.data("method"),s=r.data("params"),o=t.metaKey||t.ctrlKey;if(!n.allowAction(r))return n.stopEverything(t);!o&&r.is(n.linkDisableSelector)&&n.disableElement(r);if(n.isRemote(r)){if(o&&(!i||i==="GET")&&!s)return!0;var u=n.handleRemote(r);return u===!1?n.enableElement(r):u.fail(function(){n.enableElement(r)}),!1}if(i)return n.handleMethod(r),!1}),r.on("click.rails",n.buttonClickSelector,function(t){var r=e(this);if(!n.allowAction(r)||!n.isRemote(r))return n.stopEverything(t);r.is(n.buttonDisableSelector)&&n.disableFormElement(r);var i=n.handleRemote(r);return i===!1?n.enableFormElement(r):i.fail(function(){n.enableFormElement(r)}),!1}),r.on("change.rails",n.inputChangeSelector,function(t){var r=e(this);return!n.allowAction(r)||!n.isRemote(r)?n.stopEverything(t):(n.handleRemote(r),!1)}),r.on("submit.rails",n.formSubmitSelector,function(r){var i=e(this),s=n.isRemote(i),o,u;if(!n.allowAction(i))return n.stopEverything(r);if(i.attr("novalidate")===t)if(i.data("ujs:formnovalidate-button")===t){o=n.blankInputs(i,n.requiredInputSelector,!1);if(o&&n.fire(i,"ajax:aborted:required",[o]))return n.stopEverything(r)}else i.data("ujs:formnovalidate-button",t);if(s){u=n.nonBlankInputs(i,n.fileInputSelector);if(u){setTimeout(function(){n.disableFormElements(i)},13);var a=n.fire(i,"ajax:aborted:file",[u]);return a||setTimeout(function(){n.enableFormElements(i)},13),a}return n.handleRemote(i),!1}setTimeout(function(){n.disableFormElements(i)},13)}),r.on("click.rails",n.formInputClickSelector,function(t){var r=e(this);if(!n.allowAction(r))return n.stopEverything(t);var i=r.attr("name"),s=i?{name:i,value:r.val()}:null,o=r.closest("form");o.length===0&&(o=e("#"+r.attr("form"))),o.data("ujs:submit-button",s),o.data("ujs:formnovalidate-button",r.attr("formnovalidate")),o.data("ujs:submit-button-formaction",r.attr("formaction")),o.data("ujs:submit-button-formmethod",r.attr("formmethod"))}),r.on("ajax:send.rails",n.formSubmitSelector,function(t){this===t.target&&n.disableFormElements(e(this))}),r.on("ajax:complete.rails",n.formSubmitSelector,function(t){this===t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Plotly=e()}}(function(){var e;return function t(e,n,r){function i(o,u){if(!n[o]){if(!e[o]){var f="function"==typeof require&&require;if(!u&&f)return f(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r=e("../src/plotly"),i={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var s in i){var o=s.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.Lib.addStyleRule(o,i[s])}},{"../src/plotly":330}],2:[function(e,t,n){"use strict";t.exports={ascent:850,descent:-150,undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z"},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z"},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z"},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z"},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z"},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z"},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z"},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z"},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z"},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z"},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z"},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z"},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z"},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z"},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z"},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z"}}},{}],3:[function(e,t,n){"use strict";function r(e,t,n){return Math.min(t,Math.max(e,n))}function i(e,t,n){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var r=0;r<this.dimension;++r)this.bounds[0][r]=-1/0,this.bounds[1][r]=1/0;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[n],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}function s(e){for(var t=new Array(e),n=0;e>n;++n)t[n]=0;return t}function o(e,t,n){switch(arguments.length){case 0:return new i([0],[0],0);case 1:if("number"==typeof e){var r=s(e);return new i(r,r,0)}return new i(e,s(e.length),0);case 2:if("number"==typeof t){var r=s(e.length);return new i(e,r,+t)}n=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new i(e,t,n)}}t.exports=o;var u=e("cubic-hermite"),a=e("binary-search-bounds"),f=i.prototype;f.flush=function(e){var t=a.gt(this._time,e)-1;0>=t||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},f.curve=function(e){var t=this._time,n=t.length,i=a.le(t,e),s=this._scratch[0],o=this._state,f=this._velocity,c=this.dimension,h=this.bounds;if(0>i)for(var p=c-1,d=0;c>d;++d,--p)s[d]=o[p];else if(i>=n-1)for(var p=o.length-1,v=e-t[n-1],d=0;c>d;++d,--p)s[d]=o[p]+v*f[p];else{for(var p=c*(i+1)-1,m=t[i],g=t[i+1],y=g-m||1,b=this._scratch[1],w=this._scratch[2],E=this._scratch[3],S=this._scratch[4],x=!0,d=0;c>d;++d,--p)b[d]=o[p],E[d]=f[p]*y,w[d]=o[p+c],S[d]=f[p+c]*y,x=x&&b[d]===w[d]&&E[d]===S[d]&&0===E[d];if(x)for(var d=0;c>d;++d)s[d]=b[d];else u(b,E,w,S,(e-m)/y,s)}for(var T=h[0],N=h[1],d=0;c>d;++d)s[d]=r(T[d],N[d],s[d]);return s},f.dcurve=function(e){var t=this._time,n=t.length,r=a.le(t,e),i=this._scratch[0],s=this._state,o=this._velocity,f=this.dimension;if(r>=n-1)for(var c=s.length-1,h=(e-t[n-1],0);f>h;++h,--c)i[h]=o[c];else{for(var c=f*(r+1)-1,p=t[r],d=t[r+1],v=d-p||1,m=this._scratch[1],g=this._scratch[2],y=this._scratch[3],b=this._scratch[4],w=!0,h=0;f>h;++h,--c)m[h]=s[c],y[h]=o[c]*v,g[h]=s[c+f],b[h]=o[c+f]*v,w=w&&m[h]===g[h]&&y[h]===b[h]&&0===y[h];if(w)for(var h=0;f>h;++h)i[h]=0;else{u.derivative(m,y,g,b,(e-p)/v,i);for(var h=0;f>h;++h)i[h]/=v}}return i},f.lastT=function(){var e=this._time;return e[e.length-1]},f.stable=function(){for(var e=this._velocity,t=e.length,n=this.dimension-1;n>=0;--n)if(e[--t])return!1;return!0},f.jump=function(e){var t=this.lastT(),n=this.dimension;if(!(t>e||arguments.length!==n+1)){var i=this._state,s=this._velocity,o=i.length-this.dimension,u=this.bounds,a=u[0],f=u[1];this._time.push(t,e);for(var l=0;2>l;++l)for(var c=0;n>c;++c)i.push(i[o++]),s.push(0);this._time.push(e);for(var c=n;c>0;--c)i.push(r(a[c-1],f[c-1],arguments[c])),s.push(0)}},f.push=function(e){var t=this.lastT(),n=this.dimension;if(!(t>e||arguments.length!==n+1)){var i=this._state,s=this._velocity,o=i.length-this.dimension,u=e-t,a=this.bounds,f=a[0],l=a[1],c=u>1e-6?1/u:0;this._time.push(e);for(var h=n;h>0;--h){var p=r(f[h-1],l[h-1],arguments[h]);i.push(p),s.push((p-i[o++])*c)}}},f.set=function(e){var t=this.dimension;if(!(e<this.lastT()||arguments.length!==t+1)){var n=this._state,i=this._velocity,s=this.bounds,o=s[0],u=s[1];this._time.push(e);for(var a=t;a>0;--a)n.push(r(o[a-1],u[a-1],arguments[a])),i.push(0)}},f.move=function(e){var t=this.lastT(),n=this.dimension;if(!(t>=e||arguments.length!==n+1)){var i=this._state,s=this._velocity,o=i.length-this.dimension,u=this.bounds,a=u[0],f=u[1],l=e-t,c=l>1e-6?1/l:0;this._time.push(e);for(var h=n;h>0;--h){var p=arguments[h];i.push(r(a[h-1],f[h-1],i[o++]+p)),s.push(p*c)}}},f.idle=function(e){var t=this.lastT();if(!(t>e)){var n=this.dimension,i=this._state,s=this._velocity,o=i.length-n,u=this.bounds,a=u[0],f=u[1],l=e-t;this._time.push(e);for(var c=n-1;c>=0;--c)i.push(r(a[c],f[c],i[o]+l*s[o])),s.push(0),o+=1}}},{"binary-search-bounds":4,"cubic-hermite":5}],4:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){var o=["function ",e,"(a,l,h,",r.join(","),"){",s?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return s?t.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",t,"){i=m;"),n?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),s?o.push("return -1};"):o.push("return i};"),o.join("")}function i(e,t,n,i){var s=new Function([r("A","x"+e+"y",t,["y"],!1,i),r("B","x"+e+"y",t,["y"],!0,i),r("P","c(x,y)"+e+"0",t,["y","c"],!1,i),r("Q","c(x,y)"+e+"0",t,["y","c"],!0,i),"function dispatchBsearch",n,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",n].join(""));return s()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],5:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){var o=6*i*i-6*i,u=3*i*i-4*i+1,a=-6*i*i+6*i,f=3*i*i-2*i;if(e.length){s||(s=new Array(e.length));for(var l=e.length-1;l>=0;--l)s[l]=o*e[l]+u*t[l]+a*n[l]+f*r[l];return s}return o*e+u*t+a*n[l]+f*r}function i(e,t,n,r,i,s){var o=i-1,u=i*i,a=o*o,f=(1+2*i)*a,l=i*a,c=u*(3-2*i),h=u*o;if(e.length){s||(s=new Array(e.length));for(var p=e.length-1;p>=0;--p)s[p]=f*e[p]+l*t[p]+c*n[p]+h*r[p];return s}return f*e+l*t+c*n+h*r}t.exports=i,t.exports.derivative=r},{}],6:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2];return e[0]=i*a-s*u,e[1]=s*o-r*a,e[2]=r*u-i*o,e}t.exports=r},{}],7:[function(e,t,n){function r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=r},{}],8:[function(e,t,n){function r(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}t.exports=r},{}],9:[function(e,t,n){function r(e,t,n,r){var i=t[0],s=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e}t.exports=r},{}],10:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}t.exports=r},{}],11:[function(e,t,n){"use strict";function r(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}function i(e){e=e||{};var t=e.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new r(t)}var s=e("binary-search-bounds"),o=e("mat4-interpolate"),u=e("gl-mat4/invert"),a=e("gl-mat4/rotateX"),f=e("gl-mat4/rotateY"),l=e("gl-mat4/rotateZ"),c=e("gl-mat4/lookAt"),h=e("gl-mat4/translate"),p=(e("gl-mat4/scale"),e("gl-vec3/normalize")),d=[0,0,0];t.exports=i;var v=r.prototype;v.recalcMatrix=function(e){var t=this._time,n=s.le(t,e),r=this.computedMatrix;if(!(0>n)){var i=this._components;if(n===t.length-1)for(var a=16*n,f=0;16>f;++f)r[f]=i[a++];else{for(var l=t[n+1]-t[n],a=16*n,c=this.prevMatrix,h=!0,f=0;16>f;++f)c[f]=i[a++];for(var d=this.nextMatrix,f=0;16>f;++f)d[f]=i[a++],h=h&&c[f]===d[f];if(1e-6>l||h)for(var f=0;16>f;++f)r[f]=c[f];else o(r,c,d,(e-t[n])/l)}var v=this.computedUp;v[0]=r[1],v[1]=r[5],v[2]=r[6],p(v,v);var m=this.computedInverse;u(m,r);var g=this.computedEye,y=m[15];g[0]=m[12]/y,g[1]=m[13]/y,g[2]=m[14]/y;for(var b=this.computedCenter,w=Math.exp(this.computedRadius[0]),f=0;3>f;++f)b[f]=g[f]-r[2+4*f]*w}},v.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,n=t.length-16,r=0;16>r;++r)t.push(t[n++]);this._time.push(e)}},v.flush=function(e){var t=s.gt(this._time,e)-2;0>t||(this._time.slice(0,t),this._components.slice(0,16*t))},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(e,t,n,r){this.recalcMatrix(e),t=t||this.computedEye,n=n||d,r=r||this.computedUp,this.setMatrix(e,c(this.computedMatrix,t,n,r));for(var i=0,s=0;3>s;++s)i+=Math.pow(n[s]-t[s],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},v.rotate=function(e,t,n,r){this.recalcMatrix(e);var i=this.computedInverse;t&&f(i,i,t),n&&a(i,i,n),r&&l(i,i,r),this.setMatrix(e,u(this.computedMatrix,i))};var m=[0,0,0];v.pan=function(e,t,n,r){m[0]=-(t||0),m[1]=-(n||0),m[2]=-(r||0),this.recalcMatrix(e);var i=this.computedInverse;h(i,i,m),this.setMatrix(e,u(i,i))},v.translate=function(e,t,n,r){m[0]=t||0,m[1]=n||0,m[2]=r||0,this.recalcMatrix(e);var i=this.computedMatrix;h(i,i,m),this.setMatrix(e,i)},v.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var n=0;16>n;++n)this._components.push(t[n])}},v.setDistance=function(e,t){this.computedRadius[0]=t},v.setDistanceLimits=function(e,t){var n=this._limits;n[0]=e,n[1]=t},v.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},{"binary-search-bounds":12,"gl-mat4/invert":78,"gl-mat4/lookAt":79,"gl-mat4/rotateX":83,"gl-mat4/rotateY":84,"gl-mat4/rotateZ":85,"gl-mat4/scale":86,"gl-mat4/translate":87,"gl-vec3/normalize":10,"mat4-interpolate":13}],12:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{dup:4}],13:[function(e,t,n){function r(e,t,n,r){if(0===l(t)||0===l(n))return!1;var i=f(t,h.translate,h.scale,h.skew,h.perspective,h.quaternion),s=f(n,p.translate,p.scale,p.skew,p.perspective,p.quaternion);return i&&s?(u(d.translate,h.translate,p.translate,r),u(d.skew,h.skew,p.skew,r),u(d.scale,h.scale,p.scale,r),u(d.perspective,h.perspective,p.perspective,r),c(d.quaternion,h.quaternion,p.quaternion,r),a(e,d.translate,d.scale,d.skew,d.perspective,d.quaternion),!0):!1}function i(){return{translate:s(),scale:s(1),skew:s(),perspective:o(),quaternion:o()}}function s(e){return[e||0,e||0,e||0]}function o(){return[0,0,0,1]}var u=e("gl-vec3/lerp"),a=e("mat4-recompose"),f=e("mat4-decompose"),l=e("gl-mat4/determinant"),c=e("quat-slerp"),h=i(),p=i(),d=i();t.exports=r},{"gl-mat4/determinant":74,"gl-vec3/lerp":9,"mat4-decompose":14,"mat4-recompose":16,"quat-slerp":17}],14:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e}function i(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function s(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}var o=e("./normalize"),u=e("gl-mat4/create"),a=e("gl-mat4/clone"),f=e("gl-mat4/determinant"),l=e("gl-mat4/invert"),c=e("gl-mat4/transpose"),h={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},p=u(),d=u(),v=[0,0,0,0],m=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];t.exports=function(e,t,n,u,y,b){if(t||(t=[0,0,0]),n||(n=[0,0,0]),u||(u=[0,0,0]),y||(y=[0,0,0,1]),b||(b=[0,0,0,1]),!o(p,e))return!1;if(a(d,p),d[3]=0,d[7]=0,d[11]=0,d[15]=1,Math.abs(f(d)<1e-8))return!1;var w=p[3],E=p[7],S=p[11],x=p[12],T=p[13],N=p[14],C=p[15];if(0!==w||0!==E||0!==S){v[0]=w,v[1]=E,v[2]=S,v[3]=C;var k=l(d,d);if(!k)return!1;c(d,d),r(y,v,d)}else y[0]=y[1]=y[2]=0,y[3]=1;if(t[0]=x,t[1]=T,t[2]=N,i(m,p),n[0]=h.length(m[0]),h.normalize(m[0],m[0]),u[0]=h.dot(m[0],m[1]),s(m[1],m[1],m[0],1,-u[0]),n[1]=h.length(m[1]),h.normalize(m[1],m[1]),u[0]/=n[1],u[1]=h.dot(m[0],m[2]),s(m[2],m[2],m[0],1,-u[1]),u[2]=h.dot(m[1],m[2]),s(m[2],m[2],m[1],1,-u[2]),n[2]=h.length(m[2]),h.normalize(m[2],m[2]),u[1]/=n[2],u[2]/=n[2],h.cross(g,m[1],m[2]),h.dot(m[0],g)<0)for(var L=0;3>L;L++)n[L]*=-1,m[L][0]*=-1,m[L][1]*=-1,m[L][2]*=-1;return b[0]=.5*Math.sqrt(Math.max(1+m[0][0]-m[1][1]-m[2][2],0)),b[1]=.5*Math.sqrt(Math.max(1-m[0][0]+m[1][1]-m[2][2],0)),b[2]=.5*Math.sqrt(Math.max(1-m[0][0]-m[1][1]+m[2][2],0)),b[3]=.5*Math.sqrt(Math.max(1+m[0][0]+m[1][1]+m[2][2],0)),m[2][1]>m[1][2]&&(b[0]=-b[0]),m[0][2]>m[2][0]&&(b[1]=-b[1]),m[1][0]>m[0][1]&&(b[2]=-b[2]),!0}},{"./normalize":15,"gl-mat4/clone":72,"gl-mat4/create":73,"gl-mat4/determinant":74,"gl-mat4/invert":78,"gl-mat4/transpose":88,"gl-vec3/cross":6,"gl-vec3/dot":7,"gl-vec3/length":8,"gl-vec3/normalize":10}],15:[function(e,t,n){t.exports=function(e,t){var n=t[15];if(0===n)return!1;for(var r=1/n,i=0;16>i;i++)e[i]=t[i]*r;return!0}},{}],16:[function(e,t,n){var r={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")},i=(r.create(),r.create());t.exports=function(e,t,n,s,o,u){return r.identity(e),r.fromRotationTranslation(e,u,t),e[3]=o[0],e[7]=o[1],e[11]=o[2],e[15]=o[3],r.identity(i),0!==s[2]&&(i[9]=s[2],r.multiply(e,e,i)),0!==s[1]&&(i[9]=0,i[8]=s[1],r.multiply(e,e,i)),0!==s[0]&&(i[8]=0,i[4]=s[0],r.multiply(e,e,i)),r.scale(e,e,n),e}},{"gl-mat4/create":73,"gl-mat4/fromRotationTranslation":76,"gl-mat4/identity":77,"gl-mat4/multiply":80,"gl-mat4/scale":86,"gl-mat4/translate":87}],17:[function(e,t,n){t.exports=e("gl-quat/slerp")},{"gl-quat/slerp":18}],18:[function(e,t,n){function r(e,t,n,r){var i,s,o,u,a,f=t[0],l=t[1],c=t[2],h=t[3],p=n[0],d=n[1],v=n[2],m=n[3];return s=f*p+l*d+c*v+h*m,0>s&&(s=-s,p=-p,d=-d,v=-v,m=-m),1-s>1e-6?(i=Math.acos(s),o=Math.sin(i),u=Math.sin((1-r)*i)/o,a=Math.sin(r*i)/o):(u=1-r,a=r),e[0]=u*f+a*p,e[1]=u*l+a*d,e[2]=u*c+a*v,e[3]=u*h+a*m,e}t.exports=r},{}],19:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o,u,a,f){var l=t+s+f;if(c>0){var c=Math.sqrt(l+1);e[0]=.5*(o-a)/c,e[1]=.5*(u-r)/c,e[2]=.5*(n-s)/c,e[3]=.5*c}else{var h=Math.max(t,s,f),c=Math.sqrt(2*h-l+1);t>=h?(e[0]=.5*c,e[1]=.5*(i+n)/c,e[2]=.5*(u+r)/c,e[3]=.5*(o-a)/c):s>=h?(e[0]=.5*(n+i)/c,e[1]=.5*c,e[2]=.5*(a+o)/c,e[3]=.5*(u-r)/c):(e[0]=.5*(r+u)/c,e[1]=.5*(o+a)/c,e[2]=.5*c,e[3]=.5*(n-i)/c)}return e}t.exports=r},{}],20:[function(e,t,n){"use strict";function r(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function i(e,t,n,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2)+Math.pow(r,2))}function s(e,t){var n=t[0],r=t[1],s=t[2],o=t[3],u=i(n,r,s,o);u>1e-6?(e[0]=n/u,e[1]=r/u,e[2]=s/u,e[3]=o/u):(e[0]=e[1]=e[2]=0,e[3]=1)}function o(e,t,n){this.radius=a([n]),this.center=a(t),this.rotation=a(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}function u(e){e=e||{};var t=e.center||[0,0,0],n=e.rotation||[0,0,0,1],r=e.radius||1;t=[].slice.call(t,0,3),n=[].slice.call(n,0,4),s(n,n);var i=new o(n,t,Math.log(r));return i.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&i.lookAt(0,e.eye,e.center,e.up),i}t.exports=u;var a=e("filtered-vector"),f=e("gl-mat4/lookAt"),l=e("gl-mat4/fromQuat"),c=e("gl-mat4/invert"),h=e("./lib/quatFromFrame"),p=o.prototype;p.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},p.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;s(t,t);var n=this.computedMatrix;l(n,t);var r=this.computedCenter,i=this.computedEye,o=this.computedUp,u=Math.exp(this.computedRadius[0]);i[0]=r[0]+u*n[2],i[1]=r[1]+u*n[6],i[2]=r[2]+u*n[10],o[0]=n[1],o[1]=n[5],o[2]=n[9];for(var a=0;3>a;++a){for(var f=0,c=0;3>c;++c)f+=n[a+4*c]*i[c];n[12+a]=-f}},p.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;16>r;++r)t[r]=n[r];return t}return n},p.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},p.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},p.pan=function(e,t,n,i){t=t||0,n=n||0,i=i||0,this.recalcMatrix(e);var s=this.computedMatrix,o=s[1],u=s[5],a=s[9],f=r(o,u,a);o/=f,u/=f,a/=f;var l=s[0],c=s[4],h=s[8],p=l*o+c*u+h*a;l-=o*p,c-=u*p,h-=a*p;var d=r(l,c,h);l/=d,c/=d,h/=d;var v=s[2],m=s[6],g=s[10],y=v*o+m*u+g*a,b=v*l+m*c+g*h;v-=y*o+b*l,m-=y*u+b*c,g-=y*a+b*h;var w=r(v,m,g);v/=w,m/=w,g/=w;var E=l*t+o*n,S=c*t+u*n,x=h*t+a*n;this.center.move(e,E,S,x);var T=Math.exp(this.computedRadius[0]);T=Math.max(1e-4,T+i),this.radius.set(e,Math.log(T))},p.rotate=function(e,t,n,s){this.recalcMatrix(e),t=t||0,n=n||0;var o=this.computedMatrix,u=o[0],a=o[4],f=o[8],l=o[1],c=o[5],h=o[9],p=o[2],d=o[6],v=o[10],m=t*u+n*l,g=t*a+n*c,y=t*f+n*h,b=-(d*y-v*g),w=-(v*m-p*y),E=-(p*g-d*m),S=Math.sqrt(Math.max(0,1-Math.pow(b,2)-Math.pow(w,2)-Math.pow(E,2))),x=i(b,w,E,S);x>1e-6?(b/=x,w/=x,E/=x,S/=x):(b=w=E=0,S=1);var T=this.computedRotation,N=T[0],C=T[1],k=T[2],L=T[3],A=N*S+L*b+C*E-k*w,O=C*S+L*w+k*b-N*E,M=k*S+L*E+N*w-C*b,_=L*S-N*b-C*w-k*E;if(s){b=p,w=d,E=v;var D=Math.sin(s)/r(b,w,E);b*=D,w*=D,E*=D,S=Math.cos(t),A=A*S+_*b+O*E-M*w,O=O*S+_*w+M*b-A*E,M=M*S+_*E+A*w-O*b,_=_*S-A*b-O*w-M*E}var P=i(A,O,M,_);P>1e-6?(A/=P,O/=P,M/=P,_/=P):(A=O=M=0,_=1),this.rotation.set(e,A,O,M,_)},p.lookAt=function(e,t,n,r){this.recalcMatrix(e),n=n||this.computedCenter,t=t||this.computedEye,r=r||this.computedUp;var i=this.computedMatrix;f(i,t,n,r);var o=this.computedRotation;h(o,i[0],i[1],i[2],i[4],i[5],i[6],i[8],i[9],i[10]),s(o,o),this.rotation.set(e,o[0],o[1],o[2],o[3]);for(var u=0,a=0;3>a;++a)u+=Math.pow(n[a]-t[a],2);this.radius.set(e,.5*Math.log(Math.max(u,1e-6))),this.center.set(e,n[0],n[1],n[2])},p.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},p.setMatrix=function(e,t){var n=this.computedRotation;h(n,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),s(n,n),this.rotation.set(e,n[0],n[1],n[2],n[3]);var r=this.computedMatrix;c(r,t);var i=r[15];if(Math.abs(i)>1e-6){var o=r[12]/i,u=r[13]/i,a=r[14]/i;this.recalcMatrix(e);var f=Math.exp(this.computedRadius[0]);this.center.set(e,o-r[2]*f,u-r[6]*f,a-r[10]*f),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},p.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},p.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},p.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},p.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},p.fromJSON=function(e){var t=this.lastT(),n=e.center;n&&this.center.set(t,n[0],n[1],n[2]);var r=e.rotation;r&&this.rotation.set(t,r[0],r[1],r[2],r[3]);var i=e.distance;i&&i>0&&this.radius.set(t,Math.log(i)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},{"./lib/quatFromFrame":19,"filtered-vector":3,"gl-mat4/fromQuat":75,"gl-mat4/invert":78,"gl-mat4/lookAt":79}],21:[function(e,t,n){"use strict";function r(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function i(e){return Math.min(1,Math.max(-1,e))}function s(e){var t=Math.abs(e[0]),n=Math.abs(e[1]),r=Math.abs(e[2]),i=[0,0,0];t>Math.max(n,r)?i[2]=1:n>Math.max(t,r)?i[0]=1:i[1]=1;for(var s=0,o=0,u=0;3>u;++u)s+=e[u]*e[u],o+=i[u]*e[u];for(var u=0;3>u;++u)i[u]-=o/s*e[u];return h(i,i),i}function o(e,t,n,r,i,s,o,u){this.center=a(n),this.up=a(r),this.right=a(i),this.radius=a([s]),this.angle=a([o,u]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var f=0;16>f;++f)this.computedMatrix[f]=.5;this.recalcMatrix(0)}function u(e){e=e||{};var t=e.center||[0,0,0],n=e.up||[0,1,0],i=e.right||s(n),u=e.radius||1,a=e.theta||0,f=e.phi||0;if(t=[].slice.call(t,0,3),n=[].slice.call(n,0,3),h(n,n),i=[].slice.call(i,0,3),h(i,i),"eye"in e){var l=e.eye,d=[l[0]-t[0],l[1]-t[1],l[2]-t[2]];c(i,d,n),r(i[0],i[1],i[2])<1e-6?i=s(n):h(i,i),u=r(d[0],d[1],d[2]);var v=p(n,d)/u,m=p(i,d)/u;f=Math.acos(v),a=Math.acos(m)}return u=Math.log(u),new o(e.zoomMin,e.zoomMax,t,n,i,u,a,f)}t.exports=u;var a=e("filtered-vector"),f=e("gl-mat4/invert"),l=e("gl-mat4/rotate"),c=e("gl-vec3/cross"),h=e("gl-vec3/normalize"),p=e("gl-vec3/dot"),d=o.prototype;d.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},d.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},d.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var t=this.computedUp,n=this.computedRight,i=0,s=0,o=0;3>o;++o)s+=t[o]*n[o],i+=t[o]*t[o];for(var u=Math.sqrt(i),a=0,o=0;3>o;++o)n[o]-=t[o]*s/i,a+=n[o]*n[o],t[o]/=u;for(var f=Math.sqrt(a),o=0;3>o;++o)n[o]/=f;var l=this.computedToward;c(l,t,n),h(l,l);for(var p=Math.exp(this.computedRadius[0]),d=this.computedAngle[0],v=this.computedAngle[1],m=Math.cos(d),g=Math.sin(d),y=Math.cos(v),b=Math.sin(v),w=this.computedCenter,E=m*y,S=g*y,x=b,T=-m*b,N=-g*b,C=y,k=this.computedEye,L=this.computedMatrix,o=0;3>o;++o){var A=E*n[o]+S*l[o]+x*t[o];L[4*o+1]=T*n[o]+N*l[o]+C*t[o],L[4*o+2]=A,L[4*o+3]=0}var O=L[1],M=L[5],_=L[9],D=L[2],P=L[6],H=L[10],B=M*H-_*P,j=_*D-O*H,F=O*P-M*D,I=r(B,j,F);B/=I,j/=I,F/=I,L[0]=B,L[4]=j,L[8]=F;for(var o=0;3>o;++o)k[o]=w[o]+L[2+4*o]*p;for(var o=0;3>o;++o){for(var a=0,q=0;3>q;++q)a+=L[o+4*q]*k[q];L[12+o]=-a}L[15]=1},d.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;16>r;++r)t[r]=n[r];return t}return n};var v=[0,0,0];d.rotate=function(e,t,n,r){if(this.angle.move(e,t,n),r){this.recalcMatrix(e);var i=this.computedMatrix;v[0]=i[2],v[1]=i[6],v[2]=i[10];for(var s=this.computedUp,o=this.computedRight,u=this.computedToward,a=0;3>a;++a)i[4*a]=s[a],i[4*a+1]=o[a],i[4*a+2]=u[a];l(i,i,r,v);for(var a=0;3>a;++a)s[a]=i[4*a],o[a]=i[4*a+1];this.up.set(e,s[0],s[1],s[2]),this.right.set(e,o[0],o[1],o[2])}},d.pan=function(e,t,n,i){t=t||0,n=n||0,i=i||0,this.recalcMatrix(e);var s=this.computedMatrix,o=(Math.exp(this.computedRadius[0]),s[1]),u=s[5],a=s[9],f=r(o,u,a);o/=f,u/=f,a/=f;var l=s[0],c=s[4],h=s[8],p=l*o+c*u+h*a;l-=o*p,c-=u*p,h-=a*p;var d=r(l,c,h);l/=d,c/=d,h/=d;var v=l*t+o*n,m=c*t+u*n,g=h*t+a*n;this.center.move(e,v,m,g);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+i),this.radius.set(e,Math.log(y))},d.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},d.setMatrix=function(e,t,n,s){var o=1;"number"==typeof n&&(o=0|n),(0>o||o>3)&&(o=1);var u=(o+2)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var a=t[o],l=t[o+4],c=t[o+8];if(s){var h=Math.abs(a),p=Math.abs(l),d=Math.abs(c),v=Math.max(h,p,d);h===v?(a=0>a?-1:1,l=c=0):d===v?(c=0>c?-1:1,a=l=0):(l=0>l?-1:1,a=c=0)}else{var m=r(a,l,c);a/=m,l/=m,c/=m}var g=t[u],y=t[u+4],b=t[u+8],w=g*a+y*l+b*c;g-=a*w,y-=l*w,b-=c*w;var E=r(g,y,b);g/=E,y/=E,b/=E;var S=l*b-c*y,x=c*g-a*b,T=a*y-l*g,N=r(S,x,T);S/=N,x/=N,T/=N,this.center.jump(e,W,X,V),this.radius.idle(e),this.up.jump(e,a,l,c),this.right.jump(e,g,y,b);var C,k;if(2===o){var L=t[1],A=t[5],O=t[9],M=L*g+A*y+O*b,_=L*S+A*x+O*T;C=0>B?-Math.PI/2:Math.PI/2,k=Math.atan2(_,M)}else{var D=t[2],P=t[6],H=t[10],B=D*a+P*l+H*c,j=D*g+P*y+H*b,F=D*S+P*x+H*T;C=Math.asin(i(B)),k=Math.atan2(F,j)}this.angle.jump(e,k,C),this.recalcMatrix(e);var I=t[2],q=t[6],R=t[10],U=this.computedMatrix;f(U,t);var z=U[15],W=U[12]/z,X=U[13]/z,V=U[14]/z,$=Math.exp(this.computedRadius[0]);this.center.jump(e,W-I*$,X-q*$,V-R*$)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},d.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},d.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},d.lookAt=function(e,t,n,s){this.recalcMatrix(e),t=t||this.computedEye,n=n||this.computedCenter,s=s||this.computedUp;var o=s[0],u=s[1],a=s[2],f=r(o,u,a);if(!(1e-6>f)){o/=f,u/=f,a/=f;var l=t[0]-n[0],c=t[1]-n[1],h=t[2]-n[2],p=r(l,c,h);if(!(1e-6>p)){l/=p,c/=p,h/=p;var d=this.computedRight,v=d[0],m=d[1],g=d[2],y=o*v+u*m+a*g;v-=y*o,m-=y*u,g-=y*a;var b=r(v,m,g);if(!(.01>b&&(v=u*h-a*c,m=a*l-o*h,g=o*c-u*l,b=r(v,m,g),1e-6>b))){v/=b,m/=b,g/=b,this.up.set(e,o,u,a),this.right.set(e,v,m,g),this.center.set(e,n[0],n[1],n[2]),this.radius.set(e,Math.log(p));var w=u*g-a*m,E=a*v-o*g,S=o*m-u*v,x=r(w,E,S);w/=x,E/=x,S/=x;var T=o*l+u*c+a*h,N=v*l+m*c+g*h,C=w*l+E*c+S*h,k=Math.asin(i(T)),L=Math.atan2(C,N),A=this.angle._state,O=A[A.length-1],M=A[A.length-2];O%=2*Math.PI;var _=Math.abs(O+2*Math.PI-L),D=Math.abs(O-L),P=Math.abs(O-2*Math.PI-L);D>_&&(O+=2*Math.PI),D>P&&(O-=2*Math.PI),this.angle.jump(this.angle.lastT(),O,M),this.angle.set(e,L,k)}}}}},{"filtered-vector":3,"gl-mat4/invert":78,"gl-mat4/rotate":82,"gl-vec3/cross":6,"gl-vec3/dot":7,"gl-vec3/normalize":10}],22:[function(e,t,n){"use strict";function r(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map(function(t){return e[t]}),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}function i(e){e=e||{};var t=e.eye||[0,0,1],n=e.center||[0,0,0],i=e.up||[0,1,0],a=e.distanceLimits||[0,1/0],f=e.mode||"turntable",l=s(),c=o(),h=u();return l.setDistanceLimits(a[0],a[1]),l.lookAt(0,t,n,i),c.setDistanceLimits(a[0],a[1]),c.lookAt(0,t,n,i),h.setDistanceLimits(a[0],a[1]),h.lookAt(0,t,n,i),new r({turntable:l,orbit:c,matrix:h},f)}t.exports=i;var s=e("turntable-camera-controller"),o=e("orbit-camera-controller"),u=e("matrix-camera-controller"),a=r.prototype,f=[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]];f.forEach(function(e){for(var t=e[0],n=[],r=0;r<e[1];++r)n.push("a"+r);var i="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+e[0]+"("+n.join()+")}";a[t]=Function.apply(null,n.concat(i))}),a.recalcMatrix=function(e){this._active.recalcMatrix(e)},a.getDistance=function(e){return this._active.getDistance(e)},a.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},a.lastT=function(){return this._active.lastT()},a.setMode=function(e){if(e!==this._mode){var t=this._controllerNames.indexOf(e);if(!(0>t)){var n=this._active,r=this._controllerList[t],i=Math.max(n.lastT(),r.lastT());n.recalcMatrix(i),r.setMatrix(i,n.computedMatrix),this._active=r,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},a.getMode=function(){return this._mode}},{"matrix-camera-controller":11,"orbit-camera-controller":20,"turntable-camera-controller":21}],23:[function(e,t,n){function r(e,t){return s(i(e,t))}t.exports=r;var i=e("alpha-complex"),s=e("simplicial-complex-boundary")},{"alpha-complex":24,"simplicial-complex-boundary":27}],24:[function(e,t,n){"use strict";function r(e,t){return i(t).filter(function(n){for(var r=new Array(n.length),i=0;i<n.length;++i)r[i]=t[n[i]];return s(r)*e<1})}t.exports=r;var i=e("delaunay-triangulate"),s=e("circumradius")},{circumradius:25,"delaunay-triangulate":54}],25:[function(e,t,n){function r(e){for(var t=i(e),n=0,r=0;r<e.length;++r)for(var s=e[r],o=0;o<t.length;++o)n+=Math.pow(s[o]-t[o],2);return Math.sqrt(n/e.length)}t.exports=r;var i=e("circumcenter")},{circumcenter:26}],26:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=e.length,i=0;r>i;++i)n+=e[i]*t[i];return n}function i(e){var t=e.length;if(0===t)return[];var n=(e[0].length,o([e.length+1,e.length+1],1)),i=o([e.length+1],1);n[t][t]=0;for(var s=0;t>s;++s){for(var a=0;s>=a;++a)n[a][s]=n[s][a]=2*r(e[s],e[a]);i[s]=r(e[s],e[s])}for(var f=u(n,i),l=0,c=f[t+1],s=0;s<c.length;++s)l+=c[s];for(var h=new Array(t),s=0;t>s;++s){for(var c=f[s],p=0,a=0;a<c.length;++a)p+=c[a];h[s]=p/l}return h}function s(e){if(0===e.length)return[];for(var t=e[0].length,n=o([t]),r=i(e),s=0;s<e.length;++s)for(var u=0;t>u;++u)n[u]+=e[s][u]*r[s];return n}var o=e("dup"),u=e("robust-linear-solve");s.barycenetric=i,t.exports=s},{dup:55,"robust-linear-solve":192}],27:[function(e,t,n){"use strict";function r(e){return s(i(e))}t.exports=r;var i=e("boundary-cells"),s=e("reduce-simplicial-complex")},{"boundary-cells":28,"reduce-simplicial-complex":31}],28:[function(e,t,n){"use strict";function r(e){for(var t=e.length,n=0,r=0;t>r;++r)n+=e[r].length;for(var i=new Array(n),s=0,r=0;t>r;++r)for(var o=e[r],u=o.length,a=0;u>a;++a)for(var f=i[s++]=new Array(u-1),l=1;u>l;++l)f[l-1]=o[(a+l)%u];return i}t.exports=r},{}],29:[function(e,t,n){"use strict";function r(e){for(var t=1,n=1;n<e.length;++n)for(var r=0;n>r;++r)if(e[n]<e[r])t=-t;else if(e[r]===e[n])return 0;return t}t.exports=r},{}],30:[function(e,t,n){"use strict";function r(e,t){return i(e,t)||s(e)-s(t)}var i=e("compare-cell"),s=e("cell-orientation");t.exports=r},{"cell-orientation":29,"compare-cell":41}],31:[function(e,t,n){"use strict";function r(e){e.sort(s);for(var t=e.length,n=0,r=0;t>r;++r){var u=e[r],f=o(u);if(0!==f){if(n>0){var l=e[n-1];if(0===i(u,l)&&o(l)!==f){n-=1;continue}}e[n++]=u}}return e.length=n,e}var i=e("compare-cell"),s=e("compare-oriented-cell"),o=e("cell-orientation");t.exports=r},{"cell-orientation":29,"compare-cell":41,"compare-oriented-cell":30}],32:[function(e,t,n){"use strict";var r=function(){function e(e){return!Array.isArray(e)&&null!==e&&"object"==typeof e}function t(e,t,n){for(var r=(t-e)/(n-1),i=[],s=0;n>s;s++)i.push(e+s*r);return i}function n(){for(var e=[].slice.call(arguments),t=e.map(function(e){return e.length}),n=Math.min.apply(null,t),r=[],i=0;n>i;i++){r[i]=[];for(var s=0;s<e.length;++s)r[i][s]=e[s][i]}return r}function r(e,t,n){for(var r=Math.min.apply(null,[e.length,t.length,n.length]),i=[],s=0;r>s;s++)i.push([e[s],t[s],n[s]]);return i}function i(e){function t(e){for(var r=0;r<e.length;r++)Array.isArray(e[r])?t(e[r],n):n+=e[r]}var n=0;return t(e,n),n}function s(e){for(var t=[],n=0;n<e.length;++n){t[n]=[];for(var r=0;r<e[n].length;++r)t[n][r]=e[n][r]}return t}function o(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n];return t}function u(e,t){if(e.length!==t.length)return!1;for(var n=e.length;n--;)if(e[n]!==t[n])return!1;return!0}function a(e,t){var n,r;if("string"!=typeof e)return e;if(n=[],"#"===e[0]?(e=e.substr(1),3===e.length&&(e+=e),r=parseInt(e,16),n[0]=r>>16&255,n[1]=r>>8&255,n[2]=255&r):c.test(e)&&(r=e.match(h),n[0]=parseInt(r[1]),n[1]=parseInt(r[2]),n[2]=parseInt(r[3])),!t)for(var i=0;3>i;++i)n[i]=n[i]/255;return n}function f(e,t){var n,r;if("string"!=typeof e)return e;if(n=[],"#"===e[0]?(e=e.substr(1),3===e.length&&(e+=e),r=parseInt(e,16),n[0]=r>>16&255,n[1]=r>>8&255,n[2]=255&r):c.test(e)&&(r=e.match(h),n[0]=parseInt(r[1]),n[1]=parseInt(r[2]),n[2]=parseInt(r[3]),r[4]?n[3]=parseFloat(r[4]):n[3]=1),!t)for(var i=0;3>i;++i)n[i]=n[i]/255;return n}var l={},c=/^rgba?\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*(,.*)?\)$/,h=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?\s*(.*)?\)$/;return l.isPlainObject=e,l.linspace=t,l.zip3=r,l.sum=i,l.zip=n,l.isEqual=u,l.copy2D=s,l.copy1D=o,l.str2RgbArray=a,l.str2RgbaArray=f,l};t.exports=r()},{}],33:[function(e,t,n){"use strict";"use restrict";function r(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var i=32;n.INT_BITS=i,n.INT_MAX=2147483647,n.INT_MIN=-1<<i-1,n.sign=function(e){return(e>0)-(0>e)},n.abs=function(e){var t=e>>i-1;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(t>e)},n.max=function(e,t){return e^(e^t)&-(t>e)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,t|=n,t|e>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var s=new Array(256);!function(e){for(var t=0;256>t;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(s),n.reverse=function(e){return s[255&e]<<24|s[e>>>8&255]<<16|s[e>>>16&255]<<8|s[e>>>24&255]},n.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},n.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},n.interleave3=function(e,t,n){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),e|n<<2},n.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},{}],34:[function(e,t,n){(function(t){function i(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function s(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e){return this instanceof o?(this.length=0,this.parent=void 0,"number"==typeof e?u(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):f(this,e)):arguments.length>1?new o(e,arguments[1]):new o(e)}function u(e,t){if(e=m(e,0>t?0:0|g(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function a(e,t,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|b(t,n);return e=m(e,r),e.write(t,n),e}function f(e,t){if(o.isBuffer(t))return l(e,t);if(G(t))return c(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return h(e,t);if(t instanceof ArrayBuffer)return p(e,t)}return t.length?d(e,t):v(e,t)}function l(e,t){var n=0|g(t.length);return e=m(e,n),t.copy(e,0,0,n),e}function c(e,t){var n=0|g(t.length);e=m(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function h(e,t){var n=0|g(t.length);e=m(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function p(e,t){return o.TYPED_ARRAY_SUPPORT?(t.byteLength,e=o._augment(new Uint8Array(t))):e=h(e,new Uint8Array(t)),e}function d(e,t){var n=0|g(t.length);e=m(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function v(e,t){var n,r=0;"Buffer"===t.type&&G(t.data)&&(n=t.data,r=0|g(n.length)),e=m(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function m(e,t){o.TYPED_ARRAY_SUPPORT?(e=o._augment(new Uint8Array(t)),e.__proto__=o.prototype):(e.length=t,e._isBuffer=!0);var n=0!==t&&t<=o.poolSize>>>1;return n&&(e.parent=Y),e}function g(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function y(e,t){if(this instanceof y){var n=new o(e,t);return delete n.parent,n}return new y(e,t)}function b(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(r)return W(e).length;t=(""+t).toLowerCase(),r=!0}}function w(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return _(this,t,n);case"utf8":case"utf-8":return L(this,t,n);case"ascii":return O(this,t,n);case"binary":return M(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function E(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var s=t.length;if(s%2!==0)throw new Error("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;r>o;o++){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");e[n+o]=u}return o}function S(e,t,n,r){return J(W(t,e.length-n),e,n,r)}function x(e,t,n,r){return J(X(t),e,n,r)}function T(e,t,n,r){return x(e,t,n,r)}function N(e,t,n,r){return J($(t),e,n,r)}function C(e,t,n,r){return J(V(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function L(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var s=e[i],o=null,u=s>239?4:s>223?3:s>191?2:1;if(n>=i+u){var a,f,l,c;switch(u){case 1:128>s&&(o=s);break;case 2:a=e[i+1],128===(192&a)&&(c=(31&s)<<6|63&a,c>127&&(o=c));break;case 3:a=e[i+1],f=e[i+2],128===(192&a)&&128===(192&f)&&(c=(15&s)<<12|(63&a)<<6|63&f,c>2047&&(55296>c||c>57343)&&(o=c));break;case 4:a=e[i+1],f=e[i+2],l=e[i+3],128===(192&a)&&128===(192&f)&&128===(192&l)&&(c=(15&s)<<18|(63&a)<<12|(63&f)<<6|63&l,c>65535&&1114112>c&&(o=c))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=u}return A(r)}function A(e){var t=e.length;if(Z>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function _(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",s=t;n>s;s++)i+=z(e[s]);return i}function D(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function P(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function H(e,t,n,r,i,s){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||s>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function B(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);s>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);s>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function F(e,t,n,r,i,s){if(t>i||s>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function I(e,t,n,r,i){return i||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function q(e,t,n,r,i){return i||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function R(e){if(e=U(e).replace(tt,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function U(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return 16>e?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||1/0;for(var n,r=e.length,i=null,s=[],o=0;r>o;o++){if(n=e.charCodeAt(o),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;s.push(n)}else if(2048>n){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function X(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function V(e,t){for(var n,r,i,s=[],o=0;o<e.length&&!((t-=2)<0);o++)n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}function $(e){return K.toByteArray(R(e))}function J(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var K=e("base64-js"),Q=e("ieee754"),G=e("is-array");n.Buffer=o,n.SlowBuffer=y,n.INSPECT_MAX_BYTES=50,o.poolSize=8192;var Y={};o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array),o.isBuffer=function(e){return null!=e&&!!e._isBuffer},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);s>i&&e[i]===t[i];)++i;return i!==s&&(n=e[i],r=t[i]),r>n?-1:n>r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!G(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new o(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new o(t),i=0;for(n=0;n<e.length;n++){var s=e[n];s.copy(r,i),i+=s.length}return r},o.byteLength=b,o.prototype.length=void 0,o.prototype.parent=void 0,o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?L(this,0,e):w.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:o.compare(this,e)},o.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(o.isBuffer(e))return n(this,e,t);if("number"==typeof e)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},o.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var s=this.length-t;if((void 0===n||n>s)&&(n=s),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return x(this,e,t,n);case"binary":return T(this,e,t,n);case"base64":return N(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=o._augment(this.subarray(e,t));else{var i=t-e;r=new o(i,void 0);for(var s=0;i>s;s++)r[s]=this[s+e]}return r.length&&(r.parent=this.parent||this),r},o.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||P(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},o.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||P(e,t,this.length);for(var r=this[e+ --t],i=1;t>0&&(i*=256);)r+=this[e+ --t]*i;return r},o.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||P(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||P(e,t,this.length);for(var r=t,i=1,s=this[e+ --r];r>0&&(i*=256);)s+=this[e+ --r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},o.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||H(this,e,t,n,Math.pow(2,8*n),0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||H(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||H(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||H(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||H(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||H(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||H(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);H(this,e,t,n,i-1,-i)}var s=0,o=1,u=0>e?1:0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=(e/o>>0)-u&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);H(this,e,t,n,i-1,-i)}var s=n-1,o=1,u=0>e?1:0;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=(e/o>>0)-u&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||H(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||H(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||H(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||H(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||H(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return q(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return q(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&t>n&&r>t)for(i=s-1;i>=0;i--)e[i+t]=this[i+n];else if(1e3>s||!o.TYPED_ARRAY_SUPPORT)for(i=0;s>i;i++)e[i+t]=this[i+n];else e._set(this.subarray(n,n+s),t);return s},o.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=W(e.toString()),s=i.length;for(r=t;n>r;r++)this[r]=i[r%s]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return(new o(this)).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var et=o.prototype;o._augment=function(e){return e.constructor=o,e._isBuffer=!0,e._set=e.set,e.get=et.get,e.set=et.set,e.write=et.write,e.toString=et.toString,e.toLocaleString=et.toString,e.toJSON=et.toJSON,e.equals=et.equals,e.compare=et.compare,e.indexOf=et.indexOf,e.copy=et.copy,e.slice=et.slice,e.readUIntLE=et.readUIntLE,e.readUIntBE=et.readUIntBE,e.readUInt8=et.readUInt8,e.readUInt16LE=et.readUInt16LE,e.readUInt16BE=et.readUInt16BE,e.readUInt32LE=et.readUInt32LE,e.readUInt32BE=et.readUInt32BE,e.readIntLE=et.readIntLE,e.readIntBE=et.readIntBE,e.readInt8=et.readInt8,e.readInt16LE=et.readInt16LE,e.readInt16BE=et.readInt16BE,e.readInt32LE=et.readInt32LE,e.readInt32BE=et.readInt32BE,e.readFloatLE=et.readFloatLE,e.readFloatBE=et.readFloatBE,e.readDoubleLE=et.readDoubleLE,e.readDoubleBE=et.readDoubleBE,e.writeUInt8=et.writeUInt8,e.writeUIntLE=et.writeUIntLE,e.writeUIntBE=et.writeUIntBE,e.writeUInt16LE=et.writeUInt16LE,e.writeUInt16BE=et.writeUInt16BE,e.writeUInt32LE=et.writeUInt32LE,e.writeUInt32BE=et.writeUInt32BE,e.writeIntLE=et.writeIntLE,e.writeIntBE=et.writeIntBE,e.writeInt8=et.writeInt8,e.writeInt16LE=et.writeInt16LE,e.writeInt16BE=et.writeInt16BE,e.writeInt32LE=et.writeInt32LE,e.writeInt32BE=et.writeInt32BE,e.writeFloatLE=et.writeFloatLE,e.writeFloatBE=et.writeFloatBE,e.writeDoubleLE=et.writeDoubleLE,e.writeDoubleBE=et.writeDoubleBE,e.fill=et.fill,e.inspect=et.inspect,e.toArrayBuffer=et.toArrayBuffer,e};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":35,ieee754:36,"is-array":37}],35:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===o||t===c?62:t===u||t===h?63:a>t?-1:a+10>t?t-a+26+26:l+26>t?t-l:f+26>t?t-f+26:void 0}function n(e){function n(e){f[c++]=e}var r,i,o,u,a,f;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;a="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,f=new s(3*e.length/4-a),o=a>0?e.length-4:e.length;var c=0;for(r=0,i=0;o>r;r+=4,i+=3)u=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&u)>>16),n((65280&u)>>8),n(255&u);return 2===a?(u=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&u)):1===a&&(u=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(u>>8&255),n(255&u)),f}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,s,o,u=e.length%3,a="";for(i=0,o=e.length-u;o>i;i+=3)s=(e[i]<<16)+(e[i+1]<<8)+e[i+2],a+=n(s);switch(u){case 1:s=e[e.length-1],a+=t(s>>2),a+=t(s<<4&63),a+="==";break;case 2:s=(e[e.length-2]<<8)+e[e.length-1],a+=t(s>>10),a+=t(s>>4&63),a+=t(s<<2&63),a+="="}return a}var s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),u="/".charCodeAt(0),a="0".charCodeAt(0),f="a".charCodeAt(0),l="A".charCodeAt(0),c="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],36:[function(e,t,n){n.read=function(e,t,n,r,i){var s,o,u=8*i-r-1,a=(1<<u)-1,f=a>>1,l=-7,c=n?i-1:0,h=n?-1:1,p=e[t+c];for(c+=h,s=p&(1<<-l)-1,p>>=-l,l+=u;l>0;s=256*s+e[t+c],c+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+e[t+c],c+=h,l-=8);if(0===s)s=1-f;else{if(s===a)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,r),s-=f}return(p?-1:1)*o*Math.pow(2,s-r)},n.write=function(e,t,n,r,i,s){var o,u,a,f=8*s-i-1,l=(1<<f)-1,c=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,d=r?1:-1,v=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-o))<1&&(o--,a*=2),t+=o+c>=1?h/a:h*Math.pow(2,1-c),t*a>=2&&(o++,a/=2),o+c>=l?(u=0,o=l):o+c>=1?(u=(t*a-1)*Math.pow(2,i),o+=c):(u=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&u,p+=d,u/=256,i-=8);for(o=o<<i|u,f+=i;f>0;e[n+p]=255&o,p+=d,o/=256,f-=8);e[n+p-d]|=128*v}},{}],37:[function(e,t,n){var r=Array.isArray,i=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==i.call(e)}},{}],38:[function(e,t,n){function r(){l=!1,u.length?f=u.concat(f):c=-1,f.length&&i()}function i(){if(!l){var e=setTimeout(r);l=!0;for(var t=f.length;t;){for(u=f,f=[];++c<t;)u&&u[c].run();c=-1,t=f.length}u=null,l=!1,clearTimeout(e)}}function s(e,t){this.fun=e,this.array=t}function o(){}var u,a=t.exports={},f=[],l=!1,c=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new s(e,t)),1!==f.length||l||setTimeout(i,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],39:[function(e,t,n){t.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:0,rgb:[255,255,255,1]}]}},{}],40:[function(e,t,n){"use strict";function r(e){for(var t,n="#",r=0;3>r;++r)t=e[r],t=t.toString(16),n+=("00"+t).substr(t.length);return n}function i(e){return"rgba("+e.join(",")+")"}var s=e("arraytools"),o=e("./colorScales.json");t.exports=function(e){var t,n,u,f,l,c,h,p,d,v,m,g,y,b=[],w=[],E=[],S=[];if(s.isPlainObject(e)||(e={}),e.colormap||(h="jet"),Array.isArray(e.alpha)?2!==e.alpha.length&&(e.alpha=[1,1]):"number"==typeof e.alpha?e.alpha=[e.alpha,e.alpha]:e.alpha=[1,1],"string"==typeof e.colormap){if(h=e.colormap.toLowerCase(),!(h in o))throw Error(h+" not a supported colorscale");c=o[h]}else Array.isArray(e.colormap)&&(c=e.colormap);if(d=e.nshades||72,p=e.format||"hex",m=e.alpha,c.length>d)throw new Error(h+" map requires nshades to be at least size "+c.length);for(t=c.map(function(e){return Math.round(e.index*d)}),m[0]<0&&(m[0]=0),m[1]<0&&(m[0]=0),m[0]>1&&(m[0]=1),m[1]>1&&(m[0]=1),y=0;y<t.length;++y)g=c[y].index,n=c[y].rgb,4===n.length&&n[3]>=0&&n[3]<=1||(n[3]=m[0]+(m[1]-m[0])*g);for(y=0;y<t.length-1;++y)l=t[y+1]-t[y],u=c[y].rgb,f=c[y+1].rgb,b=b.concat(s.linspace(u[0],f[0],l)),w=w.concat(s.linspace(u[1],f[1],l)),E=E.concat(s.linspace(u[2],f[2],l)),S=S.concat(s.linspace(u[3],f[3],l));return b=b.map(Math.round),w=w.map(Math.round),E=E.map(Math.round),v=s.zip(b,w,E,S),"hex"===p&&(v=v.map(r)),"rgbaString"===p&&(v=v.map(i)),v}},{"./colorScales.json":39,arraytools:32}],41:[function(e,t,n){function r(e,t){return e-t}function i(e,t){var n=e.length,i=e.length-t.length;if(i)return i;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return e[0]+e[1]-t[0]-t[1]||s(e[0],e[1])-s(t[0],t[1]);case 3:var o=e[0]+e[1],u=t[0]+t[1];if(i=o+e[2]-(u+t[2]))return i;var f=s(e[0],e[1]),l=s(t[0],t[1]);return s(f,e[2])-s(l,t[2])||s(f+e[2],o)-s(l+t[2],u);case 4:var c=e[0],h=e[1],p=e[2],d=e[3],v=t[0],m=t[1],g=t[2],y=t[3];return c+h+p+d-(v+m+g+y)||s(c,h,p,d)-s(v,m,g,y,v)||s(c+h,c+p,c+d,h+p,h+d,p+d)-s(v+m,v+g,v+y,m+g,m+y,g+y)||s(c+h+p,c+h+d,c+p+d,h+p+d)-s(v+m+g,v+m+y,v+g+y,m+g+y);default:for(var b=e.slice().sort(r),w=t.slice().sort(r),E=0;n>E;++E)if(i=b[E]-w[E])return i;return 0}}t.exports=i;var s=Math.min},{}],42:[function(e,t,n){"use strict";function r(e){var t=e.length;if(0===t)return[];if(1===t)return[[0]];var n=e[0].length;return 0===n?[]:1===n?i(e):2===n?s(e):o(e,n)}var i=e("./lib/ch1d"),s=e("./lib/ch2d"),o=e("./lib/chnd");t.exports=r},{"./lib/ch1d":43,"./lib/ch2d":44,"./lib/chnd":45}],43:[function(e,t,n){"use strict";function r(e){for(var t=0,n=0,r=1;r<e.length;++r)e[r][0]<e[t][0]&&(t=r),e[r][0]>e[n][0]&&(n=r);return n>t?[[t],[n]]:t>n?[[n],[t]]:[[t]]}t.exports=r},{}],44:[function(e,t,n){"use strict";function r(e){var t=i(e),n=t.length;if(2>=n)return[];for(var r=new Array(n),s=t[n-1],o=0;n>o;++o){var u=t[o];r[o]=[s,u],s=u}return r}t.exports=r;var i=e("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":47}],45:[function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=new Array(n),i=0;i<t.length;++i)r[i]=e[t[i]];for(var s=t.length,i=0;n>i;++i)t.indexOf(i)<0&&(r[s++]=e[i]);return r}function i(e,t){for(var n=e.length,r=t.length,i=0;n>i;++i)for(var s=e[i],o=0;o<s.length;++o){var u=s[o];if(r>u)s[o]=t[u];else{u-=r;for(var a=0;r>a;++a)u>=t[a]&&(u+=1);s[o]=u}}return e}function s(e,t){try{return o(e,!0)}catch(n){var s=u(e);if(s.length<=t)return[];var a=r(e,s),f=o(a,!0);return i(f,s)}}t.exports=s;var o=e("incremental-convex-hull"),u=e("affine-hull")},{"affine-hull":46,"incremental-convex-hull":168}],46:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(t+1),r=0;r<e.length;++r)n[r]=e[r];for(var r=0;r<=e.length;++r){for(var i=e.length;t>=i;++i){for(var o=new Array(t),u=0;t>u;++u)o[u]=Math.pow(i+1-r,u);n[i]=o}var f=s.apply(void 0,n);if(f)return!0}return!1}function i(e){var t=e.length;if(0===t)return[];if(1===t)return[0];for(var n=e[0].length,i=[e[0]],s=[0],o=1;t>o;++o)if(i.push(e[o]),r(i,n)){if(s.push(o),s.length===n+1)return s}else i.pop();return s}t.exports=i;var s=e("robust-orientation")},{"robust-orientation":195}],47:[function(e,t,n){"use strict";function r(e){var t=e.length;if(3>t){for(var n=new Array(t),r=0;t>r;++r)n[r]=r;return 2===t&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:n}for(var s=new Array(t),r=0;t>r;++r)s[r]=r;s.sort(function(t,n){var r=e[t][0]-e[n][0];return r?r:e[t][1]-e[n][1]});for(var o=[s[0],s[1]],u=[s[0],s[1]],r=2;t>r;++r){for(var a=s[r],f=e[a],l=o.length;l>1&&i(e[o[l-2]],e[o[l-1]],f)<=0;)l-=1,o.pop();for(o.push(a),l=u.length;l>1&&i(e[u[l-2]],e[u[l-1]],f)>=0;)l-=1,u.pop();u.push(a)}for(var n=new Array(u.length+o.length-2),c=0,r=0,h=o.length;h>r;++r)n[c++]=o[r];for(var p=u.length-2;p>0;--p)n[c++]=u[p];return n}t.exports=r;var i=e("robust-orientation")[3]},{"robust-orientation":195}],48:[function(e,t,n){t.exports=e("cwise-compiler")},{"cwise-compiler":49}],49:[function(e,t,n){"use strict";function r(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(e){var t=new r;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var i=0;i<n.length;++i){var o=n[i];if("array"===o||"object"==typeof o&&o.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===o){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+n[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,s(t)}var s=e("./lib/thunk.js");t.exports=i},{"./lib/thunk.js":51}],50:[function(e,t,n){"use strict";function r(e,t,n){var r,i,s=e.length,o=t.arrayArgs.length,u=t.indexArgs.length>0,a=[],f=[],l=0,c=0;for(r=0;s>r;++r)f.push(["i",r,"=0"].join(""));for(i=0;o>i;++i)for(r=0;s>r;++r)c=l,l=e[r],0===r?f.push(["d",i,"s",r,"=t",i,"p",l].join("")):f.push(["d",i,"s",r,"=(t",i,"p",l,"-s",c,"*t",i,"p",c,")"].join(""));for(a.push("var "+f.join(",")),r=s-1;r>=0;--r)l=e[r],a.push(["for(i",r,"=0;i",r,"<s",l,";++i",r,"){"].join(""));for(a.push(n),r=0;s>r;++r){for(c=l,l=e[r],i=0;o>i;++i)a.push(["p",i,"+=d",i,"s",r].join(""));u&&(r>0&&a.push(["index[",c,"]-=s",c].join("")),a.push(["++index[",l,"]"].join(""))),a.push("}")}return a.join("\n")}function i(e,t,n,i){for(var s=t.length,o=n.arrayArgs.length,u=n.blockSize,a=n.indexArgs.length>0,f=[],l=0;o>l;++l)f.push(["var offset",l,"=p",l].join(""));for(var l=e;s>l;++l)f.push(["for(var j"+l+"=SS[",t[l],"]|0;j",l,">0;){"].join("")),f.push(["if(j",l,"<",u,"){"].join("")),f.push(["s",t[l],"=j",l].join("")),f.push(["j",l,"=0"].join("")),f.push(["}else{s",t[l],"=",u].join("")),f.push(["j",l,"-=",u,"}"].join("")),a&&f.push(["index[",t[l],"]=j",l].join(""));for(var l=0;o>l;++l){for(var c=["offset"+l],h=e;s>h;++h)c.push(["j",h,"*t",l,"p",t[h]].join(""));f.push(["p",l,"=(",c.join("+"),")"].join(""))}f.push(r(t,n,i));for(var l=e;s>l;++l)f.push("}");return f.join("\n")}function s(e){for(var t=0,n=e[0].length;n>t;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}function o(e,t,n){for(var r=e.body,i=[],s=[],o=0;o<e.args.length;++o){var u=e.args[o];if(!(u.count<=0)){var a=new RegExp(u.name,"g"),f="",l=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var c=t.offsetArgIndex.indexOf(o),h=t.offsetArgs[c];l=h.array,f="+q"+c;case"array":f="p"+l+f;var p="l"+o,d="a"+l;if(0===t.arrayBlockIndices[l])1===u.count?"generic"===n[l]?u.lvalue?(i.push(["var ",p,"=",d,".get(",f,")"].join("")),r=r.replace(a,p),s.push([d,".set(",f,",",p,")"].join(""))):r=r.replace(a,[d,".get(",f,")"].join("")):r=r.replace(a,[d,"[",f,"]"].join("")):"generic"===n[l]?(i.push(["var ",p,"=",d,".get(",f,")"].join("")),r=r.replace(a,p),u.lvalue&&s.push([d,".set(",f,",",p,")"].join(""))):(i.push(["var ",p,"=",d,"[",f,"]"].join("")),r=r.replace(a,p),u.lvalue&&s.push([d,"[",f,"]=",p].join("")));else{for(var v=[u.name],m=[f],g=0;g<Math.abs(t.arrayBlockIndices[l]);g++)v.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(g+1)+"*t"+l+"b"+g);if(a=new RegExp(v.join(""),"g"),f=m.join("+"),"generic"===n[l])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(a,[d,"[",f,"]"].join(""))}break;case"scalar":r=r.replace(a,"Y"+t.scalarArgs.indexOf(o));break;case"index":r=r.replace(a,"index");break;case"shape":r=r.replace(a,"shape")}}}return[i.join("\n"),r,s.join("\n")].join("\n").trim()}function u(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],s=i.match(/\d+/);s=s?s[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+s:t[r]=i.charAt(0)+s,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}function a(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,a=new Array(e.arrayArgs.length),l=new Array(e.arrayArgs.length),c=0;c<e.arrayArgs.length;++c)l[c]=t[2*c],a[c]=t[2*c+1];for(var h=[],p=[],d=[],v=[],m=[],c=0;c<e.arrayArgs.length;++c){e.arrayBlockIndices[c]<0?(d.push(0),v.push(n),h.push(n),p.push(n+e.arrayBlockIndices[c])):(d.push(e.arrayBlockIndices[c]),v.push(e.arrayBlockIndices[c]+n),h.push(0),p.push(e.arrayBlockIndices[c]));for(var g=[],y=0;y<a[c].length;y++)d[c]<=a[c][y]&&a[c][y]<v[c]&&g.push(a[c][y]-d[c]);m.push(g)}for(var b=["SS"],w=["'use strict'"],E=[],y=0;n>y;++y)E.push(["s",y,"=SS[",y,"]"].join(""));for(var c=0;c<e.arrayArgs.length;++c){b.push("a"+c),b.push("t"+c),b.push("p"+c);for(var y=0;n>y;++y)E.push(["t",c,"p",y,"=t",c,"[",d[c]+y,"]"].join(""));for(var y=0;y<Math.abs(e.arrayBlockIndices[c]);++y)E.push(["t",c,"b",y,"=t",c,"[",h[c]+y,"]"].join(""))}for(var c=0;c<e.scalarArgs.length;++c)b.push("Y"+c);if(e.shapeArgs.length>0&&E.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var S=new Array(n),c=0;n>c;++c)S[c]="0";E.push(["index=[",S.join(","),"]"].join(""))}for(var c=0;c<e.offsetArgs.length;++c){for(var x=e.offsetArgs[c],T=[],y=0;y<x.offset.length;++y)0!==x.offset[y]&&(1===x.offset[y]?T.push(["t",x.array,"p",y].join("")):T.push([x.offset[y],"*t",x.array,"p",y].join("")));0===T.length?E.push("q"+c+"=0"):E.push(["q",c,"=",T.join("+")].join(""))}var N=f([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));E=E.concat(N),w.push("var "+E.join(","));for(var c=0;c<e.arrayArgs.length;++c)w.push("p"+c+"|=0");e.pre.body.length>3&&w.push(o(e.pre,e,l));var C=o(e.body,e,l),k=s(m);n>k?w.push(i(k,m[0],e,C)):w.push(r(m[0],e,C)),e.post.body.length>3&&w.push(o(e.post,e,l)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+w.join("\n")+"\n----------");var L=[e.funcName||"unnamed","_cwise_loop_",a[0].join("s"),"m",k,u(l)].join(""),A=new Function(["function ",L,"(",b.join(","),"){",w.join("\n"),"} return ",L].join(""));return A()}var f=e("uniq");t.exports=a},{uniq:52}],51:[function(e,t,n){"use strict";function r(e){var t=["'use strict'","var CACHED={}"],n=[],r=e.funcName+"_cwise_thunk";t.push(["return function ",r,"(",e.shimArgs.join(","),"){"].join(""));for(var s=[],o=[],u=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],a=[],f=[],l=0;l<e.arrayArgs.length;++l){var c=e.arrayArgs[l];n.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),s.push("t"+c),s.push("r"+c),o.push("t"+c),o.push("r"+c+".join()"),u.push("array"+c+".data"),u.push("array"+c+".stride"),u.push("array"+c+".offset|0"),l>0&&(a.push("array"+e.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[l]))),f.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[l])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+a.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var l=0;l<e.scalarArgs.length;++l)u.push("scalar"+e.scalarArgs[l]);n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",u.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------");var h=new Function("compile",t.join("\n"));return h(i.bind(void 0,e))}var i=e("./compile.js");t.exports=r},{"./compile.js":50}],52:[function(e,t,n){"use strict";function r(e,t){for(var n=1,r=e.length,i=e[0],s=e[0],o=1;r>o;++o)if(s=i,i=e[o],t(i,s)){if(o===n){n++;continue}e[n++]=i}return e.length=n,e}function i(e){for(var t=1,n=e.length,r=e[0],i=e[0],s=1;n>s;++s,i=r)if(i=r,r=e[s],r!==i){if(s===t){t++;continue}e[t++]=r}return e.length=t,e}function s(e,t,n){return 0===e.length?e:t?(n||e.sort(t),r(e,t)):(n||e.sort(),i(e))}t.exports=s},{}],53:[function(n,r,i){!function(){function n(e){return e&&(e.ownerDocument||e.document||e).documentElement}function i(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function s(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function o(e){return null===e?NaN:+e}function u(e){return!isNaN(e)}function a(e){return{left:function(n,r,i,s){for(arguments.length<3&&(i=0),arguments.length<4&&(s=n.length);s>i;){var o=i+s>>>1;e(n[o],r)<0?i=o+1:s=o}return i},right:function(n,r,i,s){for(arguments.length<3&&(i=0),arguments.length<4&&(s=n.length);s>i;){var o=i+s>>>1;e(n[o],r)>0?s=o:i=o+1}return i}}}function f(e){return e.length}function l(e){for(var t=1;e*t%1;)t*=10;return t}function c(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function h(){this._=Object.create(null)}function p(e){return(e+="")===yu||e[0]===bu?bu+e:e}function d(e){return(e+="")[0]===bu?e.slice(1):e}function v(e){return p(e)in this._}function m(e){return(e=p(e))in this._&&delete this._[e]}function g(){var e=[];for(var t in this._)e.push(d(t));return e}function y(){var e=0;for(var t in this._)++e;return e}function b(){for(var e in this._)return!1;return!0}function w(){this._=Object.create(null)}function E(e){return e}function S(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function x(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=wu.length;r>n;++n){var i=wu[n]+t;if(i in e)return i}}function T(){}function N(){}function C(e){function t(){for(var t,r=n,i=-1,s=r.length;++i<s;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new h;return t.on=function(t,i){var s,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,s=n.indexOf(o)).concat(n.slice(s+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function k(){su.event.preventDefault()}function L(){for(var e,t=su.event;e=t.sourceEvent;)t=e;return t}function A(e){for(var t=new N,n=0,r=arguments.length;++n<r;)t[arguments[n]]=C(t);return t.of=function(n,r){return function(i){try{var s=i.sourceEvent=su.event;i.target=e,su.event=i,t[i.type].apply(n,r)}finally{su.event=s}}},t}function O(e){return Su(e,Cu),e}function M(e){return"function"==typeof e?e:function(){return xu(e,this)}}function _(e){return"function"==typeof e?e:function(){return Tu(e,this)}}function D(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function s(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=su.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?u:o:e.local?s:i}function P(e){return e.trim().replace(/\s+/g," ")}function H(e){return new RegExp("(?:^|\\s+)"+su.requote(e)+"(?:\\s+|$)","g")}function B(e){return(e+"").trim().split(/^|\s+/)}function j(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=B(e).map(F);var i=e.length;return"function"==typeof t?r:n}function F(e){var t=H(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",P(i+" "+e))):n.setAttribute("class",P(i.replace(t," ")))}}function I(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?s:i}function q(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function R(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n?t.createElementNS(n,e):t.createElement(e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=su.ns.qualify(e)).local?n:t}function U(){var e=this.parentNode;e&&e.removeChild(this)}function z(e){return{__data__:e}}function W(e){return function(){return Nu(this,e)}}function X(e){return arguments.length||(e=s),function(n,r){return n&&r?e(n.__data__,r.__data__):!n-!r}}function V(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,s=e[n],o=0,u=s.length;u>o;o++)(i=s[o])&&t(i,o,n);return e}function $(e){return Su(e,Lu),e}function J(e){var t,n;return function(r,i,s){var o,u=e[s].update,a=u.length;for(s!=n&&(n=s,t=0),i>=t&&(t=i+1);!(o=u[t])&&++t<a;);return o}}function K(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=a(t,uu(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function s(){var t,n=new RegExp("^__on([^.]+)"+su.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,u=e.indexOf("."),a=Q;u>0&&(e=e.slice(0,u));var f=Au.get(e);return f&&(e=f,a=G),u?t?i:r:t?T:s}function Q(e,t){return function(n){var r=su.event;su.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{su.event=r}}}function G(e,t){var n=Q(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function Y(e){var t=".dragsuppress-"+ ++Mu,r="click"+t,s=su.select(i(e)).on("touchmove"+t,k).on("dragstart"+t,k).on("selectstart"+t,k);if(null==Ou&&(Ou="onselectstart"in e?!1:x(e.style,"userSelect")),Ou){var o=n(e).style,u=o[Ou];o[Ou]="none"}return function(e){if(s.on(t,null),Ou&&(o[Ou]=u),e){var n=function(){s.on(r,null)};s.on(r,function(){k(),n()},!0),setTimeout(n,0)}}}function Z(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>_u){var s=i(e);if(s.scrollX||s.scrollY){n=su.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n[0][0].getScreenCTM();_u=!o.f&&!o.e,n.remove()}}return _u?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var u=e.getBoundingClientRect();return[t.clientX-u.left-e.clientLeft,t.clientY-u.top-e.clientTop]}function et(){return su.event.changedTouches[0].identifier}function tt(e){return e>0?1:0>e?-1:0}function nt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function rt(e){return e>1?0:-1>e?Hu:Math.acos(e)}function it(e){return e>1?Fu:-1>e?-Fu:Math.asin(e)}function st(e){return((e=Math.exp(e))-1/e)/2}function ot(e){return((e=Math.exp(e))+1/e)/2}function ut(e){return((e=Math.exp(2*e))-1)/(e+1)}function at(e){return(e=Math.sin(e/2))*e}function ft(){}function lt(e,t,n){return this instanceof lt?(this.h=+e,this.s=+t,void (this.l=+n)):arguments.length<2?e instanceof lt?new lt(e.h,e.s,e.l):Tt(""+e,Nt,lt):new lt(e,t,n)}function ct(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?s+(o-s)*e/60:180>e?o:240>e?s+(o-s)*(240-e)/60:s}function i(e){return Math.round(255*r(e))}var s,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,s=2*n-o,new wt(i(e+120),i(e),i(e-120))}function ht(e,t,n){return this instanceof ht?(this.h=+e,this.c=+t,void (this.l=+n)):arguments.length<2?e instanceof ht?new ht(e.h,e.c,e.l):e instanceof dt?mt(e.l,e.a,e.b):mt((e=Ct((e=su.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ht(e,t,n)}function pt(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new dt(n,Math.cos(e*=Iu)*t,Math.sin(e)*t)}function dt(e,t,n){return this instanceof dt?(this.l=+e,this.a=+t,void (this.b=+n)):arguments.length<2?e instanceof dt?new dt(e.l,e.a,e.b):e instanceof ht?pt(e.h,e.c,e.l):Ct((e=wt(e)).r,e.g,e.b):new dt(e,t,n)}function vt(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=gt(i)*Qu,r=gt(r)*Gu,s=gt(s)*Yu,new wt(bt(3.2404542*i-1.5371385*r-.4985314*s),bt(-0.969266*i+1.8760108*r+.041556*s),bt(.0556434*i-.2040259*r+1.0572252*s))}function mt(e,t,n){return e>0?new ht(Math.atan2(n,t)*qu,Math.sqrt(t*t+n*n),e):new ht(NaN,NaN,e)}function gt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function yt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function bt(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function wt(e,t,n){return this instanceof wt?(this.r=~~e,this.g=~~t,void (this.b=~~n)):arguments.length<2?e instanceof wt?new wt(e.r,e.g,e.b):Tt(""+e,wt,ct):new wt(e,t,n)}function Et(e){return new wt(e>>16,e>>8&255,255&e)}function St(e){return Et(e)+""}function xt(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function Tt(e,t,n){e=e.toLowerCase();var r,i,s,o=0,u=0,a=0;if(r=/([a-z]+)\((.*)\)/.exec(e))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Lt(i[0]),Lt(i[1]),Lt(i[2]))}return(s=ta.get(e))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&s)>>4,o=o>>4|o,u=240&s,u=u>>4|u,a=15&s,a=a<<4|a):7===e.length&&(o=(16711680&s)>>16,u=(65280&s)>>8,a=255&s)),t(o,u,a))}function Nt(e,t,n){var r,i,s=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),u=o-s,a=(o+s)/2;return u?(i=.5>a?u/(o+s):u/(2-o-s),r=e==o?(t-n)/u+(n>t?6:0):t==o?(n-e)/u+2:(e-t)/u+4,r*=60):(r=NaN,i=a>0&&1>a?0:r),new lt(r,i,a)}function Ct(e,t,n){e=kt(e),t=kt(t),n=kt(n);var r=yt((.4124564*e+.3575761*t+.1804375*n)/Qu),i=yt((.2126729*e+.7151522*t+.072175*n)/Gu),s=yt((.0193339*e+.119192*t+.9503041*n)/Yu);return dt(116*i-16,500*(r-i),200*(i-s))}function kt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Lt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function At(e){return"function"==typeof e?e:function(){return e}}function Ot(e){return function(n,r,i){return 2===arguments.length&&"function"==typeof r&&(i=r,r=null),Mt(n,r,e,i)}}function Mt(e,t,n,r){function i(){var e,t=a.status;if(!t&&Dt(a)||t>=200&&300>t||304===t){try{e=n.call(s,a)}catch(r){return void o.error.call(s,r)}o.load.call(s,e)}else o.error.call(s,a)}var s={},o=su.dispatch("beforesend","progress","load","error"),u={},a=new XMLHttpRequest,f=null;return!this.XDomainRequest||"withCredentials"in a||!/^(http(s)?:)?\/\//.test(e)||(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=i:a.onreadystatechange=function(){a.readyState>3&&i()},a.onprogress=function(e){var t=su.event;su.event=e;try{o.progress.call(s,a)}finally{su.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",s):t},s.responseType=function(e){return arguments.length?(f=e,s):f},s.response=function(e){return n=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(uu(arguments)))}}),s.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),a.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),a.setRequestHeader)for(var l in u)a.setRequestHeader(l,u[l]);return null!=t&&a.overrideMimeType&&a.overrideMimeType(t),null!=f&&(a.responseType=f),null!=i&&s.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(s,a),a.send(null==r?null:r),s},s.abort=function(){return a.abort(),s},su.rebind(s,o,"on"),null==r?s:s.get(_t(r))}function _t(e){return 1===e.length?function(n,r){e(null==n?r:null)}:e}function Dt(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Pt(){var e=Ht(),t=Bt()-e;t>24?(isFinite(t)&&(clearTimeout(sa),sa=setTimeout(Pt,t)),ia=0):(ia=1,ua(Pt))}function Ht(){var e=Date.now();for(oa=na;oa;)e>=oa.t&&(oa.f=oa.c(e-oa.t)),oa=oa.n;return e}function Bt(){for(var e,t=na,n=1/0;t;)t.f?t=e?e.n=t.n:na=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return ra=e,n}function jt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Ft(e,t){var n=Math.pow(10,3*gu(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function It(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,s=r&&n?function(e,t){for(var i=e.length,s=[],o=0,u=r[0],a=0;i>0&&u>0&&(a+u+1>t&&(u=Math.max(1,t-a)),s.push(e.substring(i-=u,i+u)),!((a+=u+1)>t));)u=r[o=(o+1)%r.length];return s.reverse().join(n)}:E;return function(e){var n=fa.exec(e),r=n[1]||" ",o=n[2]||">",u=n[3]||"-",a=n[4]||"",f=n[5],l=+n[6],c=n[7],h=n[8],p=n[9],d=1,v="",m="",g=!1,y=!0;switch(h&&(h=+h.substring(1)),(f||"0"===r&&"="===o)&&(f=r="0",o="="),p){case"n":c=!0,p="g";break;case"%":d=100,m="%",p="f";break;case"p":d=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===a&&(v="0"+p.toLowerCase());case"c":y=!1;case"d":g=!0,h=0;break;case"s":d=-1,p="r"}"$"===a&&(v=i[0],m=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=la.get(p)||qt;var b=f&&c;return function(e){var n=m;if(g&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===u?"":u;if(0>d){var a=su.formatPrefix(e,h);e=a.scale(e),n=a.symbol+m}else e*=d;e=p(e,h);var w,E,S=e.lastIndexOf(".");if(0>S){var x=y?e.lastIndexOf("e"):-1;0>x?(w=e,E=""):(w=e.substring(0,x),E=e.substring(x))}else w=e.substring(0,S),E=t+e.substring(S+1);!f&&c&&(w=s(w,1/0));var T=v.length+w.length+E.length+(b?0:i.length),N=l>T?(new Array(T=l-T+1)).join(r):"";return b&&(w=s(N+w,N.length?l-E.length:1/0)),i+=v,e=w+E,("<"===o?i+e+N:">"===o?N+i+e:"^"===o?N.substring(0,T>>=1)+i+e+N.substring(T):i+(b?e:N+e))+n}}}function qt(e){return e+""}function Rt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ut(e,t,n){function r(t){var n=e(t),r=s(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new ha(n-1)),1),n}function s(e,n){return t(e=new ha(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)for(;r>o;)n(o)%s||u.push(new Date(+o)),t(o,1);else for(;r>o;)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{ha=Rt;var r=new Rt;return r._=e,o(r,t,n)}finally{ha=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=zt(e);return a.floor=a,a.round=zt(r),a.ceil=zt(i),a.offset=zt(s),a.range=u,e}function zt(e){return function(n,r){try{ha=Rt;var i=new Rt;return i._=n,e(i,r)._}finally{ha=Date}}}function Wt(e){function t(e){function t(t){for(var n,i,s,o=[],u=-1,a=0;++u<r;)37===e.charCodeAt(u)&&(o.push(e.slice(a,u)),null!=(i=da[n=e.charAt(++u)])&&(n=e.charAt(++u)),(s=L[n])&&(n=s(t,null==i?"e"===n?" ":"0":i)),o.push(n),a=u+1);return o.push(e.slice(a,u)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var s=null!=r.Z&&ha!==Rt,o=new(s?Rt:ha);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),s?o._:o},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,s,o,u=0,a=t.length,f=n.length;a>u;){if(r>=f)return-1;if(i=t.charCodeAt(u++),37===i){if(o=t.charAt(u++),s=A[o in da?t.charAt(u++):o],!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){S.lastIndex=0;var r=S.exec(t.slice(n));return r?(e.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){w.lastIndex=0;var r=w.exec(t.slice(n));return r?(e.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,n){C.lastIndex=0;var r=C.exec(t.slice(n));return r?(e.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){T.lastIndex=0;var r=T.exec(t.slice(n));return r?(e.m=N.get(r[0].toLowerCase()),n+r[0].length):-1}function u(e,t,r){return n(e,L.c.toString(),t,r)}function a(e,t,r){return n(e,L.x.toString(),t,r)}function f(e,t,r){return n(e,L.X.toString(),t,r)}function l(e,t,n){var r=b.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var c=e.dateTime,h=e.date,p=e.time,d=e.periods,v=e.days,m=e.shortDays,g=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{ha=Rt;var t=new ha;return t._=e,r(t)}finally{ha=Date}}var r=t(e);return n.parse=function(e){try{ha=Rt;var t=r.parse(e);return t&&t._}finally{ha=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=cn;var b=su.map(),w=Vt(v),E=$t(v),S=Vt(m),x=$t(m),T=Vt(g),N=$t(g),C=Vt(y),k=$t(y);d.forEach(function(e,t){b.set(e.toLowerCase(),t)});var L={a:function(e){return m[e.getDay()]},A:function(e){return v[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return g[e.getMonth()]},c:t(c),d:function(e,t){return Xt(e.getDate(),t,2)},e:function(e,t){return Xt(e.getDate(),t,2)},H:function(e,t){return Xt(e.getHours(),t,2)},I:function(e,t){return Xt(e.getHours()%12||12,t,2)},j:function(e,t){return Xt(1+ca.dayOfYear(e),t,3)},L:function(e,t){return Xt(e.getMilliseconds(),t,3)},m:function(e,t){return Xt(e.getMonth()+1,t,2)},M:function(e,t){return Xt(e.getMinutes(),t,2)},p:function(e){return d[+(e.getHours()>=12)]},S:function(e,t){return Xt(e.getSeconds(),t,2)},U:function(e,t){return Xt(ca.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Xt(ca.mondayOfYear(e),t,2)},x:t(h),X:t(p),y:function(e,t){return Xt(e.getFullYear()%100,t,2)},Y:function(e,t){return Xt(e.getFullYear()%1e4,t,4)},Z:fn,"%":function(){return"%"}},A={a:r,A:i,b:s,B:o,c:u,d:nn,e:nn,H:sn,I:sn,j:rn,L:an,m:tn,M:on,p:l,S:un,U:Kt,w:Jt,W:Qt,x:a,X:f,y:Yt,Y:Gt,Z:Zt,"%":ln};return t}function Xt(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",s=i.length;return r+(n>s?(new Array(n-s+1)).join(t)+i:i)}function Vt(e){return new RegExp("^(?:"+e.map(su.requote).join("|")+")","i")}function $t(e){for(var t=new h,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Jt(e,t,n){va.lastIndex=0;var r=va.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Kt(e,t,n){va.lastIndex=0;var r=va.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Qt(e,t,n){va.lastIndex=0;var r=va.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Gt(e,t,n){va.lastIndex=0;var r=va.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Yt(e,t,n){va.lastIndex=0;var r=va.exec(t.slice(n,n+2));return r?(e.y=en(+r[0]),n+r[0].length):-1}function Zt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function en(e){return e+(e>68?1900:2e3)}function tn(e,t,n){va.lastIndex=0;var r=va.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function nn(e,t,n){va.lastIndex=0;var r=va.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function rn(e,t,n){va.lastIndex=0;var r=va.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function sn(e,t,n){va.lastIndex=0;var r=va.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function on(e,t,n){va.lastIndex=0;var r=va.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function un(e,t,n){va.lastIndex=0;var r=va.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function an(e,t,n){va.lastIndex=0;var r=va.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function fn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=gu(t)/60|0,i=gu(t)%60;return n+Xt(r,"0",2)+Xt(i,"0",2)}function ln(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function cn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function hn(){}function pn(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function dn(e,t){e&&wa.hasOwnProperty(e.type)&&wa[e.type](e,t)}function vn(e,t,n){var r,i=-1,s=e.length-n;for(t.lineStart();++i<s;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function mn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)vn(e[n],t,1);t.polygonEnd()}function gn(){function e(e,t){e*=Iu,t=t*Iu/2+Hu/4;var n=e-r,o=n>=0?1:-1,u=o*n,a=Math.cos(t),f=Math.sin(t),l=s*f,c=i*a+l*Math.cos(u),h=l*o*Math.sin(u);Sa.add(Math.atan2(h,c)),r=e,i=a,s=f}var t,n,r,i,s;xa.point=function(o,u){xa.point=e,r=(t=o)*Iu,i=Math.cos(u=(n=u)*Iu/2+Hu/4),s=Math.sin(u)},xa.lineEnd=function(){e(t,n)}}function yn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function bn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function wn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function En(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Sn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function xn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Tn(e){return[Math.atan2(e[1],e[0]),it(e[2])]}function Nn(e,t){return gu(e[0]-t[0])<Du&&gu(e[1]-t[1])<Du}function Cn(e,t){e*=Iu;var n=Math.cos(t*=Iu);kn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function kn(e,t,n){++Ta,Ca+=(e-Ca)/Ta,ka+=(t-ka)/Ta,La+=(n-La)/Ta}function Ln(){function e(e,i){e*=Iu;var s=Math.cos(i*=Iu),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=n*a-r*u)*f+(f=r*o-t*a)*f+(f=t*u-n*o)*f),t*o+n*u+r*a);Na+=f,Aa+=f*(t+(t=o)),Oa+=f*(n+(n=u)),Ma+=f*(r+(r=a)),kn(t,n,r)}var t,n,r;Ha.point=function(i,s){i*=Iu;var o=Math.cos(s*=Iu);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(s),Ha.point=e,kn(t,n,r)}}function An(){Ha.point=Cn}function On(){function e(e,t){e*=Iu;var n=Math.cos(t*=Iu),o=n*Math.cos(e),u=n*Math.sin(e),a=Math.sin(t),f=i*a-s*u,l=s*o-r*a,c=r*u-i*o,h=Math.sqrt(f*f+l*l+c*c),p=r*o+i*u+s*a,d=h&&-rt(p)/h,v=Math.atan2(h,p);_a+=d*f,Da+=d*l,Pa+=d*c,Na+=v,Aa+=v*(r+(r=o)),Oa+=v*(i+(i=u)),Ma+=v*(s+(s=a)),kn(r,i,s)}var t,n,r,i,s;Ha.point=function(o,u){t=o,n=u,Ha.point=e,o*=Iu;var a=Math.cos(u*=Iu);r=a*Math.cos(o),i=a*Math.sin(o),s=Math.sin(u),kn(r,i,s)},Ha.lineEnd=function(){e(t,n),Ha.lineEnd=An,Ha.point=Cn}}function Mn(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function _n(){return!0}function Dn(e,t,n,r,i){var s=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Nn(n,r)){i.lineStart();for(var u=0;t>u;++u)i.point((n=e[u])[0],n[1]);return void i.lineEnd()}var a=new Hn(n,e,null,!0),f=new Hn(n,null,a,!1);a.o=f,s.push(a),o.push(f),a=new Hn(r,e,null,!1),f=new Hn(r,null,a,!0),a.o=f,s.push(a),o.push(f)}}),o.sort(t),Pn(s),Pn(o),s.length){for(var u=0,a=n,f=o.length;f>u;++u)o[u].e=a=!a;for(var l,c,h=s[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,f=l.length;f>u;++u)i.point((c=l[u])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){l=p.p.z;for(var u=l.length-1;u>=0;--u)i.point((c=l[u])[0],c[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Pn(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Hn(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Bn(e,t,n,r){return function(i,s){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&s.point(t,n)}function u(e,t){var n=i(e,t);m.point(n[0],n[1])}function a(){y.point=u,m.lineStart()}function f(){y.point=o,m.lineEnd()}function l(e,t){v.push([e,t]);var n=i(e,t);w.point(n[0],n[1])}function c(){w.lineStart(),v=[]}function h(){l(v[0][0],v[0][1]),w.lineEnd();var e,t=w.clean(),n=b.buffer(),r=n.length;if(v.pop(),d.push(v),v=null,r)if(1&t){e=n[0];var i,r=e.length-1,o=-1;if(r>0){for(E||(s.polygonStart(),E=!0),s.lineStart();++o<r;)s.point((i=e[o])[0],i[1]);s.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(jn))}var p,d,v,m=t(s),g=i.invert(r[0],r[1]),y={point:o,lineStart:a,lineEnd:f,polygonStart:function(){y.point=l,y.lineStart=c,y.lineEnd=h,p=[],d=[]},polygonEnd:function(){y.point=o,y.lineStart=a,y.lineEnd=f,p=su.merge(p);var e=zn(g,d);p.length?(E||(s.polygonStart(),E=!0),Dn(p,In,e,n,s)):e&&(E||(s.polygonStart(),E=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),E&&(s.polygonEnd(),E=!1),p=d=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}},b=Fn(),w=t(b),E=!1;return y}}function jn(e){return e.length>1}function Fn(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:T,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function In(e,t){return((e=e.x)[0]<0?e[1]-Fu-Du:Fu-e[1])-((t=t.x)[0]<0?t[1]-Fu-Du:Fu-t[1])}function qn(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var u=s>0?Hu:-Hu,a=gu(s-n);gu(a-Hu)<Du?(e.point(n,r=(r+o)/2>0?Fu:-Fu),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(s,r),t=0):i!==u&&a>=Hu&&(gu(n-i)<Du&&(n-=i*Du),gu(s-u)<Du&&(s-=u*Du),r=Rn(n,r,s,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=s,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function Rn(e,t,n,r){var i,s,o=Math.sin(e-n);return gu(o)>Du?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function Un(e,t,n,r){var i;if(null==e)i=n*Fu,r.point(-Hu,i),r.point(0,i),r.point(Hu,i),r.point(Hu,0),r.point(Hu,-i),r.point(0,-i),r.point(-Hu,-i),r.point(-Hu,0),r.point(-Hu,i);else if(gu(e[0]-t[0])>Du){var s=e[0]<t[0]?Hu:-Hu;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function zn(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=0;Sa.reset();for(var u=0,a=t.length;a>u;++u){var f=t[u],l=f.length;if(l)for(var c=f[0],h=c[0],p=c[1]/2+Hu/4,d=Math.sin(p),v=Math.cos(p),m=1;;){m===l&&(m=0),e=f[m];var g=e[0],y=e[1]/2+Hu/4,b=Math.sin(y),w=Math.cos(y),E=g-h,S=E>=0?1:-1,x=S*E,T=x>Hu,N=d*b;if(Sa.add(Math.atan2(N*S*Math.sin(x),v*w+N*Math.cos(x))),s+=T?E+S*Bu:E,T^h>=n^g>=n){var C=wn(yn(c),yn(e));xn(C);var k=wn(i,C);xn(k);var L=(T^E>=0?-1:1)*it(k[2]);(r>L||r===L&&(C[0]||C[1]))&&(o+=T^E>=0?1:-1)}if(!(m++))break;h=g,d=b,v=w,c=e}}return(-Du>s||Du>s&&0>Sa)^1&o}function Wn(e){function t(e,t){return Math.cos(e)*Math.cos(t)>s}function n(e){var n,s,a,f,l;return{lineStart:function(){f=a=!1,l=1},point:function(c,h){var p,d=[c,h],v=t(c,h),m=o?v?0:i(c,h):v?i(c+(0>c?Hu:-Hu),h):0;if(!n&&(f=a=v)&&e.lineStart(),v!==a&&(p=r(n,d),(Nn(n,p)||Nn(d,p))&&(d[0]+=Du,d[1]+=Du,v=t(d[0],d[1]))),v!==a)l=0,v?(e.lineStart(),p=r(d,n),e.point(p[0],p[1])):(p=r(n,d),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(u&&n&&o^v){var g;m&s||!(g=r(d,n,!0))||(l=0,o?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!v||n&&Nn(n,d)||e.point(d[0],d[1]),n=d,a=v,s=m},lineEnd:function(){a&&e.lineEnd(),n=null},clean:function(){return l|(f&&a)<<1}}}function r(e,t,n){var r=yn(e),i=yn(t),o=[1,0,0],u=wn(r,i),a=bn(u,u),f=u[0],l=a-f*f;if(!l)return!n&&e;var c=s*a/l,h=-s*f/l,p=wn(o,u),d=Sn(o,c),v=Sn(u,h);En(d,v);var m=p,g=bn(d,m),y=bn(m,m),b=g*g-y*(bn(d,d)-1);if(!(0>b)){var w=Math.sqrt(b),E=Sn(m,(-g-w)/y);if(En(E,d),E=Tn(E),!n)return E;var S,x=e[0],T=t[0],N=e[1],C=t[1];x>T&&(S=x,x=T,T=S);var k=T-x,L=gu(k-Hu)<Du,A=L||Du>k;if(!L&&N>C&&(S=N,N=C,C=S),A?L?N+C>0^E[1]<(gu(E[0]-x)<Du?N:C):N<=E[1]&&E[1]<=C:k>Hu^(x<=E[0]&&E[0]<=T)){var O=Sn(m,(-g+w)/y);return En(O,d),[E,Tn(O)]}}}function i(t,n){var r=o?e:Hu-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var s=Math.cos(e),o=s>0,u=gu(s)>Du,a=gr(e,6*Iu);return Bn(t,n,a,o?[0,-e]:[-Hu,e-Hu])}function Xn(e,t,n,r){return function(i){var s,o=i.a,u=i.b,a=o.x,f=o.y,l=u.x,c=u.y,h=0,p=1,d=l-a,v=c-f;if(s=e-a,d||!(s>0)){if(s/=d,0>d){if(h>s)return;p>s&&(p=s)}else if(d>0){if(s>p)return;s>h&&(h=s)}if(s=n-a,d||!(0>s)){if(s/=d,0>d){if(s>p)return;s>h&&(h=s)}else if(d>0){if(h>s)return;p>s&&(p=s)}if(s=t-f,v||!(s>0)){if(s/=v,0>v){if(h>s)return;p>s&&(p=s)}else if(v>0){if(s>p)return;s>h&&(h=s)}if(s=r-f,v||!(0>s)){if(s/=v,0>v){if(s>p)return;s>h&&(h=s)}else if(v>0){if(h>s)return;p>s&&(p=s)}return h>0&&(i.a={x:a+h*d,y:f+h*v}),1>p&&(i.b={x:a+p*d,y:f+p*v}),i}}}}}}function Vn(e,t,n,r){function i(r,i){return gu(r[0]-e)<Du?i>0?0:3:gu(r[0]-n)<Du?i>0?2:1:gu(r[1]-t)<Du?i>0?1:0:i>0?3:2}function s(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(u){function a(e){for(var t=0,n=m.length,r=e[1],i=0;n>i;++i)for(var s,o=1,u=m[i],a=u.length,f=u[0];a>o;++o)s=u[o],f[1]<=r?s[1]>r&&nt(f,s,e)>0&&++t:s[1]<=r&&nt(f,s,e)<0&&--t,f=s;return 0!==t}function f(s,u,a,f){var l=0,c=0;if(null==s||(l=i(s,a))!==(c=i(u,a))||o(s,u)<0^a>0){do f.point(0===l||3===l?e:n,l>1?r:t);while((l=(l+a+4)%4)!==c)}else f.point(u[0],u[1])}function l(i,s){return i>=e&&n>=i&&s>=t&&r>=s}function c(e,t){l(e,t)&&u.point(e,t)}function h(){A.point=d,m&&m.push(g=[]),T=!0,x=!1,E=S=NaN}function p(){v&&(d(y,b),w&&x&&k.rejoin(),v.push(k.buffer())),A.point=c,x&&u.lineEnd()}function d(e,t){e=Math.max(-ja,Math.min(ja,e)),t=Math.max(-ja,Math.min(ja,t));var n=l(e,t);if(m&&g.push([e,t]),T)y=e,b=t,w=n,T=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&x)u.point(e,t);else{var r={a:{x:E,y:S},b:{x:e,y:t}};L(r)?(x||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),N=!1):n&&(u.lineStart(),u.point(e,t),N=!1)}E=e,S=t,x=n}var v,m,g,y,b,w,E,S,x,T,N,C=u,k=Fn(),L=Xn(e,t,n,r),A={point:c,lineStart:h,lineEnd:p,polygonStart:function(){u=k,v=[],m=[],N=!0},polygonEnd:function(){u=C,v=su.merge(v);var t=a([e,r]),n=N&&t,i=v.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),f(null,null,1,u),u.lineEnd()),i&&Dn(v,s,t,f,u),u.polygonEnd()),v=m=g=null}};return A}}function $n(e){var t=0,n=Hu/3,r=fr(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Hu/180,n=e[1]*Hu/180):[t/Hu*180,n/Hu*180]},i}function Jn(e,t){function n(e,t){var n=Math.sqrt(s-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,s=1+r*(2*i-r),o=Math.sqrt(s)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,it((s-(e*e+n*n)*i*i)/(2*i))]},n}function Kn(){function e(e,t){Ia+=i*e-r*t,r=e,i=t}var t,n,r,i;Wa.point=function(s,o){Wa.point=e,t=r=s,n=i=o},Wa.lineEnd=function(){e(t,n)}}function Qn(e,t){qa>e&&(qa=e),e>Ua&&(Ua=e),Ra>t&&(Ra=t),t>za&&(za=t)}function Gn(){function e(e,t){o.push("M",e,",",t,s)}function t(e,t){o.push("M",e,",",t),u.point=n}function n(e,t){o.push("L",e,",",t)}function r(){u.point=e}function i(){o.push("Z")}var s=Yn(4.5),o=[],u={point:e,lineStart:function(){u.point=t},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=e},pointRadius:function(e){return s=Yn(e),u},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return u}function Yn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Zn(e,t){Ca+=e,ka+=t,++La}function er(){function e(e,r){var i=e-t,s=r-n,o=Math.sqrt(i*i+s*s);Aa+=o*(t+e)/2,Oa+=o*(n+r)/2,Ma+=o,Zn(t=e,n=r)}var t,n;Va.point=function(r,i){Va.point=e,Zn(t=r,n=i)}}function tr(){Va.point=Zn}function nr(){function e(e,t){var n=e-r,s=t-i,o=Math.sqrt(n*n+s*s);Aa+=o*(r+e)/2,Oa+=o*(i+t)/2,Ma+=o,o=i*e-r*t,_a+=o*(r+e),Da+=o*(i+t),Pa+=3*o,Zn(r=e,i=t)}var t,n,r,i;Va.point=function(s,o){Va.point=e,Zn(t=r=s,n=i=o)},Va.lineEnd=function(){e(t,n)}}function rr(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,Bu)}function n(t,n){e.moveTo(t,n),u.point=r}function r(t,n){e.lineTo(t,n)}function i(){u.point=t}function s(){e.closePath()}var o=4.5,u={point:t,lineStart:function(){u.point=n},lineEnd:i,polygonStart:function(){u.lineEnd=s},polygonEnd:function(){u.lineEnd=i,u.point=t},pointRadius:function(e){return o=e,u},result:T};return u}function ir(e){function t(e){return(u?r:n)(e)}function n(t){return ur(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=NaN,T.point=s,t.lineStart()}function s(n,r){var s=yn([n,r]),o=e(n,r);i(b,w,y,E,S,x,b=o[0],w=o[1],y=n,E=s[0],S=s[1],x=s[2],u,t),t.point(b,w)}function o(){T.point=n,t.lineEnd()}function a(){r(),T.point=f,T.lineEnd=l}function f(e,t){s(c=e,h=t),p=b,d=w,v=E,m=S,g=x,T.point=s}function l(){i(b,w,y,E,S,x,p,d,c,v,m,g,u,t),T.lineEnd=o,o()}var c,h,p,d,v,m,g,y,b,w,E,S,x,T={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),T.lineStart=a},polygonEnd:function(){t.polygonEnd(),T.lineStart=r}};return T}function i(t,n,r,u,a,f,l,c,h,p,d,v,m,g){var y=l-t,b=c-n,w=y*y+b*b;if(w>4*s&&m--){var E=u+p,S=a+d,x=f+v,T=Math.sqrt(E*E+S*S+x*x),N=Math.asin(x/=T),C=gu(gu(x)-1)<Du||gu(r-h)<Du?(r+h)/2:Math.atan2(S,E),k=e(C,N),L=k[0],A=k[1],O=L-t,M=A-n,_=b*O-y*M;(_*_/w>s||gu((y*O+b*M)/w-.5)>.3||o>u*p+a*d+f*v)&&(i(t,n,r,u,a,f,L,A,C,E/=T,S/=T,x,m,g),g.point(L,A),i(L,A,C,E,S,x,l,c,h,p,d,v,m,g))}}var s=.5,o=Math.cos(30*Iu),u=16;return t.precision=function(e){return arguments.length?(u=(s=e*e)>0&&16,t):Math.sqrt(s)},t}function sr(e){var t=ir(function(t,n){return e([t*qu,n*qu])});return function(e){return lr(t(e))}}function or(e){this.stream=e}function ur(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function ar(e){return fr(function(){return e})()}function fr(e){function t(e){return e=u(e[0]*Iu,e[1]*Iu),[e[0]*h+a,f-e[1]*h]}function n(e){return e=u.invert((e[0]-a)/h,(f-e[1])/h),e&&[e[0]*qu,e[1]*qu]}function r(){u=Mn(o=pr(g,y,b),s);var e=s(v,m);return a=p-e[0]*h,f=d+e[1]*h,i()}function i(){return l&&(l.valid=!1,l=null),t}var s,o,u,a,f,l,c=ir(function(e,t){return e=s(e,t),[e[0]*h+a,f-e[1]*h]}),h=150,p=480,d=250,v=0,m=0,g=0,y=0,b=0,w=Ba,S=E,x=null,T=null;return t.stream=function(e){return l&&(l.valid=!1),l=lr(w(o,c(S(e)))),l.valid=!0,l},t.clipAngle=function(e){return arguments.length?(w=null==e?(x=e,Ba):Wn((x=+e)*Iu),i()):x},t.clipExtent=function(e){return arguments.length?(T=e,S=e?Vn(e[0][0],e[0][1],e[1][0],e[1][1]):E,i()):T},t.scale=function(e){return arguments.length?(h=+e,r()):h},t.translate=function(e){return arguments.length?(p=+e[0],d=+e[1],r()):[p,d]},t.center=function(e){return arguments.length?(v=e[0]%360*Iu,m=e[1]%360*Iu,r()):[v*qu,m*qu]},t.rotate=function(e){return arguments.length?(g=e[0]%360*Iu,y=e[1]%360*Iu,b=e.length>2?e[2]%360*Iu:0,r()):[g*qu,y*qu,b*qu]},su.rebind(t,c,"precision"),function(){return s=e.apply(this,arguments),t.invert=s.invert&&n,r()}}function lr(e){return ur(e,function(n,r){e.point(n*Iu,r*Iu)})}function cr(e,t){return[e,t]}function hr(e,t){return[e>Hu?e-Bu:-Hu>e?e+Bu:e,t]}function pr(e,t,n){return e?t||n?Mn(vr(e),mr(t,n)):vr(e):t||n?mr(t,n):hr}function dr(e){return function(n,r){return n+=e,[n>Hu?n-Bu:-Hu>n?n+Bu:n,r]}}function vr(e){var t=dr(e);return t.invert=dr(-e),t}function mr(e,t){function n(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*r+u*i;return[Math.atan2(a*s-l*o,u*r-f*i),it(l*s+a*o)]}var r=Math.cos(e),i=Math.sin(e),s=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*s-a*o;return[Math.atan2(a*s+f*o,u*r+l*i),it(l*r-u*i)]},n}function gr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;null!=i?(i=yr(n,i),s=yr(n,s),(o>0?s>i:i>s)&&(i+=o*Bu)):(i=e+o*Bu,s=e-.5*a);for(var f,l=i;o>0?l>s:s>l;l-=a)u.point((f=Tn([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function yr(e,t){var n=yn(t);n[0]-=e,xn(n);var r=rt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Du)%(2*Math.PI)}function br(e,t,n){var r=su.range(e,t-Du,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function wr(e,t,n){var r=su.range(e,t-Du,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function Er(e){return e.source}function Sr(e){return e.target}function xr(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(at(r-t)+i*o*at(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*qu,Math.atan2(o,Math.sqrt(r*r+i*i))*qu]}:function(){return[e*qu,t*qu]};return d.distance=h,d}function Tr(){function e(e,i){var s=Math.sin(i*=Iu),o=Math.cos(i),u=gu((e*=Iu)-t),a=Math.cos(u);$a+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*s-n*o*a)*u),n*s+r*o*a),t=e,n=s,r=o}var t,n,r;Ja.point=function(i,s){t=i*Iu,n=Math.sin(s*=Iu),r=Math.cos(s),Ja.point=e},Ja.lineEnd=function(){Ja.point=Ja.lineEnd=T}}function Nr(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function Cr(e,t){function n(e,t){o>0?-Fu+Du>t&&(t=-Fu+Du):t>Fu-Du&&(t=Fu-Du);var n=o/Math.pow(i(t),s);return[n*Math.sin(s*e),o-n*Math.cos(s*e)]}var r=Math.cos(e),i=function(e){return Math.tan(Hu/4+e/2)},s=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),s)/s;return s?(n.invert=function(e,t){var n=o-t,r=tt(s)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/s,2*Math.atan(Math.pow(o/r,1/s))-Fu]},n):Lr}function kr(e,t){function n(e,t){var n=s-t;return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),s=r/i+e;return gu(i)<Du?cr:(n.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/i,s-tt(i)*Math.sqrt(e*e+n*n)]},n)}function Lr(e,t){return[e,Math.log(Math.tan(Hu/4+t/2))]}function Ar(e){var t,n=ar(e),r=n.scale,i=n.translate,s=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=s.apply(n,arguments);if(o===n){if(t=null==e){var u=Hu*r(),a=i();s([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else t&&(o=null);return o},n.clipExtent(null)}function Or(e,t){return[Math.log(Math.tan(Hu/4+t/2)),-e]}function Mr(e){return e[0]}function _r(e){return e[1]}function Dr(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&nt(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Pr(e,t){return e[0]-t[0]||e[1]-t[1]}function Hr(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Br(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function jr(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Fr(){si(this),this.edge=this.site=this.circle=null}function Ir(e){var t=uf.pop()||new Fr;return t.site=e,t}function qr(e){Qr(e),rf.remove(e),uf.push(e),si(e)}function Rr(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},s=e.P,o=e.N,u=[e];qr(e);for(var a=s;a.circle&&gu(n-a.circle.x)<Du&&gu(r-a.circle.cy)<Du;)s=a.P,u.unshift(a),qr(a),a=s;u.unshift(a),Qr(a);for(var f=o;f.circle&&gu(n-f.circle.x)<Du&&gu(r-f.circle.cy)<Du;)o=f.N,u.push(f),qr(f),f=o;u.push(f),Qr(f);var l,c=u.length;for(l=1;c>l;++l)f=u[l],a=u[l-1],ni(f.edge,a.site,f.site,i);a=u[0],f=u[c-1],f.edge=ei(a.site,f.site,null,i),Kr(a),Kr(f)}function Ur(e){for(var t,n,r,i,s=e.x,o=e.y,u=rf._;u;)if(r=zr(u,o)-s,r>Du)u=u.L;else{if(i=s-Wr(u,o),!(i>Du)){r>-Du?(t=u.P,n=u):i>-Du?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}var a=Ir(e);if(rf.insert(t,a),t||n){if(t===n)return Qr(t),n=Ir(t.site),rf.insert(a,n),a.edge=n.edge=ei(t.site,a.site),Kr(t),void Kr(n);if(!n)return void (a.edge=ei(t.site,a.site));Qr(t),Qr(n);var f=t.site,l=f.x,c=f.y,h=e.x-l,p=e.y-c,d=n.site,v=d.x-l,m=d.y-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w={x:(m*y-p*b)/g+l,y:(h*b-v*y)/g+c};ni(n.edge,f,d,w),a.edge=ei(f,e,null,w),n.edge=ei(e,d,null,w),Kr(t),Kr(n)}}function zr(e,t){var n=e.site,r=n.x,i=n.y,s=i-t;if(!s)return r;var o=e.P;if(!o)return-1/0;n=o.site;var u=n.x,a=n.y,f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function Wr(e,t){var n=e.N;if(n)return zr(n,t);var r=e.site;return r.y===t?r.x:1/0}function Xr(e){this.site=e,this.edges=[]}function Vr(e){for(var t,n,r,i,s,o,u,a,f,l,c=e[0][0],h=e[1][0],p=e[0][1],d=e[1][1],v=nf,m=v.length;m--;)if(s=v[m],s&&s.prepare())for(u=s.edges,a=u.length,o=0;a>o;)l=u[o].end(),r=l.x,i=l.y,f=u[++o%a].start(),t=f.x,n=f.y,(gu(r-t)>Du||gu(i-n)>Du)&&(u.splice(o,0,new ri(ti(s.site,l,gu(r-c)<Du&&d-i>Du?{x:c,y:gu(t-c)<Du?n:d}:gu(i-d)<Du&&h-r>Du?{x:gu(n-d)<Du?t:h,y:d}:gu(r-h)<Du&&i-p>Du?{x:h,y:gu(t-h)<Du?n:p}:gu(i-p)<Du&&r-c>Du?{x:gu(n-p)<Du?t:c,y:p}:null),s.site,null)),++a)}function $r(e,t){return t.angle-e.angle}function Jr(){si(this),this.x=this.y=this.arc=this.site=this.cy=null}function Kr(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,s=n.site;if(r!==s){var o=i.x,u=i.y,a=r.x-o,f=r.y-u,l=s.x-o,c=s.y-u,h=2*(a*c-f*l);if(!(h>=-Pu)){var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,c=m+u,g=af.pop()||new Jr;g.arc=e,g.site=i,g.x=v+o,g.y=c+Math.sqrt(v*v+m*m),g.cy=c,e.circle=g;for(var y=null,b=of._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}of.insert(y,g),y||(sf=g)}}}}function Qr(e){var t=e.circle;t&&(t.P||(sf=t.N),of.remove(t),af.push(t),si(t),e.circle=null)}function Gr(e){for(var t,n=tf,r=Xn(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Yr(t,e)||!r(t)||gu(t.a.x-t.b.x)<Du&&gu(t.a.y-t.b.y)<Du)&&(t.a=t.b=null,n.splice(i,1))}function Yr(e,t){var n=e.b;if(n)return!0;var r,i,s=e.a,o=t[0][0],u=t[1][0],a=t[0][1],f=t[1][1],l=e.l,c=e.r,h=l.x,p=l.y,d=c.x,v=c.y,m=(h+d)/2,g=(p+v)/2;if(v===p){if(o>m||m>=u)return;if(h>d){if(s){if(s.y>=f)return}else s={x:m,y:a};n={x:m,y:f}}else{if(s){if(s.y<a)return}else s={x:m,y:f};n={x:m,y:a}}}else if(r=(h-d)/(v-p),i=g-r*m,-1>r||r>1)if(h>d){if(s){if(s.y>=f)return}else s={x:(a-i)/r,y:a};n={x:(f-i)/r,y:f}}else{if(s){if(s.y<a)return}else s={x:(f-i)/r,y:f};n={x:(a-i)/r,y:a}}else if(v>p){if(s){if(s.x>=u)return}else s={x:o,y:r*o+i};n={x:u,y:r*u+i}}else{if(s){if(s.x<o)return}else s={x:u,y:r*u+i};n={x:o,y:r*o+i}}return e.a=s,e.b=n,!0}function Zr(e,t){this.l=e,this.r=t,this.a=this.b=null}function ei(e,t,n,r){var i=new Zr(e,t);return tf.push(i),n&&ni(i,e,t,n),r&&ni(i,t,e,r),nf[e.i].edges.push(new ri(i,e,t)),nf[t.i].edges.push(new ri(i,t,e)),i}function ti(e,t,n){var r=new Zr(e,null);return r.a=t,r.b=n,tf.push(r),r}function ni(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function ri(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ii(){this._=null}function si(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function oi(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ui(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ai(e){for(;e.L;)e=e.L;return e}function fi(e,t){var n,r,i,s=e.sort(li).pop();for(tf=[],nf=new Array(e.length),rf=new ii,of=new ii;;)if(i=sf,s&&(!i||s.y<i.y||s.y===i.y&&s.x<i.x))(s.x!==n||s.y!==r)&&(nf[s.i]=new Xr(s),Ur(s),n=s.x,r=s.y),s=e.pop();else{if(!i)break;Rr(i.arc)}t&&(Gr(t),Vr(t));var o={cells:nf,edges:tf};return rf=of=tf=nf=null,o}function li(e,t){return t.y-e.y||t.x-e.x}function ci(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function hi(e){return e.x}function pi(e){return e.y}function di(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function vi(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=.5*(n+i),u=.5*(r+s),a=t.nodes;a[0]&&vi(e,a[0],n,r,o,u),a[1]&&vi(e,a[1],o,r,i,u),a[2]&&vi(e,a[2],n,u,o,s),a[3]&&vi(e,a[3],o,u,i,s)}}function mi(e,t,n,r,i,s,o){var u,a=1/0;return function f(e,l,c,h,p){if(!(l>s||c>o||r>h||i>p)){if(d=e.point){var d,v=t-e.x,m=n-e.y,g=v*v+m*m;if(a>g){var y=Math.sqrt(a=g);r=t-y,i=n-y,s=t+y,o=n+y,u=d}}for(var b=e.nodes,w=.5*(l+h),E=.5*(c+p),S=t>=w,x=n>=E,T=x<<1|S,N=T+4;N>T;++T)if(e=b[3&T])switch(3&T){case 0:f(e,l,c,w,E);break;case 1:f(e,w,c,h,E);break;case 2:f(e,l,E,w,p);break;case 3:f(e,w,E,h,p)}}}(e,r,i,s,o),u}function gi(e,t){e=su.rgb(e),t=su.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+xt(Math.round(n+s*e))+xt(Math.round(r+o*e))+xt(Math.round(i+u*e))}}function yi(e,t){var n,r={},i={};for(n in e)n in t?r[n]=Ei(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function bi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wi(e,t){var n,r,i,s=lf.lastIndex=cf.lastIndex=0,o=-1,u=[],a=[];for(e+="",t+="";(n=lf.exec(e))&&(r=cf.exec(t));)(i=r.index)>s&&(i=t.slice(s,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,a.push({i:o,x:bi(n,r)})),s=cf.lastIndex;return s<t.length&&(i=t.slice(s),u[o]?u[o]+=i:u[++o]=i),u.length<2?a[0]?(t=a[0].x,function(e){return t(e)+""}):function(){return t}:(t=a.length,function(e){for(var n,r=0;t>r;++r)u[(n=a[r]).i]=n.x(e);return u.join("")})}function Ei(e,t){for(var n,r=su.interpolators.length;--r>=0&&!(n=su.interpolators[r](e,t)););return n}function Si(e,t){var n,r=[],i=[],s=e.length,o=t.length,u=Math.min(e.length,t.length);for(n=0;u>n;++n)r.push(Ei(e[n],t[n]));for(;s>n;++n)i[n]=e[n];for(;o>n;++n)i[n]=t[n];return function(e){for(n=0;u>n;++n)i[n]=r[n](e);return i}}function xi(e){return function(n){return 0>=n?0:n>=1?1:e(n)}}function Ti(e){return function(n){return 1-e(1-n)}}function Ni(e){return function(n){return.5*(.5>n?e(2*n):2-e(2-2*n))}}function Ci(e){return e*e}function ki(e){return e*e*e}function Li(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Ai(e){return function(n){return Math.pow(n,e)}}function Oi(e){return 1-Math.cos(e*Fu)}function Mi(e){return Math.pow(2,10*(e-1))}function _i(e){return 1-Math.sqrt(1-e*e)}function Di(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Bu*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Bu/t)}}function Pi(e){return e||(e=1.70158),function(n){return n*n*((e+1)*n-e)}}function Hi(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Bi(e,t){e=su.hcl(e),t=su.hcl(t);var n=e.h,r=e.c,i=e.l,s=t.h-n,o=t.c-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return pt(n+s*e,r+o*e,i+u*e)+""}}function ji(e,t){e=su.hsl(e),t=su.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return ct(n+s*e,r+o*e,i+u*e)+""}}function Fi(e,t){e=su.lab(e),t=su.lab(t);var n=e.l,r=e.a,i=e.b,s=t.l-n,o=t.a-r,u=t.b-i;return function(e){return vt(n+s*e,r+o*e,i+u*e)+""}}function Ii(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function qi(e){var t=[e.a,e.b],n=[e.c,e.d],r=Ui(t),i=Ri(t,n),s=Ui(zi(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*qu,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*qu:0}function Ri(e,t){return e[0]*t[0]+e[1]*t[1]}function Ui(e){var t=Math.sqrt(Ri(e,e));return t&&(e[0]/=t,e[1]/=t),t}function zi(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Wi(e,t){var n,r=[],i=[],s=su.transform(e),o=su.transform(t),u=s.translate,a=o.translate,f=s.rotate,l=o.rotate,c=s.skew,h=o.skew,p=s.scale,d=o.scale;return u[0]!=a[0]||u[1]!=a[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:bi(u[0],a[0])},{i:3,x:bi(u[1],a[1])})):a[0]||a[1]?r.push("translate("+a+")"):r.push(""),f!=l?(f-l>180?l+=360:l-f>180&&(f+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:bi(f,l)})):l&&r.push(r.pop()+"rotate("+l+")"),c!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:bi(c,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=d[0]||p[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:bi(p[0],d[0])},{i:n-2,x:bi(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=i.length,function(e){for(var t,s=-1;++s<n;)r[(t=i[s]).i]=t.x(e);return r.join("")}}function Xi(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Vi(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function $i(e){for(var t=e.source,n=e.target,r=Ki(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var s=i.length;n!==r;)i.splice(s,0,n),n=n.parent;return i}function Ji(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Ki(e,t){if(e===t)return e;for(var n=Ji(e),r=Ji(t),i=n.pop(),s=r.pop(),o=null;i===s;)o=i,i=n.pop(),s=r.pop();return o}function Qi(e){e.fixed|=2}function Gi(e){e.fixed&=-7}function Yi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Zi(e){e.fixed&=-5}function es(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var s,o=e.nodes,u=o.length,a=-1;++a<u;)s=o[a],null!=s&&(es(s,t,n),e.charge+=s.charge,r+=s.charge*s.cx,i+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function ts(e,t){return su.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=us,e}function ns(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function rs(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(s=e.children)&&(i=s.length))for(var i,s,o=-1;++o<i;)n.push(s[o]);for(;null!=(e=r.pop());)t(e)}function is(e){return e.children}function ss(e){return e.value}function os(e,t){return t.value-e.value}function us(e){return su.merge(e.map(function(e){return(e.children||[]).map(function(n){return{source:e,target:n}})}))}function as(e){return e.x}function fs(e){return e.y}function ls(e,t,n){e.y0=t,e.y=n}function cs(e){return su.range(e.length)}function hs(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function ps(e){for(var t,n=1,r=0,i=e[0][1],s=e.length;s>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function ds(e){return e.reduce(vs,0)}function vs(e,t){return e+t[1]}function ms(e,t){return gs(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function gs(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];++n<=t;)s[n]=i*n+r;return s}function ys(e){return[su.min(e),su.max(e)]}function bs(e,t){return e.value-t.value}function ws(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Es(e,t){e._pack_next=t,t._pack_prev=e}function Ss(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function xs(e){function t(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(f=n.length)){var n,r,i,s,o,u,a,f,l=1/0,c=-1/0,h=1/0,p=-1/0;if(n.forEach(Ts),r=n[0],r.x=-r.r,r.y=0,t(r),f>1&&(i=n[1],i.x=i.r,i.y=0,t(i),f>2))for(s=n[2],ks(r,i,s),t(s),ws(r,s),r._pack_prev=s,ws(s,i),i=r._pack_next,o=3;f>o;o++){ks(r,i,s=n[o]);var d=0,v=1,m=1;for(u=i._pack_next;u!==i;u=u._pack_next,v++)if(Ss(u,s)){d=1;break}if(1==d)for(a=r._pack_prev;a!==u._pack_prev&&!Ss(a,s);a=a._pack_prev,m++);d?(m>v||v==m&&i.r<r.r?Es(r,i=u):Es(r=a,i),o--):(ws(r,s),i=s,t(s))}var g=(l+c)/2,y=(h+p)/2,b=0;for(o=0;f>o;o++)s=n[o],s.x-=g,s.y-=y,b=Math.max(b,s.r+Math.sqrt(s.x*s.x+s.y*s.y));e.r=b,n.forEach(Ns)}}function Ts(e){e._pack_next=e._pack_prev=e}function Ns(e){delete e._pack_next,delete e._pack_prev}function Cs(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var s=-1,o=i.length;++s<o;)Cs(i[s],t,n,r)}function ks(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function Ls(e,t){return e.parent==t.parent?1:2}function As(e){var t=e.children;return t.length?t[0]:e.t}function Os(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Ms(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function _s(e){for(var t,n=0,r=0,i=e.children,s=i.length;--s>=0;)t=i[s],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Ds(e,t,n){return e.a.parent===t.parent?e.a:n}function Ps(e){return 1+su.max(e,function(e){return e.y})}function Hs(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Bs(e){var t=e.children;return t&&t.length?Bs(t[0]):e}function js(e){var t,n=e.children;return n&&(t=n.length)?js(n[t-1]):e}function Fs(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Is(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>s&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function qs(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Rs(e){return e.rangeExtent?e.rangeExtent():qs(e.range())}function Us(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function zs(e,t){var n,r=0,i=e.length-1,s=e[r],o=e[i];return s>o&&(n=r,r=i,i=n,n=s,s=o,o=n),e[r]=t.floor(s),e[i]=t.ceil(o),e}function Ws(e){return e?{floor:function(n){return Math.floor(n/e)*e},ceil:function(n){return Math.ceil(n/e)*e}}:Sf}function Xs(e,t,n,r){var i=[],s=[],o=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=u;)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=su.bisect(e,t,1,u)-1;return s[n](i[n](t))}}function Vs(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Xs:Us,a=r?Vi:Xi;return o=i(e,t,a,n),u=i(t,e,a,Ei),s}function s(e){return o(e)}var o,u;return s.invert=function(e){return u(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},s.range=function(e){return arguments.length?(t=e,i()):t},s.rangeRound=function(e){return s.range(e).interpolate(Ii)},s.clamp=function(e){return arguments.length?(r=e,i()):r},s.interpolate=function(e){return arguments.length?(n=e,i()):n},s.ticks=function(t){return Qs(e,t)},s.tickFormat=function(t,n){return Gs(e,t,n)},s.nice=function(t){return Js(e,t),i()},s.copy=function(){return Vs(e,t,n,r)},i()}function $s(e,t){return su.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Js(e,t){return zs(e,Ws(Ks(e,t)[2]))}function Ks(e,t){null==t&&(t=10);var n=qs(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return.15>=s?i*=10:.35>=s?i*=5:.75>=s&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Qs(e,t){return su.range.apply(su,Ks(e,t))}function Gs(e,t,n){var r=Ks(e,t);if(n){var i=fa.exec(n);if(i.shift(),"s"===i[8]){var s=su.formatPrefix(Math.max(gu(r[0]),gu(r[1])));return i[7]||(i[7]="."+Ys(s.scale(r[2]))),i[8]="f",n=su.format(i.join("")),function(e){return n(s.scale(e))+s.symbol}}i[7]||(i[7]="."+Zs(i[8],r)),n=i.join("")}else n=",."+Ys(r[2])+"f";return su.format(n)}function Ys(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Zs(e,t){var n=Ys(t[2]);return e in xf?Math.abs(n-Ys(Math.max(gu(t[0]),gu(t[1]))))+ +("e"!==e):n-2*("%"===e)}function eo(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function s(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return s(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=zs(r.map(i),n?Math:Nf);return e.domain(t),r=t.map(s),o},o.ticks=function(){var e=qs(r),o=[],u=e[0],a=e[1],f=Math.floor(i(u)),l=Math.ceil(i(a)),c=t%1?2:t;if(isFinite(l-f)){if(n){for(;l>f;f++)for(var h=1;c>h;h++)o.push(s(f)*h);o.push(s(f))}else for(o.push(s(f));f++<l;)for(var h=c-1;h>0;h--)o.push(s(f)*h);for(f=0;o[f]<u;f++);for(l=o.length;o[l-1]>a;l--);o=o.slice(f,l)}return o},o.tickFormat=function(e,t){if(!arguments.length)return Tf;arguments.length<2?t=Tf:"function"!=typeof t&&(t=su.format(t));var r,u=Math.max(.1,e/o.ticks().length),a=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/s(a(i(e)+r))<=u?t(e):""}},o.copy=function(){return eo(e.copy(),t,n,r)},$s(o,e)}function to(e,t,n){function r(t){return e(i(t))}var i=no(t),s=no(1/t);return r.invert=function(t){return s(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return Qs(n,e)},r.tickFormat=function(e,t){return Gs(n,e,t)},r.nice=function(e){return r.domain(Js(n,e))},r.exponent=function(o){return arguments.length?(i=no(t=o),s=no(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return to(e.copy(),t,n)},$s(r,e)}function no(e){return function(n){return 0>n?-Math.pow(-n,e):Math.pow(n,e)}}function ro(e,t){function n(n){return s[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):NaN))-1)%s.length]}function r(t,n){return su.range(e.length).map(function(e){return t+n*e})}var i,s,o;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new h;for(var s,o=-1,u=r.length;++o<u;)i.has(s=r[o])||i.set(s,e.push(s));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(s=e,o=0,t={t:"range",a:arguments},n):s},n.rangePoints=function(i,u){arguments.length<2&&(u=0);var a=i[0],f=i[1],l=e.length<2?(a=(a+f)/2,0):(f-a)/(e.length-1+u);return s=r(a+l*u/2,l),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,u){arguments.length<2&&(u=0);var a=i[0],f=i[1],l=e.length<2?(a=f=Math.round((a+f)/2),0):(f-a)/(e.length-1+u)|0;return s=r(a+Math.round(l*u/2+(f-a-(e.length-1+u)*l)/2),l),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,u,a){arguments.length<2&&(u=0),arguments.length<3&&(a=u);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=(c-l)/(e.length-u+2*a);return s=r(l+h*a,h),f&&s.reverse(),o=h*(1-u),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,u,a){arguments.length<2&&(u=0),arguments.length<3&&(a=u);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=Math.floor((c-l)/(e.length-u+2*a));return s=r(l+Math.round((c-l-(e.length-u)*h)/2),h),f&&s.reverse(),o=Math.round(h*(1-u)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return qs(t.a[0])},n.copy=function(){return ro(e,t)},n.domain(e)}function io(e,t){function n(){var n=0,s=t.length;for(i=[];++n<s;)i[n-1]=su.quantile(e,n/s);return r}function r(e){return isNaN(e=+e)?void 0:t[su.bisect(i,e)]}var i;return r.domain=function(t){return arguments.length?(e=t.map(o).filter(u).sort(s),n()):e},r.range=function(e){return arguments.length?(t=e,n()):t},r.quantiles=function(){return i},r.invertExtent=function(n){return n=t.indexOf(n),0>n?[NaN,NaN]:[n>0?i[n-1]:e[0],n<i.length?i[n]:e[e.length-1]]},r.copy=function(){return io(e,t)},n()}function so(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(s*(t-e))))]}function i(){return s=n.length/(t-e),o=n.length-1,r}var s,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?NaN:t/s+e,[t,t+1/s]},r.copy=function(){return so(e,t,n)},i()}function oo(e,t){function n(n){return n>=n?t[su.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return oo(e,t)},n}function uo(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Qs(e,t)},t.tickFormat=function(t,n){return Gs(e,t,n)},t.copy=function(){return uo(e)},t}function ao(){return 0}function fo(e){return e.innerRadius}function lo(e){return e.outerRadius}function co(e){return e.startAngle}function ho(e){return e.endAngle}function po(e){return e&&e.padAngle}function vo(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function mo(e,t,n,r,i){var s=e[0]-t[0],o=e[1]-t[1],u=(i?r:-r)/Math.sqrt(s*s+o*o),a=u*o,f=-u*s,l=e[0]+a,c=e[1]+f,h=t[0]+a,p=t[1]+f,d=(l+h)/2,v=(c+p)/2,m=h-l,g=p-c,y=m*m+g*g,b=n-r,w=l*p-h*c,E=(0>g?-1:1)*Math.sqrt(b*b*y-w*w),S=(w*g-m*E)/y,x=(-w*m-g*E)/y,T=(w*g+m*E)/y,N=(-w*m+g*E)/y,C=S-d,k=x-v,L=T-d,A=N-v;return C*C+k*k>L*L+A*A&&(S=T,x=N),[[S-a,x-f],[S*n/b,x*n/b]]}function go(e){function t(t){function o(){f.push("M",s(e(l),u))}for(var a,f=[],l=[],c=-1,h=t.length,p=At(n),d=At(r);++c<h;)i.call(this,a=t[c],c)?l.push([+p.call(this,a,c),+d.call(this,a,c)]):l.length&&(o(),l=[]);return l.length&&o(),f.length?f.join(""):null}var n=Mr,r=_r,i=_n,s=yo,o=s.key,u=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?s=e:(s=Mf.get(e)||yo).key,t):o},t.tension=function(e){return arguments.length?(u=e,t):u},t}function yo(e){return e.join("L")}function bo(e){return yo(e)+"Z"}function wo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Eo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function So(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function xo(e,t){return e.length<4?yo(e):e[1]+Co(e.slice(1,-1),ko(e,t))}function To(e,t){return e.length<3?yo(e):e[0]+Co((e.push(e[0]),e),ko([e[e.length-2]].concat(e,[e[1]]),t))}function No(e,t){return e.length<3?yo(e):e[0]+Co(e,ko(e,t))}function Co(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return yo(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;if(n&&(r+="Q"+(s[0]-2*o[0]/3)+","+(s[1]-2*o[1]/3)+","+s[0]+","+s[1],i=e[1],a=2),t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+2*u[0]/3)+","+(s[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function ko(e,t){for(var n,r=[],i=(1-t)/2,s=e[0],o=e[1],u=1,a=e.length;++u<a;)n=s,s=o,o=e[u],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Lo(e){if(e.length<3)return yo(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",_o(Pf,o),",",_o(Pf,u)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Do(a,o,u);return e.pop(),a.push("L",r),a.join("")}function Ao(e){if(e.length<4)return yo(e);for(var t,n=[],r=-1,i=e.length,s=[0],o=[0];++r<3;)t=e[r],s.push(t[0]),o.push(t[1]);for(n.push(_o(Pf,s)+","+_o(Pf,o)),--r;++r<i;)t=e[r],s.shift(),s.push(t[0]),o.shift(),o.push(t[1]),Do(n,s,o);return n.join("")}function Oo(e){for(var t,n,r=-1,i=e.length,s=i+4,o=[],u=[];++r<4;)n=e[r%i],o.push(n[0]),u.push(n[1]);for(t=[_o(Pf,o),",",_o(Pf,u)],--r;++r<s;)n=e[r%i],o.shift(),o.push(n[0]),u.shift(),u.push(n[1]),Do(t,o,u);return t.join("")}function Mo(e,t){var n=e.length-1;if(n)for(var r,i,s=e[0][0],o=e[0][1],u=e[n][0]-s,a=e[n][1]-o,f=-1;++f<=n;)r=e[f],i=f/n,r[0]=t*r[0]+(1-t)*(s+i*u),r[1]=t*r[1]+(1-t)*(o+i*a);return Lo(e)}function _o(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Do(e,t,n){e.push("C",_o(_f,t),",",_o(_f,n),",",_o(Df,t),",",_o(Df,n),",",_o(Pf,t),",",_o(Pf,n))}function Po(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Ho(e){for(var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=Po(i,s);++t<n;)r[t]=(o+(o=Po(i=s,s=e[t+1])))/2;return r[t]=o,r}function Bo(e){for(var t,n,r,i,s=[],o=Ho(e),u=-1,a=e.length-1;++u<a;)t=Po(e[u],e[u+1]),gu(t)<Du?o[u]=o[u+1]=0:(n=o[u]/t,r=o[u+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[u]=i*n,o[u+1]=i*r));for(u=-1;++u<=a;)i=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),s.push([i||0,o[u]*i||0]);return s}function jo(e){return e.length<3?yo(e):e[0]+Co(e,Bo(e))}function Fo(e){for(var t,n,r,i=-1,s=e.length;++i<s;)t=e[i],n=t[0],r=t[1]-Fu,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Io(e){function t(t){function a(){v.push("M",u(e(g),c),l,f(e(m.reverse()),c),"Z")}for(var h,p,d,v=[],m=[],g=[],y=-1,b=t.length,w=At(n),E=At(i),S=n===r?function(){return p}:At(r),x=i===s?function(){return d}:At(s);++y<b;)o.call(this,h=t[y],y)?(m.push([p=+w.call(this,h,y),d=+E.call(this,h,y)]),g.push([+S.call(this,h,y),+x.call(this,h,y)])):m.length&&(a(),m=[],g=[]);return m.length&&a(),v.length?v.join(""):null}var n=Mr,r=Mr,i=0,s=_r,o=_n,u=yo,a=u.key,f=u,l="L",c=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=s=e,t):s},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(s=e,t):s},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?u=e:(u=Mf.get(e)||yo).key,f=u.reverse||u,l=u.closed?"M":"L",t):a},t.tension=function(e){return arguments.length?(c=e,t):c},t}function qo(e){return e.radius}function Ro(e){return[e.x,e.y]}function Uo(e){return function(){var n=e.apply(this,arguments),r=n[0],i=n[1]-Fu;return[r*Math.cos(i),r*Math.sin(i)]}}function zo(){return 64}function Wo(){return"circle"}function Xo(e){var t=Math.sqrt(e/Hu);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Vo(e){return function(){var n,r;(n=this[e])&&(r=n[n.active])&&(--n.count?delete n[n.active]:delete this[e],n.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function $o(e,t,n){return Su(e,Rf),e.namespace=t,e.id=n,e}function Jo(e,t,n,r){var i=e.id,s=e.namespace;return V(e,"function"==typeof n?function(e,o,u){e[s][i].tween.set(t,r(n.call(e,e.__data__,o,u)))}:(n=r(n),function(e){e[s][i].tween.set(t,n)}))}function Ko(e){return null==e&&(e=""),function(){this.textContent=e}}function Qo(e){return null==e?"__transition__":"__transition_"+e+"__"}function Go(e,t,n,r,i){var s=e[n]||(e[n]={active:0,count:0}),o=s[r];if(!o){var u=i.time;o=s[r]={tween:new h,time:u,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++s.count,su.timer(function(i){function a(n){if(s.active>r)return l();var i=s[s.active];i&&(--s.count,delete s[s.active],i.event&&i.event.interrupt.call(e,e.__data__,i.index)),s.active=r,o.event&&o.event.start.call(e,e.__data__,t),o.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&v.push(r)}),h=o.ease,c=o.duration,su.timer(function(){return d.c=f(n||1)?_n:f,1},0,u)}function f(n){if(s.active!==r)return 1;for(var i=n/c,u=h(i),a=v.length;a>0;)v[--a].call(e,u);return i>=1?(o.event&&o.event.end.call(e,e.__data__,t),l()):void 0}function l(){return--s.count?delete s[r]:delete e[n],1}var c,h,p=o.delay,d=oa,v=[];return d.t=p+u,i>=p?a(i-p):void (d.c=a)},0,u)}}function Yo(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function Zo(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function eu(e){return e.toISOString()}function tu(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,s=su.bisect(Qf,i);return s==Qf.length?[t.year,Ks(e.map(function(e){return e/31536e6}),n)[2]]:s?t[i/Qf[s-1]<Qf[s]/i?s-1:s]:[Zf,Ks(e,n)[2]]}return r.invert=function(t){return nu(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(nu)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,nu(+n+1),t).length}var s=r.domain(),o=qs(s),u=null==e?i(o,10):"number"==typeof e&&i(o,e);return u&&(e=u[0],t=u[1]),r.domain(zs(s,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=nu(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=nu(+t+1);return t}}:e))},r.ticks=function(e,t){var n=qs(r.domain()),s=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return s&&(e=s[0],t=s[1]),e.range(n[0],nu(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return tu(e.copy(),t,n)},$s(r,e)}function nu(e){return new Date(e)}function ru(e){return JSON.parse(e.responseText)}function iu(e){var t=au.createRange();return t.selectNode(au.body),t.createContextualFragment(e.responseText)}var su={version:"3.5.6"},ou=[].slice,uu=function(e){return ou.call(e)},au=this.document;if(au)try{uu(au.documentElement.childNodes)[0].nodeType}catch(fu){uu=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+(new Date)}),au)try{au.createElement("DIV").style.setProperty("opacity",0,"")}catch(lu){var cu=this.Element.prototype,hu=cu.setAttribute,pu=cu.setAttributeNS,du=this.CSSStyleDeclaration.prototype,vu=du.setProperty;cu.setAttribute=function(e,t){hu.call(this,e,t+"")},cu.setAttributeNS=function(e,t,n){pu.call(this,e,t,n+"")},du.setProperty=function(e,t,n){vu.call(this,e,t+"",n)}}su.ascending=s,su.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:NaN},su.min=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<s;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<s;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<s;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},su.max=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<s;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<s;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<s;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},su.extent=function(e,t){var n,r,i,s=-1,o=e.length;if(1===arguments.length){for(;++s<o;)if(null!=(r=e[s])&&r>=r){n=i=r;break}for(;++s<o;)null!=(r=e[s])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++s<o;)if(null!=(r=t.call(e,e[s],s))&&r>=r){n=i=r;break}for(;++s<o;)null!=(r=t.call(e,e[s],s))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},su.sum=function(e,t){var n,r=0,i=e.length,s=-1;if(1===arguments.length)for(;++s<i;)u(n=+e[s])&&(r+=n);else for(;++s<i;)u(n=+t.call(e,e[s],s))&&(r+=n);return r},su.mean=function(e,t){var n,r=0,i=e.length,s=-1,a=i;if(1===arguments.length)for(;++s<i;)u(n=o(e[s]))?r+=n:--a;else for(;++s<i;)u(n=o(t.call(e,e[s],s)))?r+=n:--a;return a?r/a:void 0},su.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},su.median=function(e,t){var n,r=[],i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)u(n=o(e[a]))&&r.push(n);else for(;++a<i;)u(n=o(t.call(e,e[a],a)))&&r.push(n);return r.length?su.quantile(r.sort(s),.5):void 0},su.variance=function(e,t){var n,r,i=e.length,s=0,a=0,f=-1,l=0;if(1===arguments.length)for(;++f<i;)u(n=o(e[f]))&&(r=n-s,s+=r/++l,a+=r*(n-s));else for(;++f<i;)u(n=o(t.call(e,e[f],f)))&&(r=n-s,s+=r/++l,a+=r*(n-s));return l>1?a/(l-1):void 0},su.deviation=function(){var e=su.variance.apply(this,arguments);return e?Math.sqrt(e):e};var mu=a(s);su.bisectLeft=mu.left,su.bisect=su.bisectRight=mu.right,su.bisector=function(e){return a(1===e.length?function(n,r){return s(e(n),r)}:e)},su.shuffle=function(e,t,n){(s=arguments.length)<3&&(n=e.length,2>s&&(t=0));for(var r,i,s=n-t;s;)i=Math.random()*s--|0,r=e[s+t],e[s+t]=e[i+t],e[i+t]=r;return e},su.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},su.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],s=new Array(0>r?0:r);r>n;)s[n]=[t=i,i=e[++n]];return s},su.zip=function(){if(!(r=arguments.length))return[];for(var e=-1,t=su.min(arguments,f),n=new Array(t);++e<t;)for(var r,i=-1,s=n[e]=new Array(r);++i<r;)s[i]=arguments[i][e];return n},su.transpose=function(e){return su.zip.apply(su,e)},su.keys=function(e){var t=[];for(var n in e)t.push(n);return t},su.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},su.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},su.merge=function(e){for(var t,n,r,i=e.length,s=-1,o=0;++s<i;)o+=e[s].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var gu=Math.abs;su.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],s=l(gu(n)),o=-1;if(e*=s,t*=s,n*=s,0>n)for(;(r=e+n*++o)>t;)i.push(r/s);else for(;(r=e+n*++o)<t;)i.push(r/s);return i},su.map=function(e,t){var n=new h;if(e instanceof h)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,s=e.length;if(1===arguments.length)for(;++i<s;)n.set(i,e[i]);else for(;++i<s;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var yu="__proto__",bu="\0";c(h,{has:v,get:function(e){return this._[p(e)]},set:function(e,t){return this._[p(e)]=t},remove:m,keys:g,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:d(t),value:this._[t]});return e},size:y,empty:b,forEach:function(e){for(var t in this._)e.call(this,d(t),this._[t])}}),su.nest=function(){function e(t,o,u){if(u>=s.length)return r?r.call(i,o):n?o.sort(n):o;for(var a,f,l,c,p=-1,d=o.length,v=s[u++],m=new h;++p<d;)(c=m.get(a=v(f=o[p])))?c.push(f):m.set(a,[f]);return t?(f=t(),l=function(n,r){f.set(n,e(t,r,u))}):(f={},l=function(n,r){f[n]=e(t,r,u)}),m.forEach(l),f}function t(e,n){if(n>=s.length)return e;var r=[],i=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},s=[],o=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(su.map,n,0),0)},i.key=function(e){return s.push(e),i},i.sortKeys=function(e){return o[s.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},su.set=function(e){var t=new w;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},c(w,{has:v,add:function(e){return this._[p(e+="")]=!0,e},remove:m,values:g,size:y,empty:b,forEach:function(e){for(var t in this._)e.call(this,d(t))}}),su.behavior={},su.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=S(e,t,t[n]);return e};var wu=["webkit","ms","moz","Moz","o","O"];su.dispatch=function(){for(var e=new N,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=C(e);return e},N.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},su.event=null,su.requote=function(e){return e.replace(Eu,"\\$&")};var Eu=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Su={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},xu=function(e,t){return t.querySelector(e)},Tu=function(e,t){return t.querySelectorAll(e)},Nu=function(e,t){var n=e.matches||e[x(e,"matchesSelector")];return(Nu=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(xu=function(e,t){return Sizzle(e,t)[0]||null},Tu=Sizzle,Nu=Sizzle.matchesSelector),su.selection=function(){return su.select(au.documentElement)};var Cu=su.selection.prototype=[];Cu.select=function(e){var t,n,r,i,s=[];e=M(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var a=-1,f=r.length;++a<f;)(i=r[a])?(t.push(n=e.call(i,i.__data__,a,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return O(s)},Cu.selectAll=function(e){var t,n,r=[];e=_(e);for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)(n=o[u])&&(r.push(t=uu(e.call(n,n.__data__,u,i))),t.parentNode=n);return O(r)};var ku={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};su.ns={prefix:ku,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t),e=e.slice(t+1)),ku.hasOwnProperty(n)?{space:ku[n],local:e}:e}},Cu.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=su.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(D(t,e[t]));return this}return this.each(D(e,t))},Cu.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=B(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!H(e[i]).test(t))return!1;return!0}for(t in e)this.each(j(t,e[t]));return this}return this.each(j(e,t))},Cu.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t="");for(n in e)this.each(I(n,e[n],t));return this}if(2>r){var s=this.node();return i(s).getComputedStyle(s,null).getPropertyValue(e)}n=""}return this.each(I(e,t,n))},Cu.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(q(t,e[t]));return this}return this.each(q(e,t))},Cu.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var n=e.apply(this,arguments);this.textContent=null==n?"":n}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Cu.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var n=e.apply(this,arguments);this.innerHTML=null==n?"":n}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Cu.append=function(e){return e=R(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Cu.insert=function(e,t){return e=R(e),t=M(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Cu.remove=function(){return this.each(U)},Cu.data=function(e,t){function n(e,n){var r,i,s,o=e.length,l=n.length,c=Math.min(o,l),p=new Array(l),d=new Array(l),v=new Array(o);if(t){var m,g=new h,y=new Array(o);for(r=-1;++r<o;)g.has(m=t.call(i=e[r],i.__data__,r))?v[r]=i:g.set(m,i),y[r]=m;for(r=-1;++r<l;)(i=g.get(m=t.call(n,s=n[r],r)))?i!==!0&&(p[r]=i,i.__data__=s):d[r]=z(s),g.set(m,!0);for(r=-1;++r<o;)g.get(y[r])!==!0&&(v[r]=e[r])}else{for(r=-1;++r<c;)i=e[r],s=n[r],i?(i.__data__=s,p[r]=i):d[r]=z(s);for(;l>r;++r)d[r]=z(n[r]);for(;o>r;++r)v[r]=e[r]}d.update=p,d.parentNode=p.parentNode=v.parentNode=e.parentNode,u.push(d),a.push(p),f.push(v)}var r,i,s=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(r=this[0]).length);++s<o;)(i=r[s])&&(e[s]=i.__data__);return e}var u=$([]),a=O([]),f=O([]);if("function"==typeof e)for(;++s<o;)n(r=this[s],e.call(r,r.parentNode.__data__,s));else for(;++s<o;)n(r=this[s],e);return a.enter=function(){return u},a.exit=function(){return f},a},Cu.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Cu.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=W(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]),t.parentNode=(n=this[s]).parentNode;for(var u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return O(i)},Cu.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,s=r[i];--i>=0;)(n=r[i])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this},Cu.sort=function(e){e=X.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Cu.each=function(e){return V(this,function(n,r,i){e.call(n,n.__data__,r,i)})},Cu.call=function(e){var t=uu(arguments);return e.apply(t[0]=this,t),this},Cu.empty=function(){return!this.node()},Cu.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var s=n[r];if(s)return s}return null},Cu.size=function(){var e=0;return V(this,function(){++e}),e};var Lu=[];su.selection.enter=$,su.selection.enter.prototype=Lu,Lu.append=Cu.append,Lu.empty=Cu.empty,Lu.node=Cu.node,Lu.call=Cu.call,Lu.size=Cu.size,Lu.select=function(e){for(var t,n,r,i,s,o=[],u=-1,a=this.length;++u<a;){r=(i=this[u]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var f=-1,l=i.length;++f<l;)(s=i[f])?(t.push(r[f]=n=e.call(i.parentNode,s.__data__,f,u)),n.__data__=s.__data__):t.push(null)}return O(o)},Lu.insert=function(e,t){return arguments.length<2&&(t=J(this)),Cu.insert.call(this,e,t)},su.select=function(e){var t;return"string"==typeof e?(t=[xu(e,au)],t.parentNode=au.documentElement):(t=[e],t.parentNode=n(e)),O([t])},su.selectAll=function(e){var t;return"string"==typeof e?(t=uu(Tu(e,au)),t.parentNode=au.documentElement):(t=e,t.parentNode=null),O([t])},Cu.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(K(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(K(e,t,n))};var Au=su.map({mouseenter:"mouseover",mouseleave:"mouseout"});au&&Au.forEach(function(e){"on"+e in au&&Au.remove(e)});var Ou,Mu=0;su.mouse=function(e){return Z(e,L())};var _u=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;su.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=L().changedTouches),t)for(var r,i=0,s=t.length;s>i;++i)if((r=t[i]).identifier===n)return Z(e,r)},su.behavior.drag=function(){function e(){this.on("mousedown.drag",s).on("touchstart.drag",o)}function t(e,t,i,s,o){return function(){function u(){var e,n,r=t(h,v);r&&(e=r[0]-b[0],n=r[1]-b[1],d|=e|n,b=r,p({type:"drag",x:r[0]+f[0],y:r[1]+f[1],dx:e,dy:n}))}function a(){t(h,v)&&(g.on(s+m,null).on(o+m,null),y(d&&su.event.target===c),p({type:"dragend"}))}var f,l=this,c=su.event.target,h=l.parentNode,p=n.of(l,arguments),d=0,v=e(),m=".drag"+(null==v?"":"-"+v),g=su.select(i(c)).on(s+m,u).on(o+m,a),y=Y(c),b=t(h,v);r?(f=r.apply(l,arguments),f=[f.x-b[0],f.y-b[1]]):f=[0,0],p({type:"dragstart"})}}var n=A(e,"drag","dragstart","dragend"),r=null,s=t(T,su.mouse,i,"mousemove","mouseup"),o=t(et,su.touch,E,"touchmove","touchend");return e.origin=function(t){return arguments.length?(r=t,e):r},su.rebind(e,n,"on")},su.touches=function(e,t){return arguments.length<2&&(t=L().touches),t?uu(t).map(function(t){var n=Z(e,t);return n.identifier=t.identifier,n}):[]};var Du=1e-6,Pu=Du*Du,Hu=Math.PI,Bu=2*Hu,ju=Bu-Du,Fu=Hu/2,Iu=Hu/180,qu=180/Hu,Ru=Math.SQRT2,Uu=2,zu=4;su.interpolateZoom=function(e,t){function n(e){var t=e*y;if(g){var n=ot(v),o=s/(Uu*h)*(n*ut(Ru*t+v)-st(v));return[r+o*f,i+o*l,s*n/ot(Ru*t+v)]}return[r+e*f,i+e*l,s*Math.exp(Ru*t)]}var r=e[0],i=e[1],s=e[2],o=t[0],u=t[1],a=t[2],f=o-r,l=u-i,c=f*f+l*l,h=Math.sqrt(c),p=(a*a-s*s+zu*c)/(2*s*Uu*h),d=(a*a-s*s-zu*c)/(2*a*Uu*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(d*d+1)-d),g=m-v,y=(g||Math.log(a/s))/Ru;return n.duration=1e3*y,n},su.behavior.zoom=function(){function e(e){e.on(M,c).on(Xu+".zoom",p).on("dblclick.zoom",d).on(P,h)}function t(e){return[(e[0]-T.x)/T.k,(e[1]-T.y)/T.k]}function n(e){return[e[0]*T.k+T.x,e[1]*T.k+T.y]}function r(e){T.k=Math.max(C[0],Math.min(C[1],e))}function s(e,t){t=n(t),T.x+=e[0]-t[0],T.y+=e[1]-t[1]}function o(t,n,i,o){t.__chart__={x:T.x,y:T.y,k:T.k},r(Math.pow(2,o)),s(m=n,i),t=su.select(t),L>0&&(t=t.transition().duration(L)),t.call(e.event)}function u(){E&&E.domain(w.range().map(function(e){return(e-T.x)/T.k}).map(w.invert)),x&&x.domain(S.range().map(function(e){return(e-T.y)/T.k}).map(S.invert))}function a(e){O++||e({type:"zoomstart"})}function f(e){u(),e({type:"zoom",scale:T.k,translate:[T.x,T.y]})}function l(e){--O||(e({type:"zoomend"}),m=null)}function c(){function e(){c=1,s(su.mouse(r),p),f(u)}function n(){h.on(_,null).on(D,null),d(c&&su.event.target===o),l(u)}var r=this,o=su.event.target,u=H.of(r,arguments),c=0,h=su.select(i(r)).on(_,e).on(D,n),p=t(su.mouse(r)),d=Y(r);qf.call(r),a(u)}function h(){function e(){var e=su.touches(d);return p=T.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=t(e))}),e}function n(){var t=su.event.target;su.select(t).on(w,i).on(E,u),S.push(t);for(var n=su.event.changedTouches,r=0,s=n.length;s>r;++r)m[n[r].identifier]=null;var a=e(),f=Date.now();if(1===a.length){if(500>f-b){var l=a[0];o(d,l,m[l.identifier],Math.floor(Math.log(T.k)/Math.LN2)+1),k()}b=f}else if(a.length>1){var l=a[0],c=a[1],h=l[0]-c[0],p=l[1]-c[1];g=h*h+p*p}}function i(){var e,t,n,i,o=su.touches(d);qf.call(d);for(var u=0,a=o.length;a>u;++u,i=null)if(n=o[u],i=m[n.identifier]){if(t)break;e=n,t=i}if(i){var l=(l=n[0]-e[0])*l+(l=n[1]-e[1])*l,c=g&&Math.sqrt(l/g);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+i[0])/2,(t[1]+i[1])/2],r(c*p)}b=null,s(e,t),f(v)}function u(){if(su.event.touches.length){for(var t=su.event.changedTouches,n=0,r=t.length;r>n;++n)delete m[t[n].identifier];for(var i in m)return void e()}su.selectAll(S).on(y,null),x.on(M,c).on(P,h),N(),l(v)}var p,d=this,v=H.of(d,arguments),m={},g=0,y=".zoom-"+su.event.changedTouches[0].identifier,w="touchmove"+y,E="touchend"+y,S=[],x=su.select(d),N=Y(d);n(),a(v),x.on(M,null).on(P,n)}function p(){var e=H.of(this,arguments);y?clearTimeout(y):(qf.call(this),v=t(m=g||su.mouse(this)),a(e)),y=setTimeout(function(){y=null,l(e)},50),k(),r(Math.pow(2,.002*Wu())*T.k),s(m,v),f(e)}function d(){var e=su.mouse(this),n=Math.log(T.k)/Math.LN2;o(this,e,t(e),su.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var v,m,g,y,b,w,E,S,x,T={x:0,y:0,k:1},N=[960,500],C=Vu,L=250,O=0,M="mousedown.zoom",_="mousemove.zoom",D="mouseup.zoom",P="touchstart.zoom",H=A(e,"zoomstart","zoom","zoomend");return Xu||(Xu="onwheel"in au?(Wu=function(){return-su.event.deltaY*(su.event.deltaMode?120:1)},"wheel"):"onmousewheel"in au?(Wu=function(){return su.event.wheelDelta},"mousewheel"):(Wu=function(){return-su.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=H.of(this,arguments),t=T;Ff?su.select(this).transition().each("start.zoom",function(){T=this.__chart__||{x:0,y:0,k:1},a(e)}).tween("zoom:zoom",function(){var n=N[0],r=N[1],i=m?m[0]:n/2,s=m?m[1]:r/2,o=su.interpolateZoom([(i-T.x)/T.k,(s-T.y)/T.k,n/T.k],[(i-t.x)/t.k,(s-t.y)/t.k,n/t.k]);return function(t){var r=o(t),u=n/r[2];this.__chart__=T={x:i-r[0]*u,y:s-r[1]*u,k:u},f(e)}}).each("interrupt.zoom",function(){l(e)}).each("end.zoom",function(){l(e)}):(this.__chart__=T,a(e),f(e),l(e))})},e.translate=function(t){return arguments.length?(T={x:+t[0],y:+t[1],k:T.k},u(),e):[T.x,T.y]},e.scale=function(t){return arguments.length?(T={x:T.x,y:T.y,k:+t},u(),e):T.k},e.scaleExtent=function(t){return arguments.length?(C=null==t?Vu:[+t[0],+t[1]],e):C},e.center=function(t){return arguments.length?(g=t&&[+t[0],+t[1]],e):g},e.size=function(t){return arguments.length?(N=t&&[+t[0],+t[1]],e):N},e.duration=function(t){return arguments.length?(L=+t,e):L},e.x=function(t){return arguments.length?(E=t,w=t.copy(),T={x:0,y:0,k:1},e):E},e.y=function(t){return arguments.length?(x=t,S=t.copy(),T={x:0,y:0,k:1},e):x},su.rebind(e,H,"on")};var Wu,Xu,Vu=[0,1/0];su.color=ft,ft.prototype.toString=function(){return this.rgb()+""},su.hsl=lt;var $u=lt.prototype=new ft;$u.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new lt(this.h,this.s,this.l/e)},$u.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new lt(this.h,this.s,e*this.l)},$u.rgb=function(){return ct(this.h,this.s,this.l)},su.hcl=ht;var Ju=ht.prototype=new ft;Ju.brighter=function(e){return new ht(this.h,this.c,Math.min(100,this.l+Ku*(arguments.length?e:1)))},Ju.darker=function(e){return new ht(this.h,this.c,Math.max(0,this.l-Ku*(arguments.length?e:1)))},Ju.rgb=function(){return pt(this.h,this.c,this.l).rgb()},su.lab=dt;var Ku=18,Qu=.95047,Gu=1,Yu=1.08883,Zu=dt.prototype=new ft;Zu.brighter=function(e){return new dt(Math.min(100,this.l+Ku*(arguments.length?e:1)),this.a,this.b)},Zu.darker=function(e){return new dt(Math.max(0,this.l-Ku*(arguments.length?e:1)),this.a,this.b)},Zu.rgb=function(){return vt(this.l,this.a,this.b)},su.rgb=wt;var ea=wt.prototype=new ft;ea.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new wt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new wt(i,i,i)},ea.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new wt(e*this.r,e*this.g,e*this.b)},ea.hsl=function(){return Nt(this.r,this.g,this.b)},ea.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var ta=su.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ta.forEach(function(e,t){ta.set(e,Et(t))}),su.functor=At,su.xhr=Ot(E),su.dsv=function(e,t){function n(e,n,s){arguments.length<3&&(s=n,n=null);var o=Mt(e,t,null==n?r:i(n),s);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function s(t){return t.map(o).join(e)}function o(e){return u.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var u=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(l>=f)return o;if(i)return i=!1,s;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<f;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}l=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++l):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;f>l;){var r=e.charCodeAt(l++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(l)&&(++l,++u);else if(r!==a)continue;return e.slice(t,l-u)}return e.slice(t)}for(var r,i,s={},o={},u=[],f=e.length,l=0,c=0;(r=n())!==o;){for(var h=[];r!==s&&r!==o;)h.push(r),r=n();t&&null==(h=t(h,c++))||u.push(h)}return u},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new w,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(o).join(e)].concat(t.map(function(t){return i.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(s).join("\n")},n},su.csv=su.dsv(",","text/csv"),su.tsv=su.dsv("	","text/tab-separated-values");var na,ra,ia,sa,oa,ua=this[x(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};su.timer=function(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,s={c:e,t:i,f:!1,n:null};ra?ra.n=s:na=s,ra=s,ia||(sa=clearTimeout(sa),ia=1,ua(Pt))},su.timer.flush=function(){Ht(),Bt()},su.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var aa=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Ft);su.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=su.round(e,jt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),aa[8+n/3]};var fa=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,la=su.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=su.round(e,jt(e,t))).toFixed(Math.max(0,Math.min(20,jt(e*(1+1e-15),t))))}}),ca=su.time={},ha=Date;Rt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){pa.setUTCDate.apply(this._,arguments)},setDay:function(){pa.setUTCDay.apply(this._,arguments)},setFullYear:function(){pa.setUTCFullYear.apply(this._,arguments)},setHours:function(){pa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){pa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){pa.setUTCMinutes.apply(this._,arguments)},setMonth:function(){pa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){pa.setUTCSeconds.apply(this._,arguments)},setTime:function(){pa.setTime.apply(this._,arguments)}};var pa=Date.prototype;ca.year=Ut(function(e){return e=ca.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ca.years=ca.year.range,ca.years.utc=ca.year.utc.range,ca.day=Ut(function(e){var t=new ha(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ca.days=ca.day.range,ca.days.utc=ca.day.utc.range,ca.dayOfYear=function(e){var t=ca.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ca[e]=Ut(function(e){return(e=ca.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ca.year(e).getDay();return Math.floor((ca.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ca[e+"s"]=n.range,ca[e+"s"].utc=n.utc.range,ca[e+"OfYear"]=function(e){var n=ca.year(e).getDay();return Math.floor((ca.dayOfYear(e)+(n+t)%7)/7)}}),ca.week=ca.sunday,ca.weeks=ca.sunday.range,ca.weeks.utc=ca.sunday.utc.range,ca.weekOfYear=ca.sundayOfYear;var da={"-":"",_:" ",0:"0"},va=/^\s*\d+/,ma=/^%/;su.locale=function(e){return{numberFormat:It(e),timeFormat:Wt(e)}};var ga=su.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});su.format=ga.numberFormat,su.geo={},hn.prototype={s:0,t:0,add:function(e){pn(e,this.t,ya),pn(ya.s,this.s,this),this.s?this.t+=ya.t:this.s=ya.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ya=new hn;su.geo.stream=function(e,t){e&&ba.hasOwnProperty(e.type)?ba[e.type](e,t):dn(e,t)};var ba={Feature:function(e,t){dn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)dn(n[r].geometry,t)}},wa={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){vn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vn(n[r],t,0)},Polygon:function(e,t){mn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)mn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)dn(n[r],t)}};su.geo.area=function(e){return Ea=0,su.geo.stream(e,xa),Ea};var Ea,Sa=new hn,xa={sphere:function(){Ea+=4*Hu},point:T,lineStart:T,lineEnd:T,polygonStart:function(){Sa.reset(),xa.lineStart=gn},polygonEnd:function(){var e=2*Sa;Ea+=0>e?4*Hu+e:e,xa.lineStart=xa.lineEnd=xa.point=T}};su.geo.bounds=function(){function e(e,t){b.push(w=[l=e,h=e]),c>t&&(c=t),t>p&&(p=t)}function t(t,n){var r=yn([t*Iu,n*Iu]);if(g){var i=wn(g,r),s=[i[1],-i[0],0],o=wn(s,i);xn(o),o=Tn(o);var a=t-d,f=a>0?1:-1,v=o[0]*qu*f,m=gu(a)>180;if(m^(v>f*d&&f*t>v)){var y=o[1]*qu;y>p&&(p=y)}else if(v=(v+360)%360-180,m^(v>f*d&&f*t>v)){var y=-o[1]*qu;c>y&&(c=y)}else c>n&&(c=n),n>p&&(p=n);m?d>t?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t):h>=l?(l>t&&(l=t),t>h&&(h=t)):t>d?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t)}else e(t,n);g=r,d=t}function n(){E.point=t}function r(){w[0]=l,w[1]=h,E.point=e,g=null}function i(e,n){if(g){var r=e-d;y+=gu(r)>180?r+(r>0?360:-360):r}else v=e,m=n;xa.point(e,n),t(e,n)}function s(){xa.lineStart()}function o(){i(v,m),xa.lineEnd(),gu(y)>Du&&(l=-(h=180)),w[0]=l,w[1]=h,g=null}function u(e,t){return(t-=e)<0?t+360:t}function a(e,t){return e[0]-t[0]}function f(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var l,c,h,p,d,v,m,g,y,b,w,E={point:e,lineStart:n,lineEnd:r,polygonStart:function(){E.point=i,E.lineStart=s,E.lineEnd=o,y=0,xa.polygonStart()},polygonEnd:function(){xa.polygonEnd(),E.point=e,E.lineStart=n,E.lineEnd=r,0>Sa?(l=-(h=180),c=-(p=90)):y>Du?p=90:-Du>y&&(c=-90),w[0]=l,w[1]=h}};return function(e){p=h=-(l=c=1/0),b=[],su.geo.stream(e,E);var t=b.length;if(t){b.sort(a);for(var n,r=1,i=b[0],s=[i];t>r;++r)n=b[r],f(n[0],i)||f(n[1],i)?(u(i[0],n[1])>u(i[0],i[1])&&(i[1]=n[1]),u(n[0],i[1])>u(i[0],i[1])&&(i[0]=n[0])):s.push(i=n);for(var o,n,d=-1/0,t=s.length-1,r=0,i=s[t];t>=r;i=n,++r)n=s[r],(o=u(i[1],n[0]))>d&&(d=o,l=n[0],h=i[1])}return b=w=null,l===1/0||c===1/0?[[NaN,NaN],[NaN,NaN]]:[[l,c],[h,p]]}}(),su.geo.centroid=function(e){Ta=Na=Ca=ka=La=Aa=Oa=Ma=_a=Da=Pa=0,su.geo.stream(e,Ha);var t=_a,n=Da,r=Pa,i=t*t+n*n+r*r;return Pu>i&&(t=Aa,n=Oa,r=Ma,Du>Na&&(t=Ca,n=ka,r=La),i=t*t+n*n+r*r,Pu>i)?[NaN,NaN]:[Math.atan2(n,t)*qu,it(r/Math.sqrt(i))*qu]};var Ta,Na,Ca,ka,La,Aa,Oa,Ma,_a,Da,Pa,Ha={sphere:T,point:Cn,lineStart:Ln,lineEnd:An,polygonStart:function(){Ha.lineStart=On},polygonEnd:function(){Ha.lineStart=Ln}},Ba=Bn(_n,qn,Un,[-Hu,-Hu/2]),ja=1e9;su.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=Vn(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(su.geo.conicEqualArea=function(){return $n(Jn)}).raw=Jn,su.geo.albers=function(){return su.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},su.geo.albersUsa=function(){function e(e){var s=e[0],o=e[1];return t=null,n(s,o),t||(r(s,o),t)||i(s,o),t}var t,n,r,i,s=su.geo.albers(),o=su.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=su.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-0.425&&-0.214>r?o:i>=.166&&.234>i&&r>=-0.214&&-0.115>r?u:s).invert(e)},e.stream=function(e){var t=s.stream(e),n=o.stream(e),r=u.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(s.precision(t),o.precision(t),u.precision(t),e):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),o.scale(.35*t),u.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(t){if(!arguments.length)return s.translate();var f=s.scale(),l=+t[0],c=+t[1];return n=s.translate(t).clipExtent([[l-.455*f,c-.238*f],[l+.455*f,c+.238*f]]).stream(a).point,r=o.translate([l-.307*f,c+.201*f]).clipExtent([[l-.425*f+Du,c+.12*f+Du],[l-.214*f-Du,c+.234*f-Du]]).stream(a).point,i=u.translate([l-.205*f,c+.212*f]).clipExtent([[l-.214*f+Du,c+.166*f+Du],[l-.115*f-Du,c+.234*f-Du]]).stream(a).point,e},e.scale(1070)};var Fa,Ia,qa,Ra,Ua,za,Wa={point:T,lineStart:T,lineEnd:T,polygonStart:function(){Ia=0,Wa.lineStart=Kn},polygonEnd:function(){Wa.lineStart=Wa.lineEnd=Wa.point=T,Fa+=gu(Ia/2)}},Xa={point:Qn,lineStart:T,lineEnd:T,polygonStart:T,polygonEnd:T},Va={point:Zn,lineStart:er,lineEnd:tr,polygonStart:function(){Va.lineStart=nr},polygonEnd:function(){Va.point=Zn,Va.lineStart=er,Va.lineEnd=tr}};su.geo.path=function(){function e(e){return e&&("function"==typeof u&&s.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=i(s)),su.geo.stream(e,o)),s.result()}function t(){return o=null,e}var n,r,i,s,o,u=4.5;return e.area=function(e){return Fa=0,su.geo.stream(e,i(Wa)),Fa},e.centroid=function(e){return Ca=ka=La=Aa=Oa=Ma=_a=Da=Pa=0,su.geo.stream(e,i(Va)),Pa?[_a/Pa,Da/Pa]:Ma?[Aa/Ma,Oa/Ma]:La?[Ca/La,ka/La]:[NaN,NaN]},e.bounds=function(e){return Ua=za=-(qa=Ra=1/0),su.geo.stream(e,i(Xa)),[[qa,Ra],[Ua,za]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||sr(e):E,t()):n},e.context=function(e){return arguments.length?(s=null==(r=e)?new Gn:new rr(e),"function"!=typeof u&&s.pointRadius(u),t()):r},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(s.pointRadius(+t),+t),e):u},e.projection(su.geo.albersUsa()).context(null)},su.geo.transform=function(e){return{stream:function(n){var r=new or(n);for(var i in e)r[i]=e[i];return r}}},or.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},su.geo.projection=ar,su.geo.projectionMutator=fr,(su.geo.equirectangular=function(){return ar(cr)}).raw=cr.invert=cr,su.geo.rotation=function(e){function t(t){return t=e(t[0]*Iu,t[1]*Iu),t[0]*=qu,t[1]*=qu,t}return e=pr(e[0]%360*Iu,e[1]*Iu,e.length>2?e[2]*Iu:0),t.invert=function(t){return t=e.invert(t[0]*Iu,t[1]*Iu),t[0]*=qu,t[1]*=qu,t},t},hr.invert=cr,su.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=pr(-e[0]*Iu,-e[1]*Iu,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=qu,e[1]*=qu}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=gr((t=+r)*Iu,i*Iu),e):t},e.precision=function(r){return arguments.length?(n=gr(t*Iu,(i=+r)*Iu),e):i},e.angle(90)},su.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Iu,i=e[1]*Iu,s=t[1]*Iu,o=Math.sin(r),u=Math.cos(r),a=Math.sin(i),f=Math.cos(i),l=Math.sin(s),c=Math.cos(s);return Math.atan2(Math.sqrt((n=c*o)*n+(n=f*l-a*c*u)*n),a*l+f*c*u)},su.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return su.range(Math.ceil(s/m)*m,i,m).map(h).concat(su.range(Math.ceil(f/g)*g,a,g).map(p)).concat(su.range(Math.ceil(r/d)*d,n,d).filter(function(e){return gu(e%m)>Du}).map(l)).concat(su.range(Math.ceil(u/v)*v,o,v).filter(function(e){return gu(e%g)>Du}).map(c))}var n,r,i,s,o,u,a,f,l,c,h,p,d=10,v=d,m=90,g=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(s).concat(p(a).slice(1),h(i).reverse().slice(1),p(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(s=+t[0][0],i=+t[1][0],f=+t[0][1],a=+t[1][1],s>i&&(t=s,s=i,i=t),f>a&&(t=f,f=a,a=t),e.precision(y)):[[s,f],[i,a]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],g=+t[1],e):[m,g]},e.minorStep=function(t){return arguments.length?(d=+t[0],v=+t[1],e):[d,v]},e.precision=function(t){return arguments.length?(y=+t,l=br(u,o,90),c=wr(r,n,y),h=br(f,a,90),p=wr(s,i,y),e):y},e.majorExtent([[-180,-90+Du],[180,90-Du]]).minorExtent([[-180,-80-Du],[180,80+Du]])},su.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=Er,i=Sr;return e.distance=function(){return su.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},su.geo.interpolate=function(e,t){return xr(e[0]*Iu,e[1]*Iu,t[0]*Iu,t[1]*Iu)},su.geo.length=function(e){return $a=0,su.geo.stream(e,Ja),$a};var $a,Ja={sphere:T,point:T,lineStart:Tr,lineEnd:T,polygonStart:T,polygonEnd:T},Ka=Nr(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(su.geo.azimuthalEqualArea=function(){return ar(Ka)}).raw=Ka;var Qa=Nr(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},E);(su.geo.azimuthalEquidistant=function(){return ar(Qa)}).raw=Qa,(su.geo.conicConformal=function(){return $n(Cr)}).raw=Cr,(su.geo.conicEquidistant=function(){return $n(kr)}).raw=kr;var Ga=Nr(function(e){return 1/e},Math.atan);(su.geo.gnomonic=function(){return ar(Ga)}).raw=Ga,Lr.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Fu]},(su.geo.mercator=function(){return Ar(Lr)}).raw=Lr;var Ya=Nr(function(){return 1},Math.asin);(su.geo.orthographic=function(){return ar(Ya)}).raw=Ya;var Za=Nr(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(su.geo.stereographic=function(){return ar(Za)}).raw=Za,Or.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Fu]},(su.geo.transverseMercator=function(){var e=Ar(Or),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Or,su.geom={},su.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=At(n),s=At(r),o=e.length,u=[],a=[];for(t=0;o>t;t++)u.push([+i.call(this,e[t],t),+s.call(this,e[t],t),t]);for(u.sort(Pr),t=0;o>t;t++)a.push([u[t][0],-u[t][1]]);var f=Dr(u),l=Dr(a),c=l[0]===f[0],h=l[l.length-1]===f[f.length-1],p=[];for(t=f.length-1;t>=0;--t)p.push(e[u[f[t]][2]]);for(t=+c;t<l.length-h;++t)p.push(e[u[l[t]][2]]);return p}var n=Mr,r=_r;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},su.geom.polygon=function(e){return Su(e,ef),e};var ef=su.geom.polygon.prototype=[];ef.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},ef.centroid=function(e){var t,n,r=-1,i=this.length,s=0,o=0,u=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=u,u=this[r],n=t[0]*u[1]-u[0]*t[1],s+=(t[0]+u[0])*n,o+=(t[1]+u[1])*n;return[s*e,o*e]},ef.clip=function(e){for(var t,n,r,i,s,o,u=jr(e),a=-1,f=this.length-jr(this),l=this[f-1];++a<f;){for(t=e.slice(),e.length=0,i=this[a],s=t[(r=t.length-u)-1],n=-1;++n<r;)o=t[n],Hr(o,l,i)?(Hr(s,l,i)||e.push(Br(s,o,l,i)),e.push(o)):Hr(s,l,i)&&e.push(Br(s,o,l,i)),s=o;u&&e.push(e[0]),l=i}return e};var tf,nf,rf,sf,of,uf=[],af=[];Xr.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort($r),t.length},ri.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ii.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ai(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(oi(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ui(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ui(this,n),e=n,n=e.U),n.C=!1,r.C=!0,oi(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,s=e.L,o=e.R;if(n=s?o?ai(o):s:o,i?i.L===e?i.L=n:i.R=n:this._=n,s&&o?(r=n.C,n.C=e.C,n.L=s,s.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void (e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,oi(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ui(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,oi(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ui(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,oi(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ui(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},su.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=u[0][0],i=u[0][1],s=u[1][0],o=u[1][1];return fi(n(e),u).cells.forEach(function(n,u){var a=n.edges,f=n.site,l=t[u]=a.length?a.map(function(e){var t=e.start();return[t.x,t.y]}):f.x>=r&&f.x<=s&&f.y>=i&&f.y<=o?[[r,o],[s,o],[s,i],[r,i]]:[];l.point=e[u]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(s(e,t)/Du)*Du,y:Math.round(o(e,t)/Du)*Du,i:t}})}var r=Mr,i=_r,s=r,o=i,u=ff;return e?t(e):(t.links=function(e){return fi(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return fi(n(e)).cells.forEach(function(n,r){for(var i,s,o=n.site,u=n.edges.sort($r),a=-1,f=u.length,l=u[f-1].edge,c=l.l===o?l.r:l.l;++a<f;)i=l,s=c,l=u[a].edge,c=l.l===o?l.r:l.l,r<s.i&&r<c.i&&ci(o,s,c)<0&&t.push([e[r],e[s.i],e[c.i]])}),t},t.x=function(e){return arguments.length?(s=At(r=e),t):r},t.y=function(e){return arguments.length?(o=At(i=e),t):i},t.clipExtent=function(e){return arguments.length?(u=null==e?ff:e,t):u===ff?null:u},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):u===ff?null:u&&u[1]},t)};var ff=[[-1e6,-1e6],[1e6,1e6]];su.geom.delaunay=function(e){return su.geom.voronoi().triangles(e)},su.geom.quadtree=function(e,t,n,r,i){function s(e){function s(e,t,n,r,i,s,o,u){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var a=e.x,l=e.y;if(null!=a)if(gu(a-n)+gu(l-r)<.01)f(e,t,n,r,i,s,o,u);else{var c=e.point;e.x=e.y=e.point=null,f(e,c,a,l,i,s,o,u),f(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else f(e,t,n,r,i,s,o,u)}function f(e,t,n,r,i,o,u,a){var f=.5*(i+u),l=.5*(o+a),c=n>=f,h=r>=l,p=h<<1|c;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=di()),c?i=f:u=f,h?o=l:a=l,s(e,t,n,r,i,o,u,a)}var l,c,h,p,d,v,m,g,y,b=At(u),w=At(a);if(null!=t)v=t,m=n,g=r,y=i;else if(g=y=-(v=m=1/0),c=[],h=[],d=e.length,o)for(p=0;d>p;++p)l=e[p],l.x<v&&(v=l.x),l.y<m&&(m=l.y),l.x>g&&(g=l.x),l.y>y&&(y=l.y),c.push(l.x),h.push(l.y);else for(p=0;d>p;++p){var E=+b(l=e[p],p),S=+w(l,p);v>E&&(v=E),m>S&&(m=S),E>g&&(g=E),S>y&&(y=S),c.push(E),h.push(S)}var x=g-v,T=y-m;x>T?y=m+x:g=v+T;var N=di();if(N.add=function(e){s(N,e,+b(e,++p),+w(e,p),v,m,g,y)},N.visit=function(e){vi(e,N,v,m,g,y)},N.find=function(e){return mi(N,e[0],e[1],v,m,g,y)},p=-1,null==t){for(;++p<d;)s(N,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(N.add);return c=h=e=l=null,N}var o,u=Mr,a=_r;return(o=arguments.length)?(u=hi,a=pi,3===o&&(i=n,r=t,n=t=0),s(e)):(s.x=function(e){return arguments.length?(u=e,s):u},s.y=function(e){return arguments.length?(a=e,s):a},s.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),s):null==t?null:[[t,n],[r,i]]},s.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),s):null==t?null:[r-t,i-n]},s)},su.interpolateRgb=gi,su.interpolateObject=yi,su.interpolateNumber=bi,su.interpolateString=wi;var lf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cf=new RegExp(lf.source,"g");su.interpolate=Ei,su.interpolators=[function(e,t){var n=typeof t;return("string"===n?ta.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?gi:wi:t instanceof ft?gi:Array.isArray(t)?Si:"object"===n&&isNaN(t)?yi:bi)(e,t)}],su.interpolateArray=Si;var hf=function(){return E},pf=su.map({linear:hf,poly:Ai,quad:function(){return Ci},cubic:function(){return ki},sin:function(){return Oi},exp:function(){return Mi},circle:function(){return _i},elastic:Di,back:Pi,bounce:function(){return Hi}}),df=su.map({"in":E,out:Ti,"in-out":Ni,"out-in":function(e){return Ni(Ti(e))}});su.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=pf.get(n)||hf,r=df.get(r)||E,xi(r(n.apply(null,ou.call(arguments,1))))},su.interpolateHcl=Bi,su.interpolateHsl=ji,su.interpolateLab=Fi,su.interpolateRound=Ii,su.transform=function(e){var t=au.createElementNS(su.ns.prefix.svg,"g");return(su.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new qi(n?n.matrix:vf)})(e)},qi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var vf={a:1,b:0,c:0,d:1,e:0,f:0};su.interpolateTransform=Wi,su.layout={},su.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push($i(e[n]));return t}},su.layout.chord=function(){function e(){var e,f,c,h,p,d={},v=[],m=su.range(s),g=[];for(n=[],r=[],e=0,h=-1;++h<s;){for(f=0,p=-1;++p<s;)f+=i[h][p];v.push(f),g.push(su.range(s)),e+=f}for(o&&m.sort(function(e,t){return o(v[e],v[t])}),u&&g.forEach(function(e,t){e.sort(function(e,n){return u(i[t][e],i[t][n])})}),e=(Bu-l*s)/e,f=0,h=-1;++h<s;){for(c=f,p=-1;++p<s;){var y=m[h],b=g[y][p],w=i[y][b],E=f,S=f+=w*e;d[y+"-"+b]={index:y,subindex:b,startAngle:E,endAngle:S,value:w}}r[y]={index:y,startAngle:c,endAngle:f,value:(f-c)/e},f+=l}for(h=-1;++h<s;)for(p=h-1;++p<s;){var x=d[h+"-"+p],T=d[p+"-"+h];(x.value||T.value)&&n.push(x.value<T.value?{source:T,target:x}:{source:x,target:T})}a&&t()}function t(){n.sort(function(e,t){return a((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,s,o,u,a,f={},l=0;return f.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,f):i},f.padding=function(e){return arguments.length?(l=e,n=r=null,f):l},f.sortGroups=function(e){return arguments.length?(o=e,n=r=null,f):o},f.sortSubgroups=function(e){return arguments.length?(u=e,n=null,f):u},f.sortChords=function(e){return arguments.length?(a=e,n&&t(),f):a},f.chords=function(){return n||e(),n},f.groups=function(){return r||e(),r},f},su.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=i-n,a=s*s+o*o;if(a>u*u/m){if(d>a){var f=t.charge/a;e.px-=s*f,e.py-=o*f}return!0}if(t.point&&a&&d>a){var f=t.pointCharge/a;e.px-=s*f,e.py-=o*f}}return!t.charge}}function t(e){e.px=su.event.x,e.py=su.event.y,u.resume()}var n,r,i,s,o,u={},a=su.dispatch("start","tick","end"),f=[1,1],l=.9,c=mf,h=gf,p=-30,d=yf,v=.1,m=.64,g=[],y=[];return u.tick=function(){if((r*=.99)<.005)return a.end({type:"end",alpha:r=0}),!0;var t,n,u,c,h,d,m,b,w,E=g.length,S=y.length;for(n=0;S>n;++n)u=y[n],c=u.source,h=u.target,b=h.x-c.x,w=h.y-c.y,(d=b*b+w*w)&&(d=r*s[n]*((d=Math.sqrt(d))-i[n])/d,b*=d,w*=d,h.x-=b*(m=c.weight/(h.weight+c.weight)),h.y-=w*m,c.x+=b*(m=1-m),c.y+=w*m);if((m=r*v)&&(b=f[0]/2,w=f[1]/2,n=-1,m))for(;++n<E;)u=g[n],u.x+=(b-u.x)*m,u.y+=(w-u.y)*m;if(p)for(es(t=su.geom.quadtree(g),r,o),n=-1;++n<E;)(u=g[n]).fixed||t.visit(e(u));for(n=-1;++n<E;)u=g[n],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*l,u.y-=(u.py-(u.py=u.y))*l);a.tick({type:"tick",alpha:r})},u.nodes=function(e){return arguments.length?(g=e,u):g},u.links=function(e){return arguments.length?(y=e,u):y},u.size=function(e){return arguments.length?(f=e,u):f},u.linkDistance=function(e){return arguments.length?(c="function"==typeof e?e:+e,u):c},u.distance=u.linkDistance,u.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,u):h},u.friction=function(e){return arguments.length?(l=+e,u):l},u.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,u):p},u.chargeDistance=function(e){return arguments.length?(d=e*e,u):Math.sqrt(d)},u.gravity=function(e){return arguments.length?(v=+e,u):v},u.theta=function(e){return arguments.length?(m=e*e,u):Math.sqrt(m)},u.alpha=function(e){return arguments.length?(e=+e,r?r=e>0?e:0:e>0&&(a.start({type:"start",alpha:r=e}),su.timer(u.tick)),u):r},u.start=function(){function e(e,r){if(!n){for(n=new Array(a),u=0;a>u;++u)n[u]=[];for(u=0;l>u;++u){var i=y[u];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var s,o=n[t],u=-1,f=o.length;++u<f;)if(!isNaN(s=o[u][e]))return s;return Math.random()*r}var t,n,r,a=g.length,l=y.length,d=f[0],v=f[1];for(t=0;a>t;++t)(r=g[t]).index=t,r.weight=0;for(t=0;l>t;++t)r=y[t],"number"==typeof r.source&&(r.source=g[r.source]),"number"==typeof r.target&&(r.target=g[r.target]),++r.source.weight,++r.target.weight;for(t=0;a>t;++t)r=g[t],isNaN(r.x)&&(r.x=e("x",d)),isNaN(r.y)&&(r.y=e("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof c)for(t=0;l>t;++t)i[t]=+c.call(this,y[t],t);else for(t=0;l>t;++t)i[t]=c;if(s=[],"function"==typeof h)for(t=0;l>t;++t)s[t]=+h.call(this,y[t],t);else for(t=0;l>t;++t)s[t]=h;if(o=[],"function"==typeof p)for(t=0;a>t;++t)o[t]=+p.call(this,g[t],t);else for(t=0;a>t;++t)o[t]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return n||(n=su.behavior.drag().origin(E).on("dragstart.force",Qi).on("drag.force",t).on("dragend.force",Gi)),arguments.length?void this.on("mouseover.force",Yi).on("mouseout.force",Zi).call(n):n},su.rebind(u,a,"on")};var mf=20,gf=1,yf=1/0;su.layout.hierarchy=function(){function e(i){var s,o=[i],u=[];for(i.depth=0;null!=(s=o.pop());)if(u.push(s),(f=n.call(e,s,s.depth))&&(a=f.length)){for(var a,f,l;--a>=0;)o.push(l=f[a]),l.parent=s,l.depth=s.depth+1;r&&(s.value=0),s.children=f}else r&&(s.value=+r.call(e,s,s.depth)||0),delete s.children;return rs(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),u}var t=os,n=is,r=ss;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(ns(t,function(e){e.children&&(e.value=0)}),rs(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},su.layout.partition=function(){function e(t,n,r,i){var s=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,s&&(o=s.length)){var o,u,a,f=-1;for(r=t.value?r/t.value:0;++f<o;)e(u=s[f],n,a=u.value*r,i),n+=a}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,s=-1;++s<i;)r=Math.max(r,t(n[s]));return 1+r}function n(n,s){var o=r.call(this,n,s);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=su.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},ts(n,r)},su.layout.pie=function(){function e(o){var u,a=o.length,f=o.map(function(n,r){return+t.call(e,n,r)}),l=+("function"==typeof r?r.apply(this,arguments):r),c=("function"==typeof i?i.apply(this,arguments):i)-l,h=Math.min(Math.abs(c)/a,+("function"==typeof s?s.apply(this,arguments):s)),p=h*(0>c?-1:1),d=(c-a*p)/su.sum(f),v=su.range(a),m=[];return null!=n&&v.sort(n===bf?function(e,t){return f[t]-f[e]}:function(e,t){return n(o[e],o[t])}),v.forEach(function(e){m[e]={data:o[e],value:u=f[e],startAngle:l,endAngle:l+=u*d+p,padAngle:h}}),m}var t=Number,n=bf,r=0,i=Bu,s=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(s=t,e):s},e};var bf={};su.layout.stack=function(){function e(u,a){if(!(h=u.length))return u;var f=u.map(function(n,r){return t.call(e,n,r)}),l=f.map(function(t){return t.map(function(t,n){return[s.call(e,t,n),o.call(e,t,n)]})}),c=n.call(e,l,a);f=su.permute(f,c),l=su.permute(l,c);var h,p,d,v,m=r.call(e,l,a),g=f[0].length;for(d=0;g>d;++d)for(i.call(e,f[0][d],v=m[d],l[0][d][1]),p=1;h>p;++p)i.call(e,f[p][d],v+=l[p-1][d][1],l[p][d][1]);return u}var t=E,n=cs,r=hs,i=ls,s=as,o=fs;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:wf.get(t)||cs,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:Ef.get(t)||hs,e):r},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var wf=su.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(ps),s=e.map(ds),o=su.range(r).sort(function(e,t){return i[e]-i[t]}),u=0,a=0,f=[],l=[];for(t=0;r>t;++t)n=o[t],a>u?(u+=s[n],f.push(n)):(a+=s[n],l.push(n));return l.reverse().concat(f)},reverse:function(e){return su.range(e.length).reverse()},"default":cs}),Ef=su.map({silhouette:function(e){var t,n,r,i=e.length,s=e[0].length,o=[],u=0,a=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>u&&(u=r),o.push(r)}for(n=0;s>n;++n)a[n]=(u-o[n])/2;return a},wiggle:function(e){var t,n,r,i,s,o,u,a,f,l=e.length,c=e[0],h=c.length,p=[];for(p[0]=a=f=0,n=1;h>n;++n){for(t=0,i=0;l>t;++t)i+=e[t][n][1];for(t=0,s=0,u=c[n][0]-c[n-1][0];l>t;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*u);t>r;++r)o+=(e[r][n][1]-e[r][n-1][1])/u;s+=o*e[t][n][1]}p[n]=a-=i?s/i*u:0,f>a&&(f=a)}for(n=0;h>n;++n)p[n]-=f;return p},expand:function(e){var t,n,r,i=e.length,s=e[0].length,o=1/i,u=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=o}for(n=0;s>n;++n)u[n]=0;return u},zero:hs});su.layout.histogram=function(){function e(e,s){for(var o,u,a=[],f=e.map(n,this),l=r.call(this,f,s),c=i.call(this,l,f,s),s=-1,h=f.length,p=c.length-1,d=t?1:1/h;++s<p;)o=a[s]=[],o.dx=c[s+1]-(o.x=c[s]),o.y=0;if(p>0)for(s=-1;++s<h;)u=f[s],u>=l[0]&&u<=l[1]&&(o=a[su.bisect(c,u,1,p)-1],o.y+=d,o.push(e[s]));return a}var t=!0,n=Number,r=ys,i=ms;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=At(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return gs(e,t)}:At(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},su.layout.pack=function(){function e(e,s){var o=n.call(this,e,s),u=o[0],a=i[0],f=i[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(u.x=u.y=0,rs(u,function(e){e.r=+l(e.value)}),rs(u,xs),r){var c=r*(t?1:Math.max(2*u.r/a,2*u.r/f))/2;rs(u,function(e){e.r+=c}),rs(u,xs),rs(u,function(e){e.r-=c})}return Cs(u,a/2,f/2,t?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t,n=su.layout.hierarchy().sort(bs),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},ts(e,n)},su.layout.tree=function(){function e(e,i){var l=o.call(this,e,i),c=l[0],h=t(c);if(rs(h,n),h.parent.m=-h.z,ns(h,r),f)ns(c,s);else{var p=c,d=c,v=c;ns(c,function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>v.depth&&(v=e)});var m=u(p,d)/2-p.x,g=a[0]/(d.x+u(d,p)/2+m),y=a[1]/(v.depth||1);ns(c,function(e){e.x=(e.x+m)*g,e.y=e.depth*y})}return l}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,s=t.children,o=0,u=s.length;u>o;++o)r.push((s[o]=i={_:s[o],parent:t,children:(i=s[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){_s(e);var s=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+u(e._,r._),e.m=e.z-s):e.z=s}else r&&(e.z=r.z+u(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,s=e,o=t,a=i.parent.children[0],f=i.m,l=s.m,c=o.m,h=a.m;o=Os(o),i=As(i),o&&i;)a=As(a),s=Os(s),s.a=e,r=o.z+c-i.z-f+u(o._,i._),r>0&&(Ms(Ds(o,e,n),e,r),f+=r,l+=r),c+=o.m,f+=i.m,h+=a.m,l+=s.m;o&&!Os(s)&&(s.t=o,s.m+=c-l),i&&!As(a)&&(a.t=i,a.m+=f-h,n=e)}return n}function s(e){e.x*=a[0],e.y=e.depth*a[1]}var o=su.layout.hierarchy().sort(null).value(null),u=Ls,a=[1,1],f=null;return e.separation=function(t){return arguments.length?(u=t,e):u},e.size=function(t){return arguments.length?(f=null==(a=t)?s:null,e):f?null:a},e.nodeSize=function(t){return arguments.length?(f=null==(a=t)?null:s,e):f?a:null},ts(e,o)},su.layout.cluster=function(){function e(e,s){var o,u=t.call(this,e,s),a=u[0],f=0;rs(a,function(e){var t=e.children;t&&t.length?(e.x=Hs(t),e.y=Ps(t)):(e.x=o?f+=n(e,o):0,e.y=0,o=e)});var l=Bs(a),c=js(a),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return rs(a,i?function(e){e.x=(e.x-a.x)*r[0],e.y=(a.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(a.y?e.y/a.y:1))*r[1]}),u}var t=su.layout.hierarchy().sort(null).value(null),n=Ls,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},ts(e,t)},su.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,s=e.length;++i<s;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var s=n.children;if(s&&s.length){var o,u,a,f=c(n),l=[],h=s.slice(),d=1/0,v="slice"===p?f.dx:"dice"===p?f.dy:"slice-dice"===p?1&n.depth?f.dy:f.dx:Math.min(f.dx,f.dy);for(e(h,f.dx*f.dy/n.value),l.area=0;(a=h.length)>0;)l.push(o=h[a-1]),l.area+=o.area,"squarify"!==p||(u=r(l,v))<=d?(h.pop(),d=u):(l.area-=l.pop().area,i(l,v,f,!1),v=Math.min(f.dx,f.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,v,f,!0),l.length=l.area=0),s.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var s,o=c(t),u=r.slice(),a=[];for(e(u,o.dx*o.dy/t.value),a.area=0;s=u.pop();)a.push(s),a.area+=s.area,null!=s.z&&(i(a,s.z?o.dx:o.dy,o,!u.length),a.length=a.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,s=1/0,o=-1,u=e.length;++o<u;)(n=e[o].area)&&(s>n&&(s=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*d/r,r/(t*s*d)):1/0}function i(e,t,n,r){var i,s=-1,o=e.length,u=n.x,f=n.y,l=t?a(e.area/t):0;if(t==n.dx){for((r||l>n.dy)&&(l=n.dy);++s<o;)i=e[s],i.x=u,i.y=f,i.dy=l,u+=i.dx=Math.min(n.x+n.dx-u,l?a(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++s<o;)i=e[s],i.x=u,i.y=f,i.dx=l,f+=i.dy=Math.min(n.y+n.dy-f,l?a(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-f,n.x+=l,n.dx-=l}}function s(r){var i=o||u(r),s=i[0];return s.x=0,s.y=0,s.dx=f[0],s.dy=f[1],o&&u.revalue(s),e([s],s.dx*s.dy/s.value),(o?n:t)(s),h&&(o=i),i}var o,u=su.layout.hierarchy(),a=Math.round,f=[1,1],l=null,c=Fs,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return s.size=function(e){return arguments.length?(f=e,s):f},s.padding=function(e){function t(t){var n=e.call(s,t,t.depth);return null==n?Fs(t):Is(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Is(t,e)}if(!arguments.length)return l;var r;return c=null==(l=e)?Fs:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,s},s.round=function(e){return arguments.length?(a=e?Math.round:Number,s):a!=Number},s.sticky=function(e){return arguments.length?(h=e,o=null,s):h},s.ratio=function(e){return arguments.length?(d=e,s):d},s.mode=function(e){return arguments.length?(p=e+"",s):p},ts(s,u)},su.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=su.random.normal.apply(su,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=su.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var n=0,r=0;e>r;r++)n+=Math.random();return n}}},su.scale={};var Sf={floor:E,ceil:E};su.scale.linear=function(){return Vs([0,1],[0,1],Ei,!1)};var xf={s:1,g:1,p:1,r:1,e:1};su.scale.log=function(){return eo(su.scale.linear().domain([0,1]),10,!0,[1,10])};var Tf=su.format(".0e"),Nf={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};su.scale.pow=function(){return to(su.scale.linear(),1,[0,1])},su.scale.sqrt=function(){return su.scale.pow().exponent(.5)},su.scale.ordinal=function(){return ro([],{t:"range",a:[[]]})},su.scale.category10=function(){return su.scale.ordinal().range(Cf)},su.scale.category20=function(){return su.scale.ordinal().range(kf)},su.scale.category20b=function(){return su.scale.ordinal().range(Lf)},su.scale.category20c=function(){return su.scale.ordinal().range(Af)};var Cf=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(St),kf=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(St),Lf=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(St),Af=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(St);su.scale.quantile=function(){return io([],[])},su.scale.quantize=function(){return so(0,1,[0,1])},su.scale.threshold=function(){return oo([.5],[0,1])},su.scale.identity=function(){return uo([0,1])},su.svg={},su.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),f=Math.max(0,+r.apply(this,arguments)),l=o.apply(this,arguments)-Fu,c=u.apply(this,arguments)-Fu,h=Math.abs(c-l),p=l>c?0:1;if(e>f&&(d=f,f=e,e=d),h>=ju)return t(f,p)+(e?t(e,1-p):"")+"Z";var d,v,m,g,y,b,w,E,S,x,T,N,C=0,k=0,L=[];if((g=(+a.apply(this,arguments)||0)/2)&&(m=s===Of?Math.sqrt(e*e+f*f):+s.apply(this,arguments),p||(k*=-1),f&&(k=it(m/f*Math.sin(g))),e&&(C=it(m/e*Math.sin(g)))),f){y=f*Math.cos(l+k),b=f*Math.sin(l+k),w=f*Math.cos(c-k),E=f*Math.sin(c-k);var A=Math.abs(c-l-2*k)<=Hu?0:1;if(k&&vo(y,b,w,E)===p^A){var O=(l+c)/2;y=f*Math.cos(O),b=f*Math.sin(O),w=E=null}}else y=b=0;if(e){S=e*Math.cos(c-C),x=e*Math.sin(c-C),T=e*Math.cos(l+C),N=e*Math.sin(l+C);var M=Math.abs(l-c+2*C)<=Hu?0:1;if(C&&vo(S,x,T,N)===1-p^M){var _=(l+c)/2;S=e*Math.cos(_),x=e*Math.sin(_),T=N=null}}else S=x=0;if((d=Math.min(Math.abs(f-e)/2,+i.apply(this,arguments)))>.001){v=f>e^p?0:1;var D=null==T?[S,x]:null==w?[y,b]:Br([y,b],[T,N],[w,E],[S,x]),P=y-D[0],H=b-D[1],B=w-D[0],j=E-D[1],F=1/Math.sin(Math.acos((P*B+H*j)/(Math.sqrt(P*P+H*H)*Math.sqrt(B*B+j*j)))/2),I=Math.sqrt(D[0]*D[0]+D[1]*D[1]);if(null!=w){var q=Math.min(d,(f-I)/(F+1)),R=mo(null==T?[S,x]:[T,N],[y,b],f,q,p),U=mo([w,E],[S,x],f,q,p);d===q?L.push("M",R[0],"A",q,",",q," 0 0,",v," ",R[1],"A",f,",",f," 0 ",1-p^vo(R[1][0],R[1][1],U[1][0],U[1][1]),",",p," ",U[1],"A",q,",",q," 0 0,",v," ",U[0]):L.push("M",R[0],"A",q,",",q," 0 1,",v," ",U[0])}else L.push("M",y,",",b);if(null!=T){var z=Math.min(d,(e-I)/(F-1)),W=mo([y,b],[T,N],e,-z,p),X=mo([S,x],null==w?[y,b]:[w,E],e,-z,p);d===z?L.push("L",X[0],"A",z,",",z," 0 0,",v," ",X[1],"A",e,",",e," 0 ",p^vo(X[1][0],X[1][1],W[1][0],W[1][1]),",",1-p," ",W[1],"A",z,",",z," 0 0,",v," ",W[0]):L.push("L",X[0],"A",z,",",z," 0 0,",v," ",W[0])}else L.push("L",S,",",x)}else L.push("M",y,",",b),null!=w&&L.push("A",f,",",f," 0 ",A,",",p," ",w,",",E),L.push("L",S,",",x),null!=T&&L.push("A",e,",",e," 0 ",M,",",1-p," ",T,",",N);return L.push("Z"),L.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+ -e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=fo,r=lo,i=ao,s=Of,o=co,u=ho,a=po;return e.innerRadius=function(t){return arguments.length?(n=At(t),e):n},e.outerRadius=function(t){return arguments.length?(r=At(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=At(t),e):i},e.padRadius=function(t){return arguments.length?(s=t==Of?Of:At(t),e):s},e.startAngle=function(t){return arguments.length?(o=At(t),e):o},e.endAngle=function(t){return arguments.length?(u=At(t),e):u},e.padAngle=function(t){return arguments.length?(a=At(t),e):a},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-Fu;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Of="auto";su.svg.line=function(){return go(E)};var Mf=su.map({linear:yo,"linear-closed":bo,step:wo,"step-before":Eo,"step-after":So,basis:Lo,"basis-open":Ao,"basis-closed":Oo,bundle:Mo,cardinal:No,"cardinal-open":xo,"cardinal-closed":To,monotone:jo});Mf.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var _f=[0,2/3,1/3,0],Df=[0,1/3,2/3,0],Pf=[0,1/6,2/3,1/6];su.svg.line.radial=function(){var e=go(Fo);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Eo.reverse=So,So.reverse=Eo,su.svg.area=function(){return Io(E)},su.svg.area.radial=function(){var e=Io(Fo);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},su.svg.chord=function(){function e(e,u){var a=t(this,s,e,u),f=t(this,o,e,u);return"M"+a.p0+r(a.r,a.p1,a.a1-a.a0)+(n(a,f)?i(a.r,a.p1,a.r,a.p0):i(a.r,a.p1,f.r,f.p0)+r(f.r,f.p1,f.a1-f.a0)+i(f.r,f.p1,a.r,a.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),s=u.call(e,i,r),o=a.call(e,i,r)-Fu,l=f.call(e,i,r)-Fu;return{r:s,a0:o,a1:l,p0:[s*Math.cos(o),s*Math.sin(o)],p1:[s*Math.cos(l),s*Math.sin(l)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Hu)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var s=Er,o=Sr,u=qo,a=co,f=ho;return e.radius=function(t){return arguments.length?(u=At(t),e):u},e.source=function(t){return arguments.length?(s=At(t),e):s},e.target=function(t){return arguments.length?(o=At(t),e):o},e.startAngle=function(t){return arguments.length?(a=At(t),e):a},e.endAngle=function(t){return arguments.length?(f=At(t),e):f},e},su.svg.diagonal=function(){function e(e,i){var s=t.call(this,e,i),o=n.call(this,e,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(r),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var t=Er,n=Sr,r=Ro;return e.source=function(n){return arguments.length?(t=At(n),e):t},e.target=function(t){return arguments.length?(n=At(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},su.svg.diagonal.radial=function(){var e=su.svg.diagonal(),t=Ro,n=e.projection;return e.projection=function(e){return arguments.length?n(Uo(t=e)):t},e},su.svg.symbol=function(){function e(e,r){return(Hf.get(t.call(this,e,r))||Xo)(n.call(this,e,r))}var t=Wo,n=zo;return e.type=function(n){return arguments.length?(t=At(n),e):t},e.size=function(t){return arguments.length?(n=At(t),e):n},e};var Hf=su.map({circle:Xo,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*jf)),n=t*jf;return"M0,"+ -t+"L"+n+",0 0,"+t+" "+ -n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Bf),n=t*Bf/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Bf),n=t*Bf/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});su.svg.symbolTypes=Hf.keys();var Bf=Math.sqrt(3),jf=Math.tan(30*Iu);Cu.transition=function(e){for(var t,n,r=Ff||++Uf,i=Qo(e),s=[],o=If||{time:Date.now(),ease:Li,delay:0,duration:250},u=-1,a=this.length;++u<a;){s.push(t=[]);for(var f=this[u],l=-1,c=f.length;++l<c;)(n=f[l])&&Go(n,l,i,r,o),t.push(n)}return $o(s,i,r)},Cu.interrupt=function(e){return this.each(null==e?qf:Vo(Qo(e)))};var Ff,If,qf=Vo(Qo()),Rf=[],Uf=0;Rf.call=Cu.call,Rf.empty=Cu.empty,Rf.node=Cu.node,Rf.size=Cu.size,su.transition=function(e,t){return e&&e.transition?Ff?e.transition(t):e:su.selection().transition(e)},su.transition.prototype=Rf,Rf.select=function(e){var t,n,r,i=this.id,s=this.namespace,o=[];e=M(e);for(var u=-1,a=this.length;++u<a;){o.push(t=[]);for(var f=this[u],l=-1,c=f.length;++l<c;)(r=f[l])&&(n=e.call(r,r.__data__,l,u))?("__data__"in r&&(n.__data__=r.__data__),Go(n,l,s,i,r[s][i]),t.push(n)):t.push(null)}return $o(o,s,i)},Rf.selectAll=function(e){var t,n,r,i,s,o=this.id,u=this.namespace,a=[];e=_(e);for(var f=-1,l=this.length;++f<l;)for(var c=this[f],h=-1,p=c.length;++h<p;)if(r=c[h]){s=r[u][o],n=e.call(r,r.__data__,h,f),a.push(t=[]);for(var d=-1,v=n.length;++d<v;)(i=n[d])&&Go(i,d,u,o,s),t.push(i)}return $o(a,u,o)},Rf.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=W(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]);for(var n=this[s],u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return $o(i,this.namespace,this.id)},Rf.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):V(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Rf.attr=function(e,t){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(u);return n!==e&&(t=o(n,e),function(e){this.setAttribute(u,t(e))})})}function s(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(u.space,u.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(u.space,u.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Wi:Ei,u=su.ns.qualify(e);return Jo(this,"attr."+e,t,u.local?s:i)},Rf.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=su.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Rf.style=function(e,t,n){function r(){this.style.removeProperty(e)}function s(t){return null==t?r:(t+="",function(){var r,s=i(this).getComputedStyle(this,null).getPropertyValue(e);return s!==t&&(r=Ei(s,t),function(t){this.style.setProperty(e,r(t),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof e){2>o&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Jo(this,"style."+e,t,s)},Rf.styleTween=function(e,t,n){function r(r,s){var o=t.call(this,r,s,i(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Rf.text=function(e){return Jo(this,"text",e,Ko)},Rf.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var n;this[e].count<2&&(n=this.parentNode)&&n.removeChild(this)})},Rf.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=su.ease.apply(su,arguments)),V(this,function(r){r[n][t].ease=e}))},Rf.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:V(this,"function"==typeof e?function(r,i,s){r[n][t].delay=+e.call(r,r.__data__,i,s)}:(e=+e,function(r){r[n][t].delay=e}))},Rf.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:V(this,"function"==typeof e?function(r,i,s){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,s))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Rf.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=If,s=Ff;try{Ff=n,V(this,function(t,i,s){If=t[r][n],e.call(t,t.__data__,i,s)})}finally{If=i,Ff=s}}else V(this,function(i){var s=i[r][n];(s.event||(s.event=su.dispatch("start","end","interrupt"))).on(e,t)});return this},Rf.transition=function(){for(var e,t,n,r,i=this.id,s=++Uf,o=this.namespace,u=[],a=0,f=this.length;f>a;a++){u.push(e=[]);for(var t=this[a],l=0,c=t.length;c>l;l++)(n=t[l])&&(r=n[o][i],Go(n,l,o,s,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return $o(u,o,s)},su.svg.axis=function(){function e(e){e.each(function(){var e,f=su.select(this),l=this.__chart__||n,c=this.__chart__=n.copy(),h=null==a?c.ticks?c.ticks.apply(c,u):c.domain():a,p=null==t?c.tickFormat?c.tickFormat.apply(c,u):E:t,d=f.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Du),m=su.transition(d.exit()).style("opacity",Du).remove(),g=su.transition(d.order()).style("opacity",1),y=Math.max(i,0)+o,b=Rs(c),w=f.selectAll(".domain").data([0]),S=(w.enter().append("path").attr("class","domain"),su.transition(w));v.append("line"),v.append("text");var x,T,N,C,k=v.select("line"),L=g.select("line"),A=d.select("text").text(p),O=v.select("text"),M=g.select("text"),_="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=Yo,x="x",N="y",T="x2",C="y2",A.attr("dy",0>_?"0em":".71em").style("text-anchor","middle"),S.attr("d","M"+b[0]+","+_*s+"V0H"+b[1]+"V"+_*s)):(e=Zo,x="y",N="x",T="y2",C="x2",A.attr("dy",".32em").style("text-anchor",0>_?"end":"start"),S.attr("d","M"+_*s+","+b[0]+"H0V"+b[1]+"H"+_*s)),k.attr(C,_*i),O.attr(N,_*y),L.attr(T,0).attr(C,_*i),M.attr(x,0).attr(N,_*y),c.rangeBand){var D=c,P=D.rangeBand()/2;l=c=function(e){return D(e)+P}}else l.rangeBand?l=c:m.call(e,c,l);v.call(e,l,c),g.call(e,c,c)})}var t,n=su.scale.linear(),r=zf,i=6,s=6,o=3,u=[10],a=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Wf?t+"":zf,e):r},e.ticks=function(){return arguments.length?(u=arguments,e):u},e.tickValues=function(t){return arguments.length?(a=t,e):a},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,s=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(s=+t,e):s},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var zf="bottom",Wf={top:1,right:1,bottom:1,left:1};su.svg.brush=function(){function e(i){i.each(function(){var i=su.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",s).on("touchstart.brush",s),o=i.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=i.selectAll(".resize").data(v,E);u.exit().remove(),u.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Xf[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",e.empty()?"none":null);var a,c=su.transition(i),h=su.transition(o);f&&(a=Rs(f),h.attr("x",a[0]).attr("width",a[1]-a[0]),n(c)),l&&(a=Rs(l),h.attr("y",a[0]).attr("height",a[1]-a[0]),r(c)),t(c)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+c[+/e$/.test(e)]+","+h[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",c[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function r(e){e.select(".extent").attr("y",h[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function s(){function s(){32==su.event.keyCode&&(A||(b=null,M[0]-=c[1],M[1]-=h[1],A=2),k())}function v(){32==su.event.keyCode&&2==A&&(M[0]+=c[1],M[1]+=h[1],A=0,k())}function m(){var e=su.mouse(E),i=!1;w&&(e[0]+=w[0],e[1]+=w[1]),A||(su.event.altKey?(b||(b=[(c[0]+c[1])/2,(h[0]+h[1])/2]),M[0]=c[+(e[0]<b[0])],M[1]=h[+(e[1]<b[1])]):b=null),C&&g(e,f,0)&&(n(T),i=!0),L&&g(e,l,1)&&(r(T),i=!0),i&&(t(T),x({type:"brush",mode:A?"move":"resize"}))}function g(e,t,n){var r,i,s=Rs(t),a=s[0],f=s[1],l=M[n],v=n?h:c,m=v[1]-v[0];return A&&(a-=l,f-=m+l),r=(n?d:p)?Math.max(a,Math.min(f,e[n])):e[n],A?i=(r+=l)+m:(b&&(l=Math.max(a,Math.min(f,2*b[n]-r))),r>l?(i=r,r=l):i=l),v[0]!=r||v[1]!=i?(n?u=null:o=null,v[0]=r,v[1]=i,!0):void 0}function y(){m(),T.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),su.select("body").style("cursor",null),_.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),O(),x({type:"brushend"})}var b,w,E=this,S=su.select(su.event.target),x=a.of(E,arguments),T=su.select(E),N=S.datum(),C=!/^(n|s)$/.test(N)&&f,L=!/^(e|w)$/.test(N)&&l,A=S.classed("extent"),O=Y(E),M=su.mouse(E),_=su.select(i(E)).on("keydown.brush",s).on("keyup.brush",v);if(su.event.changedTouches?_.on("touchmove.brush",m).on("touchend.brush",y):_.on("mousemove.brush",m).on("mouseup.brush",y),T.interrupt().selectAll("*").interrupt(),A)M[0]=c[0]-M[0],M[1]=h[0]-M[1];else if(N){var D=+/w$/.test(N),P=+/^n/.test(N);w=[c[1-D]-M[0],h[1-P]-M[1]],M[0]=c[D],M[1]=h[P]}else su.event.altKey&&(b=M.slice());T.style("pointer-events","none").selectAll(".resize").style("display",null),su.select("body").style("cursor",S.style("cursor")),x({type:"brushstart"}),m()}var o,u,a=A(e,"brushstart","brush","brushend"),f=null,l=null,c=[0,0],h=[0,0],p=!0,d=!0,v=Vf[0];return e.event=function(e){e.each(function(){var e=a.of(this,arguments),t={x:c,y:h,i:o,j:u},n=this.__chart__||t;this.__chart__=t,Ff?su.select(this).transition().each("start.brush",function(){o=n.i,u=n.j,c=n.x,h=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=Si(c,t.x),r=Si(h,t.y);return o=u=null,function(i){c=t.x=n(i),h=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,u=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(f=t,v=Vf[!f<<1|!l],e):f},e.y=function(t){return arguments.length?(l=t,v=Vf[!f<<1|!l],e):l},e.clamp=function(t){return arguments.length?(f&&l?(p=!!t[0],d=!!t[1]):f?p=!!t:l&&(d=!!t),e):f&&l?[p,d]:f?p:l?d:null},e.extent=function(t){var n,r,i,s,a;return arguments.length?(f&&(n=t[0],r=t[1],l&&(n=n[0],r=r[0]),o=[n,r],f.invert&&(n=f(n),r=f(r)),n>r&&(a=n,n=r,r=a),(n!=c[0]||r!=c[1])&&(c=[n,r])),l&&(i=t[0],s=t[1],f&&(i=i[1],s=s[1]),u=[i,s],l.invert&&(i=l(i),s=l(s)),i>s&&(a=i,i=s,s=a),(i!=h[0]||s!=h[1])&&(h=[i,s])),e):(f&&(o?(n=o[0],r=o[1]):(n=c[0],r=c[1],f.invert&&(n=f.invert(n),r=f.invert(r)),n>r&&(a=n,n=r,r=a))),l&&(u?(i=u[0],s=u[1]):(i=h[0],s=h[1],l.invert&&(i=l.invert(i),s=l.invert(s)),i>s&&(a=i,i=s,s=a))),f&&l?[[n,i],[r,s]]:f?[n,r]:l&&[i,s])},e.clear=function(){return e.empty()||(c=[0,0],h=[0,0],o=u=null),e},e.empty=function(){return!!f&&c[0]==c[1]||!!l&&h[0]==h[1]},su.rebind(e,a,"on")};var Xf={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],$f=ca.format=ga.timeFormat,Jf=$f.utc,Kf=Jf("%Y-%m-%dT%H:%M:%S.%LZ");$f.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?eu:Kf,eu.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},eu.toString=Kf.toString,ca.second=Ut(function(e){return new ha(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ca.seconds=ca.second.range,ca.seconds.utc=ca.second.utc.range,ca.minute=Ut(function(e){return new ha(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ca.minutes=ca.minute.range,ca.minutes.utc=ca.minute.utc.range,ca.hour=Ut(function(e){var t=e.getTimezoneOffset()/60;return new ha(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ca.hours=ca.hour.range,ca.hours.utc=ca.hour.utc.range,ca.month=Ut(function(e){return e=ca.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ca.months=ca.month.range,ca.months.utc=ca.month.utc.range;var Qf=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Gf=[[ca.second,1],[ca.second,5],[ca.second,15],[ca.second,30],[ca.minute,1],[ca.minute,5],[ca.minute,15],[ca.minute,30],[ca.hour,1],[ca.hour,3],[ca.hour,6],[ca.hour,12],[ca.day,1],[ca.day,2],[ca.week,1],[ca.month,1],[ca.month,3],[ca.year,1]],Yf=$f.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",_n]]),Zf={range:function(e,t,n){return su.range(Math.ceil(e/n)*n,+t,n).map(nu)},floor:E,ceil:E};Gf.year=ca.year,ca.scale=function(){return tu(su.scale.linear(),Gf,Yf)};var el=Gf.map(function(e){return[e[0].utc,e[1]]}),tl=Jf.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",_n]]);el.year=ca.year.utc,ca.scale.utc=function(){return tu(su.scale.linear(),el,tl)},su.text=Ot(function(e){return e.responseText}),su.json=function(e,t){return Mt(e,"application/json",ru,t)},su.html=function(e,t){return Mt(e,"text/html",iu,t)},su.xml=Ot(function(e){return e.responseXML}),"function"==typeof e&&e.amd?e(su):"object"==typeof r&&r.exports&&(r.exports=su),this.d3=su}()},{}],54:[function(e,t,n){"use strict";function r(e,t){this.point=e,this.index=t}function i(e,t){for(var n=e.point,r=t.point,i=n.length,s=0;i>s;++s){var o=r[s]-n[s];if(o)return o}return 0}function s(e,t,n){if(1===e)return n?[[-1,0]]:[];var r=t.map(function(e,t){return[e[0],t]});r.sort(function(e,t){return e[0]-t[0]});for(var i=new Array(e-1),s=1;e>s;++s){var o=r[s-1],u=r[s];i[s-1]=[o[1],u[1]]}return n&&i.push([-1,i[0][1]],[i[e-1][1],-1]),i}function o(e,t){var n=e.length;if(0===n)return[];var o=e[0].length;if(1>o)return[];if(1===o)return s(n,e,t);for(var f=new Array(n),c=1,h=0;n>h;++h){for(var p=e[h],d=new Array(o+1),v=0,m=0;o>m;++m){var g=p[m];d[m]=g,v+=g*g}d[o]=v,f[h]=new r(d,h),c=Math.max(v,c)}a(f,i),n=f.length;for(var y=new Array(n+o+1),b=new Array(n+o+1),w=(o+1)*(o+1)*c,E=new Array(o+1),h=0;o>=h;++h)E[h]=0;E[o]=w,y[0]=E.slice(),b[0]=-1;for(var h=0;o>=h;++h){var d=E.slice();d[h]=1,y[h+1]=d,b[h+1]=-1}for(var h=0;n>h;++h){var S=f[h];y[h+o+1]=S.point,b[h+o+1]=S.index}var x=u(y,!1);if(x=t?x.filter(function(e){for(var t=0,n=0;o>=n;++n){var r=b[e[n]];if(0>r&&++t>=2)return!1;e[n]=r}return!0}):x.filter(function(e){for(var t=0;o>=t;++t){var n=b[e[t]];if(0>n)return!1;e[t]=n}return!0}),1&o)for(var h=0;h<x.length;++h){var S=x[h],d=S[0];S[0]=S[1],S[1]=d}return x}var u=e("incremental-convex-hull"),a=e("uniq");t.exports=o},{"incremental-convex-hull":168,uniq:218}],55:[function(e,t,n){"use strict";function r(e,t,n){var i=0|e[n];if(0>=i)return[];var s,o=new Array(i);if(n===e.length-1)for(s=0;i>s;++s)o[s]=t;else for(s=0;i>s;++s)o[s]=r(e,t,n+1);return o}function i(e,t){var n,r;for(n=new Array(e),r=0;e>r;++r)n[r]=t;return n}function s(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return i(0|e,t);break;case"object":if("number"==typeof e.length)return r(e,t,0)}return[]}t.exports=s},{}],56:[function(n,r,i){(function(i,s){(function(){"use strict";function o(e){return"function"==typeof e||"object"==typeof e&&null!==e}function u(e){return"function"==typeof e}function a(e){return"object"==typeof e&&null!==e}function f(e){$=e}function l(e){G=e}function c(){return function(){i.nextTick(m)}}function h(){return function(){V(m)}}function p(){var e=0,t=new et(m),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=m,function(){e.port2.postMessage(0)}}function v(){return function(){setTimeout(m,1)}}function m(){for(var e=0;Q>e;e+=2){var t=rt[e],n=rt[e+1];t(n),rt[e]=void 0,rt[e+1]=void 0}Q=0}function g(){try{var e=n,t=e("vertx");return V=t.runOnLoop||t.runOnContext,h()}catch(r){return v()}}function y(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function w(){return new TypeError("A promises callback cannot return that same promise.")}function E(e){try{return e.then}catch(t){return ut.error=t,ut}}function S(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function x(e,t,n){G(function(e){var r=!1,i=S(n,t,function(n){r||(r=!0,t!==n?C(e,n):L(e,n))},function(t){r||(r=!0,A(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,A(e,i))},e)}function T(e,t){t._state===st?L(e,t._result):t._state===ot?A(e,t._result):O(t,void 0,function(t){C(e,t)},function(t){A(e,t)})}function N(e,t){if(t.constructor===e.constructor)T(e,t);else{var n=E(t);n===ut?A(e,ut.error):void 0===n?L(e,t):u(n)?x(e,t,n):L(e,t)}}function C(e,t){e===t?A(e,b()):o(t)?N(e,t):L(e,t)}function k(e){e._onerror&&e._onerror(e._result),M(e)}function L(e,t){e._state===it&&(e._result=t,e._state=st,0!==e._subscribers.length&&G(M,e))}function A(e,t){e._state===it&&(e._state=ot,e._result=t,G(k,e))}function O(e,t,n,r){var i=e._subscribers,s=i.length;e._onerror=null,i[s]=t,i[s+st]=n,i[s+ot]=r,0===s&&e._state&&G(M,e)}function M(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,s=e._result,o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?P(n,r,i,s):i(s);e._subscribers.length=0}}function _(){this.error=null}function D(e,t){try{return e(t)}catch(n){return at.error=n,at}}function P(e,t,n,r){var i,s,o,a,f=u(n);if(f){if(i=D(n,r),i===at?(a=!0,s=i.error,i=null):o=!0,t===i)return void A(t,w())}else i=r,o=!0;t._state!==it||(f&&o?C(t,i):a?A(t,s):e===st?L(t,i):e===ot&&A(t,i))}function H(e,t){try{t(function(t){C(e,t)},function(t){A(e,t)})}catch(n){A(e,n)}}function B(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(y),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?L(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&L(n.promise,n._result))):A(n.promise,n._validationError())}function j(e){return(new ft(this,e)).promise}function F(e){function t(e){C(i,e)}function n(e){A(i,e)}var r=this,i=new r(y);if(!K(e))return A(i,new TypeError("You must pass an array to race.")),i;for(var s=e.length,o=0;i._state===it&&s>o;o++)O(r.resolve(e[o]),void 0,t,n);return i}function I(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(y);return C(n,e),n}function q(e){var t=this,n=new t(y);return A(n,e),n}function R(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function U(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this._id=dt++,this._state=void 0,this._result=void 0,this._subscribers=[],y!==e&&(u(e)||R(),this instanceof z||U(),H(this,e))}function W(){var e;if("undefined"!=typeof s)e=s;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=vt)}var X;X=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var V,$,J,K=X,Q=0,G=({}.toString,function(e,t){rt[Q]=e,rt[Q+1]=t,Q+=2,2===Q&&($?$(m):J())}),Y="undefined"!=typeof window?window:void 0,Z=Y||{},et=Z.MutationObserver||Z.WebKitMutationObserver,tt="undefined"!=typeof i&&"[object process]"==={}.toString.call(i),nt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,rt=new Array(1e3);J=tt?c():et?p():nt?d():void 0===Y&&"function"==typeof n?g():v();var it=void 0,st=1,ot=2,ut=new _,at=new _;B.prototype._validateInput=function(e){return K(e)},B.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},B.prototype._init=function(){this._result=new Array(this.length)};var ft=B;B.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,i=0;n._state===it&&t>i;i++)e._eachEntry(r[i],i)},B.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;a(e)?e.constructor===r&&e._state!==it?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t):(n._remaining--,n._result[t]=e)},B.prototype._settledAt=function(e,t,n){var r=this,i=r.promise;i._state===it&&(r._remaining--,e===ot?A(i,n):r._result[t]=n),0===r._remaining&&L(i,r._result)},B.prototype._willSettleAt=function(e,t){var n=this;O(e,void 0,function(e){n._settledAt(st,t,e)},function(e){n._settledAt(ot,t,e)})};var lt=j,ct=F,ht=I,pt=q,dt=0,vt=z;z.all=lt,z.race=ct,z.resolve=ht,z.reject=pt,z._setScheduler=f,z._setAsap=l,z._asap=G,z.prototype={constructor:z,then:function(e,t){var n=this,r=n._state;if(r===st&&!e||r===ot&&!t)return this;var i=new this.constructor(y),s=n._result;if(r){var o=arguments[r-1];G(function(){P(r,i,o,s)})}else O(n,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var mt=W,gt={Promise:vt,polyfill:mt};"function"==typeof e&&e.amd?e(function(){return gt}):"undefined"!=typeof r&&r.exports?r.exports=gt:"undefined"!=typeof this&&(this.ES6Promise=gt),mt()}).call(this)}).call(this,n("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:38}],57:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,a,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length))throw(t=arguments[1],t instanceof Error)?t:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[e],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),f=n.slice(),r=f.length,a=0;r>a;a++)f[a].apply(this,s);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],58:[function(e,t,n){"use strict";function r(e){for(var t,n=e.length,r=0;n>r;r++)if(t=e.charCodeAt(r),(9>t||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(8192>t||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}t.exports=function(e){var t=typeof e;if("string"===t){var n=e;if(e=+e,0===e&&r(n))return!1}else if("number"!==t)return!1;return 1>e-e}},{}],59:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.gl=e,this.type=t,this.handle=n,this.length=r,this.usage=i}function i(e,t,n,r,i,s){var o=i.length*i.BYTES_PER_ELEMENT;if(0>s)return e.bufferData(t,i,r),o;if(o+s>n)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,s,i),n}function s(e,t){for(var n=a.malloc(e.length,t),r=e.length,i=0;r>i;++i)n[i]=e[i];return n}function o(e,t){for(var n=1,r=t.length-1;r>=0;--r){if(t[r]!==n)return!1;n*=e[r]}return!0}function u(e,t,n,i){if(n=n||e.ARRAY_BUFFER,i=i||e.DYNAMIC_DRAW,n!==e.ARRAY_BUFFER&&n!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(i!==e.DYNAMIC_DRAW&&i!==e.STATIC_DRAW&&i!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var s=e.createBuffer(),o=new r(e,n,s,0,i);return o.update(t),o}var a=e("typedarray-pool"),f=e("ndarray-ops"),l=e("ndarray"),c=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],h=r.prototype;h.bind=function(){this.gl.bindBuffer(this.type,this.handle)},h.unbind=function(){this.gl.bindBuffer(this.type,null)},h.dispose=function(){this.gl.deleteBuffer(this.handle)},h.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"==typeof e&&"undefined"!=typeof e.shape){var n=e.dtype;if(c.indexOf(n)<0&&(n="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var r=gl.getExtension("OES_element_index_uint");n=r&&"uint16"!==n?"uint32":"uint16"}if(n===e.dtype&&o(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=i(this.gl,this.type,this.length,this.usage,e.data,t):this.length=i(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var u=a.malloc(e.size,n),h=l(u,e.shape);f.assign(h,e),0>t?this.length=i(this.gl,this.type,this.length,this.usage,u,t):this.length=i(this.gl,this.type,this.length,this.usage,u.subarray(0,e.size),t),a.free(u)}}else if(Array.isArray(e)){var p;p=this.type===this.gl.ELEMENT_ARRAY_BUFFER?s(e,"uint16"):s(e,"float32"),0>t?this.length=i(this.gl,this.type,this.length,this.usage,p,t):this.length=i(this.gl,this.type,this.length,this.usage,p.subarray(0,e.length),t),a.free(p)}else if("object"==typeof e&&"number"==typeof e.length)this.length=i(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");e=0|e,0>=e&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}},t.exports=u},{ndarray:189,"ndarray-ops":184,"typedarray-pool":217}],60:[function(e,t,n){"use strict";function r(e,t,n){this.plot=e,this.shader=t,this.buffer=n,this.bounds=[1/0,1/0,-1/0,-1/0],this.numPoints=0,this.color=[0,0,0,1]}function i(e,t){var n=s(e.gl,a.vertex,a.fragment),i=o(e.gl),u=new r(e,n,i);return u.update(t),e.addObject(u),u}var s=e("gl-shader"),o=e("gl-buffer"),u=e("typedarray-pool"),a=e("./lib/shaders");t.exports=i;var f=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]],l=r.prototype;l.draw=function(){var e=[1,0,0,0,1,0,0,0,1],t=[1,1];return function(){var n=this.plot,r=this.shader,i=this.buffer,s=this.bounds,o=this.numPoints,u=(this.color,n.gl),a=n.dataBox,l=n.viewBox,c=n.pixelRatio,h=s[2]-s[0],p=s[3]-s[1],d=a[2]-a[0],v=a[3]-a[1];e[0]=2*h/d,e[4]=2*p/v,e[6]=2*(s[0]-a[0])/d-1,e[7]=2*(s[1]-a[1])/v-1;var m=l[2]-l[0],g=l[3]-l[1];t[0]=2*c/m,t[1]=2*c/g,i.bind(),r.bind(),r.uniforms.viewTransform=e,r.uniforms.pixelScale=t,r.uniforms.color=this.color,r.attributes.position.pointer(u.FLOAT,!1,16,0),r.attributes.pixelOffset.pointer(u.FLOAT,!1,16,8),u.drawArrays(u.TRIANGLES,0,o*f.length)}}(),l.drawPick=function(e){return e},l.pick=function(e,t){return null},l.update=function(e){e=e||{};var t=e.positions||[],n=e.errors||[],r=1;"lineWidth"in e&&(r=+e.lineWidth);var i=5;"capSize"in e&&(i=+e.capSize),this.color=(e.color||[0,0,0,1]).slice();for(var s=this.bounds=[1/0,1/0,-1/0,-1/0],o=this.numPoints=t.length>>1,a=0;o>a;++a){var l=t[2*a],c=t[2*a+1];s[0]=Math.min(l,s[0]),s[1]=Math.min(c,s[1]),s[2]=Math.max(l,s[2]),s[3]=Math.max(c,s[3])}s[2]===s[0]&&(s[2]+=1),s[3]===s[1]&&(s[3]+=1);for(var h=1/(s[2]-s[0]),p=1/(s[3]-s[1]),d=s[0],v=s[1],m=u.mallocFloat32(o*f.length*4),g=0,a=0;o>a;++a)for(var l=t[2*a],c=t[2*a+1],y=n[4*a],b=n[4*a+1],w=n[4*a+2],E=n[4*a+3],S=0;S<f.length;++S){var x=f[S],T=x[0],N=x[1];0>T?T*=y:T>0&&(T*=b),0>N?N*=w:N>0&&(N*=E),m[g++]=h*(l-d+T),m[g++]=p*(c-v+N),m[g++]=r*x[2]+(i+r)*x[4],m[g++]=r*x[3]+(i+r)*x[5]}this.buffer.update(m),u.free(m)},l.dispose=function(){this.plot.removeObject(this),this.shader.dispose(),this.buffer.dispose()}},{"./lib/shaders":61,"gl-buffer":59,"gl-shader":138,"typedarray-pool":217}],61:[function(e,t,n){t.exports={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute vec2 pixelOffset;\n\nuniform mat3 viewTransform;\nuniform vec2 pixelScale;\n\nvoid main() {\n  vec3 scrPosition = viewTransform * vec3(position, 1);\n  gl_Position = vec4(\n    scrPosition.xy + scrPosition.z * pixelScale * pixelOffset,\n    0,\n    scrPosition.z);\n}\n",fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"}},{}],62:[function(e,t,n){"use strict";function r(e,t,n,r){this.gl=e,this.shader=r,this.buffer=t,this.vao=n,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1}function i(e,t){for(var n=0;3>n;++n)e[0][n]=Math.min(e[0][n],t[n]),e[1][n]=Math.max(e[1][n],t[n])}function s(e,t,n,r){for(var i=h[r],s=0;s<i.length;++s){var o=i[s];e.push(t[0],t[1],t[2],n[0],n[1],n[2],n[3],o[0],o[1],o[2])}return i.length}function o(e){var t=e.gl,n=u(t),i=a(t,[{buffer:n,type:t.FLOAT,size:3,offset:0,stride:40},{buffer:n,type:t.FLOAT,size:4,offset:12,stride:40},{buffer:n,type:t.FLOAT,size:3,offset:28,stride:40}]),s=f(t);s.attributes.position.location=0,s.attributes.color.location=1,s.attributes.offset.location=2;var o=new r(t,n,i,s);return o.update(e),o}t.exports=o;var u=e("gl-buffer"),a=e("gl-vao"),f=e("./shaders/index"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c=r.prototype;c.isOpaque=function(){return this.opacity>=1},c.isTransparent=function(){return this.opacity<1},c.drawTransparent=c.draw=function(e){var t=this.gl,n=this.shader.uniforms;this.shader.bind();var r=n.view=e.view||l,i=n.projection=e.projection||l;n.model=e.model||l,n.clipBounds=this.clipBounds,n.opacity=this.opacity;var s=r[12],o=r[13],u=r[14],a=r[15],f=this.pixelRatio*(i[3]*s+i[7]*o+i[11]*u+i[15]*a)/t.drawingBufferHeight;this.vao.bind();for(var c=0;3>c;++c)t.lineWidth(this.lineWidth[c]),n.capSize=this.capSize[c]*f,t.drawArrays(t.LINES,this.lineOffset[c],this.lineCount[c]);this.vao.unbind()};var h=function(){for(var e=new Array(3),t=0;3>t;++t){for(var n=[],r=1;2>=r;++r)for(var i=-1;1>=i;i+=2){var s=(r+t)%3,o=[0,0,0];o[s]=i,n.push(o)}e[t]=n}return e}();c.update=function(e){e=e||{},"lineWidth"in e&&(this.lineWidth=e.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in e&&(this.capSize=e.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),"opacity"in e&&(this.opacity=e.opacity);var t=e.color||[[0,0,0],[0,0,0],[0,0,0]],n=e.position,r=e.error;if(Array.isArray(t[0])||(t=[t,t,t]),n&&r){var o=[],u=n.length,a=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var f=0;3>f;++f){this.lineOffset[f]=a;e:for(var l=0;u>l;++l){for(var c=n[l],h=0;3>h;++h)if(isNaN(c[h])||!isFinite(c[h]))continue e;var p=r[l],d=t[f];if(Array.isArray(d[0])&&(d=t[l]),3===d.length&&(d=[d[0],d[1],d[2],1]),!isNaN(p[0][f])&&!isNaN(p[1][f])){if(p[0][f]<0){var v=c.slice();v[f]+=p[0][f],o.push(c[0],c[1],c[2],d[0],d[1],d[2],d[3],0,0,0,v[0],v[1],v[2],d[0],d[1],d[2],d[3],0,0,0),i(this.bounds,v),a+=2+s(o,v,d,f)}if(p[1][f]>0){var v=c.slice();v[f]+=p[1][f],o.push(c[0],c[1],c[2],d[0],d[1],d[2],d[3],0,0,0,v[0],v[1],v[2],d[0],d[1],d[2],d[3],0,0,0),i(this.bounds,v),a+=2+s(o,v,d,f)}}}this.lineCount[f]=a-this.lineOffset[f]}this.buffer.update(o)}},c.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":63,"gl-buffer":59,"gl-vao":166}],63:[function(e,t,n){"use strict";var r=e("gl-shader"),i="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}",s="#define GLSLIFY 1\nprecision mediump float;\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(fragPosition, clipBounds[0])) || any(greaterThan(fragPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = opacity * fragColor;\n}";t.exports=function(e){return r(e,i,s,null,[{name:"position",type:"vec3"},{name:"offset",type:"vec3"},{name:"color",type:"vec4"}])}},{"gl-shader":138}],64:[function(e,t,n){"use strict";function r(e){var t=e.getParameter(e.FRAMEBUFFER_BINDING),n=e.getParameter(e.RENDERBUFFER_BINDING),r=e.getParameter(e.TEXTURE_BINDING_2D);return[t,n,r]}function i(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function s(e,t){var n=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);y=new Array(n+1);for(var r=0;n>=r;++r){for(var i=new Array(n),s=0;r>s;++s)i[s]=e.COLOR_ATTACHMENT0+s;for(var s=r;n>s;++s)i[s]=e.NONE;y[r]=i}}function o(e){switch(e){case d:throw new Error("gl-fbo: Framebuffer unsupported");case v:throw new Error("gl-fbo: Framebuffer incomplete attachment");case m:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case g:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function u(e,t,n,r,i,s){if(!r)return null;var o=p(e,t,n,i,r);return o.magFilter=e.NEAREST,o.minFilter=e.NEAREST,o.mipSamples=1,o.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,s,e.TEXTURE_2D,o.handle,0),o}function a(e,t,n,r,i){var s=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,s),e.renderbufferStorage(e.RENDERBUFFER,r,t,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,s),s}function f(e){var t=r(e.gl),n=e.gl,s=e.handle=n.createFramebuffer(),f=e._shape[0],l=e._shape[1],c=e.color.length,h=e._ext,p=e._useStencil,d=e._useDepth,v=e._colorType;n.bindFramebuffer(n.FRAMEBUFFER,s);for(var m=0;c>m;++m)e.color[m]=u(n,f,l,v,n.RGBA,n.COLOR_ATTACHMENT0+m);0===c?(e._color_rb=a(n,f,l,n.RGBA4,n.COLOR_ATTACHMENT0),h&&h.drawBuffersWEBGL(y[0])):c>1&&h.drawBuffersWEBGL(y[c]);var g=n.getExtension("WEBGL_depth_texture");g?p?e.depth=u(n,f,l,g.UNSIGNED_INT_24_8_WEBGL,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):d&&(e.depth=u(n,f,l,n.UNSIGNED_SHORT,n.DEPTH_COMPONENT,n.DEPTH_ATTACHMENT)):d&&p?e._depth_rb=a(n,f,l,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):d?e._depth_rb=a(n,f,l,n.DEPTH_COMPONENT16,n.DEPTH_ATTACHMENT):p&&(e._depth_rb=a(n,f,l,n.STENCIL_INDEX,n.STENCIL_ATTACHMENT));var b=n.checkFramebufferStatus(n.FRAMEBUFFER);if(b!==n.FRAMEBUFFER_COMPLETE){e._destroyed=!0,n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(n.deleteRenderbuffer(e._depth_rb),e._depth_rb=null);for(var m=0;m<e.color.length;++m)e.color[m].dispose(),e.color[m]=null;e._color_rb&&(n.deleteRenderbuffer(e._color_rb),e._color_rb=null),i(n,t),o(b)}i(n,t)}function l(e,t,n,r,i,s,o,u){this.gl=e,this._shape=[0|t,0|n],this._destroyed=!1,this._ext=u,this.color=new Array(i);for(var a=0;i>a;++a)this.color[a]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=r,this._useDepth=s,this._useStencil=o;var l=this,c=[0|t,0|n];Object.defineProperties(c,{0:{get:function(){return l._shape[0]},set:function(e){return l.width=e}},1:{get:function(){return l._shape[1]},set:function(e){return l.height=e}}}),this._shapeVector=c,f(this)}function c(e,t,n){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]!==t||e._shape[1]!==n){var s=e.gl,u=s.getParameter(s.MAX_RENDERBUFFER_SIZE);if(0>t||t>u||0>n||n>u)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=n;for(var a=r(s),f=0;f<e.color.length;++f)e.color[f].shape=e._shape;e._color_rb&&(s.bindRenderbuffer(s.RENDERBUFFER,e._color_rb),s.renderbufferStorage(s.RENDERBUFFER,s.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(s.bindRenderbuffer(s.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&s.renderbufferStorage(s.RENDERBUFFER,s.STENCIL_INDEX,e._shape[0],e._shape[1])),s.bindFramebuffer(s.FRAMEBUFFER,e.handle);var l=s.checkFramebufferStatus(s.FRAMEBUFFER);l!==s.FRAMEBUFFER_COMPLETE&&(e.dispose(),i(s,a),o(l)),i(s,a)}}function h(e,t,n,r){d||(d=e.FRAMEBUFFER_UNSUPPORTED,v=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,m=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,g=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var i=e.getExtension("WEBGL_draw_buffers");if(!y&&i&&s(e,i),Array.isArray(t)&&(r=n,n=0|t[1],t=0|t[0]),"number"!=typeof t)throw new Error("gl-fbo: Missing shape parameter");var o=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(0>t||t>o||0>n||n>o)throw new Error("gl-fbo: Parameters are too large for FBO");r=r||{};var u=1;if("color"in r){if(u=Math.max(0|r.color,0),0>u)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(u>1){if(!i)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(u>e.getParameter(i.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+u+" draw buffers")}}var a=e.UNSIGNED_BYTE,f=e.getExtension("OES_texture_float");if(r.float&&u>0){if(!f)throw new Error("gl-fbo: Context does not support floating point textures");a=e.FLOAT}else r.preferFloat&&u>0&&f&&(a=e.FLOAT);var c=!0;"depth"in r&&(c=!!r.depth);var h=!1;return"stencil"in r&&(h=!!r.stencil),new l(e,t,n,a,u,c,h,i)}var p=e("gl-texture2d");t.exports=h;var d,v,m,g,y=null,b=l.prototype;Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){if(Array.isArray(e)||(e=[0|e,0|e]),2!==e.length)throw new Error("gl-fbo: Shape vector must be length 2");var t=0|e[0],n=0|e[1];return c(this,t,n),[t,n]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return e=0|e,c(this,e,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return e=0|e,c(this,this._shape[0],e),e},enumerable:!1}}),b.bind=function(){if(!this._destroyed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1])}},b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var e=this.gl;e.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(e.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(e.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":162}],65:[function(e,t,n){n.lineVertex="#define GLSLIFY 1\nprecision mediump float;\n\nfloat inverse_1_0(float m) {\n  return 1.0 / m;\n}\n\nmat2 inverse_1_0(mat2 m) {\n  return mat2(m[1][1],-m[0][1],\n             -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\n\nmat3 inverse_1_0(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n              b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n              b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse_1_0(mat4 m) {\n  float\n      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n      a11 * b11 - a12 * b10 + a13 * b09,\n      a02 * b10 - a01 * b11 - a03 * b09,\n      a31 * b05 - a32 * b04 + a33 * b03,\n      a22 * b04 - a21 * b05 - a23 * b03,\n      a12 * b08 - a10 * b11 - a13 * b07,\n      a00 * b11 - a02 * b08 + a03 * b07,\n      a32 * b02 - a30 * b05 - a33 * b01,\n      a20 * b05 - a22 * b02 + a23 * b01,\n      a10 * b10 - a11 * b08 + a13 * b06,\n      a01 * b08 - a00 * b10 - a03 * b06,\n      a30 * b04 - a31 * b02 + a33 * b00,\n      a21 * b02 - a20 * b04 - a23 * b00,\n      a11 * b07 - a10 * b09 - a12 * b06,\n      a00 * b09 - a01 * b07 + a02 * b06,\n      a31 * b01 - a30 * b03 - a32 * b00,\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n\n\nattribute vec2 a, d;\n\nuniform mat3 matrix;\nuniform vec2 screenShape;\nuniform float width;\n\nvarying vec2 direction;\n\nvoid main() {\n  vec2 dir = (matrix * vec3(d, 0)).xy;\n  vec3 base = matrix * vec3(a, 1);\n  vec2 n = 0.5 * width *\n    normalize(screenShape.yx * vec2(dir.y, -dir.x)) / screenShape.xy;\n  vec2 tangent = normalize(screenShape.xy * dir);\n  if(dir.x < 0.0 || (dir.x == 0.0 && dir.y < 0.0)) {\n    direction = -tangent;\n  } else {\n    direction = tangent;\n  }\n  gl_Position = vec4(base.xy/base.z + n, 0, 1);\n}\n",n.lineFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\nuniform vec2 screenShape;\nuniform sampler2D dashPattern;\nuniform float dashLength;\n\nvarying vec2 direction;\n\nvoid main() {\n  float t = fract(dot(direction, gl_FragCoord.xy) / dashLength);\n  vec4 pcolor = color * texture2D(dashPattern, vec2(t, 0.0)).r;\n  gl_FragColor = vec4(pcolor.rgb * pcolor.a, pcolor.a);\n}\n",n.mitreVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 p;\n\nuniform mat3  matrix;\nuniform vec2 screenShape;\nuniform float radius;\n\nvoid main() {\n  vec3 pp = matrix * vec3(p, 1);\n  gl_Position  = vec4(pp.xy, 0, pp.z);\n  gl_PointSize = radius;\n}\n",n.mitreFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n  if(length(gl_PointCoord.xy - 0.5) > 0.25) {\n    discard;\n  }\n  gl_FragColor = vec4(color.rgb, color.a);\n}\n",n.pickVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 a, d;\nattribute vec4 pick0, pick1;\n\nuniform mat3 matrix;\nuniform vec2 screenShape;\nuniform float width;\n\nvarying vec4 pickA, pickB;\n\nfloat inverse_1_0(float m) {\n  return 1.0 / m;\n}\n\nmat2 inverse_1_0(mat2 m) {\n  return mat2(m[1][1],-m[0][1],\n             -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\n\nmat3 inverse_1_0(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n              b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n              b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse_1_0(mat4 m) {\n  float\n      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n      a11 * b11 - a12 * b10 + a13 * b09,\n      a02 * b10 - a01 * b11 - a03 * b09,\n      a31 * b05 - a32 * b04 + a33 * b03,\n      a22 * b04 - a21 * b05 - a23 * b03,\n      a12 * b08 - a10 * b11 - a13 * b07,\n      a00 * b11 - a02 * b08 + a03 * b07,\n      a32 * b02 - a30 * b05 - a33 * b01,\n      a20 * b05 - a22 * b02 + a23 * b01,\n      a10 * b10 - a11 * b08 + a13 * b06,\n      a01 * b08 - a00 * b10 - a03 * b06,\n      a30 * b04 - a31 * b02 + a33 * b00,\n      a21 * b02 - a20 * b04 - a23 * b00,\n      a11 * b07 - a10 * b09 - a12 * b06,\n      a00 * b09 - a01 * b07 + a02 * b06,\n      a31 * b01 - a30 * b03 - a32 * b00,\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n\n\nvoid main() {\n  vec3 base = matrix * vec3(a, 1);\n  vec2 n = width *\n    normalize(screenShape.yx * vec2(d.y, -d.x)) / screenShape.xy;\n  gl_Position = vec4(base.xy/base.z + n, 0, 1);\n  pickA = pick0;\n  pickB = pick1;\n}\n",n.pickFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 pickOffset;\n\nvarying vec4 pickA, pickB;\n\nvoid main() {\n  vec4 fragId = vec4(pickA.xyz, 0.0);\n  if(pickB.w > pickA.w) {\n    fragId.xyz = pickB.xyz;\n  }\n\n  fragId += pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  gl_FragColor = fragId / 255.0;\n}\n",n.fillVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 a, d;\n\nuniform mat3 matrix;\nuniform vec2 projectAxis;\nuniform float projectValue;\nuniform float depth;\n\nvoid main() {\n  vec3 base = matrix * vec3(a, 1);\n  vec2 p = base.xy / base.z;\n  if(d.y < 0.0 || (d.y == 0.0 && d.x < 0.0)) {\n    if(dot(p, projectAxis) < projectValue) {\n      p = p * (1.0 - abs(projectAxis)) + projectAxis * projectValue;\n    }\n  }\n  gl_Position = vec4(p, depth, 1);\n}\n",n.fillFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"},{}],66:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o,u){this.plot=e,this.dashPattern=t,this.lineBuffer=n,this.pickBuffer=r,this.lineShader=i,this.mitreShader=s,this.fillShader=o,this.pickShader=u,this.usingDashes=!1,this.bounds=[1/0,1/0,-1/0,-1/0],this.width=1,this.color=[0,0,1,1],this.fill=[!1,!1,!1,!1],this.fillColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.data=null,this.numPoints=0,this.vertCount=0,this.pickOffset=0,this.lodBuffer=[]}function i(e){return e.map(function(e){return e.slice()})}function s(e,t){var n=e.gl,i=u(n),s=u(n),f=a(n,[1,1]),l=o(n,c.lineVertex,c.lineFragment),h=o(n,c.mitreVertex,c.mitreFragment),p=o(n,c.fillVertex,c.fillFragment),d=o(n,c.pickVertex,c.pickFragment),v=new r(e,f,i,s,l,h,p,d);return e.addObject(v),v.update(t),v}t.exports=s;var o=e("gl-shader"),u=e("gl-buffer"),a=e("gl-texture2d"),f=e("ndarray"),l=e("typedarray-pool"),c=e("./lib/shaders"),h=r.prototype;h.draw=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0],n=[1,0],r=[-1,0],i=[0,1],s=[0,-1];return function(){var o=this.plot,u=this.color,a=this.width,f=(this.numPoints,this.bounds),l=this.vertCount,c=o.gl,h=o.viewBox,p=o.dataBox,d=o.pixelRatio,v=f[2]-f[0],m=f[3]-f[1],g=p[2]-p[0],y=p[3]-p[1],b=h[2]-h[0],w=h[3]-h[1];e[0]=2*v/g,e[4]=2*m/y,e[6]=2*(f[0]-p[0])/g-1,e[7]=2*(f[1]-p[1])/y-1,t[0]=b,t[1]=w;var E=this.lineBuffer;E.bind();var S=this.fill;if(S[0]||S[1]||S[2]||S[3]){var x=this.fillShader;x.bind();var T=x.uniforms;T.matrix=e,T.depth=o.nextDepthValue();var N=x.attributes;N.a.pointer(c.FLOAT,!1,16,0),N.d.pointer(c.FLOAT,!1,16,8),c.depthMask(!0),c.enable(c.DEPTH_TEST);var C=this.fillColor;S[0]&&(T.color=C[0],T.projectAxis=r,T.projectValue=1,c.drawArrays(c.TRIANGLES,0,l)),S[1]&&(T.color=C[1],T.projectAxis=s,T.projectValue=1,c.drawArrays(c.TRIANGLES,0,l)),S[2]&&(T.color=C[2],T.projectAxis=n,T.projectValue=1,c.drawArrays(c.TRIANGLES,0,l)),S[3]&&(T.color=C[3],T.projectAxis=i,T.projectValue=1,c.drawArrays(c.TRIANGLES,0,l)),c.depthMask(!1),c.disable(c.DEPTH_TEST)}var k=this.lineShader;k.bind();var L=k.uniforms;L.matrix=e,L.color=u,L.width=a*d,L.screenShape=t,L.dashPattern=this.dashPattern.bind(),L.dashLength=this.dashLength*d;var A=k.attributes;if(A.a.pointer(c.FLOAT,!1,16,0),A.d.pointer(c.FLOAT,!1,16,8),c.drawArrays(c.TRIANGLES,0,l),a>2&&!this.usingDashes){var O=this.mitreShader;O.bind();var M=O.uniforms;M.matrix=e,M.color=u,M.screenShape=t,M.radius=a*d,O.attributes.p.pointer(c.FLOAT,!1,48,0),c.drawArrays(c.POINTS,0,l/3|0)}}}(),h.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0],n=[0,0,0,0];return function(r){var i=this.plot,s=this.pickShader,o=this.lineBuffer,u=this.pickBuffer,a=this.width,f=this.numPoints,l=this.bounds,c=this.vertCount,h=i.gl,p=i.viewBox,d=i.dataBox,v=i.pickPixelRatio,m=l[2]-l[0],g=l[3]-l[1],y=d[2]-d[0],b=d[3]-d[1],w=p[2]-p[0],E=p[3]-p[1];this.pickOffset=r,e[0]=2*m/y,e[4]=2*g/b,e[6]=2*(l[0]-d[0])/y-1,e[7]=2*(l[1]-d[1])/b-1,t[0]=w,t[1]=E,n[0]=255&r,n[1]=r>>>8&255,n[2]=r>>>16&255,n[3]=r>>>24,s.bind();var S=s.uniforms;S.matrix=e,S.width=a*v,S.pickOffset=n,S.screenShape=t;var x=s.attributes;return o.bind(),x.a.pointer(h.FLOAT,!1,16,0),x.d.pointer(h.FLOAT,!1,16,8),u.bind(),x.pick0.pointer(h.UNSIGNED_BYTE,!1,8,0),x.pick1.pointer(h.UNSIGNED_BYTE,!1,8,4),h.drawArrays(h.TRIANGLES,0,c),r+f}}(),h.pick=function(e,t,n){var r=this.pickOffset,i=this.numPoints;if(r>n||n>=r+i)return null;var s=n-r,o=this.data;return{object:this,pointId:s,dataCoord:[o[2*s],o[2*s+1]]}},h.update=function(e){e=e||{};var t=this.plot.gl;this.color=(e.color||[0,0,1,1]).slice(),this.width=+(e.width||1),this.fill=(e.fill||[!1,!1,!1,!1]).slice(),this.fillColor=i(e.fillColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);for(var n=e.dashes||[1],r=0,s=0;s<n.length;++s)r+=n[s];for(var o=l.mallocUint8(r),u=0,c=255,s=0;s<n.length;++s){for(var h=0;h<n[s];++h)o[u++]=c;c^=255}this.dashPattern.dispose(),this.usingDashes=n.length>1,this.dashPattern=a(t,f(o,[r,1,4],[1,0,0])),this.dashPattern.minFilter=t.NEAREST,this.dashPattern.magFilter=t.NEAREST,this.dashLength=r,l.free(o);var p=e.positions;this.data=p;var d=this.bounds;d[0]=d[1]=1/0,d[2]=d[3]=-1/0;var v=this.numPoints=p.length>>>1;if(0!==v){for(var s=0;v>s;++s){var m=p[2*s],g=p[2*s+1];d[0]=Math.min(d[0],m),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],m),d[3]=Math.max(d[3],g)}d[0]===d[2]&&(d[2]+=1),d[3]===d[1]&&(d[3]+=1);var y=l.mallocFloat32(24*(v-1)),b=l.mallocUint32(12*(v-1)),w=y.length,E=b.length,u=v;for(this.vertCount=6*(v-1);u>1;){var S=--u,m=p[2*u],g=p[2*u+1];m=(m-d[0])/(d[2]-d[0]),g=(g-d[1])/(d[3]-d[1]);var x=S-1,T=p[2*x],N=p[2*x+1];T=(T-d[0])/(d[2]-d[0]),N=(N-d[1])/(d[3]-d[1]);var C=T-m,k=N-g,L=S|1<<24,A=S-1,O=S,M=S-1|1<<24;y[--w]=-k,y[--w]=-C,y[--w]=g,y[--w]=m,b[--E]=L,b[--E]=A,y[--w]=k,y[--w]=C,y[--w]=N,y[--w]=T,b[--E]=O,b[--E]=M,y[--w]=-k,y[--w]=-C,y[--w]=N,y[--w]=T,b[--E]=O,b[--E]=M,y[--w]=k,y[--w]=C,y[--w]=N,y[--w]=T,b[--E]=O,b[--E]=M,y[--w]=-k,y[--w]=-C,y[--w]=g,y[--w]=m,b[--E]=L,b[--E]=A,y[--w]=k,y[--w]=C,y[--w]=g,y[--w]=m,b[--E]=L,b[--E]=A}this.lineBuffer.update(y),this.pickBuffer.update(b),l.free(y),l.free(b)}},h.dispose=function(){this.plot.removeObject(this),this.lineBuffer.dispose(),this.pickBuffer.dispose(),this.lineShader.dispose(),this.mitreShader.dispose(),this.fillShader.dispose(),this.pickShader.dispose(),this.dashPattern.dispose()}},{"./lib/shaders":65,"gl-buffer":59,"gl-shader":138,"gl-texture2d":162,ndarray:189,"typedarray-pool":217}],67:[function(e,t,n){var r=e("gl-shader"),i="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvoid main() {\n  vec4 projected = projection * view * model * vec4(position, 1.0);\n  vec4 tangentClip = projection * view * model * vec4(nextPosition - position, 0.0);\n  vec2 tangent = normalize(screenShape * tangentClip.xy);\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(tangent.y, -tangent.x) / screenShape;\n\n  gl_Position = vec4(projected.xy + projected.w * offset, projected.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n",s="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n",o="#define GLSLIFY 1\nprecision mediump float;\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1_0(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\n\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId/255.0, encode_float_1_0(pixelArcLength).xyz);\n}",u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];n.createShader=function(e){return r(e,i,s,null,u)},n.createPickShader=function(e){return r(e,i,o,null,u)}},{"gl-shader":138}],68:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=0;3>r;++r){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}function i(e){for(var t=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],n=0;3>n;++n)t[0][n]=Math.max(e[0][n],t[0][n]),t[1][n]=Math.min(e[1][n],t[1][n]);return t}function s(e,t,n,r){this.arcLength=e,this.position=t,this.index=n,this.dataCoordinate=r}function o(e,t,n,r,i,s){this.gl=e,this.shader=t,this.pickShader=n,this.buffer=r,this.vao=i,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=s,this.dashScale=1,this.opacity=1,this.dirty=!0,this.pixelRatio=1}function u(e){var t=e.gl||e.scene&&e.scene.gl,n=v(t);n.attributes.position.location=0,n.attributes.nextPosition.location=1,n.attributes.arcLength.location=2,n.attributes.lineWidth.location=3,n.attributes.color.location=4;var r=m(t);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;for(var i=a(t),s=f(t,[{buffer:i,size:3,offset:0,stride:48},{buffer:i,size:3,offset:12,stride:48},{buffer:i,size:1,offset:24,stride:48},{buffer:i,size:1,offset:28,stride:48},{buffer:i,size:4,offset:32,stride:48}]),u=p(new Array(1024),[256,1,4]),c=0;1024>c;++c)u.data[c]=255;var h=l(t,u);h.wrap=t.REPEAT;var d=new o(t,n,r,i,s,h);return d.update(e),d}t.exports=u;var a=e("gl-buffer"),f=e("gl-vao"),l=e("gl-texture2d"),c=e("glsl-read-float"),h=e("binary-search-bounds"),p=e("ndarray"),d=e("./lib/shaders"),v=d.createShader,m=d.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],y=o.prototype;y.isTransparent=function(){return this.opacity<1},y.isOpaque=function(){return this.opacity>=1},y.pickSlots=1,y.setPickBase=function(e){this.pickId=e},y.drawTransparent=y.draw=function(e){var t=this.gl,n=this.shader,r=this.vao;n.bind(),n.uniforms={model:e.model||g,view:e.view||g,projection:e.projection||g,clipBounds:i(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount)},y.drawPick=function(e){var t=this.gl,n=this.pickShader,r=this.vao;n.bind(),n.uniforms={model:e.model||g,view:e.view||g,projection:e.projection||g,pickId:this.pickId,clipBounds:i(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount)},y.update=function(e){this.dirty=!0,"dashScale"in e&&(this.dashScale=e.dashScale),"opacity"in e&&(this.opacity=+e.opacity);var t=e.position||e.positions;if(t){var n=e.color||e.colors||[0,0,0,1],i=e.lineWidth||1,s=[],o=[],u=[],a=0,f=0,l=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];e:for(var c=1;c<t.length;++c){var d=t[c-1],v=t[c];o.push(a),u.push(d.slice());for(var m=0;3>m;++m){if(isNaN(d[m])||isNaN(v[m])||!isFinite(d[m])||!isFinite(v[m]))continue e;l[0][m]=Math.min(l[0][m],d[m],v[m]),l[1][m]=Math.max(l[1][m],d[m],v[m])}var g,y;Array.isArray(n[0])?(g=n[c-1],y=n[c]):g=y=n,3===g.length&&(g=[g[0],g[1],g[2],1]),3===y.length&&(y=[y[0],y[1],y[2],1]);var b,w;Array.isArray(i)?(b=i[c-1],w=lineWidht[c]):b=w=i;var E=a;a+=r(d,v),s.push(d[0],d[1],d[2],v[0],v[1],v[2],E,b,g[0],g[1],g[2],g[3],d[0],d[1],d[2],v[0],v[1],v[2],E,-b,g[0],g[1],g[2],g[3],v[0],v[1],v[2],d[0],d[1],d[2],a,-b,y[0],y[1],y[2],y[3],v[0],v[1],v[2],d[0],d[1],d[2],a,b,y[0],y[1],y[2],y[3]),f+=4}if(this.buffer.update(s),o.push(a),u.push(t[t.length-1].slice()),this.bounds=l,this.vertexCount=f,this.points=u,this.arcLength=o,"dashes"in e){var S=e.dashes,x=S.slice();x.unshift(0);for(var c=1;c<x.length;++c)x[c]=x[c-1]+x[c];for(var T=p(new Array(1024),[256,1,4]),c=0;256>c;++c){for(var m=0;4>m;++m)T.set(c,0,m,0);1&h.le(x,x[x.length-1]*c/255)?T.set(c,0,0,0):T.set(c,0,0,255)}this.texture.setPixels(T)}}},y.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},y.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=c(e.value[0],e.value[1],e.value[2],0),n=h.le(this.arcLength,t);if(0>n)return null;if(n===this.arcLength.length-1)return new s(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),n);for(var r=this.points[n],i=this.points[Math.min(n+1,this.points.length-1)],o=(t-this.arcLength[n])/(this.arcLength[n+1]-this.arcLength[n]),u=1-o,a=[0,0,0],f=0;3>f;++f)a[f]=u*r[f]+o*i[f];var l=Math.min(.5>o?n:n+1,this.points.length-1);return new s(t,a,l,this.points[l])}},{"./lib/shaders":67,"binary-search-bounds":69,"gl-buffer":59,"gl-texture2d":162,"gl-vao":166,"glsl-read-float":70,ndarray:189}],69:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{dup:4}],70:[function(e,t,n){function r(e,t,n,r){return i[0]=r,i[1]=n,i[2]=t,i[3]=e,s[0]}t.exports=r;var i=new Uint8Array(4),s=new Float32Array(i.buffer)},{}],71:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=l*o-u*f,h=-l*s+u*a,p=f*s-o*a,d=n*c+r*h+i*p;return d?(d=1/d,e[0]=c*d,e[1]=(-l*r+i*f)*d,e[2]=(u*r-i*o)*d,e[3]=h*d,e[4]=(l*n-i*a)*d,e[5]=(-u*n+i*s)*d,e[6]=p*d,e[7]=(-f*n+r*a)*d,e[8]=(o*n-r*s)*d,e):null}t.exports=r},{}],72:[function(e,t,n){function r(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=r},{}],73:[function(e,t,n){function r(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],74:[function(e,t,n){function r(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11],p=e[12],d=e[13],v=e[14],m=e[15],g=t*o-n*s,y=t*u-r*s,b=t*a-i*s,w=n*u-r*o,E=n*a-i*o,S=r*a-i*u,x=f*d-l*p,T=f*v-c*p,N=f*m-h*p,C=l*v-c*d,k=l*m-h*d,L=c*m-h*v;return g*L-y*k+b*C+w*N-E*T+S*x}t.exports=r},{}],75:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=r*o,c=r*u,h=i*o,p=i*u,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-c-d,e[1]=l+g,e[2]=h-m,e[3]=0,e[4]=l-g,e[5]=1-f-d,e[6]=p+v,e[7]=0,e[8]=h+m,e[9]=p-v,e[10]=1-f-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],76:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=r+r,a=i+i,f=s+s,l=r*u,c=r*a,h=r*f,p=i*a,d=i*f,v=s*f,m=o*u,g=o*a,y=o*f;return e[0]=1-(p+v),e[1]=c+y,e[2]=h-g,e[3]=0,e[4]=c-y,e[5]=1-(l+v),e[6]=d+m,e[7]=0,e[8]=h+g,e[9]=d-m,e[10]=1-(l+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}t.exports=r},{}],77:[function(e,t,n){function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],78:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(i*L-r*A-s*k)*O,e[2]=(v*x-m*S+g*E)*O,e[3]=(h*S-c*x-p*E)*O,e[4]=(a*C-o*A-f*N)*O,e[5]=(n*A-i*C+s*N)*O,e[6]=(m*w-d*x-g*b)*O,e[7]=(l*x-h*w+p*b)*O,e[8]=(o*L-u*C+f*T)*O,e[9]=(r*C-n*L-s*T)*O,e[10]=(d*S-v*w+g*y)*O,e[11]=(c*w-l*S-p*y)*O,e[12]=(u*N-o*k-a*T)*O,e[13]=(n*k-r*N+i*T)*O,e[14]=(v*b-d*E-m*y)*O,e[15]=(l*E-c*b+h*y)*O,e):null}t.exports=r},{}],79:[function(e,t,n){function r(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,v=t[0],m=t[1],g=t[2],y=r[0],b=r[1],w=r[2],E=n[0],S=n[1],x=n[2];return Math.abs(v-E)<1e-6&&Math.abs(m-S)<1e-6&&Math.abs(g-x)<1e-6?i(e):(c=v-E,h=m-S,p=g-x,d=1/Math.sqrt(c*c+h*h+p*p),c*=d,h*=d,p*=d,s=b*p-w*h,o=w*c-y*p,u=y*h-b*c,d=Math.sqrt(s*s+o*o+u*u),d?(d=1/d,s*=d,o*=d,u*=d):(s=0,o=0,u=0),a=h*u-p*o,f=p*s-c*u,l=c*o-h*s,d=Math.sqrt(a*a+f*f+l*l),d?(d=1/d,a*=d,f*=d,l*=d):(a=0,f=0,l=0),e[0]=s,e[1]=a,e[2]=c,e[3]=0,e[4]=o,e[5]=f,e[6]=h,e[7]=0,e[8]=u,e[9]=l,e[10]=p,e[11]=0,e[12]=-(s*v+o*m+u*g),e[13]=-(a*v+f*m+l*g),e[14]=-(c*v+h*m+p*g),e[15]=1,e)}var i=e("./identity");t.exports=r},{"./identity":77}],80:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=n[0],w=n[1],E=n[2],S=n[3];return e[0]=b*r+w*u+E*c+S*v,e[1]=b*i+w*a+E*h+S*m,e[2]=b*s+w*f+E*p+S*g,e[3]=b*o+w*l+E*d+S*y,b=n[4],w=n[5],E=n[6],S=n[7],e[4]=b*r+w*u+E*c+S*v,e[5]=b*i+w*a+E*h+S*m,e[6]=b*s+w*f+E*p+S*g,e[7]=b*o+w*l+E*d+S*y,b=n[8],w=n[9],E=n[10],S=n[11],e[8]=b*r+w*u+E*c+S*v,e[9]=b*i+w*a+E*h+S*m,e[10]=b*s+w*f+E*p+S*g,e[11]=b*o+w*l+E*d+S*y,b=n[12],w=n[13],E=n[14],S=n[15],e[12]=b*r+w*u+E*c+S*v,e[13]=b*i+w*a+E*h+S*m,e[14]=b*s+w*f+E*p+S*g,e[15]=b*o+w*l+E*d+S*y,e}t.exports=r},{}],81:[function(e,t,n){function r(e,t,n,r,i){var s=1/Math.tan(t/2),o=1/(r-i);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e}t.exports=r},{}],82:[function(e,t,n){function r(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L=r[0],A=r[1],O=r[2],M=Math.sqrt(L*L+A*A+O*O);return Math.abs(M)<1e-6?null:(M=1/M,L*=M,A*=M,O*=M,i=Math.sin(n),s=Math.cos(n),o=1-s,u=t[0],a=t[1],f=t[2],l=t[3],c=t[4],h=t[5],p=t[6],d=t[7],v=t[8],m=t[9],g=t[10],y=t[11],b=L*L*o+s,w=A*L*o+O*i,E=O*L*o-A*i,S=L*A*o-O*i,x=A*A*o+s,T=O*A*o+L*i,N=L*O*o+A*i,C=A*O*o-L*i,k=O*O*o+s,e[0]=u*b+c*w+v*E,e[1]=a*b+h*w+m*E,e[2]=f*b+p*w+g*E,e[3]=l*b+d*w+y*E,e[4]=u*S+c*x+v*T,e[5]=a*S+h*x+m*T,e[6]=f*S+p*x+g*T,e[7]=l*S+d*x+y*T,e[8]=u*N+c*C+v*k,e[9]=a*N+h*C+m*k,e[10]=f*N+p*C+g*k,e[11]=l*N+d*C+y*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}t.exports=r},{}],83:[function(e,t,n){function r(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],o=t[5],u=t[6],a=t[7],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+f*r,e[5]=o*i+l*r,e[6]=u*i+c*r,e[7]=a*i+h*r,e[8]=f*i-s*r,e[9]=l*i-o*r,e[10]=c*i-u*r,e[11]=h*i-a*r,e}t.exports=r},{}],84:[function(e,t,n){function r(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-f*r,e[1]=o*i-l*r,e[2]=u*i-c*r,e[3]=a*i-h*r,e[8]=s*r+f*i,e[9]=o*r+l*i,e[10]=u*r+c*i,e[11]=a*r+h*i,e}t.exports=r},{}],85:[function(e,t,n){function r(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[4],l=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+f*r,e[1]=o*i+l*r,e[2]=u*i+c*r,e[3]=a*i+h*r,e[4]=f*i-s*r,e[5]=l*i-o*r,e[6]=c*i-u*r,e[7]=h*i-a*r,e}t.exports=r},{}],86:[function(e,t,n){function r(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}t.exports=r},{}],87:[function(e,t,n){function r(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v=n[0],m=n[1],g=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*g+t[12],e[13]=t[1]*v+t[5]*m+t[9]*g+t[13],e[14]=t[2]*v+t[6]*m+t[10]*g+t[14],e[15]=t[3]*v+t[7]*m+t[11]*g+t[15]):(r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=u,e[5]=a,e[6]=f,e[7]=l,e[8]=c,e[9]=h,e[10]=p,e[11]=d,e[12]=r*v+u*m+c*g+t[12],e[13]=i*v+a*m+h*g+t[13],e[14]=s*v+f*m+p*g+t[14],e[15]=o*v+l*m+d*g+t[15]),e}t.exports=r},{}],88:[function(e,t,n){function r(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}t.exports=r},{}],89:[function(e,t,n){"use strict";function r(e,t){for(var n=[0,0,0,0],r=0;4>r;++r)for(var i=0;4>i;++i)n[i]+=e[4*r+i]*t[r];return n}function i(e,t,n,i,s){for(var o=r(i,r(n,r(t,[e[0],e[1],e[2],1]))),u=0;3>u;++u)o[u]/=o[3];return[.5*s[0]*(1+o[0]),.5*s[1]*(1-o[1])]}function s(e,t){if(2===e.length){for(var n=0,r=0,i=0;2>i;++i)n+=Math.pow(t[i]-e[0][i],2),r+=Math.pow(t[i]-e[1][i],2);return n=Math.sqrt(n),r=Math.sqrt(r),1e-6>n+r?[1,0]:[r/(n+r),n/(r+n)]}if(3===e.length){var s=[0,0];return f(e[0],e[1],e[2],t,s),a(e,s)}return[]}function o(e,t){for(var n=[0,0,0],r=0;r<e.length;++r)for(var i=e[r],s=t[r],o=0;3>o;++o)n[o]+=s*i[o];return n}function u(e,t,n,r,u,a){if(1===e.length)return[0,e[0].slice()];for(var f=new Array(e.length),l=0;l<e.length;++l)f[l]=i(e[l],n,r,u,a);for(var c=0,h=1/0,l=0;l<f.length;++l){for(var p=0,d=0;2>d;++d)p+=Math.pow(f[l][d]-t[d],2);h>p&&(h=p,c=l)}for(var v=s(f,t),m=0,l=0;3>l;++l){if(v[l]<-0.001||v[l]>1.0001)return null;m+=v[l]}return Math.abs(m-1)>.001?null:[c,o(e,v),v]}var a=e("barycentric"),f=e("polytope-closest-point/lib/closest_point_2d.js");t.exports=u},{barycentric:92,"polytope-closest-point/lib/closest_point_2d.js":94}],90:[function(e,t,n){var r="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec4 m_position  = model * vec4(position, 1.0);\n  vec4 t_position  = view * m_position;\n  gl_Position      = projection * t_position;\n  f_color          = color;\n  f_normal         = normal;\n  f_data           = position;\n  f_eyeDirection   = eyePosition   - position;\n  f_lightDirection = lightPosition - position;\n  f_uv             = uv;\n}",i="#define GLSLIFY 1\nprecision mediump float;\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat cookTorranceSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution_2_0(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n  \n  if(!gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular_1_1(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}",s="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}",o="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",u="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}",a="#define GLSLIFY 1\nprecision mediump float;\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",f="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}",l="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || \n     any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}",c="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}",h="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}",p="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor,1);\n}\n";n.meshShader={vertex:r,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.wireShader={vertex:s,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.pointShader={vertex:u,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},n.pickShader={vertex:f,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},n.pointPickShader={vertex:c,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},n.contourShader={vertex:h,fragment:p,attributes:[{name:"position",type:"vec3"}]}},{}],91:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C){this.gl=e,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.lineShader=r,this.pointShader=i,this.pickShader=s,this.pointPickShader=o,this.contourShader=u,this.trianglePositions=a,this.triangleColors=l,this.triangleNormals=h,this.triangleUVs=c,this.triangleIds=f,this.triangleVAO=p,this.triangleCount=0,this.lineWidth=1,this.edgePositions=d,this.edgeColors=m,this.edgeUVs=g,this.edgeIds=v,this.edgeVAO=y,this.edgeCount=0,this.pointPositions=b,this.pointColors=E,this.pointUVs=S,this.pointSizes=x,this.pointIds=w,this.pointVAO=T,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=N,this.contourVAO=C,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this._model=D,this._view=D,this._projection=D,this._resolution=[1,1]}function i(e){for(var t=S({colormap:e,nshades:256,format:"rgba"}),n=new Uint8Array(1024),r=0;256>r;++r){for(var i=t[r],s=0;3>s;++s)n[4*r+s]=i[s];n[4*r+3]=255*i[3]}return E(n,[256,256,4],[4,0,1])}function s(e,t,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=0;for(var s=e.length,i=0;s>i;++i)for(var o=e[i],u=0;u<o.length;++u)r[o[u]]=n[i];return r}function o(e){for(var t=e.length,n=new Array(t),r=0;t>r;++r)n[r]=e[r][2];return n}function u(e){var t=d(e,k);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.normal.location=4,t}function a(e){var t=d(e,L);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t}function f(e){var t=d(e,A);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.pointSize.location=4,t}function l(e){var t=d(e,O);return t.attributes.position.location=0,t.attributes.id.location=1,t}function c(e){var t=d(e,M);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.pointSize.location=4,t}function h(e){var t=d(e,_);return t.attributes.position.location=0,t}function p(e){var t=e.gl,n=u(t),i=a(t),s=f(t),o=l(t),p=c(t),d=h(t),y=g(t,E(new Uint8Array([255,255,255,255]),[1,1,4]));y.generateMipmap(),y.minFilter=t.LINEAR_MIPMAP_LINEAR,y.magFilter=t.LINEAR;var b=v(t),w=v(t),S=v(t),x=v(t),T=v(t),N=m(t,[{buffer:b,type:t.FLOAT,size:3},{buffer:T,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:w,type:t.FLOAT,size:4},{buffer:S,type:t.FLOAT,size:2},{buffer:x,type:t.FLOAT,size:3}]),C=v(t),k=v(t),L=v(t),A=v(t),O=m(t,[{buffer:C,type:t.FLOAT,size:3},{buffer:A,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:k,type:t.FLOAT,size:4},{buffer:L,type:t.FLOAT,size:2}]),M=v(t),_=v(t),D=v(t),P=v(t),H=v(t),B=m(t,[{buffer:M,type:t.FLOAT,size:3},{buffer:H,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_,type:t.FLOAT,size:4},{buffer:D,type:t.FLOAT,size:2},{buffer:P,type:t.FLOAT,size:1}]),j=v(t),F=m(t,[{buffer:j,type:t.FLOAT,size:3}]),I=new r(t,y,n,i,s,o,p,d,b,T,w,S,x,N,C,A,k,L,O,M,H,_,D,P,B,j,F);return I.update(e),I}var d=e("gl-shader"),v=e("gl-buffer"),m=e("gl-vao"),g=e("gl-texture2d"),y=e("normals"),b=e("gl-mat4/multiply"),w=e("gl-mat4/invert"),E=e("ndarray"),S=e("colormap"),x=e("simplicial-complex-contour"),T=e("typedarray-pool"),N=e("./lib/shaders"),C=e("./lib/closest-point"),k=N.meshShader,L=N.wireShader,A=N.pointShader,O=N.pickShader,M=N.pointPickShader,_=N.contourShader,D=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=r.prototype;P.isOpaque=function(){return this.opacity>=1},P.isTransparent=function(){return this.opacity<1},P.pickSlots=1,P.setPickBase=function(e){this.pickId=e},P.highlight=function(e){if(!e||!this.contourEnable)return void (this.contourCount=0);for(var t=x(this.cells,this.intensity,e.intensity),n=t.cells,r=t.vertexIds,i=t.vertexWeights,s=n.length,o=T.mallocFloat32(6*s),u=0,a=0;s>a;++a)for(var f=n[a],l=0;2>l;++l){var c=f[0];2===f.length&&(c=f[l]);for(var h=r[c][0],p=r[c][1],d=i[c],v=1-d,m=this.positions[h],g=this.positions[p],y=0;3>y;++y)o[u++]=d*m[y]+v*g[y]}this.contourCount=u/3|0,this.contourPositions.update(o.subarray(0,u)),T.free(o)},P.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"contourEnable"in e&&(this.contourEnable=e.contourEnable),"contourColor"in e&&(this.contourColor=e.contourColor),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"opacity"in e&&(this.opacity=e.opacity),e.texture?(this.texture.dispose(),this.texture=g(t,e.texture)):e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(i(e.colormap)),this.texture.generateMipmap());var n=e.cells,r=e.positions;if(r&&n){var u=[],a=[],f=[],l=[],c=[],h=[],p=[],d=[],v=[],m=[],b=[],w=[],E=[],S=[];this.cells=n,this.positions=r;var x=e.vertexNormals,T=e.cellNormals;e.useFacetNormals&&!T&&(T=y.faceNormals(n,r)),T||x||(x=y.vertexNormals(n,r));var N=e.vertexColors,C=e.cellColors,k=e.meshColor||[1,1,1,1],L=e.vertexUVs,A=e.vertexIntensity,O=e.cellUVs,M=e.cellIntensity,_=1/0,D=-1/0;if(!L&&!O)if(A)for(var P=0;P<A.length;++P){var H=A[P];_=Math.min(_,H),D=Math.max(D,H)}else if(M)for(var P=0;P<M.length;++P){var H=M[P];_=Math.min(_,H),D=Math.max(D,H)}else for(var P=0;P<r.length;++P){var H=r[P][2];_=Math.min(_,H),D=Math.max(D,H)}A?this.intensity=A:M?this.intensity=s(n,r.length,M):this.intensity=o(r);var B=e.pointSizes,j=e.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var P=0;P<r.length;++P)for(var F=r[P],I=0;3>I;++I)!isNaN(F[I])&&isFinite(F[I])&&(this.bounds[0][I]=Math.min(this.bounds[0][I],F[I]),this.bounds[1][I]=Math.max(this.bounds[1][I],F[I]));var q=0,R=0,U=0;e:for(var P=0;P<n.length;++P){var z=n[P];switch(z.length){case 1:for(var W=z[0],F=r[W],I=0;3>I;++I)if(isNaN(F[I])||!isFinite(F[I]))continue e;m.push(F[0],F[1],F[2]);var X;X=N?N[W]:C?C[P]:k,3===X.length?b.push(X[0],X[1],X[2],1):b.push(X[0],X[1],X[2],X[3]);var V;V=L?L[W]:A?[(A[W]-_)/(D-_),0]:O?O[P]:M?[(M[P]-_)/(D-_),0]:[(F[2]-_)/(D-_),0],w.push(V[0],V[1]),B?E.push(B[W]):E.push(j),S.push(P),U+=1;break;case 2:for(var I=0;2>I;++I)for(var W=z[I],F=r[W],$=0;3>$;++$)if(isNaN(F[$])||!isFinite(F[$]))continue e;for(var I=0;2>I;++I){var W=z[I],F=r[W];h.push(F[0],F[1],F[2]);var X;X=N?N[W]:C?C[P]:k,3===X.length?p.push(X[0],X[1],X[2],1):p.push(X[0],X[1],X[2],X[3]);var V;V=L?L[W]:A?[(A[W]-_)/(D-_),0]:O?O[P]:M?[(M[P]-_)/(D-_),0]:[(F[2]-_)/(D-_),0],d.push(V[0],V[1]),v.push(P)}R+=1;break;case 3:for(var I=0;3>I;++I)for(var W=z[I],F=r[W],$=0;3>$;++$)if(isNaN(F[$])||!isFinite(F[$]))continue e;for(var I=0;3>I;++I){var W=z[I],F=r[W];u.push(F[0],F[1],F[2]);var X;X=N?N[W]:C?C[P]:k,3===X.length?a.push(X[0],X[1],X[2],1):a.push(X[0],X[1],X[2],X[3]);var V;V=L?L[W]:A?[(A[W]-_)/(D-_),0]:O?O[P]:M?[(M[P]-_)/(D-_),0]:[(F[2]-_)/(D-_),0],l.push(V[0],V[1]);var J;J=x?x[W]:T[P],f.push(J[0],J[1],J[2]),c.push(P)}q+=1}}this.pointCount=U,this.edgeCount=R,this.triangleCount=q,this.pointPositions.update(m),this.pointColors.update(b),this.pointUVs.update(w),this.pointSizes.update(E),this.pointIds.update(new Uint32Array(S)),this.edgePositions.update(h),this.edgeColors.update(p),this.edgeUVs.update(d),this.edgeIds.update(new Uint32Array(v)),this.trianglePositions.update(u),this.triangleColors.update(a),this.triangleUVs.update(l),this.triangleNormals.update(f),this.triangleIds.update(new Uint32Array(c))}},P.drawTransparent=P.draw=function(e){e=e||{};for(var t=this.gl,n=e.model||D,r=e.view||D,i=e.projection||D,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;3>o;++o)s[0][o]=Math.max(s[0][o],this.clipBounds[0][o]),s[1][o]=Math.min(s[1][o],this.clipBounds[1][o]);var u={model:n,view:r,projection:i,clipBounds:s,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,contourColor:this.contourColor,texture:0};this.texture.bind(0);var a=new Array(16);b(a,u.view,u.model),b(a,u.projection,a),w(a,a);for(var o=0;3>o;++o)u.eyePosition[o]=a[12+o]/a[15];for(var f=a[15],o=0;3>o;++o)f+=this.lightPosition[o]*a[4*o+3];for(var o=0;3>o;++o){for(var l=a[12+o],c=0;3>c;++c)l+=a[4*c+o]*this.lightPosition[c];u.lightPosition[o]=l/f}if(this.triangleCount>0){var h=this.triShader;h.bind(),h.uniforms=u,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var h=this.lineShader;h.bind(),h.uniforms=u,this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var h=this.pointShader;h.bind(),h.uniforms=u,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var h=this.contourShader;h.bind(),h.uniforms=u,this.contourVAO.bind(),t.drawArrays(t.LINES,0,this.contourCount),this.contourVAO.unbind()}},P.drawPick=function(e){e=e||{};for(var t=this.gl,n=e.model||D,r=e.view||D,i=e.projection||D,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;3>o;++o)s[0][o]=Math.max(s[0][o],this.clipBounds[0][o]),s[1][o]=Math.min(s[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(i),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var u={model:n,view:r,projection:i,clipBounds:s,pickId:this.pickId/255},a=this.pickShader;if(a.bind(),a.uniforms=u,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var a=this.pointPickShader;a.bind(),a.uniforms=u,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}},P.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;for(var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],r=this.positions,i=new Array(n.length),s=0;s<n.length;++s)i[s]=r[n[s]];var o=C(i,[e.coord[0],this._resolution[1]-e.coord[1]],this._model,this._view,this._projection,this._resolution);if(!o)return null;for(var u=o[2],a=0,s=0;s<n.length;++s)a+=u[s]*this.intensity[n[s]];return{position:o[1],index:n[o[0]],cell:n,cellId:t,intensity:a,dataCoordinate:this.positions[n[o[0]]]}},P.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},t.exports=p},{"./lib/closest-point":89,"./lib/shaders":90,colormap:40,"gl-buffer":59,"gl-mat4/invert":78,"gl-mat4/multiply":80,"gl-shader":138,"gl-texture2d":162,"gl-vao":166,ndarray:189,normals:93,"simplicial-complex-contour":95,"typedarray-pool":217}],92:[function(e,t,n){"use strict";function r(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return t}function i(e,t){for(var n=t.length,i=new Array(n+1),o=0;n>o;++o){for(var u=new Array(n+1),f=0;n>=f;++f)u[f]=e[f][o];i[o]=u}i[n]=new Array(n+1);for(var o=0;n>=o;++o)i[n][o]=1;for(var l=new Array(n+1),o=0;n>o;++o)l[o]=t[o];l[n]=1;var c=s(i,l),h=r(c[n+1]);0===h&&(h=1);for(var p=new Array(n+1),o=0;n>=o;++o)p[o]=r(c[o])/h;return p}t.exports=i;var s=e("robust-linear-solve")},{"robust-linear-solve":192}],93:[function(e,t,n){var r=1e-6;n.vertexNormals=function(e,t){for(var n=t.length,i=new Array(n),s=0;n>s;++s)i[s]=[0,0,0];for(var s=0;s<e.length;++s)for(var o=e[s],u=0,a=o[o.length-1],f=o[0],l=0;l<o.length;++l){u=a,a=f,f=o[(l+1)%o.length];for(var c=t[u],h=t[a],p=t[f],d=new Array(3),v=0,m=new Array(3),g=0,y=0;3>y;++y)d[y]=c[y]-h[y],v+=d[y]*d[y],m[y]=p[y]-h[y],g+=m[y]*m[y];if(v*g>r)for(var b=i[a],w=1/Math.sqrt(v*g),y=0;3>y;++y){var E=(y+1)%3,S=(y+2)%3;b[y]+=w*(m[E]*d[S]-m[S]*d[E])}}for(var s=0;n>s;++s){for(var b=i[s],x=0,y=0;3>y;++y)x+=b[y]*b[y];if(x>r)for(var w=1/Math.sqrt(x),y=0;3>y;++y)b[y]*=w;else for(var y=0;3>y;++y)b[y]=0}return i},n.faceNormals=function(e,t){for(var n=e.length,i=new Array(n),s=0;n>s;++s){for(var o=e[s],u=new Array(3),a=0;3>a;++a)u[a]=t[o[a]];for(var f=new Array(3),l=new Array(3),a=0;3>a;++a)f[a]=u[1][a]-u[0][a],l[a]=u[2][a]-u[0][a];for(var c=new Array(3),h=0,a=0;3>a;++a){var p=(a+1)%3,d=(a+2)%3;c[a]=f[p]*l[d]-f[d]*l[p],h+=c[a]*c[a]}h=h>r?1/Math.sqrt(h):0;for(var a=0;3>a;++a)c[a]*=h;i[s]=c}return i}},{}],94:[function(e,t,n){"use strict";function r(e,t,n,r,u){i.length<r.length&&(i=new Float64Array(r.length),s=new Float64Array(r.length),o=new Float64Array(r.length));for(var f=0;f<r.length;++f)i[f]=e[f]-r[f],s[f]=t[f]-e[f],o[f]=n[f]-e[f];for(var l=0,c=0,h=0,p=0,d=0,v=0,f=0;f<r.length;++f){var m=s[f],g=o[f],y=i[f];l+=m*m,c+=m*g,h+=g*g,p+=y*m,d+=y*g,v+=y*y}var b,w=Math.abs(l*h-c*c),E=c*d-h*p,S=c*p-l*d;if(w>=E+S)if(0>E)0>S&&0>p?(S=0,-p>=l?(E=1,b=l+2*p+v):(E=-p/l,b=p*E+v)):(E=0,d>=0?(S=0,b=v):-d>=h?(S=1,b=h+2*d+v):(S=-d/h,b=d*S+v));else if(0>S)S=0,p>=0?(E=0,b=v):-p>=l?(E=1,b=l+2*p+v):(E=-p/l,b=p*E+v);else{var x=1/w;E*=x,S*=x,b=E*(l*E+c*S+2*p)+S*(c*E+h*S+2*d)+v}else{var T,N,C,k;0>E?(T=c+p,N=h+d,N>T?(C=N-T,k=l-2*c+h,C>=k?(E=1,S=0,b=l+2*p+v):(E=C/k,S=1-E,b=E*(l*E+c*S+2*p)+S*(c*E+h*S+2*d)+v)):(E=0,0>=N?(S=1,b=h+2*d+v):d>=0?(S=0,b=v):(S=-d/h,b=d*S+v))):0>S?(T=c+d,N=l+p,N>T?(C=N-T,k=l-2*c+h,C>=k?(S=1,E=0,b=h+2*d+v):(S=C/k,E=1-S,b=E*(l*E+c*S+2*p)+S*(c*E+h*S+2*d)+v)):(S=0,0>=N?(E=1,b=l+2*p+v):p>=0?(E=0,b=v):(E=-p/l,b=p*E+v))):(C=h+d-c-p,0>=C?(E=0,S=1,b=h+2*d+v):(k=l-2*c+h,C>=k?(E=1,S=0,b=l+2*p+v):(E=C/k,S=1-E,b=E*(l*E+c*S+2*p)+S*(c*E+h*S+2*d)+v)))}for(var L=1-E-S,f=0;f<r.length;++f)u[f]=L*e[f]+E*t[f]+S*n[f];return 0>b?0:b}var i=new Float64Array(4),s=new Float64Array(4),o=new Float64Array(4);t.exports=r},{}],95:[function(e,t,n){"use strict";function r(e){for(var t=e.length,n=0,r=0;t>r;++r)n=0|Math.max(n,e[r].length);return n-1}function i(e,t){for(var n=e.length,r=c.mallocUint8(n),i=0;n>i;++i)r[i]=e[i]<t|0;return r}function s(e,t){for(var n=e.length,r=t*(t+1)/2*n|0,i=c.mallocUint32(2*r),s=0,o=0;n>o;++o)for(var u=e[o],t=u.length,a=0;t>a;++a)for(var f=0;a>f;++f){var p=u[f],d=u[a];i[s++]=0|Math.min(p,d),i[s++]=0|Math.max(p,d)}var v=s/2|0;h(l(i,[v,2]));for(var m=2,o=2;s>o;o+=2)(i[o-2]!==i[o]||i[o-1]!==i[o+1])&&(i[m++]=i[o],i[m++]=i[o+1]);return l(i,[m/2|0,2])}function o(e,t,n,r){for(var i=e.data,s=e.shape[0],o=c.mallocDouble(s),u=0,a=0;s>a;++a){var f=i[2*a],h=i[2*a+1];if(n[f]!==n[h]){var p=t[f],d=t[h];i[2*u]=f,i[2*u+1]=h,o[u++]=(d-r)/(d-p)}}return e.shape[0]=u,l(o,[u])}function u(e,t){var n=c.mallocInt32(2*t),r=e.shape[0],i=e.data;n[0]=0;for(var s=0,o=0;r>o;++o){var u=i[2*o];if(u!==s){for(n[2*s+1]=o;++s<u;)n[2*s]=o,n[2*s+1]=o;n[2*s]=o}}for(n[2*s+1]=r;++s<t;)n[2*s]=n[2*s+1]=r;return n}function a(e){for(var t=0|e.shape[0],n=e.data,r=new Array(t),i=0;t>i;++i)r[i]=[n[2*i],n[2*i+1]];return r}function f(e,t,n,f){n=n||0,"undefined"==typeof f&&(f=r(e));var l=e.length;if(0===l||1>f)return{cells:[],vertexIds:[],vertexWeights:[]};var h=i(t,+n),v=s(e,f),m=o(v,t,h,+n),g=u(v,0|t.length),y=p(f)(e,v.data,g,h),b=a(v),w=[].slice.call(m.data,0,m.shape[0]);return c.free(h),c.free(v.data),c.free(m.data),c.free(g),{cells:y,vertexIds:b,vertexWeights:w}}t.exports=f;var l=e("ndarray"),c=e("typedarray-pool"),h=e("ndarray-sort"),p=e("./lib/codegen")},{"./lib/codegen":96,ndarray:189,"ndarray-sort":99,"typedarray-pool":217}],96:[function(e,t,n){"use strict";function r(e){function t(e){if(!(e.length<=0)){l.push("R.push(");for(var t=0;t<e.length;++t){var n=e[t];t>0&&l.push(","),l.push("[");for(var r=0;r<n.length;++r){var i=n[r];r>0&&l.push(","),l.push("B(C,E,c[",i[0],"],c[",i[1],"])")}l.push("]")}l.push(");")}}var n=0,r=new Array(e+1);r[0]=[[]];for(var i=1;e>=i;++i)for(var u=r[i]=o(i),f=0;f<u.length;++f)n=Math.max(n,u[i].length);for(var l=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",e,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"],i=e+1;i>1;--i){e+1>i&&l.push("else "),l.push("if(l===",i,"){");for(var c=[],f=0;i>f;++f)c.push("(S[c["+f+"]]<<"+f+")");l.push("var M=",c.join("+"),";if(M===0||M===",(1<<i)-1,"){continue}switch(M){");for(var u=r[i-1],f=0;f<u.length;++f)l.push("case ",f,":"),t(u[f]),l.push("break;");l.push("}}")}l.push("}return R;};return getContour",e,"d");var h=new Function("pool",l.join(""));return h(s)}function i(e){var t=u[e];return t||(t=u[e]=r(e)),t}t.exports=i;var s=e("typedarray-pool"),o=e("marching-simplex-table"),u={}},{"marching-simplex-table":97,"typedarray-pool":217}],97:[function(e,t,n){"use strict";function r(e,t,n){for(var r=new Array(e),i=0;e>i;++i)r[i]=0,i===t&&(r[i]+=.5),i===n&&(r[i]+=.5);return r}function i(e,t){if(0===t||t===(1<<e+1)-1)return[];for(var n=[],i=[],s=0;e>=s;++s)if(t&1<<s){n.push(r(e,s-1,s-1)),i.push(null);for(var u=0;e>=u;++u)~t&1<<u&&(n.push(r(e,s-1,u-1)),i.push([s,u]))}var a=o(n),f=[];e:for(var s=0;s<a.length;++s){for(var l=a[s],c=[],u=0;u<l.length;++u){if(!i[l[u]])continue e;c.push(i[l[u]].slice())}f.push(c)}return f}function s(e){for(var t=1<<e+1,n=new Array(t),r=0;t>r;++r)n[r]=i(e,r);return n}t.exports=s;var o=e("convex-hull")},{"convex-hull":42}],98:[function(e,t,n){"use strict";function r(e){switch(e){case"uint8":return[a.mallocUint8,a.freeUint8];case"uint16":return[a.mallocUint16,a.freeUint16];case"uint32":return[a.mallocUint32,a.freeUint32];case"int8":return[a.mallocInt8,a.freeInt8];case"int16":return[a.mallocInt16,a.freeInt16];case"int32":return[a.mallocInt32,a.freeInt32];case"float32":return[a.mallocFloat,a.freeFloat];case"float64":return[a.mallocDouble,a.freeDouble];default:return null}}function i(e){for(var t=[],n=0;e>n;++n)t.push("s"+n);for(var n=0;e>n;++n)t.push("n"+n);for(var n=1;e>n;++n)t.push("d"+n);for(var n=1;e>n;++n)t.push("e"+n);for(var n=1;e>n;++n)t.push("f"+n);return t}function s(e,t){function n(e){return"generic"===t?["data.get(",e,")"].join(""):["data[",e,"]"].join("")}function s(e,n){return"generic"===t?["data.set(",e,",",n,")"].join(""):["data[",e,"]=",n].join("")}var o=["'use strict'"],u=["ndarrayInsertionSort",e.join("d"),t].join(""),a=["left","right","data","offset"].concat(i(e.length)),f=r(t),l=["i,j,cptr,ptr=left*s0+offset"];if(e.length>1){for(var c=[],h=1;h<e.length;++h)l.push("i"+h),c.push("n"+h);f?l.push("scratch=malloc("+c.join("*")+")"):l.push("scratch=new Array("+c.join("*")+")"),l.push("dptr","sptr","a","b")}else l.push("scratch");if(o.push(["function ",u,"(",a.join(","),"){var ",l.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),e.length>1){o.push("dptr=0;sptr=ptr");for(var h=e.length-1;h>=0;--h){var p=e[h];0!==p&&o.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""))}o.push("scratch[dptr++]=",n("sptr"));for(var h=0;h<e.length;++h){var p=e[h];0!==p&&o.push("sptr+=d"+p,"}")}o.push("__g:while(j-->left){","dptr=0","sptr=cptr-s0");for(var h=1;h<e.length;++h)1===h&&o.push("__l:"),o.push(["for(i",h,"=0;i",h,"<n",h,";++i",h,"){"].join(""));o.push(["a=",n("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));for(var h=e.length-1;h>=1;--h)o.push("sptr+=e"+h,"dptr+=f"+h,"}");o.push("dptr=cptr;sptr=cptr-s0");for(var h=e.length-1;h>=0;--h){var p=e[h];0!==p&&o.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""))}o.push(s("dptr",n("sptr")));for(var h=0;h<e.length;++h){var p=e[h];0!==p&&o.push(["dptr+=d",p,";sptr+=d",p].join(""),"}")}o.push("cptr-=s0\n}"),o.push("dptr=cptr;sptr=0");for(var h=e.length-1;h>=0;--h){var p=e[h];0!==p&&o.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""))}o.push(s("dptr","scratch[sptr++]"));for(var h=0;h<e.length;++h){var p=e[h];0!==p&&o.push("dptr+=d"+p,"}")}}else o.push("scratch="+n("ptr"),"while((j-->left)&&("+n("cptr-s0")+">scratch)){",s("cptr",n("cptr-s0")),"cptr-=s0","}",s("cptr","scratch"));if(o.push("}"),e.length>1&&f&&o.push("free(scratch)"),o.push("} return "+u),f){var d=new Function("malloc","free",o.join("\n"));return d(f[0],f[1])}var d=new Function(o.join("\n"));return d()}function o(e,t,n){function s(e){return["(offset+",e,"*s0)"].join("")}function o(e){return"generic"===t?["data.get(",e,")"].join(""):["data[",e,"]"].join("")}function u(e,n){return"generic"===t?["data.set(",e,",",n,")"].join(""):["data[",e,"]=",n].join("")}function a(t,n,r){if(1===t.length)E.push("ptr0="+s(t[0]));else for(var i=0;i<t.length;++i)E.push(["b_ptr",i,"=s0*",t[i]].join(""));n&&E.push("pivot_ptr=0"),E.push("ptr_shift=offset");for(var i=e.length-1;i>=0;--i){var o=e[i];0!==o&&E.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""))}if(t.length>1)for(var i=0;i<t.length;++i)E.push(["ptr",i,"=b_ptr",i,"+ptr_shift"].join(""));E.push(r),n&&E.push("++pivot_ptr");for(var i=0;i<e.length;++i){var o=e[i];0!==o&&(t.length>1?E.push("ptr_shift+=d"+o):E.push("ptr0+=d"+o),E.push("}"))}}function l(t,n,r,i){if(1===n.length)E.push("ptr0="+s(n[0]));else{for(var o=0;o<n.length;++o)E.push(["b_ptr",o,"=s0*",n[o]].join(""));E.push("ptr_shift=offset")}r&&E.push("pivot_ptr=0"),t&&E.push(t+":");for(var o=1;o<e.length;++o)E.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""));if(n.length>1)for(var o=0;o<n.length;++o)E.push(["ptr",o,"=b_ptr",o,"+ptr_shift"].join(""));E.push(i);for(var o=e.length-1;o>=1;--o)r&&E.push("pivot_ptr+=f"+o),n.length>1?E.push("ptr_shift+=e"+o):E.push("ptr0+=e"+o),E.push("}")}function c(){e.length>1&&T&&E.push("free(pivot1)","free(pivot2)")}function h(t,n){var r="el"+t,i="el"+n;if(e.length>1){var u="__l"+ ++N;l(u,[r,i],!1,["comp=",o("ptr0"),"-",o("ptr1"),"\n","if(comp>0){tmp0=",r,";",r,"=",i,";",i,"=tmp0;break ",u,"}\n","if(comp<0){break ",u,"}"].join(""))}else E.push(["if(",o(s(r)),">",o(s(i)),"){tmp0=",r,";",r,"=",i,";",i,"=tmp0}"].join(""))}function p(t,n){e.length>1?a([t,n],!1,u("ptr0",o("ptr1"))):E.push(u(s(t),o(s(n))))}function d(t,n,r){if(e.length>1){var i="__l"+ ++N;l(i,[n],!0,[t,"=",o("ptr0"),"-pivot",r,"[pivot_ptr]\n","if(",t,"!==0){break ",i,"}"].join(""))}else E.push([t,"=",o(s(n)),"-pivot",r].join(""))}function v(t,n){e.length>1?a([t,n],!1,["tmp=",o("ptr0"),"\n",u("ptr0",o("ptr1")),"\n",u("ptr1","tmp")].join("")):E.push(["ptr0=",s(t),"\n","ptr1=",s(n),"\n","tmp=",o("ptr0"),"\n",u("ptr0",o("ptr1")),"\n",u("ptr1","tmp")].join(""))}function m(t,n,r){e.length>1?(a([t,n,r],!1,["tmp=",o("ptr0"),"\n",u("ptr0",o("ptr1")),"\n",u("ptr1",o("ptr2")),"\n",u("ptr2","tmp")].join("")),E.push("++"+n,"--"+r)):E.push(["ptr0=",s(t),"\n","ptr1=",s(n),"\n","ptr2=",s(r),"\n","++",n,"\n","--",r,"\n","tmp=",o("ptr0"),"\n",u("ptr0",o("ptr1")),"\n",u("ptr1",o("ptr2")),"\n",u("ptr2","tmp")].join(""))}function g(e,t){v(e,t),E.push("--"+t)}function y(t,n,r){e.length>1?a([t,n],!0,[u("ptr0",o("ptr1")),"\n",u("ptr1",["pivot",r,"[pivot_ptr]"].join(""))].join("")):E.push(u(s(t),o(s(n))),u(s(n),"pivot"+r))}function b(t,n){E.push(["if((",n,"-",t,")<=",f,"){\n","insertionSort(",t,",",n,",data,offset,",i(e.length).join(","),")\n","}else{\n",S,"(",t,",",n,",data,offset,",i(e.length).join(","),")\n","}"].join(""))}function w(t,n,r){e.length>1?(E.push(["__l",++N,":while(true){"].join("")),a([t],!0,["if(",o("ptr0"),"!==pivot",n,"[pivot_ptr]){break __l",N,"}"].join("")),E.push(r,"}")):E.push(["while(",o(s(t)),"===pivot",n,"){",r,"}"].join(""))}var E=["'use strict'"],S=["ndarrayQuickSort",e.join("d"),t].join(""),x=["left","right","data","offset"].concat(i(e.length)),T=r(t),N=0;E.push(["function ",S,"(",x.join(","),"){"].join(""));var C=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(e.length>1){for(var k=[],L=1;L<e.length;++L)k.push("n"+L),C.push("i"+L);for(var L=0;8>L;++L)C.push("b_ptr"+L);C.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+k.join("*")),T?C.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):C.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else C.push("pivot1","pivot2");if(E.push("var "+C.join(",")),h(1,2),h(4,5),h(1,3),h(2,3),h(1,4),h(3,4),h(2,5),h(2,3),h(4,5),e.length>1?a(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",o("ptr1"),"\n","pivot2[pivot_ptr]=",o("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",o("ptr0"),"\n","y=",o("ptr2"),"\n","z=",o("ptr4"),"\n",u("ptr5","x"),"\n",u("ptr6","y"),"\n",u("ptr7","z")].join("")):E.push(["pivot1=",o(s("el2")),"\n","pivot2=",o(s("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",o(s("el1")),"\n","y=",o(s("el3")),"\n","z=",o(s("el5")),"\n",u(s("index1"),"x"),"\n",u(s("index3"),"y"),"\n",u(s("index5"),"z")].join("")),p("index2","left"),p("index4","right"),E.push("if(pivots_are_equal){"),E.push("for(k=less;k<=great;++k){"),d("comp","k",1),E.push("if(comp===0){continue}"),E.push("if(comp<0){"),E.push("if(k!==less){"),v("k","less"),E.push("}"),E.push("++less"),E.push("}else{"),E.push("while(true){"),d("comp","great",1),E.push("if(comp>0){"),E.push("great--"),E.push("}else if(comp<0){"),m("k","less","great"),E.push("break"),E.push("}else{"),g("k","great"),E.push("break"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),E.push("}else{"),E.push("for(k=less;k<=great;++k){"),d("comp_pivot1","k",1),E.push("if(comp_pivot1<0){"),E.push("if(k!==less){"),v("k","less"),E.push("}"),E.push("++less"),E.push("}else{"),d("comp_pivot2","k",2),E.push("if(comp_pivot2>0){"),E.push("while(true){"),d("comp","great",2),E.push("if(comp>0){"),E.push("if(--great<k){break}"),E.push("continue"),E.push("}else{"),d("comp","great",1),E.push("if(comp<0){"),m("k","less","great"),E.push("}else{"),g("k","great"),E.push("}"),E.push("break"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),y("left","(less-1)",1),y("right","(great+1)",2),b("left","(less-2)"),b("(great+2)","right"),E.push("if(pivots_are_equal){"),c(),E.push("return"),E.push("}"),E.push("if(less<index1&&great>index5){"),w("less",1,"++less"),w("great",2,"--great"),E.push("for(k=less;k<=great;++k){"),d("comp_pivot1","k",1),E.push("if(comp_pivot1===0){"),E.push("if(k!==less){"),v("k","less"),E.push("}"),E.push("++less"),E.push("}else{"),d("comp_pivot2","k",2),E.push("if(comp_pivot2===0){"),E.push("while(true){"),d("comp","great",2),E.push("if(comp===0){"),E.push("if(--great<k){break}"),E.push("continue"),E.push("}else{"),d("comp","great",1),E.push("if(comp<0){"),m("k","less","great"),E.push("}else{"),g("k","great"),E.push("}"),E.push("break"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),c(),b("less","great"),E.push("}return "+S),e.length>1&&T){var A=new Function("insertionSort","malloc","free",E.join("\n"));return A(n,T[0],T[1])}var A=new Function("insertionSort",E.join("\n"));return A(n)}function u(e,t){var n=["'use strict'"],r=["ndarraySortWrapper",e.join("d"),t].join(""),u=["array"];n.push(["function ",r,"(",u.join(","),"){"].join(""));for(var a=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],l=0;l<e.length;++l)a.push(["s",l,"=stride[",l,"]|0,n",l,"=shape[",l,"]|0"].join(""));for(var c=new Array(e.length),h=[],l=0;l<e.length;++l){var p=e[l];0!==p&&(0===h.length?c[p]="1":c[p]=h.join("*"),h.push("n"+p))}for(var d=-1,v=-1,l=0;l<e.length;++l){var m=e[l];0!==m&&(d>0?a.push(["d",m,"=s",m,"-d",d,"*n",d].join("")):a.push(["d",m,"=s",m].join("")),d=m);var p=e.length-1-l;0!==p&&(v>0?a.push(["e",p,"=s",p,"-e",v,"*n",v,",f",p,"=",c[p],"-f",v,"*n",v].join("")):a.push(["e",p,"=s",p,",f",p,"=",c[p]].join("")),v=p)}n.push("var "+a.join(","));var g=["0","n0-1","data","offset"].concat(i(e.length));n.push(["if(n0<=",f,"){","insertionSort(",g.join(","),")}else{","quickSort(",g.join(","),")}"].join("")),n.push("}return "+r);var y=new Function("insertionSort","quickSort",n.join("\n")),b=s(e,t),w=o(e,t,b);return y(b,w)}var a=e("typedarray-pool"),f=32;t.exports=u},{"typedarray-pool":217}],99:[function(e,t,n){"use strict";function r(e){var t=e.order,n=e.dtype,r=[t,n],o=r.join(":"),u=s[o];return u||(s[o]=u=i(t,n)),u(e),e}var i=e("./lib/compile_sort.js"),s={};t.exports=r},{"./lib/compile_sort.js":98}],100:[function(e,t,n){"use strict";function r(e,t,n){this.plot=e,this.vbo=t,this.shader=n}function i(e){var t=e.gl,n=s(t,[0,0,0,1,1,0,1,1]),i=o(t,u.boxVert,u.lineFrag);return new r(e,n,i)}t.exports=i;var s=e("gl-buffer"),o=e("gl-shader"),u=e("./shaders"),a=r.prototype;a.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},a.drawBox=function(){var e=[0,0],t=[0,0];return function(n,r,i,s,o){var u=this.plot,a=this.shader,f=u.gl;e[0]=n,e[1]=r,t[0]=i,t[1]=s,a.uniforms.lo=e,a.uniforms.hi=t,a.uniforms.color=o,f.drawArrays(f.TRIANGLE_STRIP,0,4)}}(),a.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":103,"gl-buffer":59,"gl-shader":138}],101:[function(e,t,n){"use strict";function r(e,t,n,r){this.plot=e,this.vbo=t,this.shader=n,this.tickShader=r,this.ticks=[[],[]]}function i(e,t){return e-t}function s(e){var t=e.gl,n=o(t),i=u(t,f.gridVert,f.gridFrag),s=u(t,f.tickVert,f.gridFrag),a=new r(e,n,i,s);return a}t.exports=s;var o=e("gl-buffer"),u=e("gl-shader"),a=e("binary-search-bounds"),f=e("./shaders"),l=r.prototype;l.draw=function(){var e=[0,0],t=[0,0],n=[0,0];return function(){for(var r=this.plot,i=this.vbo,s=this.shader,o=this.ticks,u=r.gl,a=r._tickBounds,f=r.dataBox,l=r.viewBox,c=r.gridLineWidth,h=r.gridLineColor,p=r.gridLineEnable,d=r.pixelRatio,v=0;2>v;++v){var m=a[v],g=a[v+2],y=g-m,b=.5*(f[v+2]+f[v]),w=f[v+2]-f[v];t[v]=2*y/w,e[v]=2*(m-b)/w}s.bind(),i.bind(),s.attributes.dataCoord.pointer(),s.uniforms.dataShift=e,s.uniforms.dataScale=t;for(var E=0,v=0;2>v;++v){n[0]=n[1]=0,n[v]=1,s.uniforms.dataAxis=n,s.uniforms.lineWidth=c[v]/(l[v+2]-l[v])*d,s.uniforms.color=h[v];var S=6*o[v].length;p[v]&&u.drawArrays(u.TRIANGLES,E,S),E+=S}}}(),l.drawTickMarks=function(){var e=[0,0],t=[0,0],n=[1,0],r=[0,1],s=[0,0],o=[0,0];return function(){for(var u=this.plot,f=this.vbo,l=this.tickShader,c=this.ticks,h=u.gl,p=u._tickBounds,d=u.dataBox,v=u.viewBox,m=u.pixelRatio,g=u.screenBox,y=g[2]-g[0],b=g[3]-g[1],w=v[2]-v[0],E=v[3]-v[1],S=0;2>S;++S){var x=p[S],T=p[S+2],N=T-x,C=.5*(d[S+2]+d[S]),k=d[S+2]-d[S];t[S]=2*N/k,e[S]=2*(x-C)/k}t[0]*=w/y,e[0]*=w/y,t[1]*=E/b,e[1]*=E/b,l.bind(),f.bind(),l.attributes.dataCoord.pointer();var L=l.uniforms;L.dataShift=e,L.dataScale=t;var A=u.tickMarkLength,O=u.tickMarkWidth,M=u.tickMarkColor,_=0,D=6*c[0].length,P=Math.min(a.ge(c[0],(d[0]-p[0])/(p[2]-p[0]),i),c[0].length),H=Math.min(a.gt(c[0],(d[2]-p[0])/(p[2]-p[0]),i),c[0].length),B=_+6*P,j=6*Math.max(0,H-P),F=Math.min(a.ge(c[1],(d[1]-p[1])/(p[3]-p[1]),i),c[1].length),I=Math.min(a.gt(c[1],(d[3]-p[1])/(p[3]-p[1]),i),c[1].length),q=D+6*F,R=6*Math.max(0,I-F);s[0]=2*(v[0]-A[1])/y-1,s[1]=(v[3]+v[1])/b-1,o[0]=A[1]*m/y,o[1]=O[1]*m/b,L.color=M[1],L.tickScale=o,L.dataAxis=r,L.screenOffset=s,h.drawArrays(h.TRIANGLES,q,R),s[0]=(v[2]+v[0])/y-1,s[1]=2*(v[1]-A[0])/b-1,o[0]=O[0]*m/y,o[1]=A[0]*m/b,L.color=M[0],L.tickScale=o,L.dataAxis=n,L.screenOffset=s,h.drawArrays(h.TRIANGLES,B,j),s[0]=2*(v[2]+A[3])/y-1,s[1]=(v[3]+v[1])/b-1,o[0]=A[3]*m/y,o[1]=O[3]*m/b,L.color=M[3],L.tickScale=o,L.dataAxis=r,L.screenOffset=s,h.drawArrays(h.TRIANGLES,q,R),s[0]=(v[2]+v[0])/y-1,s[1]=2*(v[3]+A[2])/b-1,o[0]=O[2]*m/y,o[1]=A[2]*m/b,L.color=M[2],L.tickScale=o,L.dataAxis=n,L.screenOffset=s,h.drawArrays(h.TRIANGLES,B,j)}}(),l.update=function(){var e=[1,1,-1,-1,1,-1],t=[1,-1,1,1,-1,-1];return function(n){for(var r=n.ticks,i=n.bounds,s=new Float32Array(18*(r[0].length+r[1].length)),o=(this.plot.zeroLineEnable,0),u=[[],[]],a=0;2>a;++a)for(var f=u[a],l=r[a],c=i[a],h=i[a+2],p=0;p<l.length;++p){var d=(l[p].x-c)/(h-c);f.push(d);for(var v=0;6>v;++v)s[o++]=d,s[o++]=e[v],s[o++]=t[v]}this.ticks=u,this.vbo.update(s)}}(),l.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":103,"binary-search-bounds":105,"gl-buffer":59,"gl-shader":138}],102:[function(e,t,n){"use strict";function r(e,t,n){this.plot=e,this.vbo=t,this.shader=n}function i(e){var t=e.gl,n=s(t,[-1,-1,-1,1,1,-1,1,1]),i=o(t,u.lineVert,u.lineFrag),a=new r(e,n,i);return a}t.exports=i;var s=e("gl-buffer"),o=e("gl-shader"),u=e("./shaders"),a=r.prototype;a.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},a.drawLine=function(){var e=[0,0],t=[0,0];return function(n,r,i,s,o,u){var a=this.plot,f=this.shader,l=a.gl;e[0]=n,e[1]=r,t[0]=i,t[1]=s,f.uniforms.start=e,f.uniforms.end=t,f.uniforms.width=o*a.pixelRatio,f.uniforms.color=u,l.drawArrays(l.TRIANGLE_STRIP,0,4)}}(),a.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":103,"gl-buffer":59,"gl-shader":138}],103:[function(e,t,n){"use strict";var r="#define GLSLIFY 1\nprecision lowp float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n";t.exports={lineVert:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n",lineFrag:r,textVert:"#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n",textFrag:r,gridVert:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n",gridFrag:r,boxVert:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n",tickVert:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"}},{}],104:[function(e,t,n){"use strict";function r(e,t,n){this.plot=e,this.vbo=t,this.shader=n,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}function i(e){var t=e.gl,n=s(t),i=o(t,f.textVert,f.textFrag),u=new r(e,n,i);return u}t.exports=i;var s=e("gl-buffer"),o=e("gl-shader"),u=e("text-cache"),a=e("binary-search-bounds"),f=e("./shaders"),l=r.prototype;l.drawTicks=function(){var e=[0,0],t=[0,0],n=[0,0];return function(r){var i=this.plot,s=this.shader,o=this.tickX[r],u=this.tickOffset[r],f=i.gl,l=i.viewBox,c=i.dataBox,h=i.screenBox,p=i.pixelRatio,d=i.tickEnable,v=i.tickPad,m=i.tickColor,g=i.tickAngle,y=(i.tickMarkLength,i.labelEnable),b=i.labelPad,w=i.labelColor,E=i.labelAngle,S=this.labelOffset[r],x=this.labelCount[r],T=a.lt(o,c[r]),N=a.le(o,c[r+2]);e[0]=e[1]=0,e[r]=1,t[r]=(l[2+r]+l[r])/(h[2+r]-h[r])-1;var C=2/h[2+(1^r)]-h[1^r];t[1^r]=C*l[1^r]-1,d[r]&&(t[1^r]-=C*p*v[r],N>T&&(s.uniforms.dataAxis=e,s.uniforms.screenOffset=t,s.uniforms.color=m[r],s.uniforms.angle=g[r],f.drawArrays(f.TRIANGLES,u[T],u[N]-u[T]))),y[r]&&(t[1^r]-=C*p*b[r],s.uniforms.dataAxis=n,s.uniforms.screenOffset=t,s.uniforms.color=w[r],s.uniforms.angle=E[r],f.drawArrays(f.TRIANGLES,S,x)),t[1^r]=C*l[2+(1^r)]-1,d[r+2]&&(t[1^r]+=C*p*v[r+2],N>T&&(s.uniforms.dataAxis=e,s.uniforms.screenOffset=t,s.uniforms.color=m[r+2],s.uniforms.angle=g[r+2],f.drawArrays(f.TRIANGLES,u[T],u[N]-u[T]))),y[r+2]&&(t[1^r]+=C*p*b[r+2],s.uniforms.dataAxis=n,s.uniforms.screenOffset=t,s.uniforms.color=w[r+2],s.uniforms.angle=E[r+2],f.drawArrays(f.TRIANGLES,S,x))}}(),l.drawTitle=function(){var e=[0,0],t=[0,0];return function(){for(var n=this.plot,r=this.shader,i=n.gl,s=n.screenBox,o=n.titleCenter,u=n.titleAngle,a=n.titleColor,o=n.titleCenter,f=n.pixelRatio,l=0;2>l;++l)t[l]=2*(o[l]*f-s[l])/(s[2+l]-s[l])-1;r.bind(),r.uniforms.dataAxis=e,r.uniforms.screenOffset=t,r.uniforms.angle=u,r.uniforms.color=a,i.drawArrays(i.TRIANGLES,this.titleOffset,this.titleCount)}}(),l.bind=function(){var e=[0,0],t=[0,0],n=[0,0];return function(){var r=this.plot,i=this.shader,s=r._tickBounds,o=r.dataBox,u=r.screenBox,a=r.viewBox;i.bind();for(var f=0;2>f;++f){var l=s[f],c=s[f+2],h=c-l,p=.5*(o[f+2]+o[f]),d=o[f+2]-o[f],v=a[f],m=a[f+2],g=m-v,y=u[f],b=u[f+2],w=b-y;t[f]=2*h/d*g/w,e[f]=2*(l-p)/d*g/w}n[1]=2*r.pixelRatio/(u[3]-u[1]),n[0]=n[1]*(u[3]-u[1])/(u[2]-u[0]),i.uniforms.dataScale=t,i.uniforms.dataShift=e,i.uniforms.textScale=n,this.vbo.bind(),i.attributes.textCoordinate.pointer()}}(),l.update=function(e){for(var t=[],n=e.ticks,r=e.bounds,i=0;2>i;++i){for(var s=[Math.floor(t.length/3)],o=[-1/0],a=n[i],f=0;f<a.length;++f){for(var l=a[f],c=l.x,h=l.text,p=l.font||"sans-serif",d=l.fontSize||12,v=u(p,h).data,m=1/(r[i+2]-r[i]),g=r[i],y=0;y<v.length;y+=2)t.push(v[y]*d,-v[y+1]*d,(c-g)*m);s.push(Math.floor(t.length/3)),o.push(c)}this.tickOffset[i]=s,this.tickX[i]=o}for(var i=0;2>i;++i){this.labelOffset[i]=Math.floor(t.length/3);for(var v=u(e.labelFont[i],e.labels[i]).data,d=e.labelSize[i],f=0;f<v.length;f+=2)t.push(v[f]*d,-v[f+1]*d,0);this.labelCount[i]=Math.floor(t.length/3)-this.labelOffset[i]}this.titleOffset=Math.floor(t.length/3);for(var v=u(e.titleFont,e.title).data,d=e.titleSize,f=0;f<v.length;f+=2)t.push(v[f]*d,-v[f+1]*d,0);this.titleCount=Math.floor(t.length/3)-this.titleOffset,this.vbo.update(t)},l.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":103,"binary-search-bounds":105,"gl-buffer":59,"gl-shader":138,"text-cache":212}],105:[function(e,t,n){"use strict";function r(e,t,n,r,i){var s=["function ",e,"(a,l,h,",r.join(","),"){",i?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?t.indexOf("c")<0?s.push(";if(x===y){return m}else if(x<=y){"):s.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):s.push(";if(",t,"){i=m;"),n?s.push("l=m+1}else{h=m-1}"):s.push("h=m-1}else{l=m+1}"),s.push("}"),i?s.push("return -1};"):s.push("return i};"),s.join("")}function i(e,t,n,i){var s=new Function([r("A","x"+e+"y",t,["y"],i),r("P","c(x,y)"+e+"0",t,["y","c"],i),"function dispatchBsearch",n,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",n].join(""));return s()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],106:[function(e,t,n){"use strict";function r(e,t){this.gl=e,this.pickBuffer=t,this.screenBox=[0,0,e.drawingBufferWidth,e.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}function i(e){for(var t=e.slice(),n=0;n<t.length;++n)t[n]=t[n].slice();return t}function s(e,t){return e.x-t.x}function o(e){var t=e.gl,n=u(t,[t.drawingBufferWidth,t.drawingBufferHeight]),i=new r(t,n);return i.grid=a(i),i.text=f(i),i.line=l(i),i.box=c(i),i.update(e),i}t.exports=o;var u=e("gl-select-static"),a=e("./lib/grid"),f=e("./lib/text"),l=e("./lib/line"),c=e("./lib/box"),h=r.prototype;h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){return function(){var e=this.gl,t=this.screenBox,n=this.viewBox,r=this.dataBox,i=this.pixelRatio,s=this.grid,o=this.line,u=this.text,a=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){this.dirty=!1,e.bindFramebuffer(e.FRAMEBUFFER,null),e.enable(e.SCISSOR_TEST),e.disable(e.DEPTH_TEST),e.depthFunc(e.LESS),e.depthMask(!1),e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD,e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);var f=this.borderColor;e.clearColor(f[0]*f[3],f[1]*f[3],f[2]*f[3],f[3]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]),e.viewport(n[0],n[1],n[2]-n[0],n[3]-n[1]);var l=this.backgroundColor;e.clearColor(l[0]*l[3],l[1]*l[3],l[2]*l[3],l[3]),e.clear(e.COLOR_BUFFER_BIT),s.draw();var c=this.zeroLineEnable,h=this.zeroLineColor,p=this.zeroLineWidth;if(c[0]||c[1]){o.bind();for(var d=0;2>d;++d)if(c[d]&&r[d]<=0&&r[d+2]>=0){var v=t[d]-r[d]*(t[d+2]-t[d])/(r[d+2]-r[d]);0===d?o.drawLine(v,t[1],v,t[3],p[d],h[d]):o.drawLine(t[0],v,t[2],v,p[d],h[d])}}for(var d=0;d<a.length;++d)a[d].draw();e.viewport(t[0],t[1],t[2]-t[0],t[3]-t[1]),e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.grid.drawTickMarks(),o.bind();var m=this.borderLineEnable,g=this.borderLineWidth,y=this.borderLineColor;m[1]&&o.drawLine(n[0],n[1]-.5*g[1]*i,n[0],n[3]+.5*g[3]*i,g[1],y[1]),m[0]&&o.drawLine(n[0]-.5*g[0]*i,n[1],n[2]+.5*g[2]*i,n[1],g[0],y[0]),m[3]&&o.drawLine(n[2],n[1]-.5*g[1]*i,n[2],n[3]+.5*g[3]*i,g[3],y[3]),m[2]&&o.drawLine(n[0]-.5*g[0]*i,n[3],n[2]+.5*g[2]*i,n[3],g[2],y[2]),u.bind();for(var d=0;2>d;++d)u.drawTicks(d);this.titleEnable&&u.drawTitle();for(var b=this.overlays,d=0;d<b.length;++d)b[d].draw();e.disable(e.SCISSOR_TEST),e.disable(e.BLEND),e.depthMask(!0)}}}(),h.drawPick=function(){return function(){var e=this.pickBuffer;this.gl,this._pickTimeout=null,e.begin();for(var t=1,n=this.objects,r=0;r<n.length;++r)t=n[r].drawPick(t);e.end()}}(),h.pick=function(){return function(e,t){var n=this.pixelRatio,r=this.pickPixelRatio,i=this.viewBox,s=0|Math.round((e-i[0]/n)*r),o=0|Math.round((t-i[1]/n)*r),u=this.pickBuffer.query(s,o,this.pickRadius);if(!u)return null;for(var a=u.id+(u.value[0]<<8)+(u.value[1]<<16)+(u.value[2]<<24),f=this.objects,l=0;l<f.length;++l){var c=f[l].pick(s,o,a);if(c)return c}return null}}(),h.setScreenBox=function(e){var t=this.screenBox,n=this.pixelRatio;t[0]=0|Math.round(e[0]*n),t[1]=0|Math.round(e[1]*n),t[2]=0|Math.round(e[2]*n),t[3]=0|Math.round(e[3]*n),this.setDirty()},h.setDataBox=function(e){var t=this.dataBox,n=t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3];n&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.setDirty())},h.setViewBox=function(e){var t=this.pixelRatio,n=this.viewBox;n[0]=0|Math.round(e[0]*t),n[1]=0|Math.round(e[1]*t),n[2]=0|Math.round(e[2]*t),n[3]=0|Math.round(e[3]*t);var r=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((e[2]-e[0])*r),0|Math.round((e[3]-e[1])*r)],this.setDirty()},h.update=function(e){e=e||{};var t=this.gl;this.pixelRatio=e.pixelRatio||1;var n=this.pixelRatio;this.pickPixelRatio=Math.max(n,1),this.setScreenBox(e.screenBox||[0,0,t.drawingBufferWidth/n,t.drawingBufferHeight/n]),this.screenBox,this.setViewBox(e.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/n,.125*(this.screenBox[3]-this.screenBox[1])/n,.875*(this.screenBox[2]-this.screenBox[0])/n,.875*(this.screenBox[3]-this.screenBox[1])/n]);var r=this.viewBox,o=(r[2]-r[0])/(r[3]-r[1]);this.setDataBox(e.dataBox||[-10,-10/o,10,10/o]),this.borderColor=(e.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(e.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(e.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(e.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(e.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(e.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(e.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(e.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(e.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(e.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(e.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(e.titleCenter||[.5*(r[0]+r[2])/n,(r[3]+120)/n]).slice(),this.titleEnable=!("titleEnable"in e&&!e.titleEnable),this.titleAngle=e.titleAngle||0,this.titleColor=(e.titleColor||[0,0,0,1]).slice(),this.labelPad=(e.labelPad||[15,15,15,15]).slice(),this.labelAngle=(e.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(e.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(e.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(e.tickPad||[15,15,15,15]).slice(),this.tickAngle=(e.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(e.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(e.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(e.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(e.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(e.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var u=e.ticks||[[],[]],a=this._tickBounds;a[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(var f=0;2>f;++f){var l=u[f].slice(0);0!==l.length&&(l.sort(s),a[f]=Math.min(a[f],l[0].x),a[f+2]=Math.max(a[f+2],l[l.length-1].x))}this.grid.update({bounds:a,ticks:u}),this.text.update({bounds:a,ticks:u,labels:e.labels||["x","y"],labelSize:e.labelSize||[12,12],labelFont:e.labelFont||["sans-serif","sans-serif"],title:e.title||"",titleSize:e.titleSize||18,titleFont:e.titleFont||"sans-serif"}),this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var e=this.objects.length-1;e>=0;--e)this.objects[e].dispose();this.objects.length=0;for(var e=this.overlays.length-1;e>=0;--e)this.overlays[e].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(e){this.objects.indexOf(e)<0&&(this.objects.push(e),this.setDirty())},h.removeObject=function(e){for(var t=this.objects,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setDirty();break}},h.addOverlay=function(e){this.overlays.indexOf(e)<0&&(this.overlays.push(e),this.setOverlayDirty())},h.removeOverlay=function(e){for(var t=this.overlays,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setOverlayDirty();break}}},{"./lib/box":100,"./lib/grid":101,"./lib/line":102,"./lib/text":104,"gl-select-static":137}],107:[function(e,t,n){var r=e("gl-shader"),i="#define GLSLIFY 1\nprecision mediump float;\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}",s="#define GLSLIFY 1\nprecision mediump float;\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}";t.exports=function(e){return r(e,i,s,null,[{name:"position",type:"vec2"}])}},{"gl-shader":138}],108:[function(e,t,n){"use strict";function r(e,t){e=e||document.body,t=t||{};var n=[.01,1/0];"distanceLimits"in t&&(n[0]=t.distanceLimits[0],n[1]=t.distanceLimits[1]),"zoomMin"in t&&(n[0]=t.zoomMin),"zoomMax"in t&&(n[1]=t.zoomMax);var r=s({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:n}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0,c=e.clientWidth,h=e.clientHeight,p={view:r,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:r.modes,tick:function(){var t=i(),n=this.delay;r.idle(t-n),r.flush(t-(100+2*n));var s=t-2*n;r.recalcMatrix(s);for(var o=!0,u=r.computedMatrix,a=0;16>a;++a)o=o&&f[a]===u[a],f[a]=u[a];var p=e.clientWidth===c&&e.clientHeight===h;return c=e.clientWidth,h=e.clientHeight,o?!p:(l=Math.exp(r.computedRadius[0]),!0)},lookAt:function(e,t,n){r.lookAt(r.lastT(),e,t,n)},rotate:function(e,t,n){r.rotate(r.lastT(),e,t,n)},pan:function(e,t,n){r.pan(r.lastT(),e,t,n)},translate:function(e,t,n){r.translate(r.lastT(),e,t,n)}};Object.defineProperties(p,{matrix:{get:function(){return r.computedMatrix},set:function(e){return r.setMatrix(r.lastT(),e),r.computedMatrix},enumerable:!0},mode:{get:function(){return r.getMode()},set:function(e){return r.setMode(e),r.getMode()},enumerable:!0},center:{get:function(){return r.computedCenter},set:function(e){return r.lookAt(r.lastT(),e),r.computedCenter},enumerable:!0},eye:{get:function(){return r.computedEye},set:function(e){return r.lookAt(r.lastT(),null,e),r.computedEye},enumerable:!0},up:{get:function(){return r.computedUp},set:function(e){return r.lookAt(r.lastT(),null,null,e),r.computedUp},enumerable:!0},distance:{get:function(){return l},set:function(e){return r.setDistance(r.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return r.getDistanceLimits(n)},set:function(e){return r.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var d=0,v=0;return o(e,function(t,n,s,o){var u=1/e.clientHeight,a=u*(n-d),f=u*(s-v),c=p.flipX?1:-1,h=p.flipY?1:-1,m=Math.PI*p.rotateSpeed,g=i();if(1&t)o.shift?r.rotate(g,0,0,-a*m):r.rotate(g,c*m*a,-h*m*f,0);else if(2&t)r.pan(g,-p.translateSpeed*a*l,p.translateSpeed*f*l,0);else if(4&t){var y=p.zoomSpeed*f/window.innerHeight*(g-r.lastT())*50;r.pan(g,0,0,l*(Math.exp(y)-1))}d=n,v=s}),u(e,function(e,t,n){var s=p.flipX?1:-1,o=p.flipY?1:-1,u=i();if(Math.abs(e)>Math.abs(t))r.rotate(u,0,0,-e*s*Math.PI*p.rotateSpeed/window.innerWidth);else{var a=p.zoomSpeed*o*t/window.innerHeight*(u-r.lastT())/100;r.pan(u,0,0,l*(Math.exp(a)-1))}},!0),p}t.exports=r;var i=e("right-now"),s=e("3d-view"),o=e("mouse-change"),u=e("mouse-wheel")},{"3d-view":22,"mouse-change":173,"mouse-wheel":177,"right-now":191}],109:[function(e,t,n){!function(){"use strict";function e(t){t.permitHostObjects___&&t.permitHostObjects___(e)}function n(e){return e.substr(0,p.length)!=p||"___"!==e.substr(e.length-3)}function r(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[d];if(t&&t.key===e)return t;if(!h(e))return void 0;t={key:e};try{return c(e,d,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(n){return void 0}}function i(e){return e.prototype=null,Object.freeze(e)}function s(){y||"undefined"==typeof console||(y=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=e);var o=!1;if("function"==typeof WeakMap){var u=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var a=new u,f=Object.freeze({});if(a.set(f,1),1===a.get(f))return void (t.exports=WeakMap);o=!0}}var l=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),c=Object.defineProperty,h=Object.isExtensible,p="weakmap:",d=p+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var v=new ArrayBuffer(25),m=new Uint8Array(v);crypto.getRandomValues(m),d=p+"rand:"+Array.prototype.map.call(m,function(e){return(e%36).toString(36)}).join("")+"___"}if(c(Object,"getOwnPropertyNames",{value:function(e){return l(e).filter(n)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;c(Object,"getPropertyNames",{value:function(e){return g(e).filter(n)}})}!function(){var e=Object.freeze;c(Object,"freeze",{value:function(t){return r(t),e(t)}});var t=Object.seal;c(Object,"seal",{value:function(e){return r(e),t(e)}});var n=Object.preventExtensions;c(Object,"preventExtensions",{value:function(e){return r(e),n(e)}})}();var y=!1,b=0,w=function(){function e(e,t){var n,i=r(e);return i?f in i?i[f]:t:(n=u.indexOf(e),n>=0?a[n]:t)}function t(e){var t=r(e);return t?f in t:u.indexOf(e)>=0}function n(e,t){var n,i=r(e);return i?i[f]=t:(n=u.indexOf(e),n>=0?a[n]=t:(n=u.length,a[n]=t,u[n]=e)),this}function o(e){var t,n,i=r(e);return i?f in i&&delete i[f]:(t=u.indexOf(e),0>t?!1:(n=u.length-1,u[t]=void 0,a[t]=a[n],u[t]=u[n],u.length=n,a.length=n,!0))}this instanceof w||s();var u=[],a=[],f=b++;return Object.create(w.prototype,{get___:{value:i(e)},has___:{value:i(t)},set___:{value:i(n)},delete___:{value:i(o)}})};w.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},"delete":{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof u?!function(){function n(){function t(e,t){return l?f.has(e)?f.get(e):l.get___(e,t):f.get(e,t)}function n(e){return f.has(e)||(l?l.has___(e):!1)}function r(e){var t=!!f.delete(e);return l?l.delete___(e)||t:t}this instanceof w||s();var a,f=new u,l=void 0,c=!1;return a=o?function(e,t){return f.set(e,t),f.has(e)||(l||(l=new w),l.set(e,t)),this}:function(e,t){if(c)try{f.set(e,t)}catch(n){l||(l=new w),l.set___(e,t)}else f.set(e,t);return this},Object.create(w.prototype,{get___:{value:i(t)},has___:{value:i(n)},set___:{value:i(a)},delete___:{value:i(r)},permitHostObjects___:{value:i(function(t){if(t!==e)throw new Error("bogus call to permitHostObjects___");c=!0})}})}o&&"undefined"!=typeof Proxy&&(Proxy=void 0),n.prototype=w.prototype,t.exports=n,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.exports=w)}}()},{}],110:[function(e,t,n){"use strict";function r(e){var t=u.get(e);if(!t||!e.isBuffer(t._triangleBuffer.buffer)){var n=s(e,new Float32Array([-1,-1,-1,4,4,-1]));t=o(e,[{buffer:n,type:e.FLOAT,size:2}]),t._triangleBuffer=n,u.set(e,t)}t.bind(),e.drawArrays(e.TRIANGLES,0,3),t.unbind()}var i="undefined"==typeof WeakMap?e("weak-map"):WeakMap,s=e("gl-buffer"),o=e("gl-vao"),u=new i;t.exports=r},{"gl-buffer":59,"gl-vao":166,"weak-map":109}],111:[function(e,t,n){"use strict";function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function i(e){this.gl=e,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=l(e)}function s(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}function o(e,t,n,r,i){for(var s=e.primalOffset,o=e.primalMinor,u=e.mirrorOffset,a=e.mirrorMinor,f=r[t],l=0;3>l;++l)if(t!==l){var c=s,h=u,p=o,d=a;f&1<<l&&(c=u,h=s,p=a,d=o),c[l]=n[0][l],h[l]=n[1][l],i[l]>0?(p[l]=-1,d[l]=0):(p[l]=0,d[l]=1)}}function u(e,t){var n=new i(e);return n.update(t),n}t.exports=u;var a=e("./lib/text.js"),f=e("./lib/lines.js"),l=e("./lib/background.js"),c=e("./lib/cube.js"),h=e("./lib/ticks.js"),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),d=i.prototype;d.update=function(e){function t(t,n,r){if(r in e){var i,s=e[r],o=this[r];(t?Array.isArray(s)&&Array.isArray(s[0]):Array.isArray(s))?this[r]=i=[n(s[0]),n(s[1]),n(s[2])]:this[r]=i=[n(s),n(s),n(s)];for(var u=0;3>u;++u)if(i[u]!==o[u])return!0}return!1}e=e||{};var n,r=t.bind(this,!1,Number),i=t.bind(this,!1,Boolean),s=t.bind(this,!1,String),o=t.bind(this,!0,function(e){if(Array.isArray(e)){if(3===e.length)return[+e[0],+e[1],+e[2],1];if(4===e.length)return[+e[0],+e[1],+e[2],+e[3]]}return[0,0,0,1]}),u=!1,l=!1;if("bounds"in e)for(var c=e.bounds,p=0;2>p;++p)for(var d=0;3>d;++d)c[p][d]!==this.bounds[p][d]&&(l=!0),this.bounds[p][d]=c[p][d];if("ticks"in e){n=e.ticks,u=!0,this.autoTicks=!1;for(var p=0;3>p;++p)this.tickSpacing[p]=0}else r("tickSpacing")&&(this.autoTicks=!0,l=!0);if(this._firstInit&&("ticks"in e||"tickSpacing"in e||(this.autoTicks=!0),l=!0,u=!0,this._firstInit=!1),l&&this.autoTicks&&(n=h.create(this.bounds,this.tickSpacing),u=!0),u){for(var p=0;3>p;++p)n[p].sort(function(e,t){return e.x-t.x});h.equal(n,this.ticks)?u=!1:this.ticks=n}i("tickEnable"),s("tickFont")&&(u=!0),r("tickSize"),r("tickAngle"),r("tickPad"),o("tickColor");var v=s("labels");s("labelFont")&&(v=!0),i("labelEnable"),r("labelSize"),r("labelPad"),o("labelColor"),i("lineEnable"),i("lineMirror"),r("lineWidth"),o("lineColor"),i("lineTickEnable"),i("lineTickMirror"),r("lineTickLength"),r("lineTickWidth"),o("lineTickColor"),i("gridEnable"),r("gridWidth"),o("gridColor"),i("zeroEnable"),o("zeroLineColor"),r("zeroLineWidth"),i("backgroundEnable"),o("backgroundColor"),this._text?this._text&&(v||u)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&u&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=f(this.gl,this.bounds,this.ticks))};var v=[new s,new s,new s],m=[0,0,0],g={model:p,view:p,projection:p};d.isOpaque=function(){return!0},d.isTransparent=function(){return!1},d.drawTransparent=function(e){};var y=[0,0,0],b=[0,0,0],w=[0,0,0];d.draw=function(e){e=e||g;for(var t=this.gl,n=e.model||p,i=e.view||p,s=e.projection||p,u=this.bounds,a=c(n,i,s,u),f=a.cubeEdges,l=a.axis,h=i[12],d=i[13],E=i[14],S=i[15],T=this.pixelRatio*(s[3]*h+s[7]*d+s[11]*E+s[15]*S)/t.drawingBufferHeight,N=0;3>N;++N)this.lastCubeProps.cubeEdges[N]=f[N],this.lastCubeProps.axis[N]=l[N];for(var C=v,N=0;3>N;++N)o(v[N],N,this.bounds,f,l);for(var t=this.gl,k=m,N=0;3>N;++N)this.backgroundEnable[N]?k[N]=l[N]:k[N]=0;this._background.draw(n,i,s,u,k,this.backgroundColor),this._lines.bind(n,i,s,this);for(var N=0;3>N;++N){var L=[0,0,0];l[N]>0?L[N]=u[1][N]:L[N]=u[0][N];for(var A=0;2>A;++A){var O=(N+1+A)%3,M=(N+1+(1^A))%3;this.gridEnable[O]&&this._lines.drawGrid(O,M,this.bounds,L,this.gridColor[O],this.gridWidth[O]*this.pixelRatio)}for(var A=0;2>A;++A){var O=(N+1+A)%3,M=(N+1+(1^A))%3;this.zeroEnable[M]&&u[0][M]<=0&&u[1][M]>=0&&this._lines.drawZero(O,M,this.bounds,L,this.zeroLineColor[M],this.zeroLineWidth[M]*this.pixelRatio)}}for(var N=0;3>N;++N){this.lineEnable[N]&&this._lines.drawAxisLine(N,this.bounds,C[N].primalOffset,this.lineColor[N],this.lineWidth[N]*this.pixelRatio),this.lineMirror[N]&&this._lines.drawAxisLine(N,this.bounds,C[N].mirrorOffset,this.lineColor[N],this.lineWidth[N]*this.pixelRatio);for(var _=r(y,C[N].primalMinor),D=r(b,C[N].mirrorMinor),P=this.lineTickLength,A=0;3>A;++A){var H=T/n[5*A];_[A]*=P[A]*H,D[A]*=P[A]*H}this.lineTickEnable[N]&&this._lines.drawAxisTicks(N,C[N].primalOffset,_,this.lineTickColor[N],this.lineTickWidth[N]*this.pixelRatio),this.lineTickMirror[N]&&this._lines.drawAxisTicks(N,C[N].mirrorOffset,D,this.lineTickColor[N],this.lineTickWidth[N]*this.pixelRatio)}this._text.bind(n,i,s,this.pixelRatio);for(var N=0;3>N;++N){for(var B=C[N].primalMinor,j=r(w,C[N].primalOffset),A=0;3>A;++A)this.lineTickEnable[N]&&(j[A]+=T*B[A]*Math.max(this.lineTickLength[A],0)/n[5*A]);if(this.tickEnable[N]){for(var A=0;3>A;++A)j[A]+=T*B[A]*this.tickPad[A]/n[5*A];this._text.drawTicks(N,this.tickSize[N],this.tickAngle[N],j,this.tickColor[N])}if(this.labelEnable[N]){for(var A=0;3>A;++A)j[A]+=T*B[A]*this.labelPad[A]/n[5*A];j[N]+=.5*(u[0][N]+u[1][N]),this._text.drawLabel(N,this.labelSize[N],this.labelAngle[N],j,this.labelColor[N])}}},d.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":112,"./lib/cube.js":113,"./lib/lines.js":114,"./lib/text.js":116,"./lib/ticks.js":117}],112:[function(e,t,n){"use strict";function r(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r}function i(e){for(var t=[],n=[],i=0,a=0;3>a;++a)for(var f=(a+1)%3,l=(a+2)%3,c=[0,0,0],h=[0,0,0],p=-1;1>=p;p+=2){n.push(i,i+2,i+1,i+1,i+2,i+3),c[a]=p,h[a]=p;for(var d=-1;1>=d;d+=2){c[f]=d;for(var v=-1;1>=v;v+=2)c[l]=v,t.push(c[0],c[1],c[2],h[0],h[1],h[2]),i+=1}var m=f;f=l,l=m}var g=s(e,new Float32Array(t)),y=s(e,new Uint16Array(n),e.ELEMENT_ARRAY_BUFFER),b=o(e,[{buffer:g,type:e.FLOAT,size:3,offset:0,stride:24},{buffer:g,type:e.FLOAT,size:3,offset:12,stride:24}],y),w=u(e);return w.attributes.position.location=0,w.attributes.normal.location=1,new r(e,g,b,w)}t.exports=i;var s=e("gl-buffer"),o=e("gl-vao"),u=e("./shaders").bg,a=r.prototype;a.draw=function(e,t,n,r,i,s){for(var o=!1,u=0;3>u;++u)o=o||i[u];if(o){var a=this.gl;a.enable(a.POLYGON_OFFSET_FILL),a.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:e,view:t,projection:n,bounds:r,enable:i,colors:s},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),a.disable(a.POLYGON_OFFSET_FILL)}},a.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":115,"gl-buffer":59,"gl-vao":166}],113:[function(e,t,n){"use strict";function r(e,t,n){for(var r=0;4>r;++r){e[r]=n[12+r];for(var i=0;3>i;++i)e[r]+=t[i]*n[4*i+r]}}function i(e){for(var t=0;t<v.length;++t)if(e=a.positive(e,v[t]),e.length<3)return 0;for(var n=e[0],r=n[0]/n[3],i=n[1]/n[3],s=0,t=1;t+1<e.length;++t){var o=e[t],u=e[t+1],f=o[0]/o[3],l=o[1]/o[3],c=u[0]/u[3],h=u[1]/u[3],p=f-r,d=l-i,m=c-r,g=h-i;s+=Math.abs(p*g-d*m)}return s}function s(e,t,n,s){u(l,t,e),u(l,n,l);for(var a=0,v=0;2>v;++v){p[2]=s[v][2];for(var b=0;2>b;++b){p[1]=s[b][1];for(var w=0;2>w;++w)p[0]=s[w][0],r(c[a],p,l),a+=1}}for(var E=-1,v=0;8>v;++v){for(var S=c[v][3],x=0;3>x;++x)h[v][x]=c[v][x]/S;0>S&&(0>E?E=v:h[v][2]<h[E][2]&&(E=v))}if(0>E){E=0;for(var T=0;3>T;++T){for(var N=(T+2)%3,C=(T+1)%3,k=-1,L=-1,A=0;2>A;++A){var O=A<<T,M=O+(A<<N)+(1-A<<C),_=O+(1-A<<N)+(A<<C);f(h[O],h[M],h[_],d)<0||(A?k=1:L=1)}if(0>k||0>L)L>k&&(E|=1<<T);else{for(var A=0;2>A;++A){var O=A<<T,M=O+(A<<N)+(1-A<<C),_=O+(1-A<<N)+(A<<C),D=i([c[O],c[M],c[_],c[O+(1<<N)+(1<<C)]]);A?k=D:L=D}L>k&&(E|=1<<T)}}}for(var P=7^E,H=-1,v=0;8>v;++v)v!==E&&v!==P&&(0>H?H=v:h[H][1]>h[v][1]&&(H=v));for(var B=-1,v=0;3>v;++v){var j=H^1<<v;if(j!==E&&j!==P){0>B&&(B=j);var C=h[j];C[0]<h[B][0]&&(B=j)}}for(var F=-1,v=0;3>v;++v){var j=H^1<<v;if(j!==E&&j!==P&&j!==B){0>F&&(F=j);var C=h[j];C[0]>h[F][0]&&(F=j)}}var I=m;I[0]=I[1]=I[2]=0,I[o.log2(B^H)]=H&B,I[o.log2(H^F)]=H&F;var q=7^F;q===E||q===P?(q=7^B,I[o.log2(F^q)]=q&F):I[o.log2(B^q)]=q&B;for(var R=g,U=E,T=0;3>T;++T)U&1<<T?R[T]=-1:R[T]=1;return y}t.exports=s;var o=e("bit-twiddle"),u=e("gl-mat4/multiply"),a=(e("gl-mat4/invert"),e("split-polygon")),f=e("robust-orientation"),l=new Array(16),c=(new Array(16),new Array(8)),h=new Array(8),p=new Array(3),d=[0,0,0];!function(){for(var e=0;8>e;++e)c[e]=[1,1,1,1],h[e]=[1,1,1]}();var v=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],m=[1,1,1],g=[0,0,0],y={cubeEdges:m,axis:g}},{"bit-twiddle":33,"gl-mat4/invert":78,"gl-mat4/multiply":80,"robust-orientation":195,"split-polygon":119}],114:[function(e,t,n){"use strict";function r(e){return e[0]=e[1]=e[2]=0,e}function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(e,t,n,r,i,s,o,u){this.gl=e,this.vertBuffer=t,this.vao=n,this.shader=r,this.tickCount=i,this.tickOffset=s,this.gridCount=o,this.gridOffset=u}function o(e,t,n){var r=[],i=[0,0,0],o=[0,0,0],l=[0,0,0],c=[0,0,0];r.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var h=0;3>h;++h){for(var p=r.length/3|0,d=0;d<n[h].length;++d){var v=+n[h][d].x;r.push(v,0,1,v,1,1,v,0,-1,v,0,-1,v,1,1,v,1,-1)}var m=r.length/3|0;i[h]=p,o[h]=m-p;for(var p=r.length/3|0,g=0;g<n[h].length;++g){var v=+n[h][g].x;r.push(v,0,1,v,1,1,v,0,-1,v,0,-1,v,1,1,v,1,-1)}var m=r.length/3|0;l[h]=p,c[h]=m-p}var y=u(e,new Float32Array(r)),b=a(e,[{buffer:y,type:e.FLOAT,size:3,stride:0,offset:0}]),w=f(e);return w.attributes.position.location=0,new s(e,y,b,w,o,i,c,l)}t.exports=o;var u=e("gl-buffer"),a=e("gl-vao"),f=e("./shaders").line,l=[0,0,0],c=[0,0,0],h=[0,0,0],p=[0,0,0],d=[1,1],v=s.prototype;v.bind=function(e,t,n){this.shader.bind(),this.shader.uniforms.model=e,this.shader.uniforms.view=t,this.shader.uniforms.projection=n,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=d,this.vao.bind()},v.drawAxisLine=function(e,t,n,s,o){var u=r(c);this.shader.uniforms.majorAxis=c,u[e]=t[1][e]-t[0][e],this.shader.uniforms.minorAxis=u;var a=i(p,n);a[e]+=t[0][e],this.shader.uniforms.offset=a,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=s;var f=r(h);f[(e+2)%3]=1,this.shader.uniforms.screenAxis=f,this.vao.draw(this.gl.TRIANGLES,6);var f=r(h);f[(e+1)%3]=1,this.shader.uniforms.screenAxis=f,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(e,t,n,i,s){var o=r(l);o[e]=1,this.shader.uniforms.majorAxis=o,this.shader.uniforms.offset=t,this.shader.uniforms.minorAxis=n,this.shader.uniforms.color=i,this.shader.uniforms.lineWidth=s;var u=r(h);u[e]=1,this.shader.uniforms.screenAxis=u,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])},v.drawGrid=function(e,t,n,s,o,u){var a=r(c);a[t]=n[1][t]-n[0][t],this.shader.uniforms.minorAxis=a;var f=i(p,s);f[t]+=n[0][t],this.shader.uniforms.offset=f;var d=r(l);d[e]=1,this.shader.uniforms.majorAxis=d;var v=r(h);v[e]=1,this.shader.uniforms.screenAxis=v,this.shader.uniforms.lineWidth=u,this.shader.uniforms.color=o,this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e])},v.drawZero=function(e,t,n,s,o,u){var a=r(c);this.shader.uniforms.majorAxis=a,a[e]=n[1][e]-n[0][e],this.shader.uniforms.minorAxis=a;var f=i(p,s);f[e]+=n[0][e],this.shader.uniforms.offset=f;var l=r(h);l[t]=1,this.shader.uniforms.screenAxis=l,this.shader.uniforms.lineWidth=u,this.shader.uniforms.color=o,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":115,"gl-buffer":59,"gl-vao":166}],115:[function(e,t,n){"use strict";var r=e("gl-shader"),i="#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n",s="#define GLSLIFY 1\nprecision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}";n.line=function(e){return r(e,i,s,null,[{name:"position",type:"vec3"}])};var o="#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvoid main() {  \n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n  mat2 planeXform = scale * mat2(cos(angle), sin(angle),\n                                -sin(angle), cos(angle));\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n  vec4 worldPosition = model * vec4(dataPosition, 1);\n  \n  //Compute clip position\n  vec4 viewPosition = view * worldPosition;\n  vec4 clipPosition = projection * viewPosition;\n  clipPosition /= clipPosition.w;\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec4(viewOffset, 0, 0);\n\n  //Done\n  gl_Position = clipPosition;\n}",u="#define GLSLIFY 1\nprecision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}";n.text=function(e){return r(e,o,u,null,[{name:"position",type:"vec3"}])};var a="#define GLSLIFY 1\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  if(dot(normal, enable) > 0.0) {\n    vec3 nPosition = mix(bounds[0], bounds[1], 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n  colorChannel = abs(normal);\n}",f="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] + \n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}";n.bg=function(e){return r(e,a,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":138}],116:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){this.gl=e,this.shader=t,this.buffer=n,this.vao=r,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}function i(e,t){try{return a(e,t)}catch(n){return console.warn("error vectorizing text:",n),{cells:[],positions:[]}}}function s(e,t,n,i,s,a){var l=o(e),c=u(e,[{buffer:l,size:3}]),h=f(e);h.attributes.position.location=0;var p=new r(e,h,l,c);return p.update(t,n,i,s,a),p}t.exports=s;var o=e("gl-buffer"),u=e("gl-vao"),a=e("vectorize-text"),f=e("./shaders").text,l=window||n.global||{},c=l.__TEXT_CACHE||{};l.__TEXT_CACHE={};var h=3,p=r.prototype,d=[0,0];p.bind=function(e,t,n,r){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=e,i.view=t,i.projection=n,i.pixelScale=r,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=d},p.update=function(e,t,n,r,s){function o(e,t,n,r){var s=c[n];s||(s=c[n]={});var o=s[t];o||(o=s[t]=i(t,{triangles:!0,font:n,textAlign:"center",textBaseline:"middle"}));for(var a=(r||12)/12,f=o.positions,l=o.cells,h=0,p=l.length;p>h;++h)for(var d=l[h],v=2;v>=0;--v){var m=f[d[v]];u.push(a*m[0],-a*m[1],e)}}for(var u=(this.gl,[]),a=[0,0,0],f=[0,0,0],l=[0,0,0],p=[0,0,0],d=0;3>d;++d){l[d]=u.length/h|0,o(.5*(e[0][d]+e[1][d]),t[d],n),p[d]=(u.length/h|0)-l[d],a[d]=u.length/h|0;for(var v=0;v<r[d].length;++v)r[d][v].text&&o(r[d][v].x,r[d][v].text,r[d][v].font||s,r[d][v].fontSize||12);f[d]=(u.length/h|0)-a[d]}this.buffer.update(u),this.tickOffset=a,this.tickCount=f,this.labelOffset=l,this.labelCount=p};var v=[0,0,0];p.drawTicks=function(e,t,n,r,i){var s=v;s[0]=s[1]=s[2]=0,s[e]=1,this.shader.uniforms.axis=s,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])};var m=[0,0,0];p.drawLabel=function(e,t,n,r,i){this.shader.uniforms.axis=m,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.vao.draw(this.gl.TRIANGLES,this.labelCount[e],this.labelOffset[e])},p.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this,e("_process"))},{"./shaders":115,_process:38,"gl-buffer":59,"gl-vao":166,"vectorize-text":219}],117:[function(e,t,n){"use strict";function r(e,t){var n=e+"",r=n.indexOf("."),i=0;r>=0&&(i=n.length-r-1);var s=Math.pow(10,i),o=Math.round(e*t*s),u=o+"";if(u.indexOf("e")>=0)return u;var a=o/s,f=o%s;0>o?(a=0|-Math.ceil(a),f=0|-f):(a=0|Math.floor(a),f=0|f);var l=""+a;if(0>o&&(l="-"+l),i){for(var c=""+f;c.length<i;)c="0"+c;return l+"."+c}return l}function i(e,t){for(var n=[],i=0;3>i;++i){for(var s=[],o=(.5*(e[0][i]+e[1][i]),0);o*t[i]<=e[1][i];++o)s.push({x:o*t[i],text:r(t[i],o)});for(var o=-1;o*t[i]>=e[0][i];--o)s.push({x:o*t[i],text:r(t[i],o)});n.push(s)}return n}function s(e,t){for(var n=0;3>n;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;++r){var i=e[n][r],s=t[n][r];if(i.x!==s.x||i.text!==s.text)return!1}}return!0}n.create=i,n.equal=s},{}],118:[function(e,t,n){"use strict";function r(e,t,n){var r=t||0,i=n||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[r*e[12]+e[8],r*e[13]+e[9],r*e[14]+e[10],r*e[15]+e[11]],[i*e[12]-e[8],i*e[13]-e[9],i*e[14]-e[10],i*e[15]-e[11]]]}t.exports=r},{}],119:[function(e,t,n){"use strict";function r(e,t){var n=f(a(e,t),[t[t.length-1]]);return n[n.length-1]}function i(e,t,n,r){var i=r-t,s=-t/i;0>s?s=0:s>1&&(s=1);for(var o=1-s,u=e.length,a=new Array(u),f=0;u>f;++f)a[f]=s*e[f]+o*n[f];return a}function s(e,t){for(var n=[],s=[],o=r(e[e.length-1],t),u=e[e.length-1],a=e[0],f=0;f<e.length;++f,u=a){a=e[f];var l=r(a,t);if(0>o&&l>0||o>0&&0>l){var c=i(u,l,a,o);n.push(c),s.push(c.slice())}0>l?s.push(a.slice()):l>0?n.push(a.slice()):(n.push(a.slice()),s.push(a.slice())),o=l}return{positive:n,negative:s}}function o(e,t){for(var n=[],s=r(e[e.length-1],t),o=e[e.length-1],u=e[0],a=0;a<e.length;++a,o=u){u=e[a];var f=r(u,t);(0>s&&f>0||s>0&&0>f)&&n.push(i(o,f,u,s)),f>=0&&n.push(u.slice()),s=f}return n}function u(e,t){for(var n=[],s=r(e[e.length-1],t),o=e[e.length-1],u=e[0],a=0;a<e.length;++a,o=u){u=e[a];var f=r(u,t);(0>s&&f>0||s>0&&0>f)&&n.push(i(o,f,u,s)),0>=f&&n.push(u.slice()),s=f}return n}var a=e("robust-dot-product"),f=e("robust-sum");t.exports=s,t.exports.positive=o,t.exports.negative=u},{"robust-dot-product":120,"robust-sum":198}],120:[function(e,t,n){"use strict";function r(e,t){for(var n=i(e[0],t[0]),r=1;r<e.length;++r)n=s(n,i(e[r],t[r]));return n}var i=e("two-product"),s=e("robust-sum");t.exports=r},{"robust-sum":198,"two-product":215}],121:[function(e,t,n){"use strict";function r(e,t,n){this.lo=e,this.hi=t,this.pixelsPerDataUnit=n}function i(e,t,n,r,i){for(var s=0;3>s;++s){for(var o=d,u=v,a=0;3>a;++a)u[a]=o[a]=n[a];u[3]=o[3]=1,u[s]+=1,c(u,u,t),u[3]<0&&(e[s]=1/0),o[s]-=1,c(o,o,t),o[3]<0&&(e[s]=1/0);var f=(o[0]/o[3]-u[0]/u[3])*r,l=(o[1]/o[3]-u[1]/u[3])*i;e[s]=.25*Math.sqrt(f*f+l*l)}return e}function s(e,t,n,r,s){var c=t.model||h,d=t.view||h,v=t.projection||h,y=e.bounds,s=s||a(c,d,v,y),b=s.axis;s.edges,f(p,d,c),f(p,v,p);for(var w=m,E=0;3>E;++E)w[E].lo=1/0,w[E].hi=-1/0,w[E].pixelsPerDataUnit=1/0;var S=o(l(p,p));l(p,p);for(var x=0;3>x;++x){var T=(x+1)%3,N=(x+2)%3,C=g;e:for(var E=0;2>E;++E){var k=[];if(b[x]<0!=!!E){C[x]=y[E][x];for(var L=0;2>L;++L){C[T]=y[L^E][T];for(var A=0;2>A;++A)C[N]=y[A^L^E][N],k.push(C.slice())}for(var L=0;L<S.length;++L){if(0===k.length)continue e;k=u.positive(k,S[L])}for(var L=0;L<k.length;++L)for(var N=k[L],O=i(g,p,N,n,r),A=0;3>A;++A)w[A].lo=Math.min(w[A].lo,N[A]),w[A].hi=Math.max(w[A].hi,N[A]),A!==x&&(w[A].pixelsPerDataUnit=Math.min(w[A].pixelsPerDataUnit,Math.abs(O[A])))}}}return w}t.exports=s;var o=e("extract-frustum-planes"),u=e("split-polygon"),a=e("./lib/cube.js"),f=e("gl-mat4/multiply"),l=e("gl-mat4/transpose"),c=e("gl-vec4/transformMat4"),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),p=new Float32Array(16),d=[0,0,0,1],v=[0,0,0,1],m=[new r(1/0,-1/0,1/0),new r(1/0,-1/0,1/0),new r(1/0,-1/0,1/0)],g=[0,0,0]},{"./lib/cube.js":113,"extract-frustum-planes":118,"gl-mat4/multiply":80,"gl-mat4/transpose":88,"gl-vec4/transformMat4":167,"split-polygon":119}],122:[function(e,t,n){"use strict";var r=e("gl-shader"),i="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n",s="#define GLSLIFY 1\nprecision mediump float;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}";t.exports=function(e){return r(e,i,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":138}],123:[function(e,t,n){"use strict";function r(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}function i(e,t){function n(e,t,n,r,s,o){var u=[e,t,n,0,0,0,1];u[r+3]=1,u[r]=s,i.push.apply(i,u),u[6]=-1,i.push.apply(i,u),u[r]=o,i.push.apply(i,u),i.push.apply(i,u),u[6]=1,i.push.apply(i,u),u[r]=s,i.push.apply(i,u)}var i=[];n(0,0,0,0,0,1),n(0,0,0,1,0,1),n(0,0,0,2,0,1),n(1,0,0,1,-1,1),n(1,0,0,2,-1,1),n(0,1,0,0,-1,1),n(0,1,0,2,-1,1),n(0,0,1,0,-1,1),n(0,0,1,1,-1,1);var a=s(e,i),f=o(e,[{type:e.FLOAT,buffer:a,size:3,offset:0,stride:28},{type:e.FLOAT,buffer:a,size:3,offset:12,stride:28},{type:e.FLOAT,buffer:a,size:1,offset:24,stride:28}]),l=u(e);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.weight.location=2;var c=new r(e,a,f,l);return c.update(t),c}var s=e("gl-buffer"),o=e("gl-vao"),u=e("./shaders/index");t.exports=i;var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=r.prototype,l=[0,0,0],c=[0,0,0],h=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(e){},f.draw=function(e){var t=this.gl,n=this.vao,r=this.shader;n.bind(),r.bind();var i,s=e.model||a,o=e.view||a,u=e.projection||a;this.axes&&(i=this.axes.lastCubeProps.axis);for(var f=l,p=c,d=0;3>d;++d)i&&i[d]<0?(f[d]=this.bounds[0][d],p[d]=this.bounds[1][d]):(f[d]=this.bounds[1][d],p[d]=this.bounds[0][d]);h[0]=t.drawingBufferWidth,h[1]=t.drawingBufferHeight,r.uniforms.model=s,r.uniforms.view=o,r.uniforms.projection=u,r.uniforms.coordinates=[this.position,f,p],r.uniforms.colors=this.colors,r.uniforms.screenShape=h;for(var d=0;3>d;++d)r.uniforms.lineWidth=this.lineWidth[d]*this.pixelRatio,this.enabled[d]&&(n.draw(t.TRIANGLES,6,6*d),this.drawSides[d]&&n.draw(t.TRIANGLES,12,18+12*d));n.unbind()},f.update=function(e){e&&("bounds"in e&&(this.bounds=e.bounds),"position"in e&&(this.position=e.position),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"colors"in e&&(this.colors=e.colors),"enabled"in e&&(this.enabled=e.enabled),"drawSides"in e&&(this.drawSides=e.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":122,"gl-buffer":59,"gl-vao":166}],124:[function(e,t,n){"use strict";function r(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function i(e,t){var n=null;try{n=e.getContext("webgl",t),n||(n=e.getContext("experimental-webgl",t))}catch(r){return null}return n}function s(e){var t=Math.round(Math.log(Math.abs(e))/Math.log(10));if(0>t){var n=Math.round(Math.pow(10,-t));return Math.ceil(e*n)/n}if(t>0){var n=Math.round(Math.pow(10,t));return Math.ceil(e/n)*n}return Math.ceil(e)}function o(e){return"boolean"==typeof e?e:!0}function u(e){function t(){if(!E&&W.autoResize){var e=S.parentNode,t=1,n=1;e&&e!==document.body?(t=e.clientWidth,n=e.clientHeight):(t=window.innerWidth,n=window.innerHeight);var r=0|Math.ceil(t*W.pixelRatio),i=0|Math.ceil(n*W.pixelRatio);if(r!==S.width||i!==S.height){S.width=r,S.height=i;var s=S.style;s.position=s.position||"absolute",s.left="0px",s.top="0px",s.width=t+"px",s.height=n+"px",F=!0}}}function n(){for(var e=P.length,t=j.length,n=0;t>n;++n)B[n]=0;e:for(var n=0;e>n;++n){var r=P[n],i=r.pickSlots;if(i){for(var s=0;t>s;++s)if(B[s]+i<255){H[n]=s,r.setPickBase(B[s]+1),B[s]+=i;continue e}var o=h(T,z);H[n]=t,j.push(o),B.push(i),r.setPickBase(1),t+=1}else H[n]=-1}for(;t>0&&0===B[t-1];)B.pop(),j.pop().dispose()}function u(){return W.contextLost?!0:void (T.isContextLost()&&(W.contextLost=!0,W.mouseListener.enabled=!1,W.selection.object=null,W.oncontextloss&&W.oncontextloss()))}function y(){if(!u()){T.colorMask(!0,!0,!0,!0),T.depthMask(!0),T.disable(T.BLEND),T.enable(T.DEPTH_TEST);for(var e=P.length,t=j.length,n=0;t>n;++n){var r=j[n];r.shape=X,r.begin();for(var i=0;e>i;++i)if(H[i]===n){var s=P[i];s.drawPick&&(s.pixelRatio=1,s.drawPick(U))}r.end()}}}function b(){if(!u()){t();var e=W.camera.tick();U.view=W.camera.matrix,F=F||e,I=I||e,M.pixelRatio=W.pixelRatio,D.pixelRatio=W.pixelRatio;var n=P.length,r=J[0],i=J[1];r[0]=r[1]=r[2]=1/0,i[0]=i[1]=i[2]=-1/0;for(var o=0;n>o;++o){var a=P[o];a.pixelRatio=W.pixelRatio,a.axes=W.axes,F=F||!!a.dirty,I=I||!!a.dirty;var f=a.bounds;if(f)for(var c=f[0],h=f[1],p=0;3>p;++p)r[p]=Math.min(r[p],c[p]),i[p]=Math.max(i[p],h[p])}var v=W.bounds;if(W.autoBounds)for(var p=0;3>p;++p){if(i[p]<r[p])r[p]=-1,i[p]=1;else{r[p]===i[p]&&(r[p]-=1,i[p]+=1);var g=.05*(i[p]-r[p]);r[p]=r[p]-g,i[p]=i[p]+g}v[0][p]=r[p],v[1][p]=i[p]}for(var b=!1,p=0;3>p;++p)b=b||K[0][p]!==v[0][p]||K[1][p]!==v[1][p],K[0][p]=v[0][p],K[1][p]=v[1][p];if(b){for(var w=[0,0,0],o=0;3>o;++o)w[o]=s((v[1][o]-v[0][o])/10);M.autoTicks?M.update({bounds:v,tickSpacing:w}):M.update({bounds:v})}I=I||b,F=F||b;var E=T.drawingBufferWidth,S=T.drawingBufferHeight;z[0]=E,z[1]=S,X[0]=0|Math.max(E/W.pixelRatio,1),X[1]=0|Math.max(S/W.pixelRatio,1),m(q,W.fovy,E/S,W.zNear,W.zFar);for(var o=0;16>o;++o)R[o]=0;R[15]=1;for(var x=0,o=0;3>o;++o)x=Math.max(x,v[1][o]-v[0][o]);for(var o=0;3>o;++o)W.autoScale?R[5*o]=W.aspect[o]/(v[1][o]-v[0][o]):R[5*o]=1/x,W.autoCenter&&(R[12+o]=.5*-R[5*o]*(v[0][o]+v[1][o]));for(var o=0;n>o;++o){var a=P[o];a.axesBounds=v,W.clipToBounds&&(a.clipBounds=v)}if(C.object&&(W.snapToData?D.position=C.dataCoordinate:D.position=C.dataPosition,D.bounds=v),I&&(I=!1,y()),F){W.axesPixels=l(W.axes,U,E,S),W.onrender&&W.onrender(),T.bindFramebuffer(T.FRAMEBUFFER,null),T.viewport(0,0,E,S);var N=W.clearColor;T.clearColor(N[0],N[1],N[2],N[3]),T.clear(T.COLOR_BUFFER_BIT|T.DEPTH_BUFFER_BIT),T.depthMask(!0),T.colorMask(!0,!0,!0,!0),T.enable(T.DEPTH_TEST),T.depthFunc(T.LEQUAL),T.disable(T.BLEND),T.disable(T.CULL_FACE);var A=!1;M.enable&&(A=A||M.isTransparent(),M.draw(U)),D.axes=M,C.object&&D.draw(U),T.disable(T.CULL_FACE);for(var o=0;n>o;++o){var a=P[o];a.axes=M,a.pixelRatio=W.pixelRatio,a.isOpaque&&a.isOpaque()&&a.draw(U),a.isTransparent&&a.isTransparent()&&(A=!0)}if(A){k.shape=z,k.bind(),T.clear(T.DEPTH_BUFFER_BIT),T.colorMask(!1,!1,!1,!1),T.depthMask(!0),T.depthFunc(T.LESS),M.enable&&M.isTransparent()&&M.drawTransparent(U);for(var o=0;n>o;++o){var a=P[o];a.isOpaque&&a.isOpaque()&&a.draw(U)}T.enable(T.BLEND),T.blendEquation(T.FUNC_ADD),T.blendFunc(T.ONE,T.ONE_MINUS_SRC_ALPHA),T.colorMask(!0,!0,!0,!0),T.depthMask(!1),T.clearColor(0,0,0,0),T.clear(T.COLOR_BUFFER_BIT),M.isTransparent()&&M.drawTransparent(U);for(var o=0;n>o;++o){var a=P[o];a.isTransparent&&a.isTransparent()&&a.drawTransparent(U)}T.bindFramebuffer(T.FRAMEBUFFER,null),T.blendFunc(T.ONE,T.ONE_MINUS_SRC_ALPHA),T.disable(T.DEPTH_TEST),L.bind(),k.color[0].bind(0),L.uniforms.accumBuffer=0,d(T),T.disable(T.BLEND)}F=!1;for(var o=0;n>o;++o)P[o].dirty=!1}}}function w(){E||W.contextLost||(requestAnimationFrame(w),b())}e=e||{};var E=!1,S=(e.pixelRatio||parseFloat(window.devicePixelRatio),e.canvas);if(!S)if(S=document.createElement("canvas"),e.container){var x=e.container;x.appendChild(S)}else document.body.appendChild(S);var T=e.gl;if(T||(T=i(S,e.glOptions||{premultipliedAlpha:!0,antialias:!0})),!T)throw new Error("webgl not supported");var N=e.bounds||[[-10,-10,-10],[10,10,10]],C=new r,k=p(T,[T.drawingBufferWidth,T.drawingBufferHeight],{preferFloat:!0}),L=g(T),A=e.camera||{eye:[2,0,0],center:[0,0,0],up:[0,1,0],zoomMin:.1,zoomMax:100,mode:"turntable"},O=e.axes||{},M=f(T,O);M.enable=!O.disable;var _=e.spikes||{},D=c(T,_),P=[],H=[],B=[],j=[],F=!0,I=!0,q=new Array(16),R=new Array(16),U={view:null,projection:q,model:R},I=!0,z=[T.drawingBufferWidth,T.drawingBufferHeight],W={gl:T,contextLost:!1,pixelRatio:e.pixelRatio||parseFloat(window.devicePixelRatio),canvas:S,selection:C,camera:a(S,A),axes:M,axesPixels:null,spikes:D,bounds:N,objects:P,shape:z,aspect:e.aspectRatio||[1,1,1],pickRadius:e.pickRadius||10,zNear:e.zNear||.01,zFar:e.zFar||1e3,fovy:e.fovy||Math.PI/4,clearColor:e.clearColor||[0,0,0,0],autoResize:o(e.autoResize),autoBounds:o(e.autoBounds),autoScale:!!e.autoScale,autoCenter:o(e.autoCenter),clipToBounds:o(e.clipToBounds),snapToData:!!e.snapToData,onselect:e.onselect||null,onrender:e.onrender||null,onclick:e.onclick||null,cameraParams:U,oncontextloss:null,mouseListener:null},X=[T.drawingBufferWidth/W.pixelRatio|0,T.drawingBufferHeight/W.pixelRatio|0];W.autoResize&&t(),window.addEventListener("resize",t),W.update=function(e){E||(e=e||{},F=!0,I=!0)},W.add=function(e){E||(e.axes=M,P.push(e),H.push(-1),F=!0,I=!0,n())},W.remove=function(e){if(!E){var t=P.indexOf(e);0>t||(P.splice(t,1),H.pop(),F=!0,I=!0,n())}},W.dispose=function(){if(!E&&(E=!0,window.removeEventListener("resize",t),S.removeEventListener("webglcontextlost",u),W.mouseListener.enabled=!1,!W.contextLost)){M.dispose(),D.dispose();for(var e=0;e<P.length;++e)P[e].dispose();k.dispose();for(var e=0;e<j.length;++e)j[e].dispose();L.dispose(),T=null,M=null,D=null,P=[]}};var V=!1,$=0;W.mouseListener=v(S,function(e,t,n){if(!E){var r=j.length,i=P.length,s=C.object;C.distance=1/0,C.mouse[0]=t,C.mouse[1]=n,C.object=null,C.screen=null,C.dataCoordinate=C.dataPosition=null;var o=!1;if(e)V=!0;else{V&&(I=!0),V=!1;for(var u=0;r>u;++u){var a=j[u].query(t,X[1]-n-1,W.pickRadius);if(a){if(a.distance>C.distance)continue;for(var f=0;i>f;++f){var l=P[f];if(H[f]===u){var c=l.pick(a);c&&(C.screen=a.coord,C.distance=a.distance,C.object=l,C.index=c.distance,C.dataPosition=c.position,C.dataCoordinate=c.dataCoordinate,C.data=c,o=!0)}}}}}s&&s!==C.object&&(s.highlight&&s.highlight(null),F=!0),C.object&&(C.object.highlight&&C.object.highlight(C.data),F=!0),o=o||C.object!==s,o&&W.onselect&&W.onselect(C),1&e&&!(1&$)&&W.onclick&&W.onclick(C),$=e}}),S.addEventListener("webglcontextlost",u);var J=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],K=[J[0].slice(),J[1].slice()];return w(),W.redraw=function(){E||(F=!0,b())},W}t.exports=u;var a=e("3d-view-controls"),f=e("gl-axes3d"),l=e("gl-axes3d/properties"),c=e("gl-spikes3d"),h=e("gl-select-static"),p=e("gl-fbo"),d=e("a-big-triangle"),v=e("mouse-change"),m=e("gl-mat4/perspective"),g=e("./lib/shader")},{"./lib/shader":107,"3d-view-controls":108,"a-big-triangle":110,"gl-axes3d":111,"gl-axes3d/properties":121,"gl-fbo":64,"gl-mat4/perspective":81,"gl-select-static":137,"gl-spikes3d":123,"mouse-change":173}],125:[function(e,t,n){"use strict";t.exports={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute vec2 offset;\nattribute vec4 color;\n\nuniform mat3 viewTransform;\nuniform vec2 pixelScale;\n\nvarying vec4 fragColor;\n\nvec4 computePosition_1_0(vec2 position, vec2 offset, mat3 view, vec2 scale) {\n  vec3 xposition = view * vec3(position, 1.0);\n  return vec4(\n    xposition.xy + scale * offset * xposition.z,\n    0,\n    xposition.z);\n}\n\n\n\n\nvoid main() {\n  fragColor = color;\n\n  gl_Position = computePosition_1_0(\n    position,\n    offset,\n    viewTransform,\n    pixelScale);\n}\n",fragment:"#define GLSLIFY 1\nprecision lowp float;\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n",pickVertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute vec2 offset;\nattribute vec4 id;\n\nuniform mat3 viewTransform;\nuniform vec2 pixelScale;\nuniform vec4 pickOffset;\n\nvarying vec4 fragColor;\n\nvec4 computePosition_1_0(vec2 position, vec2 offset, mat3 view, vec2 scale) {\n  vec3 xposition = view * vec3(position, 1.0);\n  return vec4(\n    xposition.xy + scale * offset * xposition.z,\n    0,\n    xposition.z);\n}\n\n\n\n\nvoid main() {\n  vec4 fragId = id + pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  fragColor = fragId / 255.0;\n\n  gl_Position = computePosition_1_0(\n    position,\n    offset,\n    viewTransform,\n    pixelScale);\n}\n",pickFragment:"#define GLSLIFY 1\nprecision lowp float;\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = fragColor;\n}\n"}},{}],126:[function(e,t,n){"use strict";function r(e){if(e in h)return h[e];var t=l(e,{polygons:!0,font:"sans-serif",textAlign:"left",textBaseline:"alphabetic"}),n=[],r=[];t.forEach(function(e){e.forEach(function(e){for(var t=0;t<e.length;++t){var i=e[(t+e.length-1)%e.length],s=e[t],o=e[(t+1)%e.length],u=e[(t+2)%e.length],a=s[0]-i[0],f=s[1]-i[1],l=Math.sqrt(a*a+f*f);a/=l,f/=l,n.push(i[0],i[1]+1.4),r.push(f,-a),n.push(i[0],i[1]+1.4),r.push(-f,a),n.push(s[0],s[1]+1.4),r.push(-f,a),n.push(s[0],s[1]+1.4),r.push(-f,a),n.push(i[0],i[1]+1.4),r.push(f,-a),n.push(s[0],s[1]+1.4),r.push(f,-a);var c=u[0]-o[0],h=u[1]-o[1],p=Math.sqrt(c*c+h*h);c/=p,h/=p,n.push(s[0],s[1]+1.4),r.push(f,-a),n.push(s[0],s[1]+1.4),r.push(-f,a),n.push(o[0],o[1]+1.4),r.push(-h,c),n.push(o[0],o[1]+1.4),r.push(-h,c),n.push(s[0],s[1]+1.4),r.push(h,-c),n.push(o[0],o[1]+1.4),r.push(h,-c)}})});for(var i=[1/0,1/0,-1/0,-1/0],s=0;s<n.length;s+=2)for(var o=0;2>o;++o)i[o]=Math.min(i[o],n[s+o]),i[2+o]=Math.max(i[2+o],n[s+o]);return h[e]={coords:n,normals:r,bounds:i}}function i(e,t,n,r,i,s,o){this.plot=e,this.shader=t,this.pickShader=n,this.positionBuffer=r,this.offsetBuffer=i,this.colorBuffer=s,this.idBuffer=o,this.bounds=[1/0,1/0,-1/0,-1/0],this.numPoints=0,this.numVertices=0,this.pickOffset=0,this.points=null}function s(e,t){var n=e.gl,r=o(n,c.vertex,c.fragment),s=o(n,c.pickVertex,c.pickFragment),a=u(n),f=u(n),l=u(n),h=u(n),p=new i(e,r,s,a,f,l,h);return p.update(t),e.addObject(p),p}t.exports=s;var o=e("gl-shader"),u=e("gl-buffer"),a=e("text-cache"),f=e("typedarray-pool"),l=e("vectorize-text"),c=e("./lib/shaders"),h={},p=i.prototype;!function(){function e(){var e=this.plot,r=this.bounds,i=e.viewBox,s=e.dataBox,o=e.pixelRatio,u=r[2]-r[0],a=r[3]-r[1],f=s[2]-s[0],l=s[3]-s[1];t[0]=2*u/f,t[4]=2*a/l,t[6]=2*(r[0]-s[0])/f-1,t[7]=2*(r[1]-s[1])/l-1;var c=i[2]-i[0],h=i[3]-i[1];n[0]=2*o/c,n[1]=2*o/h}var t=[1,0,0,0,1,0,0,0,1],n=[1,1];p.draw=function(){var r=this.plot,i=this.shader,s=this.numVertices,o=r.gl;e.call(this),i.bind(),i.uniforms.pixelScale=n,i.uniforms.viewTransform=t,this.positionBuffer.bind(),i.attributes.position.pointer(),this.offsetBuffer.bind(),i.attributes.offset.pointer(),this.colorBuffer.bind(),i.attributes.color.pointer(o.UNSIGNED_BYTE,!0),o.drawArrays(o.TRIANGLES,0,s)};var r=[0,0,0,0];p.drawPick=function(i){var s=this.plot,o=this.pickShader,u=this.numVertices,a=s.gl;this.pickOffset=i;for(var f=0;4>f;++f)r[f]=i>>8*f&255;return e.call(this),o.bind(),o.uniforms.pixelScale=n,o.uniforms.viewTransform=t,o.uniforms.pickOffset=r,this.positionBuffer.bind(),o.attributes.position.pointer(),this.offsetBuffer.bind(),o.attributes.offset.pointer(),this.idBuffer.bind(),o.attributes.id.pointer(a.UNSIGNED_BYTE,!1),a.drawArrays(a.TRIANGLES,0,u),i+this.numPoints}}(),p.pick=function(e,t,n){var r=this.pickOffset,i=this.numPoints;if(r>n||n>=r+i)return null;var s=n-r,o=this.points;return{object:this,pointId:s,dataCoord:[o[2*s],o[2*s+1]]}},p.update=function(e){e=e||{};var t=e.positions||[],n=e.colors||[],i=e.glyphs||[],s=e.sizes||[],o=e.borderWidths||[],u=e.borderColors||[];this.points=t;for(var l=this.bounds=[1/0,1/0,-1/0,-1/0],c=0,h=0;h<i.length;++h){c+=a("sans-serif",i[h]).data.length+r(i[h]).coords.length>>1;for(var p=0;2>p;++p)l[p]=Math.min(l[p],t[2*h+p]),l[2+p]=Math.max(l[2+p],t[2*h+p])}l[0]===l[2]&&(l[2]+=1),l[3]===l[1]&&(l[3]+=1);for(var d=1/(l[2]-l[0]),v=1/(l[3]-l[1]),m=l[0],g=l[1],y=f.mallocFloat32(2*c),b=f.mallocFloat32(2*c),w=f.mallocUint8(4*c),E=f.mallocUint32(c),S=0,h=0;h<i.length;++h){for(var x=a("sans-serif",i[h]),T=r(i[h]),N=d*(t[2*h]-m),C=v*(t[2*h+1]-g),k=s[h],L=255*n[4*h],A=255*n[4*h+1],O=255*n[4*h+2],M=255*n[4*h+3],_=.5*(T.bounds[0]+T.bounds[2]),D=.5*(T.bounds[1]+T.bounds[3]),p=0;p<x.data.length;p+=2)y[2*S]=N,y[2*S+1]=C,b[2*S]=-k*(x.data[p]-_),b[2*S+1]=-k*(x.data[p+1]-D),w[4*S]=L,w[4*S+1]=A,w[4*S+2]=O,w[4*S+3]=M,E[S]=h,S+=1;var P=o[h];L=255*u[4*h],A=255*u[4*h+1],O=255*u[4*h+2],M=255*u[4*h+3];for(var p=0;p<T.coords.length;p+=2)y[2*S]=N,y[2*S+1]=C,b[2*S]=-(k*(T.coords[p]-_)+P*T.normals[p]),b[2*S+1]=-(k*(T.coords[p+1]-D)+P*T.normals[p+1]),w[4*S]=L,w[4*S+1]=A,w[4*S+2]=O,w[4*S+3]=M,E[S]=h,S+=1}this.numPoints=i.length,this.numVertices=c,this.positionBuffer.update(y),this.offsetBuffer.update(b),this.colorBuffer.update(w),this.idBuffer.update(E),f.free(y),f.free(b),f.free(w),f.free(E)},p.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.offsetBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":125,"gl-buffer":59,"gl-shader":138,"text-cache":212,"typedarray-pool":217,"vectorize-text":219}],127:[function(e,t,n){n.pointVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute float weight;\n\nuniform mat3 matrix;\nuniform float pointSize, useWeight;\n\nvarying float fragWeight;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n  fragWeight = mix(1.0, weight, useWeight);\n}\n",n.pointFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\n\nvarying float fragWeight;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  vec4 baseColor = mix(borderColor, color, smoothStep(radius, centerFraction));\n  float alpha = 1.0 - pow(1.0 - baseColor.a, fragWeight);\n  gl_FragColor = vec4(baseColor.rgb * alpha, alpha);\n}\n",n.pickVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n",n.pickFragment="#define GLSLIFY 1\nprecision mediump float;\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"},{}],128:[function(e,t,n){arguments[4][105][0].apply(n,arguments)},{dup:105}],129:[function(e,t,n){"use strict";function r(e,t,n,r,s){4*h>=s?i(0,s-1,e,t,n,r):c(0,s-1,e,t,n,r)}function i(e,t,n,r,i,s){for(var o=e+1;t>=o;++o){for(var u=n[o],a=r[2*o],f=r[2*o+1],l=i[o],c=s[o],h=o;h>e;){var p=n[h-1],d=r[2*(h-1)];if((p-u||a-d)>=0)break;n[h]=p,r[2*h]=d,r[2*h+1]=r[2*h-1],i[h]=i[h-1],s[h]=s[h-1],h-=1}n[h]=u,r[2*h]=a,r[2*h+1]=f,i[h]=l,s[h]=c}}function s(e,t,n,r,i,s){var o=n[e],u=r[2*e],a=r[2*e+1],f=i[e],l=s[e];n[e]=n[t],r[2*e]=r[2*t],r[2*e+1]=r[2*t+1],i[e]=i[t],s[e]=s[t],n[t]=o,r[2*t]=u,r[2*t+1]=a,i[t]=f,s[t]=l}function o(e,t,n,r,i,s){n[e]=n[t],r[2*e]=r[2*t],r[2*e+1]=r[2*t+1],i[e]=i[t],s[e]=s[t]}function u(e,t,n,r,i,s,o){var u=r[e],a=i[2*e],f=i[2*e+1],l=s[e],c=o[e];r[e]=r[t],i[2*e]=i[2*t],i[2*e+1]=i[2*t+1],s[e]=s[t],o[e]=o[t],r[t]=r[n],i[2*t]=i[2*n],i[2*t+1]=i[2*n+1],s[t]=s[n],o[t]=o[n],r[n]=u,i[2*n]=a,i[2*n+1]=f,s[n]=l,o[n]=c}function a(e,t,n,r,i,s,o,u,a,f,l){u[e]=u[t],a[2*e]=a[2*t],a[2*e+1]=a[2*t+1],f[e]=f[t],l[e]=l[t],u[t]=n,a[2*t]=r,a[2*t+1]=i,f[t]=s,l[t]=o}function f(e,t,n,r,i){return(n[e]-n[t]||r[2*t]-r[2*e]||i[e]-i[t])<0}function l(e,t,n,r,i,s,o,u){return(t-s[e]||o[2*e]-n||i-u[e])<0}function c(e,t,n,r,p,d){var v=(t-e+1)/6|0,m=e+v,g=t-v,y=e+t>>1,b=y-v,w=y+v,E=m,S=b,x=y,T=w,N=g,C=e+1,k=t-1,L=0;f(E,S,n,r,p,d)&&(L=E,E=S,S=L),f(T,N,n,r,p,d)&&(L=T,T=N,N=L),f(E,x,n,r,p,d)&&(L=E,E=x,x=L),f(S,x,n,r,p,d)&&(L=S,S=x,x=L),f(E,T,n,r,p,d)&&(L=E,E=T,T=L),f(x,T,n,r,p,d)&&(L=x,x=T,T=L),f(S,N,n,r,p,d)&&(L=S,S=N,N=L),f(S,x,n,r,p,d)&&(L=S,S=x,x=L),f(T,N,n,r,p,d)&&(L=T,T=N,N=L);var A=n[S],O=r[2*S],M=r[2*S+1],_=p[S],D=d[S],P=n[T],H=r[2*T],B=r[2*T+1],j=p[T],F=d[T],I=E,q=x,R=N,U=m,z=y,W=g,X=n[I],V=n[q],$=n[R];n[U]=X,n[z]=V,n[W]=$;for(var J=0;2>J;++J){var K=r[2*I+J],Q=r[2*q+J],G=r[2*R+J];r[2*U+J]=K,r[2*z+J]=Q,r[2*W+J]=G}var Y=p[I],Z=p[q],et=p[R];p[U]=Y,p[z]=Z,p[W]=et;var tt=d[I],nt=d[q],rt=d[R];d[U]=tt,d[z]=nt,d[W]=rt,o(b,e,n,r,p,d),o(w,t,n,r,p,d);for(var it=C;k>=it;++it)if(l(it,A,O,M,_,n,r,p))it!==C&&s(it,C,n,r,p,d),++C;else if(!l(it,P,H,B,j,n,r,p))for(;;){if(l(k,P,H,B,j,n,r,p)){l(k,A,O,M,_,n,r,p)?(u(it,C,k,n,r,p,d),++C,--k):(s(it,k,n,r,p,d),--k);break}if(--k<it)break}a(e,C-1,A,O,M,_,D,n,r,p,d),a(t,k+1,P,H,B,j,F,n,r,p,d),h>=C-2-e?i(e,C-2,n,r,p,d):c(e,C-2,n,r,p,d),h>=t-(k+2)?i(k+2,t,n,r,p,d):c(k+2,t,n,r,p,d),h>=k-C?i(C,k,n,r,p,d):c(C,k,n,r,p,d)}t.exports=r;var h=32},{}],130:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o,u){for(var a=n,f=n;r>f;++f){var l=e[2*f],c=e[2*f+1],h=t[f];l>=i&&o>=l&&c>=s&&u>=c&&(f===a?a+=1:(e[2*f]=e[2*a],e[2*f+1]=e[2*a+1],t[f]=t[a],e[2*a]=l,e[2*a+1]=c,t[a]=h,a+=1))}return a}function i(e,t,n){this.pixelSize=e,this.offset=t,this.count=n}function s(e,t,n,s){function a(i,s,o,u,f,l){var c=.5*o,h=u+1,p=f-u;n[E]=p,w[E++]=l;for(var d=0;2>d;++d)for(var v=0;2>v;++v){var m=i+d*c,g=s+v*c,y=r(e,t,h,f,m,g,m+c,g+c);if(y!==h){if(y-h>=Math.max(.9*p,32)){var b=f+u>>>1;a(m,g,c,h,b,l+1),h=b}a(m,g,c,h,y,l+1),h=y}}}var f=e.length>>>1;if(1>f)return[];for(var l=1/0,c=1/0,h=-1/0,p=-1/0,d=0;f>d;++d){var v=e[2*d],m=e[2*d+1];l=Math.min(l,v),h=Math.max(h,v),c=Math.min(c,m),p=Math.max(p,m),t[d]=d}l===h&&(h+=1+Math.abs(h)),c===p&&(p+=1+Math.abs(h));var g=1/(h-l),y=1/(p-c),b=Math.max(h-l,p-c);s=s||[0,0,0,0],s[0]=l,s[1]=c,s[2]=h,s[3]=p;var w=o.mallocInt32(f),E=0;a(l,c,b,0,f,0),u(w,e,t,n,f);for(var S=[],x=0,T=f,E=f-1;E>=0;--E){e[2*E]=(e[2*E]-l)*g,e[2*E+1]=(e[2*E+1]-c)*y;var N=w[E];N!==x&&(S.push(new i(b*Math.pow(.5,N),E+1,T-(E+1))),T=E+1,x=N)}return S.push(new i(b*Math.pow(.5,N+1),0,T)),o.free(w),S}var o=e("typedarray-pool"),u=e("./lib/sort");t.exports=s},{"./lib/sort":129,"typedarray-pool":217}],131:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){this.plot=e,this.offsetBuffer=t,this.pickBuffer=n,this.weightBuffer=r,this.shader=i,this.pickShader=s,this.scales=[],this.size=12,this.borderSize=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0,this.points=null,this.xCoords=null}function i(e,t){var n=e.gl,i=o(n),u=o(n),a=o(n),f=s(n,l.pointVertex,l.pointFragment),c=s(n,l.pickVertex,l.pickFragment),h=new r(e,i,u,a,f,c);return h.update(t),e.addObject(h),h}var s=e("gl-shader"),o=e("gl-buffer"),u=e("binary-search-bounds"),a=e("snap-points-2d"),f=e("typedarray-pool"),l=e("./lib/shader");t.exports=i;var c=r.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.xCoords&&f.free(this.xCoords),this.plot.removeObject(this)},c.update=function(e){function t(t,n){return t in e?e[t]:n}e=e||{},this.size=t("size",12),this.color=t("color",[1,0,0,1]).slice(),this.borderSize=t("borderSize",1),this.borderColor=t("borderColor",[0,0,0,1]).slice(),this.xCoords&&f.free(this.xCoords);var n=e.positions,r=f.mallocFloat32(n.length),i=f.mallocInt32(n.length>>>1);r.set(n);var s=f.mallocFloat32(n.length);this.points=n,this.scales=a(r,i,s,this.bounds),this.offsetBuffer.update(r),this.pickBuffer.update(i),this.weightBuffer.update(s);for(var o=f.mallocFloat32(n.length>>>1),u=0,l=0;u<n.length;u+=2,++l)o[l]=r[u];f.free(i),f.free(r),f.free(s),this.xCoords=o,this.pointCount=n.length>>>1,this.pickOffset=0},c.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(n){var r=this.plot,i=this.pickShader,s=this.scales,o=this.offsetBuffer,a=this.pickBuffer,f=this.bounds,l=this.size,c=this.borderSize,h=r.gl,p=r.pickPixelRatio,d=r.viewBox,v=r.dataBox;if(0===this.pointCount)return n;var m=f[2]-f[0],g=f[3]-f[1],y=v[2]-v[0],b=v[3]-v[1],w=(d[2]-d[0])*p/r.pixelRatio,E=(d[3]-d[1])*p/r.pixelRatio,S=Math.min(y/w,b/E);e[0]=2*m/y,e[4]=2*g/b,e[6]=2*(f[0]-v[0])/y-1,e[7]=2*(f[1]-v[1])/b-1,this.pickOffset=n,t[0]=255&n,t[1]=n>>8&255,t[2]=n>>16&255,t[3]=n>>24&255,i.bind(),i.uniforms.matrix=e,i.uniforms.color=this.color,i.uniforms.borderColor=this.borderColor,i.uniforms.pointSize=p*(l+c),i.uniforms.pickOffset=t,0===this.borderSize?i.uniforms.centerFraction=2:i.uniforms.centerFraction=l/(l+c+1.25),o.bind(),i.attributes.position.pointer(),a.bind(),i.attributes.pickId.pointer(h.UNSIGNED_BYTE);for(var x=this.xCoords,T=(v[0]-f[0]-S*l*p)/m,N=(v[2]-f[0]+S*l*p)/m,C=s.length-1;C>=0;--C){var k=s[C];if(!(k.pixelSize<S&&C>1)){var L=k.offset,A=k.count+L,O=u.ge(x,T,L,A-1),M=u.lt(x,N,O,A-1)+1;h.drawArrays(h.POINTS,O,M-O)}}return n+this.pointCount}}(),c.draw=function(){var e=[1,0,0,0,1,0,0,0,1];return function(){var t=this.plot,n=this.shader,r=this.scales,i=this.offsetBuffer,s=this.bounds,o=this.size,a=this.borderSize,f=t.gl,l=t.pixelRatio,c=t.viewBox,h=t.dataBox;if(0!==this.pointCount){var p=s[2]-s[0],d=s[3]-s[1],v=h[2]-h[0],m=h[3]-h[1],g=c[2]-c[0],y=c[3]-c[1],b=Math.min(v/g,m/y);e[0]=2*p/v,e[4]=2*d/m,e[6]=2*(s[0]-h[0])/v-1,e[7]=2*(s[1]-h[1])/m-1,n.bind(),n.uniforms.matrix=e,n.uniforms.color=this.color,n.uniforms.borderColor=this.borderColor,n.uniforms.pointSize=l*(o+a),n.uniforms.useWeight=1,0===this.borderSize?n.uniforms.centerFraction=2:n.uniforms.centerFraction=o/(o+a+1.25),i.bind(),n.attributes.position.pointer(),this.weightBuffer.bind(),n.attributes.weight.pointer();for(var w=this.xCoords,E=(h[0]-s[0]-b*o*l)/p,S=(h[2]-s[0]+b*o*l)/p,x=!0,T=r.length-1;T>=0;--T){var N=r[T];if(!(N.pixelSize<b&&T>1)){var C=N.offset,k=N.count+C,L=u.ge(w,E,C,k-1),A=u.lt(w,S,L,k-1)+1;f.drawArrays(f.POINTS,L,A-L),x&&(x=!1,n.uniforms.useWeight=0)}}}}}(),c.pick=function(e,t,n){var r=this.pickOffset,i=this.pointCount;if(r>n||n>=r+i)return null;var s=n-r,o=this.points;return{object:this,pointId:s,dataCoord:[o[2*s],o[2*s+1]]}}},{"./lib/shader":127,"binary-search-bounds":128,"gl-buffer":59,"gl-shader":138,"snap-points-2d":130,"typedarray-pool":217}],132:[function(e,t,n){"use strict";function r(e,t){var n=s[t];if(n||(n=s[t]={}),e in n)return n[e];for(var r=i(e,{textAlign:"center",textBaseline:"middle",lineHeight:1,font:t}),o=i(e,{triangles:!0,textAlign:"center",textBaseline:"middle",lineHeight:1,font:t}),u=[[1/0,1/0],[-1/0,-1/0]],f=0;f<r.positions.length;++f)for(var l=r.positions[f],c=0;2>c;++c)u[0][c]=Math.min(u[0][c],l[c]),u[1][c]=Math.max(u[1][c],l[c]);return n[e]=[o,r,u]}var i=e("vectorize-text");t.exports=r;var s={}},{"vectorize-text":219}],133:[function(e,t,n){function r(e,t){var n=i(e,t),r=n.attributes;return r.position.location=0,r.color.location=1,r.glyph.location=2,r.id.location=3,n}var i=e("gl-shader"),s="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   || \n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n    \n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",o="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n    \n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",u="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   ||\n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n",a="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   ||\n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = interpColor * opacity;\n  }\n}\n",f="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   || \n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = vec4(pickGroup, pickId.bgr);\n  }\n}",l=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],c={vertex:s,fragment:a,attributes:l},h={vertex:o,fragment:a,attributes:l},p={vertex:u,fragment:a,attributes:l},d={vertex:s,fragment:f,attributes:l},v={vertex:o,fragment:f,attributes:l},m={vertex:u,fragment:f,attributes:l};n.createPerspective=function(e){return r(e,c)},n.createOrtho=function(e){return r(e,h)},n.createProject=function(e){return r(e,p)},n.createPickPerspective=function(e){return r(e,d)},n.createPickOrtho=function(e){return r(e,v)},n.createPickProject=function(e){return r(e,m)}},{"gl-shader":138}],134:[function(e,t,n){"use strict";function r(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];return e[0]=t[0]*n+t[4]*r+t[8]*i+t[12]*s,e[1]=t[1]*n+t[5]*r+t[9]*i+t[13]*s,e[2]=t[2]*n+t[6]*r+t[10]*i+t[14]*s,e[3]=t[3]*n+t[7]*r+t[11]*i+t[15]*s,e}function i(e,t,n,i){return r(i,i,n),r(i,i,t),r(i,i,e)}function s(e,t){this.index=e,this.dataCoordinate=this.position=t}function o(e,t,n,r,i,o,u,a,f,l,c,h){this.gl=e,this.pixelRatio=1,this.shader=t,this.orthoShader=n,this.projectShader=r,this.pointBuffer=i,this.colorBuffer=o,this.glyphBuffer=u,this.idBuffer=a,this.vao=f,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.pickId=0,this.pickPerspectiveShader=l,this.pickOrthoShader=c,this.pickProjectShader=h,this.points=[],this._selectResult=new s(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}function u(e){return e[0]=e[1]=e[2]=0,e}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e}function f(e,t,n,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[n]=r,e}function l(e){for(var t=A,n=0;2>n;++n)for(var r=0;3>r;++r)t[n][r]=Math.max(Math.min(e[n][r],1e8),-1e8);return t}function c(e,t,n,r,s){var o,c=t.axesProject,h=t.gl,p=e.uniforms,d=n.model||w,v=n.view||w,m=n.projection||w,y=t.axesBounds,b=l(t.clipBounds);o=t.axes?t.axes.lastCubeProps.axis:[1,1,1],S[0]=2/h.drawingBufferWidth,S[1]=2/h.drawingBufferHeight,e.bind(),p.view=v,p.projection=m,p.screenSize=S,p.highlightId=t.highlightId,p.highlightScale=t.highlightScale,p.clipBounds=b,p.pickGroup=t.pickId/255,p.pixelRatio=t.pixelRatio;for(var E=0;3>E;++E)if(c[E]&&t.projectOpacity[E]<1===r){p.scale=t.projectScale[E],p.opacity=t.projectOpacity[E];for(var A=k,O=0;16>O;++O)A[O]=0;for(var O=0;4>O;++O)A[5*O]=1;A[5*E]=0,o[E]<0?A[12+E]=y[0][E]:A[12+E]=y[1][E],g(A,d,A),p.model=A;var M=(E+1)%3,_=(E+2)%3,D=u(x),P=u(T);D[M]=1,P[_]=1;var H=i(m,v,d,a(N,D)),B=i(m,v,d,a(C,P));if(Math.abs(H[1])>Math.abs(B[1])){var j=H;H=B,B=j,j=D,D=P,P=j;var F=M;M=_,_=F}H[0]<0&&(D[M]=-1),B[1]>0&&(P[_]=-1);for(var I=0,q=0,O=0;4>O;++O)I+=Math.pow(d[4*M+O],2),q+=Math.pow(d[4*_+O],2);D[M]/=Math.sqrt(I),P[_]/=Math.sqrt(q),p.axes[0]=D,p.axes[1]=P,p.fragClipBounds[0]=f(L,b[0],E,-1e8),p.fragClipBounds[1]=f(L,b[1],E,1e8),t.vao.draw(h.TRIANGLES,t.vertexCount),t.lineWidth>0&&(h.lineWidth(t.lineWidth),t.vao.draw(h.LINES,t.lineVertexCount,t.vertexCount))}}function h(e,t,n,r,i,s){var o=n.gl;if(n.vao.bind(),i===n.opacity<1||s){e.bind();var u=e.uniforms;u.model=r.model||w,u.view=r.view||w,u.projection=r.projection||w,S[0]=2/o.drawingBufferWidth,S[1]=2/o.drawingBufferHeight,u.screenSize=S,u.highlightId=n.highlightId,u.highlightScale=n.highlightScale,u.fragClipBounds=_,u.clipBounds=n.axes.bounds,u.opacity=n.opacity,u.pickGroup=n.pickId/255,u.pixelRatio=n.pixelRatio,n.vao.draw(o.TRIANGLES,n.vertexCount),n.lineWidth>0&&(o.lineWidth(n.lineWidth),n.vao.draw(o.LINES,n.lineVertexCount,n.vertexCount))}c(t,n,r,i,s),n.vao.unbind()}function p(e){var t=e.gl,n=y.createPerspective(t),r=y.createOrtho(t),i=y.createProject(t),s=y.createPickPerspective(t),u=y.createPickOrtho(t),a=y.createPickProject(t),f=d(t),l=d(t),c=d(t),h=d(t),p=v(t,[{buffer:f,size:3,type:t.FLOAT},{buffer:l,size:4,type:t.FLOAT},{buffer:c,size:2,type:t.FLOAT},{buffer:h,size:4,type:t.UNSIGNED_BYTE,normalized:!0}]),m=new o(t,n,r,i,f,l,c,h,p,s,u,a);return m.update(e),m}var d=e("gl-buffer"),v=e("gl-vao"),m=e("typedarray-pool"),g=e("gl-mat4/multiply"),y=e("./lib/shaders"),b=e("./lib/glyphs"),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];t.exports=p;var E=o.prototype;E.pickSlots=1,E.setPickBase=function(e){this.pickId=e},E.isTransparent=function(){if(this.opacity<1)return!0;for(var e=0;3>e;++e)if(this.axesProject[e]&&this.projectOpacity[e]<1)return!0;return!1},E.isOpaque=function(){if(this.opacity>=1)return!0;for(var e=0;3>e;++e)if(this.axesProject[e]&&this.projectOpacity[e]>=1)return!0;return!1};var S=[0,0],x=[0,0,0],T=[0,0,0],N=[0,0,0,1],C=[0,0,0,1],k=w.slice(),L=[0,0,0],A=[[0,0,0],[0,0,0]],O=[-1e8,-1e8,-1e8],M=[1e8,1e8,1e8],_=[O,M];E.draw=function(e){var t=this.useOrtho?this.orthoShader:this.shader;h(t,this.projectShader,this,e,!1,!1)},E.drawTransparent=function(e){var t=this.useOrtho?this.orthoShader:this.shader;h(t,this.projectShader,this,e,!0,!1)},E.drawPick=function(e){var t=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;h(t,this.pickProjectShader,this,e,!1,!0)},E.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[2]+(e.value[1]<<8)+(e.value[0]<<16);if(t>=this.pointCount||0>t)return null;var n=this.points[t],r=this._selectResult;r.index=t;for(var i=0;3>i;++i)r.position[i]=r.dataCoordinate[i]=n[i];return r},E.highlight=function(e){if(e){var t=e.index,n=255&t,r=t>>8&255,i=t>>16&255;this.highlightId=[n/255,r/255,i/255,0]}else this.highlightId=[1,1,1,1]},E.update=function(e){if(e=e||{},"perspective"in e&&(this.useOrtho=!e.perspective),"orthographic"in e&&(this.useOrtho=!!e.orthographic),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"project"in e)if(Array.isArray(e.project))this.axesProject=e.project;else{var t=!!e.project;this.axesProject=[t,t,t]}if("projectScale"in e)if(Array.isArray(e.projectScale))this.projectScale=e.projectScale.slice();else{var n=+e.projectScale;this.projectScale=[n,n,n]}if("projectOpacity"in e)if(Array.isArray(e.projectOpacity))this.projectOpacity=e.projectOpacity.slice();else{var n=+e.projectOpacity;this.projectOpacity=[n,n,n]}"opacity"in e&&(this.opacity=e.opacity),this.dirty=!0;var r=e.position;if(r){var i=e.font||"normal",s=e.alignment||[0,0],o=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0],a=e.glyph,f=e.color,l=e.size,c=e.angle,h=e.lineColor,p=0,d=0,v=0,g=r.length;e:for(var y=0;g>y;++y){for(var w=r[y],E=0;3>E;++E)if(isNaN(w[E])||!isFinite(w[E]))continue e;var S;S=Array.isArray(a)?b(a[y],i):a?b(a,i):b("",i);var x=S[0],T=S[1],N=S[2];d+=3*x.cells.length,v+=2*T.edges.length}var C=d+v,k=m.mallocFloat(3*C),L=m.mallocFloat(4*C),A=m.mallocFloat(2*C),O=m.mallocUint32(C),M=[0,s[1]],_=0,D=d,P=[0,0,0,1],H=[0,0,0,1],B=Array.isArray(f)&&Array.isArray(f[0]),j=Array.isArray(h)&&Array.isArray(h[0]);e:for(var y=0;g>y;++y){for(var w=r[y],E=0;3>E;++E){if(isNaN(w[E])||!isFinite(w[E])){p+=1;continue e}u[E]=Math.max(u[E],w[E]),o[E]=Math.min(o[E],w[E])}var S;S=Array.isArray(a)?b(a[y],i):a?b(a,i):b("",i);var x=S[0],T=S[1],N=S[2];if(Array.isArray(f)){var F;if(F=B?f[y]:f,3===F.length){for(var E=0;3>E;++E)P[E]=F[E];P[3]=1}else if(4===F.length)for(var E=0;4>E;++E)P[E]=F[E]}else P[0]=P[1]=P[2]=0,P[3]=1;if(Array.isArray(h)){var F;if(F=j?h[y]:h,3===F.length){for(var E=0;3>E;++E)H[E]=F[E];H[E]=1}else if(4===F.length)for(var E=0;4>E;++E)H[E]=F[E]}else H[0]=H[1]=H[2]=0,H[3]=1;var I=.5;Array.isArray(l)?I=+l[y]:l?I=+l:this.useOrtho&&(I=12);var q=0;Array.isArray(c)?q=+c[y]:c&&(q=+c);for(var R=Math.cos(q),U=Math.sin(q),w=r[y],E=0;3>E;++E)u[E]=Math.max(u[E],w[E]),o[E]=Math.min(o[E],w[E]);s[0]<0?M[0]=s[0]*(1+N[1][0]):s[0]>0&&(M[0]=-s[0]*(1+N[0][0]));for(var z=x.cells,W=x.positions,E=0;E<z.length;++E)for(var X=z[E],V=0;3>V;++V){for(var $=0;3>$;++$)k[3*_+$]=w[$];for(var $=0;4>$;++$)L[4*_+$]=P[$];O[_]=p;var J=W[X[V]];A[2*_]=I*(R*J[0]-U*J[1]+M[0]),A[2*_+1]=I*(U*J[0]+R*J[1]+M[1]),_+=1}for(var z=T.edges,W=T.positions,E=0;E<z.length;++E)for(var X=z[E],V=0;2>V;++V){for(var $=0;3>$;++$)k[3*D+$]=w[$];for(var $=0;4>$;++$)L[4*D+$]=H[$];O[D]=p;var J=W[X[V]];A[2*D]=I*(R*J[0]-U*J[1]+M[0]),A[2*D+1]=I*(U*J[0]+R*J[1]+M[1]),D+=1}p+=1}this.vertexCount=d,this.lineVertexCount=v,this.pointBuffer.update(k),this.colorBuffer.update(L),this.glyphBuffer.update(A),this.idBuffer.update(new Uint32Array(O)),m.free(k),m.free(L),m.free(A),m.free(O),this.bounds=[o,u],this.points=r,this.pointCount=r.length}},E.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/glyphs":132,"./lib/shaders":133,"gl-buffer":59,"gl-mat4/multiply":80,"gl-vao":166,"typedarray-pool":217}],135:[function(e,t,n){"use strict";n.boxVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n",n.boxFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"},{}],136:[function(e,t,n){"use strict";function r(e,t,n){this.plot=e,this.boxBuffer=t,this.boxShader=n,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}function i(e,t){var n=e.gl,i=o(n,[0,0,0,1,1,0,1,1]),a=s(n,u.boxVertex,u.boxFragment),f=new r(e,i,a);return f.update(t),e.addOverlay(f),f}var s=e("gl-shader"),o=e("gl-buffer"),u=e("./lib/shaders");t.exports=i;var a=r.prototype;a.draw=function(){if(this.enabled){var e=this.plot,t=this.selectBox,n=this.borderWidth,r=(this.innerFill,this.innerColor),i=(this.outerFill,this.outerColor),s=this.borderColor,o=e.box,u=e.screenBox,a=e.dataBox,f=e.viewBox,l=e.pixelRatio,c=(t[0]-a[0])*(f[2]-f[0])/(a[2]-a[0])+f[0],h=(t[1]-a[1])*(f[3]-f[1])/(a[3]-a[1])+f[1],p=(t[2]-a[0])*(f[2]-f[0])/(a[2]-a[0])+f[0],d=(t[3]-a[1])*(f[3]-f[1])/(a[3]-a[1])+f[1];if(c=Math.max(c,f[0]),h=Math.max(h,f[1]),p=Math.min(p,f[2]),d=Math.min(d,f[3]),!(c>p||h>d)){o.bind();var v=u[2]-u[0],m=u[3]-u[1];if(this.outerFill&&(o.drawBox(0,0,v,h,i),o.drawBox(0,h,c,d,i),o.drawBox(0,d,v,m,i),o.drawBox(p,h,v,d,i)),this.innerFill&&o.drawBox(c,h,p,d,r),n>0){var g=n*l;o.drawBox(c-g,h-g,p+g,h+g,s),o.drawBox(c-g,d-g,p+g,d+g,s),o.drawBox(c-g,h-g,c+g,d+g,s),o.drawBox(p-g,h-g,p+g,d+g,s)}}}},a.update=function(e){e=e||{},this.innerFill=!!e.innerFill,this.outerFill=!!e.outerFill,this.innerColor=(e.innerColor||[0,0,0,.5]).slice(),this.outerColor=(e.outerColor||[0,0,0,.5]).slice(),this.borderColor=(e.borderColor||[0,0,0,1]).slice(),this.borderWidth=e.borderWidth||0,this.selectBox=(e.selectBox||this.selectBox).slice()},a.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":135,"gl-buffer":59,"gl-shader":138}],137:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.coord=[e,t],this.id=n,this.value=r,this.distance=i}function i(e,t,n){this.gl=e,this.fbo=t,this.buffer=n,this._readTimeout=null;var r=this;this._readCallback=function(){r.gl&&(t.bind(),e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,r.buffer),r._readTimeout=null)}}function s(e,t){var n=o(e,t),r=u.mallocUint8(t[0]*t[1]*4);return new i(e,n,r)}t.exports=s;var o=e("gl-fbo"),u=e("typedarray-pool"),a=e("ndarray"),f=e("bit-twiddle").nextPow2,l=e("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(255>_inline_7_arg0_||255>_inline_7_arg1_||255>_inline_7_arg2_||255>_inline_7_arg3_){var _inline_7_l=_inline_7_arg4_-_inline_7_arg6_[0],_inline_7_a=_inline_7_arg5_-_inline_7_arg6_[1],_inline_7_f=_inline_7_l*_inline_7_l+_inline_7_a*_inline_7_a;_inline_7_f<this_closestD2&&(this_closestD2=_inline_7_f,this_closestX=_inline_7_arg6_[0],this_closestY=_inline_7_arg6_[1])}}",args:[{name:"_inline_7_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_7_a","_inline_7_f","_inline_7_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),c=i.prototype;Object.defineProperty(c,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var t=this.fbo.shape[0],n=this.fbo.shape[1];if(n*t*4>this.buffer.length){u.free(this.buffer);for(var r=this.buffer=u.mallocUint8(f(n*t*4)),i=0;n*t*4>i;++i)r[i]=255}return e}}}),c.begin=function(){var e=this.gl;this.shape,e&&(this.fbo.bind(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))},c.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},c.query=function(e,t,n){if(!this.gl)return null;var i=this.fbo.shape.slice();e=0|e,t=0|t,"number"!=typeof n&&(n=1);var s=0|Math.min(Math.max(e-n,0),i[0]),o=0|Math.min(Math.max(e+n,0),i[0]),u=0|Math.min(Math.max(t-n,0),i[1]),f=0|Math.min(Math.max(t+n,0),i[1]);if(s>=o||u>=f)return null;var c=[o-s,f-u],h=a(this.buffer,[c[0],c[1],4],[4,4*i[0],1],4*(s+i[0]*u)),p=l(h.hi(c[0],c[1],1),n,n),d=p[0],v=p[1];if(0>d||Math.pow(this.radius,2)<p[2])return null;var m=h.get(d,v,0),g=h.get(d,v,1),y=h.get(d,v,2),b=h.get(d,v,3);return new r(d+s|0,v+u|0,m,[g,y,b],Math.sqrt(p[2]))},c.dispose=function(){this.gl&&(this.fbo.dispose(),u.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":33,"cwise/lib/wrapper":48,"gl-fbo":64,ndarray:189,"typedarray-pool":217}],138:[function(e,t,n){"use strict";function r(e){this.gl=e,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function i(e,t){return e.name<t.name?-1:1}function s(e,t,n,i,s){var o=new r(e);return o.update(t,n,i,s),o}var o=e("./lib/create-uniforms"),u=e("./lib/create-attributes"),a=e("./lib/reflect"),f=e("./lib/shader-cache"),l=e("./lib/runtime-reflect"),c=r.prototype;c.bind=function(){this.program||this._relink(),this.gl.useProgram(this.program)},c.dispose=function(){this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(e,t,n,r){function s(){h.program=f.program(p,h._vref,h._fref,b,w);for(var e=0;e<n.length;++e)k[e]=p.getUniformLocation(h.program,n[e].name)}if(!t||1===arguments.length){var c=e;e=c.vertex,t=c.fragment,n=c.uniforms,r=c.attributes}var h=this,p=h.gl,d=h._vref;h._vref=f.shader(p,p.VERTEX_SHADER,e),d&&d.dispose(),h.vertShader=h._vref.shader;var v=this._fref;if(h._fref=f.shader(p,p.FRAGMENT_SHADER,t),v&&v.dispose(),h.fragShader=h._fref.shader,!n||!r){var m=p.createProgram();if(p.attachShader(m,h.fragShader),p.attachShader(m,h.vertShader),p.linkProgram(m),!p.getProgramParameter(m,p.LINK_STATUS)){var g=p.getProgramInfoLog(m);throw console.error("gl-shader: Error linking program:",g),new Error("gl-shader: Error linking program:"+g)}n=n||l.uniforms(p,m),r=r||l.attributes(p,m),p.deleteProgram(m)}r=r.slice(),r.sort(i);for(var y=[],b=[],w=[],E=0;E<r.length;++E){var S=r[E];if(S.type.indexOf("mat")>=0){for(var x=0|S.type.charAt(S.type.length-1),T=new Array(x),N=0;x>N;++N)T[N]=w.length,b.push(S.name+"["+N+"]"),"number"==typeof S.location?w.push(S.location+N):Array.isArray(S.location)&&S.location.length===x&&"number"==typeof S.location[N]?w.push(0|S.location[N]):w.push(-1);y.push({name:S.name,type:S.type,locations:T})}else y.push({name:S.name,type:S.type,locations:[w.length]}),b.push(S.name),"number"==typeof S.location?w.push(0|S.location):w.push(-1)}for(var C=0,E=0;E<w.length;++E)if(w[E]<0){for(;w.indexOf(C)>=0;)C+=1;w[E]=C}var k=new Array(n.length);s(),h._relink=s,h.types={uniforms:a(n),attributes:a(r)},h.attributes=u(p,h,y,w),Object.defineProperty(h,"uniforms",o(p,h,n,k))},t.exports=s},{"./lib/create-attributes":139,"./lib/create-uniforms":140,"./lib/reflect":141,"./lib/runtime-reflect":142,"./lib/shader-cache":143}],139:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){this._gl=e,this._wrapper=t,this._index=n,this._locations=r,this._dimension=i,this._constFunc=s}function i(e,t,n,i,s,o,u){for(var a=["gl","v"],f=[],l=0;s>l;++l)a.push("x"+l),f.push("x"+l);a.push("if(x0.length===void 0){return gl.vertexAttrib"+s+"f(v,"+f.join()+")}else{return gl.vertexAttrib"+s+"fv(v,x0)}");var c=Function.apply(null,a),h=new r(e,t,n,i,s,c);Object.defineProperty(o,u,{set:function(t){return e.disableVertexAttribArray(i[n]),c(e,i[n],t),t},get:function(){return h},enumerable:!0})}function s(e,t,n,r,s,o,u){for(var a=new Array(s),f=new Array(s),l=0;s>l;++l)i(e,t,n[l],r,s,a,l),f[l]=a[l];Object.defineProperty(a,"location",{set:function(e){if(Array.isArray)for(var t=0;s>t;++t)f[t].location=e[t];else for(var t=0;s>t;++t)result[t]=f[t].location=e+t;return e},get:function(){for(var e=new Array(s),t=0;s>t;++t)e[t]=r[n[t]];return e},enumerable:!0}),a.pointer=function(t,i,o,u){t=t||e.FLOAT,i=!!i,o=o||s*s,u=u||0;for(var a=0;s>a;++a){var f=r[n[a]];e.vertexAttribPointer(f,s,t,i,o,u+a*s),e.enableVertexAttribArray(f)}};var c=new Array(s),h=e["vertexAttrib"+s+"fv"];Object.defineProperty(o,u,{set:function(t){for(var i=0;s>i;++i){var o=r[n[i]];if(e.disableVertexAttribArray(o),Array.isArray(t[0]))h.call(e,o,t[i]);else{for(var u=0;s>u;++u)c[u]=t[s*i+u];h.call(e,o,c)}}return t},get:function(){return a},enumerable:!0})}function o(e,t,n,r){for(var o={},u=0,f=n.length;f>u;++u){var l=n[u],c=l.name,h=l.type,p=l.locations;switch(h){case"bool":case"int":case"float":i(e,t,p[0],r,1,o,c);break;default:if(h.indexOf("vec")>=0){var d=h.charCodeAt(h.length-1)-48;if(2>d||d>4)throw new Error("gl-shader: Invalid data type for attribute "+c+": "+h);i(e,t,p[0],r,d,o,c)}else{if(!(h.indexOf("mat")>=0))throw new Error("gl-shader: Unknown data type for attribute "+c+": "+h);var d=h.charCodeAt(h.length-1)-48;if(2>d||d>4)throw new Error("gl-shader: Invalid data type for attribute "+c+": "+h);s(e,t,p,r,d,o,c)}}}return o}t.exports=o;var u=r.prototype;u.pointer=function(e,t,n,r){var i=this,s=i._gl,o=i._locations[i._index];s.vertexAttribPointer(o,i._dimension,e||s.FLOAT,!!t,n||0,r||0),s.enableVertexAttribArray(o)},u.set=function(e,t,n,r){return this._constFunc(this._locations[this._index],e,t,n,r)},Object.defineProperty(u,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}})},{}],140:[function(e,t,n){"use strict";function r(e){var t=new Function("y","return function(){return y}");return t(e)}function i(e,t){for(var n=new Array(e),r=0;e>r;++r)n[r]=t;return n}function s(e,t,n,s){function u(n){var r=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+n+"])}");return r(e,t,s)}function a(e,t,n){switch(n){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var r=n.indexOf("vec");if(!(r>=0&&1>=r&&n.length===4+r)){if(0===n.indexOf("mat")&&4===n.length){var i=n.charCodeAt(n.length-1)-48;if(2>i||i>4)throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+n);return"gl.uniformMatrix"+i+"fv(locations["+t+"],false,obj"+e+")"}throw new Error("gl-shader: Unknown uniform data type for "+name+": "+n)}var i=n.charCodeAt(n.length-1)-48;if(2>i||i>4)throw new Error("gl-shader: Invalid data type");switch(n.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+i+"fv(locations["+t+"],obj"+e+")";default:throw new Error("gl-shader: Unrecognized data type for vector "+name+": "+n)}}}function f(e,t){if("object"!=typeof t)return[[e,t]];var n=[];for(var r in t){var i=t[r],s=e;s+=parseInt(r)+""===r?"["+r+"]":"."+r,"object"==typeof i?n.push.apply(n,f(s,i)):n.push([s,i])}return n}function l(t){for(var r=["return function updateProperty(obj){"],i=f("",t),o=0;o<i.length;++o){var u=i[o],l=u[0],c=u[1];s[c]&&r.push(a(l,c,n[c].type))}r.push("return obj}");var h=new Function("gl","locations",r.join("\n"));return h(e,s)}function c(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var t=e.indexOf("vec");if(t>=0&&1>=t&&e.length===4+t){var n=e.charCodeAt(e.length-1)-48;if(2>n||n>4)throw new Error("gl-shader: Invalid data type");return"b"===e.charAt(0)?i(n,!1):i(n,0)}if(0===e.indexOf("mat")&&4===e.length){var n=e.charCodeAt(e.length-1)-48;if(2>n||n>4)throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+e);return i(n*n,0)}throw new Error("gl-shader: Unknown uniform data type for "+name+": "+e)}}function h(e,t,i){if("object"==typeof i){var o=p(i);Object.defineProperty(e,t,{get:r(o),set:l(i),enumerable:!0,configurable:!1})}else s[i]?Object.defineProperty(e,t,{get:u(i),set:l(i),enumerable:!0,configurable:!1}):e[t]=c(n[i].type)}function p(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var n=0;n<e.length;++n)h(t,n,e[n])}else{t={};for(var r in e)h(t,r,e[r])}return t}var d=o(n,!0);return{get:r(p(d)),set:l(d),enumerable:!0,configurable:!0}}var o=e("./reflect");t.exports=s},{"./reflect":141}],141:[function(e,t,n){"use strict";function r(e,t){for(var n={},r=0;r<e.length;++r)for(var i=e[r].name,s=i.split("."),o=n,u=0;u<s.length;++u){var a=s[u].split("[");if(a.length>1){a[0]in o||(o[a[0]]=[]),o=o[a[0]];for(var f=1;f<a.length;++f){var l=parseInt(a[f]);f<a.length-1||u<s.length-1?(l in o||(f<a.length-1?o[l]=[]:o[l]={}),o=o[l]):t?o[l]=r:o[l]=e[r].type}}else u<s.length-1?(a[0]in o||(o[a[0]]={}),o=o[a[0]]):t?o[a[0]]=r:o[a[0]]=e[r].type}return n}t.exports=r},{}],142:[function(e,t,n){"use strict";function r(e,t){if(!u){var n=Object.keys(o);u={};for(var r=0;r<n.length;++r){var i=n[r];u[e[i]]=o[i]}}return u[t]}function i(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=[],s=0;n>s;++s){var o=e.getActiveUniform(t,s);if(o){var u=r(e,o.type);if(o.size>1)for(var a=0;a<o.size;++a)i.push({name:o.name.replace("[0]","["+a+"]"),type:u});else i.push({name:o.name,type:u})}}return i}function s(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=[],s=0;n>s;++s){var o=e.getActiveAttrib(t,s);o&&i.push({name:o.name,type:r(e,o.type)})}return i}n.uniforms=i,n.attributes=s;var o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},u=null},{}],143:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){this.id=e,this.src=t,this.type=n,this.shader=r,this.count=s,this.programs=[],this.cache=o}function i(e){this.gl=e,this.shaders=[{},{}],this.programs={}}function s(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(r);throw console.error("gl-shader: Error compiling shader:",i),new Error("gl-shader: Error compiling shader:"+i)}return r}function o(e,t,n,r,i){var s=e.createProgram();e.attachShader(s,t),e.attachShader(s,n);for(var o=0;o<r.length;++o)e.bindAttribLocation(s,i[o],r[o]);if(e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS)){var u=e.getProgramInfoLog(s);throw console.error("gl-shader: Error linking program:",u),new Error("gl-shader: Error linking program:"+u)}return s}function u(e){var t=c.get(e);return t||(t=new i(e),c.set(e,t)),t}function a(e,t,n){return u(e).getShaderReference(t,n)}function f(e,t,n,r,i){return u(e).getProgram(t,n,r,i)}n.shader=a,n.program=f;var l="undefined"==typeof WeakMap?e("weakmap-shim"):WeakMap,c=new l,h=0;r.prototype.dispose=function(){if(0===--this.count){for(var e=this.cache,t=e.gl,n=this.programs,r=0,i=n.length;i>r;++r){var s=e.programs[n[r]];s&&(delete e.programs[r],t.deleteProgram(s))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var p=i.prototype;p.getShaderReference=function(e,t){var n=this.gl,i=this.shaders[e===n.FRAGMENT_SHADER|0],o=i[t];if(o&&n.isShader(o.shader))o.count+=1;else{var u=s(n,e,t);o=i[t]=new r(h++,t,e,u,[],1,this)}return o},p.getProgram=function(e,t,n,r){var i=[e.id,t.id,n.join(":"),r.join(":")].join("@"),s=this.programs[i];return s&&this.gl.isProgram(s)||(this.programs[i]=s=o(this.gl,e.shader,t.shader,n,r),e.programs.push(i),t.programs.push(i)),s}},{"weakmap-shim":146}],144:[function(e,t,n){function r(){var e={};return function(t){if("object"==typeof t&&null!==t||"function"==typeof t){var n=t.valueOf(e);return n&&n.identity===e?n:i(t,e)}throw new Error("Weakmap-shim: Key must be object")}}var i=e("./hidden-store.js");t.exports=r},{"./hidden-store.js":145}],145:[function(e,t,n){function r(e,t){var n={identity:t},r=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?r.apply(this,arguments):n},writable:!0}),n}t.exports=r},{}],146:[function(e,t,n){function r(){var e=i();return{get:function(t,n){var r=e(t);return r.hasOwnProperty("value")?r.value:n},set:function(t,n){e(t).value=n},has:function(t){return"value"in e(t)},"delete":function(t){return delete e(t).value}}}var i=e("./create-store.js");t.exports=r},{"./create-store.js":144}],147:[function(e,t,n){"use strict";function r(e){this.plot=e,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}function i(e,t){var n=new r(e);return n.update(t),e.addOverlay(n),n}t.exports=i;var s=r.prototype;s.update=function(e){e=e||{},this.enable=(e.enable||[!0,!0,!1,!1]).slice(),this.width=(e.width||[1,1,1,1]).slice(),this.color=(e.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(e){return e.slice()}),this.center=(e.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},s.draw=function(){var e=this.enable,t=this.width,n=this.color,r=this.center,i=this.plot,s=i.line,o=i.dataBox,u=i.viewBox;if(s.bind(),o[0]<=r[0]&&r[0]<=o[2]&&o[1]<=r[1]&&r[1]<=o[3]){var a=u[0]+(r[0]-o[0])/(o[2]-o[0])*(u[2]-u[0]),f=u[1]+(r[1]-o[1])/(o[3]-o[1])*(u[3]-u[1]);e[0]&&s.drawLine(a,f,u[0],f,t[0],n[0]),e[1]&&s.drawLine(a,f,a,u[1],t[1],n[1]),e[2]&&s.drawLine(a,f,u[2],f,t[2],n[2]),e[3]&&s.drawLine(a,f,a,u[3],t[3],n[3])}},s.dispose=function(){this.plot.removeOverlay(this)}},{}],148:[function(e,t,n){var r=e("gl-shader"),i="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec4 uv;\nattribute vec2 f;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  worldCoordinate = vec3(uv.zw, f.x);\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  value = f.x;\n  kill = f.y;\n  planeCoordinate = uv.xy;\n  \n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}",s="#define GLSLIFY 1\nprecision mediump float;\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat beckmannSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution_2_0(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\n\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  if(kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = beckmannSpecular_1_1(L, V, N, roughness);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  float interpValue = (value - lowerBound.z) / (upperBound.z - lowerBound.z);\n  vec4 surfaceColor = texture2D(colormap, vec2(interpValue, interpValue));\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n",o="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec4 uv;\n\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  vec4 worldPosition = model * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z = clipPosition.z + zOffset;\n\n  gl_Position = clipPosition;\n  value = dataCoordinate.z;\n  kill = -1.0;\n  worldCoordinate = dataCoordinate;\n  planeCoordinate = uv.zw;\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n",u="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if(kill > 0.0 || \n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}";n.createShader=function(e){var t=r(e,i,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec2"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},n.createPickShader=function(e){var t=r(e,i,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec2"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},n.createContourShader=function(e){var t=r(e,o,s,null,[{name:"uv",type:"vec4"}]);return t.attributes.uv.location=0,t},n.createPickContourShader=function(e){var t=r(e,o,u,null,[{name:"uv",type:"vec4"}]);return t.attributes.uv.location=0,t}},{"gl-shader":138}],149:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{dup:4}],150:[function(e,t,n){"use strict";function r(e){if(e in a)return a[e];for(var t=[],n=0;e>n;++n)t.push("out",n,"s=0.5*(inp",n,"l-inp",n,"r);");for(var r=["array"],i=["junk"],n=0;e>n;++n){r.push("array"),i.push("out"+n+"s");var s=o(e);s[n]=-1,r.push({array:0,offset:s.slice()}),s[n]=1,r.push({array:0,offset:s.slice()}),i.push("inp"+n+"l","inp"+n+"r")}return a[e]=u({args:r,pre:l,post:l,body:{body:t.join(""),args:i.map(function(e){return{name:e,lvalue:0===e.indexOf("out"),rvalue:0===e.indexOf("inp"),count:"junk"!==e|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+e})}function i(e){function t(t){for(var n=s-t.length,r=[],i=[],u=[],a=0;s>a;++a)t.indexOf(a+1)>=0?u.push("0"):t.indexOf(-(a+1))>=0?u.push("s["+a+"]-1"):(u.push("-1"),r.push("1"),i.push("s["+a+"]-2"));var f=".lo("+r.join()+").hi("+i.join()+")";if(0===r.length&&(f=""),n>0){o.push("if(1");for(var a=0;s>a;++a)t.indexOf(a+1)>=0||t.indexOf(-(a+1))>=0||o.push("&&s[",a,"]>2");o.push("){grad",n,"(src.pick(",u.join(),")",f);for(var a=0;s>a;++a)t.indexOf(a+1)>=0||t.indexOf(-(a+1))>=0||o.push(",dst.pick(",u.join(),",",a,")",f);o.push(");")}for(var a=0;a<t.length;++a){var l=Math.abs(t[a])-1,c="dst.pick("+u.join()+","+l+")"+f;switch(e[l]){case"clamp":var h=u.slice(),p=u.slice();t[a]<0?h[l]="s["+l+"]-2":p[l]="1",0===n?o.push("if(s[",l,"]>1){dst.set(",u.join(),",",l,",0.5*(src.get(",h.join(),")-src.get(",p.join(),")))}else{dst.set(",u.join(),",",l,",0)};"):o.push("if(s[",l,"]>1){diff(",c,",src.pick(",h.join(),")",f,",src.pick(",p.join(),")",f,");}else{zero(",c,");};");break;case"mirror":0===n?o.push("dst.set(",u.join(),",",l,",0);"):o.push("zero(",c,");");break;case"wrap":var d=u.slice(),v=u.slice();t[a]<0?(d[l]="s["+l+"]-2",v[l]="0"):(d[l]="s["+l+"]-1",v[l]="1"),0===n?o.push("if(s[",l,"]>2){dst.set(",u.join(),",",l,",0.5*(src.get(",d.join(),")-src.get(",v.join(),")))}else{dst.set(",u.join(),",",l,",0)};"):o.push("if(s[",l,"]>2){diff(",c,",src.pick(",d.join(),")",f,",src.pick(",v.join(),")",f,");}else{zero(",c,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}n>0&&o.push("};")}var n=e.join(),i=f[n];if(i)return i;for(var s=e.length,o=["function gradient(dst,src){var s=src.shape.slice();"],u=0;1<<s>u;++u){for(var l=[],p=0;s>p;++p)u&1<<p&&l.push(p+1);for(var d=0;d<1<<l.length;++d){for(var v=l.slice(),p=0;p<l.length;++p)d&1<<p&&(v[p]=-v[p]);t(v)}}o.push("return dst;};return gradient");for(var m=["diff","zero"],g=[c,h],u=1;s>=u;++u)m.push("grad"+u),g.push(r(u));m.push(o.join(""));var y=Function.apply(void 0,m),i=y.apply(void 0,g);return a[n]=i,i}function s(e,t,n){if(Array.isArray(n)){if(n.length!==t.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else n="string"==typeof n?o(t.dimension,n):o(t.dimension,"clamp");if(e.dimension!==t.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(e.shape[t.dimension]!==t.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var r=0;r<t.dimension;++r)if(e.shape[r]!==t.shape[r])throw new Error("ndarray-gradient: shape mismatch");if(0===t.size)return e;if(t.dimension<=0)return e.set(0),e;var s=i(n);return s(e,t)}t.exports=s;var o=e("dup"),u=e("cwise-compiler"),a={},f={},l={body:"",args:[],thisVars:[],localVars:[]},c=u({args:["array","array","array"],pre:l,post:l,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),h=u({args:["array"],pre:l,post:l,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":151,dup:55}],151:[function(e,t,n){arguments[4][49][0].apply(n,arguments)},{"./lib/thunk.js":153,dup:49}],152:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{dup:50,uniq:154}],153:[function(e,t,n){arguments[4][51][0].apply(n,arguments)},{"./compile.js":152,dup:51}],154:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],155:[function(e,t,n){"use strict";var r=e("ndarray"),i=e("./doConvert.js");t.exports=function(e,t){for(var n=[],s=e,o=1;s instanceof Array;)n.push(s.length),o*=s.length,s=s[0];return 0===n.length?r():(t||(t=r(new Float64Array(o),n)),i(t,e),t)}},{"./doConvert.js":156,ndarray:189}],156:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":157}],157:[function(e,t,n){"use strict";function r(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(e){var t=new r;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n.slice(0);for(var i=0;i<n.length;++i){var o=n[i];if("array"===o){if(t.arrayArgs.push(i),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===o){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+n[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,s(t)}var s=e("./lib/thunk.js");t.exports=i},{"./lib/thunk.js":159}],158:[function(e,t,n){"use strict";function r(e,t,n){var r,i,s=e.length,o=t.arrayArgs.length,u=t.indexArgs.length>0,a=[],f=[],l=0,c=0;for(r=0;s>r;++r)f.push(["i",r,"=0"].join(""));for(i=0;o>i;++i)for(r=0;s>r;++r)c=l,l=e[r],0===r?f.push(["d",i,"s",r,"=t",i,"[",l,"]"].join("")):f.push(["d",i,"s",r,"=(t",i,"[",l,"]-s",c,"*t",i,"[",c,"])"].join(""));for(a.push("var "+f.join(",")),r=s-1;r>=0;--r)l=e[r],a.push(["for(i",r,"=0;i",r,"<s",l,";++i",r,"){"].join(""));for(a.push(n),r=0;s>r;++r){for(c=l,l=e[r],i=0;o>i;++i)a.push(["p",i,"+=d",i,"s",r].join(""));u&&(r>0&&a.push(["index[",c,"]-=s",c].join("")),a.push(["++index[",l,"]"].join(""))),a.push("}")}return a.join("\n")}function i(e,t,n,i){for(var s=t.length,o=n.arrayArgs.length,u=n.blockSize,a=n.indexArgs.length>0,f=[],l=0;o>l;++l)f.push(["var offset",l,"=p",l].join(""));for(var l=e;s>l;++l)f.push(["for(var j"+l+"=SS[",t[l],"]|0;j",l,">0;){"].join("")),f.push(["if(j",l,"<",u,"){"].join("")),f.push(["s",t[l],"=j",l].join("")),f.push(["j",l,"=0"].join("")),f.push(["}else{s",t[l],"=",u].join("")),f.push(["j",l,"-=",u,"}"].join("")),a&&f.push(["index[",t[l],"]=j",l].join(""));for(var l=0;o>l;++l){for(var c=["offset"+l],h=e;s>h;++h)c.push(["j",h,"*t",l,"[",t[h],"]"].join(""));f.push(["p",l,"=(",c.join("+"),")"].join(""))}f.push(r(t,n,i));for(var l=e;s>l;++l)f.push("}");return f.join("\n")}function s(e){for(var t=0,n=e[0].length;n>t;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}function o(e,t,n){for(var r=e.body,i=[],s=[],o=0;o<e.args.length;++o){var u=e.args[o];if(!(u.count<=0)){var a=new RegExp(u.name,"g"),f="",l=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var c=t.offsetArgIndex.indexOf(o),h=t.offsetArgs[c];l=h.array,f="+q"+c;case"array":f="p"+l+f;var p="l"+o,d="a"+l;1===u.count?"generic"===n[l]?u.lvalue?(i.push(["var ",p,"=",d,".get(",f,")"].join("")),r=r.replace(a,p),s.push([d,".set(",f,",",p,")"].join(""))):r=r.replace(a,[d,".get(",f,")"].join("")):r=r.replace(a,[d,"[",f,"]"].join("")):"generic"===n[l]?(i.push(["var ",p,"=",d,".get(",f,")"].join("")),r=r.replace(a,p),u.lvalue&&s.push([d,".set(",f,",",p,")"].join(""))):(i.push(["var ",p,"=",d,"[",f,"]"].join("")),r=r.replace(a,p),u.lvalue&&s.push([d,"[",f,"]=",p].join("")));break;case"scalar":r=r.replace(a,"Y"+t.scalarArgs.indexOf(o));break;case"index":r=r.replace(a,"index");break;case"shape":r=r.replace(a,"shape")}}}return[i.join("\n"),r,s.join("\n")].join("\n").trim()}function u(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],s=i.match(/\d+/);s=s?s[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+s:t[r]=i.charAt(0)+s,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}function a(e,t){for(var n=0|t[1].length,a=new Array(e.arrayArgs.length),l=new Array(e.arrayArgs.length),c=["SS"],h=["'use strict'"],p=[],d=0;n>d;++d)p.push(["s",d,"=SS[",d,"]"].join(""));for(var v=0;v<e.arrayArgs.length;++v)c.push("a"+v),c.push("t"+v),c.push("p"+v),l[v]=t[2*v],a[v]=t[2*v+1];for(var v=0;v<e.scalarArgs.length;++v)c.push("Y"+v);if(e.shapeArgs.length>0&&p.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var m=new Array(n),v=0;n>v;++v)m[v]="0";p.push(["index=[",m.join(","),"]"].join(""))}for(var v=0;v<e.offsetArgs.length;++v){for(var g=e.offsetArgs[v],y=[],d=0;d<g.offset.length;++d)0!==g.offset[d]&&(1===g.offset[d]?y.push(["t",g.array,"[",d,"]"].join("")):y.push([g.offset[d],"*t",g.array,"[",d,"]"].join("")));0===y.length?p.push("q"+v+"=0"):p.push(["q",v,"=(",y.join("+"),")|0"].join(""))}var b=f([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));p=p.concat(b),h.push("var "+p.join(","));for(var v=0;v<e.arrayArgs.length;++v)h.push("p"+v+"|=0");e.pre.body.length>3&&h.push(o(e.pre,e,l));var w=o(e.body,e,l),E=s(a);n>E?h.push(i(E,a[0],e,w)):h.push(r(a[0],e,w)),e.post.body.length>3&&h.push(o(e.post,e,l)),e.debug&&console.log("Generated cwise routine for ",t,":\n\n",h.join("\n"));var S=[e.funcName||"unnamed","_cwise_loop_",a[0].join("s"),"m",E,u(l)].join(""),x=new Function(["function ",S,"(",c.join(","),"){",h.join("\n"),"} return ",S].join(""));return x()}var f=e("uniq");t.exports=a},{uniq:160}],159:[function(e,t,n){"use strict";function r(e){var t=["'use strict'","var CACHED={}"],n=[],r=e.funcName+"_cwise_thunk";t.push(["return function ",r,"(",e.shimArgs.join(","),"){"].join(""));for(var s=[],o=[],u=[["array",e.arrayArgs[0],".shape"].join("")],a=0;a<e.arrayArgs.length;++a){var f=e.arrayArgs[a];n.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),s.push("t"+f),s.push("r"+f),o.push("t"+f),o.push("r"+f+".join()"),u.push("array"+f+".data"),u.push("array"+f+".stride"),u.push("array"+f+".offset|0")}for(var a=0;a<e.scalarArgs.length;++a)u.push("scalar"+e.scalarArgs[a]);n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",u.join(","),")}"].join("")),e.debug&&console.log("Generated thunk:",t.join("\n"));var l=new Function("compile",t.join("\n"));return l(i.bind(void 0,e))}var i=e("./compile.js");t.exports=r},{"./compile.js":158}],160:[function(e,t,n){"use strict";function r(e,t){for(var n=1,r=e.length,i=e[0],s=e[0],o=1;r>o;++o)if(s=i,i=e[o],t(i,s)){if(o===n){n++;continue}e[n++]=i}return e.length=n,e}function i(e){for(var t=1,n=e.length,r=e[0],i=e[0],s=1;n>s;++s,i=r)if(i=r,r=e[s],r!==i){if(s===t){t++;continue}e[t++]=r}return e.length=t,e}function s(e,t,n){return 0===e.length?[]:t?(n||e.sort(t),r(e,t)):(n||e.sort(),i(e))}t.exports=s},{}],161:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.position=e,this.index=t,this.uv=n,this.level=r,this.dataCoordinate=i}function i(e){var t=w([y({colormap:e,nshades:256,format:"rgba"}).map(function(e){return[e[0],e[1],e[2],255*e[3]]})]);return b.divseq(t,255),t}function s(e,t,n,i,s,o,u,a,f,l,c,h,p,d){this.gl=e,this.shape=t,this.bounds=n,this._shader=i,this._pickShader=s,this._coordinateBuffer=o,this._vao=u,this._colorMap=a,this._contourShader=f,this._contourPickShader=l,this._contourBuffer=c,this._contourVAO=h,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new r([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=p,this._dynamicVAO=d,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this._field=[E(g.mallocFloat(1024),[0,0]),E(g.mallocFloat(1024),[0,0]),E(g.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.dirty=!0}function o(e,t){for(var n=t.axes&&t.axes.lastCubeProps.axis||j,r=t.showSurface,i=t.showContour,s=0;3>s;++s){r=r||t.surfaceProject[s];for(var o=0;3>o;++o)i=i||t.contourProject[s][o]}for(var s=0;3>s;++s){for(var u=F.projections[s],o=0;16>o;++o)u[o]=0;for(var o=0;4>o;++o)u[5*o]=1;u[5*s]=0,u[12+s]=t.axesBounds[+(n[s]>0)][s],x(u,e.model,u);for(var a=F.clipBounds[s],f=0;2>f;++f)for(var o=0;3>o;++o)a[f][o]=e.clipBounds[f][o];a[0][s]=-1e8,a[1][s]=1e8}return F.showSurface=r,F.showContour=i,F}function u(e,t){e=e||{};var n=this.gl;n.disable(n.CULL_FACE),this._colorMap.bind(0);var r=I;r.model=e.model||D,r.view=e.view||D,r.projection=e.projection||D,r.lowerBound=this.bounds[0],r.upperBound=this.bounds[1],r.contourColor=this.contourColor[0],r.inverseModel=T(r.inverseModel,r.model);for(var i=0;2>i;++i)for(var s=r.clipBounds[i],u=0;3>u;++u)s[u]=Math.min(Math.max(this.clipBounds[i][u],-1e8),1e8);r.kambient=this.ambientLight,r.kdiffuse=this.diffuseLight,r.kspecular=this.specularLight,r.shape=r.roughness=this.roughness,r.fresnel=this.fresnel,r.opacity=this.opacity,r.height=0,r.permutation=R;var a=q;x(a,r.view,r.model),x(a,r.projection,a),T(a,a);for(var i=0;3>i;++i)r.eyePosition[i]=a[12+i]/a[15];for(var f=a[15],i=0;3>i;++i)f+=this.lightPosition[i]*a[4*i+3];for(var i=0;3>i;++i){for(var l=a[12+i],u=0;3>u;++u)l+=a[4*u+i]*this.lightPosition[u];r.lightPosition[i]=l/f}var c=o(r,this);if(c.showSurface&&t===this.opacity<1){this._shader.bind(),this._shader.uniforms=r,this._vao.bind(),this.showSurface&&this._vao.draw(n.TRIANGLES,this._vertexCount);for(var i=0;3>i;++i)this.surfaceProject[i]&&(this._shader.uniforms.model=c.projections[i],this._shader.uniforms.clipBounds=c.clipBounds[i],this._vao.draw(n.TRIANGLES,this._vertexCount));this._vao.unbind()}if(c.showContour&&!t){var h=this._contourShader;r.kambient=1,r.kdiffuse=0,r.kspecular=0,r.opacity=1,h.bind(),h.uniforms=r;var p=this._contourVAO;p.bind();for(var i=0;3>i;++i){h.uniforms.permutation=H[i],n.lineWidth(this.contourWidth[i]);for(var u=0;u<this.contourLevels[i].length;++u)u===this.highlightLevel[i]?(h.uniforms.contourColor=this.highlightColor[i],h.uniforms.contourTint=this.highlightTint[i]):(0===u||u-1===this.highlightLevel[i])&&(h.uniforms.contourColor=this.contourColor[i],h.uniforms.contourTint=this.contourTint[i]),h.uniforms.height=this.contourLevels[i][u],p.draw(n.LINES,this._contourCounts[i][u],this._contourOffsets[i][u])}for(var i=0;3>i;++i){h.uniforms.model=c.projections[i],h.uniforms.clipBounds=c.clipBounds[i];for(var u=0;3>u;++u)if(this.contourProject[i][u]){h.uniforms.permutation=H[u],n.lineWidth(this.contourWidth[u]);for(var d=0;d<this.contourLevels[u].length;++d)d===this.highlightLevel[u]?(h.uniforms.contourColor=this.highlightColor[u],h.uniforms.contourTint=this.highlightTint[u]):(0===d||d-1===this.highlightLevel[u])&&(h.uniforms.contourColor=this.contourColor[u],h.uniforms.contourTint=this.contourTint[u]),h.uniforms.height=this.contourLevels[u][d],p.draw(n.LINES,this._contourCounts[u][d],this._contourOffsets[u][d])}}p=this._dynamicVAO,p.bind();for(var i=0;3>i;++i)if(0!==this._dynamicCounts[i]){h.uniforms.model=r.model,h.uniforms.clipBounds=r.clipBounds,h.uniforms.permutation=H[i],n.lineWidth(this.dynamicWidth[i]),h.uniforms.contourColor=this.dynamicColor[i],h.uniforms.contourTint=this.dynamicTint[i],h.uniforms.height=this.dynamicLevel[i],p.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]);for(var u=0;3>u;++u)this.contourProject[u][i]&&(h.uniforms.model=c.projections[u],h.uniforms.clipBounds=c.clipBounds[u],p.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]))}p.unbind()}}function a(e,t){var n=t.shape.slice(),r=e.shape.slice();b.assign(e.lo(1,1).hi(n[0],n[1]),t),b.assign(e.lo(1).hi(n[0],1),t.hi(n[0],1)),b.assign(e.lo(1,r[1]-1).hi(n[0],1),t.lo(0,n[1]-1).hi(n[0],1)),b.assign(e.lo(0,1).hi(1,n[1]),t.hi(1)),b.assign(e.lo(r[0]-1,1).hi(1,n[1]),t.lo(n[0]-1)),e.set(0,0,t.get(0,0)),e.set(0,r[1]-1,t.get(0,n[1]-1)),e.set(r[0]-1,0,t.get(n[0]-1,0)),e.set(r[0]-1,r[1]-1,t.get(n[0]-1,n[1]-1))}function f(e,t){return Array.isArray(e)?[t(e[0]),t(e[1]),t(e[2])]:[t(e),t(e),t(e)]}function l(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],1]:[e[0],e[1],e[2],e[3]]:[0,0,0,1]}function c(e){if(Array.isArray(e)){if(Array.isArray(e))return[l(e[0]),l(e[1]),l(e[2])];var t=l(e);return[t.slice(),t.slice(),t.slice()]}}function h(e){var t=e.gl,n=(e.field||e.coords&&e.coords[2]||E([],[0,0]),L(t)),r=O(t),i=A(t),o=M(t),u=d(t),a=v(t,[{buffer:u,size:4,stride:_,offset:0},{buffer:u,size:2,stride:_,offset:16},{buffer:u,size:3,stride:_,offset:24}]),f=d(t),l=v(t,[{buffer:f,size:4}]),c=d(t),h=v(t,[{buffer:c,size:2,type:t.FLOAT}]),p=m(t,1,256,t.RGBA,t.UNSIGNED_BYTE);p.minFilter=t.LINEAR,p.magFilter=t.LINEAR;var g=new s(t,[0,0],[[0,0,0],[0,0,0]],n,r,u,a,p,i,o,f,l,c,h),y={levels:[[],[],[]]};for(var b in e)y[b]=e[b];return y.colormap=y.colormap||"jet",g.update(y),g}t.exports=h;var p=e("bit-twiddle"),d=e("gl-buffer"),v=e("gl-vao"),m=e("gl-texture2d"),g=e("typedarray-pool"),y=e("colormap"),b=e("ndarray-ops"),w=e("ndarray-pack"),E=e("ndarray"),S=e("surface-nets"),x=e("gl-mat4/multiply"),T=e("gl-mat4/invert"),N=e("binary-search-bounds"),C=e("ndarray-gradient"),E=e("ndarray"),k=e("./lib/shaders"),L=k.createShader,A=k.createContourShader,O=k.createPickShader,M=k.createPickContourShader,_=36,D=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],H=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];!function(){for(var e=0;3>e;++e){var t=H[e],n=(e+1)%3,r=(e+2)%3;t[n+0]=1,t[r+3]=1,t[e+6]=1}}();var B=s.prototype;B.isTransparent=function(){return this.opacity<1},B.isOpaque=function(){if(this.opacity>=1)return!0;for(var e=0;3>e;++e)if(this._contourCounts[e].length>0||this._dynamicCounts[e]>0)return!0;return!1},B.pickSlots=1,B.setPickBase=function(e){this.pickId=e};var j=[0,0,0],F={showSurface:!1,showContour:!1,projections:[D.slice(),D.slice(),D.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},I={model:D,view:D,projection:D,inverseModel:D.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-0.0001,kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1},q=D.slice(),R=[1,0,0,0,1,0,0,0,1];B.draw=function(e){return u.call(this,e,!1)},B.drawTransparent=function(e){return u.call(this,e,!0)};var U={model:D,view:D,projection:D,inverseModel:D,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};B.drawPick=function(e){e=e||{};var t=this.gl;t.disable(t.CULL_FACE);var n=U;n.model=e.model||D,n.view=e.view||D,n.projection=e.projection||D,n.shape=this._field[2].shape,n.pickId=this.pickId/255,n.lowerBound=this.bounds[0],n.upperBound=this.bounds[1],n.permutation=R;for(var r=0;2>r;++r)for(var i=n.clipBounds[r],s=0;3>s;++s)i[s]=Math.min(Math.max(this.clipBounds[r][s],-1e8),1e8);var u=o(n,this);if(u.showSurface){this._pickShader.bind(),this._pickShader.uniforms=n,this._vao.bind(),this._vao.draw(t.TRIANGLES,this._vertexCount);for(var r=0;3>r;++r)this.surfaceProject[r]&&(this._pickShader.uniforms.model=u.projections[r],this._pickShader.uniforms.clipBounds=u.clipBounds[r],this._vao.draw(t.TRIANGLES,this._vertexCount));this._vao.unbind()}if(u.showContour){var a=this._contourPickShader;a.bind(),a.uniforms=n;var f=this._contourVAO;f.bind();for(var s=0;3>s;++s){t.lineWidth(this.contourWidth[s]),a.uniforms.permutation=H[s];for(var r=0;r<this.contourLevels[s].length;++r)a.uniforms.height=this.contourLevels[s][r],f.draw(t.LINES,this._contourCounts[s][r],this._contourOffsets[s][r])}for(var r=0;3>r;++r){a.uniforms.model=u.projections[r],a.uniforms.clipBounds=u.clipBounds[r];for(var s=0;3>s;++s)if(this.contourProject[r][s]){a.uniforms.permutation=H[s],t.lineWidth(this.contourWidth[s]);for(var l=0;l<this.contourLevels[s].length;++l)a.uniforms.height=this.contourLevels[s][l],f.draw(t.LINES,this._contourCounts[s][l],this._contourOffsets[s][l])}}f.unbind()}},B.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=this._field[2].shape,n=this._pickResult,r=t[0]*(e.value[0]+(e.value[2]>>4)/16)/255,i=Math.floor(r),s=r-i,o=t[1]*(e.value[1]+(15&e.value[2])/16)/255,u=Math.floor(o),a=o-u;i+=1,u+=1;var f=n.position;f[0]=f[1]=f[2]=0;for(var l=0;2>l;++l)for(var c=l?s:1-s,h=0;2>h;++h)for(var p=h?a:1-a,d=i+l,v=u+h,m=c*p,g=0;3>g;++g)f[g]+=this._field[g].get(d,v)*m;for(var y=this._pickResult.level,b=0;3>b;++b)if(y[b]=N.le(this.contourLevels[b],f[b]),y[b]<0)this.contourLevels[b].length>0&&(y[b]=0);else if(y[b]<this.contourLevels[b].length-1){var w=this.contourLevels[b][y[b]],E=this.contourLevels[b][y[b]+1];Math.abs(w-f[b])>Math.abs(E-f[b])&&(y[b]+=1)}n.index[0]=.5>s?i:i+1,n.index[1]=.5>a?u:u+1,n.uv[0]=r/t[0],n.uv[1]=o/t[1];for(var g=0;3>g;++g)n.dataCoordinate[g]=this._field[g].get(n.index[0],n.index[1]);return n},B.update=function(e){e=e||{},this.dirty=!0,"contourWidth"in e&&(this.contourWidth=f(e.contourWidth,Number)),"showContour"in e&&(this.showContour=f(e.showContour,Boolean)),"showSurface"in e&&(this.showSurface=!!e.showSurface),"contourTint"in e&&(this.contourTint=f(e.contourTint,Boolean)),"contourColor"in e&&(this.contourColor=c(e.contourColor)),"contourProject"in e&&(this.contourProject=f(e.contourProject,function(e){return f(e,Boolean)})),"surfaceProject"in e&&(this.surfaceProject=e.surfaceProject),"dynamicColor"in e&&(this.dynamicColor=c(e.dynamicColor)),"dynamicTint"in e&&(this.dynamicTint=f(e.dynamicTint,Number)),"dynamicWidth"in e&&(this.dynamicWidth=f(e.dynamicWidth,Number)),"opacity"in e&&(this.opacity=e.opacity);var t=e.field||e.coords&&e.coords[2]||null;if(t||(t=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in e||"coords"in e){var n=(t.shape[0]+2)*(t.shape[1]+2);n>this._field[2].data.length&&(g.freeFloat(this._field[2].data),this._field[2].data=g.mallocFloat(p.nextPow2(n))),this._field[2]=E(this._field[2].data,[t.shape[0]+2,t.shape[1]+2]),a(this._field[2],t),this.shape=t.shape.slice();for(var r=this.shape,s=0;2>s;++s)this._field[2].size>this._field[s].data.length&&(g.freeFloat(this._field[s].data),this._field[s].data=g.mallocFloat(this._field[2].size)),this._field[s]=E(this._field[s].data,[r[0]+2,r[1]+2]);if(e.coords){var o=e.coords;if(!Array.isArray(o)||3!==o.length)throw new Error("gl-surface: invalid coordinates for x/y");for(var s=0;2>s;++s){for(var u=o[s],l=0;2>l;++l)if(u.shape[l]!==r[l])throw new Error("gl-surface: coords have incorrect shape");a(this._field[s],u)}}else if(e.ticks){var h=e.ticks;if(!Array.isArray(h)||2!==h.length)throw new Error("gl-surface: invalid ticks");for(var s=0;2>s;++s){var d=h[s];if((Array.isArray(d)||d.length)&&(d=E(d)),d.shape[0]!==r[s])throw new Error("gl-surface: invalid tick length");var v=E(d.data,r);v.stride[s]=d.stride[0],v.stride[1^s]=0,a(this._field[s],v)}}else{for(var s=0;2>s;++s){var m=[0,0];m[s]=1,this._field[s]=E(this._field[s].data,[r[0]+2,r[1]+2],m,0)}this._field[0].set(0,0,0);for(var l=0;l<r[0];++l)this._field[0].set(l+1,0,l);this._field[0].set(r[0]+1,0,r[0]-1),this._field[1].set(0,0,0);for(var l=0;l<r[1];++l)this._field[1].set(0,l+1,l);this._field[1].set(0,r[1]+1,r[1]-1)}for(var y=this._field,b=(y[2].size,E(g.mallocFloat(3*y[2].size*2),[3,r[0]+2,r[1]+2,2])),s=0;3>s;++s)C(b.pick(s),y[s],"mirror");for(var w=E(g.mallocFloat(3*y[2].size),[r[0]+2,r[1]+2,3]),s=0;s<r[0]+2;++s)for(var l=0;l<r[1]+2;++l){var x=b.get(0,s,l,0),T=b.get(0,s,l,1),N=b.get(1,s,l,0),k=b.get(1,s,l,1),L=b.get(2,s,l,0),A=b.get(2,s,l,1),O=N*A-k*L,M=L*T-A*x,_=x*k-T*N,D=Math.sqrt(O*O+M*M+_*_);1e-8>D?(D=Math.max(Math.abs(O),Math.abs(M),Math.abs(_)),1e-8>D?(_=1,M=O=0,D=1):D=1/D):D=1/Math.sqrt(D),w.set(s,l,0,O*D),w.set(s,l,1,M*D),w.set(s,l,2,_*D)}g.free(b.data);for(var H=[1/0,1/0,1/0],B=[-1/0,-1/0,-1/0],j=(r[0]-1)*(r[1]-1)*6,F=g.mallocFloat(p.nextPow2(9*j)),I=0,q=0,s=0;s<r[0]-1;++s)e:for(var l=0;l<r[1]-1;++l){for(var R=0;2>R;++R)for(var U=0;2>U;++U)for(var z=0;3>z;++z){var W=this._field[z].get(1+s+R,1+l+U);if(isNaN(W)||!isFinite(W))continue e}for(var z=0;6>z;++z){var X=s+P[z][0],V=l+P[z][1],$=this._field[0].get(X+1,V+1),J=this._field[1].get(X+1,V+1),W=this._field[2].get(X+1,V+1),O=w.get(X+1,V+1,0),M=w.get(X+1,V+1,1),_=w.get(X+1,V+1,2);F[I++]=X,F[I++]=V,F[I++]=$,F[I++]=J,F[I++]=W,F[I++]=0,F[I++]=O,F[I++]=M,F[I++]=_,H[0]=Math.min(H[0],$),H[1]=Math.min(H[1],J),H[2]=Math.min(H[2],W),B[0]=Math.max(B[0],$),B[1]=Math.max(B[1],J),B[2]=Math.max(B[2],W),q+=1}}this._vertexCount=q,this._coordinateBuffer.update(F.subarray(0,I)),g.freeFloat(F),g.free(w.data),this.bounds=[H,B]}var K=!1;if("levels"in e){var Q=e.levels;Q=Array.isArray(Q[0])?Q.slice():[[],[],Q];for(var s=0;3>s;++s)Q[s]=Q[s].slice(),Q.sort(function(e,t){return e-t});e:for(var s=0;3>s;++s){if(Q[s].length!==this.contourLevels[s].length){K=!0;break}for(var l=0;l<Q[s].length;++l)if(Q[s][l]!==this.contourLevels[s][l]){K=!0;break e}}this.contourLevels=Q}if(K){for(var y=this._field,r=this.shape,G=[],Y=0;3>Y;++Y){for(var Q=this.contourLevels[Y],Z=[],et=[],tt=[0,0],s=0;s<Q.length;++s){var nt=S(this._field[Y],Q[s]);Z.push(G.length/4|0);var q=0;e:for(var l=0;l<nt.cells.length;++l)for(var rt=nt.cells[l],z=0;2>z;++z){var it=nt.positions[rt[z]],st=it[0],ot=0|Math.floor(st),ut=st-ot,at=it[1],ft=0|Math.floor(at),lt=at-ft,ct=!1;t:for(var ht=0;2>ht;++ht){tt[ht]=0;for(var pt=(Y+ht+1)%3,R=0;2>R;++R)for(var dt=R?ut:1-ut,X=0|Math.min(Math.max(ot+R,0),r[0]),U=0;2>U;++U){var vt=U?lt:1-lt,V=0|Math.min(Math.max(ft+U,0),r[1]),W=this._field[pt].get(X,V);if(!isFinite(W)||isNaN(W)){ct=!0;break t}var mt=dt*vt;tt[ht]+=mt*W}}if(ct){if(z>0){for(var gt=0;4>gt;++gt)G.pop();q-=1}continue e}G.push(tt[0],tt[1],it[0],it[1]),q+=1}et.push(q)}this._contourOffsets[Y]=Z,this._contourCounts[Y]=et}for(var yt=g.mallocFloat(G.length),s=0;s<G.length;++s)yt[s]=G[s];this._contourBuffer.update(yt),g.freeFloat(yt)}e.colormap&&this._colorMap.setPixels(i(e.colormap))},B.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var e=0;3>e;++e)g.freeFloat(this._field[e].data)},B.highlight=function(e){if(!e)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void (this.highlightLevel=[-1,-1,-1]);for(var t=0;3>t;++t)this.enableHighlight[t]?this.highlightLevel[t]=e.level[t]:this.highlightLevel[t]=-1;var n;if(n=this.snapToData?e.dataCoordinate:e.position,this.enableDynamic[0]&&n[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&n[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&n[2]!==this.dynamicLevel[2]){for(var r=0,i=this.shape,s=g.mallocFloat(12*i[0]*i[1]),o=0;3>o;++o)if(this.enableDynamic[o]){this.dynamicLevel[o]=n[o];var u=(o+1)%3,a=(o+2)%3,f=this._field[o],l=this._field[u],c=this._field[a],h=S(f,n[o]),p=h.cells,d=h.positions;this._dynamicOffsets[o]=r;for(var t=0;t<p.length;++t)for(var v=p[t],m=0;2>m;++m){var y=d[v[m]],b=+y[0],w=0|b,E=0|Math.min(w+1,i[0]),x=b-w,T=1-x,N=+y[1],C=0|N,k=0|Math.min(C+1,i[1]),L=N-C,A=1-L,O=T*A,M=T*L,_=x*A,D=x*L,P=O*l.get(w,C)+M*l.get(w,k)+_*l.get(E,C)+D*l.get(E,k),H=O*c.get(w,C)+M*c.get(w,k)+_*c.get(E,C)+D*c.get(E,k);if(isNaN(P)||isNaN(H)){m&&(r-=1);break}s[2*r+0]=P,s[2*r+1]=H,r+=1}this._dynamicCounts[o]=r-this._dynamicOffsets[o]}else this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;this._dynamicBuffer.update(s.subarray(0,2*r)),g.freeFloat(s)}}},{"./lib/shaders":148,"binary-search-bounds":149,"bit-twiddle":33,colormap:40,"gl-buffer":59,"gl-mat4/invert":78,"gl-mat4/multiply":80,"gl-texture2d":162,"gl-vao":166,ndarray:189,"ndarray-gradient":150,"ndarray-ops":184,"ndarray-pack":155,"surface-nets":211,"typedarray-pool":217}],162:[function(e,t,n){"use strict";function r(e){m=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],g=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],y=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}function i(e,t,n){var r=e.gl,i=r.getParameter(r.MAX_TEXTURE_SIZE);if(0>t||t>i||0>n||n>i)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,n],e.bind(),r.texImage2D(r.TEXTURE_2D,0,e.format,t,n,0,e.format,e.type,null),e._mipLevels=[0],e}function s(e,t,n,r,i,s){this.gl=e,this.handle=t,this.format=i,this.type=s,this._shape=[n,r],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,u=[this._wrapS,this._wrapT];Object.defineProperties(u,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]),this._wrapVector=u;var a=[this._shape[0],this._shape[1]];Object.defineProperties(a,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]),this._shapeVector=a}function o(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function u(e,t,n,r,i,s,u,a){var f=a.dtype,l=a.shape.slice();if(l.length<2||l.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var c=0,h=0,m=o(l,a.stride.slice());"float32"===f?c=e.FLOAT:"float64"===f?(c=e.FLOAT,m=!1,f="float32"):"uint8"===f?c=e.UNSIGNED_BYTE:(c=e.UNSIGNED_BYTE,m=!1,f="uint8");var g=1;if(2===l.length)h=e.LUMINANCE,l=[l[0],l[1],1],a=p(a.data,l,[a.stride[0],a.stride[1],1],a.offset);else{if(3!==l.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===l[2])h=e.ALPHA;else if(2===l[2])h=e.LUMINANCE_ALPHA;else if(3===l[2])h=e.RGB;else{if(4!==l[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");h=e.RGBA}g=l[2]}if(h!==e.LUMINANCE&&h!==e.ALPHA||i!==e.LUMINANCE&&i!==e.ALPHA||(h=i),h!==i)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var y=a.size,w=u.indexOf(r)<0;if(w&&u.push(r),c===s&&m)0===a.offset&&a.data.length===y?w?e.texImage2D(e.TEXTURE_2D,r,i,l[0],l[1],0,i,s,a.data):e.texSubImage2D(e.TEXTURE_2D,r,t,n,l[0],l[1],i,s,a.data):w?e.texImage2D(e.TEXTURE_2D,r,i,l[0],l[1],0,i,s,a.data.subarray(a.offset,a.offset+y)):e.texSubImage2D(e.TEXTURE_2D,r,t,n,l[0],l[1],i,s,a.data.subarray(a.offset,a.offset+y));else{var E;E=s===e.FLOAT?v.mallocFloat32(y):v.mallocUint8(y);var S=p(E,l,[l[2],l[2]*l[0],1]);c===e.FLOAT&&s===e.UNSIGNED_BYTE?b(S,a):d.assign(S,a),w?e.texImage2D(e.TEXTURE_2D,r,i,l[0],l[1],0,i,s,E.subarray(0,y)):e.texSubImage2D(e.TEXTURE_2D,r,t,n,l[0],l[1],i,s,E.subarray(0,y)),s===e.FLOAT?v.freeFloat32(E):v.freeUint8(E)}}function a(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function f(e,t,n,r,i){var o=e.getParameter(e.MAX_TEXTURE_SIZE);if(0>t||t>o||0>n||n>o)throw new Error("gl-texture2d: Invalid texture shape");if(i===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var u=a(e);return e.texImage2D(e.TEXTURE_2D,0,r,t,n,0,r,i,null),new s(e,u,t,n,r,i)}function l(e,t,n,r){var i=a(e);return e.texImage2D(e.TEXTURE_2D,0,n,n,r,t),new s(e,i,0|t.width,0|t.height,n,r)}function c(e,t){var n=t.dtype,r=t.shape.slice(),i=e.getParameter(e.MAX_TEXTURE_SIZE);if(r[0]<0||r[0]>i||r[1]<0||r[1]>i)throw new Error("gl-texture2d: Invalid texture size");var u=o(r,t.stride.slice()),f=0;"float32"===n?f=e.FLOAT:"float64"===n?(f=e.FLOAT,u=!1,n="float32"):"uint8"===n?f=e.UNSIGNED_BYTE:(f=e.UNSIGNED_BYTE,u=!1,n="uint8");var l=0;if(2===r.length)l=e.LUMINANCE,r=[r[0],r[1],1],t=p(t.data,r,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==r.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===r[2])l=e.ALPHA;else if(2===r[2])l=e.LUMINANCE_ALPHA;else if(3===r[2])l=e.RGB;else{if(4!==r[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");l=e.RGBA}}f!==e.FLOAT||e.getExtension("OES_texture_float")||(f=e.UNSIGNED_BYTE,u=!1);var c,h,m=t.size;if(u)c=0===t.offset&&t.data.length===m?t.data:t.data.subarray(t.offset,t.offset+m);else{var g=[r[2],r[2]*r[0],1];h=v.malloc(m,n);var y=p(h,r,g,0);"float32"!==n&&"float64"!==n||f!==e.UNSIGNED_BYTE?d.assign(y,t):b(y,t),c=h.subarray(0,m)}var w=a(e);return e.texImage2D(e.TEXTURE_2D,0,l,r[0],r[1],0,l,f,c),u||v.free(h),new s(e,w,r[0],r[1],l,f)}function h(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(m||r(e),"number"==typeof arguments[1])return f(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return f(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var t=arguments[1];if(t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof ImageData)return l(e,t,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return c(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}var p=e("ndarray"),d=e("ndarray-ops"),v=e("typedarray-pool");t.exports=h;var m=null,g=null,y=null,b=function(e,t){d.muls(e,t,255)},w=s.prototype;Object.defineProperties(w,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&m.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),g.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&m.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),g.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var n=gl.getExtension("EXT_texture_filter_anisotropic");n&&this.gl.texParameterf(this.gl.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),y.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),y.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;2>t;++t)if(y.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var n=this.gl;return this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this._wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return i(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return e=0|e,i(this,e,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e=0|e,i(this,this._shape[0],e),e}}}),w.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},w.dispose=function(){this.gl.deleteTexture(this.handle)},w.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},w.setPixels=function(e,t,n,r){var i=this.gl;if(this.bind(),Array.isArray(t)?(r=n,n=0|t[1],t=0|t[0]):(t=t||0,n=n||0),r=r||0,e instanceof HTMLCanvasElement||e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLVideoElement){var s=this._mipLevels.indexOf(r)<0;s?(i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,e),this._mipLevels.push(r)):i.texSubImage2D(i.TEXTURE_2D,r,t,n,this.format,this.type,e)}else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>r||n+e.shape[0]>this._shape[0]>>>r||0>t||0>n)throw new Error("gl-texture2d: Texture dimensions are out of bounds");u(i,t,n,r,this.format,this.type,this._mipLevels,e)}}},{ndarray:189,"ndarray-ops":184,"typedarray-pool":217}],163:[function(e,t,n){"use strict";function r(e,t,n){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var r=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<n.length;++i){var s=n[i];if(s.buffer){var o=s.buffer,u=s.size||4,a=s.type||e.FLOAT,f=!!s.normalized,l=s.stride||0,c=s.offset||0;o.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,u,a,f,l,c)}else{if("number"==typeof s)e.vertexAttrib1f(i,s);else if(1===s.length)e.vertexAttrib1f(i,s[0]);else if(2===s.length)e.vertexAttrib2f(i,s[0],s[1]);else if(3===s.length)e.vertexAttrib3f(i,s[0],s[1],s[2]);else{if(4!==s.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,s[0],s[1],s[2],s[3])}e.disableVertexAttribArray(i)}}for(;r>i;++i)e.disableVertexAttribArray(i)}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(var i=0;r>i;++i)e.disableVertexAttribArray(i)}}t.exports=r},{}],164:[function(e,t,n){"use strict";function r(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}function i(e){return new r(e)}var s=e("./do-bind.js");r.prototype.bind=function(){s(this.gl,this._elements,this._attributes)},r.prototype.update=function(e,t,n){this._elements=t,this._attributes=e,this._elementsType=n||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._elements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)},t.exports=i},{"./do-bind.js":163}],165:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){this.location=e,this.dimension=t,this.a=n,this.b=r,this.c=i,this.d=s}function i(e,t,n){this.gl=e,this._ext=t,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=e.UNSIGNED_SHORT}function s(e,t){return new i(e,t,t.createVertexArrayOES())}var o=e("./do-bind.js");r.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(e,t,n){if(this.bind(),o(this.gl,t,e),this.unbind(),this._attribs.length=0,e)for(var i=0;i<e.length;++i){var s=e[i];"number"==typeof s?this._attribs.push(new r(i,1,s)):Array.isArray(s)&&this._attribs.push(new r(i,s.length,s[0],s[1],s[2],s[3]))}this._useElements=!!t,this._elementsType=n||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._useElements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)},t.exports=s},{"./do-bind.js":163}],166:[function(e,t,n){"use strict";function r(e,t,n,r){var o,u=e.getExtension("OES_vertex_array_object");return o=u?i(e,u):s(e),o.update(t,n,r),o}var i=e("./lib/vao-native.js"),s=e("./lib/vao-emulated.js");t.exports=r},{"./lib/vao-emulated.js":164,"./lib/vao-native.js":165}],167:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e}t.exports=r},{}],168:[function(e,t,n){"use strict";function r(e,t,n){this.vertices=e,this.adjacent=t,this.boundary=n,this.lastVisited=-1}function i(e,t,n){this.vertices=e,this.cell=t,this.index=n}function s(e,t){return l(e.vertices,t.vertices)}function o(e){for(var t=["function orient(){var tuple=this.tuple;return test("],n=0;e>=n;++n)n>0&&t.push(","),t.push("tuple[",n,"]");t.push(")}return orient");var r=new Function("test",t.join("")),i=f[e+1];return i||(i=f),r(i)}function u(e,t,n){this.dimension=e,this.vertices=t,this.simplices=n,this.interior=n.filter(function(e){return!e.boundary}),this.tuple=new Array(e+1);for(var r=0;e>=r;++r)this.tuple[r]=this.vertices[r];var i=c[e];i||(i=c[e]=o(e)),this.orient=i}function a(e,t){var n=e.length;if(0===n)throw new Error("Must have at least d+1 points");var i=e[0].length;if(i>=n)throw new Error("Must input at least d+1 points");var s=e.slice(0,i+1),o=f.apply(void 0,s);if(0===o)throw new Error("Input not in general position");for(var a=new Array(i+1),l=0;i>=l;++l)a[l]=l;0>o&&(a[0]=1,a[1]=0);for(var c=new r(a,new Array(i+1),!1),h=c.adjacent,p=new Array(i+2),l=0;i>=l;++l){for(var d=a.slice(),v=0;i>=v;++v)v===l&&(d[v]=-1);var m=d[0];d[0]=d[1],d[1]=m;var g=new r(d,new Array(i+1),!0);h[l]=g,p[l]=g}p[i+1]=c;for(var l=0;i>=l;++l)for(var d=h[l].vertices,y=h[l].adjacent,v=0;i>=v;++v){var b=d[v];if(0>b)y[v]=c;else for(var w=0;i>=w;++w)h[w].vertices.indexOf(b)<0&&(y[v]=h[w])}for(var E=new u(i,s,p),S=!!t,l=i+1;n>l;++l)E.insert(e[l],S);return E.boundary()}t.exports=a;var f=e("robust-orientation"),l=e("simplicial-complex").compareCells;r.prototype.flip=function(){var e=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=e;var t=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=t};var c=[],h=u.prototype;h.handleBoundaryDegeneracy=function(e,t){var n=this.dimension,r=this.vertices.length-1,i=this.tuple,s=this.vertices,o=[e];for(e.lastVisited=-r;o.length>0;){e=o.pop();for(var u=(e.vertices,e.adjacent),a=0;n>=a;++a){var f=u[a];if(f.boundary&&!(f.lastVisited<=-r)){for(var l=f.vertices,c=0;n>=c;++c){var h=l[c];0>h?i[c]=t:i[c]=s[h]}var p=this.orient();if(p>0)return f;f.lastVisited=-r,0===p&&o.push(f)}}}return null},h.walk=function(e,t){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,s=this.tuple,o=t?this.interior.length*Math.random()|0:this.interior.length-1,u=this.interior[o];e:for(;!u.boundary;){for(var a=u.vertices,f=u.adjacent,l=0;r>=l;++l)s[l]=i[a[l]];u.lastVisited=n;for(var l=0;r>=l;++l){var c=f[l];if(!(c.lastVisited>=n)){var h=s[l];s[l]=e;var p=this.orient();if(s[l]=h,0>p){u=c;continue e}c.boundary?c.lastVisited=-n:c.lastVisited=n}}return}return u},h.addPeaks=function(e,t){var n=this.vertices.length-1,o=this.dimension,u=this.vertices,a=this.tuple,f=this.interior,l=this.simplices,c=[t];t.lastVisited=n,t.vertices[t.vertices.indexOf(-1)]=n,t.boundary=!1,f.push(t);for(var h=[];c.length>0;){var t=c.pop(),p=t.vertices,d=t.adjacent,v=p.indexOf(n);if(!(0>v))for(var m=0;o>=m;++m)if(m!==v){var g=d[m];if(g.boundary&&!(g.lastVisited>=n)){var y=g.vertices;if(g.lastVisited!==-n){for(var b=0,w=0;o>=w;++w)y[w]<0?(b=w,a[w]=e):a[w]=u[y[w]];var E=this.orient();if(E>0){y[b]=n,g.boundary=!1,f.push(g),c.push(g),g.lastVisited=n;continue}g.lastVisited=-n}var S=g.adjacent,x=p.slice(),T=d.slice(),N=new r(x,T,!0);l.push(N);var C=S.indexOf(t);if(!(0>C)){S[C]=N,T[v]=g,x[m]=-1,T[m]=t,d[m]=N,N.flip();for(var w=0;o>=w;++w){var k=x[w];if(!(0>k||k===n)){for(var L=new Array(o-1),A=0,O=0;o>=O;++O){var M=x[O];0>M||O===w||(L[A++]=M)}h.push(new i(L,N,w))}}}}}}h.sort(s);for(var m=0;m+1<h.length;m+=2){var _=h[m],D=h[m+1],P=_.index,H=D.index;0>P||0>H||(_.cell.adjacent[_.index]=D.cell,D.cell.adjacent[D.index]=_.cell)}},h.insert=function(e,t){var n=this.vertices;n.push(e);var r=this.walk(e,t);if(r){for(var i=this.dimension,s=this.tuple,o=0;i>=o;++o){var u=r.vertices[o];0>u?s[o]=e:s[o]=n[u]}var a=this.orient(s);0>a||(0!==a||(r=this.handleBoundaryDegeneracy(r,e)))&&this.addPeaks(e,r)}},h.boundary=function(){for(var e=this.dimension,t=[],n=this.simplices,r=n.length,i=0;r>i;++i){var s=n[i];if(s.boundary){for(var o=new Array(e),u=s.vertices,a=0,f=0,l=0;e>=l;++l)u[l]>=0?o[a++]=u[l]:f=1&l;if(f===(1&e)){var c=o[0];o[0]=o[1],o[1]=c}t.push(o)}}return t}},{"robust-orientation":195,"simplicial-complex":171}],169:[function(e,t,n){arguments[4][33][0].apply(n,arguments)},{dup:33}],170:[function(e,t,n){"use strict";"use restrict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;e>t;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=r;var i=r.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},i.find=function(e){for(var t=e,n=this.roots;n[e]!==e;)e=n[e];for(;n[t]!==e;){var r=n[t];n[t]=e,t=r}return e},i.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var i=this.ranks,s=this.roots,o=i[n],u=i[r];u>o?s[n]=r:o>u?s[r]=n:(s[r]=n,++i[n])}}},{}],171:[function(e,t,n){"use strict";"use restrict";function r(e){for(var t=0,n=Math.max,r=0,i=e.length;i>r;++r)t=n(t,e[r].length);return t-1}function i(e){for(var t=-1,n=Math.max,r=0,i=e.length;i>r;++r)for(var s=e[r],o=0,u=s.length;u>o;++o)t=n(t,s[o]);return t+1}function s(e){for(var t=new Array(e.length),n=0,r=e.length;r>n;++n)t[n]=e[n].slice(0);return t}function o(e,t){var n=e.length,r=e.length-t.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:var s=e[0]+e[1]-t[0]-t[1];return s?s:i(e[0],e[1])-i(t[0],t[1]);case 3:var o=e[0]+e[1],u=t[0]+t[1];if(s=o+e[2]-(u+t[2]))return s;var a=i(e[0],e[1]),f=i(t[0],t[1]),s=i(a,e[2])-i(f,t[2]);return s?s:i(a+e[2],o)-i(f+t[2],u);default:var l=e.slice(0);l.sort();var c=t.slice(0);c.sort();for(var h=0;n>h;++h)if(r=l[h]-c[h])return r;return 0}}function u(e,t){return o(e[0],t[0])}function a(e,t){if(t){for(var n=e.length,r=new Array(n),i=0;n>i;++i)r[i]=[e[i],t[i]];r.sort(u);for(var i=0;n>i;++i)e[i]=r[i][0],t[i]=r[i][1];return e}return e.sort(o),e}function f(e){if(0===e.length)return[];for(var t=1,n=e.length,r=1;n>r;++r){var i=e[r];if(o(i,e[r-1])){if(r===t){t++;continue}e[t++]=i}}return e.length=t,e}function l(e,t){for(var n=0,r=e.length-1,i=-1;r>=n;){var s=n+r>>1,u=o(e[s],t);0>=u?(0===u&&(i=s),n=s+1):u>0&&(r=s-1)}return i}function c(e,t){for(var n=new Array(e.length),r=0,i=n.length;i>r;++r)n[r]=[];for(var s=[],r=0,u=t.length;u>r;++r)for(var a=t[r],f=a.length,c=1,h=1<<f;h>c;++c){s.length=b.popCount(c);for(var p=0,d=0;f>d;++d)c&1<<d&&(s[p++]=a[d]);var v=l(e,s);if(!(0>v))for(;;)if(n[v++].push(r),v>=e.length||0!==o(e[v],s))break}return n}function h(e,t){if(!t)return c(f(d(e,0)),e,0);for(var n=new Array(t),r=0;t>r;++r)n[r]=[];for(var r=0,i=e.length;i>r;++r)for(var s=e[r],o=0,u=s.length;u>o;++o)n[s[o]].push(r);return n}function p(e){for(var t=[],n=0,r=e.length;r>n;++n)for(var i=e[n],s=0|i.length,o=1,u=1<<s;u>o;++o){for(var f=[],l=0;s>l;++l)o>>>l&1&&f.push(i[l]);t.push(f)}return a(t)}function d(e,t){if(0>t)return[];for(var n=[],r=(1<<t+1)-1,i=0;i<e.length;++i)for(var s=e[i],o=r;o<1<<s.length;o=b.nextCombination(o)){for(var u=new Array(t+1),f=0,l=0;l<s.length;++l)o&1<<l&&(u[f++]=s[l]);n.push(u)}return a(n)}function v(e){for(var t=[],n=0,r=e.length;r>n;++n)for(var i=e[n],s=0,o=i.length;o>s;++s){for(var u=new Array(i.length-1),f=0,l=0;o>f;++f)f!==s&&(u[l++]=i[f]);t.push(u)}return a(t)}function m(e,t){for(var n=new w(t),r=0;r<e.length;++r)for(var i=e[r],s=0;s<i.length;++s)for(var o=s+1;o<i.length;++o)n.link(i[s],i[o]);for(var u=[],a=n.ranks,r=0;r<a.length;++r)a[r]=-1;for(var r=0;r<e.length;++r){var f=n.find(e[r][0]);a[f]<0?(a[f]=u.length,u.push([e[r].slice(0)])):u[a[f]].push(e[r].slice(0))}return u}function g(e){for(var t=f(a(d(e,0))),n=new w(t.length),r=0;r<e.length;++r)for(var i=e[r],s=0;s<i.length;++s)for(var o=l(t,[i[s]]),u=s+1;u<i.length;++u)n.link(o,l(t,[i[u]]));for(var c=[],h=n.ranks,r=0;r<h.length;++r)h[r]=-1;for(var r=0;r<e.length;++r){var p=n.find(l(t,[e[r][0]]));h[p]<0?(h[p]=c.length,c.push([e[r].slice(0)])):c[h[p]].push(e[r].slice(0))}return c}function y(e,t){return t?m(e,t):g(e)}var b=e("bit-twiddle"),w=e("union-find");n.dimension=r,n.countVertices=i,n.cloneCells=s,n.compareCells=o,n.normalize=a,n.unique=f,n.findCell=l,n.incidence=c,n.dual=h,n.explode=p,n.skeleton=d,n.boundary=v,n.connectedComponents=y},{"bit-twiddle":169,"union-find":170}],172:[function(e,t,n){t.exports=function(e){return null!=e&&!!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e))}},{}],173:[function(e,t,n){"use strict";function r(e,t){function n(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==v.alt,v.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==v.shift,v.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==v.control,v.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==v.meta,v.meta=!!e.metaKey),t}function r(e,r){var s=i.x(r),o=i.y(r);"buttons"in r&&(e=0|r.buttons),(e!==h||s!==p||o!==d||n(r))&&(h=0|e,p=s||0,d=o||0,t(h,p,d,v))}function s(e){r(0,e)}function o(){(h||p||d||v.shift||v.alt||v.meta||v.control)&&(p=d=0,h=0,v.shift=v.alt=v.control=v.meta=!1,t(0,0,0,v))}function u(e){n(e)&&t(h,p,d,v)}function a(e){0===i.buttons(e)?r(0,e):r(h,e)}function f(e){r(h|i.buttons(e),e)}function l(e){r(h&~i.buttons(e),e)}function c(){m||(m=!0,e.addEventListener("mousemove",a),e.addEventListener("mousedown",f),e.addEventListener("mouseup",l),e.addEventListener("mouseleave",s),e.addEventListener("mouseenter",s),e.addEventListener("mouseout",s),e.addEventListener("mouseover",s),e.addEventListener("blur",o),e.addEventListener("keyup",u),e.addEventListener("keydown",u),e.addEventListener("keypress",u),e!==window&&(window.addEventListener("blur",o),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}t||(t=e,e=window);var h=0,p=0,d=0,v={shift:!1,alt:!1,control:!1,meta:!1},m=!1;c();var g={element:e};return Object.defineProperties(g,{enabled:{get:function(){return m},set:function(e){e&&c()},enumerable:!0},buttons:{get:function(){return h},enumerable:!0},x:{get:function(){return p},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return v},enumerable:!0}}),g}t.exports=r;var i=e("mouse-event")},{"mouse-event":174}],174:[function(e,t,n){"use strict";function r(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(2===t)return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(1===t)return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0}function i(e){return e.target||e.srcElement||window}function s(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=i(e),n=t.getBoundingClientRect();return e.clientX-n.left}return 0}function o(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=i(e),n=t.getBoundingClientRect();return e.clientY-n.top}return 0}n.buttons=r,n.element=i,n.x=s,n.y=o},{}],175:[function(e,t,n){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],176:[function(e,t,n){"use strict";function r(e,t){var n=o(getComputedStyle(e).getPropertyValue(t));return n[0]*s(n[1],e)}function i(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var i=r(n,"font-size")/128;return t.removeChild(n),i}function s(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),(t===window||t===document)&&(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return i(e,t);case"em":return r(t,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return u;case"cm":return u/2.54;case"mm":return u/25.4;case"pt":return u/72;case"pc":return u/6}return 1}var o=e("parse-unit");t.exports=s;var u=96},{"parse-unit":175}],177:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var r=i("ex",e);e.addEventListener("wheel",function(e){n&&e.preventDefault();var i=e.deltaX||0,s=e.deltaY||0,o=e.deltaZ||0,u=e.deltaMode,a=1;switch(u){case 1:a=r;break;case 2:a=window.innerHeight}return i*=a,s*=a,o*=a,i||s||o?t(i,s,o):void 0})}var i=e("to-px");t.exports=r},{"to-px":176}],178:[function(e,t,n){"use strict";var r=e("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_1_arg1_=_inline_1_arg2_.apply(void 0,_inline_1_arg0_)}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});t.exports=function(e,t){return r(e,t),e}},{"cwise/lib/wrapper":48}],179:[function(e,t,n){"use strict";function r(e,t){switch(t.length){case 0:break;case 1:e[0]=1/t[0];break;case 4:i(e,t);break;case 9:s(e,t);break;case 16:o(e,t);break;default:throw new Error("currently supports matrices up to 4x4")}return e}t.exports=r;var i=e("gl-mat2/invert"),s=e("gl-mat3/invert"),o=e("gl-mat4/invert")},{"gl-mat2/invert":180,"gl-mat3/invert":71,"gl-mat4/invert":78}],180:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*s-i*r;return o?(o=1/o,e[0]=s*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null}t.exports=r},{}],181:[function(e,t,n){"use strict";function r(e,t){var n=Math.floor(t),r=t-n,i=n>=0&&n<e.shape[0],s=n+1>=0&&n+1<e.shape[0],o=i?+e.get(n):0,u=s?+e.get(n+1):0;return(1-r)*o+r*u}function i(e,t,n){var r=Math.floor(t),i=t-r,s=r>=0&&r<e.shape[0],o=r+1>=0&&r+1<e.shape[0],u=Math.floor(n),a=n-u,f=u>=0&&u<e.shape[1],l=u+1>=0&&u+1<e.shape[1],c=s&&f?e.get(r,u):0,h=s&&l?e.get(r,u+1):0,p=o&&f?e.get(r+1,u):0,d=o&&l?e.get(r+1,u+1):0;return(1-a)*((1-i)*c+i*p)+a*((1-i)*h+i*d)}function s(e,t,n,r){var i=Math.floor(t),s=t-i,o=i>=0&&i<e.shape[0],u=i+1>=0&&i+1<e.shape[0],a=Math.floor(n),f=n-a,l=a>=0&&a<e.shape[1],c=a+1>=0&&a+1<e.shape[1],h=Math.floor(r),p=r-h,d=h>=0&&h<e.shape[2],v=h+1>=0&&h+1<e.shape[2],m=o&&l&&d?e.get(i,a,h):0,g=o&&c&&d?e.get(i,a+1,h):0,y=u&&l&&d?e.get(i+1,a,h):0,b=u&&c&&d?e.get(i+1,a+1,h):0,w=o&&l&&v?e.get(i,a,h+1):0,E=o&&c&&v?e.get(i,a+1,h+1):0,S=u&&l&&v?e.get(i+1,a,h+1):0,x=u&&c&&v?e.get(i+1,a+1,h+1):0;return(1-p)*((1-f)*((1-s)*m+s*y)+f*((1-s)*g+s*b))+p*((1-f)*((1-s)*w+s*S)+f*((1-s)*E+s*x))}function o(e){var t,n,r=0|e.shape.length,i=new Array(r),s=new Array(r),o=new Array(r),u=new Array(r);for(t=0;r>t;++t)n=+arguments[t+1],i[t]=Math.floor(n),s[t]=n-i[t],o[t]=0<=i[t]&&i[t]<e.shape[t],u[t]=0<=i[t]+1&&i[t]+1<e.shape[t];var a,f,l,c=0;e:for(t=0;1<<r>t;++t){for(f=1,l=e.offset,a=0;r>a;++a)if(t&1<<a){if(!u[a])continue e;f*=s[a],l+=e.stride[a]*(i[a]+1)}else{if(!o[a])continue e;f*=1-s[a],l+=e.stride[a]*i[a]}c+=f*e.data[l]}return c}function u(e,t,n,u){switch(e.shape.length){case 0:return 0;case 1:return r(e,t);case 2:return i(e,t,n);case 3:return s(e,t,n,u);default:return o.apply(void 0,arguments)}}t.exports=u,t.exports.d1=r,t.exports.d2=i,t.exports.d3=s},{}],182:[function(e,t,n){"use strict";var r=e("ndarray-linear-interpolate"),i=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=new Array(_inline_12_arg4_)}",args:[{name:"_inline_12_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_12_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_12_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_12_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_12_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_13_arg2_(this_warped,_inline_13_arg0_),_inline_13_arg1_=_inline_13_arg3_.apply(void 0,this_warped)}",args:[{name:"_inline_13_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_13_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg3_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),s=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_16_arg2_(this_warped,_inline_16_arg0_),_inline_16_arg1_=_inline_16_arg3_(_inline_16_arg4_,this_warped[0])}",args:[{name:"_inline_16_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_16_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),o=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_19_arg2_(this_warped,_inline_19_arg0_),_inline_19_arg1_=_inline_19_arg3_(_inline_19_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_19_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_19_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),u=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_22_arg2_(this_warped,_inline_22_arg0_),_inline_22_arg1_=_inline_22_arg3_(_inline_22_arg4_,this_warped[0],this_warped[1],this_warped[2])}",args:[{name:"_inline_22_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_22_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64});t.exports=function(e,t,n){switch(t.shape.length){case 1:s(e,n,r.d1,t);break;case 2:o(e,n,r.d2,t);break;case 3:u(e,n,r.d3,t);break;default:i(e,n,r.bind(void 0,t),t.shape.length)}return e}},{"cwise/lib/wrapper":48,"ndarray-linear-interpolate":181}],183:[function(e,t,n){"use strict";function r(e,t,n){var r=t.dimension,o=s([],n);return i(e,t,function(e,t){for(var n=0;r>n;++n){e[n]=o[(r+1)*r+n];for(var i=0;r>i;++i)e[n]+=o[(r+1)*i+n]*t[i]}for(var s=o[(r+1)*(r+1)-1],i=0;r>i;++i)s+=o[(r+1)*i+r]*t[i];for(var u=1/s,n=0;r>n;++n)e[n]*=u;return e}),e}var i=e("ndarray-warp"),s=e("gl-matrix-invert");t.exports=r},{"gl-matrix-invert":179,"ndarray-warp":182}],184:[function(e,t,n){"use strict";function r(e){if(!e)return u;for(var t=0;t<e.args.length;++t){var n=e.args[t];0===t?e.args[t]={name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function i(e){return o({args:e.args,pre:r(e.pre),body:r(e.body),post:r(e.proc),funcName:e.funcName})}function s(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);var r=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return r(i(e))}var o=e("cwise-compiler"),u={body:"",args:[],thisVars:[],localVars:[]},a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in a){var t=a[e];n[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),n[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var f={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in f){var t=f[e];n[e]=s({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),n[e+"eq"]=s({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in l){var t=l[e];n[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var t=c[e];n[t]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),n[t+"eq"]=s({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var e=0;e<h.length;++e){var t=h[e];n[t]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),n[t+"s"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),n[t+"eq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var p=["atan2","pow"];!function(){for(var e=0;e<p.length;++e){var t=p[e];n[t+"op"]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),n[t+"ops"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),n[t+"opeq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),n[t+"opseq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),n.any=o({args:["array"],pre:u,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=o({args:["array"],pre:u,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=o({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=o({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=o({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=o({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=s({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=s({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=s({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=o({args:["array","array"],pre:u,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":185}],185:[function(e,t,n){arguments[4][49][0].apply(n,arguments)},{"./lib/thunk.js":187,dup:49}],186:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{dup:50,uniq:188}],187:[function(e,t,n){arguments[4][51][0].apply(n,arguments)},{"./compile.js":186,dup:51}],188:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],189:[function(e,t,n){function r(e,t){return e[0]-t[0]}function i(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(r);var i=new Array(n.length);for(e=0;e<i.length;++e)i[e]=n[e][1];return i}function s(e,t){var n=["View",t,"d",e].join("");0>t&&(n="View_Nil"+e);var r="generic"===e;if(-1===t){var s="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",o=new Function(s);return o()}if(0===t){var s="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",o=new Function("TrivialArray",s);return o(c[e][0])}var s=["'use strict'"],u=a(t),f=u.map(function(e){return"i"+e}),l="this.offset+"+u.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),p=u.map(function(e){return"b"+e}).join(","),d=u.map(function(e){return"c"+e}).join(",");s.push("function "+n+"(a,"+p+","+d+",d){this.data=a","this.shape=["+p+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),s.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+u.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),4>t?(s.push("function "+n+"_order(){"),2===t?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+n+"_set("+f.join(",")+",v){"),r?s.push("return this.data.set("+l+",v)}"):s.push("return this.data["+l+"]=v}"),s.push("proto.get=function "+n+"_get("+f.join(",")+"){"),r?s.push("return this.data.get("+l+")}"):s.push("return this.data["+l+"]}"),s.push("proto.index=function "+n+"_index(",f.join(),"){return "+l+"}"),s.push("proto.hi=function "+n+"_hi("+f.join(",")+"){return new "+n+"(this.data,"+u.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+u.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var v=u.map(function(e){return"a"+e+"=this.shape["+e+"]"}),m=u.map(function(e){return"c"+e+"=this.stride["+e+"]"});s.push("proto.lo=function "+n+"_lo("+f.join(",")+"){var b=this.offset,d=0,"+v.join(",")+","+m.join(","));for(var g=0;t>g;++g)s.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");s.push("return new "+n+"(this.data,"+u.map(function(e){return"a"+e}).join(",")+","+u.map(function(e){return"c"+e}).join(",")+",b)}"),s.push("proto.step=function "+n+"_step("+f.join(",")+"){var "+u.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+u.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var g=0;t>g;++g)s.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");s.push("return new "+n+"(this.data,"+u.map(function(e){return"a"+e}).join(",")+","+u.map(function(e){return"b"+e}).join(",")+",c)}");for(var y=new Array(t),b=new Array(t),g=0;t>g;++g)y[g]="a[i"+g+"]",b[g]="b[i"+g+"]";s.push("proto.transpose=function "+n+"_transpose("+f+"){"+f.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+y.join(",")+","+b.join(",")+",this.offset)}"),s.push("proto.pick=function "+n+"_pick("+f+"){var a=[],b=[],c=this.offset");for(var g=0;t>g;++g)s.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+u.map(function(e){return"shape["+e+"]"}).join(",")+","+u.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var o=new Function("CTOR_LIST","ORDER",s.join("\n"));return o(c[e],i)}function o(e){if(f(e))return"buffer";if(l)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function u(e,t,n,r){if(void 0===e){var i=c.array[0];return i([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var u=t.length;if(void 0===n){n=new Array(u);for(var a=u-1,f=1;a>=0;--a)n[a]=f,f*=t[a]}if(void 0===r){r=0;for(var a=0;u>a;++a)n[a]<0&&(r-=(t[a]-1)*n[a])}for(var l=o(e),p=c[l];p.length<=u+1;)p.push(s(l,p.length-1));var i=p[u+1];return i(e,t,n,r)}var a=e("iota-array"),f=e("is-buffer"),l="undefined"!=typeof Float64Array,c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=u},{"iota-array":190,"is-buffer":172}],190:[function(e,t,n){"use strict";function r(e){for(var t=new Array(e),n=0;e>n;++n)t[n]=n;return t}t.exports=r},{}],191:[function(e,t,n){(function(e){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+(new Date)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],192:[function(e,t,n){"use strict";function r(e){for(var t="robustLinearSolve"+e+"d",n=["function ",t,"(A,b){return ["],r=0;e>r;++r){n.push("det([");for(var i=0;e>i;++i){i>0&&n.push(","),n.push("[");for(var s=0;e>s;++s)s>0&&n.push(","),s===r?n.push("+b[",i,"]"):n.push("+A[",i,"][",s,"]");n.push("]")}n.push("]),")}n.push("det(A)]}return ",t);var o=new Function("det",n.join(""));return o(6>e?u[e]:u)}function i(){return[0]}function s(e,t){return[[t[0]],[e[0][0]]]}function o(){for(;f.length<a;)f.push(r(f.length));for(var e=[],n=["function dispatchLinearSolve(A,b){switch(A.length){"],i=0;a>i;++i)e.push("s"+i),n.push("case ",i,":return s",i,"(A,b);");n.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),e.push("CACHE","g",n.join(""));var s=Function.apply(void 0,e);t.exports=s.apply(void 0,f.concat([f,r]));for(var i=0;a>i;++i)t.exports[i]=f[i]}var u=e("robust-determinant"),a=6,f=[i,s];o()},{"robust-determinant":194}],193:[function(e,t,n){"use strict";function r(e){for(var t=e.length,n=e[e.length-1],r=t,i=t-2;i>=0;--i){var s=n,o=e[i];n=s+o;var u=n-s,a=o-u;a&&(e[--r]=n,n=a)}for(var f=0,i=r;t>i;++i){var s=e[i],o=n;n=s+o;var u=n-s,a=o-u;a&&(e[f++]=a)}return e[f++]=n,e.length=f,e}t.exports=r},{}],194:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),s=0,o=0;s<e.length;++s)s!==t&&(i[o++]=e[r][s]);return n}function i(e){for(var t=new Array(e),n=0;e>n;++n){t[n]=new Array(e);for(var r=0;e>r;++r)t[n][r]=["m[",n,"][",r,"]"].join("")}return t}function s(e){return 1&e?"-":""}function o(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",o(e.slice(0,t)),",",o(e.slice(t)),")"].join("")}function u(e){if(2===e.length)return["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("");for(var t=[],n=0;n<e.length;++n)t.push(["scale(",u(r(e,n)),",",s(n),e[0][n],")"].join(""));return o(t)}function a(e){var t=new Function("sum","scale","prod","compress",["function robustDeterminant",e,"(m){return compress(",u(i(e)),")};return robustDeterminant",e].join(""));return t(c,h,l,p)}function f(){for(;v.length<d;)v.push(a(v.length));for(var e=[],n=["function robustDeterminant(m){switch(m.length){"],r=0;d>r;++r)e.push("det"+r),n.push("case ",r,":return det",r,"(m);");n.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),e.push("CACHE","gen",n.join(""));var i=Function.apply(void 0,e);t.exports=i.apply(void 0,v.concat([v,a]));for(var r=0;r<v.length;++r)t.exports[r]=v[r]}var l=e("two-product"),c=e("robust-sum"),h=e("robust-scale"),p=e("robust-compress"),d=6,v=[function(){return[0]},function(e){return[e[0][0]]}];f()},{"robust-compress":193,"robust-scale":196,"robust-sum":198,"two-product":215}],195:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),s=0,o=0;s<e.length;++s)s!==t&&(i[o++]=e[r][s]);return n}function i(e){for(var t=new Array(e),n=0;e>n;++n){t[n]=new Array(e);for(var r=0;e>r;++r)t[n][r]=["m",r,"[",e-n-1,"]"].join("")}return t}function s(e){return 1&e?"-":""}function o(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",o(e.slice(0,t)),",",o(e.slice(t)),")"].join("")}function u(e){if(2===e.length)return[["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",o(u(r(e,n))),",",s(n),e[0][n],")"].join(""));return t}function a(e){for(var t=[],n=[],s=i(e),a=[],f=0;e>f;++f)0===(1&f)?t.push.apply(t,u(r(s,f))):n.push.apply(n,u(r(s,f))),a.push("m"+f);var l=o(t),v=o(n),m="orientation"+e+"Exact",g=["function ",m,"(",a.join(),"){var p=",l,",n=",v,",d=sub(p,n);return d[d.length-1];};return ",m].join(""),y=new Function("sum","prod","scale","sub",g);return y(h,c,p,d)}function f(e){var t=E[e.length];return t||(t=E[e.length]=a(e.length)),t.apply(void 0,e)}function l(){for(;E.length<=v;)E.push(a(E.length));for(var e=[],n=["slow"],r=0;v>=r;++r)e.push("a"+r),n.push("o"+r);for(var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],r=2;v>=r;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var s=Function.apply(void 0,n);t.exports=s.apply(void 0,[f].concat(E));for(var r=0;v>=r;++r)t.exports[r]=E[r]}var c=e("two-product"),h=e("robust-sum"),p=e("robust-scale"),d=e("robust-subtract"),v=5,m=1.1102230246251565e-16,g=(3+16*m)*m,y=(7+56*m)*m,b=a(3),w=a(4),E=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var r,i=(e[1]-n[1])*(t[0]-n[0]),s=(e[0]-n[0])*(t[1]-n[1]),o=i-s;if(i>0){if(0>=s)return o;r=i+s}else{if(!(0>i))return o;if(s>=0)return o;r=-(i+s)}var u=g*r;return o>=u||-u>=o?o:b(e,t,n)},function(e,t,n,r){var i=e[0]-r[0],s=t[0]-r[0],o=n[0]-r[0],u=e[1]-r[1],a=t[1]-r[1],f=n[1]-r[1],l=e[2]-r[2],c=t[2]-r[2],h=n[2]-r[2],p=s*f,d=o*a,v=o*u,m=i*f,g=i*a,b=s*u,E=l*(p-d)+c*(v-m)+h*(g-b),S=(Math.abs(p)+Math.abs(d))*Math.abs(l)+(Math.abs(v)+Math.abs(m))*Math.abs(c)+(Math.abs(g)+Math.abs(b))*Math.abs(h),T=y*S;return E>T||-E>T?E:w(e,t,n,r)}];l()},{"robust-scale":196,"robust-subtract":197,"robust-sum":198,"two-product":215}],196:[function(e,t,n){"use strict";function r(e,t){var n=e.length;if(1===n){var r=i(e[0],t);return r[0]?r:[r[1]]}var o=new Array(2*n),u=[.1,.1],f=[.1,.1],l=0;i(e[0],t,u),u[0]&&(o[l++]=u[0]);for(var c=1;n>c;++c){i(e[c],t,f);var h=u[1];s(h,f[0],u),u[0]&&(o[l++]=u[0]);var p=f[1],d=u[1],v=p+d,m=v-p,g=d-m;u[1]=v,g&&(o[l++]=g)}return u[1]&&(o[l++]=u[1]),0===l&&(o[l++]=0),o.length=l,o}var i=e("two-product"),s=e("two-sum");t.exports=r},{"two-product":215,"two-sum":216}],197:[function(e,t,n){"use strict";function r(e,t){var n=e+t,r=n-e,i=n-r,s=t-r,o=e-i,u=o+s;return u?[u,n]:[n]}function i(e,t){var n=0|e.length,i=0|t.length;if(1===n&&1===i)return r(e[0],-t[0]);var s,o,u=n+i,a=new Array(u),f=0,l=0,c=0,h=Math.abs,p=e[l],d=h(p),v=-t[c],m=h(v);m>d?(o=p,l+=1,n>l&&(p=e[l],d=h(p))):(o=v,c+=1,i>c&&(v=-t[c],m=h(v))),n>l&&m>d||c>=i?(s=p,l+=1,n>l&&(p=e[l],d=h(p))):(s=v,c+=1,i>c&&(v=-t[c],m=h(v)));for(var g,y,b,w,E,S=s+o,x=S-s,T=o-x,N=T,C=S;n>l&&i>c;)m>d?(s=p,l+=1,n>l&&(p=e[l],d=h(p))):(s=v,c+=1,i>c&&(v=-t[c],m=h(v))),o=N,S=s+o,x=S-s,T=o-x,T&&(a[f++]=T),g=C+S,y=g-C,b=g-y,w=S-y,E=C-b,N=E+w,C=g;for(;n>l;)s=p,o=N,S=s+o,x=S-s,T=o-x,T&&(a[f++]=T),g=C+S,y=g-C,b=g-y,w=S-y,E=C-b,N=E+w,C=g,l+=1,n>l&&(p=e[l]);for(;i>c;)s=v,o=N,S=s+o,x=S-s,T=o-x,T&&(a[f++]=T),g=C+S,y=g-C,b=g-y,w=S-y,E=C-b,N=E+w,C=g,c+=1,i>c&&(v=-t[c]);return N&&(a[f++]=N),C&&(a[f++]=C),f||(a[f++]=0),a.length=f,a}t.exports=i},{}],198:[function(e,t,n){"use strict";function r(e,t){var n=e+t,r=n-e,i=n-r,s=t-r,o=e-i,u=o+s;return u?[u,n]:[n]}function i(e,t){var n=0|e.length,i=0|t.length;if(1===n&&1===i)return r(e[0],t[0]);var s,o,u=n+i,a=new Array(u),f=0,l=0,c=0,h=Math.abs,p=e[l],d=h(p),v=t[c],m=h(v);m>d?(o=p,l+=1,n>l&&(p=e[l],d=h(p))):(o=v,c+=1,i>c&&(v=t[c],m=h(v))),n>l&&m>d||c>=i?(s=p,l+=1,n>l&&(p=e[l],d=h(p))):(s=v,c+=1,i>c&&(v=t[c],m=h(v)));for(var g,y,b,w,E,S=s+o,x=S-s,T=o-x,N=T,C=S;n>l&&i>c;)m>d?(s=p,l+=1,n>l&&(p=e[l],d=h(p))):(s=v,c+=1,i>c&&(v=t[c],m=h(v))),o=N,S=s+o,x=S-s,T=o-x,T&&(a[f++]=T),g=C+S,y=g-C,b=g-y,w=S-y,E=C-b,N=E+w,C=g;for(;n>l;)s=p,o=N,S=s+o,x=S-s,T=o-x,T&&(a[f++]=T),g=C+S,y=g-C,b=g-y,w=S-y,E=C-b,N=E+w,C=g,l+=1,n>l&&(p=e[l]);for(;i>c;)s=v,o=N,S=s+o,x=S-s,T=o-x,T&&(a[f++]=T),g=C+S,y=g-C,b=g-y,w=S-y,E=C-b,N=E+w,C=g,c+=1,i>c&&(v=t[c]);return N&&(a[f++]=N),C&&(a[f++]=C),f||(a[f++]=0),a.length=f,a}t.exports=i},{}],199:[function(e,t,n){"use strict";function r(e){return e.split("").map(function(e){return e in i?i[e]:""}).join("")}t.exports=r;var i={" ":" ",0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"","+":"","-":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:""}},{}],200:[function(e,t,n){"use strict";function r(e){return"a"+e}function i(e){return"d"+e}function s(e,t){return"c"+e+"_"+t}function o(e){return"s"+e}function u(e,t){return"t"+e+"_"+t}function a(e){return"o"+e}function f(e){return"x"+e}function l(e){return"p"+e}function c(e,t){return"d"+e+"_"+t}function h(e){return"i"+e}function p(e,t){return"u"+e+"_"+t}function d(e){return"b"+e}function v(e){return"y"+e}function m(e){return"e"+e}function g(e){return"v"+e}function y(e,t,n){for(var r=0,i=0;e>i;++i)t&1<<i&&(r|=1<<n[i]);return r}function b(e,t,n,b,w,O){function D(e,t){U.push("for(",h(w[e]),"=",t,";",h(w[e]),"<",o(w[e]),";","++",h(w[e]),"){")}function P(e){for(var t=0;I>t;++t)U.push(l(t),"+=",p(t,w[e]),";");U.push("}")}function H(e){for(var t=e-1;t>=0;--t)D(t,0);for(var n=[],t=0;I>t;++t)O[t]?n.push(i(t)+".get("+l(t)+")"):n.push(i(t)+"["+l(t)+"]");for(var t=0;b>t;++t)n.push(f(t));U.push(x,"[",C,"++]=phase(",n.join(),");");for(var t=0;e>t;++t)P(t);for(var r=0;I>r;++r)U.push(l(r),"+=",p(r,w[e]),";")}function B(e){for(var t=0;I>t;++t)O[t]?U.push(s(t,0),"=",i(t),".get(",l(t),");"):U.push(s(t,0),"=",i(t),"[",l(t),"];");for(var n=[],t=0;I>t;++t)n.push(s(t,0));for(var t=0;b>t;++t)n.push(f(t));U.push(d(0),"=",x,"[",C,"]=phase(",n.join(),");");for(var r=1;1<<q>r;++r)U.push(d(r),"=",x,"[",C,"+",m(r),"];");for(var o=[],r=1;1<<q>r;++r)o.push("("+d(0)+"!=="+d(r)+")");U.push("if(",o.join("||"),"){");for(var u=[],t=0;q>t;++t)u.push(h(t));for(var t=0;I>t;++t){u.push(s(t,0));for(var r=1;1<<q>r;++r)O[t]?U.push(s(t,r),"=",i(t),".get(",l(t),"+",c(t,r),");"):U.push(s(t,r),"=",i(t),"[",l(t),"+",c(t,r),"];"),u.push(s(t,r))}for(var t=0;1<<q>t;++t)u.push(d(t));for(var t=0;b>t;++t)u.push(f(t));U.push("vertex(",u.join(),");",g(0),"=",S,"[",C,"]=",T,"++;");for(var a=(1<<q)-1,p=d(a),r=0;q>r;++r)if(0===(e&~(1<<r))){for(var v=a^1<<r,y=d(v),w=[],E=v;E>0;E=E-1&v)w.push(S+"["+C+"+"+m(E)+"]");w.push(g(0));for(var E=0;I>E;++E)1&r?w.push(s(E,a),s(E,v)):w.push(s(E,v),s(E,a));1&r?w.push(p,y):w.push(y,p);for(var E=0;b>E;++E)w.push(f(E));U.push("if(",p,"!==",y,"){","face(",w.join(),")}")}U.push("}",C,"+=1;")}function j(){for(var e=1;1<<q>e;++e)U.push(k,"=",m(e),";",m(e),"=",v(e),";",v(e),"=",k,";")}function F(e,t){if(0>e)return void B(t);H(e),U.push("if(",o(w[e]),">0){",h(w[e]),"=1;"),F(e-1,t|1<<w[e]);for(var n=0;I>n;++n)U.push(l(n),"+=",p(n,w[e]),";");e===q-1&&(U.push(C,"=0;"),j()),D(e,2),F(e-1,t),e===q-1&&(U.push("if(",h(w[q-1]),"&1){",C,"=0;}"),j()),P(e),U.push("}")}var I=O.length,q=w.length;if(2>q)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var R="extractContour"+w.join("_"),U=[],z=[],W=[],X=0;I>X;++X)W.push(r(X));for(var X=0;b>X;++X)W.push(f(X));for(var X=0;q>X;++X)z.push(o(X)+"="+r(0)+".shape["+X+"]|0");for(var X=0;I>X;++X){z.push(i(X)+"="+r(X)+".data",a(X)+"="+r(X)+".offset|0");for(var V=0;q>V;++V)z.push(u(X,V)+"="+r(X)+".stride["+V+"]|0")}for(var X=0;I>X;++X){z.push(l(X)+"="+a(X)),z.push(s(X,0));for(var V=1;1<<q>V;++V){for(var $=[],J=0;q>J;++J)V&1<<J&&$.push("-"+u(X,J));z.push(c(X,V)+"=("+$.join("")+")|0"),z.push(s(X,V)+"=0")}}for(var X=0;I>X;++X)for(var V=0;q>V;++V){var K=[u(X,w[V])];V>0&&K.push(u(X,w[V-1])+"*"+o(w[V-1])),z.push(p(X,w[V])+"=("+K.join("-")+")|0")}for(var X=0;q>X;++X)z.push(h(X)+"=0");z.push(T+"=0");for(var Q=["2"],X=q-2;X>=0;--X)Q.push(o(w[X]));z.push(N+"=("+Q.join("*")+")|0",x+"=mallocUint32("+N+")",S+"=mallocUint32("+N+")",C+"=0"),z.push(d(0)+"=0");for(var V=1;1<<q>V;++V){for(var G=[],Y=[],J=0;q>J;++J)V&1<<J&&(0===Y.length?G.push("1"):G.unshift(Y.join("*"))),Y.push(o(w[J]));var Z="";G[0].indexOf(o(w[q-2]))<0&&(Z="-");var et=y(q,V,w);z.push(m(et)+"=(-"+G.join("-")+")|0",v(et)+"=("+Z+G.join("-")+")|0",d(et)+"=0")}z.push(g(0)+"=0",k+"=0"),F(q-1,0),U.push("freeUint32(",S,");freeUint32(",x,");");var tt=["'use strict';","function ",R,"(",W.join(),"){","var ",z.join(),";",U.join(""),"}","return ",R].join(""),nt=new Function("vertex","face","phase","mallocUint32","freeUint32",tt);return nt(e,t,n,E.mallocUint32,E.freeUint32)}function w(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}"object"!=typeof e&&t("Must specify arguments");var n=e.order;Array.isArray(n)||t("Must specify order");var r=e.arrayArguments||1;1>r&&t("Must have at least one array argument");var i=e.scalarArguments||0;0>i&&t("Scalar arg count must be > 0"),"function"!=typeof e.vertex&&t("Must specify vertex creation function"),"function"!=typeof e.cell&&t("Must specify cell creation function"),"function"!=typeof e.phase&&t("Must specify phase function");for(var s=e.getters||[],o=new Array(r),u=0;r>u;++u)s.indexOf(u)>=0?o[u]=!0:o[u]=!1;return b(e.vertex,e.cell,e.phase,i,n,o)}var E=e("typedarray-pool");t.exports=w;var S="V",x="P",T="N",N="Q",C="X",k="T"},{"typedarray-pool":217}],201:[function(e,t,n){function r(e){if(0>e)return Number("0/0");for(var t=u[0],n=u.length-1;n>0;--n)t+=u[n]/(e+n);var r=e+o+.5;return.5*Math.log(2*Math.PI)+(e+.5)*Math.log(r)-r+Math.log(t)-Math.log(e)}var i=7,s=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-0.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],o=607/128,u=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-0.4919138160976202,3399464998481189e-20,4652362892704858e-20,-0.00009837447530487956,.0001580887032249125,-0.00021026444172410488,.00021743961811521265,-0.0001643181065367639,8441822398385275e-20,-0.000026190838401581408,36899182659531625e-22];t.exports=function a(e){if(.5>e)return Math.PI/(Math.sin(Math.PI*e)*a(1-e));if(e>100)return Math.exp(r(e));e-=1;for(var t=s[0],n=1;i+2>n;n++)t+=s[n]/(e+n);var o=e+i+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,e+.5)*Math.exp(-o)*t},t.exports.log=r},{}],202:[function(e,t,n){"use strict";function r(e){var t=e.length;if(i>t){for(var n=1,r=0;t>r;++r)for(var o=0;r>o;++o)if(e[r]<e[o])n=-n;else if(e[r]===e[o])return 0;return n}for(var u=s.mallocUint8(t),r=0;t>r;++r)u[r]=0;for(var n=1,r=0;t>r;++r)if(!u[r]){var f=1;u[r]=1;for(var o=e[r];o!==r;o=e[o]){if(u[o])return s.freeUint8(u),0;f+=1,u[o]=1}1&f||(n=-n)}return s.freeUint8(u),n}t.exports=r;var i=32,s=e("typedarray-pool")},{"typedarray-pool":217}],203:[function(e,t,n){"use strict";function r(e){var t=e.length;switch(t){case 0:case 1:return 0;case 2:return e[1]}var n,r,i,u=s.mallocUint32(t),f=s.mallocUint32(t),l=0;for(o(e,f),i=0;t>i;++i)u[i]=e[i];for(i=t-1;i>0;--i)r=f[i],n=u[i],u[i]=u[r],u[r]=n,f[i]=f[n],f[n]=r,l=(l+n)*i;return s.freeUint32(f),s.freeUint32(u),l}function i(e,t,n){switch(e){case 0:return n?n:[];case 1:return n?(n[0]=0,n):[0];case 2:return n?(t?(n[0]=0,n[1]=1):(n[0]=1,n[1]=0),n):t?[0,1]:[1,0]}n=n||new Array(e);var r,i,s,o=1;for(n[0]=0,s=1;e>s;++s)n[s]=s,o=o*s|0;for(s=e-1;s>0;--s)r=t/o|0,t=t-r*o|0,o=o/s|0,i=0|n[s],n[s]=0|n[r],n[r]=0|i;return n}var s=e("typedarray-pool"),o=e("invert-permutation");n.rank=r,n.unrank=i},{"invert-permutation":204,"typedarray-pool":217}],204:[function(e,t,n){"use strict";function r(e,t){t=t||new Array(e.length);for(var n=0;n<e.length;++n)t[e[n]]=n;return t}t.exports=r},{}],205:[function(e,t,n){"use strict";function r(e){if(0>e)return[];if(0===e)return[[0]];for(var t=0|Math.round(o(e+1)),n=[],r=0;t>r;++r){for(var u=i.unrank(e,r),f=[0],l=0,c=0;c<u.length;++c)l+=1<<u[c],f.push(l);s(u)<1&&(f[0]=l,f[e]=0),n.push(f)}return n}t.exports=r;var i=e("permutation-rank"),s=e("permutation-parity"),o=e("gamma")},{gamma:201,"permutation-parity":202,"permutation-rank":203}],206:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":207}],207:[function(e,t,n){arguments[4][49][0].apply(n,arguments)},{"./lib/thunk.js":209,dup:49}],208:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{dup:50,uniq:218}],209:[function(e,t,n){arguments[4][51][0].apply(n,arguments)},{"./compile.js":208,dup:51}],210:[function(e,t,n){"use strict";function r(e,t){var n=[];return t=+t||0,i(e.hi(e.shape[0]-1),n,t),n}t.exports=r;var i=e("./lib/zc-core")},{"./lib/zc-core":206}],211:[function(e,t,n){"use strict";function r(e,t){var n=e.length,r=["'use strict';"],i="surfaceNets"+e.join("_")+"d"+t;r.push("var contour=genContour({","order:[",e.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===t&&r.push("getters:[0],");for(var s=[],a=[],f=0;n>f;++f)s.push("d"+f),a.push("d"+f);for(var f=0;1<<n>f;++f)s.push("v"+f),a.push("v"+f);for(var f=0;1<<n>f;++f)s.push("p"+f),a.push("p"+f);s.push("a","b","c"),a.push("a","c"),r.push("vertex:function vertexFunc(",s.join(),"){");for(var l=[],f=0;1<<n>f;++f)l.push("(p"+f+"<<"+f+")");r.push("var m=(",l.join("+"),")|0;if(m===0||m===",(1<<(1<<n))-1,"){return}");var c=[],h=[];128>=1<<(1<<n)?(r.push("switch(m){"),h=r):r.push("switch(m>>>7){");for(var f=0;1<<(1<<n)>f;++f){if(1<<(1<<n)>128&&f%128===0){c.length>0&&h.push("}}");var p="vExtra"+c.length;r.push("case ",f>>>7,":",p,"(m&0x7f,",a.join(),");break;"),h=["function ",p,"(m,",a.join(),"){switch(m){"],c.push(h)}h.push("case ",127&f,":");for(var d=new Array(n),v=new Array(n),m=new Array(n),g=new Array(n),y=0,b=0;n>b;++b)d[b]=[],v[b]=[],m[b]=0,g[b]=0;for(var b=0;1<<n>b;++b)for(var w=0;n>w;++w){var E=b^1<<w;if(!(E>b)&&!(f&1<<E)!=!(f&1<<b)){var S=1;f&1<<E?v[w].push("v"+E+"-v"+b):(v[w].push("v"+b+"-v"+E),S=-S),0>S?(d[w].push("-v"+b+"-v"+E),m[w]+=2):(d[w].push("v"+b+"+v"+E),m[w]-=2),y+=1;for(var x=0;n>x;++x)x!==w&&(E&1<<x?g[x]+=1:g[x]-=1)}}for(var T=[],w=0;n>w;++w)if(0===d[w].length)T.push("d"+w+"-0.5");else{var N="";m[w]<0?N=m[w]+"*c":m[w]>0&&(N="+"+m[w]+"*c");var C=.5*(d[w].length/y),k=.5+.5*(g[w]/y);T.push("d"+w+"-"+k+"-"+C+"*("+d[w].join("+")+N+")/("+v[w].join("+")+")")}h.push("a.push([",T.join(),"]);","break;")}r.push("}},"),c.length>0&&h.push("}}");for(var L=[],f=0;1<<n-1>f;++f)L.push("v"+f);L.push("c0","c1","p0","p1","a","b","c"),r.push("cell:function cellFunc(",L.join(),"){");var A=u(n-1);r.push("if(p0){b.push(",A.map(function(e){return"["+e.map(function(e){return"v"+e})+"]"}).join(),")}else{b.push(",A.map(function(e){var t=e.slice();return t.reverse(),"["+t.map(function(e){return"v"+e})+"]"}).join(),")}}});function ",i,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",i,";");for(var f=0;f<c.length;++f)r.push(c[f].join(""));var O=new Function("genContour",r.join(""));return O(o)}function i(e,t){for(var n=a(e,t),r=n.length,i=new Array(r),s=new Array(r),o=0;r>o;++o)i[o]=[n[o]],s[o]=[o];return{positions:i,cells:s}}function s(e,t){if(e.dimension<=0)return{positions:[],cells:[]};if(1===e.dimension)return i(e,t);var n=e.order.join()+"-"+e.dtype,s=f[n],t=+t||0;return s||(s=f[n]=r(e.order,e.dtype)),s(e,t)}t.exports=s;var o=e("ndarray-extract-contour"),u=e("triangulate-hypercube"),a=e("zero-crossings"),f={}},{"ndarray-extract-contour":200,"triangulate-hypercube":205,"zero-crossings":210}],212:[function(e,t,n){(function(n){"use strict";function r(e){for(var t=e.cells,n=e.positions,r=new Float32Array(6*t.length),i=0,s=0,o=0;o<t.length;++o)for(var u=t[o],a=0;3>a;++a){var f=n[u[a]];r[i++]=f[0],r[i++]=f[1]+1.4,s=Math.max(f[0],s)}return{data:r,shape:s}}function i(e,t){var n=u[e];n||(n=u[e]={" ":{data:new Float32Array(0),shape:.2}});var o=n[t];if(!o)if(t.length<=1||!/\d/.test(t))o=n[t]=r(s(t,{triangles:!0,font:e,textAlign:"left",textBaseline:"alphabetic"}));else{for(var f=t.split(/(\d|\s)/),l=new Array(f.length),c=0,h=0,p=0;p<f.length;++p)l[p]=i(e,f[p]),c+=l[p].data.length,h+=l[p].shape,p>0&&(h+=.02);for(var d=new Float32Array(c),v=0,m=-0.5*h,p=0;p<l.length;++p){for(var g=l[p].data,y=0;y<g.length;y+=2)d[v++]=g[y]+m,d[v++]=g[y+1];m+=l[p].shape+.02}o=n[t]={data:d,shape:h}}return o}t.exports=i;var s=e("vectorize-text"),o=window||n.global||{},u=o.__TEXT_CACHE||{};o.__TEXT_CACHE={}}).call(this,e("_process"))},{_process:38,"vectorize-text":219}],213:[function(n,r,i){!function(){function n(e,t){if(e=e?e:"",t=t||{},e instanceof n)return e;if(!(this instanceof n))return new n(e,t);var r=i(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=U(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=U(this._r)),this._g<1&&(this._g=U(this._g)),this._b<1&&(this._b=U(this._b)),this._ok=r.ok,this._tc_id=q++}function i(e){var t={r:0,g:0,b:0},n=1,r=!1,i=!1;return"string"==typeof e&&(e=B(e)),"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=s(e.r,e.g,e.b),r=!0,i="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=D(e.s),e.v=D(e.v),t=f(e.h,e.s,e.v),r=!0,i="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=D(e.s),e.l=D(e.l),t=u(e.h,e.s,e.l),r=!0,i="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=C(n),{ok:r,format:e.format||i,r:z(255,W(t.r,0)),g:z(255,W(t.g,0)),b:z(255,W(t.b,0)),a:n}}function s(e,t,n){return{r:255*k(e,255),g:255*k(t,255),b:255*k(n,255)}}function o(e,t,n){e=k(e,255),t=k(t,255),n=k(n,255);var r,i,s=W(e,t,n),o=z(e,t,n),u=(s+o)/2;if(s==o)r=i=0;else{var a=s-o;switch(i=u>.5?a/(2-s-o):a/(s+o),s){case e:r=(t-n)/a+(n>t?6:0);break;case t:r=(n-e)/a+2;break;case n:r=(e-t)/a+4}r/=6}return{h:r,s:i,l:u}}function u(e,t,n){function r(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e}var i,s,o;if(e=k(e,360),t=k(t,100),n=k(n,100),0===t)i=s=o=n;else{var u=.5>n?n*(1+t):n+t-n*t,a=2*n-u;i=r(a,u,e+1/3),s=r(a,u,e),o=r(a,u,e-1/3)}return{r:255*i,g:255*s,b:255*o}}function a(e,t,n){e=k(e,255),t=k(t,255),n=k(n,255);var r,i,s=W(e,t,n),o=z(e,t,n),u=s,a=s-o;if(i=0===s?0:a/s,s==o)r=0;else{switch(s){case e:r=(t-n)/a+(n>t?6:0);break;case t:r=(n-e)/a+2;break;case n:r=(e-t)/a+4}r/=6}return{h:r,s:i,v:u}}function f(e,t,n){e=6*k(e,360),t=k(t,100),n=k(n,100);var r=R.floor(e),i=e-r,s=n*(1-t),o=n*(1-i*t),u=n*(1-(1-i)*t),a=r%6,f=[n,o,s,s,u,n][a],l=[u,n,n,o,s,s][a],c=[s,s,u,n,n,o][a];return{r:255*f,g:255*l,b:255*c}}function l(e,t,n,r){var i=[_(U(e).toString(16)),_(U(t).toString(16)),_(U(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function c(e,t,n,r){var i=[_(P(r)),_(U(e).toString(16)),_(U(t).toString(16)),_(U(n).toString(16))];return i.join("")}function h(e,t){t=0===t?0:t||10;var r=n(e).toHsl();return r.s-=t/100,r.s=L(r.s),n(r)}function p(e,t){t=0===t?0:t||10;var r=n(e).toHsl();return r.s+=t/100,r.s=L(r.s),n(r)}function d(e){return n(e).desaturate(100)}function v(e,t){t=0===t?0:t||10;var r=n(e).toHsl();return r.l+=t/100,r.l=L(r.l),n(r)}function m(e,t){t=0===t?0:t||10;var r=n(e).toRgb();return r.r=W(0,z(255,r.r-U(255*-(t/100)))),r.g=W(0,z(255,r.g-U(255*-(t/100)))),r.b=W(0,z(255,r.b-U(255*-(t/100)))),n(r)}function g(e,t){t=0===t?0:t||10;var r=n(e).toHsl();return r.l-=t/100,r.l=L(r.l),n(r)}function y(e,t){var r=n(e).toHsl(),i=(U(r.h)+t)%360;return r.h=0>i?360+i:i,n(r)}function b(e){var t=n(e).toHsl();return t.h=(t.h+180)%360,n(t)}function w(e){var t=n(e).toHsl(),r=t.h;return[n(e),n({h:(r+120)%360,s:t.s,l:t.l}),n({h:(r+240)%360,s:t.s,l:t.l})]}function E(e){var t=n(e).toHsl(),r=t.h;return[n(e),n({h:(r+90)%360,s:t.s,l:t.l}),n({h:(r+180)%360,s:t.s,l:t.l}),n({h:(r+270)%360,s:t.s,l:t.l})]}function S(e){var t=n(e).toHsl(),r=t.h;return[n(e),n({h:(r+72)%360,s:t.s,l:t.l}),n({h:(r+216)%360,s:t.s,l:t.l})]}function x(e,t,r){t=t||6,r=r||30;var i=n(e).toHsl(),s=360/r,o=[n(e)];for(i.h=(i.h-(s*t>>1)+720)%360;--t;)i.h=(i.h+s)%360,o.push(n(i));return o}function T(e,t){t=t||6;for(var r=n(e).toHsv(),i=r.h,s=r.s,o=r.v,u=[],a=1/t;t--;)u.push(n({h:i,s:s,v:o})),o=(o+a)%1;return u}function N(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function C(e){return e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=1),e}function k(e,t){O(e)&&(e="100%");var n=M(e);return e=z(t,W(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),R.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function L(e){return z(1,W(0,e))}function A(e){return parseInt(e,16)}function O(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function M(e){return"string"==typeof e&&-1!=e.indexOf("%")}function _(e){return 1==e.length?"0"+e:""+e}function D(e){return 1>=e&&(e=100*e+"%"),e}function P(e){return Math.round(255*parseFloat(e)).toString(16)}function H(e){return A(e)/255}function B(e){e=e.replace(F,"").replace(I,"").toLowerCase();var t=!1;if(V[e])e=V[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=J.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=J.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=J.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=J.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=J.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=J.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=J.hex8.exec(e))?{a:H(n[1]),r:A(n[2]),g:A(n[3]),b:A(n[4]),format:t?"name":"hex8"}:(n=J.hex6.exec(e))?{r:A(n[1]),g:A(n[2]),b:A(n[3]),format:t?"name":"hex"}:(n=J.hex3.exec(e))?{r:A(n[1]+""+n[1]),g:A(n[2]+""+n[2]),b:A(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function j(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}var F=/^[\s,#]+/,I=/\s+$/,q=0,R=Math,U=R.round,z=R.min,W=R.max,X=R.random;n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r,i,s,o=this.toRgb();return e=o.r/255,t=o.g/255,n=o.b/255,r=.03928>=e?e/12.92:Math.pow((e+.055)/1.055,2.4),i=.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4),s=.03928>=n?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*r+.7152*i+.0722*s},setAlpha:function(e){return this._a=C(e),this._roundA=U(100*this._a)/100,this},toHsv:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=a(this._r,this._g,this._b),t=U(360*e.h),n=U(100*e.s),r=U(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o(this._r,this._g,this._b),t=U(360*e.h),n=U(100*e.s),r=U(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return l(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return c(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:U(this._r),g:U(this._g),b:U(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+U(this._r)+", "+U(this._g)+", "+U(this._b)+")":"rgba("+U(this._r)+", "+U(this._g)+", "+U(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:U(100*k(this._r,255))+"%",g:U(100*k(this._g,255))+"%",b:U(100*k(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+U(100*k(this._r,255))+"%, "+U(100*k(this._g,255))+"%, "+U(100*k(this._b,255))+"%)":"rgba("+U(100*k(this._r,255))+"%, "+U(100*k(this._g,255))+"%, "+U(100*k(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:$[l(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+c(this._r,this._g,this._b,this._a),r=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=n(e);r=s.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!t&&r&&("hex"===e||"hex6"===e||"hex3"===e||"name"===e);return i?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(d,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(x,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},n.fromRatio=function(e,t){if("object"==typeof e){var r={};for(var i in e)e.hasOwnProperty(i)&&("a"===i?r[i]=e[i]:r[i]=D(e[i]));e=r}return n(e,t)},n.equals=function(e,t){return e&&t?n(e).toRgbString()==n(t).toRgbString():!1},n.random=function(){return n.fromRatio({r:X(),g:X(),b:X()})},n.mix=function(e,t,r){r=0===r?0:r||50;var i,s=n(e).toRgb(),o=n(t).toRgb(),u=r/100,a=2*u-1,f=o.a-s.a;i=a*f==-1?a:(a+f)/(1+a*f),i=(i+1)/2;var l=1-i,c={r:o.r*i+s.r*l,g:o.g*i+s.g*l,b:o.b*i+s.b*l,a:o.a*u+s.a*(1-u)};return n(c)},n.readability=function(e,t){var r=n(e),i=n(t);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)},n.isReadable=function(e,t,r){var i,s,o=n.readability(e,t);switch(s=!1,i=j(r),i.level+i.size){case"AAsmall":case"AAAlarge":s=o>=4.5;break;case"AAlarge":s=o>=3;break;case"AAAsmall":s=o>=7}return s},n.mostReadable=function(e,t,r){var i,s,o,u,a=null,f=0;r=r||{},s=r.includeFallbackColors,o=r.level,u=r.size;for(var l=0;l<t.length;l++)i=n.readability(e,t[l]),i>f&&(f=i,a=n(t[l]));return n.isReadable(e,a,{level:o,size:u})||!s?a:(r.includeFallbackColors=!1,n.mostReadable(e,["#fff","#000"],r))};var V=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},$=n.hexNames=N(V),J=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof r&&r.exports?r.exports=n:"function"==typeof e&&e.amd?e(function(){return n}):window.tinycolor=n}()},{}],214:[function(r,i,s){!function(){function r(e,t){function n(t){var n,r=e.arcs[0>t?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],0>t?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[0>e?~e:e]=1}),u.push(r)}}var i={},s={},o={},u=[],a=-1;return t.forEach(function(n,r){var i,s=e.arcs[0>n?~n:n];s.length<3&&!s[1][0]&&!s[1][1]&&(i=t[++a],t[a]=n,t[r]=i)}),t.forEach(function(e){var t,r,i=n(e),u=i[0],a=i[1];if(t=o[u])if(delete o[t.end],t.push(e),t.end=a,r=s[a]){delete s[r.start];var f=r===t?t:t.concat(r);s[f.start=t.start]=o[f.end=r.end]=f}else s[t.start]=o[t.end]=t;else if(t=s[a])if(delete s[t.start],t.unshift(e),t.start=u,r=o[u]){delete o[r.end];var l=r===t?t:r.concat(t);s[l.start=r.start]=o[l.end=t.end]=l}else s[t.start]=o[t.end]=t;else t=[e],s[t.start=u]=o[t.end=a]=t}),r(o,s),r(s,o),t.forEach(function(e){i[0>e?~e:e]||u.push([e])}),u}function s(e,t,n){function i(e){var t=0>e?~e:e;(l[t]||(l[t]=[])).push({i:e,g:f})}function s(e){e.forEach(i)}function o(e){e.forEach(s)}function u(e){"GeometryCollection"===e.type?e.geometries.forEach(u):e.type in c&&(f=e,c[e.type](e.arcs))}var a=[];if(arguments.length>1){var f,l=[],c={LineString:s,MultiLineString:o,Polygon:o,MultiPolygon:function(e){e.forEach(o)}};u(t),l.forEach(arguments.length<3?function(e){a.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&a.push(e[0].i)})}else for(var h=0,p=e.arcs.length;p>h;++h)a.push(h);return{type:"MultiLineString",arcs:r(e,a)}}function o(e,t){function i(e){e.forEach(function(t){t.forEach(function(t){(o[t=0>t?~t:t]||(o[t]=[])).push(e)})}),u.push(e)}function s(t){return d(f(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var o={},u=[],a=[];return t.forEach(function(e){"Polygon"===e.type?i(e.arcs):"MultiPolygon"===e.type&&e.arcs.forEach(i)}),u.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,a.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){o[0>e?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),u.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:a.map(function(t){var i=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){o[0>e?~e:e].length<2&&i.push(e)})})}),i=r(e,i),(n=i.length)>1)for(var u,a=s(t[0][0]),f=0;f<n;++f)if(a===s(i[f])){u=i[0],i[0]=i[f],i[f]=u;break}return i})}}function u(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return a(e,t)})}:a(e,t)}function a(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:f(e,t)};return null==t.id&&delete n.id,n}function f(e,t){function n(e,t){t.length&&t.pop();for(var n,r=f[0>e?~e:e],i=0,s=r.length;s>i;++i)t.push(n=r[i].slice()),a(n,i);0>e&&l(t,s)}function r(e){return e=e.slice(),a(e,0),e}function i(e){for(var t=[],r=0,i=e.length;i>r;++r)n(e[r],t);return t.length<2&&t.push(t[0].slice()),t}function s(e){for(var t=i(e);t.length<4;)t.push(t[0].slice());return t}function o(e){return e.map(s)}function u(e){var t=e.type;return"GeometryCollection"===t?{type:t,geometries:e.geometries.map(u)}:t in c?{type:t,coordinates:c[t](e)}:null}var a=y(e.transform),f=e.arcs,c={Point:function(e){return r(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(r)},LineString:function(e){return i(e.arcs)},MultiLineString:function(e){return e.arcs.map(i)},Polygon:function(e){return o(e.arcs)},MultiPolygon:function(e){return e.arcs.map(o)}};return u(t)}function l(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function c(e,t){for(var n=0,r=e.length;r>n;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function h(e){function t(e,t){e.forEach(function(e){0>e&&(e=~e);var n=i[e];n?n.push(t):i[e]=[t]})}function n(e,n){e.forEach(function(e){t(e,n)})}function r(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){r(e,t)}):e.type in o&&o[e.type](e.arcs,t)}var i={},s=e.map(function(){return[]}),o={LineString:t,MultiLineString:n,Polygon:n,MultiPolygon:function(e,t){e.forEach(function(e){n(e,t)})}};e.forEach(r);for(var u in i)for(var a=i[u],f=a.length,l=0;f>l;++l)for(var h=l+1;f>h;++h){var p,d=a[l],v=a[h];(p=s[d])[u=c(p,v)]!==v&&p.splice(u,0,v),(p=s[v])[u=c(p,d)]!==d&&p.splice(u,0,d)}return s}function p(e,t){function n(e){s.remove(e),e[1][2]=t(e),s.push(e)}var r=y(e.transform),i=b(e.transform),s=g();return t||(t=v),e.arcs.forEach(function(e){for(var o,u,a=[],f=0,l=0,c=e.length;c>l;++l)u=e[l],r(e[l]=[u[0],u[1],1/0],l);for(var l=1,c=e.length-1;c>l;++l)o=e.slice(l-1,l+2),o[1][2]=t(o),a.push(o),s.push(o);for(var l=0,c=a.length;c>l;++l)o=a[l],o.previous=a[l-1],o.next=a[l+1];for(;o=s.pop();){var h=o.previous,p=o.next;o[1][2]<f?o[1][2]=f:f=o[1][2],h&&(h.next=p,h[2]=o[2],n(h)),p&&(p.previous=h,p[0]=o[0],n(p))}e.forEach(i)}),e}function d(e){for(var t,n=-1,r=e.length,i=e[r-1],s=0;++n<r;)t=i,i=e[n],s+=t[0]*i[1]-t[1]*i[0];return.5*s}function v(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function m(e,t){return e[1][2]-t[1][2]}function g(){function e(e,t){for(;t>0;){var n=(t+1>>1)-1,i=r[n];if(m(e,i)>=0)break;r[i._=t]=i,r[e._=t=n]=e}}function t(e,t){for(;;){var n=t+1<<1,s=n-1,o=t,u=r[o];if(i>s&&m(r[s],u)<0&&(u=r[o=s]),i>n&&m(r[n],u)<0&&(u=r[o=n]),o===t)break;r[u._=t]=u,r[e._=t=o]=e}}var n={},r=[],i=0;return n.push=function(t){return e(r[t._=i]=t,i++),i},n.pop=function(){if(!(0>=i)){var e,n=r[0];return--i>0&&(e=r[i],t(r[e._=0]=e,0)),n}},n.remove=function(n){var s,o=n._;if(r[o]===n)return o!==--i&&(s=r[i],(m(s,n)<0?e:t)(r[s._=o]=s,o)),o},n}function y(e){if(!e)return w;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0),e[0]=(t+=e[0])*r+s,e[1]=(n+=e[1])*i+o}}function b(e){if(!e)return w;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var a=(e[0]-s)/r|0,f=(e[1]-o)/i|0;e[0]=a-t,e[1]=f-n,t=a,n=f}}function w(){}var E={version:"1.6.19",mesh:function(e){return f(e,s.apply(this,arguments))},meshArcs:s,merge:function(e){return f(e,o.apply(this,arguments))},mergeArcs:o,feature:u,neighbors:h,presimplify:p};"function"==typeof e&&e.amd?e(E):"object"==typeof i&&i.exports?i.exports=E:this.topojson=E}()},{}],215:[function(e,t,n){"use strict";function r(e,t,n){var r=e*t,s=i*e,o=s-e,u=s-o,a=e-u,f=i*t,l=f-t,c=f-l,h=t-c,p=r-u*c,d=p-a*c,v=d-u*h,m=a*h-v;return n?(n[0]=m,n[1]=r,n):[m,r]}t.exports=r;var i=+(Math.pow(2,27)+1)},{}],216:[function(e,t,n){"use strict";function r(e,t,n){var r=e+t,i=r-e,s=r-i,o=t-i,u=e-s;return n?(n[0]=u+o,n[1]=r,n):[u+o,r]}t.exports=r},{}],217:[function(e,t,n){(function(t,i){"use strict";function s(e){if(e){var t=e.length||e.byteLength,n=b.log2(t);x[n].push(e)}}function o(e){s(e.buffer)}function u(e){var e=b.nextPow2(e),t=b.log2(e),n=x[t];return n.length>0?n.pop():new ArrayBuffer(e)}function a(e){return new Uint8Array(u(e),0,e)}function f(e){return new Uint16Array(u(2*e),0,e)}function l(e){return new Uint32Array(u(4*e),0,e)}function c(e){return new Int8Array(u(e),0,e)}function h(e){return new Int16Array(u(2*e),0,e)}function p(e){return new Int32Array(u(4*e),0,e)}function d(e){return new Float32Array(u(4*e),0,e)}function v(e){return new Float64Array(u(8*e),0,e)}function m(e){return E?new Uint8ClampedArray(u(e),0,e):a(e)}function g(e){return new DataView(u(e),0,e)}function y(e){e=b.nextPow2(e);var t=b.log2(e),n=T[t];return n.length>0?n.pop():new i(e)}var b=e("bit-twiddle"),w=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:w([32,0]),UINT16:w([32,0]),UINT32:w([32,0]),INT8:w([32,0]),INT16:w([32,0]),INT32:w([32,0]),FLOAT:w([32,0]),DOUBLE:w([32,0]),DATA:w([32,0]),UINT8C:w([32,0]),BUFFER:w([32,0])});var E="undefined"!=typeof Uint8ClampedArray,S=t.__TYPEDARRAY_POOL;S.UINT8C||(S.UINT8C=w([32,0])),S.BUFFER||(S.BUFFER=w([32,0]));var x=S.DATA,T=S.BUFFER;n.free=function(e){if(i.isBuffer(e))T[b.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|b.log2(t);x[n].push(e)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=o,n.freeArrayBuffer=s,n.freeBuffer=function(e){T[b.log2(e.length)].push(e)},n.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return u(e);switch(t){case"uint8":return a(e);case"uint16":return f(e);case"uint32":return l(e);case"int8":return c(e);case"int16":return h(e);case"int32":return p(e);case"float":case"float32":return d(e);case"double":case"float64":return v(e);case"uint8_clamped":return m(e);case"buffer":return y(e);case"data":case"dataview":return g(e);default:return null}return null},n.mallocArrayBuffer=u,n.mallocUint8=a,n.mallocUint16=f,n.mallocUint32=l,n.mallocInt8=c,n.mallocInt16=h,n.mallocInt32=p,n.mallocFloat32=n.mallocFloat=d,n.mallocFloat64=n.mallocDouble=v,n.mallocUint8Clamped=m,n.mallocDataView=g,n.mallocBuffer=y,n.clearCache=function(){for(var e=0;32>e;++e)S.UINT8[e].length=0,S.UINT16[e].length=0,S.UINT32[e].length=0,S.INT8[e].length=0,S.INT16[e].length=0,S.INT32[e].length=0,S.FLOAT[e].length=0,S.DOUBLE[e].length=0,S.UINT8C[e].length=0,x[e].length=0,T[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":33,buffer:34,dup:55}],218:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],219:[function(e,t,n){"use strict";function r(e,t){return("object"!=typeof t||null===t)&&(t={}),i(e,t.canvas||s,t.context||o,t)}t.exports=r;var i=e("./lib/vtext"),s=null,o=null;"undefined"!=typeof document&&(s=document.createElement("canvas"),s.width=8192,s.height=1024,o=s.getContext("2d"))},{"./lib/vtext":220}],220:[function(e,t,n){"use strict";function r(e,t,n){for(var r=t.textAlign||"start",i=t.textBaseline||"alphabetic",s=[1<<30,1<<30],o=[0,0],u=e.length,a=0;u>a;++a)for(var f=e[a],l=0;2>l;++l)s[l]=0|Math.min(s[l],f[l]),o[l]=0|Math.max(o[l],f[l]);var c=0;switch(r){case"center":c=-0.5*(s[0]+o[0]);break;case"right":case"end":c=-o[0];break;case"left":case"start":c=-s[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+r+"'")}var h=0;switch(i){case"hanging":case"top":h=-s[1];break;case"middle":h=-0.5*(s[1]+o[1]);break;case"alphabetic":case"ideographic":h=-3*n;break;case"bottom":h=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var p=1/n;return"lineHeight"in t?p*=+t.lineHeight:"width"in t?p=t.width/(o[0]-s[0]):"height"in t&&(p=t.height/(o[1]-s[1])),e.map(function(e){return[p*(e[0]+c),p*(e[1]+h)]})}function i(e,t,n,r){var i=0|Math.ceil(t.measureText(n).width+2*r);if(i>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var s=3*r;e.height<s&&(e.height=s),t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff",t.fillText(n,r,2*r);var o=t.getImageData(0,0,i,s),u=l(o.data,[s,i,4]);return u.pick(-1,-1,0).transpose(1,0)}function s(e,t){var n=f(e,128);return t?c(n.cells,n.positions,.25):{edges:n.cells,positions:n.positions}}function o(e,t,n,i){var o=s(e,i),u=r(o.positions,t,n),a=o.edges,f="ccw"===t.orientation;if(h(u,a),t.polygons||t.polygon||t.polyline){for(var l=d(a,u),c=new Array(l.length),v=0;v<l.length;++v){for(var m=l[v],g=new Array(m.length),y=0;y<m.length;++y){for(var b=m[y],w=new Array(b.length),E=0;E<b.length;++E)w[E]=u[b[E]].slice();f&&w.reverse(),g[y]=w}c[v]=g}return c}return t.triangles||t.triangulate||t.triangle?{cells:p(u,a,{delaunay:!1,exterior:!1,interior:!0}),positions:u}:{edges:a,positions:u}}function u(e,t,n){try{return o(e,t,n,!0)}catch(r){}try{return o(e,t,n,!1)}catch(r){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function a(e,t,n,r){var s=r.size||64,o=r.font||"normal";n.font=s+"px "+o,n.textAlign="start",n.textBaseline="alphabetic",n.direction="ltr";var a=i(t,n,e,s);return u(a,r,s)}t.exports=a,t.exports.processPixels=u;var f=e("surface-nets"),l=e("ndarray"),c=e("simplify-planar-graph"),h=e("clean-pslg"),p=e("cdt2d"),d=e("planar-graph-to-polyline")},{cdt2d:221,"clean-pslg":228,ndarray:189,"planar-graph-to-polyline":274,"simplify-planar-graph":278,"surface-nets":211}],221:[function(e,t,n){"use strict";function r(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function i(e,t){return e[0]-t[0]||e[1]-t[1]}function s(e){return e.map(r).sort(i)}function o(e,t,n){return t in e?e[t]:n}function u(e,t,n){Array.isArray(t)?(n=n||{},t=t||[]):(n=t||{},t=[]);var r=!!o(n,"delaunay",!0),i=!!o(n,"interior",!0),u=!!o(n,"exterior",!0),p=!!o(n,"infinity",!1);if(!i&&!u||0===e.length)return[];var d=a(e,t);if(r||i!==u||p){for(var v=f(e.length,s(t)),m=0;m<d.length;++m){var g=d[m];v.addTriangle(g[0],g[1],g[2])}return r&&l(e,v),u?i?p?c(v,0,p):v.cells():c(v,1,p):c(v,-1)}return d}var a=e("./lib/monotone"),f=e("./lib/triangulation"),l=e("./lib/delaunay"),c=e("./lib/filter");t.exports=u},{"./lib/delaunay":222,"./lib/filter":223,"./lib/monotone":224,"./lib/triangulation":225}],222:[function(e,t,n){"use strict";function r(e,t,n,r,i,o){var u=t.opposite(r,i);if(!(0>u)){if(r>i){var f=r;r=i,i=f,f=o,o=u,u=f}t.isConstraint(r,i)||s(e[r],e[i],e[o],e[u])<0&&n.push(r,i)}}function i(e,t){for(var n=[],i=e.length,o=t.stars,u=0;i>u;++u)for(var f=o[u],l=1;l<f.length;l+=2){var c=f[l];if(!(u>c||t.isConstraint(u,c))){for(var h=f[l-1],p=-1,d=1;d<f.length;d+=2)if(f[d-1]===c){p=f[d];break}0>p||s(e[u],e[c],e[h],e[p])<0&&n.push(u,c)}}for(;n.length>0;){for(var c=n.pop(),u=n.pop(),h=-1,p=-1,f=o[u],v=1;v<f.length;v+=2){var m=f[v-1],g=f[v];m===c?p=g:g===c&&(h=m)}0>h||0>p||s(e[u],e[c],e[h],e[p])>=0||(t.flip(u,c),r(e,t,n,h,u,p),r(e,t,n,u,p,h),r(e,t,n,p,c,h),r(e,t,n,c,h,p))}}var s=e("robust-in-sphere")[4];e("binary-search-bounds"),t.exports=i},{"binary-search-bounds":226,"robust-in-sphere":227}],223:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){this.cells=e,this.neighbor=t,this.flags=r,this.constraint=n,this.active=i,this.next=s,this.boundary=o}function i(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}function s(e,t){for(var n=e.cells(),s=n.length,o=0;s>o;++o){var u=n[o],a=u[0],f=u[1],l=u[2];l>f?a>f&&(u[0]=f,u[1]=l,u[2]=a):a>l&&(u[0]=l,u[1]=a,u[2]=f)}n.sort(i);for(var c=new Array(s),o=0;o<c.length;++o)c[o]=0;var h=[],p=[],d=new Array(3*s),v=new Array(3*s),m=null;t&&(m=[]);for(var g=new r(n,d,v,c,h,p,m),o=0;s>o;++o)for(var u=n[o],y=0;3>y;++y){var a=u[y],f=u[(y+1)%3],b=d[3*o+y]=g.locate(f,a,e.opposite(f,a)),w=v[3*o+y]=e.isConstraint(a,f);0>b&&(w?p.push(o):(h.push(o),c[o]=1),t&&m.push([f,a,-1]))}return g}function o(e,t,n){for(var r=0,i=0;i<e.length;++i)t[i]===n&&(e[r++]=e[i]);return e.length=r,e}function u(e,t,n){var r=s(e,n);if(0===t)return n?r.cells.concat(r.boundary):r.cells;for(var i=1,u=r.active,a=r.next,f=r.flags,l=r.cells,c=r.constraint,h=r.neighbor;u.length>0||a.length>0;){for(;u.length>0;){var p=u.pop();if(f[p]!==-i){f[p]=i;for(var d=(l[p],0);3>d;++d){var v=h[3*p+d];v>=0&&0===f[v]&&(c[3*p+d]?a.push(v):(u.push(v),f[v]=i))}}}var m=a;a=u,u=m,a.length=0,i=-i}var g=o(l,f,t);return n?g.concat(r.boundary):g}var a=e("binary-search-bounds");t.exports=u;var f=r.prototype;f.locate=function(){var e=[0,0,0];return function(t,n,r){var s=t,o=n,u=r;return r>n?t>n&&(s=n,o=r,u=t):t>r&&(s=r,o=t,u=n),0>s?-1:(e[0]=s,e[1]=o,e[2]=u,a.eq(this.cells,e,i))}}()},{"binary-search-bounds":226}],224:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.a=e,this.b=t,this.idx=n,this.lowerIds=r,this.upperIds=i}function i(e,t,n,r){this.a=e,this.b=t,this.type=n,this.idx=r}function s(e,t){var n=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;return n?n:e.type!==d&&(n=p(e.a,e.b,t.b))?n:e.idx-t.idx}function o(e,t){return p(e.a,e.b,t)}function u(e,t,n,r,i){for(var s=h.lt(t,r,o),u=h.gt(t,r,o),a=s;u>a;++a){for(var f=t[a],l=f.lowerIds,c=l.length;c>1&&p(n[l[c-2]],n[l[c-1]],r)>0;)e.push([l[c-1],l[c-2],i]),c-=1;l.length=c,l.push(i);for(var d=f.upperIds,c=d.length;c>1&&p(n[d[c-2]],n[d[c-1]],r)<0;)e.push([d[c-2],d[c-1],i]),c-=1;d.length=c,d.push(i)}}function a(e,t){var n;return(n=e.a[0]<t.a[0]?p(e.a,e.b,t.a):p(t.b,t.a,e.a))?n:(n=t.b[0]<e.b[0]?p(e.a,e.b,t.b):p(t.b,t.a,e.b),n||e.idx-t.idx)}function f(e,t,n){var i=h.le(e,n,a),s=e[i],o=s.upperIds,u=o[o.length-1];s.upperIds=[u],e.splice(i+1,0,new r(n.a,n.b,n.idx,[u],o))}function l(e,t,n){var r=n.a;n.a=n.b,n.b=r;var i=h.eq(e,n,a),s=e[i],o=e[i-1];o.upperIds=s.upperIds,e.splice(i,1)}function c(e,t){for(var n=e.length,o=t.length,a=[],c=0;n>c;++c)a.push(new i(e[c],null,d,c));for(var c=0;o>c;++c){var h=t[c],p=e[h[0]],y=e[h[1]];p[0]<y[0]?a.push(new i(p,y,m,c),new i(y,p,v,c)):p[0]>y[0]&&a.push(new i(y,p,m,c),new i(p,y,v,c))}a.sort(s);for(var b=a[0].a[0]-(1+Math.abs(a[0].a[0]))*Math.pow(2,-52),w=[new r([b,1],[b,0],-1,[],[],[],[])],E=[],c=0,S=a.length;S>c;++c){var x=a[c],T=x.type;T===d?u(E,w,e,x.a,x.idx):T===m?f(w,e,x):l(w,e,x)}return E}var h=e("binary-search-bounds"),p=e("robust-orientation")[3],d=0,v=1,m=2;t.exports=c},{"binary-search-bounds":226,"robust-orientation":195}],225:[function(e,t,n){"use strict";function r(e,t){this.stars=e,this.edges=t}function i(e,t,n){for(var r=1,i=e.length;i>r;r+=2)if(e[r-1]===t&&e[r]===n)return e[r-1]=e[i-2],e[r]=e[i-1],void (e.length=i-2)}function s(e,t){for(var n=new Array(e),i=0;e>i;++i)n[i]=[];return new r(n,t)}var o=e("binary-search-bounds");t.exports=s;var u=r.prototype;u.isConstraint=function(){function e(e,t){return e[0]-t[0]||e[1]-t[1]}var t=[0,0];return function(n,r){return t[0]=Math.min(n,r),t[1]=Math.max(n,r),o.eq(this.edges,t,e)>=0}}(),u.removeTriangle=function(e,t,n){var r=this.stars;i(r[e],t,n),i(r[t],n,e),i(r[n],e,t)},u.addTriangle=function(e,t,n){var r=this.stars;r[e].push(t,n),r[t].push(n,e),r[n].push(e,t)},u.opposite=function(e,t){for(var n=this.stars[t],r=1,i=n.length;i>r;r+=2)if(n[r]===e)return n[r-1];return-1},u.flip=function(e,t){var n=this.opposite(e,t),r=this.opposite(t,e);this.removeTriangle(e,t,n),this.removeTriangle(t,e,r),this.addTriangle(e,r,n),this.addTriangle(t,n,r)},u.edges=function(){for(var e=this.stars,t=[],n=0,r=e.length;r>n;++n)for(var i=e[n],s=0,o=i.length;o>s;s+=2)t.push([i[s],i[s+1]]);return t},u.cells=function(){for(var e=this.stars,t=[],n=0,r=e.length;r>n;++n)for(var i=e[n],s=0,o=i.length;o>s;s+=2){var u=i[s],a=i[s+1];n<Math.min(u,a)&&t.push([n,u,a])}return t}},{"binary-search-bounds":226}],226:[function(e,t,n){arguments[4][105][0].apply(n,arguments)},{dup:105}],227:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),s=0,o=0;s<e.length;++s)s!==t&&(i[o++]=e[r][s]);return n}function i(e){for(var t=new Array(e),n=0;e>n;++n){t[n]=new Array(e);for(var r=0;e>r;++r)t[n][r]=["m",r,"[",e-n-2,"]"].join("")}return t}function s(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",s(e.slice(0,t)),",",s(e.slice(t)),")"].join("")}function o(e,t){if("m"===e.charAt(0)){if("w"===t.charAt(0)){var n=e.split("[");return["w",t.substr(1),"m",n[0].substr(1)].join("")}return["prod(",e,",",t,")"].join("")}return o(t,e)}function u(e){return e&!0?"-":""}function a(e){if(2===e.length)return[["diff(",o(e[0][0],e[1][1]),",",o(e[1][0],e[0][1]),")"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",s(a(r(e,n))),",",u(n),e[0][n],")"].join(""));return t}function f(e,t){for(var n=[],r=0;t-2>r;++r)n.push(["prod(m",e,"[",r,"],m",e,"[",r,"])"].join(""));return s(n)}function l(e){for(var t=[],n=[],o=i(e),u=0;e>u;++u)o[0][u]="1",o[e-1][u]="w"+u;for(var u=0;e>u;++u)0===(1&u)?t.push.apply(t,a(r(o,u))):n.push.apply(n,a(r(o,u)));for(var l=s(t),c=s(n),h="exactInSphere"+e,p=[],u=0;e>u;++u)p.push("m"+u);for(var d=["function ",h,"(",p.join(),"){"],u=0;e>u;++u){d.push("var w",u,"=",f(u,e),";");for(var v=0;e>v;++v)v!==u&&d.push("var w",u,"m",v,"=scale(w",u,",m",v,"[0]);")}d.push("var p=",l,",n=",c,",d=diff(p,n);return d[d.length-1];}return ",h);var w=new Function("sum","diff","prod","scale",d.join(""));return w(g,y,m,b)}function c(){return 0}function h(){return 0}function p(){return 0}function d(e){var t=E[e.length];return t||(t=E[e.length]=l(e.length)),t.apply(void 0,e)}function v(){for(;E.length<=w;)E.push(l(E.length));for(var e=[],n=["slow"],r=0;w>=r;++r)e.push("a"+r),n.push("o"+r);for(var i=["function testInSphere(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],r=2;w>=r;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),n.push(i.join(""));var s=Function.apply(void 0,n);t.exports=s.apply(void 0,[d].concat(E));for(var r=0;w>=r;++r)t.exports[r]=E[r]}var m=e("two-product"),g=e("robust-sum"),y=e("robust-subtract"),b=e("robust-scale"),w=6,E=[c,h,p];v()},{"robust-scale":196,"robust-subtract":197,"robust-sum":198,"two-product":215}],228:[function(e,t,n){"use strict";function r(e){var t=w(e),n=b(y(t),e);return 0>n?[t,S(t,1/0)]:n>0?[S(t,-1/0),t]:[t,t]}function i(e,t){for(var n=new Array(t.length),r=0;r<t.length;++r){var i=t[r],s=e[i[0]],o=e[i[1]];n[r]=[Math.min(s[0],o[0]),Math.min(s[1],o[1]),Math.max(s[0],o[0]),Math.max(s[1],o[1])]}return n}function s(e){for(var t=new Array(e.length),n=0;n<e.length;++n){var r=e[n];t[n]=[r[0],r[1],r[0],r[1]]}return t}function o(e,t,n){var r=[];return m(n,function(n,i){var s=t[n],o=t[i];if(s[0]!==o[0]&&s[0]!==o[1]&&s[1]!==o[0]&&s[1]!==o[1]){var u=e[s[0]],a=e[s[1]],f=e[o[0]],l=e[o[1]];g(u,a,f,l)&&r.push([n,i])}}),r}function u(e,t,n,r){var i=[];return m(n,r,function(n,r){var s=t[n];if(s[0]!==r&&s[1]!==r){var o=e[r],u=e[s[0]],a=e[s[1]];g(u,a,o,o)&&i.push([n,r])}}),i}function a(e,t,n,r,i){function s(t){if(t>=e.length)return o[t-e.length];var n=e[t];return[y(n[0]),y(n[1])]}for(var o=[],u=0;u<n.length;++u){var a=n[u],f=a[0],l=a[1],c=t[f],h=t[l],p=x(E(e[c[0]]),E(e[c[1]]),E(e[h[0]]),E(e[h[1]]));if(p){var d=o.length+e.length;o.push(p),r.push([f,d],[l,d])}}r.sort(function(e,t){if(e[0]!==t[0])return e[0]-t[0];var n=s(e[1]),r=s(t[1]);return b(n[0],r[0])||b(n[1],r[1])});for(var u=r.length-1;u>=0;--u){var v=r[u],f=v[0],m=t[f],g=m[0],w=m[1],S=e[g],T=e[w];if((S[0]-T[0]||S[1]-T[1])<0){var N=g;g=w,w=N}m[0]=g;var C,L=m[1]=v[1];for(i&&(C=m[2]);u>0&&r[u-1][0]===f;){var v=r[--u],A=v[1];i?t.push([L,A,C]):t.push([L,A]),L=A}i?t.push([L,w,C]):t.push([L,w])}return o}function f(e,t,n){for(var i=e.length+t.length,s=new v(i),o=n,u=0;u<t.length;++u){var a=t[u],f=r(a[0]),l=r(a[1]);o.push([f[0],l[0],f[1],l[1]]),e.push([w(a[0]),w(a[1])])}m(o,function(e,t){s.link(e,t)});for(var c=0,h=!0,p=new Array(i),u=0;i>u;++u){var d=s.find(u);d===u?(p[u]=c,e[c++]=e[u]):(h=!1,p[u]=-1)}if(e.length=c,h)return null;for(var u=0;i>u;++u)p[u]<0&&(p[u]=p[s.find(u)]);return p}function l(e,t){return e[0]-t[0]||e[1]-t[1]}function c(e,t){var n=e[0]-t[0]||e[1]-t[1];return n?n:e[2]<t[2]?-1:e[2]>t[2]?1:0}function h(e,t,n){if(0!==e.length){if(t)for(var r=0;r<e.length;++r){var i=e[r],s=t[i[0]],o=t[i[1]];i[0]=Math.min(s,o),i[1]=Math.max(s,o)}else for(var r=0;r<e.length;++r){var i=e[r],s=i[0],o=i[1];i[0]=Math.min(s,o),i[1]=Math.max(s,o)}n?e.sort(c):e.sort(l);for(var u=1,r=1;r<e.length;++r){var a=e[r-1],f=e[r];(f[0]!==a[0]||f[1]!==a[1]||n&&f[2]!==a[2])&&(e[u++]=f)}e.length=u}}function p(e,t,n){var r=i(e,t),l=o(e,t,r),c=s(e),p=u(e,t,r,c),d=a(e,t,l,p,n),v=f(e,d,c);return h(t,v,n),v?!0:l.length>0||p.length>0}function d(e,t,n){var r,i=!1;if(n){r=t;for(var s=new Array(t.length),o=0;o<t.length;++o){var u=t[o];s[o]=[u[0],u[1],n[o]]}t=s}for(;p(e,t,!!n);)i=!0;if(n&&i){r.length=0,n.length=0;for(var o=0;o<t.length;++o){var u=t[o];r.push([u[0],u[1]]),n.push(u[2])}}return i}t.exports=d;var v=e("union-find"),m=e("box-intersect"),g=(e("compare-cell"),e("robust-segment-intersect")),y=e("big-rat"),b=e("big-rat/cmp"),w=e("big-rat/to-float"),E=e("rat-vec"),S=e("nextafter"),x=e("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":229,"big-rat":233,"big-rat/cmp":231,"big-rat/to-float":246,"box-intersect":247,"compare-cell":41,nextafter:255,"rat-vec":257,"robust-segment-intersect":260,"union-find":261}],229:[function(e,t,n){"use strict";function r(e,t){return u(s(e[0],t[1]),s(e[1],t[0]))}function i(e,t,n,i){var s=f(t,e),u=f(i,n),p=r(s,u);if(0===a(p))return null;var d=f(e,n),v=r(u,d),m=o(v,p);return l(e,c(s,m))}t.exports=i;var s=e("big-rat/mul"),o=e("big-rat/div"),u=e("big-rat/sub"),a=e("big-rat/sign"),f=e("rat-vec/sub"),l=e("rat-vec/add"),c=e("rat-vec/muls");e("big-rat/to-float")},{"big-rat/div":232,"big-rat/mul":242,"big-rat/sign":244,"big-rat/sub":245,"big-rat/to-float":246,"rat-vec/add":256,"rat-vec/muls":258,"rat-vec/sub":259}],230:[function(e,t,n){"use strict";function r(e,t){return i(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}var i=e("./lib/rationalize");t.exports=r},{"./lib/rationalize":240}],231:[function(e,t,n){"use strict";function r(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}t.exports=r},{}],232:[function(e,t,n){"use strict";function r(e,t){return i(e[0].mul(t[1]),e[1].mul(t[0]))}var i=e("./lib/rationalize");t.exports=r},{"./lib/rationalize":240}],233:[function(e,t,n){"use strict";function r(e,t){if(i(e))return t?f(e,r(t)):[e[0].clone(),e[1].clone()];var n,c,h=0;if(s(e))n=e.clone();else if("string"==typeof e)n=u(e);else{if(0===e)return[o(0),o(1)];if(e===Math.floor(e))n=o(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),h-=256;n=o(e)}}if(i(t))n.mul(t[1]),c=t[0].clone();else if(s(t))c=t.clone();else if("string"==typeof t)c=u(t);else if(t)if(t===Math.floor(t))c=o(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),h+=256;c=o(t)}else c=o(1);return h>0?n=n.shln(h):0>h&&(c=c.shln(-h)),a(n,c)}var i=e("./is-rat"),s=e("./lib/is-bn"),o=e("./lib/num-to-bn"),u=e("./lib/str-to-bn"),a=e("./lib/rationalize"),f=e("./div");t.exports=r},{"./div":232,"./is-rat":234,"./lib/is-bn":238,"./lib/num-to-bn":239,"./lib/rationalize":240,"./lib/str-to-bn":241}],234:[function(e,t,n){"use strict";function r(e){return Array.isArray(e)&&2===e.length&&i(e[0])&&i(e[1])}var i=e("./lib/is-bn");t.exports=r},{"./lib/is-bn":238}],235:[function(e,t,n){"use strict";function r(e){return e.cmp(new i(0))}var i=e("bn.js");t.exports=r},{"bn.js":243}],236:[function(e,t,n){"use strict";function r(e){var t=e.length,n=e.words,r=0;if(1===t)r=n[0];else if(2===t)r=n[0]+67108864*n[1];else for(var r=0,i=0;t>i;i++){var s=n[i];r+=s*Math.pow(67108864,i)}return e.sign?-r:r}t.exports=r},{}],237:[function(e,t,n){"use strict";function r(e){var t=s(i.lo(e));if(32>t)return t;var n=s(i.hi(e));return n>20?52:n+32}var i=e("double-bits"),s=e("bit-twiddle").countTrailingZeros;t.exports=r},{"bit-twiddle":33,"double-bits":254}],238:[function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&Boolean(e.words)}e("bn.js"),t.exports=r},{"bn.js":243}],239:[function(e,t,n){"use strict";function r(e){var t=s.exponent(e);return 52>t?new i(e):(new i(e*Math.pow(2,52-t))).shln(t-52)}var i=e("bn.js"),s=e("double-bits");t.exports=r},{"bn.js":243,"double-bits":254}],240:[function(e,t,n){"use strict";function r(e,t){var n=s(e),r=s(t);if(0===n)return[i(0),i(1)];if(0===r)return[i(0),i(0)];0>r&&(e=e.neg(),t=t.neg());var o=e.gcd(t);return o.cmpn(1)?[e.div(o),t.div(o)]:[e,t]}var i=e("./num-to-bn"),s=e("./bn-sign");t.exports=r},{"./bn-sign":235,"./num-to-bn":239}],241:[function(e,t,n){"use strict";function r(e){return new i(e)}var i=e("bn.js");t.exports=r},{"bn.js":243}],242:[function(e,t,n){"use strict";function r(e,t){return i(e[0].mul(t[0]),e[1].mul(t[1]))}var i=e("./lib/rationalize");t.exports=r},{"./lib/rationalize":240}],243:[function(e,t,n){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){return null!==e&&"object"==typeof e&&Array.isArray(e.words)?e:(this.sign=!1,this.words=null,this.length=0,this.red=null,("le"===t||"be"===t)&&(n=t,t=10),void (null!==e&&this._init(e||0,t||10,n||"be")))}function s(e,t,n){for(var r=0,i=Math.min(e.length,n),s=t;i>s;s++){var o=e.charCodeAt(s)-48;r<<=4,r|=o>=49&&54>=o?o-49+10:o>=17&&22>=o?o-17+10:15&o}return r}function o(e,t,n,r){for(var i=0,s=Math.min(e.length,n),o=t;s>o;o++){var u=e.charCodeAt(o)-48;i*=r,i+=u>=49?u-49+10:u>=17?u-17+10:u}return i}function u(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=(new i(1)).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function a(){u.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function f(){u.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function l(){u.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function c(){u.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function h(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else this.m=e,this.prime=null}function p(e){h.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=(new i(1)).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv.sign=!0,this.minv=this.minv.mod(this.r)}"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26,i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&36>=t),e=e.toString().replace(/\s+/g,"");var i=0;"-"===e[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.sign=!0),this.strip(),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initNumber=function(e,t,r){0>e&&(this.sign=!0,e=-e),67108864>e?(this.words=[67108863&e],this.length=1):4503599627370496>e?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(9007199254740992>e),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s=0;if("be"===r)for(var i=e.length-1,o=0;i>=0;i-=3){var u=e[i]|e[i-1]<<8|e[i-2]<<16;this.words[o]|=u<<s&67108863,this.words[o+1]=u>>>26-s&67108863,s+=24,s>=26&&(s-=26,o++)}else if("le"===r)for(var i=0,o=0;i<e.length;i+=3){var u=e[i]|e[i+1]<<8|e[i+2]<<16;this.words[o]|=u<<s&67108863,this.words[o+1]=u>>>26-s&67108863,s+=24,s>=26&&(s-=26,o++)}return this.strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;for(var r=0,n=e.length-6,i=0;n>=t;n-=6){var o=s(e,n,n+6);this.words[i]|=o<<r&67108863,this.words[i+1]|=o>>>26-r&4194303,r+=24,r>=26&&(r-=26,i++)}if(n+6!==t){var o=s(e,t,n+6);this.words[i]|=o<<r&67108863,this.words[i+1]|=o>>>26-r&4194303}this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;67108863>=i;i*=t)r++;r--,i=i/t|0;for(var s=e.length-n,u=s%r,a=Math.min(s,s-u)+n,f=0,l=n;a>l;l+=r)f=o(e,l,l+r,t),this.imuln(i),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(0!==u){for(var c=1,f=o(e,l,e.length,t),l=0;u>l;l++)c*=t;this.imuln(c),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.sign=this.sign,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){if(e=e||10,16===e||"hex"===e){for(var r="",i=0,t=0|t||1,s=0,o=0;o<this.length;o++){var u=this.words[o],a=(16777215&(u<<i|s)).toString(16);s=u>>>24-i&16777215,r=0!==s||o!==this.length-1?d[6-a.length]+a+r:a+r,i+=2,i>=26&&(i-=26,o--)}for(0!==s&&(r=s.toString(16)+r);r.length%t!==0;)r="0"+r;return this.sign&&(r="-"+r),r}if(e===(0|e)&&e>=2&&36>=e){var f=v[e],l=m[e],r="",c=this.clone();for(c.sign=!1;0!==c.cmpn(0);){var h=c.modn(l).toString(e);c=c.idivn(l),r=0!==c.cmpn(0)?d[f-h.length]+h+r:h+r}return 0===this.cmpn(0)&&(r="0"+r),this.sign&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toArray=function(e){this.strip();var t=new Array(this.byteLength());t[0]=0;var n=this.clone();if("le"!==e)for(var r=0;0!==n.cmpn(0);r++){var i=n.andln(255);n.ishrn(8),t[t.length-r-1]=i}else for(var r=0;0!==n.cmpn(0);r++){var i=n.andln(255);n.ishrn(8),t[r]=i}return t},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0===(8191&t)&&(n+=13,t>>>=13),0===(127&t)&&(n+=7,t>>>=7),0===(15&t)&&(n+=4,t>>>=4),0===(3&t)&&(n+=2,t>>>=2),0===(1&t)&&n++,n},i.prototype.bitLength=function(){var e=0,t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var e=this.clone();return e.sign=!this.sign,e},i.prototype.ior=function(e){for(this.sign=this.sign||e.sign;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.iand=function(e){this.sign=this.sign&&e.sign;var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.ixor=function(e){this.sign=this.sign||e.sign;var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);for(var r=e/26|0,i=e%26;this.length<=r;)this.words[this.length++]=0;return t?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this.strip()},i.prototype.iadd=function(e){if(this.sign&&!e.sign){this.sign=!1;var t=this.isub(e);return this.sign=!this.sign,this._normSign()}if(!this.sign&&e.sign){e.sign=!1;var t=this.isub(e);return e.sign=!0,t._normSign()}var n,r;this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,s=0;s<r.length;s++){var t=n.words[s]+r.words[s]+i;this.words[s]=67108863&t,i=t>>>26}for(;0!==i&&s<n.length;s++){var t=n.words[s]+i;this.words[s]=67108863&t,i=t>>>26}if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this},i.prototype.add=function(e){if(e.sign&&!this.sign){e.sign=!1;var t=this.sub(e);return e.sign=!0,t}if(!e.sign&&this.sign){this.sign=!1;var t=e.sub(this);return this.sign=!0,t}return this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(e.sign){e.sign=!1;var t=this.iadd(e);return e.sign=!0,t._normSign()}if(this.sign)return this.sign=!1,this.iadd(e),this.sign=!0,this._normSign();var n=this.cmp(e);if(0===n)return this.sign=!1,this.length=1,this.words[0]=0,this;var r,i;n>0?(r=this,i=e):(r=e,i=this);for(var s=0,o=0;o<i.length;o++){var t=r.words[o]-i.words[o]+s;s=t>>26,this.words[o]=67108863&t}for(;0!==s&&o<r.length;o++){var t=r.words[o]+s;s=t>>26,this.words[o]=67108863&t}if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.sign=!0),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)},i.prototype._smallMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var n=0,r=0;r<t.length-1;r++){for(var i=n>>>26,s=67108863&n,o=Math.min(r,e.length-1),u=Math.max(0,r-this.length+1);o>=u;u++){var a=r-u,f=0|this.words[a],l=0|e.words[u],c=f*l,h=67108863&c;i=i+(c/67108864|0)|0,h=h+s|0,s=67108863&h,i=i+(h>>>26)|0}t.words[r]=s,n=i}return 0!==n?t.words[r]=n:t.length--,t.strip()},i.prototype._bigMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var n=0,r=0,i=0;i<t.length-1;i++){var s=r;r=0;for(var o=67108863&n,u=Math.min(i,e.length-1),a=Math.max(0,i-this.length+1);u>=a;a++){var f=i-a,l=0|this.words[f],c=0|e.words[a],h=l*c,p=67108863&h;s=s+(h/67108864|0)|0,p=p+o|0,o=67108863&p,s=s+(p>>>26)|0,r+=s>>>26,s&=67108863}t.words[i]=o,n=s,s=r}return 0!==n?t.words[i]=n:t.length--,t.strip()},i.prototype.mulTo=function(e,t){var n;return n=this.length+e.length<63?this._smallMulTo(e,t):this._bigMulTo(e,t)},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.imul=function(e){if(0===this.cmpn(0)||0===e.cmpn(0))return this.words[0]=0,this.length=1,this;var t=this.length,n=e.length;this.sign=e.sign!==this.sign,this.length=this.length+e.length,this.words[this.length-1]=0;for(var r=this.length-2;r>=0;r--){for(var i=0,s=0,o=Math.min(r,n-1),u=Math.max(0,r-t+1);o>=u;u++){var a=r-u,f=this.words[a],l=e.words[u],c=f*l,h=67108863&c;i+=c/67108864|0,h+=s,s=67108863&h,i+=h>>>26}this.words[r]=s,this.words[r+1]+=i,i=0}for(var i=0,a=1;a<this.length;a++){var p=this.words[a]+i;this.words[a]=67108863&p,i=p>>>26}return this.strip()},i.prototype.imuln=function(e){n("number"==typeof e);for(var t=0,r=0;r<this.length;r++){var i=this.words[r]*e,s=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=s>>>26,this.words[r]=67108863&s}return 0!==t&&(this.words[r]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.mul(this)},i.prototype.ishln=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=67108863>>>26-t<<26-t;if(0!==t){for(var s=0,o=0;o<this.length;o++){var u=this.words[o]&i,a=this.words[o]-u<<t;this.words[o]=a|s,s=u>>>26-t}s&&(this.words[o]=s,this.length++)}if(0!==r){for(var o=this.length-1;o>=0;o--)this.words[o+r]=this.words[o];for(var o=0;r>o;o++)this.words[o]=0;this.length+=r}return this.strip()},i.prototype.ishrn=function(e,t,r){n("number"==typeof e&&e>=0);var i;i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),u=67108863^67108863>>>s<<s,a=r;if(i-=o,i=Math.max(0,i),a){for(var f=0;o>f;f++)a.words[f]=this.words[f];a.length=o}if(0!==o)if(this.length>o){this.length-=o;for(var f=0;f<this.length;f++)this.words[f]=this.words[f+o]}else this.words[0]=0,this.length=1;for(var l=0,f=this.length-1;f>=0&&(0!==l||f>=i);f--){var c=this.words[f];this.words[f]=l<<26-s|c>>>s,l=c&u}return a&&0!==l&&(a.words[a.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),this},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(!this.sign,"imaskn works only with positive numbers"),0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),0>e?this.isubn(-e):this.sign?1===this.length&&this.words[0]<e?(this.words[0]=e-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(e),this.sign=!0,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),0>e)return this.iaddn(-e);if(this.sign)return this.sign=!1,this.iaddn(e),this.sign=!0,this;this.words[0]-=e;for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.sign=!1,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,s=e.length+r;if(this.words.length<s){for(var o=new Array(s),i=0;i<this.length;i++)o[i]=this.words[i];this.words=o}else i=this.length;for(this.length=Math.max(this.length,s);i<this.length;i++)this.words[i]=0;for(var u=0,i=0;i<e.length;i++){var a=this.words[i+r]+u,f=e.words[i]*t;a-=67108863&f,u=(a>>26)-(f/67108864|0),this.words[i+r]=67108863&a}for(;i<this.length-r;i++){var a=this.words[i+r]+u;u=a>>26,this.words[i+r]=67108863&a}if(0===u)return this.strip();n(-1===u),u=0;for(var i=0;i<this.length;i++){var a=-this.words[i]+u;u=a>>26,this.words[i]=67108863&a}return this.sign=!0,this.strip()},i.prototype._wordDiv=function(e,t){var n=this.length-e.length,r=this.clone(),s=e,o=s.words[s.length-1],u=this._countBits(o);n=26-u,0!==n&&(s=s.shln(n),r.ishln(n),o=s.words[s.length-1]);var a,f=r.length-s.length;if("mod"!==t){a=new i(null),a.length=f+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var c=r.clone()._ishlnsubmul(s,1,f);c.sign||(r=c,a&&(a.words[f]=1));for(var h=f-1;h>=0;h--){var p=67108864*r.words[s.length+h]+r.words[s.length+h-1];for(p=Math.min(p/o|0,67108863),r._ishlnsubmul(s,p,h);r.sign;)p--,r.sign=!1,r._ishlnsubmul(s,1,h),0!==r.cmpn(0)&&(r.sign=!r.sign);a&&(a.words[h]=p)}return a&&a.strip(),r.strip(),"div"!==t&&0!==n&&r.ishrn(n),{div:a?a:null,mod:r}},i.prototype.divmod=function(e,t){if(n(0!==e.cmpn(0)),this.sign&&!e.sign){var r,s,o=this.neg().divmod(e,t);return"mod"!==t&&(r=o.div.neg()),"div"!==t&&(s=0===o.mod.cmpn(0)?o.mod:e.sub(o.mod)),{div:r,mod:s}}if(!this.sign&&e.sign){var r,o=this.divmod(e.neg(),t);return"mod"!==t&&(r=o.div.neg()),{div:r,mod:o.mod}}return this.sign&&e.sign?this.neg().divmod(e.neg(),t):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t)},i.prototype.div=function(e){return this.divmod(e,"div").div},i.prototype.mod=function(e){return this.divmod(e,"mod").mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(0===t.mod.cmpn(0))return t.div;var n=t.div.sign?t.mod.isub(e):t.mod,r=e.shrn(1),i=e.andln(1),s=n.cmp(r);return 0>s||1===i&&0===s?t.div:t.div.sign?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){n(67108863>=e);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+this.words[i])%e;return r},i.prototype.idivn=function(e){n(67108863>=e);for(var t=0,r=this.length-1;r>=0;r--){var i=this.words[r]+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(!e.sign),n(0!==e.cmpn(0));var t=this,r=e.clone();t=t.sign?t.mod(e):t.clone();for(var s=new i(1),o=new i(0),u=new i(0),a=new i(1),f=0;t.isEven()&&r.isEven();)t.ishrn(1),r.ishrn(1),++f;for(var l=r.clone(),c=t.clone();0!==t.cmpn(0);){for(;t.isEven();)t.ishrn(1),s.isEven()&&o.isEven()?(s.ishrn(1),o.ishrn(1)):(s.iadd(l).ishrn(1),o.isub(c).ishrn(1));for(;r.isEven();)r.ishrn(1),u.isEven()&&a.isEven()?(u.ishrn(1),a.ishrn(1)):(u.iadd(l).ishrn(1),a.isub(c).ishrn(1));t.cmp(r)>=0?(t.isub(r),s.isub(u),o.isub(a)):(r.isub(t),u.isub(s),a.isub(o))}return{a:u,b:a,gcd:r.ishln(f)}},i.prototype._invmp=function(e){n(!e.sign),n(0!==e.cmpn(0));var t=this,r=e.clone();t=t.sign?t.mod(e):t.clone();for(var s=new i(1),o=new i(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(;t.isEven();)t.ishrn(1),s.isEven()?s.ishrn(1):s.iadd(u).ishrn(1);for(;r.isEven();)r.ishrn(1),o.isEven()?o.ishrn(1):o.iadd(u).ishrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(o)):(r.isub(t),o.isub(s))}return 0===t.cmpn(1)?s:o},i.prototype.gcd=function(e){if(0===this.cmpn(0))return e.clone();if(0===e.cmpn(0))return this.clone();var t=this.clone(),n=e.clone();t.sign=!1,n.sign=!1;for(var r=0;t.isEven()&&n.isEven();r++)t.ishrn(1),n.ishrn(1);for(;;){for(;t.isEven();)t.ishrn(1);for(;n.isEven();)n.ishrn(1);var i=t.cmp(n);if(0>i){var s=t;t=n,n=s}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.ishln(r)},i.prototype.invm=function(e){return this.egcd(e).a.mod(e)},i.prototype.isEven=function(){return 0===(1&this.words[0])},i.prototype.isOdd=function(){return 1===(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r){for(var s=this.length;r+1>s;s++)this.words[s]=0;return this.words[r]|=i,this.length=r+1,this}for(var o=i,s=r;0!==o&&s<this.length;s++){var u=this.words[s];u+=o,o=u>>>26,u&=67108863,this.words[s]=u}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.cmpn=function(e){var t=0>e;if(t&&(e=-e),this.sign&&!t)return-1;if(!this.sign&&t)return 1;e&=67108863,this.strip();var n;if(this.length>1)n=1;else{var r=this.words[0];n=r===e?0:e>r?-1:1}return this.sign&&(n=-n),n},i.prototype.cmp=function(e){if(this.sign&&!e.sign)return-1;if(!this.sign&&e.sign)return 1;var t=this.ucmp(e);return this.sign?-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=this.words[n],i=e.words[n];if(r!==i){i>r?t=-1:r>i&&(t=1);break}}return t},i.red=function(e){return new h(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(!this.sign,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},u.prototype.ireduce=function(e){var t,n=e;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),t=n.bitLength();while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},u.prototype.split=function(e,t){e.ishrn(this.n,0,t)},u.prototype.imulK=function(e){return e.imul(this.k)},r(a,u),a.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;r>i;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void (e.length=1);var s=e.words[9];t.words[t.length++]=s&n;for(var i=10;i<e.length;i++){var o=e.words[i];e.words[i-10]=(o&n)<<4|s>>>22,s=o}e.words[i-10]=s>>>22,e.length-=9},a.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t,n=0,r=0;r<e.length;r++){var i=e.words[r];t=64*i,n+=977*i,t+=n/67108864|0,n&=67108863,e.words[r]=n,n=t}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(f,u),r(l,u),r(c,u),c.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*e.words[n]+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function y(e){if(g[e])return g[e];var y;if("k256"===e)y=new a;else if("p224"===e)y=new f;else if("p192"===e)y=new l;else{if("p25519"!==e)throw new Error("Unknown prime "+e);y=new c}return g[e]=y,y},h.prototype._verify1=function(e){n(!e.sign,"red works only with positives"),n(e.red,"red works only with red numbers")},h.prototype._verify2=function(e,t){n(!e.sign&&!t.sign,"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},h.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.mod(this.m)._forceRed(this)},h.prototype.neg=function(e){var t=e.clone();return t.sign=!t.sign,t.iadd(this.m)._forceRed(this)},h.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},h.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},h.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},h.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},h.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.shln(t))},h.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},h.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},h.prototype.isqr=function(e){return this.imul(e,e)},h.prototype.sqr=function(e){return this.mul(e,e)},h.prototype.sqrt=function(e){if(0===e.cmpn(0))return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new i(1)).ishrn(2),s=this.pow(e,r);return s}for(var o=this.m.subn(1),u=0;0!==o.cmpn(0)&&0===o.andln(1);)u++,o.ishrn(1);n(0!==o.cmpn(0));var a=(new i(1)).toRed(this),f=a.redNeg(),l=this.m.subn(1).ishrn(1),c=this.m.bitLength();for(c=(new i(2*c*c)).toRed(this);0!==this.pow(c,l).cmp(f);)c.redIAdd(f);for(var h=this.pow(c,o),s=this.pow(e,o.addn(1).ishrn(1)),p=this.pow(e,o),d=u;0!==p.cmp(a);){for(var v=p,m=0;0!==v.cmp(a);m++)v=v.redSqr();n(d>m);var g=this.pow(h,(new i(1)).ishln(d-m-1));s=s.redMul(g),h=g.redSqr(),p=p.redMul(h),d=m}return s},h.prototype.invm=function(e){var t=e._invmp(this.m);return t.sign?(t.sign=!1,this.imod(t).redNeg()):this.imod(t)},h.prototype.pow=function(e,t){var n=[];if(0===t.cmpn(0))return new i(1);for(var r=t.clone();0!==r.cmpn(0);)n.push(r.andln(1)),r.ishrn(1);for(var s=e,o=0;o<n.length&&0===n[o];o++,s=this.sqr(s));if(++o<n.length)for(var r=this.sqr(s);o<n.length;o++,r=this.sqr(r))0!==n[o]&&(s=this.mul(s,r));return s},h.prototype.convertTo=function(e){var t=e.mod(this.m);return t===e?t.clone():t},h.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new p(e)},r(p,h),p.prototype.convertTo=function(e){return this.imod(e.shln(this.shift))},p.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},p.prototype.imul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).ishrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},p.prototype.mul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return(new i(0))._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=n.isub(r).ishrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},p.prototype.invm=function(e){var t=this.imod(e._invmp(this.m).mul(this.r2));return t._forceRed(this)}}("undefined"==typeof t||t,this)},{}],244:[function(e,t,n){"use strict";function r(e){return i(e[0])*i(e[1])}var i=e("./lib/bn-sign");t.exports=r},{"./lib/bn-sign":235}],245:[function(e,t,n){"use strict";function r(e,t){return i(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}var i=e("./lib/rationalize");t.exports=r},{"./lib/rationalize":240}],246:[function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1];if(0===t.cmpn(0))return 0;var r=t.divmod(n),o=r.div,u=i(o),f=r.mod;if(0===f.cmpn(0))return u;if(u){var l=s(u)+4,c=i(f.shln(l).divRound(n));return 0>u&&(c=-c),u+c*Math.pow(2,-l)}var h=n.bitLength()-f.bitLength()+53,c=i(f.shln(h).divRound(n));return 1023>h?c*Math.pow(2,-h):(c*=Math.pow(2,-1023),c*Math.pow(2,1023-h))}var i=e("./lib/bn-to-num"),s=e("./lib/ctz");t.exports=r},{"./lib/bn-to-num":236,"./lib/ctz":237}],247:[function(e,t,n){"use strict";function r(e,t){for(var n=0;e>n;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function i(e,t,n,i){for(var s=0,o=0,u=0,a=e.length;a>u;++u){var f=e[u];if(!r(t,f)){for(var l=0;2*t>l;++l)n[s++]=f[l];i[o++]=u}}return o}function s(e,t,n,r){var s=e.length,o=t.length;if(!(0>=s||0>=o)){var u=e[0].length>>>1;if(!(0>=u)){var a,f=c.mallocDouble(2*u*s),l=c.mallocInt32(s);if(s=i(e,u,f,l),s>0){if(1===u&&r)h.init(s),a=h.sweepComplete(u,n,0,s,f,l,0,s,f,l);else{var v=c.mallocDouble(2*u*o),m=c.mallocInt32(o);o=i(t,u,v,m),o>0&&(h.init(s+o),a=1===u?h.sweepBipartite(u,n,0,s,f,l,0,o,v,m):p(u,n,r,s,f,l,o,v,m),c.free(v),c.free(m))}c.free(f),c.free(l)}return a}}}function o(e,t){l.push([e,t])}function u(e){return l=[],s(e,e,o,!0),l}function a(e,t){return l=[],s(e,t,o,!1),l}function f(e,t,n){switch(arguments.length){case 1:return u(e);case 2:return"function"==typeof t?s(e,e,t,!0):a(e,t);case 3:return s(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}}t.exports=f;var l,c=e("typedarray-pool"),h=e("./lib/sweep"),p=e("./lib/intersect")},{"./lib/intersect":249,"./lib/sweep":253,"typedarray-pool":217}],248:[function(e,t,n){"use strict";function r(e,t,n){var r="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(n?"Full":""),i=["function ",r,"(",S.join(),"){","var ",f,"=2*",s,";"],a="for(var i="+l+","+d+"="+f+"*"+l+";i<"+c+";++i,"+d+"+="+f+"){var x0="+h+"["+o+"+"+d+"],x1="+h+"["+o+"+"+d+"+"+s+"],xi="+p+"[i];",T="for(var j="+v+","+b+"="+f+"*"+v+";j<"+m+";++j,"+b+"+="+f+"){var y0="+g+"["+o+"+"+b+"],"+(n?"y1="+g+"["+o+"+"+b+"+"+s+"],":"")+"yi="+y+"[j];";return e?i.push(a,E,":",T):i.push(T,E,":",a),n?i.push("if(y1<x0||x1<y0)continue;"):t?i.push("if(y0<=x0||x1<y0)continue;"):i.push("if(y0<x0||x1<y0)continue;"),i.push("for(var k="+o+"+1;k<"+s+";++k){var r0="+h+"[k+"+d+"],r1="+h+"[k+"+s+"+"+d+"],b0="+g+"[k+"+b+"],b1="+g+"[k+"+s+"+"+b+"];if(r1<b0||b1<r0)continue "+E+";}var "+w+"="+u+"("),t?i.push("yi,xi"):i.push("xi,yi"),i.push(");if("+w+"!==void 0)return "+w+";}}}"),{name:r,code:i.join("")}}function i(e){function t(t,n){var s=r(t,n,e);i.push(s.code),o.push("return "+s.name+"("+S.join()+");")}var n="bruteForce"+(e?"Full":"Partial"),i=[],s=S.slice();e||s.splice(3,0,a);var o=["function "+n+"("+s.join()+"){"];o.push("if("+c+"-"+l+">"+m+"-"+v+"){"),e?(t(!0,!1),o.push("}else{"),t(!1,!1)):(o.push("if("+a+"){"),t(!0,!0),o.push("}else{"),t(!0,!1),o.push("}}else{if("+a+"){"),t(!1,!0),o.push("}else{"),t(!1,!1),o.push("}")),o.push("}}return "+n);var u=i.join("")+o.join(""),f=new Function(u);return f()}var s="d",o="ax",u="vv",a="fp",f="es",l="rs",c="re",h="rb",p="ri",d="rp",v="bs",m="be",g="bb",y="bi",b="bp",w="rv",E="Q",S=[s,o,u,l,c,h,p,v,m,g,y];n.partial=i(!1),n.full=i(!0)},{}],249:[function(e,t,n){"use strict";function r(e,t){var n=8*f.log2(t+1)*(e+1)|0,r=f.nextPow2(N*n);L.length<r&&(a.free(L),L=a.mallocInt32(r));var i=f.nextPow2(C*n);i>A&&(a.free(A),A=a.mallocDouble(i))}function i(e,t,n,r,i,s,o,u,a){var f=N*e;L[f]=t,L[f+1]=n,L[f+2]=r,L[f+3]=i,L[f+4]=s,L[f+5]=o;var l=C*e;A[l]=u,A[l+1]=a}function s(e,t,n,r,i,s,o,u,a,f,l){var c=2*e,h=a*c,p=f[h+t];e:for(var d=i,v=i*c;s>d;++d,v+=c){var m=o[v+t],g=o[v+t+e];if(!(m>p||p>g||r&&p===m)){for(var y=u[d],b=t+1;e>b;++b){var m=o[v+b],g=o[v+b+e],w=f[h+b],E=f[h+b+e];if(w>g||m>E)continue e}var S;if(S=r?n(l,y):n(y,l),void 0!==S)return S}}}function o(e,t,n,r,i,s,o,u,a,f){var l=2*e,c=u*l,h=a[c+t];e:for(var p=r,d=r*l;i>p;++p,d+=l){var v=o[p];if(v!==f){var m=s[d+t],g=s[d+t+e];if(!(m>h||h>g)){for(var y=t+1;e>y;++y){var m=s[d+y],g=s[d+y+e],b=a[c+y],w=a[c+y+e];if(b>g||m>w)continue e}var E=n(v,f);if(void 0!==E)return E}}}}function u(e,t,n,u,a,f,l,v,k){r(e,u+l);var O,D=0,P=2*e;for(i(D++,0,0,u,0,l,n?16:0,-1/0,1/0),n||i(D++,0,0,l,0,u,1,-1/0,1/0);D>0;){D-=1;var H=D*N,B=L[H],j=L[H+1],F=L[H+2],I=L[H+3],q=L[H+4],R=L[H+5],U=D*C,z=A[U],W=A[U+1],X=1&R,V=!!(16&R),$=a,J=f,K=v,Q=k;if(X&&($=v,J=k,K=a,Q=f),!(2&R&&(F=E(e,B,j,F,$,J,W),j>=F)||4&R&&(j=S(e,B,j,F,$,J,z),j>=F))){var G=F-j,Y=q-I;if(V){if(y>e*G*(G+Y)){if(O=p.scanComplete(e,B,t,j,F,$,J,I,q,K,Q),void 0!==O)return O;continue}}else{if(e*Math.min(G,Y)<m){if(O=c(e,B,t,X,j,F,$,J,I,q,K,Q),void 0!==O)return O;continue}if(g>e*G*Y){if(O=p.scanBipartite(e,B,t,X,j,F,$,J,I,q,K,Q),void 0!==O)return O;continue}}var Z=b(e,B,j,F,$,J,z,W);if(Z>j)if(m>e*(Z-j)){if(O=h(e,B+1,t,j,Z,$,J,I,q,K,Q),void 0!==O)return O}else if(B===e-2){if(O=X?p.sweepBipartite(e,t,I,q,K,Q,j,Z,$,J):p.sweepBipartite(e,t,j,Z,$,J,I,q,K,Q),void 0!==O)return O}else i(D++,B+1,j,Z,I,q,X,-1/0,1/0),i(D++,B+1,I,q,j,Z,1^X,-1/0,1/0);if(F>Z){var et=d(e,B,I,q,K,Q),tt=K[P*et+B],nt=w(e,B,et,q,K,Q,tt);if(q>nt&&i(D++,B,Z,F,nt,q,(4|X)+(V?16:0),tt,W),et>I&&i(D++,B,Z,F,I,et,(2|X)+(V?16:0),z,tt),et+1===nt){if(O=V?o(e,B,t,Z,F,$,J,et,K,Q[et]):s(e,B,t,X,Z,F,$,J,et,K,Q[et]),void 0!==O)return O}else if(nt>et){var rt;if(V){if(rt=x(e,B,Z,F,$,J,tt),rt>Z){var it=w(e,B,Z,rt,$,J,tt);if(B===e-2){if(it>Z&&(O=p.sweepComplete(e,t,Z,it,$,J,et,nt,K,Q),void 0!==O))return O;if(rt>it&&(O=p.sweepBipartite(e,t,it,rt,$,J,et,nt,K,Q),void 0!==O))return O}else it>Z&&i(D++,B+1,Z,it,et,nt,16,-1/0,1/0),rt>it&&(i(D++,B+1,it,rt,et,nt,0,-1/0,1/0),i(D++,B+1,et,nt,it,rt,1,-1/0,1/0))}}else rt=X?T(e,B,Z,F,$,J,tt):x(e,B,Z,F,$,J,tt),rt>Z&&(B===e-2?O=X?p.sweepBipartite(e,t,et,nt,K,Q,Z,rt,$,J):p.sweepBipartite(e,t,Z,rt,$,J,et,nt,K,Q):(i(D++,B+1,Z,rt,et,nt,X,-1/0,1/0),i(D++,B+1,et,nt,Z,rt,1^X,-1/0,1/0)))}}}}}t.exports=u;var a=e("typedarray-pool"),f=e("bit-twiddle"),l=e("./brute"),c=l.partial,h=l.full,p=e("./sweep"),d=e("./median"),v=e("./partition"),m=128,g=1<<22,y=1<<22,b=v("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),w=v("lo===p0",["p0"]),E=v("lo<p0",["p0"]),S=v("hi<=p0",["p0"]),x=v("lo<=p0&&p0<=hi",["p0"]),T=v("lo<p0&&p0<=hi",["p0"]),N=6,C=2,k=1024,L=a.mallocInt32(k),A=a.mallocDouble(k)},{"./brute":248,"./median":250,"./partition":251,"./sweep":253,"bit-twiddle":33,"typedarray-pool":217}],250:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){for(var o=2*e,u=o*(n+1)+t,a=n+1;r>a;++a,u+=o)for(var f=i[u],l=a,c=o*(a-1);l>n&&i[c+t]>f;--l,c-=o){for(var h=c,p=c+o,d=0;o>d;++d,++h,++p){var v=i[h];i[h]=i[p],i[p]=v}var m=s[l];s[l]=s[l-1],s[l-1]=m}}function i(e,t,n,i,s,a){if(n+1>=i)return n;for(var f=n,l=i,c=i+n>>>1,h=2*e,p=c,d=s[h*c+t];l>f;){if(u>l-f){r(e,t,f,l,s,a),d=s[h*c+t];break}var v=l-f,m=Math.random()*v+f|0,g=s[h*m+t],y=Math.random()*v+f|0,b=s[h*y+t],w=Math.random()*v+f|0,E=s[h*w+t];b>=g?E>=b?(p=y,d=b):g>=E?(p=m,d=g):(p=w,d=E):b>=E?(p=y,d=b):E>=g?(p=m,d=g):(p=w,d=E);for(var S=h*(l-1),x=h*p,T=0;h>T;++T,++S,++x){var N=s[S];s[S]=s[x],s[x]=N}var C=a[l-1];a[l-1]=a[p],a[p]=C,p=o(e,t,f,l-1,s,a,d);for(var S=h*(l-1),x=h*p,T=0;h>T;++T,++S,++x){var N=s[S];s[S]=s[x],s[x]=N}var C=a[l-1];if(a[l-1]=a[p],a[p]=C,p>c){for(l=p-1;l>f&&s[h*(l-1)+t]===d;)l-=1;l+=1}else{if(!(c>p))break;for(f=p+1;l>f&&s[h*f+t]===d;)f+=1}}return o(e,t,n,c,s,a,s[h*c+t])}t.exports=i;var s=e("./partition"),o=s("lo<p0",["p0"]),u=8},{"./partition":251}],251:[function(e,t,n){"use strict";function r(e,t){var n="abcdef".split("").concat(t),r=[];return e.indexOf("lo")>=0&&r.push("lo=e[k+n]"),e.indexOf("hi")>=0&&r.push("hi=e[k+o]"),n.push(i.replace("_",r.join()).replace("$",e)),Function.apply(void 0,n)}t.exports=r;var i="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],252:[function(e,t,n){"use strict";function r(e,t){4*h>=t?i(0,t-1,e):c(0,t-1,e)}function i(e,t,n){for(var r=2*(e+1),i=e+1;t>=i;++i){for(var s=n[r++],o=n[r++],u=i,a=r-2;u-->e;){var f=n[a-2],l=n[a-1];if(s>f)break;if(f===s&&o>l)break;n[a]=f,n[a+1]=l,a-=2}n[a]=s,n[a+1]=o}}function s(e,t,n){e*=2,t*=2;var r=n[e],i=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function o(e,t,n){e*=2,t*=2,n[e]=n[t],n[e+1]=n[t+1]}function u(e,t,n,r){e*=2,t*=2,n*=2;var i=r[e],s=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=s}function a(e,t,n,r,i){e*=2,t*=2,i[e]=i[t],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function f(e,t,n){e*=2,t*=2;var r=n[e],i=n[t];return i>r?!1:r===i?n[e+1]>n[t+1]:!0}function l(e,t,n,r){e*=2;var i=r[e];return t>i?!0:i===t?r[e+1]<n:!1}function c(e,t,n){var r=(t-e+1)/6|0,p=e+r,d=t-r,v=e+t>>1,m=v-r,g=v+r,y=p,b=m,w=v,E=g,S=d,x=e+1,T=t-1,N=0;f(y,b,n)&&(N=y,y=b,b=N),f(E,S,n)&&(N=E,E=S,S=N),f(y,w,n)&&(N=y,y=w,w=N),f(b,w,n)&&(N=b,b=w,w=N),f(y,E,n)&&(N=y,y=E,E=N),f(w,E,n)&&(N=w,w=E,E=N),f(b,S,n)&&(N=b,b=S,S=N),f(b,w,n)&&(N=b,b=w,w=N),f(E,S,n)&&(N=E,E=S,S=N);for(var C=n[2*b],k=n[2*b+1],L=n[2*E],A=n[2*E+1],O=2*y,M=2*w,_=2*S,D=2*p,P=2*v,H=2*d,B=0;2>B;++B){var j=n[O+B],F=n[M+B],I=n[_+B];n[D+B]=j,n[P+B]=F,n[H+B]=I}o(m,e,n),o(g,t,n);for(var q=x;T>=q;++q)if(l(q,C,k,n))q!==x&&s(q,x,n),++x;else if(!l(q,L,A,n))for(;;){if(l(T,L,A,n)){l(T,C,k,n)?(u(q,x,T,n),++x,--T):(s(q,T,n),--T);break}if(--T<q)break}a(e,x-1,C,k,n),a(t,T+1,L,A,n),h>=x-2-e?i(e,x-2,n):c(e,x-2,n),h>=t-(T+2)?i(T+2,t,n):c(T+2,t,n),h>=T-x?i(x,T,n):c(x,T,n)}t.exports=r;var h=32},{}],253:[function(e,t,n){"use strict";function r(e){var t=c.nextPow2(e);v.length<t&&(l.free(v),v=l.mallocInt32(t)),m.length<t&&(l.free(m),m=l.mallocInt32(t)),g.length<t&&(l.free(g),g=l.mallocInt32(t)),y.length<t&&(l.free(y),y=l.mallocInt32(t)),b.length<t&&(l.free(b),b=l.mallocInt32(t)),w.length<t&&(l.free(w),w=l.mallocInt32(t));var n=8*t;E.length<n&&(l.free(E),E=l.mallocDouble(n))}function i(e,t,n,r){var i=t[r],s=e[n-1];e[i]=s,t[s]=i}function s(e,t,n,r){e[n]=r,t[r]=n}function o(e,t,n,r,o,u,a,f,l,c){for(var d=0,b=2*e,w=e-1,S=b-1,x=n;r>x;++x){var T=u[x],N=b*x;E[d++]=o[N+w],E[d++]=-(T+1),E[d++]=o[N+S],E[d++]=T}for(var x=a;f>x;++x){var T=c[x]+p,C=b*x;E[d++]=l[C+w],E[d++]=-T,E[d++]=l[C+S],E[d++]=T}var k=d>>>1;h(E,k);for(var L=0,A=0,x=0;k>x;++x){var O=0|E[2*x+1];if(O>=p)O=O-p|0,i(g,y,A--,O);else if(O>=0)i(v,m,L--,O);else if(-p>=O){O=-O-p|0;for(var M=0;L>M;++M){var D=t(v[M],O);if(void 0!==D)return D}s(g,y,A++,O)}else{O=-O-1|0;for(var M=0;A>M;++M){var D=t(O,g[M]);if(void 0!==D)return D}s(v,m,L++,O)}}}function u(e,t,n,r,o,u,a,f,l,c){for(var p=0,d=2*e,S=e-1,T=d-1,N=n;r>N;++N){var C=u[N]+1<<1,k=d*N;E[p++]=o[k+S],E[p++]=-C,E[p++]=o[k+T],E[p++]=C}for(var N=a;f>N;++N){var C=c[N]+1<<1,L=d*N;E[p++]=l[L+S],E[p++]=1|-C,E[p++]=l[L+T],E[p++]=1|C}var A=p>>>1;h(E,A);for(var O=0,M=0,D=0,N=0;A>N;++N){var P=0|E[2*N+1],H=1&P;if(A-1>N&&P>>1===E[2*N+3]>>1&&(H=2,N+=1),0>P){for(var B=-(P>>1)-1,j=0;D>j;++j){var F=t(b[j],B);if(void 0!==F)return F}if(0!==H)for(var j=0;O>j;++j){var F=t(v[j],B);if(void 0!==F)return F}if(1!==H)for(var j=0;M>j;++j){var F=t(g[j],B);if(void 0!==F)return F}0===H?s(v,m,O++,B):1===H?s(g,y,M++,B):2===H&&s(b,w,D++,B)}else{var B=(P>>1)-1;0===H?i(v,m,O--,B):1===H?i(g,y,M--,B):2===H&&i(b,w,D--,B)}}}function a(e,t,n,r,o,u,a,f,l,c,d,g){var y=0,b=2*e,w=t,S=t+e,x=1,T=1;r?T=p:x=p;for(var N=o;u>N;++N){var C=N+x,k=b*N;E[y++]=a[k+w],E[y++]=-C,E[y++]=a[k+S],E[y++]=C}for(var N=l;c>N;++N){var C=N+T,L=b*N;E[y++]=d[L+w],E[y++]=-C}var A=y>>>1;h(E,A);for(var O=0,N=0;A>N;++N){var M=0|E[2*N+1];if(0>M){var C=-M,D=!1;if(C>=p?(D=!r,C-=p):(D=!!r,C-=1),D)s(v,m,O++,C);else{var P=g[C],H=b*C,B=d[H+t+1],j=d[H+t+1+e];e:for(var F=0;O>F;++F){var I=v[F],q=b*I;if(!(j<a[q+t+1]||a[q+t+1+e]<B)){for(var R=t+2;e>R;++R)if(d[H+R+e]<a[q+R]||a[q+R+e]<d[H+R])continue e;var U,z=f[I];if(U=r?n(P,z):n(z,P),void 0!==U)return U}}}}else i(v,m,O--,M-x)}}function f(e,t,n,r,i,s,o,u,a,f,l){for(var c=0,d=2*e,m=t,g=t+e,y=r;i>y;++y){var b=y+p,w=d*y;E[c++]=s[w+m],E[c++]=-b,E[c++]=s[w+g],E[c++]=b}for(var y=u;a>y;++y){var b=y+1,S=d*y;E[c++]=f[S+m],E[c++]=-b}var x=c>>>1;h(E,x);for(var T=0,y=0;x>y;++y){var N=0|E[2*y+1];if(0>N){var b=-N;if(b>=p)v[T++]=b-p;else{b-=1;var C=l[b],k=d*b,L=f[k+t+1],A=f[k+t+1+e];e:for(var O=0;T>O;++O){var M=v[O],D=o[M];if(D===C)break;var P=d*M;if(!(A<s[P+t+1]||s[P+t+1+e]<L)){for(var H=t+2;e>H;++H)if(f[k+H+e]<s[P+H]||s[P+H+e]<f[k+H])continue e;var B=n(D,C);if(void 0!==B)return B}}}}else{for(var b=N-p,O=T-1;O>=0;--O)if(v[O]===b){for(var H=O+1;T>H;++H)v[H-1]=v[H];break}--T}}}t.exports={init:r,sweepBipartite:o,sweepComplete:u,scanBipartite:a,scanComplete:f};var l=e("typedarray-pool"),c=e("bit-twiddle"),h=e("./sort"),p=1<<28,d=1024,v=l.mallocInt32(d),m=l.mallocInt32(d),g=l.mallocInt32(d),y=l.mallocInt32(d),b=l.mallocInt32(d),w=l.mallocInt32(d),E=l.mallocDouble(8*d)},{"./sort":252,"bit-twiddle":33,"typedarray-pool":217}],254:[function(e,t,n){(function(e){function n(e,t){return p[0]=e,p[1]=t,h[0]}function r(e){return h[0]=e,p[0]}function i(e){return h[0]=e,p[1]}function s(e,t){return p[1]=e,p[0]=t,h[0]}function o(e){return h[0]=e,p[1]}function u(e){return h[0]=e,p[0]}function a(e,t){return d.writeUInt32LE(e,0,!0),d.writeUInt32LE(t,4,!0),d.readDoubleLE(0,!0)}function f(e){return d.writeDoubleLE(e,0,!0),d.readUInt32LE(0,!0)}function l(e){return d.writeDoubleLE(e,0,!0),d.readUInt32LE(4,!0)}var c=!1;if("undefined"!=typeof Float64Array){var h=new Float64Array(1),p=new Uint32Array(h.buffer);h[0]=1,c=!0,1072693248===p[1]?(t.exports=function(e){return h[0]=e,[p[0],p[1]]},t.exports.pack=n,t.exports.lo=r,t.exports.hi=i):1072693248===p[0]?(t.exports=function(e){return h[0]=e,[p[1],p[0]]},t.exports.pack=s,t.exports.lo=o,t.exports.hi=u):c=!1}if(!c){var d=new e(8);t.exports=function(e){return d.writeDoubleLE(e,0,!0),[d.readUInt32LE(0,!0),d.readUInt32LE(4,!0)]},t.exports.pack=a,t.exports.lo=f,t.exports.hi=l}t.exports.sign=function(e){return t.exports.hi(e)>>>31},t.exports.exponent=function(e){var n=t.exports.hi(e);return(n<<1>>>21)-1023},t.exports.fraction=function(e){var n=t.exports.lo(e),r=t.exports.hi(e),i=1048575&r;return 2146435072&r&&(i+=1<<20),[n,i]},t.exports.denormalized=function(e){var n=t.exports.hi(e);return!(2146435072&n)}}).call(this,e("buffer").Buffer)},{buffer:34}],255:[function(e,t,n){"use strict";function r(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(0===e)return 0>t?-s:s;var n=i.hi(e),r=i.lo(e);return t>e==e>0?r===o?(n+=1,r=0):r+=1:0===r?(r=o,n-=1):r-=1,i.pack(r,n)}var i=e("double-bits"),s=Math.pow(2,-1074),o=-1>>>0;t.exports=r},{"double-bits":254}],256:[function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=new Array(n),s=0;n>s;++s)r[s]=i(e[s],t[s]);return r}var i=e("big-rat/add");t.exports=r},{"big-rat/add":230}],257:[function(e,t,n){"use strict";function r(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=i(e[n]);return t}t.exports=r;var i=e("big-rat")},{"big-rat":233}],258:[function(e,t,n){"use strict";function r(e,t){for(var n=i(t),r=e.length,o=new Array(r),u=0;r>u;++u)o[u]=s(e[u],n);return o}var i=e("big-rat"),s=e("big-rat/mul");t.exports=r},{"big-rat":233,"big-rat/mul":242}],259:[function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=new Array(n),s=0;n>s;++s)r[s]=i(e[s],t[s]);return r}var i=e("big-rat/sub");t.exports=r},{"big-rat/sub":245}],260:[function(e,t,n){"use strict";function r(e,t,n,r){for(var i=0;2>i;++i){var s=e[i],o=t[i],u=Math.min(s,o),a=Math.max(s,o),f=n[i],l=r[i],c=Math.min(f,l),h=Math.max(f,l);if(u>h||c>a)return!1}return!0}function i(e,t,n,i){var o=s(e,n,i),u=s(t,n,i);if(o>0&&u>0||0>o&&0>u)return!1;var f=s(n,e,t),l=s(i,e,t);return f>0&&l>0||0>f&&0>l?!1:0===o&&0===u&&0===f&&0===l?r(e,t,n,i):!0}t.exports=i;var s=e("robust-orientation")[3]},{"robust-orientation":195}],261:[function(e,t,n){arguments[4][170][0].apply(n,arguments)},{dup:170}],262:[function(e,t,n){"use strict";function r(e,t){for(var n=i(e,t.length),r=new Array(t.length),s=new Array(t.length),o=[],u=0;u<t.length;++u){var a=n[u].length;s[u]=a,r[u]=!0,1>=a&&o.push(u)}for(;o.length>0;){var f=o.pop();r[f]=!1;for(var l=n[f],u=0;u<l.length;++u){var c=l[u];0===--s[c]&&o.push(c)}}for(var h=new Array(t.length),p=[],u=0;u<t.length;++u)if(r[u]){var f=p.length;h[u]=f,p.push(t[u])}else h[u]=-1;for(var d=[],u=0;u<e.length;++u){var v=e[u];r[v[0]]&&r[v[1]]&&d.push([h[v[0]],h[v[1]]])}return[d,p]}t.exports=r;var i=e("edges-to-adjacency-list")},{"edges-to-adjacency-list":263}],263:[function(e,t,n){"use strict";function r(e,t){var n=e.length;if("number"!=typeof t){t=0;for(var r=0;n>r;++r){var s=e[r];t=Math.max(t,s[0],s[1])}t=(0|t)+1}t=0|t;for(var o=new Array(t),r=0;t>r;++r)o[r]=[];for(var r=0;n>r;++r){var s=e[r];o[s[0]].push(s[1]),o[s[1]].push(s[0])}for(var u=0;t>u;++u)i(o[u],function(e,t){return e-t});return o}t.exports=r;var i=e("uniq")},{uniq:218}],264:[function(e,t,n){"use strict";function r(e,t){function n(e,t){var n=f[t][e[t]];n.splice(n.indexOf(e),1)}function r(e,r,s){for(var o,u,a,l=0;2>l;++l)if(f[l][r].length>0){o=f[l][r][0],a=l;break}u=o[1^a];for(var c=0;2>c;++c)for(var h=f[c][r],p=0;p<h.length;++p){var d=h[p],v=d[1^c],m=i(t[e],t[r],t[u],t[v]);m>0&&(o=d,u=v,a=c)}return s?u:(o&&n(o,a),u)}function s(e,s){var o=f[s][e][0],u=[e];n(o,s);for(var a=o[1^s];;){for(;a!==e;)u.push(a),a=r(u[u.length-2],a,!1);if(f[0][e].length+f[1][e].length===0)break;var l=u[u.length-1],c=e,h=u[1],p=r(l,c,!0);if(i(t[l],t[c],t[h],t[p])<0)break;u.push(e),a=r(l,c)}return u}function o(e,t){return t[1]===t[t.length-1]}for(var u=0|t.length,a=e.length,f=[new Array(u),new Array(u)],l=0;u>l;++l)f[0][l]=[],f[1][l]=[];for(var l=0;a>l;++l){var c=e[l];f[0][c[0]].push(c),f[1][c[1]].push(c)}for(var h=[],l=0;u>l;++l)f[0][l].length+f[1][l].length===0&&h.push([l]);for(var l=0;u>l;++l)for(var p=0;2>p;++p){for(var d=[];f[p][l].length>0;){var v=(f[0][l].length,s(l,p));o(d,v)?d.push.apply(d,v):(d.length>0&&h.push(d),d=v)}d.length>0&&h.push(d)}return h}t.exports=r;var i=e("compare-angle")},{"compare-angle":265}],265:[function(e,t,n){"use strict";function r(e,t,n){var r=u(e[0],-t[0]),i=u(e[1],-t[1]),s=u(n[0],-t[0]),o=u(n[1],-t[1]),c=f(a(r,s),a(i,o));return c[c.length-1]>=0}function i(e,t,n,i){var u=s(t,n,i);if(0===u){var a=o(s(e,t,n)),f=o(s(e,t,i));if(a===f){if(0===a){var l=r(e,t,n),c=r(e,t,i);return l===c?0:l?1:-1}return 0}return 0===f?a>0?-1:r(e,t,i)?-1:1:0===a?f>0?1:r(e,t,n)?1:-1:o(f-a)}var h=s(e,t,n);if(h>0)return u>0&&s(e,t,i)>0?1:-1;if(0>h)return u>0||s(e,t,i)>0?1:-1;var p=s(e,t,i);return p>0?1:r(e,t,n)?1:-1}t.exports=i;var s=e("robust-orientation"),o=e("signum"),u=e("two-sum"),a=e("robust-product"),f=e("robust-sum")},{"robust-orientation":195,"robust-product":266,"robust-sum":198,signum:267,"two-sum":216}],266:[function(e,t,n){"use strict";function r(e,t){if(1===e.length)return s(t,e[0]);if(1===t.length)return s(e,t[0]);if(0===e.length||0===t.length)return[0];var n=[0];if(e.length<t.length)for(var r=0;r<e.length;++r)n=i(n,s(t,e[r]));else for(var r=0;r<t.length;++r)n=i(n,s(e,t[r]));return n}var i=e("robust-sum"),s=e("robust-scale");t.exports=r},{"robust-scale":196,"robust-sum":198}],267:[function(e,t,n){"use strict";t.exports=function(e){return 0>e?-1:e>0?1:0}},{}],268:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{dup:4}],269:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}function i(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function s(e,t){var n=d(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function o(e,t){var n=e.intervals([]);n.push(t),s(e,n)}function u(e,t){var n=e.intervals([]),r=n.indexOf(t);return 0>r?y:(n.splice(r,1),s(e,n),b)}function a(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function f(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function l(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}function c(e,t){return e-t}function h(e,t){var n=e[0]-t[0];return n?n:e[1]-t[1]}function p(e,t){var n=e[1]-t[1];return n?n:e[0]-t[0]}function d(e){if(0===e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(c);for(var i=t[t.length>>1],s=[],o=[],u=[],n=0;n<e.length;++n){var a=e[n];a[1]<i?s.push(a):i<a[0]?o.push(a):u.push(a)}var f=u,l=u.slice();return f.sort(h),l.sort(p),new r(i,d(s),d(o),f,l)}function v(e){this.root=e}function m(e){return new v(e&&0!==e.length?d(e):null)}var g=e("binary-search-bounds"),y=0,b=1,w=2;t.exports=m;var E=r.prototype;E.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},E.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?o(this,e):this.left.insert(e):this.left=d([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?o(this,e):this.right.insert(e):this.right=d([e]);else{var n=g.ge(this.leftPoints,e,h),r=g.ge(this.rightPoints,e,p);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}},E.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return y;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return u(this,e);var r=this.left.remove(e);return r===w?(this.left=null,this.count-=1,b):(r===b&&(this.count-=1),r)}if(e[0]>this.mid){if(!this.right)return y;var s=this.left?this.left.count:0;if(4*s>3*(t-1))return u(this,e);var r=this.right.remove(e);return r===w?(this.right=null,this.count-=1,b):(r===b&&(this.count-=1),r)}if(1===this.count)return this.leftPoints[0]===e?w:y;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var o=this,a=this.left;a.right;)o=a,a=a.right;if(o===this)a.right=this.right;else{var f=this.left,r=this.right;o.count-=a.count,o.right=a.left,a.left=f,a.right=r}i(this,a),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?i(this,this.left):i(this,this.right);return b}for(var f=g.ge(this.leftPoints,e,h);f<this.leftPoints.length&&this.leftPoints[f][0]===e[0];++f)if(this.leftPoints[f]===e){this.count-=1,this.leftPoints.splice(f,1);for(var r=g.ge(this.rightPoints,e,p);r<this.rightPoints.length&&this.rightPoints[r][1]===e[1];++r)if(this.rightPoints[r]===e)return this.rightPoints.splice(r,1),b}return y},E.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return a(this.leftPoints,e,t)}if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return f(this.rightPoints,e,t)}return l(this.leftPoints,t)},E.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?a(this.leftPoints,t,n):e>this.mid?f(this.rightPoints,e,n):l(this.leftPoints,n)};var S=v.prototype;S.insert=function(e){this.root?this.root.insert(e):this.root=new r(e[0],null,null,[e],[e])},S.remove=function(e){if(this.root){var t=this.root.remove(e);return t===w&&(this.root=null),t!==y}return!1},S.queryPoint=function(e,t){return this.root?this.root.queryPoint(e,t):void 0},S.queryInterval=function(e,t,n){return t>=e&&this.root?this.root.queryInterval(e,t,n):void 0},Object.defineProperty(S,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(S,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":268}],270:[function(e,t,n){"use strict";function r(e,t){var n,r;if(t[0][0]<t[1][0])n=t[0],r=t[1];else{if(!(t[0][0]>t[1][0])){var i=Math.min(e[0][1],e[1][1]),o=Math.max(e[0][1],e[1][1]),u=Math.min(t[0][1],t[1][1]),f=Math.max(t[0][1],t[1][1]);return u>o?o-u:i>f?i-f:o-f}n=t[1],r=t[0]}var l,c;e[0][1]<e[1][1]?(l=e[0],c=e[1]):(l=e[1],c=e[0]);var h=s(r,n,l);return h?h:(h=s(r,n,c),h?h:c-r)}function i(e,t){var n,i;if(t[0][0]<t[1][0])n=t[0],i=t[1];else{if(!(t[0][0]>t[1][0]))return r(t,e);n=t[1],i=t[0]}var o,u;if(e[0][0]<e[1][0])o=e[0],u=e[1];else{if(!(e[0][0]>e[1][0]))return-r(e,t);o=e[1],u=e[0]}var f=s(n,i,u),l=s(n,i,o);if(0>f){if(0>=l)return f}else if(f>0){if(l>=0)return f}else if(l)return l;if(f=s(u,o,i),l=s(u,o,n),0>f){if(0>=l)return f}else if(f>0){if(l>=0)return f}else if(l)return l;return i[0]-u[0]}t.exports=i;var s=e("robust-orientation")},{"robust-orientation":195}],271:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){this._color=e,this.key=t,this.value=n,this.left=r,this.right=i,this._count=s}function i(e){return new r(e._color,e.key,e.value,e.left,e.right,e._count)}function s(e,t){return new r(e,t.key,t.value,t.left,t.right,t._count)}function o(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function u(e,t){this._compare=e,this.root=t}function a(e,t){if(t.left){var n=a(e,t.left);if(n)return n}var n=e(t.key,t.value);return n?n:t.right?a(e,t.right):void 0}function f(e,t,n,r){var i=t(e,r.key);if(0>=i){if(r.left){var s=f(e,t,n,r.left);if(s)return s}var s=n(r.key,r.value);if(s)return s}return r.right?f(e,t,n,r.right):void 0}function l(e,t,n,r,i){var s,o=n(e,i.key),u=n(t,i.key);if(0>=o){if(i.left&&(s=l(e,t,n,r,i.left)))return s;if(u>0&&(s=r(i.key,i.value)))return s}return u>0&&i.right?l(e,t,n,r,i.right):void 0}function c(e,t){this.tree=e,this._stack=t}function h(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function p(e){for(var t,n,r,u,a=e.length-1;a>=0;--a){if(t=e[a],0===a)return void (t._color=g);if(n=e[a-1],n.left===t){if(r=n.right,r.right&&r.right._color===m){if(r=n.right=i(r),u=r.right=i(r.right),n.right=r.left,r.left=n,r.right=u,r._color=n._color,t._color=g,n._color=g,u._color=g,o(n),o(r),a>1){var f=e[a-2];f.left===n?f.left=r:f.right=r}return void (e[a-1]=r)}if(r.left&&r.left._color===m){if(r=n.right=i(r),u=r.left=i(r.left),n.right=u.left,r.left=u.right,u.left=n,u.right=r,u._color=n._color,n._color=g,r._color=g,t._color=g,o(n),o(r),o(u),a>1){var f=e[a-2];f.left===n?f.left=u:f.right=u}return void (e[a-1]=u)}if(r._color===g){if(n._color===m)return n._color=g,void (n.right=s(m,r));n.right=s(m,r);continue}if(r=i(r),n.right=r.left,r.left=n,r._color=n._color,n._color=m,o(n),o(r),a>1){var f=e[a-2];f.left===n?f.left=r:f.right=r}e[a-1]=r,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}else{if(r=n.left,r.left&&r.left._color===m){if(r=n.left=i(r),u=r.left=i(r.left),n.left=r.right,r.right=n,r.left=u,r._color=n._color,t._color=g,n._color=g,u._color=g,o(n),o(r),a>1){var f=e[a-2];f.right===n?f.right=r:f.left=r}return void (e[a-1]=r)}if(r.right&&r.right._color===m){if(r=n.left=i(r),u=r.right=i(r.right),n.left=u.right,r.right=u.left,u.right=n,u.left=r,u._color=n._color,n._color=g,r._color=g,t._color=g,o(n),o(r),o(u),a>1){var f=e[a-2];f.right===n?f.right=u:f.left=u}return void (e[a-1]=u)}if(r._color===g){if(n._color===m)return n._color=g,void (n.left=s(m,r));n.left=s(m,r);continue}if(r=i(r),n.left=r.right,r.right=n,r._color=n._color,n._color=m,o(n),o(r),a>1){var f=e[a-2];f.right===n?f.right=r:f.left=r}e[a-1]=r,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}}}function d(e,t){return t>e?-1:e>t?1:0}function v(e){return new u(e||d,null)}t.exports=v;var m=0,g=1,y=u.prototype;Object.defineProperty(y,"keys",{get:function(){var e=[];return this.forEach(function(t,n){e.push(t)}),e}}),Object.defineProperty(y,"values",{get:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e}}),Object.defineProperty(y,"length",{get:function(){return this.root?this.root._count:0}}),y.insert=function(e,t){for(var n=this._compare,i=this.root,a=[],f=[];i;){var l=n(e,i.key);a.push(i),f.push(l),i=0>=l?i.left:i.right}a.push(new r(m,e,t,null,null,1));for(var c=a.length-2;c>=0;--c){var i=a[c];f[c]<=0?a[c]=new r(i._color,i.key,i.value,a[c+1],i.right,i._count+1):a[c]=new r(i._color,i.key,i.value,i.left,a[c+1],i._count+1)}for(var c=a.length-1;c>1;--c){var h=a[c-1],i=a[c];if(h._color===g||i._color===g)break;var p=a[c-2];if(p.left===h)if(h.left===i){var d=p.right;if(!d||d._color!==m){if(p._color=m,p.left=h.right,h._color=g,h.right=p,a[c-2]=h,a[c-1]=i,o(p),o(h),c>=3){var v=a[c-3];v.left===p?v.left=h:v.right=h}break}h._color=g,p.right=s(g,d),p._color=m,c-=1}else{var d=p.right;if(!d||d._color!==m){if(h.right=i.left,p._color=m,p.left=i.right,i._color=g,i.left=h,i.right=p,a[c-2]=i,a[c-1]=h,o(p),o(h),o(i),c>=3){var v=a[c-3];v.left===p?v.left=i:v.right=i}break}h._color=g,p.right=s(g,d),p._color=m,c-=1}else if(h.right===i){var d=p.left;if(!d||d._color!==m){if(p._color=m,p.right=h.left,h._color=g,h.left=p,a[c-2]=h,a[c-1]=i,o(p),o(h),c>=3){var v=a[c-3];v.right===p?v.right=h:v.left=h}break}h._color=g,p.left=s(g,d),p._color=m,c-=1}else{var d=p.left;if(!d||d._color!==m){if(h.left=i.right,p._color=m,p.right=i.left,i._color=g,i.right=h,i.left=p,a[c-2]=i,a[c-1]=h,o(p),o(h),o(i),c>=3){var v=a[c-3];v.right===p?v.right=i:v.left=i}break}h._color=g,p.left=s(g,d),p._color=m,c-=1}}return a[0]._color=g,new u(n,a[0])},y.forEach=function(e,t,n){if(this.root)switch(arguments.length){case 1:return a(e,this.root);case 2:return f(t,this._compare,e,this.root);case 3:if(this._compare(t,n)>=0)return;return l(t,n,this._compare,e,this.root)}},Object.defineProperty(y,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new c(this,e)}}),Object.defineProperty(y,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new c(this,e)}}),y.at=function(e){if(0>e)return new c(this,[]);for(var t=this.root,n=[];;){if(n.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new c(this,n);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new c(this,[])},y.ge=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var s=t(e,n.key);r.push(n),0>=s&&(i=r.length),n=0>=s?n.left:n.right}return r.length=i,new c(this,r)},y.gt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var s=t(e,n.key);r.push(n),0>s&&(i=r.length),n=0>s?n.left:n.right}return r.length=i,new c(this,r)},y.lt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var s=t(e,n.key);r.push(n),s>0&&(i=r.length),n=0>=s?n.left:n.right}return r.length=i,new c(this,r)},y.le=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var s=t(e,n.key);r.push(n),s>=0&&(i=r.length),n=0>s?n.left:n.right}return r.length=i,new c(this,r)},y.find=function(e){for(var t=this._compare,n=this.root,r=[];n;){var i=t(e,n.key);if(r.push(n),0===i)return new c(this,r);n=0>=i?n.left:n.right}return new c(this,[])},y.remove=function(e){var t=this.find(e);return t?t.remove():this},y.get=function(e){for(var t=this._compare,n=this.root;n;){var r=t(e,n.key);if(0===r)return n.value;n=0>=r?n.left:n.right}};var b=c.prototype;Object.defineProperty(b,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(b,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),b.clone=function(){return new c(this.tree,this._stack.slice())},b.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new r(n._color,n.key,n.value,n.left,n.right,n._count);for(var i=e.length-2;i>=0;--i){var n=e[i];n.left===e[i+1]?t[i]=new r(n._color,n.key,n.value,t[i+1],n.right,n._count):t[i]=new r(n._color,n.key,n.value,n.left,t[i+1],n._count)}if(n=t[t.length-1],n.left&&n.right){var s=t.length;for(n=n.left;n.right;)t.push(n),n=n.right;var o=t[s-1];t.push(new r(n._color,o.key,o.value,n.left,n.right,n._count)),t[s-1].key=n.key,t[s-1].value=n.value;for(var i=t.length-2;i>=s;--i)n=t[i],t[i]=new r(n._color,n.key,n.value,n.left,t[i+1],n._count);t[s-1].left=t[s]}if(n=t[t.length-1],n._color===m){var a=t[t.length-2];a.left===n?a.left=null:a.right===n&&(a.right=null),t.pop();for(var i=0;i<t.length;++i)t[i]._count--;return new u(this.tree._compare,t[0])}if(n.left||n.right){n.left?h(n,n.left):n.right&&h(n,n.right),n._color=g;for(var i=0;i<t.length-1;++i)t[i]._count--;return new u(this.tree._compare,t[0])}if(1===t.length)return new u(this.tree._compare,null);for(var i=0;i<t.length;++i)t[i]._count--;var f=t[t.length-2];return p(t),f.left===n?f.left=null:f.right=null,new u(this.tree._compare,t[0])},Object.defineProperty(b,"key",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1].key:void 0},enumerable:!0}),Object.defineProperty(b,"value",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1].value:void 0},enumerable:!0}),Object.defineProperty(b,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var n=this.tree.root;return n?n._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var r=t.length-2;r>=0;--r)t[r+1]===t[r].right&&(++e,t[r].left&&(e+=t[r].left._count));return e},enumerable:!0}),b.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(b,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),b.update=function(e){var t=this._stack;if(0===t.length)throw new Error("Can't update empty node!");var n=new Array(t.length),i=t[t.length-1];n[n.length-1]=new r(i._color,i.key,e,i.left,i.right,i._count);for(var s=t.length-2;s>=0;--s)i=t[s],i.left===t[s+1]?n[s]=new r(i._color,i.key,i.value,n[s+1],i.right,i._count):n[s]=new r(i._color,i.key,i.value,i.left,n[s+1],i._count);return new u(this.tree._compare,n[0])},b.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(b,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}})},{}],272:[function(e,t,n){"use strict";function r(e,t,n){this.slabs=e,this.coordinates=t,this.horizontal=n}function i(e,t){return e.y-t}function s(e,t){for(var n=null;e;){var r,i,o=e.key;o[0][0]<o[1][0]?(r=o[0],i=o[1]):(r=o[1],i=o[0]);var u=c(r,i,t);if(0>u)e=e.left;else if(u>0)if(t[0]!==o[1][0])n=e,e=e.right;else{var a=s(e.right,t);if(a)return a;e=e.left}else{if(t[0]!==o[1][0])return e;var a=s(e.right,t);if(a)return a;e=e.left}}return n}function o(e,t,n,r){this.y=e,this.index=t,this.start=n,this.closed=r}function u(e,t,n,r){this.x=e,this.segment=t,this.create=n,this.index=r}function a(e){for(var t=e.length,n=2*t,i=new Array(n),s=0;t>s;++s){var a=e[s],f=a[0][0]<a[1][0];i[2*s]=new u(a[0][0],a,f,s),i[2*s+1]=new u(a[1][0],a,!f,s)}i.sort(function(e,t){var n=e.x-t.x;return n?n:(n=e.create-t.create,n?n:Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1]))});for(var c=l(h),p=[],d=[],v=[],s=0;n>s;){for(var m=i[s].x,g=[];n>s;){var y=i[s];if(y.x!==m)break;s+=1,y.segment[0][0]===y.x&&y.segment[1][0]===y.x?y.create&&(y.segment[0][1]<y.segment[1][1]?(g.push(new o(y.segment[0][1],y.index,!0,!0)),g.push(new o(y.segment[1][1],y.index,!1,!1))):(g.push(new o(y.segment[1][1],y.index,!0,!1)),g.push(new o(y.segment[0][1],y.index,!1,!0)))):c=y.create?c.insert(y.segment,y.index):c.remove(y.segment)}p.push(c.root),d.push(m),v.push(g)}return new r(p,d,v)}t.exports=a;var f=e("binary-search-bounds"),l=e("functional-red-black-tree"),c=e("robust-orientation"),h=e("./lib/order-segments"),p=r.prototype;p.castUp=function(e){var t=f.le(this.coordinates,e[0]);if(0>t)return-1;var n=(this.slabs[t],s(this.slabs[t],e)),r=-1;if(n&&(r=n.value),this.coordinates[t]===e[0]){var o=null;if(n&&(o=n.key),t>0){var u=s(this.slabs[t-1],e);u&&(o?h(u.key,o)>0&&(o=u.key,r=u.value):(r=u.value,o=u.key))}var a=this.horizontal[t];if(a.length>0){var l=f.ge(a,e[1],i);if(l<a.length){var p=a[l];if(e[1]===p.y){if(p.closed)return p.index;for(;l<a.length-1&&a[l+1].y===e[1];)if(l+=1,p=a[l],p.closed)return p.index;if(p.y===e[1]&&!p.start){if(l+=1,l>=a.length)return r;p=a[l]}}if(p.start)if(o){var d=c(o[0],o[1],[e[0],p.y]);o[0][0]>o[1][0]&&(d=-d),d>0&&(r=p.index)}else r=p.index;else p.y!==e[1]&&(r=p.index)}}}return r}},{"./lib/order-segments":270,"binary-search-bounds":268,"functional-red-black-tree":271,"robust-orientation":195}],273:[function(e,t,n){function r(){return!0}function i(e){return function(t,n){var i=e[t];return i?!!i.queryPoint(n,r):!1}}function s(e){for(var t={},n=0;n<e.length;++n){var r=e[n],s=r[0][0],o=r[0][1],u=r[1][1],a=[Math.min(o,u),Math.max(o,u)];s in t?t[s].push(a):t[s]=[a]}for(var f={},l=Object.keys(t),n=0;n<l.length;++n){var c=t[l[n]];f[l[n]]=p(c)}return i(f)}function o(e,t){return function(n){var r=d.le(t,n[0]);if(0>r)return 1;var i=e[r];if(!i){if(!(r>0&&t[r]===n[0]))return 1;i=e[r-1]}for(var s=1;i;){var o=i.key,u=c(n,o[0],o[1]);if(o[0][0]<o[1][0])if(0>u)i=i.left;else{if(!(u>0))return 0;s=-1,i=i.right}else if(u>0)i=i.left;else{if(!(0>u))return 0;s=1,i=i.right}}return s}}function u(e){return 1}function a(e){return function(t){return e(t[0],t[1])?0:1}}function f(e,t){return function(n){return e(n[0],n[1])?0:t(n)}}function l(e){for(var t=e.length,n=[],r=[],i=0;t>i;++i)for(var l=e[i],c=l.length,p=c-1,d=0;c>d;p=d++){var v=l[p],m=l[d];v[0]===m[0]?r.push([v,m]):n.push([v,m])}if(0===n.length)return 0===r.length?u:a(s(r));var g=h(n),y=o(g.slabs,g.coordinates);return 0===r.length?y:f(s(r),y)}t.exports=l;var c=e("robust-orientation")[3],h=e("slab-decomposition"),p=e("interval-tree-1d"),d=e("binary-search-bounds")},{"binary-search-bounds":268,"interval-tree-1d":269,"robust-orientation":195,"slab-decomposition":272}],274:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(e),r=0;e>r;++r)n[r]=t;return n}function i(e){for(var t=new Array(e),n=0;e>n;++n)t[n]=[];return t}function s(e,t){function n(e){for(var n=e.length,r=[0],i=0;n>i;++i){var s=t[e[i]],o=t[e[(i+1)%n]],u=f(-s[0],s[1]),a=f(-s[0],o[1]),c=f(o[0],s[1]),h=f(o[0],o[1]);r=l(r,l(l(u,a),l(c,h)))}return r[r.length-1]>0}function s(e){for(var t=e.length,n=0;t>n;++n)if(!P[e[n]])return!1;return!0}var p=h(e,t);e=p[0],t=p[1];for(var d=t.length,v=(e.length,o(e,t.length)),m=0;d>m;++m)if(v[m].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var g=u(e,t);g=g.filter(n);for(var y=g.length,b=new Array(y),w=new Array(y),m=0;y>m;++m){b[m]=m;var E=new Array(y),S=g[m].map(function(e){return t[e]}),x=a([S]),T=0;e:for(var N=0;y>N;++N)if(E[N]=0,m!==N){for(var C=g[N],k=C.length,L=0;k>L;++L){var A=x(t[C[L]]);if(0!==A){0>A&&(E[N]=1,T+=1);continue e}}E[N]=1,T+=1}w[m]=[T,m,E]}w.sort(function(e,t){return t[0]-e[0]});for(var m=0;y>m;++m)for(var E=w[m],O=E[1],M=E[2],N=0;y>N;++N)M[N]&&(b[N]=O);for(var _=i(y),m=0;y>m;++m)_[m].push(b[m]),_[b[m]].push(m);for(var D={},P=r(d,!1),m=0;y>m;++m)for(var C=g[m],k=C.length,N=0;k>N;++N){var H=C[N],B=C[(N+1)%k],j=Math.min(H,B)+":"+Math.max(H,B);if(j in D){var F=D[j];_[F].push(m),_[m].push(F),P[H]=P[B]=!0}else D[j]=m}for(var I=[],q=r(y,-1),m=0;y>m;++m)b[m]!==m||s(g[m])?q[m]=-1:(I.push(m),q[m]=0);for(var p=[];I.length>0;){var R=I.pop(),U=_[R];c(U,function(e,t){return e-t});var z,W=U.length,X=q[R];if(0===X){var C=g[R];z=[C]}for(var m=0;W>m;++m){var V=U[m];if(!(q[V]>=0)&&(q[V]=1^X,I.push(V),0===X)){var C=g[V];s(C)||(C.reverse(),z.push(C))}}0===X&&p.push(z)}return p}t.exports=s;var o=e("edges-to-adjacency-list"),u=e("planar-dual"),a=e("point-in-big-polygon"),f=e("two-product"),l=e("robust-sum"),c=e("uniq"),h=e("./lib/trim-leaves")},{"./lib/trim-leaves":262,"edges-to-adjacency-list":263,"planar-dual":264,"point-in-big-polygon":273,"robust-sum":198,"two-product":215,uniq:218}],275:[function(e,t,n){arguments[4][33][0].apply(n,arguments)},{dup:33}],276:[function(e,t,n){"use strict";"use restrict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;e>t;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=r,r.prototype.length=function(){return this.roots.length},r.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},r.prototype.find=function(e){for(var t=this.roots;t[e]!==e;){var n=t[e];t[e]=t[n],e=n}return e},r.prototype.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var i=this.ranks,s=this.roots,o=i[n],u=i[r];u>o?s[n]=r:o>u?s[r]=n:(s[r]=n,++i[n])}}},{}],277:[function(e,t,n){arguments[4][171][0].apply(n,arguments)},{"bit-twiddle":275,dup:171,"union-find":276}],278:[function(e,t,n){"use strict";function r(e,t,n){var r=Math.abs(s(e,t,n)),i=Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2));return r/i}function i(e,t,n){function i(e){if(w[e])return 1/0;var n=g[e],i=y[e];return 0>n||0>i?1/0:r(t[e],t[n],t[i])}function s(e,t){var n=N[e],r=N[t];N[e]=r,N[t]=n,C[n]=t,C[r]=e}function u(e){return b[N[e]]}function a(e){return 1&e?e-1>>1:(e>>1)-1}function f(e){for(var t=u(e);;){var n=t,r=2*e+1,i=2*(e+1),o=e;if(L>r){var a=u(r);n>a&&(o=r,n=a)}if(L>i){var f=u(i);n>f&&(o=i)}if(o===e)return e;s(e,o),e=o}}function l(e){for(var t=u(e);e>0;){var n=a(e);if(n>=0){var r=u(n);if(r>t){s(e,n),e=n;continue}}return e}}function c(){if(L>0){var e=N[0];return s(0,L-1),L-=1,f(0),e}return-1}function h(e,t){var n=N[e];return b[n]===t?e:(b[n]=-1/0,l(e),c(),b[n]=t,L+=1,l(L-1))}function p(e){if(!w[e]){w[e]=!0;var t=g[e],n=y[e];g[n]>=0&&(g[n]=t),y[t]>=0&&(y[t]=n),C[t]>=0&&h(C[t],i(t)),C[n]>=0&&h(C[n],i(n))}}function d(e,t){if(e[t]<0)return t;var n=t,r=t;do{var i=e[r];if(!w[r]||0>i||i===r)break;if(r=i,i=e[r],!w[r]||0>i||i===r)break;r=i,n=e[n]}while(n!==r);for(var s=t;s!==r;s=e[s])e[s]=r;return r}for(var v=t.length,m=e.length,g=new Array(v),y=new Array(v),b=new Array(v),w=new Array(v),E=0;v>E;++E)g[E]=y[E]=-1,b[E]=1/0,w[E]=!1;for(var E=0;m>E;++E){var S=e[E];if(2!==S.length)throw new Error("Input must be a graph");var x=S[1],T=S[0];-1!==y[T]?y[T]=-2:y[T]=x,-1!==g[x]?g[x]=-2:g[x]=T}for(var N=[],C=new Array(v),E=0;v>E;++E){var k=b[E]=i(E);1/0>k?(C[E]=N.length,N.push(E)):C[E]=-1}for(var L=N.length,E=L>>1;E>=0;--E)f(E);for(;;){var A=c();if(0>A||b[A]>n)break;p(A)}for(var O=[],E=0;v>E;++E)w[E]||(C[E]=O.length,O.push(t[E].slice()));var M=(O.length,[]);return e.forEach(function(e){var t=d(g,e[0]),n=d(y,e[1]);if(t>=0&&n>=0&&t!==n){var r=C[t],i=C[n];r!==i&&M.push([r,i])}}),o.unique(o.normalize(M)),{positions:O,edges:M}}t.exports=i;var s=e("robust-orientation"),o=e("simplicial-complex")},{"robust-orientation":195,"simplicial-complex":277}],279:[function(e,t,n){t.exports=["",{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0},{path:"M2,2V-2H-2V2Z",backoff:0}]},{}],280:[function(e,t,n){var r=e("../../plotly"),i=e("./arrow_paths"),s=e("../../plots/font_attributes"),o=e("../../lib/extend").extendFlat;t.exports={_isLinkedToArray:!0,text:{valType:"string"},textangle:{valType:"angle",dflt:0},font:o({},s,{}),opacity:{valType:"number",min:0,max:1,dflt:1},align:{valType:"enumerated",values:["left","center","right"],dflt:"center"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)"},borderpad:{valType:"number",min:0,dflt:1},borderwidth:{valType:"number",min:0,dflt:1},showarrow:{valType:"boolean",dflt:!0},arrowcolor:{valType:"color"},arrowhead:{valType:"integer",min:0,max:i.length,dflt:1},arrowsize:{valType:"number",min:.3,dflt:1},arrowwidth:{valType:"number",min:.1},ax:{valType:"number",dflt:-10},ay:{valType:"number",dflt:-30},xref:{valType:"enumerated",values:["paper",r.Plots.subplotsRegistry.cartesian.idRegex.x.toString()]},x:{valType:"number"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yref:{valType:"enumerated",values:["paper",r.Plots.subplotsRegistry.cartesian.idRegex.y.toString()]},y:{valType:"number"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto"},_deprecated:{ref:{valType:"string"}}}},{"../../lib/extend":310,"../../plotly":330,"../../plots/font_attributes":336,"./arrow_paths":279}],281:[function(e,t,n){"use strict";function r(e,t){function n(t,n){return o.Lib.coerce(e,r,f.layoutAttributes,t,n)}var r={};n("opacity"),n("align"),n("bgcolor");var i=n("bordercolor"),s=o.Color.opacity(i);n("borderpad");var u=n("borderwidth"),a=n("showarrow");a&&(n("arrowcolor",s?r.bordercolor:o.Color.defaultLine),n("arrowhead"),n("arrowsize"),n("arrowwidth",2*(s&&u||1)),n("ax"),n("ay"),o.Lib.noneOrAll(e,r,["ax","ay"])),n("text",a?"&nbsp;":"new text"),n("textangle"),o.Lib.coerceFont(n,"font",t.font);for(var l=["x","y"],c=0;2>c;c++){var h=l[c],p={_fullLayout:t},d=o.Axes.coerceRef(e,r,p,h),v=.5;if("paper"!==d){var m=o.Axes.getFromId(p,d);if(v=m.range[0]+v*(m.range[1]-m.range[0]),-1!==["date","category"].indexOf(m.type)&&"string"==typeof e[h]){var g;"date"===m.type?(g=o.Lib.dateTime2ms(e[h]),g!==!1&&(e[h]=g)):(m._categories||[]).length&&(g=m._categories.indexOf(e[h]),-1!==g&&(e[h]=g))}}n(h,v),a||n(h+"anchor")}return o.Lib.noneOrAll(e,r,["x","y"]),r}function i(e){var t=e._fullLayout;t.annotations.forEach(function(t){var n=o.Axes.getFromId(e,t.xref),r=o.Axes.getFromId(e,t.yref);if(n||r){var i=(t._xsize||0)/2,s=t._xshift||0,u=(t._ysize||0)/2,a=t._yshift||0,f=i-s,l=i+s,c=u-a,h=u+a;if(t.showarrow){var p=3*t.arrowsize*t.arrowwidth;f=Math.max(f,p),l=Math.max(l,p),c=Math.max(c,p),h=Math.max(h,p)}n&&n.autorange&&o.Axes.expand(n,[n.l2c(t.x)],{ppadplus:l,ppadminus:f}),r&&r.autorange&&o.Axes.expand(r,[r.l2c(t.y)],{ppadplus:h,ppadminus:c})}})}function s(e,t,n,r,i,s,o,u){var a=n-e,f=i-e,l=o-i,c=r-t,h=s-t,p=u-s,d=a*p-l*c;if(0===d)return null;var v=(f*p-l*h)/d,m=(f*c-a*h)/d;return 0>m||m>1||0>v||v>1?null:{x:e+a*v,y:t+c*v}}var o=e("../../plotly"),u=e("d3"),a=e("fast-isnumeric"),f=t.exports={};f.ARROWPATHS=e("./arrow_paths"),f.layoutAttributes=e("./attributes"),f.supplyLayoutDefaults=function(e,t){for(var n=e.annotations||[],i=t.annotations=[],s=0;s<n.length;s++)i.push(r(n[s]||{},t))},f.drawAll=function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)f.draw(e,n);return o.Plots.previousPromises(e)},f.add=function(e){var t=e._fullLayout.annotations.length;o.relayout(e,"annotations["+t+"]","add")},f.draw=function(e,t,n,i){function c(e){return e.call(o.Drawing.font,$).attr({"text-anchor":{left:"start",right:"end"}[H.align]||"middle"}),o.util.convertToTspans(e,h),e}function h(){function n(e,t){return"auto"===t&&(t=1/3>e?"left":e>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-0.5,right:-0.5,top:.5}[t]}J.selectAll("tspan.line").attr({y:0,x:0});var r=U.select(".annotation-math-group"),i=!r.empty(),a=o.Drawing.bBox((i?r:J).node()),l=a.width,c=a.height,h=Math.round(l+2*X),p=Math.round(c+2*X);H._w=l,H._h=c;var d=!1;if(["x","y"].forEach(function(t){var r,i=o.Axes.getFromId(e,H[t+"ref"]||t),s=(I+("x"===t?0:90))*Math.PI/180,u=h*Math.abs(Math.cos(s))+p*Math.abs(Math.sin(s)),a=H[t+"anchor"];if(i){if(!i.autorange&&(H[t]-i.range[0])*(H[t]-i.range[1])>0)return void (d=!0);F[t]=i._offset+i.l2p(H[t]),r=.5}else r=H[t],"y"===t&&(r=1-r),F[t]="x"===t?x.l+x.w*r:x.t+x.h*r;var f=0;f=H.showarrow?H["a"+t]:u*n(r,a),F[t]+=f,H["_"+t+"type"]=i&&i.type,H["_"+t+"size"]=u,H["_"+t+"shift"]=f}),d)return void U.remove();var m,g;H.showarrow&&(m=o.Lib.constrain(F.x-H.ax,1,v.width-1),g=o.Lib.constrain(F.y-H.ay,1,v.height-1)),F.x=o.Lib.constrain(F.x,1,v.width-1),F.y=o.Lib.constrain(F.y,1,v.height-1);var y=X-a.top,b=X-a.left;i?r.select("svg").attr({x:X-1,y:X}):(J.attr({x:b,y:y}),J.selectAll("tspan.line").attr({y:y,x:b})),V.call(o.Drawing.setRect,z/2,z/2,h-z,p-z),U.call(o.Drawing.setRect,Math.round(F.x-h/2),Math.round(F.y-p/2),h,p);var w="annotations["+t+"]",E=function(n,r){u.select(e).selectAll('.annotation-arrow-g[data-index="'+t+'"]').remove();var i=F.x+n,a=F.y+r,l=o.Lib.rotationXYMatrix(I,i,a),c=o.Lib.apply2DTransform(l),h=o.Lib.apply2DTransform2(l),p=V.attr("width")/2,d=V.attr("height")/2,v=[[i-p,a-d,i-p,a+d],[i-p,a+d,i+p,a+d],[i+p,a+d,i+p,a-d],[i+p,a-d,i-p,a-d]].map(h);if(!v.reduce(function(e,t){return e^!!s(m,g,m+1e6,g+1e6,t[0],t[1],t[2],t[3])},!1)){v.forEach(function(e){var t=s(i,a,m,g,e[0],e[1],e[2],e[3]);t&&(i=t.x,a=t.y)});var y=H.arrowwidth,b=H.arrowcolor,E=q.append("g").style({opacity:o.Color.opacity(b)}).classed("annotation-arrow-g",!0).attr("data-index",String(t)),S=E.append("path").attr("d","M"+i+","+a+"L"+m+","+g).style("stroke-width",y+"px").call(o.Color.stroke,o.Color.rgb(b));f.arrowhead(S,H.arrowhead,"end",H.arrowsize);var T=E.append("path").classed("annotation",!0).classed("anndrag",!0).attr({"data-index":String(t),d:"M3,3H-3V-3H3ZM0,0L"+(i-m)+","+(a-g),transform:"translate("+m+","+g+")"}).style("stroke-width",y+6+"px").call(o.Color.stroke,"rgba(0,0,0,0)").call(o.Color.fill,"rgba(0,0,0,0)");if(e._context.editable){var N,C,k;o.Fx.dragElement({element:T.node(),prepFn:function(){C=Number(U.attr("x")),k=Number(U.attr("y")),N={},B&&B.autorange&&(N[B._name+".autorange"]=!0),j&&j.autorange&&(N[j._name+".autorange"]=!0)},moveFn:function(e,t){E.attr("transform","translate("+e+","+t+")");var n=c(C,k),r=n[0]+e,i=n[1]+t;U.call(o.Drawing.setPosition,r,i),N[w+".x"]=B?H.x+e/B._m:(m+e-x.l)/x.w,N[w+".y"]=j?H.y+t/j._m:1-(g+t-x.t)/x.h,R.attr({transform:"rotate("+I+","+r+","+i+")"})},doneFn:function(t){if(t){o.relayout(e,N);var n=document.querySelector(".js-notes-box-panel");n&&n.redraw(n.selectedObj)}}})}}};H.showarrow&&E(0,0);var S=o.Lib.rotationXYMatrix(I,F.x,F.y),T=o.Lib.apply2DTransform(S);if(e._context.editable){var N,C,k;o.Fx.dragElement({element:U.node(),prepFn:function(){N=Number(U.attr("x")),C=Number(U.attr("y")),k={}},moveFn:function(e,t){U.call(o.Drawing.setPosition,N+e,C+t);var n="pointer";if(H.showarrow)k[w+".ax"]=H.ax+e,k[w+".ay"]=H.ay+t,E(e,t);else{if(B)k[w+".x"]=H.x+e/B._m;else{var r=H._xsize/x.w,i=H.x+H._xshift/x.w-r/2;k[w+".x"]=o.Fx.dragAlign(i+e/x.w,r,0,1,H.xanchor)}if(j)k[w+".y"]=H.y+t/j._m;else{var s=H._ysize/x.h,u=H.y-H._yshift/x.h-s/2;k[w+".y"]=o.Fx.dragAlign(u-t/x.h,s,0,1,H.yanchor)}B&&j||(n=o.Fx.dragCursors(B?.5:k[w+".x"],j?.5:k[w+".y"],H.xanchor,H.yanchor))}var a=T(N,C),f=a[0]+e,l=a[1]+t;U.call(o.Drawing.setPosition,f,l),R.attr({transform:"rotate("+I+","+f+","+l+")"}),o.Fx.setCursor(U,n)},doneFn:function(t){if(o.Fx.setCursor(U),t){o.relayout(e,k);var n=document.querySelector(".js-notes-box-panel");n&&n.redraw(n.selectedObj)}}})}}var p,d=e.layout,v=e._fullLayout;if(!a(t)||-1===t){if(!t&&Array.isArray(i))return d.annotations=i,f.supplyLayoutDefaults(d,v),void f.drawAll(e);if("remove"===i)return delete d.annotations,v.annotations=[],void f.drawAll(e);if(n&&"add"!==i){for(p=0;p<v.annotations.length;p++)f.draw(e,p,n,i);return}t=v.annotations.length,v.annotations.push({})}if(!n&&i){if("remove"===i){for(v._infolayer.selectAll('.annotation[data-index="'+t+'"]').remove(),v.annotations.splice(t,1),d.annotations.splice(t,1),p=t;p<v.annotations.length;p++)v._infolayer.selectAll('.annotation[data-index="'+(p+1)+'"]').attr("data-index",String(p)),f.draw(e,p);return}if("add"===i||o.Lib.isPlainObject(i)){v.annotations.splice(t,0,{});var m=o.Lib.isPlainObject(i)?o.Lib.extendFlat({},i):{text:"New text"};for(d.annotations?d.annotations.splice(t,0,m):d.annotations=[m],p=v.annotations.length-1;p>t;p--)v._infolayer.selectAll('.annotation[data-index="'+(p-1)+'"]').attr("data-index",String(p)),f.draw(e,p)}}v._infolayer.selectAll('.annotation[data-index="'+t+'"]').remove();var g=d.annotations[t],y=v.annotations[t];if(g){var b={xref:g.xref,yref:g.yref},w={};"string"==typeof n&&n?w[n]=i:o.Lib.isPlainObject(n)&&(w=n);var E=Object.keys(w);for(p=0;p<E.length;p++){var S=E[p];o.Lib.nestedProperty(g,S).set(w[S])}var x=v._size,T=["x","y"];for(p=0;2>p;p++){var N=T[p];if(void 0===w[N]&&void 0!==g[N]){var C=o.Axes.getFromId(e,o.Axes.coerceRef(b,{},e,N)),k=o.Axes.getFromId(e,o.Axes.coerceRef(g,{},e,N)),L=g[N],A=y["_"+N+"type"];if(void 0!==w[N+"ref"]){var O="auto"===g[N+"anchor"],M="x"===N?x.w:x.h,_=(y["_"+N+"size"]||0)/(2*M);if(C&&k)L=(L-C.range[0])/(C.range[1]-C.range[0]),L=k.range[0]+L*(k.range[1]-k.range[0]);else if(C){if(L=(L-C.range[0])/(C.range[1]-C.range[0]),L=C.domain[0]+L*(C.domain[1]-C.domain[0]),O){var D=L+_,P=L-_;2/3>L+P?L=P:L+D>4/3&&(L=D)}}else k&&(O&&(1/3>L?L+=_:L>2/3&&(L-=_)),L=(L-k.domain[0])/(k.domain[1]-k.domain[0]),L=k.range[0]+L*(k.range[1]-k.range[0]))}k&&k===C&&A&&("log"===A&&"log"!==k.type?L=Math.pow(10,L):"log"!==A&&"log"===k.type&&(L=L>0?Math.log(L)/Math.LN10:void 0)),g[N]=L}}var H=r(g,v);v.annotations[t]=H;var B=o.Axes.getFromId(e,H.xref),j=o.Axes.getFromId(e,H.yref),F={x:0,y:0},I=+H.textangle||0,q=v._infolayer.append("g").classed("annotation",!0).attr("data-index",String(t)).style("opacity",H.opacity).on("click",function(){e._dragging=!1,e.emit("plotly_clickannotation",{index:t,annotation:g,fullAnnotation:H})}),R=q.append("g").classed("annotation-text-g",!0).attr("data-index",String(t)),U=R.append("svg").call(o.Drawing.setPosition,0,0),z=H.borderwidth,W=H.borderpad,X=z+W,V=U.append("rect").attr("class","bg").style("stroke-width",z+"px").call(o.Color.stroke,H.bordercolor).call(o.Color.fill,H.bgcolor),$=H.font,J=U.append("text").classed("annotation",!0).attr("data-unformatted",H.text).text(H.text);e._context.editable?J.call(o.util.makeEditable,U).call(c).on("edit",function(n){H.text=n,this.attr({"data-unformatted":H.text}),this.call(c);var r={};r["annotations["+t+"].text"]=H.text,B&&B.autorange&&(r[B._name+".autorange"]=!0),j&&j.autorange&&(r[j._name+".autorange"]=!0),o.relayout(e,r)}):J.call(c),R.attr({transform:"rotate("+I+","+F.x+","+F.y+")"}).call(o.Drawing.setPosition,F.x,F.y)}},f.arrowhead=function(e,t,n,r){a(r)||(r=1);var i=e.node(),s=f.ARROWPATHS[t||0];if(s){"string"==typeof n&&n||(n="end");var c,h,p,d,v=(o.Drawing.getPx(e,"stroke-width")||1)*r,m=e.style("stroke")||o.Color.defaultLine,g=e.style("stroke-opacity")||1,y=n.indexOf("start")>=0,b=n.indexOf("end")>=0,w=s.backoff*v;if("line"===i.nodeName){if(c={x:+e.attr("x1"),y:+e.attr("y1")},h={x:+e.attr("x2"),y:+e.attr("y2")},p=Math.atan2(c.y-h.y,c.x-h.x),d=p+Math.PI,w){var E=w*Math.cos(p),S=w*Math.sin(p);y&&(c.x-=E,c.y-=S,e.attr({x1:c.x,y1:c.y})),b&&(h.x+=E,h.y+=S,e.attr({x2:h.x,y2:h.y}))}}else if("path"===i.nodeName){var x=i.getTotalLength(),T="";if(y){var N=i.getPointAtLength(0),C=i.getPointAtLength(.1);p=Math.atan2(N.y-C.y,N.x-C.x),c=i.getPointAtLength(Math.min(w,x)),w&&(T="0px,"+w+"px,")}if(b){var k=i.getPointAtLength(x),L=i.getPointAtLength(x-.1);if(d=Math.atan2(k.y-L.y,k.x-L.x),h=i.getPointAtLength(Math.max(0,x-w)),w){var A=T?2*w:w;T+=x-A+"px,"+x+"px"}}else T&&(T+=x+"px");T&&e.style("stroke-dasharray",T)}var O=function(n,r){t>5&&(r=0),u.select(i.parentElement).append("path").attr({"class":e.attr("class"),d:s.path,transform:"translate("+n.x+","+n.y+")rotate("+180*r/Math.PI+")scale("+v+")"}).style({fill:m,opacity:g,"stroke-width":0})};y&&O(c,p),b&&O(h,d)}},f.calcAutorange=function(e){var t=e._fullLayout,n=t.annotations;if(n.length&&e._fullData.length){var r={};n.forEach(function(e){r[e.xref]=!0,r[e.yref]=!0});var s=o.Axes.list(e).filter(function(e){return e.autorange&&r[e._id]});if(s.length)return o.Lib.syncOrAsync([f.drawAll,i],e)}}},{"../../plotly":330,"./arrow_paths":279,"./attributes":280,d3:53,"fast-isnumeric":58}],282:[function(e,t,n){n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff"},{}],283:[function(e,t,n){"use strict";function r(e){if(s(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),i="a"===t.charAt(3)&&4===r.length;if(!i&&3!==r.length)return e;for(var o=0;o<r.length;o++){if(!r[o].length)return e;if(r[o]=Number(r[o]),!(r[o]>=0))return e;if(3===o)r[o]>1&&(r[o]=1);else if(r[o]>=1)return e}var u=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return i?"rgba("+u+", "+r[3]+")":"rgb("+u+")"}var i=e("tinycolor2"),s=e("fast-isnumeric"),o=t.exports={},u=e("./attributes");o.defaults=u.defaults,o.defaultLine=u.defaultLine,o.lightLine=u.lightLine,o.background=u.background,o.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},o.rgb=function(e){return o.tinyRGB(i(e))},o.opacity=function(e){return e?i(e).getAlpha():0},o.addOpacity=function(e,t){var n=i(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+t+")"},o.combine=function(e,t){var n=i(e).toRgb();if(1===n.a)return i(e).toRgbString();var r=i(t||o.background).toRgb(),s=1===r.a?r:{r:255*(1-r.a)+r.r*r.a,g:255*(1-r.a)+r.g*r.a,b:255*(1-r.a)+r.b*r.a},u={r:s.r*(1-n.a)+n.r*n.a,g:s.g*(1-n.a)+n.g*n.a,b:s.b*(1-n.a)+n.b*n.a};return i(u).toRgbString()},o.stroke=function(e,t){var n=i(t);e.style({stroke:o.tinyRGB(n),"stroke-opacity":n.getAlpha()})},o.fill=function(e,t){var n=i(t);e.style({fill:o.tinyRGB(n),"fill-opacity":n.getAlpha()})},o.clean=function(e){if(e&&"object"==typeof e){var t,n,i,s,u=Object.keys(e);for(t=0;t<u.length;t++)if(i=u[t],s=e[i],"color"===i.substr(i.length-5))if(Array.isArray(s))for(n=0;n<s.length;n++)s[n]=r(s[n]);else e[i]=r(s);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(s))for(n=0;n<s.length;n++)Array.isArray(s[n])&&(s[n][1]=r(s[n][1]));else if(Array.isArray(s)){var a=s[0];if(!Array.isArray(a)&&a&&"object"==typeof a)for(n=0;n<s.length;n++)o.clean(s[n])}else s&&"object"==typeof s&&o.clean(s)}}},{"./attributes":282,"fast-isnumeric":58,tinycolor2:213}],284:[function(e,t,n){var r=e("../../plots/cartesian/layout_attributes"),i=e("../../plots/font_attributes"),s=e("../../lib/extend").extendFlat;t.exports={thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:s({},r.ticks,{dflt:""}),ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:r.tickfont,tickangle:r.tickangle,tickformat:r.tickformat,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,exponentformat:r.exponentformat,showexponent:r.showexponent,title:{valType:"string",dflt:"Click to enter colorscale title"},titlefont:s({},i,{}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},{"../../lib/extend":310,"../../plots/cartesian/layout_attributes":335,"../../plots/font_attributes":336}],285:[function(e,t,n){"use strict";var r=e("../../plotly"),i=e("d3"),s=e("fast-isnumeric"),o=t.exports=function(e,t){function n(){function o(e,t){return r.Lib.coerce(B,j,r.Axes.layoutAttributes,e,t)}function u(){if(-1!==["top","bottom"].indexOf(s.titleside)){var t=z.select(".cbtitle"),n=t.select("text"),o=[-s.outlinewidth/2,s.outlinewidth/2],u=t.select(".h"+j._id+"title-math-group").node(),f=15.6;if(n.node()&&(f=1.3*parseInt(n.style("font-size"),10)),u?(X=r.Drawing.bBox(u).height,X>f&&(o[1]-=(X-f)/2)):n.node()&&!n.classed("js-placeholder")&&(X=r.Drawing.bBox(t.node()).height),X){if(X+=5,"top"===s.titleside)j.domain[1]-=X/l._size.h,o[1]*=-1;else{j.domain[0]+=X/l._size.h;var c=Math.max(1,n.selectAll("tspan.line").size());o[1]+=(1-c)*f}t.attr("transform","translate("+o+")"),j.setScale()}}z.selectAll(".cbfills,.cblines,.cbaxis").attr("transform","translate(0,"+Math.round(l._size.h*(1-j.domain[1]))+")");var g=z.select(".cbfills").selectAll("rect.cbfill").data(d);g.enter().append("rect").classed("cbfill",!0).style("stroke","none"),g.exit().remove(),g.each(function(e,t){var n=[0===t?h[0]:(d[t]+d[t-1])/2,t===d.length-1?h[1]:(d[t]+d[t+1])/2].map(j.c2p).map(Math.round);t!==d.length-1&&(n[1]+=n[1]>n[0]?1:-1),i.select(this).attr({x:M,width:Math.max(T,2),y:i.min(n),height:Math.max(i.max(n)-i.min(n),2)}).style("fill",m(e))});var y=z.select(".cblines").selectAll("path.cbline").data(s.line.color&&s.line.width?p:[]);return y.enter().append("path").classed("cbline",!0),y.exit().remove(),y.each(function(e){i.select(this).attr("d","M"+M+","+(Math.round(j.c2p(e))+s.line.width/2%1)+"h"+T).call(r.Drawing.lineGroupStyle,s.line.width,v(e),s.line.dash)}),j._axislayer.selectAll("g."+j._id+"tick,path").remove(),j._pos=M+T+(s.outlinewidth||0)/2-("outside"===s.ticks?1:0),j.side="right",r.Axes.doTicks(e,j)}function f(){var n=T+s.outlinewidth/2+r.Drawing.bBox(j._axislayer.node()).width;if(E=W.select("text"),E.node()&&!E.classed("js-placeholder")){var i,o=W.select(".h"+j._id+"title-math-group").node();i=o&&-1!==["top","bottom"].indexOf(s.titleside)?r.Drawing.bBox(o).width:r.Drawing.bBox(W.node()).right-M-l._size.l,n=Math.max(n,i)}var u=2*s.xpad+n+s.borderwidth+s.outlinewidth/2,f=P-H;z.select(".cbbg").attr({x:M-s.xpad-(s.borderwidth+s.outlinewidth)/2,y:H-A,width:Math.max(u,2),height:Math.max(f+2*A,2)}).call(r.Color.fill,s.bgcolor).call(r.Color.stroke,s.bordercolor).style({"stroke-width":s.borderwidth}),z.selectAll(".cboutline").attr({x:M,y:H+s.ypad+("top"===s.titleside?X:0),width:Math.max(T,2),height:Math.max(f-2*s.ypad-X,2)}).call(r.Color.stroke,s.outlinecolor).style({fill:"None","stroke-width":s.outlinewidth});var c=({center:.5,right:1}[s.xanchor]||0)*u;z.attr("transform","translate("+(l._size.l-c)+","+l._size.t+")"),r.Plots.autoMargin(e,t,{x:s.x,y:s.y,l:u*({right:1,center:.5}[s.xanchor]||0),r:u*({left:1,center:.5}[s.xanchor]||0),t:f*({bottom:1,middle:.5}[s.yanchor]||0),b:f*({top:1,middle:.5}[s.yanchor]||0)})}var l=e._fullLayout;if("function"!=typeof s.fillcolor&&"function"!=typeof s.line.color)return void l._infolayer.selectAll("g."+t).remove();var c,h=i.extent(("function"==typeof s.fillcolor?s.fillcolor:s.line.color).domain()),p=[],d=[],v="function"==typeof s.line.color?s.line.color:function(){return s.line.color},m="function"==typeof s.fillcolor?s.fillcolor:function(){return s.fillcolor},g=s.levels.end+s.levels.size/100,y=s.levels.size,b=1.001*h[0]-.001*h[1],w=1.001*h[1]-.001*h[0];for(c=s.levels.start;0>(c-g)*y;c+=y)c>b&&w>c&&p.push(c);if("function"==typeof s.fillcolor)if(s.filllevels)for(g=s.filllevels.end+s.filllevels.size/100,y=s.filllevels.size,c=s.filllevels.start;0>(c-g)*y;c+=y)c>h[0]&&c<h[1]&&d.push(c);else d=p.map(function(e){return e-s.levels.size/2}),d.push(d[d.length-1]+s.levels.size);else s.fillcolor&&"string"==typeof s.fillcolor&&(d=[0]);s.levels.size<0&&(p.reverse(),d.reverse());var E,S=l.height-l.margin.t-l.margin.b,x=l.width-l.margin.l-l.margin.r,T=Math.round(s.thickness*("fraction"===s.thicknessmode?x:1)),N=T/l._size.w,C=Math.round(s.len*("fraction"===s.lenmode?S:1)),k=C/l._size.h,L=s.xpad/l._size.w,A=(s.borderwidth+s.outlinewidth)/2,O=s.ypad/l._size.h,M=Math.round(s.x*l._size.w+s.xpad),_=s.x-N*({middle:.5,right:1}[s.xanchor]||0),D=s.y+k*(({top:-0.5,bottom:.5}[s.yanchor]||0)-.5),P=Math.round(l._size.h*(1-D)),H=P-C,B={type:"linear",range:h,tickmode:s.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:s.ticks,ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,showticklabels:s.showticklabels,tickfont:s.tickfont,tickangle:s.tickangle,tickformat:s.tickformat,exponentformat:s.exponentformat,showexponent:s.showexponent,showtickprefix:s.showtickprefix,tickprefix:s.tickprefix,showticksuffix:s.showticksuffix,ticksuffix:s.ticksuffix,title:s.title,titlefont:s.titlefont,anchor:"free",position:1},j={},F={letter:"y",font:l.font,noHover:!0};if(r.Axes.handleAxisDefaults(B,j,o,F),r.Axes.handleAxisPositioningDefaults(B,j,o,F),j._id="y"+t,j._td=e,j.position=s.x+L+N,n.axis=j,-1!==["top","bottom"].indexOf(s.titleside)&&(j.titleside=s.titleside,j.titlex=s.x+L,j.titley=D+("top"===s.titleside?k-O:O)),s.line.color&&"auto"===s.tickmode){j.tickmode="linear",j.tick0=s.levels.start;var I=s.levels.size,q=r.Lib.constrain((P-H)/50,4,15)+1,R=(h[1]-h[0])/((s.nticks||q)*I);if(R>1){var U=Math.pow(10,Math.floor(Math.log(R)/Math.LN10));I*=U*r.Lib.roundUp(R/U,[2,5,10]),(Math.abs(s.levels.start)/s.levels.size+1e-6)%1<2e-6&&(j.tick0=0)}j.dtick=I}j.domain=[D+O,D+k-O],j.setScale();var z=l._infolayer.selectAll("g."+t).data([0]);z.enter().append("g").classed(t,!0).each(function(){var e=i.select(this);e.append("rect").classed("cbbg",!0),e.append("g").classed("cbfills",!0),e.append("g").classed("cblines",!0),e.append("g").classed("cbaxis",!0).classed("crisp",!0),e.append("g").classed("cbtitleunshift",!0).append("g").classed("cbtitle",!0),e.append("rect").classed("cboutline",!0)}),z.attr("transform","translate("+Math.round(l._size.l)+","+Math.round(l._size.t)+")");var W=z.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(l._size.l)+",-"+Math.round(l._size.t)+")");j._axislayer=z.select(".cbaxis");var X=0;-1!==["top","bottom"].indexOf(s.titleside)&&r.Titles.draw(e,j._id+"title");var V=r.Lib.syncOrAsync([r.Plots.previousPromises,u,r.Plots.previousPromises,f],e);if(V&&V.then&&(e._promises||[]).push(V),e._context.editable){var $,J,K;r.Fx.dragElement({element:z.node(),prepFn:function(){$=z.attr("transform"),r.Fx.setCursor(z)},moveFn:function(t,n){var i=e._fullLayout._size;z.attr("transform",$+" translate("+t+","+n+")"),J=r.Fx.dragAlign(_+t/i.w,N,0,1,s.xanchor),K=r.Fx.dragAlign(D-n/i.h,k,0,1,s.yanchor);var o=r.Fx.dragCursors(J,K,s.xanchor,s.yanchor);r.Fx.setCursor(z,o)},doneFn:function(n){if(r.Fx.setCursor(z),n&&void 0!==J&&void 0!==K){var i,s=t.substr(2);e._fullData.some(function(e){return e.uid===s?(i=e.index,!0):void 0}),r.restyle(e,{"colorbar.x":J,"colorbar.y":K},i)}}})}return V}var s={};return Object.keys(o.attributes).forEach(function(e){s[e]=null}),s.fillcolor=null,s.line={color:null,width:null,dash:null},s.levels={start:null,end:null,size:null},s.filllevels=null,Object.keys(s).forEach(function(e){n[e]=function(t){return arguments.length?(s[e]=r.Lib.isPlainObject(s[e])?r.Lib.extendFlat(s[e],t):t,n):s[e]}}),n.options=function(e){return Object.keys(e).forEach(function(t){"function"==typeof n[t]&&n[t](e[t])}),n},n._opts=s,n};o.attributes=e("./attributes"),o.supplyDefaults=function(e,t,n){function i(e,t){return r.Lib.coerce(u,s,o.attributes,e,t)}var s=t.colorbar={},u=e.colorbar||{},a=i("thicknessmode");i("thickness","fraction"===a?30/(n.width-n.margin.l-n.margin.r):30);var f=i("lenmode");i("len","fraction"===f?1:n.height-n.margin.t-n.margin.b),i("x"),i("xanchor"),i("xpad"),i("y"),i("yanchor"),i("ypad"),r.Lib.noneOrAll(u,s,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor"),r.Axes.handleTickValueDefaults(u,s,i,"linear"),r.Axes.handleTickDefaults(u,s,i,"linear",{outerTicks:!1,font:n.font,noHover:!0}),i("title"),r.Lib.coerceFont(i,"titlefont",n.font),i("titleside")},o.traceColorbar=function(e,t){var n=t[0].trace,u="cb"+n.uid,f=r.Colorscale.getScale(n.colorscale),l=n.zmin,c=n.zmax;if(s(l)||(l=r.Lib.aggNums(Math.min,null,n.z)),s(c)||(c=r.Lib.aggNums(Math.max,null,n.z)),e._fullLayout._infolayer.selectAll("."+u).remove(),!n.showscale)return void r.Plots.autoMargin(e,u);var h=t[0].t.cb=o(e,u);h.fillcolor(i.scale.linear().domain(f.map(function(e){return l+e[0]*(c-l)})).range(f.map(function(e){return e[1]}))).filllevels({start:l,end:c,size:(c-l)/254}).options(n.colorbar)(),r.Lib.markTime("done colorbar")}},{"../../plotly":330,"./attributes":284,d3:53,"fast-isnumeric":58}],286:[function(e,t,n){t.exports={zauto:{valType:"boolean",dflt:!0},zmin:{valType:"number",dflt:null},zmax:{valType:"number",dflt:null},colorscale:{valType:"colorscale"},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1},showscale:{valType:"boolean",dflt:!0},_deprecated:{scl:{valType:"colorscale"},reversescl:{valType:"boolean"}}}},{}],287:[function(e,t,n){"use strict";function r(e){var t,n=!0,r=0;if(Array.isArray(e)){if(0!==+e[0][0]||1!==+e[e.length-1][0])return!1;for(var i=0;i<e.length;i++){if(t=e[i],2!==t.length||+t[0]<r||!o(t[1]).isValid()){n=!1;break}r=+t[0]}return n}return!1}var i=e("../../plotly"),s=e("d3"),o=e("tinycolor2"),u=e("fast-isnumeric"),a=t.exports={};a.scales=e("./scales"),a.defaultScale=a.scales.RdBu,a.attributes=e("./attributes"),a.isValidScale=function(e){return void 0!==a.scales[e]?!0:r(e)},a.getScale=function(e,t){function n(){try{e=a.scales[e]||JSON.parse(e)}catch(n){e=t}}return t||(t=a.defaultScale),e?("string"==typeof e&&(n(),"string"==typeof e&&n()),r(e)?e:t):t},a.flipScale=function(e){for(var t,n=e.length,r=new Array(n),i=n-1,s=0;i>=0;i--,s++)t=e[i],r[s]=[1-t[0],t[1]];return r},a.hasColorscale=function(e,t){var n=t?i.Lib.nestedProperty(e,t).get()||{}:e,r=n.color,s=!1;if(Array.isArray(r))for(var o=0;o<r.length;o++)if(u(r[o])){s=!0;break}return"object"==typeof n&&null!==n&&(s||n.showscale===!0||u(n.cmin)&&u(n.cmax)||a.isValidScale(n.colorscale)||"object"==typeof n.colorbar&&null!==n.colorbar)},a.hasColorbar=function(e){return"object"==typeof e.colorbar&&null!==e.colorbar},a.handleDefaults=function(e,t,n,r,s){var o,f,c,h,p,d,v=s.prefix,m=s.cLetter,g=v.slice(0,v.length-1),y=v?i.Lib.nestedProperty(e,g).get()||{}:e,b=v?i.Lib.nestedProperty(t,g).get()||{}:t,w=y[m+"min"],E=y[m+"max"],S=y.colorscale;o=u(w)&&u(E)&&E>w,r(v+m+"auto",!o),r(v+m+"min"),r(v+m+"max"),void 0!==S&&(f=!a.isValidScale(S)),r(v+"autocolorscale",f),h=r(v+"colorscale"),p=r(v+"reversescale"),p&&(b.colorscale=a.flipScale(h)),"marker.line."!==v&&(v&&(c=a.hasColorbar(y)),d=r(v+"showscale",c),d&&i.Colorbar.supplyDefaults(y,b,n))},a.calc=function(e,t,n,r){var s,o;n?(s=i.Lib.nestedProperty(e,n).get(),o=i.Lib.nestedProperty(e._input,n).get()):(s=e,o=e._input);var u=s[r+"auto"],f=s[r+"min"],c=s[r+"max"],h=s.colorscale;(u!==!1||void 0===f)&&(f=i.Lib.aggNums(Math.min,null,t)),(u!==!1||void 0===c)&&(c=i.Lib.aggNums(Math.max,null,t)),f===c&&(f-=.5,c+=.5),s[r+"min"]=f,s[r+"max"]=c,o[r+"min"]=f,o[r+"max"]=c,s.autocolorscale&&(h=0>f*c?a.scales.RdBu:f>=0?a.scales.Reds:a.scales.Blues,o.colorscale=h,s.reversescale&&(h=a.flipScale(h)),s.colorscale=h)},a.makeScaleFunction=function(e,t,n){for(var r,a=e.length,f=new Array(a),l=new Array(a),c=0;a>c;c++)r=e[c],f[c]=t+r[0]*(n-t),l[c]=r[1];var h=s.scale.linear().domain(f).interpolate(s.interpolateRgb).range(l);return function(e){return u(e)?h(e):o(e).isValid()?e:i.Color.defaultLine}}},{"../../plotly":330,"./attributes":286,"./scales":288,d3:53,"fast-isnumeric":58,tinycolor2:213}],288:[function(e,t,n){t.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YIGnBu:[[0,"rgb(8, 29, 88)"],[.125,"rgb(37, 52, 148)"],[.25,"rgb(34, 94, 168)"],[.375,"rgb(29, 145, 192)"],[.5,"rgb(65, 182, 196)"],[.625,"rgb(127, 205, 187)"],[.75,"rgb(199, 233, 180)"],[.875,"rgb(237, 248, 217)"],[1,"rgb(255, 255, 217)"]],Greens:[[0,"rgb(0, 68, 27)"],[.125,"rgb(0, 109, 44)"],[.25,"rgb(35, 139, 69)"],[.375,"rgb(65, 171, 93)"],[.5,"rgb(116, 196, 118)"],[.625,"rgb(161, 217, 155)"],[.75,"rgb(199, 233, 192)"],[.875,"rgb(229, 245, 224)"],[1,"rgb(247, 252, 245)"]],YIOrRd:[[0,"rgb(128, 0, 38)"],[.125,"rgb(189, 0, 38)"],[.25,"rgb(227, 26, 28)"],[.375,"rgb(252, 78, 42)"],[.5,"rgb(253, 141, 60)"],[.625,"rgb(254, 178, 76)"],[.75,"rgb(254, 217, 118)"],[.875,"rgb(255, 237, 160)"],[1,"rgb(255, 255, 204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5, 10, 172)"],[.35,"rgb(106, 137, 247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220, 170, 132)"],[.7,"rgb(230, 145, 90)"],[1,"rgb(178, 10, 28)"]],Reds:[[0,"rgb(220, 220, 220)"],[.2,"rgb(245, 195, 157)"],[.4,"rgb(245, 160, 105)"],[1,"rgb(178, 10, 28)"]],Blues:[[0,"rgb(5, 10, 172)"],[.35,"rgb(40, 60, 190)"],[.5,"rgb(70, 100, 245)"],[.6,"rgb(90, 120, 245)"],[.7,"rgb(106, 137, 247)"],[1,"rgb(220, 220, 220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0, 0, 200)"],[.25,"rgb(0, 25, 255)"],[.375,"rgb(0, 152, 255)"],[.5,"rgb(44, 255, 150)"],[.625,"rgb(151, 255, 0)"],[.75,"rgb(255, 234, 0)"],[.875,"rgb(255, 111, 0)"],[1,"rgb(255, 0, 0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]]}},{}],289:[function(e,t,n){"use strict";function r(e,t,n,r){var i=e[0]-t[0],o=e[1]-t[1],u=n[0]-t[0],a=n[1]-t[1],f=Math.pow(i*i+o*o,p/2),l=Math.pow(u*u+a*a,p/2),c=(l*l*i-f*f*u)*r,h=(l*l*o-f*f*a)*r,d=3*l*(f+l),v=3*f*(f+l);return[[s.round(t[0]+(d&&c/d),2),s.round(t[1]+(d&&h/d),2)],[s.round(t[0]-(v&&c/v),2),s.round(t[1]-(v&&h/v),2)]]}var i=e("../../plotly"),s=e("d3"),o=e("fast-isnumeric"),u=t.exports={};u.font=function(e,t,n,r){t&&t.family&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(i.Color.fill,r)},u.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},u.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},u.setRect=function(e,t,n,r,i){e.call(u.setPosition,t,n).call(u.setSize,r,i)},u.translatePoints=function(e,t,n){e.each(function(e){var r=e.xp||t.c2p(e.x),i=e.yp||n.c2p(e.y),u=s.select(this);o(r)&&o(i)?"text"===this.nodeName?u.attr("x",r).attr("y",i):u.attr("transform","translate("+r+","+i+")"):u.remove()})},u.getPx=function(e,t){return Number(e.style(t).replace(/px$/,""))},u.crispRound=function(e,t,n){return t&&o(t)?e._context.staticPlot?t:1>t?1:Math.round(t):n||0},u.lineGroupStyle=function(e,t,n,r){e.style("fill","none").each(function(e){var o=(((e||[])[0]||{}).trace||{}).line||{},a=t||o.width||0,f=r||o.dash||"";s.select(this).call(i.Color.stroke,n||o.color).call(u.dashLine,f,a)})},u.dashLine=function(e,t,n){var r=Math.max(n,3);"solid"===t?t="":"dot"===t?t=r+"px,"+r+"px":"dash"===t?t=3*r+"px,"+3*r+"px":"longdash"===t?t=5*r+"px,"+5*r+"px":"dashdot"===t?t=3*r+"px,"+r+"px,"+r+"px,"+r+"px":"longdashdot"===t&&(t=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},u.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(t){var n=s.select(this);try{n.call(i.Color.fill,t[0].trace.fillcolor)}catch(r){console.log(r,e),n.remove()}})};var a=e("./symbol_defs");u.symbolNames=[],u.symbolFuncs=[],u.symbolNeedLines={},u.symbolNoDot={},u.symbolList=[],Object.keys(a).forEach(function(e){var t=a[e];u.symbolList=u.symbolList.concat([t.n,e,t.n+100,e+"-open"]),u.symbolNames[t.n]=e,u.symbolFuncs[t.n]=t.f,t.needLine&&(u.symbolNeedLines[t.n]=!0),t.noDot?u.symbolNoDot[t.n]=!0:u.symbolList=u.symbolList.concat([t.n+200,e+"-dot",t.n+300,e+"-open-dot"])});var f=u.symbolNames.length,l="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";u.symbolNumber=function(e){if("string"==typeof e){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),e=u.symbolNames.indexOf(e),e>=0&&(e+=t)}return e%100>=f||e>=400?0:Math.floor(Math.max(e,0))},u.pointStyle=function(e,t){if(e.size()){var n=t.marker,r=n.line;if(i.Plots.traceIs(t,"symbols")){var o=i.Scatter.getBubbleSizeFn(t);e.attr("d",function(e){var r;r="various"===e.ms||"various"===n.size?3:i.Scatter.isBubble(t)?o(e.ms):(n.size||6)/2,e.mrc=r;var s=u.symbolNumber(e.mx||n.symbol)||0,a=s%100;return e.om=s%200>=100,u.symbolFuncs[a](r)+(s>=200?l:"")}).style("opacity",function(e){return(e.mo+1||n.opacity+1)-1})}var a=(t._input||{}).marker||{},f=u.tryColorscale(n,a,""),c=u.tryColorscale(n,a,"line.");e.each(function(e){var t,o,u;e.so?(u=r.outlierwidth,o=r.outliercolor,t=n.outliercolor):(u=(e.mlw+1||r.width+1||(e.trace?e.trace.marker.line.width:0)+1)-1,o="mlc"in e?e.mlcc=c(e.mlc):Array.isArray(r.color)?i.Color.defaultLine:r.color,t="mc"in e?e.mcc=f(e.mc):Array.isArray(n.color)?i.Color.defaultLine:n.color||"rgba(0,0,0,0)");var a=s.select(this);e.om?a.call(i.Color.stroke,t).style({"stroke-width":(u||1)+"px",fill:"none"}):(a.style("stroke-width",u+"px").call(i.Color.fill,t),u&&a.call(i.Color.stroke,o))})}},u.tryColorscale=function(e,t,n){var r=i.Lib.nestedProperty(e,n+"color").get(),s=i.Lib.nestedProperty(e,n+"colorscale").get(),u=i.Lib.nestedProperty(e,n+"cauto").get(),a=i.Lib.nestedProperty(e,n+"cmin"),f=i.Lib.nestedProperty(e,n+"cmax"),l=a.get(),c=f.get();return s&&Array.isArray(r)?(!u&&o(l)&&o(c)||(l=1/0,c=-1/0,r.forEach(function(e){o(e)&&(l>e&&(l=+e),e>c&&(c=+e))}),l>c&&(l=0,c=1),a.set(l),f.set(c),i.Lib.nestedProperty(t,n+"cmin").set(l),i.Lib.nestedProperty(t,n+"cmax").set(c)),i.Colorscale.makeScaleFunction(s,l,c)):i.Lib.identity};var c={start:1,end:-1,middle:0,bottom:1,top:-1},h=1.3;u.textPointStyle=function(e,t){e.each(function(e){var n=s.select(this);if(!e.tx&&!t.text)return void n.remove();var r=e.tp||t.textposition,a=-1!==r.indexOf("top")?"top":-1!==r.indexOf("bottom")?"bottom":"middle",f=-1!==r.indexOf("left")?"end":-1!==r.indexOf("right")?"start":"middle",l=e.ts||t.textfont.size,p=e.mrc?e.mrc/.8+1:0;l=o(l)&&l>0?l:0,n.call(u.font,e.tf||t.textfont.family,l,e.tc||t.textfont.color).attr("text-anchor",f).text(e.tx||t.text).call(i.util.convertToTspans);var d=s.select(this.parentNode),v=n.selectAll("tspan.line"),m=((v[0].length||1)-1)*h+1,g=c[f]*p,y=.75*l+c[a]*p+(c[a]-1)*m*l/2;d.attr("transform","translate("+g+","+y+")"),m>1&&v.attr({x:n.attr("x"),y:n.attr("y")})})};var p=.5;u.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var n,i="M"+e[0],s=[];for(n=1;n<e.length-1;n++)s.push(r(e[n-1],e[n],e[n+1],t));for(i+="Q"+s[0][0]+" "+e[1],n=2;n<e.length-1;n++)i+="C"+s[n-2][1]+" "+s[n-1][0]+" "+e[n];return i+="Q"+s[e.length-3][1]+" "+e[e.length-1]},u.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var n,i="M"+e[0],s=e.length-1,o=[r(e[s],e[0],e[1],t)];for(n=1;s>n;n++)o.push(r(e[n-1],e[n],e[n+1],t));for(o.push(r(e[s-1],e[s],e[0],t)),n=1;s>=n;n++)i+="C"+o[n-1][1]+" "+o[n][0]+" "+e[n];return i+="C"+o[s][1]+" "+o[0][0]+" "+e[0]+"Z"};var d={hv:function(e,t){return"H"+s.round(t[0],2)+"V"+s.round(t[1],2)},vh:function(e,t){return"V"+s.round(t[1],2)+"H"+s.round(t[0],2)},hvh:function(e,t){return"H"+s.round((e[0]+t[0])/2,2)+"V"+s.round(t[1],2)+"H"+s.round(t[0],2)},vhv:function(e,t){return"V"+s.round((e[1]+t[1])/2,2)+"H"+s.round(t[0],2)+"V"+s.round(t[1],2)}},v=function(e,t){return"L"+s.round(t[0],2)+","+s.round(t[1],2)};u.steps=function(e){var t=d[e]||v;return function(e){for(var n="M"+s.round(e[0][0],2)+","+s.round(e[0][1],2),r=1;r<e.length;r++)n+=t(e[r-1],e[r]);return n}},u.makeTester=function(e){var t=s.select("body").selectAll("#js-plotly-tester").data([0]);t.enter().append("svg").attr({id:"js-plotly-tester",xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink"}).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px"});var n=t.selectAll(".js-reference-point").data([0]);n.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"}),t.node()._cache||(t.node()._cache={}),e._tester=t,e._testref=n};var m=[],g=1e4;u.bBox=function(e){var t=e.attributes["data-bb"];if(t&&t.value)return i.Lib.extendFlat({},m[t.value]);var n=s.select("#js-plotly-tester"),r=n.node(),o=e.cloneNode(!0);r.appendChild(o),s.select(o).attr({x:0,y:0,transform:""});var u=o.getBoundingClientRect(),a=n.select(".js-reference-point").node().getBoundingClientRect();r.removeChild(o);var f={height:u.height,width:u.width,left:u.left-a.left,top:u.top-a.top,right:u.right-a.left,bottom:u.bottom-a.top};return m.length>=g&&(s.selectAll("[data-bb]").attr("data-bb",null),m=[]),e.setAttribute("data-bb",m.length),m.push(f),i.Lib.extendFlat({},f)},u.setClipUrl=function(e,t){if(!t)return void e.attr("clip-path",null);var n="#"+t,r=s.select("base");r.size()&&r.attr("href")&&(n=window.location.href+n),e.attr("clip-path","url("+n+")")}},{"../../plotly":330,"./symbol_defs":290,d3:53,"fast-isnumeric":58}],290:[function(e,t,n){"use strict";var r=e("d3");t.exports={circle:{n:0,f:function(e){var t=r.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=r.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=r.round(.4*e,2),n=r.round(1.2*e,2);return"M"+n+","+t+"H"+t+"V"+n+"H-"+t+"V"+t+"H-"+n+"V-"+t+"H-"+t+"V-"+n+"H"+t+"V-"+t+"H"+n+"Z"}},x:{n:4,f:function(e){var t=r.round(.8*e/Math.sqrt(2),2),n="l"+t+","+t,i="l"+t+",-"+t,s="l-"+t+",-"+t,o="l-"+t+","+t;return"M0,"+t+n+i+s+i+s+o+s+o+n+o+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=r.round(2*e/Math.sqrt(3),2),n=r.round(e/2,2),i=r.round(e,2);return"M-"+t+","+n+"H"+t+"L0,-"+i+"Z"}},"triangle-down":{n:6,f:function(e){var t=r.round(2*e/Math.sqrt(3),2),n=r.round(e/2,2),i=r.round(e,2);return"M-"+t+",-"+n+"H"+t+"L0,"+i+"Z"}},"triangle-left":{n:7,f:function(e){var t=r.round(2*e/Math.sqrt(3),2),n=r.round(e/2,2),i=r.round(e,2);return"M"+n+",-"+t+"V"+t+"L-"+i+",0Z"}},"triangle-right":{n:8,f:function(e){var t=r.round(2*e/Math.sqrt(3),2),n=r.round(e/2,2),i=r.round(e,2);return"M-"+n+",-"+t+"V"+t+"L"+i+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M-"+n+",-"+t+"H"+t+"V"+n+"Z"}},"triangle-se":{n:10,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M"+t+",-"+n+"V"+t+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M"+n+","+t+"H-"+t+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M-"+t+","+n+"V-"+t+"H"+n+"Z"}},pentagon:{n:13,f:function(e){var t=r.round(.951*e,2),n=r.round(.588*e,2),i=r.round(-e,2),s=r.round(e*-0.309,2),o=r.round(.809*e,2);return"M"+t+","+s+"L"+n+","+o+"H-"+n+"L-"+t+","+s+"L0,"+i+"Z"}},hexagon:{n:14,f:function(e){var t=r.round(e,2),n=r.round(e/2,2),i=r.round(e*Math.sqrt(3)/2,2);return"M"+i+",-"+n+"V"+n+"L0,"+t+"L-"+i+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=r.round(e,2),n=r.round(e/2,2),i=r.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+i+"H"+n+"L"+t+",0L"+n+",-"+i+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=r.round(.924*e,2),n=r.round(.383*e,2);return"M-"+n+",-"+t+"H"+n+"L"+t+",-"+n+"V"+n+"L"+n+","+t+"H-"+n+"L-"+t+","+n+"V-"+n+"Z"}},star:{n:17,f:function(e){var t=1.4*e,n=r.round(.225*t,2),i=r.round(.951*t,2),s=r.round(.363*t,2),o=r.round(.588*t,2),u=r.round(-t,2),a=r.round(t*-0.309,2),f=r.round(.118*t,2),l=r.round(.809*t,2),c=r.round(.382*t,2);return"M"+n+","+a+"H"+i+"L"+s+","+f+"L"+o+","+l+"L0,"+c+"L-"+o+","+l+"L-"+s+","+f+"L-"+i+","+a+"H-"+n+"L0,"+u+"Z"}},hexagram:{n:18,f:function(e){var t=r.round(.66*e,2),n=r.round(.38*e,2),i=r.round(.76*e,2);return"M-"+i+",0l-"+n+",-"+t+"h"+i+"l"+n+",-"+t+"l"+n+","+t+"h"+i+"l-"+n+","+t+"l"+n+","+t+"h-"+i+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+i+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=r.round(e*Math.sqrt(3)*.8,2),n=r.round(.8*e,2),i=r.round(1.6*e,2),s=r.round(4*e,2),o="A "+s+","+s+" 0 0 1 ";return"M-"+t+","+n+o+t+","+n+o+"0,-"+i+o+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=r.round(e*Math.sqrt(3)*.8,2),n=r.round(.8*e,2),i=r.round(1.6*e,2),s=r.round(4*e,2),o="A "+s+","+s+" 0 0 1 ";return"M"+t+",-"+n+o+"-"+t+",-"+n+o+"0,"+i+o+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=r.round(1.1*e,2),n=r.round(2*e,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+t+",-"+t+i+"-"+t+","+t+i+t+","+t+i+t+",-"+t+i+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=r.round(1.4*e,2),n=r.round(1.9*e,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+t+",0"+i+"0,"+t+i+t+",0"+i+"0,-"+t+i+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=r.round(.7*e,2),n=r.round(1.4*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=r.round(1.4*e,2),n=r.round(.7*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:!0},bowtie:{n:26,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){var t=r.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=r.round(e,2),n=r.round(e/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){var t=r.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){var t=r.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=r.round(1.3*e,2),n=r.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){var t=r.round(1.4*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:!0,noDot:!0},"x-thin":{n:34,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0},asterisk:{n:35,f:function(e){var t=r.round(1.2*e,2),n=r.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0},hash:{n:36,f:function(e){var t=r.round(e/2,2),n=r.round(e,2);return"M"+t+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+t+"H-"+n+"m0,-"+n+"H"+n},needLine:!0},"y-up":{n:37,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),i=r.round(.8*e,2);return"M-"+t+","+i+"L0,0M"+t+","+i+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0},"y-down":{n:38,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),i=r.round(.8*e,2);return"M-"+t+",-"+i+"L0,0M"+t+",-"+i+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0},"y-left":{n:39,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),i=r.round(.8*e,2);return"M"+i+","+t+"L0,0M"+i+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0},"y-right":{n:40,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),i=r.round(.8*e,2);return"M-"+i+","+t+"L0,0M-"+i+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0},"line-ew":{n:41,f:function(e){var t=r.round(1.4*e,2);return"M"+t+",0H-"+t},needLine:!0,noDot:!0},"line-ns":{n:42,f:function(e){var t=r.round(1.4*e,2);return"M0,"+t+"V-"+t},needLine:!0,noDot:!0},"line-ne":{n:43,f:function(e){var t=r.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0},"line-nw":{n:44,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:!0,noDot:!0}}},{d3:53}],291:[function(e,t,n){t.exports={visible:{valType:"boolean"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"]},symmetric:{valType:"boolean"},array:{valType:"data_array"},arrayminus:{valType:"data_array"},value:{valType:"number",min:0,dflt:10},valueminus:{valType:"number",min:0,dflt:10},traceref:{valType:"integer",min:0,dflt:0},tracerefminus:{valType:"integer",min:0,dflt:0},copy_ystyle:{valType:"boolean"},copy_zstyle:{valType:"boolean"},color:{valType:"color"},thickness:{valType:"number",min:0,dflt:2},width:{valType:"number",min:0},_deprecated:{opacity:{valType:"number"}}}},{}],292:[function(e,t,n){"use strict";function r(e,t,n){return"percent"===e?Math.abs(t*n/100):"constant"===e?Math.abs(n):"sqrt"===e?Math.sqrt(Math.abs(t)):0}function i(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};return void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),u(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0))),void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),u(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0))),r}var s=e("../../plotly"),o=e("d3"),u=e("fast-isnumeric"),a=t.exports={};a.attributes=e("./attributes"),a.supplyDefaults=function(e,t,n,r){function i(e,t){return s.Lib.coerce(c,f,a.attributes,e,t)}var o="error_"+r.axis,f=t[o]={},c=e[o]||{},h=i("visible","array"in c||"value"in c);if(h){var p=i("type","array"in c?"data":"percent"),d=!0;if("sqrt"!==p&&(d=i("symmetric",!(("data"===p?"arrayminus":"valueminus")in c))),"data"===p){var v=i("array");if(v||(f.array=[]),i("traceref"),!d){var m=i("arrayminus");m||(f.arrayminus=[]),i("tracerefminus")}}else("percent"===p||"constant"===p)&&(i("value"),d||i("valueminus"));var g="copy_"+r.inherit+"style";if(r.inherit){var y=t["error_"+r.inherit];(y||{}).visible&&i(g,!(c.color||u(c.thickness)||u(c.width)))}r.inherit&&f[g]||(i("color",n),i("thickness"),i("width",s.Plots.traceIs(t,"gl3d")?0:4))}},a.pushRef2GDC=function(e,t,n,r){function i(t){var n=e.data[t][a];n["tracerefminus"===f?"arrayminus":"array"]=c}var s,o=!1,u=n.split("."),a=u[0],f=u[1],l=a.charAt(a.length-1);"type"===f?("various"===t&&(o=!0,t=0),s=Number(e.calcdata[Number(t)][0].trace["error_"+l].traceref)||0):("traceref"===f||"tracerefminus"===f)&&("various"===t&&(o=!0),s=Number(r)||0);var c=e.data[s][l].map(Number);if(o)for(var h=0;h<e.data.length;h++)i(h);else i(Number(t))},a.calc=function(e){(e.calcdata||[]).forEach(function(t){var n=t[0].trace;if(s.Plots.traceIs(n,"errorBarsOK")){var i=n.error_x||{},o=n.error_y||{},a=s.Axes.getFromId(e,n.xaxis),f=s.Axes.getFromId(e,n.yaxis),l=i.visible&&-1!==["linear","log"].indexOf(a.type),c=o.visible&&-1!==["linear","log"].indexOf(f.type);if(l||c){var h=[],p=[];t.forEach(function(e,t){try{u(f.c2l(e.y))&&u(a.c2l(e.x))&&[{letter:"x",obj:i,visible:l,vals:h},{letter:"y",obj:o,visible:c,vals:p}].forEach(function(n){if(n.visible){var i,s,o=e[n.letter],a=n.obj;if("data"===n.obj.type?(i=Number(a.array[t]),s=!a.symmetric&&"arrayminus"in a?Number(a.arrayminus[t]):i):(i=r(a.type,o,a.value),s=!a.symmetric&&"valueminus"in a?r(a.type,o,a.valueminus):i),u(i)&&u(s)){var f=e[n.letter+"h"]=o+i,l=e[n.letter+"s"]=o-s;n.vals.push(f,l)}}})}catch(n){console.log(n)}}),s.Axes.expand(f,p,{padded:!0}),s.Axes.expand(a,h,{padded:!0})}}})},a.calcFromTrace=function(e,t){for(var n=e.x||[],r=e.y,i=n.length||r.length,s=new Array(i),o=0;i>o;o++)s[o]={x:n[o],y:r[o]};return s[0].trace=e,a.calc({calcdata:[s],_fullLayout:t}),s},a.plot=function(e,t,n){var r=t.x(),a=t.y();t.plot.select(".errorlayer").selectAll("g.errorbars").remove();var f;t.plot.select(".errorlayer").selectAll("g.errorbars").data(n).enter().append("g").attr("class","errorbars").each(function(e){var t=e[0].trace,n=t.error_x,c=t.error_y,h=s.Scatter.hasMarkers(t)&&t.marker.maxdisplayed>0;(c.visible||n.visible)&&o.select(this).selectAll("g").data(s.Lib.identity).enter().append("g").each(function(e){f=i(e,r,a);var t,s=o.select(this);if(!h||e.vis){if(c.visible&&u(f.x)&&u(f.yh)&&u(f.ys)){var p=c.width;t="M"+(f.x-p)+","+f.yh+"h"+2*p+"m-"+p+",0V"+f.ys,f.noYS||(t+="m-"+p+",0h"+2*p),s.append("path").classed("yerror",!0).attr("d",t)}if(n.visible&&u(f.y)&&u(f.xh)&&u(f.xs)){var d=(n.copy_ystyle?c:n).width;t="M"+f.xh+","+(f.y-d)+"v"+2*d+"m0,-"+d+"H"+f.xs,f.noXS||(t+="m0,-"+d+"v"+2*d),s.append("path").classed("xerror",!0).attr("d",t)}}})})},a.style=function(e){o.select(e).selectAll("g.errorbars").each(function(e){var t=o.select(this),n=e[0].trace,r=n.error_y||{},i=n.error_x||{};t.selectAll("g path.yerror").style("stroke-width",r.thickness+"px").call(s.Color.stroke,r.color),i.copy_ystyle&&(i=r),t.selectAll("g path.xerror").style("stroke-width",i.thickness+"px").call(s.Color.stroke,i.color)})},a.hoverInfo=function(e,t,n){t.error_y.visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys)),t.error_x.visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}},{"../../plotly":330,"./attributes":291,d3:53,"fast-isnumeric":58}],293:[function(e,t,n){var r=e("../../plots/font_attributes"),i=e("../color/attributes"),s=e("../../lib/extend").extendFlat;t.exports={bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.defaultLine},borderwidth:{valType:"number",min:0,dflt:0},font:s({},r,{}),traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"]},tracegroupgap:{valType:"number",min:0,dflt:10},x:{valType:"number",min:-2,max:3,dflt:1.02},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto"}}},{"../../lib/extend":310,"../../plots/font_attributes":336,"../color/attributes":282}],294:[function(e,t,n){"use strict";function r(e){return e.visible&&o.Plots.traceIs(e,"showLegend")}function i(e){return-1!==(e.traceorder||"").indexOf("grouped")}function s(e){return-1!==(e.traceorder||"").indexOf("reversed")}var o=e("../../plotly"),u=e("d3"),a=t.exports={};a.layoutAttributes=e("./attributes"),a.supplyLayoutDefaults=function(e,t,n){function u(e,t){return o.Lib.coerce(c,h,a.layoutAttributes,e,t)}for(var f,c=e.legend||{},h=t.legend={},p=0,d="normal",v=0;v<n.length;v++)f=n[v],r(f)&&(p++,o.Plots.traceIs(f,"pie")&&p++),(o.Plots.traceIs(f,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(f.fill))&&(d=i({traceorder:d})?"grouped+reversed":"reversed"),void 0!==f.legendgroup&&""!==f.legendgroup&&(d=s({traceorder:d})?"reversed+grouped":"grouped");var m=o.Lib.coerce(e,t,o.Plots.layoutAttributes,"showlegend",p>1);m!==!1&&(u("bgcolor",t.paper_bgcolor),u("bordercolor"),u("borderwidth"),o.Lib.coerceFont(u,"font",t.font),u("traceorder",d),i(t.legend)&&u("tracegroupgap"),u("x"),u("xanchor"),u("y"),u("yanchor"),o.Lib.noneOrAll(c,h,["x","y"]))},a.lines=function(e){var t=e[0].trace,n=t.visible&&t.fill&&"none"!==t.fill,r=o.Scatter.hasLines(t),i=u.select(this).select(".legendfill").selectAll("path").data(n?[e]:[]);i.enter().append("path").classed("js-fill",!0),i.exit().remove(),i.attr("d","M5,0h30v6h-30z").call(o.Drawing.fillGroupStyle);var s=u.select(this).select(".legendlines").selectAll("path").data(r?[e]:[]);s.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),s.exit().remove(),s.call(o.Drawing.lineGroupStyle)},a.points=function(e){function t(e,t,n){var r=o.Lib.nestedProperty(a,e).get(),i=Array.isArray(r)&&t?t(r):r;if(n){if(i<n[0])return n[0];if(i>n[1])return n[1]}return i}function n(e){return e[0]}var r,i,s=e[0],a=s.trace,f=o.Scatter.hasMarkers(a),l=o.Scatter.hasText(a),c=o.Scatter.hasLines(a);if(f||l||c){var h={},p={};f&&(h.mc=t("marker.color",n),h.mo=t("marker.opacity",o.Lib.mean,[.2,1]),h.ms=t("marker.size",o.Lib.mean,[2,16]),h.mlc=t("marker.line.color",n),h.mlw=t("marker.line.width",o.Lib.mean,[0,5]),p.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),c&&(p.line={width:t("line.width",n,[0,10])}),l&&(h.tx="Aa",h.tp=t("textposition",n),h.ts=10,h.tc=t("textfont.color",n),h.tf=t("textfont.family",n)),r=[o.Lib.minExtend(s,h)],i=o.Lib.minExtend(a,p)}var d=u.select(this).select("g.legendpoints"),v=d.selectAll("path.scatterpts").data(f?r:[]);v.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),v.exit().remove(),v.call(o.Drawing.pointStyle,i),f&&(r[0].mrc=3);var m=d.selectAll("g.pointtext").data(l?r:[]);m.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),m.exit().remove(),m.selectAll("text").call(o.Drawing.textPointStyle,i)},a.bars=function(e){var t=e[0].trace,n=t.marker||{},r=n.line||{},i=u.select(this).select("g.legendpoints").selectAll("path.legendbar").data(o.Plots.traceIs(t,"bar")?[e]:[]);i.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),i.exit().remove(),i.each(function(e){var t=(e.mlw+1||r.width+1)-1,i=u.select(this);i.style("stroke-width",t+"px").call(o.Color.fill,e.mc||n.color),t&&i.call(o.Color.stroke,e.mlc||r.color)})},a.boxes=function(e){var t=e[0].trace,n=u.select(this).select("g.legendpoints").selectAll("path.legendbox").data(o.Plots.traceIs(t,"box")&&t.visible?[e]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.each(function(e){var n=(e.lw+1||t.line.width+1)-1,r=u.select(this);r.style("stroke-width",n+"px").call(o.Color.fill,e.fc||t.fillcolor),n&&r.call(o.Color.stroke,e.lc||t.line.color)})},a.pie=function(e){var t=e[0].trace,n=u.select(this).select("g.legendpoints").selectAll("path.legendpie").data(o.Plots.traceIs(t,"pie")&&t.visible?[e]:[]);n.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.size()&&n.call(o.Pie.styleOne,e[0],t)},a.style=function(e){e.each(function(e){var t=u.select(this),n=t.selectAll("g.legendfill").data([e]);n.enter().append("g").classed("legendfill",!0);var r=t.selectAll("g.legendlines").data([e]);r.enter().append("g").classed("legendlines",!0);var i=t.selectAll("g.legendsymbols").data([e]);i.enter().append("g").classed("legendsymbols",!0),i.style("opacity",e[0].trace.opacity),i.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(a.bars).each(a.boxes).each(a.pie).each(a.lines).each(a.points)},a.texts=function(e,t,n,r,i){function s(e){o.util.convertToTspans(e,function(){t.firstRender&&a.repositionLegend(t,i)}),e.selectAll("tspan.line").attr({x:e.attr("x")})}var f=t._fullLayout,c=n[0].trace,h=o.Plots.traceIs(c,"pie"),p=c.index,d=h?n[0].label:c.name,v=u.select(e).selectAll("text.legendtext").data([0]);v.enter().append("text").classed("legendtext",!0),v.attr({x:40,y:0}).style("text-anchor","start").call(o.Drawing.font,f.legend.font).text(d).attr({"data-unformatted":d}),t._context.editable&&!h?v.call(o.util.makeEditable).call(s).on("edit",function(e){this.attr({"data-unformatted":e}),this.text(e).call(s),this.text()||(e="    "),o.restyle(t,"name",e,p)}):v.call(s)},a.getLegendData=function(e,t){function n(e,n){if(""!==e&&i(t))-1===v.indexOf(e)?(v.push(e),m=!0,d[e]=[[n]]):d[e].push([n]);else{var r="~~i"+y;v.push(r),d[r]=[[n]],y++}}var u,a,f,l,c,h,p,d={},v=[],m=!1,g={},y=0;for(c=0;c<e.length;c++)if(u=e[c],a=u[0],f=a.trace,l=f.legendgroup,r(f)&&f.showlegend)if(o.Plots.traceIs(f,"pie"))for(g[l]||(g[l]={}),h=0;h<u.length;h++)p=u[h].label,g[l][p]||(n(l,{label:p,color:u[h].color,i:u[h].i,trace:f}),g[l][p]=!0);else n(l,a);if(!v.length)return[];var b,w,E=v.length;if(m&&i(t))for(w=new Array(E),c=0;E>c;c++)b=d[v[c]],w[c]=s(t)?b.reverse():b;else{for(w=[new Array(E)],c=0;E>c;c++)b=d[v[c]][0],w[0][s(t)?E-c-1:c]=b;E=1}return t._lgroupsLength=E,w},a.draw=function(e){var t=e._fullLayout;if(t._infolayer&&e.calcdata){var n=t.legend,r=t.showlegend&&a.getLegendData(e.calcdata,n),s=t.hiddenlabels||[];if(!t.showlegend||!r.length)return t._infolayer.selectAll(".legend").remove(),void o.Plots.autoMargin(e,"legend");"undefined"==typeof e.firstRender?e.firstRender=!0:e.firstRender&&(e.firstRender=!1);var f=t._infolayer.selectAll("svg.legend").data([0]);f.enter(0).append("svg").attr("class","legend");var c=f.selectAll("rect.bg").data([0]);c.enter(0).append("rect").attr("class","bg"),c.call(o.Color.stroke,n.bordercolor).call(o.Color.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px");var h=f.selectAll("g.groups").data(r);h.enter().append("g").attr("class","groups"),h.exit().remove(),i(n)&&h.attr("transform",function(e,t){return"translate(0,"+t*n.tracegroupgap+")"});var p=h.selectAll("g.traces").data(o.Lib.identity);if(p.enter().append("g").attr("class","traces"),p.exit().remove(),p.call(a.style).style("opacity",function(e){var t=e[0].trace;return o.Plots.traceIs(t,"pie")?-1!==s.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(t,n){a.texts(this,e,t,n,p);var r=u.select(this).selectAll("rect").data([0]);r.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(o.Color.fill,"rgba(0,0,0,0)"),r.on("click",function(){if(!e._dragged){var n,r,i=e._fullData,u=t[0].trace,a=u.legendgroup,f=[];if(o.Plots.traceIs(u,"pie")){var l=t[0].label,c=s.slice(),h=c.indexOf(l);-1===h?c.push(l):c.splice(h,1),o.relayout(e,"hiddenlabels",c)}else{if(""===a)f=[u.index];else for(var p=0;p<i.length;p++)n=i[p],n.legendgroup===a&&f.push(n.index);r=u.visible===!0?"legendonly":!0,o.restyle(e,"visible",r,f)}}})}),a.repositionLegend(e,p),e._context.editable){var d,v,m,g,y,b;o.Fx.dragElement({element:f.node(),prepFn:function(){m=Number(f.attr("x")),g=Number(f.attr("y")),y=Number(f.attr("width")),b=Number(f.attr("height")),o.Fx.setCursor(f)},moveFn:function(t,r){var i=e._fullLayout._size;f.call(o.Drawing.setPosition,m+t,g+r),d=o.Fx.dragAlign(m+t,y,i.l,i.l+i.w,n.xanchor),v=o.Fx.dragAlign(g+r+b,-b,i.t+i.h,i.t,n.yanchor);var s=o.Fx.dragCursors(d,v,n.xanchor,n.yanchor);o.Fx.setCursor(f,s)},doneFn:function(t){o.Fx.setCursor(f),t&&void 0!==d&&void 0!==v&&o.relayout(e,{"legend.x":d,"legend.y":v})}})}}},a.repositionLegend=function(e,t){var n=e._fullLayout,r=n._size,s=n.legend,a=s.borderwidth,f=0,l=0;t.each(function(e){var t,n,r=e[0].trace,i=u.select(this),c=i.selectAll(".legendtoggle"),h=i.selectAll(".legendtext"),p=i.selectAll(".legendtext>tspan"),d=1.3*s.font.size,v=p[0].length||1,m=h.node()&&o.Drawing.bBox(h.node()).width,g=i.select("g[class*=math-group]");if(!r.showlegend)return void i.remove();if(g.node()){var y=o.Drawing.bBox(g.node());d=y.height,m=y.width,g.attr("transform","translate(0,"+d/4+")")}else t=d*(.3+(1-v)/2),h.attr("y",t),p.attr("y",t);n=Math.max(d*v,16)+3,i.attr("transform","translate("+a+","+(5+a+l+n/2)+")"),c.attr({x:0,y:-n/2,height:n}),l+=n,f=Math.max(f,m||0)}),i(s)&&(l+=(s._lgroupsLength-1)*s.tracegroupgap),t.selectAll(".legendtoggle").attr("width",(e._context.editable?0:f)+40),f+=45+2*a,l+=10+2*a;var c=r.l+r.w*s.x,h=r.t+r.h*(1-s.y),p="left";"right"===s.xanchor||"auto"===s.xanchor&&s.x>=2/3?(c-=f,p="right"):("center"===s.xanchor||"auto"===s.xanchor&&s.x>1/3)&&(c-=f/2,p="center");var d="top";"bottom"===s.yanchor||"auto"===s.yanchor&&s.y<=1/3?(h-=l,d="bottom"):("middle"===s.yanchor||"auto"===s.yanchor&&s.y<2/3)&&(h-=l/2,d="middle"),f=Math.ceil(f),l=Math.ceil(l),c=Math.round(c),h=Math.round(h),n._infolayer.selectAll("svg.legend").call(o.Drawing.setRect,c,h,f,l),n._infolayer.selectAll("svg.legend .bg").call(o.Drawing.setRect,a/2,a/2,f-a,l-a),o.Plots.autoMargin(e,"legend",{x:s.x,y:s.y,l:f*({right:1,center:.5}[p]||0),r:f*({left:1,center:.5}[p]||0),b:l*({top:1,middle:.5}[d]||0),t:l*({bottom:1,middle:.5}[d]||0)})}},{"../../plotly":330,"./attributes":293,d3:53}],295:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r;var t=this;this._snapshotInProgress=!1,this.graphInfo=e.graphInfo,this.element=document.createElement("div"),"hover"===this.graphInfo._context.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar",this.buttons=e.buttons,this.buttonElements=[],this.buttons.forEach(function(e){var n=t.createGroup();e.forEach(function(e){var r=t.config()[e];if(!r)throw new Error(e+" not specfied in modebar configuration");var i=t.createButton(r);t.buttonElements.push(i),n.appendChild(i)}),t.element.appendChild(n)}),this.graphInfo._context.displaylogo&&this.element.appendChild(this.getLogo()),e.container.appendChild(this.element),this.updateActiveButton()}var i=e("../../plotly"),s=e("d3"),o=r.prototype;o.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},o.createButton=function(e){var t=this,n=document.createElement("a");return n.setAttribute("rel","tooltip"),n.className="modebar-btn",void 0!==e.attr&&n.setAttribute("data-attr",e.attr),void 0!==e.val&&n.setAttribute("data-val",e.val),n.setAttribute("data-title",e.title),n.setAttribute("data-gravity",e.gravity||"n"),n.addEventListener("click",function(){e.click.apply(t,arguments)}),n.setAttribute("data-toggle",e.toggle),e.toggle&&n.classList.add("active"),n.appendChild(this.createIcon(i.Icons[e.icon])),n},o.createIcon=function(e){var t=i.Icons,n=t.ascent-t.descent,r="http://www.w3.org/2000/svg",s=document.createElementNS(r,"svg"),o=document.createElementNS(r,"path");return s.setAttribute("height","1em"),s.setAttribute("width",e.width/n+"em"),s.setAttribute("viewBox",[0,0,e.width,n].join(" ")),o.setAttribute("d",e.path),o.setAttribute("transform","matrix(1 0 0 -1 0 "+t.ascent+")"),s.appendChild(o),s},o.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,n=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var r=e.getAttribute("data-val")||!0,i=e.getAttribute("data-attr"),o="true"===e.getAttribute("data-toggle"),u=s.select(e);o?i===n&&u.classed("active",!u.classed("active")):u.classed("active",t[i]===r)})},o.hasButtons=function(e){var t=this.buttons;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r]!==t[n][r])return!1}return!0},o.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plot.ly/",t.target="_blank",t.setAttribute("data-title","Produced with Plotly"),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(i.Icons.plotlylogo)),e.appendChild(t),e},o.handleCartesian=function(e){var t=e.currentTarget,n=t.getAttribute("data-attr"),r=t.getAttribute("data-val")||!0,s=this,o=this.graphInfo,u=this.graphInfo._fullLayout,a={};if("zoom"===n)for(var f,l,c,h="in"===r?.5:2,p=(1+h)/2,d=(1-h)/2,v=i.Axes.list(o,null,!0),m=0;m<v.length;m++)f=v[m],f.fixedrange||(l=f._name,"auto"===r?a[l+".autorange"]=!0:"reset"===r?void 0===f._rangeInitial?a[l+".autorange"]=!0:a[l+".range"]=f._rangeInitial.slice():(c=f.range,a[l+".range"]=[p*c[0]+d*c[1],p*c[1]+d*c[0]]));else"hovermode"!==n||"x"!==r&&"y"!==r||(r=u._isHoriz?"y":"x",t.setAttribute("data-val",r)),a[n]=r;i.relayout(o,a).then(function(){s.updateActiveButton(),"dragmode"===n&&(u._hasCartesian&&i.Fx.setCursor(u._paper.select(".nsewdrag"),{pan:"move",zoom:"crosshair"}[r]),i.Fx.supplyLayoutDefaults(o.layout,u,o._fullData))})},o.handleHover3d=function(e){var t,n,r,s,o,u,a,f,l,c=e.currentTarget,h=JSON.parse(c.getAttribute("data-val"))||!1,p=this,d=this.graphInfo,v=d._fullLayout,m=i.Plots.getSubplotIds(v,"gl3d"),g={},y={},b=["xaxis","yaxis","zaxis"],w=["showspikes","spikesides","spikethickness","spikecolor"];if(h)g=h,c.setAttribute("data-val",JSON.stringify(null));else{for(g={"allaxes.showspikes":!1},t=0;t<m.length;t++)for(n=m[t],r=v[n],s=y[n]={},o=0;3>o;o++)for(u=b[o],a=s[u]={},f=0;f<w.length;f++)l=w[f],a[l]=r[u][l];c.setAttribute("data-val",JSON.stringify(y))}i.relayout(d,g).then(function(){p.updateActiveButton(c)})},o.handleDrag3d=function(e){var t=e.currentTarget,n=t.getAttribute("data-attr"),r=t.getAttribute("data-val")||!0,s=this,o=this.graphInfo,u={};u[n]=r,i.relayout(o,u).then(function(){s.updateActiveButton()})},o.handleCamera3d=function(e){var t,n,r,s,o,u,a=e.currentTarget,f=a.getAttribute("data-attr"),l=this.graphInfo.layout,c=this.graphInfo._fullLayout,h=i.Plots.getSubplotIds(c,"gl3d");for(t=0;t<h.length;t++)n=h[t],r=l[n],s=c[n],o=s._scene,r&&"resetDefault"!==f?"resetLastSave"===f&&(u=r.camera,u?o.setCamera(u):o.setCameraToDefault()):o.setCameraToDefault()},o.handleGeo=function(e){for(var t,n,r,s=e.currentTarget,o=s.getAttribute("data-attr"),u=s.getAttribute("data-val")||!0,a=this.graphInfo._fullLayout,f=i.Plots.getSubplotIds(a,"geo"),l=0;l<f.length;l++)t=a[f[l]]._geo,"zoom"===o?(n=t.projection.scale(),r="in"===u?2*n:.5*n,t.projection.scale(r),t.zoom.scale(r),t.render()):"reset"===o?t.zoomReset():"hovermode"===o&&(t.showHover=!t.showHover);this.updateActiveButton(s)},o.handleHoverPie=function(){var e=this,t=e.graphInfo,n=t._fullLayout.hovermode?!1:"closest";i.relayout(t,"hovermode",n).then(function(){e.updateActiveButton()})},o.handleHoverGl2d=function(e){var t=this,n=e.currentTarget,r=t.graphInfo,s=r._fullLayout.hovermode?!1:"closest";i.relayout(r,"hovermode",s).then(function(){t.updateActiveButton(n)})},o.cleanup=function(){this.element.innerHTML="";var e=this.element.parentNode;e&&e.removeChild(this.element)},o.toImage=function(){var e="png",t=this;if(i.Lib.isIE())return void i.Lib.notifier("Snapshotting is unavailable in Internet Explorer. Consider exporting your images using the Plotly Cloud","long");if(this._snapshotInProgress)return void i.Lib.notifier("Snapshotting is still in progress - please hold","long");this._snapshotInProgress=!0,i.Lib.notifier("Taking snapshot - this may take a few seconds","long");var n=i.Snapshot.toImage(this.graphInfo,{format:e}),r=this.graphInfo.fn||"newplot";r+="."+e,n.once("success",function(e){t._snapshotInProgress=!1;var i=document.createElement("a");i.href=e,i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),n.clean()}),n.once("error",function(r){t._snapshotInProgress=!1,i.Lib.notifier("Sorry there was a problem downloading your "+e,"long"),console.error(r),n.clean()})},o.sendDataToCloud=function(){var e=this.graphInfo;i.Plots.sendDataToCloud(e)},o.config=function(){return{zoom2d:{title:"Zoom",attr:"dragmode",val:"zoom",icon:"zoombox",click:this.handleCartesian},pan2d:{title:"Pan",attr:"dragmode",val:"pan",icon:"pan",click:this.handleCartesian},zoomIn2d:{title:"Zoom in",attr:"zoom",val:"in",icon:"zoom_plus",click:this.handleCartesian},zoomOut2d:{title:"Zoom out",attr:"zoom",val:"out",icon:"zoom_minus",click:this.handleCartesian},autoScale2d:{title:"Autoscale",attr:"zoom",val:"auto",icon:"autoscale",click:this.handleCartesian},resetScale2d:{title:"Reset axes",attr:"zoom",val:"reset",icon:"home",click:this.handleCartesian},hoverClosest2d:{title:"Show closest data on hover",attr:"hovermode",val:"closest",icon:"tooltip_basic",gravity:"ne",click:this.handleCartesian},hoverCompare2d:{title:"Compare data on hover",attr:"hovermode",val:this.graphInfo._fullLayout._isHoriz?"y":"x",icon:"tooltip_compare",gravity:"ne",click:this.handleCartesian},toImage:{title:"download plot as a png",icon:"camera",click:this.toImage},sendDataToCloud:{title:"save and edit plot in cloud",icon:"disk",click:this.sendDataToCloud},zoom3d:{title:"Zoom",attr:"dragmode",val:"zoom",icon:"zoombox",click:this.handleDrag3d},pan3d:{title:"Pan",attr:"dragmode",val:"pan",icon:"pan",click:this.handleDrag3d},orbitRotation:{title:"orbital rotation",attr:"dragmode",val:"orbit",icon:"3d_rotate",click:this.handleDrag3d},tableRotation:{title:"turntable rotation",attr:"dragmode",val:"turntable",icon:"z-axis",click:this.handleDrag3d},resetCameraDefault3d:{title:"Reset camera to default",attr:"resetDefault",icon:"home",click:this.handleCamera3d},resetCameraLastSave3d:{title:"Reset camera to last save",attr:"resetLastSave",icon:"movie",click:this.handleCamera3d},hoverClosest3d:{title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:"tooltip_basic",gravity:"ne",click:this.handleHover3d},zoomInGeo:{title:"Zoom in",attr:"zoom",val:"in",icon:"zoom_plus",click:this.handleGeo},zoomOutGeo:{title:"Zoom out",attr:"zoom",val:"out",icon:"zoom_minus",click:this.handleGeo},resetGeo:{title:"Reset",attr:"reset",val:null,icon:"autoscale",click:this.handleGeo},hoverClosestGeo:{title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:"tooltip_basic",gravity:"ne",click:this.handleGeo},hoverClosestPie:{title:"Toggle show closest data on hover",attr:"hovermode",val:"closest",icon:"tooltip_basic",gravity:"ne",click:this.handleHoverPie},hoverClosestGl2d:{title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:"tooltip_basic",gravity:"ne",click:this.handleHoverGl2d}}},t.exports=r},{"../../plotly":330,d3:53}],296:[function(e,t,n){var r=e("../annotations/attributes"),i=e("../../traces/scatter/attributes"),s=e("../../lib/extend").extendFlat,o=i.line;t.exports={_isLinkedToArray:!0,type:{valType:"enumerated",values:["circle","rect","path","line"]},xref:s({},r.xref,{}),x0:{valType:"any"},x1:{valType:"any"},yref:s({},r.yref,{}),y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string"},opacity:{valType:"number",min:0,max:1,dflt:1},line:{color:o.color,width:o.width,dash:o.dash},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"}}},{"../../lib/extend":310,"../../traces/scatter/attributes":397,"../annotations/attributes":280}],297:[function(e,t,n){"use strict";function r(e,t){function n(t,n){return f.Lib.coerce(e,r,c.layoutAttributes,t,n)}var r={};n("opacity"),n("fillcolor"),n("line.color"),n("line.width"),n("line.dash");for(var i=e.path?"path":"rect",o=n("type",i),u=["x","y"],a=0;2>a;a++){var l=u[a],h={_fullLayout:t},p=f.Axes.coerceRef(e,r,h,l);if("path"!==o){var d=.25,v=.75;if("paper"!==p){var m=f.Axes.getFromId(h,p),g=s(m);d=g(m.range[0]+d*(m.range[1]-m.range[0])),v=g(m.range[0]+v*(m.range[1]-m.range[0]))}n(l+"0",d),n(l+"1",v)}}return"path"===o?n("path"):f.Lib.noneOrAll(e,r,["x0","x1","y0","y1"]),r}function i(e){return"category"===e.type?e.c2l:e.d2l}function s(e){return"category"===e.type?e.l2c:e.l2d}function o(e){return function(t){return e(t.replace("_"," "))}}function u(e,t){var n,r,s,u,a=t.type,l=f.Axes.getFromId(e,t.xref),h=f.Axes.getFromId(e,t.yref),p=e._fullLayout._size;if(l?(n=i(l),r=function(e){return l._offset+l.l2p(n(e,!0))}):r=function(e){return p.l+p.w*e},h?(s=i(h),u=function(e){return h._offset+h.l2p(s(e,!0))}):u=function(e){return p.t+p.h*(1-e)},"path"===a)return l&&"date"===l.type&&(r=o(r)),h&&"date"===h.type&&(u=o(u)),c.convertPath(t.path,r,u);var d=r(t.x0),v=r(t.x1),m=u(t.y0),g=u(t.y1);if("line"===a)return"M"+d+","+m+"L"+v+","+g;if("rect"===a)return"M"+d+","+m+"H"+v+"V"+g+"H"+d+"Z";var y=(d+v)/2,b=(m+g)/2,w=Math.abs(y-d),E=Math.abs(b-m),S="A"+w+","+E,x=y+w+","+b,T=y+","+(b-E);return"M"+x+S+" 0 1,1 "+T+S+" 0 0,1 "+x+"Z"}function a(e,t,n,r,i){var s="category"===e.type?Number:e.d2c;if(void 0!==t)return[s(t),s(n)];if(r){var u,a,f,l,c,d=1/0,v=-1/0,m=r.match(h);for("date"===e.type&&(s=o(s)),u=0;u<m.length;u++)a=m[u],f=i[a.charAt(0)].drawn,void 0!==f&&(l=m[u].substr(1).match(p),!l||l.length<f||(c=s(l[f]),d>c&&(d=c),c>v&&(v=c)));return v>=d?[d,v]:void 0}}var f=e("../../plotly"),l=e("fast-isnumeric"),c=t.exports={};c.layoutAttributes=e("./attributes"),c.supplyLayoutDefaults=function(e,t){for(var n=e.shapes||[],i=t.shapes=[],s=0;s<n.length;s++)i.push(r(n[s]||{},t))},c.drawAll=function(e){var t=e._fullLayout;t._shapelayer.selectAll("path").remove();for(var n=0;n<t.shapes.length;n++)c.draw(e,n)},c.add=function(e){var t=e._fullLayout.shapes.length;f.relayout(e,"shapes["+t+"]","add")},c.draw=function(e,t,n,o){var a,h=e.layout,p=e._fullLayout;if(!l(t)||-1===t){if(!t&&Array.isArray(o))return h.shapes=o,c.supplyLayoutDefaults(h,p),void c.drawAll(e);if("remove"===o)return delete h.shapes,p.shapes=[],void c.drawAll(e);if(n&&"add"!==o){for(a=0;a<p.shapes.length;a++)c.draw(e,a,n,o);return}t=p.shapes.length,p.shapes.push({})}if(!n&&o){if("remove"===o){for(p._shapelayer.selectAll('[data-index="'+t+'"]').remove(),p.shapes.splice(t,1),h.shapes.splice(t,1),a=t;a<p.shapes.length;a++)p._shapelayer.selectAll('[data-index="'+(a+1)+'"]').attr("data-index",String(a)),c.draw(e,a);return}if("add"===o||f.Lib.isPlainObject(o)){p.shapes.splice(t,0,{});var d=f.Lib.isPlainObject(o)?f.Lib.extendFlat({},o):{text:"New text"};for(h.shapes?h.shapes.splice(t,0,d):h.shapes=[d],a=p.shapes.length-1;a>t;a--)p._shapelayer.selectAll('[data-index="'+(a-1)+'"]').attr("data-index",String(a)),c.draw(e,a)}}p._shapelayer.selectAll('[data-index="'+t+'"]').remove();var v=h.shapes[t];if(v){var m={xref:v.xref,yref:v.yref},g={};"string"==typeof n&&n?g[n]=o:f.Lib.isPlainObject(n)&&(g=n);var y=Object.keys(g);for(a=0;a<g.length;a++){var b=y[a];f.Lib.nestedProperty(v,b).set(g[b])}var w=["x0","x1","y0","y1"];for(a=0;4>a;a++){var E=w[a];if(void 0===g[E]&&void 0!==v[E]){var S,x=E.charAt(0),T=f.Axes.getFromId(e,f.Axes.coerceRef(m,{},e,x)),N=f.Axes.getFromId(e,f.Axes.coerceRef(v,{},e,x)),C=v[E];void 0!==g[x+"ref"]&&(T?(S=i(T)(C),C=(S-T.range[0])/(T.range[1]-T.range[0])):C=(C-N.domain[0])/(N.domain[1]-N.domain[0]),N?(S=N.range[0]+C*(N.range[1]-N.range[0]),C=s(N)(S)):C=T.domain[0]+C*(T.domain[1]-T.domain[0])),v[E]=C}}var k=r(v,p);p.shapes[t]=k;var L={"data-index":String(t),"fill-rule":"evenodd",d:u(e,k)},A=(k.xref+k.yref).replace(/paper/g,""),O=k.line.width?k.line.color:"rgba(0,0,0,0)",M=p._shapelayer.append("path").attr(L).style("opacity",k.opacity).call(f.Color.stroke,O).call(f.Color.fill,k.fillcolor).call(f.Drawing.dashLine,k.line.dash,k.line.width);A&&M.call(f.Drawing.setClipUrl,"clip"+p._uid+A)}};var h=/[MLHVQCTSZ][^MLHVQCTSZ]*/g,p=/[^\s,]+/g,d={M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},v={M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},m={M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0};c.convertPath=function(e,t,n){return e.replace(h,function(e){var r=0,i=e.charAt(0),s=d[i],o=v[i],u=m[i],a=e.substr(1).replace(p,function(e){return s[r]?e=t(e):o[r]&&(e=n(e)),r++,r>u&&(e="X"),e});return r>u&&(a=a.replace(/[\s,]*X.*/,""),console.log("ignoring extra params in segment "+e)),i+a})},c.calcAutorange=function(e){var t,n,r,i,s,o=e._fullLayout,u=o.shapes;if(u.length&&e._fullData.length)for(t=0;t<u.length;t++)n=u[t],r=n.line.width/2,"paper"!==n.xref&&(i=f.Axes.getFromId(e,n.xref),s=a(i,n.x0,n.x1,n.path,d),s&&f.Axes.expand(i,s,{ppad:r})),"paper"!==n.yref&&(i=f.Axes.getFromId(e,n.yref),s=a(i,n.y0,n.y1,n.path,v),s&&f.Axes.expand(i,s,{ppad:r}))}},{"../../plotly":330,"./attributes":296,"fast-isnumeric":58}],298:[function(e,t,n){"use strict";var r=e("../../plotly"),i=e("d3"),s=e("fast-isnumeric"),o=r.Plots,u=t.exports={};u.draw=function(e,t){function n(e){r.Lib.syncOrAsync([f,l],e)}function f(t){return t.attr("transform",O?"rotate("+[O.rotate,d.x,d.y]+") translate(0, "+O.offset+")":null),t.style({"font-family":k,"font-size":i.round(L,2)+"px",fill:r.Color.rgb(A),opacity:P*r.Color.opacity(A),"font-weight":o.fontWeight}).attr(d).call(r.util.convertToTspans).attr(d),t.selectAll("tspan.line").attr(d),o.previousPromises(e)}function l(e){var t=i.select(e.node().parentNode);if(_&&_.selection&&_.side&&B){t.attr("transform",null);var n=0,o={left:"right",right:"left",top:"bottom",bottom:"top"}[_.side],u=-1!==["left","top"].indexOf(_.side)?-1:1,f=s(_.pad)?_.pad:2,l=r.Drawing.bBox(t.node()),c={left:0,top:0,right:v.width,bottom:v.height},h=y?v.width:(c[_.side]-l[_.side])*("left"===_.side||"top"===_.side?-1:1);if(0>h?n=h:(l.left-=_.offsetLeft,l.right-=_.offsetLeft,l.top-=_.offsetTop,l.bottom-=_.offsetTop,_.selection.each(function(){var e=r.Drawing.bBox(this);r.Lib.bBoxIntersect(l,e,f)&&(n=Math.max(n,u*(e[_.side]-l[o])+f))}),n=Math.min(h,n)),n>0||0>h){var p={left:[-n,0],right:[n,0],top:[0,-n],bottom:[0,n]}[_.side];t.attr("transform","translate("+p+")")}}}function c(){P=0,H=!0,B=q,v._infolayer.select("."+t).attr({"data-unformatted":B}).text(B).on("mouseover.opacity",function(){i.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){i.select(this).transition().duration(1e3).style("opacity",0)})}if(!t)return r.Axes.listIds(e).forEach(function(t){u.draw(e,t+"title")}),void u.draw(e,"gtitle");var h,p,d,v=e._fullLayout,m=v._size,g=t.charAt(0),y="cb"===t.substr(1,2);if(y){var b=t.substr(3).replace("title","");e._fullData.some(function(t,n){return t.uid===b?(h=n,p=e.calcdata[n][0].t.cb.axis,!0):void 0})}else p=v[r.Axes.id2name(t.replace("title",""))]||v;var w,E,S,x,T,N=p===v?"title":p._name+".title",C=y?"colorscale":(p._id||g).toUpperCase()+" axis",k=p.titlefont.family,L=p.titlefont.size,A=p.titlefont.color,O="",M={},_={selection:i.select(e).selectAll("g."+p._id+"tick"),side:p.side},D=y?0:1.5;y?(_.offsetLeft=m.l,_.offsetTop=m.t):_.selection.size()&&(T=i.select(_.selection.node().parentNode).attr("transform").match(/translate\(([-\.\d]+),([-\.\d]+)\)/),T&&(_.offsetLeft=+T[1],_.offsetTop=+T[2])),y&&p.titleside?(w=m.l+p.titlex*m.w,E=m.t+(1-p.titley)*m.h+("top"===p.titleside?3+.75*L:-3-.25*L),d={x:w,y:E,"text-anchor":"start"},_={},t="h"+t):"x"===g?(S=p,x="free"===S.anchor?{_offset:m.t+(1-(S.position||0))*m.h,_length:0}:r.Axes.getFromId(e,S.anchor),w=S._offset+S._length/2,E=x._offset+("top"===S.side?-10-L*(D+(S.showticklabels?1:0)):x._length+10+L*(D+(S.showticklabels?1.5:.5))),d={x:w,y:E,"text-anchor":"middle"},_.side||(_.side="bottom")):"y"===g?(x=p,S="free"===x.anchor?{_offset:m.l+(x.position||0)*m.w,_length:0}:r.Axes.getFromId(e,x.anchor),E=x._offset+x._length/2,w=S._offset+("right"===x.side?S._length+10+L*(D+(x.showticklabels?1:.5)):-10-L*(D+(x.showticklabels?.5:0))),M={center:0},d={x:w,y:E,"text-anchor":"middle"},O={rotate:"-90",offset:0},_.side||(_.side="left")):(C="Plot",L=v.titlefont.size,w=v.width/2,E=v._size.t/2,d={x:w,y:E,"text-anchor":"middle"},_={});var P=1,H=!1,B=p.title.trim();""===B&&(P=0),B.match(/Click to enter .+ title/)&&(P=.2,H=!0);var j;if(y){j=i.select(e).selectAll("."+p._id.substr(1)+" .cbtitle");var F="h"===t.charAt(0)?t.substr(1):"h"+t;j.selectAll("."+F+",."+F+"-math-group").remove()}else j=v._infolayer.selectAll(".g-"+t).data([0]),j.enter().append("g").classed("g-"+t,!0);var I=j.selectAll("text").data([0]);I.enter().append("text"),I.text(B).attr("class",t),I.attr({"data-unformatted":B}).call(n);var q="Click to enter "+C.replace(/\d+/,"")+" title";e._context.editable?(B||c(),I.call(r.util.makeEditable).on("edit",function(t){if(y){var n=e._fullData[h];o.traceIs(n,"markerColorscale")?r.restyle(e,"marker.colorbar.title",t,h):r.restyle(e,"colorbar.title",t,h)}else r.relayout(e,N,t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(n)}).on("input",function(e){this.text(e||" ").attr(d).selectAll("tspan.line").attr(d)})):(!B||B.match(/Click to enter .+ title/))&&I.remove(),I.classed("js-placeholder",H)}},{"../../plotly":330,d3:53,"fast-isnumeric":58}],299:[function(e,t,n){t.exports={DZA:"algeria",AGO:"angola",EGY:"egypt",BGD:"bangladesh|^(?=.*east).*paki?stan",NER:"\\bniger(?!ia)",LIE:"liechtenstein",NAM:"namibia",BGR:"bulgaria",BOL:"bolivia",GHA:"ghana|gold.?coast",CCK:"\\bcocos|keeling",PAK:"^(?!.*east).*paki?stan",CPV:"verde",JOR:"jordan",LBR:"liberia",LBY:"libya",MYS:"malaysia",IOT:"british.?indian.?ocean",PRI:"puerto.?rico",MYT:"mayotte",PRK:"^(?=.*democrat).*\\bkorea|^(?=.*people).*\\bkorea|^(?=.*north).*\\bkorea|\\bd\\.?p\\.?r\\.?k",PSE:"palestin|\\bgaza|west.?bank",TZA:"tanzania",BWA:"botswana|bechuana",KHM:"cambodia|kampuchea|khmer|^p\\.?r\\.?k\\.?$",UMI:"minor.?outlying.?is",TTO:"trinidad|tobago",PRY:"paraguay",HKG:"hong.?kong",SAU:"\\bsa\\w*.?arabia",LBN:"lebanon",SVN:"slovenia",BFA:"burkina|\\bfaso|upper.?volta",SVK:"^(?!.*cze).*slovak",MRT:"mauritania",HRV:"croatia",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai).*china|^p\\.?r\\.?c\\.?$",KNA:"kitts|\\bnevis",JAM:"jamaica",SMR:"san.?marino",GIB:"gibraltar",DJI:"djibouti",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",FIN:"finland",URY:"uruguay",VAT:"holy.?see|vatican|papal.?st",STP:"\\bs(a|)o.?tom(e|)",SYC:"seychell",NPL:"nepal",CXR:"christmas",LAO:"\\blaos?\\b",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",BVT:"bouvet",ZAF:"\\bs\\w*.?africa",KIR:"kiribati",PHL:"philippines",SXM:"^(?!.*martin)(?!.*saba).*maarten",ROU:"r(o|u|ou)mania",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",SYR:"syria",MAC:"maca(o|u)",NFK:"norfolk",NIC:"nicaragua",MLT:"\\bmalta",KAZ:"kazak",TCA:"turks",PYF:"french.?polynesia|tahiti",NIU:"niue",DMA:"dominica(?!n)",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",BEN:"benin|dahome",GUF:"^(?=.*french).*guiana",BEL:"^(?!.*luxem).*belgium",MSR:"montserrat",TGO:"togo",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GUM:"\\bguam",LKA:"sri.?lanka|ceylon",SSD:"\\bs\\w*.?sudan",FLK:"falkland|malvinas",PCN:"pitcairn",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",GUY:"guyana|british.?guiana",CRI:"costa.?rica",COK:"\\bcook",MAR:"morocco|\\bmaroc",MNP:"mariana",LSO:"lesotho|basuto",HUN:"^(?!.*austr).*hungary",TKM:"turkmen",SUR:"surinam|dutch.?guiana",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",BMU:"bermuda",HMD:"heard.*mcdonald",TCD:"\\bchad",GEO:"^(?!.*south).*georgia",MNE:"^(?!.*serbia).*montenegro",MNG:"mongolia",MHL:"marshall",MTQ:"martinique",CSK:"czechoslovakia",BLZ:"belize|^(?=.*british).*honduras",DDR:"german.?democratic.?republic|^(d|g)\\.?d\\.?r\\.?$|^(?=.*east).*germany",MMR:"myanmar|burma",AFG:"afghan",BDI:"burundi",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",BLR:"belarus|byelo",BLM:"barth(e|)lemy",GRD:"grenada",TKL:"tokelau",GRC:"greece|hellenic|hellas",GRL:"greenland",SHN:"helena",AND:"andorra",MOZ:"mozambique",TJK:"tajik",THA:"thailand|\\bsiam",HTI:"haiti",MEX:"\\bmexic",ANT:"^(?=.*\\bant).*(nether|dutch)",ZWE:"zimbabwe|^(?!.*northern).*rhodesia",LCA:"\\blucia",IND:"india(?!.*ocea)",LVA:"latvia",BTN:"bhutan",VCT:"vincent",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",NOR:"norway",CZE:"^(?=.*rep).*czech|czechia|bohemia",ATF:"french.?southern|\\bfr.*\\bso.*\\ban.*\\b\\bt",ATG:"antigua",FJI:"fiji",HND:"^(?!.*brit).*honduras",MUS:"mauritius",DOM:"dominican",LUX:"^(?!.*belg).*luxem",ISR:"israel",YUG:"yugoslavia",FSM:"micronesia",PER:"peru",REU:"r(e|)union",IDN:"indonesia",VUT:"vanuatu|new.?hebrides",MKD:"macedonia|^f\\.?y\\.?r\\.?o\\.?m\\.?$",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bdr|\\bdr.*congo|\\bd\\.?r\\.?c|\\bd\\.?r\\.?o\\.?c|\\br\\.?d\\.?c|belgian.?congo|congo.?free.?state|kinshasa|zaire|l\\w{1,2}opoldville",COG:"^(?!.*\\bdem)(?!.*\\bdr)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l\\w{1,2}opoldville)(?!.*free).*\\bcongo",ISL:"iceland",GLP:"guadeloupe",ETH:"ethiopia|abyssinia",COM:"comoro",COL:"colombia",NGA:"nigeria",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TWN:"taiwan|taipei|formosa",PRT:"portugal",MDA:"moldov|b(a|e)ssarabia",GGY:"guernsey",MDG:"madagascar|malagasy",ATA:"antarctica",ECU:"ecuador",SEN:"senegal",ESH:"sahara",MDV:"maldive",ASM:"^(?=.*americ).*samoa",SPM:"miquelon",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",LTU:"lithuania",RWA:"rwanda",ZMB:"zambia|northern.?rhodesia",GMB:"gambia",WLF:"futuna|wallis",JEY:"jersey",FRO:"faroe|faeroe",GTM:"guatemala",DNK:"denmark",IMN:"^(?=.*isle).*\\bman",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baust.*\\bemp",SJM:"svalbard",VEN:"venezuela",PLW:"palau",KEN:"kenya|british.?east.?africa|east.?africa.?prot",TUR:"turkey",ALB:"albania",OMN:"\\boman|trucial",TUV:"tuvalu",ALA:"\\b(a|)land",BRN:"brunei",TUN:"tunisia",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",BRB:"barbados",BRA:"brazil",CIV:"ivoire|ivory",SRB:"^(?!.*monte).*serbia",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",USA:"^(?!.*islands).*united.?states|^u\\.?s\\.?a\\.?$|^u\\.?s\\.?$",QAT:"qatar",WSM:"^(?!.*amer).*samoa",AZE:"azerbaijan",GNB:"bissau|^(?=.*portu).*guinea",SWZ:"swaziland",TON:"tonga",CAN:"canada",UKR:"ukrain",KOR:"^(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea|\\br\\.?o\\.?k\\b",AIA:"anguill?a",CAF:"\\bcen.*\\baf|^c\\.?a\\.?r\\.?$",CHE:"switz|swiss",CYP:"cyprus",BIH:"herzegovina|bosnia",SGP:"singapore",SGS:"south.?georgia|sandwich",SOM:"somali",UZB:"uzbek",CMR:"cameroon",POL:"poland",EAZ:"zanz",KWT:"kuwait",ERI:"eritrea",GAB:"gabon",CYM:"cayman",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",EST:"estonia",MWI:"malawi|nyasa",ESP:"spain",IRQ:"\\biraq|mesopotamia",SLV:"el.?salvador",MLI:"\\bmali\\b",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",IRL:"ireland",IRN:"\\biran|persia",ABW:"^(?!.*bonaire).*\\baruba",SLE:"sierra",PAN:"panama",SDN:"^(?!.*\\bs(?!u)).*sudan",SLB:"solomon",NZL:"new.?zealand",MCO:"monaco",ITA:"italy",JPN:"japan",KGZ:"kyrgyz|kirghiz",UGA:"uganda",NCL:"new.?caledonia",PNG:"papua|\\bp.*\\bn.*\\bguin.*|^p\\.?n\\.?g\\.?$|new.?guinea",ARG:"argentin",SWE:"sweden",BHS:"bahamas",BHR:"bahrain",ARM:"armenia",NRU:"nauru",CUB:"\\bcuba"}},{}],300:[function(e,t,n){"use strict";var r=t.exports={};r.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa"},r.axesNames=["lonaxis","lataxis"],r.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},r.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},r.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,80],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},r.clipPad=.001,r.precision=.1,r.landColor="#F0DC82",r.waterColor="#3399FF",r.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},r.sphereSVG={type:"Sphere"},r.fillLayers=["ocean","land","lakes"],r.lineLayers=["subunits","countries","coastlines","rivers","frame"],r.baseLayers=["ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame"],r.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"},r.baseLayersOverChoropleth=["rivers","lakes"]},{}],301:[function(e,t,n){t.exports={solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}},{}],302:[function(e,t,n){t.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],303:[function(e,t,n){t.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},{}],304:[function(e,t,n){"undefined"!=typeof MathJax?(n.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):n.MathJax=!1},{}],305:[function(e,t,n){var r=e("./plotly");n.plot=r.plot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.setPlotConfig=e("./plot_api/set_plot_config"),n.Plots=r.Plots,n.Fx=r.Fx,n.Snapshot=r.Snapshot,n.PlotSchema=r.PlotSchema,n.Queue=r.Queue,n.d3=e("d3")},{"./plot_api/set_plot_config":329,"./plotly":330,d3:53}],306:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){Array.isArray(e)&&(t[n]=e[r])}},{}],307:[function(e,t,n){"use strict";var r=e("../plotly"),i=e("fast-isnumeric"),s=e("tinycolor2"),o=e("./nested_property");Object.keys(e("../components/colorscale/scales")),n.valObjects={data_array:{coerceFunction:function(e,t,n){Array.isArray(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)}},"boolean":{coerceFunction:function(e,t,n){e===!0||e===!1?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,r){!i(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,r){e%1||!i(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){if(r.strict===!0&&"string"!=typeof e)return void t.set(n);var i=String(e);void 0===e||r.noBlank===!0&&!i?t.set(n):t.set(i)}},color:{coerceFunction:function(e,t,n){s(e).isValid()?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(r.Colorscale.getScale(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):i(e)?(Math.abs(e)>180&&(e-=360*Math.round(e/360)),t.set(+e)):t.set(n)}},axisid:{coerceFunction:function(e,t,n){if("string"==typeof e&&e.charAt(0)===n){var r=Number(e.substr(1));if(r%1===0&&r>1)return void t.set(e)}t.set(n)}},sceneid:{coerceFunction:function(e,t,n){if("string"==typeof e&&e.substr(0,5)===n){var r=Number(e.substr(5));if(r%1===0&&r>1)return void t.set(e)}t.set(n)}},geoid:{coerceFunction:function(e,t,n){if("string"==typeof e&&e.substr(0,3)===n){var r=Number(e.substr(3));if(r%1===0&&r>1)return void t.set(e)}t.set(n)}},flaglist:{coerceFunction:function(e,t,n,r){if("string"!=typeof e)return void t.set(n);if(-1!==r.extras.indexOf(e))return void t.set(e);for(var i=e.split("+"),s=0;s<i.length;){var o=i[s];-1===r.flags.indexOf(o)||i.indexOf(o)<s?i.splice(s,1):s++}i.length?t.set(i.join("+")):t.set(n)}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,t,r,i){if(!Array.isArray(e))return void t.set(r);var s=i.items,o=[];r=Array.isArray(r)?r:[];for(var u=0;u<s.length;u++)n.coerce(e,o,s,"["+u+"]",r[u]);t.set(o)}}},n.coerce=function(e,t,r,i,s){var u=o(r,i).get(),a=o(e,i),f=o(t,i),l=a.get();return void 0===s&&(s=u.dflt),u.arrayOk&&Array.isArray(l)?(f.set(l),l):(n.valObjects[u.valType].coerceFunction(l,f,s,u),f.get())},n.coerce2=function(e,t,r,i,s){var u=o(e,i),a=n.coerce(e,t,r,i,s);return u.get()?a:!1},n.coerceFont=function(e,t,n){var r={};return n=n||{},r.family=e(t+".family",n.family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r}},{"../components/colorscale/scales":288,"../plotly":330,"./nested_property":317,"fast-isnumeric":58,tinycolor2:213}],308:[function(e,t,n){"use strict";function r(e,t){return String(e+Math.pow(10,t)).substr(1)}function i(e){var t;return t=y.test(e)?"Y":"y",t+=b.test(e)?"b":""}function s(e){var t;return t=E.test(e)?w.test(e)?"I":"H":"D"}var o=e("d3"),u=e("fast-isnumeric");n.dateTime2ms=function(e){try{if(e.getTime)return+e}catch(t){return!1}var n,r,i,s,o=String(e).split(" ");if(o.length>2)return!1;var a=o[0].split("-");if(a.length>3||3!==a.length&&o[1])return!1;if(4===a[0].length)n=Number(a[0]);else{if(2!==a[0].length)return!1;var f=(new Date).getFullYear();n=((Number(a[0])-f+70)%100+200)%100+f-70}return u(n)?1===a.length?(new Date(n,0,1)).getTime():(r=Number(a[1])-1,a[1].length>2||!(r>=0&&11>=r)?!1:2===a.length?(new Date(n,r,1)).getTime():(i=Number(a[2]),a[2].length>2||!(i>=1&&31>=i)?!1:(i=(new Date(n,r,i)).getTime(),o[1]?(a=o[1].split(":"),a.length>3?!1:(s=Number(a[0]),a[0].length>2||!(s>=0&&23>=s)?!1:(i+=36e5*s,1===a.length?i:(r=Number(a[1]),a[1].length>2||!(r>=0&&59>=r)?!1:(i+=6e4*r,2===a.length?i:(e=Number(a[2]),e>=0&&60>e?i+1e3*e:!1)))))):i))):!1},n.isDateTime=function(e){return n.dateTime2ms(e)!==!1},n.ms2DateTime=function(e,t){if("undefined"==typeof o)return void console.log("d3 is not defined");t||(t=0);var n=new Date(e),i=o.time.format("%Y-%m-%d")(n);return 7776e6>t?(i+=" "+r(n.getHours(),2),432e6>t&&(i+=":"+r(n.getMinutes(),2),108e5>t&&(i+=":"+r(n.getSeconds(),2),3e5>t&&(i+="."+r(n.getMilliseconds(),3)))),i.replace(/([:\s]00)*\.?[0]*$/,"")):i};var a={H:["%H:%M:%S~%L","%H:%M:%S","%H:%M"],I:["%I:%M:%S~%L%p","%I:%M:%S%p","%I:%M%p"],D:["%H","%I%p","%Hh"]},f={Y:["%Y~%m~%d","%Y%m%d","%y%m%d","%m~%d~%Y","%d~%m~%Y"],Yb:["%b~%d~%Y","%d~%b~%Y","%Y~%d~%b","%Y~%b~%d"],y:["%m~%d~%y","%d~%m~%y","%y~%m~%d"],yb:["%b~%d~%y","%d~%b~%y","%y~%d~%b","%y~%b~%d"]},l=o.time.format.utc,c={Y:{H:["%Y~%m~%dT%H:%M:%S","%Y~%m~%dT%H:%M:%S~%L"].map(l),I:[],D:["%Y%m%d%H%M%S","%Y~%m","%m~%Y"].map(l)},Yb:{H:[],I:[],D:["%Y~%b","%b~%Y"].map(l)},y:{H:[],I:[],D:[]},yb:{H:[],I:[],D:[]}};["Y","Yb","y","yb"].forEach(function(e){f[e].forEach(function(t){c[e].D.push(l(t)),["H","I","D"].forEach(function(n){a[n].forEach(function(r){var i=c[e][n];i.push(l(t+"~"+r)),i.push(l(r+"~"+t))})})})});var h=/[a-z]*/g,p=function(e){return e.substr(0,3)},d=/(mon|tue|wed|thu|fri|sat|sun|the|of|st|nd|rd|th)/g,v=/[\s,\/\-\.\(\)]+/g,m=/~?([ap])~?m(~|$)/,g=function(e,t){return t+"m "},y=/\d\d\d\d/,b=/(^|~)[a-z]{3}/,w=/[ap]m/,E=/:/,S=/q([1-4])/,x=["31~mar","30~jun","30~sep","31~dec"],T=function(e,t){return x[t-1]},N=/ ?([+\-]\d\d:?\d\d|Z)$/;n.parseDate=function(e){if(e.getTime)return e;if("string"!=typeof e)return!1;e=e.toLowerCase().replace(h,p).replace(d,"").replace(v,"~").replace(m,g).replace(S,T).trim().replace(N,"");var t,n,r=null,o=i(e),u=s(e);t=c[o][u],n=t.length;for(var a=0;n>a&&!(r=t[a].parse(e));a++);if(r instanceof Date){var f=r.getTimezoneOffset();return r.setTime(r.getTime()+60*f*1e3),r}return!1}},{d3:53,"fast-isnumeric":58}],309:[function(e,t,n){"use strict";var r=e("events").EventEmitter,i={init:function(e){if(e._ev instanceof r)return e;var t=new r;return e._ev=t,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e.emit=function(n,r){"undefined"!=typeof $&&$(e).trigger(n,r),t.emit(n,r)},e},triggerHandler:function(e,t,n){var r,i;"undefined"!=typeof $&&(r=$(e).triggerHandler(t,n));var s=e._ev;if(!s)return r;var o=s._events[t];if(!o)return r;"function"==typeof o&&(o=[o]);for(var u=o.pop(),a=0;a<o.length;a++)o[a](n);return i=u(n),void 0!==r?r:i}};t.exports=i},{events:57}],310:[function(e,t,n){"use strict";function r(e,t,n){for(var o,u,f,l,c,h,p=e[0],d=e.length,v=1;d>v;v++){o=e[v];for(u in o)f=p[u],l=o[u],t&&l&&(i(l)||(c=s(l)))?(c?(c=!1,h=f&&s(f)?f:[]):h=f&&i(f)?f:{},p[u]=r([h,l],t,n)):("undefined"!=typeof l||n)&&(p[u]=l)}return p}var i=e("./is_plain_object.js"),s=Array.isArray;n.extendFlat=function(){return r(arguments,!1,!1)},n.extendDeep=function(){return r(arguments,!0,!1)},n.extendDeepAll=function(){return r(arguments,!0,!0)}},{"./is_plain_object.js":315}],311:[function(e,t,n){"use strict";function r(e,t){var n=f[e];return n(t)}function i(e){for(var t,n,r=0;r<a.length;r++)if(t=a[r],n=new RegExp(u[t]),n.test(e.toLowerCase()))return t;console.warn("unrecognized country name: "+e+".")}var s=t.exports={},o=e("../plotly"),u=e("../constants/country-name_to_iso3.json"),a=Object.keys(u),f={"ISO-3":o.Lib.identity,"USA-states":o.Lib.identity,"country names":i};s.locationToFeature=function(e,t,n){for(var i,s=r(e,t),o=0;o<n.length;o++)if(i=n[o],i.id===s)return i;console.warn(["location with id",s,"does not have a matching topojson feature at this resolution."].join(" "))}},{"../constants/country-name_to_iso3.json":299,"../plotly":330}],312:[function(e,t,n){"use strict";function r(e,t){var n=l(e);return n[3]*=t,n}function i(e){return a(e).isValid()?e:c}function s(e){return f(e)?e:h}function o(e,t,n){var o,a,f,l,p,d=e.color,v=Array.isArray(d),m=Array.isArray(t),g=[];if(o=void 0!==e.colorscale?u.Colorscale.makeScaleFunction(e.colorscale,e.cmin,e.cmax):i,a=v?function(e,t){return void 0===e[t]?c:o(e[t])}:i,f=m?function(e,t){return void 0===e[t]?h:s(e[t])}:s,v||m)for(var y=0;n>y;y++)l=a(d,y),p=f(t,y),g[y]=r(l,p);else g=r(d,t);return g}var u=e("../plotly"),a=e("tinycolor2"),f=e("fast-isnumeric"),l=e("./str2rgbarray"),c=e("../components/color/attributes").defaultLine,h=1;t.exports=o},{"../components/color/attributes":282,"../plotly":330,"./str2rgbarray":323,"fast-isnumeric":58,tinycolor2:213}],313:[function(e,t,n){"use strict";function r(e){for(var t=0;(t=e.indexOf("<sup>",t))>=0;){var n=e.indexOf("</sup>",t);if(t>n)break;e=e.slice(0,t)+a(e.slice(t+5,n))+e.slice(n+6)}return e}function i(e){return e.replace(/\<br\>/g,"\n")}function s(e){return e.replace(/\<.*\>/g,"")}function o(e){for(var t=0;(t=e.indexOf("&",t))>=0;){var n=e.indexOf(";",t);if(t>n)t+=1;else{var r=f[e.slice(t+1,n)];e=r?e.slice(0,t)+r+e.slice(n+1):e.slice(0,t)+e.slice(n+1)}}return e}function u(e){return""+o(s(r(i(e))))}var a=e("superscript-text"),f={mu:"",amp:"&",lt:"<",gt:">"};t.exports=u},{"superscript-text":199}],314:[function(e,t,n){"use strict";var r=e("d3"),i=t.exports={};i.nestedProperty=e("./nested_property"),i.isPlainObject=e("./is_plain_object");var s=e("./coerce");i.valObjects=s.valObjects,i.coerce=s.coerce,i.coerce2=s.coerce2,i.coerceFont=s.coerceFont;var o=e("./dates");i.dateTime2ms=o.dateTime2ms,i.isDateTime=o.isDateTime,i.ms2DateTime=o.ms2DateTime,i.parseDate=o.parseDate;var u=e("./search");i.findBin=u.findBin,i.sorterAsc=u.sorterAsc,i.distinctVals=u.distinctVals,i.roundUp=u.roundUp;var a=e("./stats");i.aggNums=a.aggNums,i.len=a.len,i.mean=a.mean,i.variance=a.variance,i.stdev=a.stdev,i.interp=a.interp;var f=e("./matrix");i.init2dArray=f.init2dArray,i.transposeRagged=f.transposeRagged,i.dot=f.dot,i.translationMatrix=f.translationMatrix,i.rotationMatrix=f.rotationMatrix,i.rotationXYMatrix=f.rotationXYMatrix,i.apply2DTransform=f.apply2DTransform,i.apply2DTransform2=f.apply2DTransform2;var l=e("./extend");i.extendFlat=l.extendFlat,i.extendDeep=l.extendDeep,i.extendDeepAll=l.extendDeepAll,i.notifier=e("./notifier"),i.swapAttrs=function(e,t,n,r){n||(n="x"),r||(r="y");for(var s=0;s<t.length;s++){var o=t[s],u=i.nestedProperty(e,o.replace("?",n)),a=i.nestedProperty(e,o.replace("?",r)),f=u.get();u.set(a.get()),a.set(f)}},i.pauseEvent=function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,!1},i.VERBOSE=!1,i.TIMER=(new Date).getTime(),i.log=function(){i.VERBOSE&&console.log.apply(console,arguments)},i.markTime=function(e){if(i.VERBOSE){var t=(new Date).getTime();console.log(e,t-i.TIMER,"(msec)"),"trace"===i.VERBOSE&&console.trace(),i.TIMER=t}},i.constrain=function(e,t,n){return t>n?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},i.bBoxIntersect=function(e,t,n){return n=n||0,e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},i.identity=function(e){return e},i.randstr=function c(e,t,n){if(n||(n=16),void 0===t&&(t=24),0>=t)return"0";var r,i,s,o=Math.log(Math.pow(2,t))/Math.log(n),u="";for(r=2;o===1/0;r*=2)o=Math.log(Math.pow(2,t/r))/Math.log(n)*r;var a=o-Math.floor(o);for(r=0;r<Math.floor(o);r++)s=Math.floor(Math.random()*n).toString(n),u=s+u;a&&(i=Math.pow(n,a),s=Math.floor(Math.random()*i).toString(n),u=s+u);var f=parseInt(u,n);return e&&e.indexOf(u)>-1||f!==1/0&&f>=Math.pow(2,t)?c(e,t,n):u},i.OptionControl=function(e,t){e||(e={}),t||(t="opt");var n={};return n.optionList=[],n._newoption=function(r){r[t]=e,n[r.name]=r,n.optionList.push(r)},n["_"+t]=e,n},i.smooth=function(e,t){if(t=Math.round(t)||0,2>t)return e;var n,r,i,s,o=e.length,u=2*o,a=2*t-1,f=new Array(a),l=new Array(o);for(n=0;a>n;n++)f[n]=(1-Math.cos(Math.PI*(n+1)/t))/(2*t);for(n=0;o>n;n++){for(s=0,r=0;a>r;r++)i=n+r+1-t,-o>i?i-=u*Math.round(i/u):i>=u&&(i-=u*Math.floor(i/u)),0>i?i=-1-i:i>=o&&(i=u-1-i),s+=e[i]*f[r];l[n]=s}return l},i.promiseError=function(e){console.log(e,e.stack)},i.syncOrAsync=function(e,t,n){function r(){return i.markTime("async done "+o.name),i.syncOrAsync(e,t,n)}for(var s,o;e.length;){if(o=e.splice(0,1)[0],s=o(t),s&&s.then)return s.then(r).then(void 0,i.promiseError);i.markTime("sync done "+o.name)}return n&&n(t)},i.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},i.noneOrAll=function(e,t,n){if(e){var r,i,s=!1,o=!0;for(r=0;r<n.length;r++)i=e[n[r]],void 0!==i&&null!==i?s=!0:o=!1;if(s&&!o)for(r=0;r<n.length;r++)e[n[r]]=t[n[r]]}},i.mergeArray=function(e,t,n){if(Array.isArray(e))for(var r=Math.min(e.length,t.length),i=0;r>i;i++)t[i][n]=e[i]},i.minExtend=function(e,t){var n={};"object"!=typeof t&&(t={});var r,s,o,u=3,a=Object.keys(e);for(r=0;r<a.length;r++)s=a[r],o=e[s],"_"!==s.charAt(0)&&"function"!=typeof o&&("module"===s?n[s]=o:Array.isArray(o)?n[s]=o.slice(0,u):o&&"object"==typeof o?n[s]=i.minExtend(e[s],t[s]):n[s]=o);for(a=Object.keys(t),r=0;r<a.length;r++)s=a[r],o=t[s],"object"==typeof o&&s in n&&"object"==typeof n[s]||(n[s]=o);return n},i.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},i.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},i.getPlotDiv=function(e){for(;e&&e.removeAttribute;e=e.parentNode)if(i.isPlotDiv(e))return e},i.isPlotDiv=function(e){var t=r.select(e);return t.size()&&t.classed("js-plotly-plot")},i.removeElement=function(e){var t=e&&e.parentNode;t&&t.removeChild(e)},i.addStyleRule=function(e,t){if(!i.styleSheet){var n=document.createElement("style");n.appendChild(document.createTextNode("")),document.head.appendChild(n),i.styleSheet=n.sheet}var r=i.styleSheet;r.insertRule?r.insertRule(e+"{"+t+"}",0):r.addRule?r.addRule(e,t,0):console.warn("addStyleRule failed")},i.isIE=function(){return"undefined"!=typeof window.navigator.msSaveBlob}},{"./coerce":307,"./dates":308,"./extend":310,"./is_plain_object":315,"./matrix":316,"./nested_property":317,"./notifier":318,"./search":320,"./stats":322,d3:53}],315:[function(e,t,n){"use strict";t.exports=function(e){return"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e)===Object.prototype}},{}],316:[function(e,t,n){"use strict";n.init2dArray=function(e,t){for(var n=new Array(e),r=0;e>r;r++)n[r]=new Array(t);return n},n.transposeRagged=function(e){var t,n,r=0,i=e.length;for(t=0;i>t;t++)r=Math.max(r,e[t].length);var s=new Array(r);for(t=0;r>t;t++)for(s[t]=new Array(i),n=0;i>n;n++)s[t][n]=e[n][t];return s},n.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var i,s,o=e.length;if(e[0].length)for(i=new Array(o),s=0;o>s;s++)i[s]=n.dot(e[s],t);else if(t[0].length){var u=n.transposeRagged(t);for(i=new Array(u.length),s=0;s<u.length;s++)i[s]=n.dot(e,u[s])}else for(i=0,s=0;o>s;s++)i+=e[s]*t[s];return i},n.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},n.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},n.rotationXYMatrix=function(e,t,i){return n.dot(n.dot(n.translationMatrix(t,i),n.rotationMatrix(e)),n.translationMatrix(-t,-i))},n.apply2DTransform=function(e){return function(){var t=arguments;3===t.length&&(t=t[0]);var i=1===arguments.length?t[0]:[t[0],t[1]];return n.dot(e,[i[0],i[1],1]).slice(0,2)}},n.apply2DTransform2=function(e){var t=n.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}}},{}],317:[function(e,t,n){"use strict";function r(e,t){return function(){var n,i,s,o,u,a=e;for(o=0;o<t.length-1;o++){if(n=t[o],-1===n){for(i=!0,s=[],u=0;u<a.length;u++)s[u]=r(a[u],t.slice(o+1))(),s[u]!==s[0]&&(i=!1);return i?s[0]:s}if("number"==typeof n&&!Array.isArray(a))return void 0;if(a=a[n],"object"!=typeof a||null===a)return void 0}return"object"!=typeof a||null===a?void 0:(s=a[t[o]],null===s?void 0:s)}}function i(e,t){var n=["annotations","shapes","range","domain"],r=-1===n.indexOf(t);return Array.isArray(e)&&r}function s(e,t){return function(n){var r,s,l=e,c=[e],h=f(n)&&!i(n,t[t.length-1]);for(s=0;s<t.length-1;s++){if(r=t[s],"number"==typeof r&&!Array.isArray(l))throw"array index but container is not an array";if(-1===r){if(h=!o(l,t.slice(s+1),n))break;return}if(!u(l,r,t[s+1],h))break;if(l=l[r],"object"!=typeof l||null===l)throw"container is not an object";c.push(l)}h?(s===t.length-1&&delete l[t[s]],a(c)):l[t[s]]=n}}function o(e,t,n){var r,i=Array.isArray(n),o=!0,a=n,l=i?!1:f(n),c=t[0];for(r=0;r<e.length;r++)i&&(a=n[r%n.length],l=f(a)),l&&(o=!1),u(e,r,c,l)&&s(e[r],t)(a);return o}function u(e,t,n,r){if(void 0===e[t]){if(r)return!1;"number"==typeof n?e[t]=[]:e[t]={}}return!0}function a(e){var t,n,r,s,o;for(t=e.length-1;t>=0;t--){if(r=e[t],o=!1,Array.isArray(r))for(n=r.length-1;n>=0;n--)f(r[n])?o?r[n]=void 0:r.pop():o=!0;else if("object"==typeof r&&null!==r)for(s=Object.keys(r),o=!1,n=s.length-1;n>=0;n--)f(r[s[n]])&&!i(r[s[n]],s[n])?delete r[s[n]]:o=!0;if(o)return}}function f(e){return void 0===e||null===e?!0:"object"!=typeof e?!1:Array.isArray(e)?!e.length:!Object.keys(e).length}function l(e,t,n){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:n,obj:e}}var c=e("fast-isnumeric");t.exports=function(e,t){if(c(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,i,o,u=0,a=t.split(".");u<a.length;){if(n=String(a[u]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])a[u]=n[1];else{if(0!==u)throw"bad property string";a.splice(0,1)}for(i=n[2].substr(1,n[2].length-2).split("]["),o=0;o<i.length;o++)u++,a.splice(u,0,Number(i[o]))}u++}return"object"!=typeof e?l(e,t,a):{set:s(e,a),get:r(e,a),astr:t,parts:a,obj:e}}},{"fast-isnumeric":58}],318:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),s=[];t.exports=function(e,t){function n(e){e.duration(700).style("opacity",0).each("end",function(e){var t=s.indexOf(e);-1!==t&&s.splice(t,1),r.select(this).remove()})}if(-1===s.indexOf(e)){s.push(e);var o=1e3;i(t)?o=t:"long"===t&&(o=3e3);var u=r.select("body").selectAll(".plotly-notifier").data([0]);u.enter().append("div").classed("plotly-notifier",!0);var f=u.selectAll(".notifier-note").data(s);f.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var t=r.select(this);t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(n)}),t.append("p").html(e),t.transition().duration(700).style("opacity",1).transition().delay(o).call(n)})}}},{d3:53,"fast-isnumeric":58}],319:[function(e,t,n){"use strict";function r(e,t){for(var n,r=[],s=0;s<t.length;s++)n=t[s],n===e?r[s]=n:"object"==typeof n?r[s]=Array.isArray(n)?i.Lib.extendDeep([],n):i.Lib.extendDeepAll({},n):r[s]=n;return r}var i=e("../plotly"),s={};s.add=function(e,t,n,r,i){var s,o;return e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay?void (e.undoQueue.inSequence||(e.autoplay=!1)):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(s={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,s),e.undoQueue.index+=1):s=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,s.undo.calls.unshift(t),s.undo.args.unshift(n),s.redo.calls.push(r),void s.redo.args.push(i))},s.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},s.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},s.undo=function(e){var t,n;if(e.framework&&e.framework.isPolar)return void e.framework.undo();if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)s.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},s.redo=function(e){var t,n;if(e.framework&&e.framework.isPolar)return void e.framework.redo();if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)s.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}},s.plotDo=function(e,t,n){e.autoplay=!0,n=r(e,n),t.apply(null,n)},t.exports=s},{"../plotly":330}],320:[function(e,t,n){"use strict";function r(e,t){return t>e}function i(e,t){return t>=e}function s(e,t){return e>t}function o(e,t){return e>=t}var u=e("fast-isnumeric");n.findBin=function(e,t,n){if(u(t.start))return n?Math.ceil((e-t.start)/t.size)-1:Math.floor((e-t.start)/t.size);var f,l,c=0,h=t.length,p=0;for(l=t[t.length-1]>t[0]?n?r:i:n?o:s;h>c&&p++<100;)f=Math.floor((c+h)/2),l(t[f],e)?c=f+1:h=f;return p>90&&console.log("Long binary search..."),c-1},n.sorterAsc=function(e,t){return e-t},n.distinctVals=function(e){var t=e.slice();t.sort(n.sorterAsc);for(var r=t.length-1,i=t[r]-t[0]||1,s=i/(r||1)/1e4,o=[t[0]],u=0;r>u;u++)t[u+1]>t[u]+s&&(i=Math.min(i,t[u+1]-t[u]),o.push(t[u+1]));return{vals:o,minDiff:i}},n.roundUp=function(e,t,n){for(var r,i=0,s=t.length-1,o=0,u=n?0:1,a=n?1:0,f=n?Math.ceil:Math.floor;s>i&&o++<100;)r=f((i+s)/2),t[r]<=e?i=r+u:s=r-a;return t[i]}},{"fast-isnumeric":58}],321:[function(e,t,n){"use strict";var r=e("../plotly");t.exports=function(e){var t=function(){};for(var n in e)"function"==typeof e[n]&&(e[n]=t);e.destroy=function(){e.container.parentNode.removeChild(e.container)};var i=document.createElement("div");return i.textContent="Webgl is not supported by your browser - visit http://get.webgl.org for more info",i.style.cursor="pointer",i.style.fontSize="24px",i.style.color=r.Color.defaults[0],e.container.appendChild(i),e.container.style.background="#FFFFFF",e.container.onclick=function(){window.open("http://get.webgl.org")},!1}},{"../plotly":330}],322:[function(e,t,n){"use strict";var r=e("fast-isnumeric");n.aggNums=function(e,t,i,s){var o,u;if(s||(s=i.length),r(t)||(t=!1),Array.isArray(i[0])){for(u=new Array(s),o=0;s>o;o++)u[o]=n.aggNums(e,t,i[o]);i=u}for(o=0;s>o;o++)r(t)?r(i[o])&&(t=e(+t,+i[o])):t=i[o];return t},n.len=function(e){return n.aggNums(function(e){return e+1},0,e)},n.mean=function(e,t){return t||(t=n.len(e)),n.aggNums(function(e,t){return e+t},0,e)/t},n.variance=function(e,t,i){return t||(t=n.len(e)),r(i)||(i=n.mean(e,t)),n.aggNums(function(e,t){return e+Math.pow(t-i,2)},0,e)/t},n.stdev=function(e,t,r){return Math.sqrt(n.variance(e,t,r))},n.interp=function(e,t){if(!r(t))throw"n should be a finite number";if(t=t*e.length-.5,0>t)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},{"fast-isnumeric":58}],323:[function(e,t,n){"use strict";function r(e){return e=i(e),s.str2RgbaArray(e.toRgbString())}var i=e("tinycolor2"),s=e("arraytools");t.exports=r},{arraytools:32,tinycolor2:213}],324:[function(e,t,n){"use strict";function r(e,t){return e.node().getBoundingClientRect()[t]}function i(e){return e.replace(/(<|&lt;|&#60;)/g,"\\lt ").replace(/(>|&gt;|&#62;)/g,"\\gt ")}function s(e,t,n){var r="math-output-"+a.Lib.randstr([],64),s=f.select("body").append("div").attr({id:r}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(i(e));MathJax.Hub.Queue(["Typeset",MathJax.Hub,s.node()],function(){var t=f.select("body").select("#MathJax_SVG_glyphs");if(s.select(".MathJax_SVG").empty()||!s.select("svg").node())console.log("There was an error in the tex syntax.",e),n();else{var r=s.select("svg").node().getBoundingClientRect();n(s.select(".MathJax_SVG"),t,r)}s.remove()})}function o(e){for(var t=a.util.html_entity_decode(e),n=t.split(/(<[^<>]*>)/).map(function(e){var t=e.match(/<(\/?)([^ >]*)\s*(.*)>/i),n=t&&t[2].toLowerCase(),r=c[n];if(void 0!==r){var i=t[1],s=t[3],o=s.match(/^style\s*=\s*"([^"]+)"\s*/i);if("a"===n)return i?"</a>":"href"!==s.substr(0,4).toLowerCase()?"<a>":'<a xlink:show="new" xlink:href'+s.substr(4)+">";if("br"===n)return"<br>";if(i)return"sup"===n?'</tspan><tspan dy="0.42em">&#x200b;</tspan>':"sub"===n?'</tspan><tspan dy="-0.21em">&#x200b;</tspan>':"</tspan>";var u="<tspan";return("sup"===n||"sub"===n)&&(u="&#x200b;"+u),o&&(o=o[1].replace(/(^|;)\s*color:/,"$1 fill:"),r=(r?r+";":"")+o),u+(r?' style="'+r+'"':"")+">"}return a.util.xml_entity_encode(e).replace(/</g,"&lt;")}),r=[],i=n.indexOf("<br>");i>0;i=n.indexOf("<br>",i+1))r.push(i);var s=0;r.forEach(function(e){for(var t=e+s,r=n.slice(0,t),i="",o=r.length-1;o>=0;o--){var u=r[o].match(/<(\/?).*>/i);if(u&&"<br>"!==r[o]){u[1]||(i=r[o]);break}}i&&(n.splice(t+1,0,i),n.splice(t,0,"</tspan>"),s+=2)});var o=n.join(""),u=o.split(/<br>/gi);return u.length>1&&(n=u.map(function(e,t){return'<tspan class="line" dy="'+1.3*t+'em">'+e+"</tspan>"})),n.join("")}function u(e,t,n){var r,i,s,o=n.horizontalAlign,u=n.verticalAlign||"top",a=e.node().getBoundingClientRect(),f=t.node().getBoundingClientRect();return i="bottom"===u?function(){return a.bottom-r.height}:"middle"===u?function(){return a.top+(a.height-r.height)/2}:function(){return a.top},s="right"===o?function(){return a.right-r.width}:"center"===o?function(){return a.left+(a.width-r.width)/2}:function(){return a.left},function(){return r=this.node().getBoundingClientRect(),this.style({top:i()-f.top+"px",left:s()-f.left+"px","z-index":1e3}),this}}var a=e("../plotly"),f=e("d3"),l=t.exports={};f.selection.prototype.appendSVG=function(e){for(var t='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+e+"</svg>",n=(new DOMParser).parseFromString(t,"application/xml"),r=n.documentElement.firstChild;r;)this.node().appendChild(this.node().ownerDocument.importNode(r,!0)),r=r.nextSibling;return n.querySelector("parsererror")?(console.log(n.querySelector("parsererror div").textContent),null):f.select(this.node().lastChild)},l.html_entity_decode=function(e){var t=f.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":t.html(e).text()});return t.remove(),n},l.xml_entity_encode=function(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")},l.convertToTspans=function(e,t){function n(){p.empty()||(d=l.attr("class")+"-math",p.select("svg."+d).remove()),e.text("").style({visibility:"visible","white-space":"pre"}),h=e.appendSVG(u),h||e.text(i),e.select("a").size()&&e.style("pointer-events","all"),t&&t.call(l)}var i=e.text(),u=o(i),l=e,c=!l.attr("data-notex")&&u.match(/([^$]*)([$]+[^$]*[$]+)([^$]*)/),h=i,p=f.select(l.node().parentNode);if(!p.empty()){var d=l.attr("class")?l.attr("class").split(" ")[0]:"text";d+="-math",p.selectAll("svg."+d).remove(),p.selectAll("g."+d+"-group").remove(),e.style({visibility:null});for(var v=e.node();v&&v.removeAttribute;v=v.parentNode)v.removeAttribute("data-bb");if(c){var m=a.Lib.getPlotDiv(l.node());(m&&m._promises||[]).push(new Promise(function(e){l.style({visibility:"hidden"});var i={fontSize:parseInt(l.style("font-size"),10)};s(c[2],i,function(i,s,o){p.selectAll("svg."+d).remove(),p.selectAll("g."+d+"-group").remove();var u=i&&i.select("svg");if(!u||!u.node())return n(),void e();var a=p.append("g").classed(d+"-group",!0).attr({"pointer-events":"none"});a.node().appendChild(u.node()),s&&s.node()&&u.node().insertBefore(s.node().cloneNode(!0),u.node().firstChild),u.attr({"class":d,height:o.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var f=l.style("fill")||"black";u.select("g").attr({fill:f,stroke:f});var c=r(u,"width"),h=r(u,"height"),v=+l.attr("x")-c*{start:0,middle:.5,end:1}[l.attr("text-anchor")||"start"],m=parseInt(l.style("font-size"),10)||r(l,"height"),g=-m/4;"y"===d[0]?(a.attr({transform:"rotate("+[-90,+l.attr("x"),+l.attr("y")]+") translate("+[-c/2,g-h/2]+")"}),u.attr({x:+l.attr("x"),y:+l.attr("y")})):"l"===d[0]?u.attr({x:l.attr("x"),y:g-h/2}):"a"===d[0]?u.attr({x:0,y:g}):u.attr({x:v,y:+l.attr("y")+g-h/2}),t&&t.call(l,a),e(a)})}))}else n();return e}};var c={sup:'font-size:70%" dy="-0.6em',sub:'font-size:70%" dy="0.3em',b:"font-weight:bold",i:"font-style:italic",a:"",span:"",br:"",em:"font-style:italic;font-weight:bold"},h=new RegExp("</?("+Object.keys(c).join("|")+")( [^>]*)?/?>","g");l.plainText=function(e){return(e||"").replace(h," ")},l.makeEditable=function(e,t,n){function r(){s(),o.style({opacity:0});var e,t=h.attr("class");e=t?"."+t.split(" ")[0]+"-math-group":"[class*=-math-group]",e&&f.select(o.node().parentNode).select(e).style({opacity:0})}function i(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),t.focus()}function s(){var e=f.select(a.Lib.getPlotDiv(o.node())),t=e.select(".svg-container"),r=t.append("div");r.classed("plugin-editable editable",!0).style({position:"absolute","font-family":o.style("font-family")||"Arial","font-size":o.style("font-size")||12,color:n.fill||o.style("fill")||"black",opacity:1,"background-color":n.background||"transparent",outline:"#ffffff33 1px solid",margin:[-parseFloat(o.style("font-size"))/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(n.text||o.attr("data-unformatted")).call(u(o,t,n)).on("blur",function(){o.text(this.textContent).style({opacity:1});var e,t=f.select(this).attr("class");e=t?"."+t.split(" ")[0]+"-math-group":"[class*=-math-group]",e&&f.select(o.node().parentNode).select(e).style({opacity:0});var n=this.textContent;f.select(this).transition().duration(0).remove(),f.select(document).on("mouseup",null),l.edit.call(o,n)}).on("focus",function(){var e=this;f.select(document).on("mouseup",function(){return f.event.target===e?!1:void (document.activeElement===r.node()&&r.node().blur())})}).on("keyup",function(){27===f.event.which?(o.style({opacity:1}),f.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),l.cancel.call(o,this.textContent)):(l.input.call(o,this.textContent),f.select(this).call(u(o,t,n)))}).on("keydown",function(){13===f.event.which&&this.blur()}).call(i)}n||(n={});var o=this,l=f.dispatch("edit","input","cancel"),c=f.select(this.node()).style({"pointer-events":"all"}),h=t||c;return t&&c.style({"pointer-events":"none"}),n.immediate?r():h.on("click",r),f.rebind(this,l,"on")}},{"../plotly":330,d3:53}],325:[function(e,t,n){"use strict";var r=t.exports={},i=e("../constants/geo_constants").locationmodeToLayer,s=e("topojson").feature;r.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")},r.getTopojsonPath=function(e,t){return e+t+".json"},r.getTopojsonFeatures=function(e,t){var n=i[e.locationmode],r=t.objects[n];return s(t,r).features}},{"../constants/geo_constants":300,topojson:214}],326:[function(e,t,n){"use strict";function r(e){var t;if("string"==typeof e){if(t=document.getElementById(e),null===t)throw new Error("No DOM element with id '"+e+"' exits on the page.");return t}if(null===e||void 0===e)throw new Error("DOM element provided is null or undefined");return e}function i(e,t){e._fullLayout._paperdiv.style("background","white"),M.defaultConfig.setBackground(e,t)}function s(e,t){e._context||(e._context=M.Lib.extendFlat({},M.defaultConfig));var n=e._context;t&&(Object.keys(t).forEach(function(e){e in n&&("setBackground"===e&&"opaque"===t[e]?n[e]=i:n[e]=t[e])}),e._fullLayout&&e._fullLayout._modebar&&delete e._fullLayout._modebar,t.plot3dPixelRatio&&!n.plotGlPixelRatio&&(n.plotGlPixelRatio=n.plot3dPixelRatio)),n.staticPlot&&(n.editable=!1,n.autosizable=!1,n.scrollZoom=!1,n.doubleClick=!1,n.showTips=!1,n.showLink=!1,n.displayModeBar=!1)}function o(e){var t,n,r,i,s,o=e._fullLayout,u=e._fullData,a=B.getSubplotIds(o,"gl3d");for(o._paperdiv.style({width:o.width+"px",height:o.height+"px"}),e._context.setBackground(e,o.paper_bgcolor),t=0;t<a.length;t++)n=a[t],r=B.getSubplotData(u,"gl3d",n),i=o[n]._scene,void 0===i&&(s={container:e.querySelector(".gl-container"),id:n,staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio},i=new M.Scene(s,o),o[n]._scene=i),i.plot(r,o,e.layout)}function u(e){var t,n,r,i,s=e._fullLayout,o=e._fullData,u=B.getSubplotIds(s,"geo");for(void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}}),t=0;t<u.length;t++)n=u[t],r=B.getSubplotData(o,"geo",n),i=s[n]._geo,void 0===i&&(i=new M.Geo({id:n,container:s._geocontainer.node(),topojsonURL:e._context.topojsonURL},s),s[n]._geo=i),i.plot(r,s)}function a(e){for(var t=e._fullLayout,n=e._fullData,r=B.getSubplotIds(t,"gl2d"),i=0;i<r.length;i++){var s,o=r[i],u=t._plots[o],a=B.getSubplotData(n,"gl2d",o);s=u._scene2d,void 0===s&&(s=new M.Scene2D({container:e.querySelector(".gl-container"),id:o,staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio},t),u._scene2d=s),s.plot(a,t,e.layout)}}function f(e,t,n){var r=D.select(e).selectAll(".plot-container").data([0]);r.enter().insert("div",":first-child").classed("plot-container plotly",!0);var i=r.selectAll(".svg-container").data([0]);i.enter().append("div").classed("svg-container",!0).style("position","relative"),i.html(""),t&&(e.data=t),n&&(e.layout=n),M.micropolar.manager.fillLayout(e),"initial"===e._fullLayout.autosize&&e._context.autosizable&&(N(e,{}),e._fullLayout.autosize=n.autosize=!0),i.style({width:e._fullLayout.width+"px",height:e._fullLayout.height+"px"}),e.framework=M.micropolar.manager.framework(e),e.framework({data:e.data,layout:e.layout},i.node()),e.framework.setUndoPoint();var s=e.framework.svg(),o=1,u=e._fullLayout.title;""!==u&&u||(o=0);var a="Click to enter title",f=function(){this.call(M.util.convertToTspans)},l=s.select(".title-group text").call(f);if(e._context.editable){l.attr({"data-unformatted":u}),u&&u!==a||(o=.2,l.attr({"data-unformatted":a}).text(a).style({opacity:o}).on("mouseover.opacity",function(){D.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){D.select(this).transition().duration(1e3).style("opacity",0)}));var c=function(){this.call(M.util.makeEditable).on("edit",function(t){e.framework({layout:{title:t}}),this.attr({"data-unformatted":t}).text(t).call(f),this.call(c)}).on("cancel",function(){var e=this.attr("data-unformatted");this.text(e).call(f)})};l.call(c)}return e._context.setBackground(e,e._fullLayout.paper_bgcolor),B.addLinks(e),Promise.resolve()}function l(e){var t,n;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1);var r=M.Axes.list({_fullLayout:e});for(t=0;t<r.length;t++){var i=r[t];i.anchor&&"free"!==i.anchor&&(i.anchor=M.Axes.cleanId(i.anchor)),i.overlaying&&(i.overlaying=M.Axes.cleanId(i.overlaying)),i.type||(i.isdate?i.type="date":i.islog?i.type="log":i.isdate===!1&&i.islog===!1&&(i.type="linear")),("withzero"===i.autorange||"tozero"===i.autorange)&&(i.autorange=!0,i.rangemode="tozero"),delete i.islog,delete i.isdate,delete i.categories,d(i,"domain")&&delete i.domain,void 0!==i.autotick&&(void 0===i.tickmode&&(i.tickmode=i.autotick?"auto":"linear"),delete i.autotick)}void 0===e.annotations||Array.isArray(e.annotations)||(console.log("annotations must be an array"),delete e.annotations);var s=(e.annotations||[]).length;for(t=0;s>t;t++){var o=e.annotations[t];o.ref&&("paper"===o.ref?(o.xref="paper",o.yref="paper"):"data"===o.ref&&(o.xref="x",o.yref="y"),delete o.ref),c(o,"xref"),c(o,"yref")}void 0===e.shapes||Array.isArray(e.shapes)||(console.log("shapes must be an array"),delete e.shapes);var u=(e.shapes||[]).length;for(t=0;u>t;t++){var a=e.shapes[t];c(a,"xref"),c(a,"yref")}var f=e.legend;f&&(f.x>3?(f.x=1.02,f.xanchor="left"):f.x<-2&&(f.x=-0.02,f.xanchor="right"),f.y>3?(f.y=1.02,f.yanchor="bottom"):f.y<-2&&(f.y=-0.02,f.yanchor="top")),"rotate"===e.dragmode&&(e.dragmode="orbit"),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var l,h,p,v,m,g,y,b=B.getSubplotIds(e,"gl3d");for(t=0;t<b.length;t++)if(l=e[b[t]],h=l.cameraposition,Array.isArray(h)&&4===h[0].length){for(p=h[0],m=h[1],v=h[2],g=P([],p),y=[],n=0;3>n;++n)y[n]=m[t]+v*g[2+4*n];l.camera={eye:{x:y[0],y:y[1],z:y[2]},center:{x:m[0],y:m[1],z:m[2]},up:{x:g[1],y:g[5],z:g[9]}},delete l.cameraposition}return M.Lib.markTime("finished rest of cleanLayout, starting color"),M.Color.clean(e),M.Lib.markTime("finished cleanLayout color.clean"),e}function c(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=M.Axes.cleanId(n,r))}function h(e,t){for(var n=[],r=e.concat(Array.isArray(t)?t:[]).filter(function(e){return"uid"in e}).map(function(e){return e.uid}),i=0;i<e.length;i++){var s=e[i];if(!("uid"in s)||-1!==n.indexOf(s.uid)){var o,u;for(u=0;100>u&&(o=M.Lib.randstr(r),-1!==n.indexOf(o));u++);s.uid=M.Lib.randstr(r),r.push(s.uid)}if(n.push(s.uid),"histogramy"===s.type&&"xbins"in s&&!("ybins"in s)&&(s.ybins=s.xbins,delete s.xbins),s.error_y&&"opacity"in s.error_y){var a=M.Color.defaults,f=s.error_y.color||(B.traceIs(s,"bar")?M.Color.defaultLine:a[i%a.length]);s.error_y.color=M.Color.addOpacity(M.Color.rgb(f),M.Color.opacity(f)*s.error_y.opacity),delete s.error_y.opacity}"bardir"in s&&("h"!==s.bardir||!B.traceIs(s,"bar")&&"histogram"!==s.type.substr(0,9)||(s.orientation="h",x(s)),delete s.bardir),"histogramy"===s.type&&x(s),("histogramx"===s.type||"histogramy"===s.type)&&(s.type="histogram"),"scl"in s&&(s.colorscale=s.scl,delete s.scl),"reversescl"in s&&(s.reversescale=s.reversescl,delete s.reversescl),s.xaxis&&(s.xaxis=M.Axes.cleanId(s.xaxis,"x")),s.yaxis&&(s.yaxis=M.Axes.cleanId(s.yaxis,"y")),s.scene&&(s.scene=M.Gl3dLayout.cleanId(s.scene)),B.traceIs(s,"pie")||(Array.isArray(s.textposition)?s.textposition=s.textposition.map(p):s.textposition&&(s.textposition=p(s.textposition))),d(s,"line")&&delete s.line,"marker"in s&&(d(s.marker,"line")&&delete s.marker.line,d(s,"marker")&&delete s.marker),M.Lib.markTime("finished rest of cleanData, starting color"),M.Color.clean(s),M.Lib.markTime("finished cleanData color.clean")}}function p(e){var t="middle",n="center";return-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right"),t+" "+n}function d(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}function v(e){var t,n,r,i,s=M.Axes.list(e),o=e._fullData,u=e._fullLayout,a=e.calcdata=new Array(o.length);for(e.firstscatter=!0,e.numboxes=0,e._hmpixcount=0,e._hmlumcount=0,u._piecolormap={},u._piedefaultcolorcount=0,t=0;t<s.length;t++)s[t]._categories=[];for(t=0;t<o.length;t++)n=o[t],r=n._module,i=[],r&&n.visible===!0&&r.calc&&(i=r.calc(e,n)),Array.isArray(i)&&i[0]||(i=[{x:!1,y:!1}]),i[0].t||(i[0].t={}),i[0].trace=n,M.Lib.markTime("done with calcdata for "+t),a[t]=i}function m(e,t){var n,r,i=t+1,s=[];for(n=0;n<e.length;n++)r=e[n],0>r?s.push(i+r):s.push(r);return s}function g(e,t,n){var r,i;for(r=0;r<t.length;r++){if(i=t[r],i!==parseInt(i,10))throw new Error("all values in "+n+" must be integers");if(i>=e.data.length||i<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(t.indexOf(i,r+1)>-1||i>=0&&t.indexOf(-e.data.length+i)>-1||0>i&&t.indexOf(e.data.length+i)>-1)throw new Error("each index in "+n+" must be unique.")}}function y(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if("undefined"==typeof t)throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),g(e,t,"currentIndices"),"undefined"==typeof n||Array.isArray(n)||(n=[n]),"undefined"!=typeof n&&g(e,n,"newIndices"),"undefined"!=typeof n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function b(e,t,n){var r,i;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if("undefined"==typeof t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if(i=t[r],"object"!=typeof i||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if("undefined"==typeof n||Array.isArray(n)||(n=[n]),"undefined"!=typeof n&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function w(e,t,n,r){var i=M.Lib.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!M.Lib.isPlainObject(t))throw new Error("update must be a key:value object");if("undefined"==typeof n)throw new Error("indices must be an integer or array of integers");g(e,n,"indices");for(var s in t){if(!Array.isArray(t[s])||t[s].length!==n.length)throw new Error("attribute "+s+" must be an array of length equal to indices array length");if(i&&(!(s in r)||!Array.isArray(r[s])||r[s].length!==t[s].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function E(e,t,n,r){var i,s,o,u,a,f=M.Lib.isPlainObject(r),l=[];Array.isArray(n)||(n=[n]),n=m(n,e.data.length-1);for(var c in t)for(var h=0;h<n.length;h++){if(i=e.data[n[h]],o=M.Lib.nestedProperty(i,c),s=o.get(),u=t[c][h],!Array.isArray(u))throw new Error("attribute: "+c+" index: "+h+" must be an array");if(!Array.isArray(s))throw new Error("cannot extend missing or non-array attribute: "+c);a=f?r[c][h]:r,H(a)||(a=-1),l.push({prop:o,target:s,insert:u,maxp:Math.floor(a)})}return l}function S(e,t,n,r,i,s){w(e,t,n,r);for(var o,u,a,f=E(e,t,n,r),l=[],c={},h={},p=0;p<f.length;p++)u=f[p].prop,a=f[p].maxp,o=i(f[p].target,f[p].insert),a>=0&&a<o.length&&(l=s(o,a)),a=f[p].target.length,u.set(o),Array.isArray(c[u.astr])||(c[u.astr]=[]),Array.isArray(h[u.astr])||(h[u.astr]=[]),c[u.astr].push(l),h[u.astr].push(a);return{update:c,maxPoints:h}}function x(e){var t;if(M.Lib.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var n=e.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);M.Lib.swapAttrs(e,["error_?.copy_ystyle"]),r&&M.Lib.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if(e.hoverinfo){var i=e.hoverinfo.split("+");for(t=0;t<i.length;t++)"x"===i[t]?i[t]="y":"y"===i[t]&&(i[t]="x");e.hoverinfo=i.join("+")}}function T(e){var t,n={left:0,right:0,bottom:0,top:0};if(e)for(t in e)e.hasOwnProperty(t)&&(n.left+=e[t].left||0,n.right+=e[t].right||0,n.bottom+=e[t].bottom||0,n.top+=e[t].top||0);return n}function N(e,t){var n,r,i=e._fullLayout,s=e._context;if(e.emit("plotly_autosize"),e._context.fillFrame)r=window.innerWidth,n=window.innerHeight,document.body.style.overflow="hidden";else if(H(s.frameMargins)&&s.frameMargins>0){var o=T(e._boundingBoxMargins),u=o.left+o.right,a=o.bottom+o.top,f=i._container.node().getBoundingClientRect(),l=1-2*s.frameMargins;r=Math.round(l*(f.width-u)),n=Math.round(l*(f.height-a))}else n=parseFloat(window.getComputedStyle(e).height)||i.height,r=parseFloat(window.getComputedStyle(e).width)||i.width;return Math.abs(i.width-r)>1||Math.abs(i.height-n)>1?(i.height=e.layout.height=n,i.width=e.layout.width=r):"initial"!==i.autosize&&(delete t.autosize,i.autosize=e.layout.autosize=!0),B.sanitizeMargins(i),t}function C(e){var t=D.select(e),n=e._fullLayout;if(n._hasGL3D&&M.Gl3dLayout.initAxes(e),n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),"initial"===n.autosize&&(N(e,{}),n.autosize=!0,e.layout.autosize=!0),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([0]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._geocontainer=n._paperdiv.selectAll(".geo-container").data([0]),n._geocontainer.enter().append("div").classed("geo-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var r=[];D.selectAll("defs").each(function(){this.id&&r.push(this.id.split("-")[1])}),n._uid=M.Lib.randstr(r)}n._paperdiv.selectAll(".main-svg").attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink"}),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._draggers=n._paper.append("g").classed("draglayer",!0);var i=M.Axes.getSubplots(e);i.join("")!==Object.keys(e._fullLayout._plots||{}).join("")&&k(e,i),n._hasCartesian&&L(e,i),n._shapelayer=n._paper.append("g").classed("shapelayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0),n._geoimages=n._paper.append("g").classed("geoimages",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._hoverlayer=n._toppaper.append("g").classed("hoverlayer",!0),e.emit("plotly_framework");var s=M.Lib.syncOrAsync([A,function(){return M.Axes.doTicks(e,"redraw")},M.Fx.init],e);return s&&s.then&&e._promises.push(s),s}function k(e,t){function n(t,n){return function(){return M.Axes.getFromId(e,t,n)}}for(var r,i,s=e._fullLayout._plots={},o=0;o<t.length;o++)r=t[o],i=s[r]={},i.id=r,i.x=n(r,"x"),i.y=n(r,"y"),i.xaxis=i.x(),i.yaxis=i.y()}function L(e,t){function n(e){e.append("g").classed("maplayer",!0),e.append("g").classed("barlayer",!0),e.append("g").classed("errorlayer",!0),e.append("g").classed("boxlayer",!0),e.append("g").classed("scatterlayer",!0)}var r=e._fullLayout,i=[];r._paper.selectAll("g.subplot").data(t).enter().append("g").classed("subplot",!0).each(function(s){var o=r._plots[s],u=o.plotgroup=D.select(this).classed(s,!0),a=o.xaxis,f=o.yaxis;o.overlays=[];var l=M.Axes.getFromId(e,a.overlaying)||a;l!==a&&l.overlaying&&(l=a,a.overlaying=!1);var c=M.Axes.getFromId(e,f.overlaying)||f;c!==f&&c.overlaying&&(c=f,f.overlaying=!1);var h=l._id+c._id;h!==s&&-1!==t.indexOf(h)?(o.mainplot=h,i.push(o),a.domain=l.domain.slice(),f.domain=c.domain.slice()):(o.bg=u.append("rect").style("stroke-width",0),o.gridlayer=u.append("g"),o.overgrid=u.append("g"),o.zerolinelayer=u.append("g"),o.overzero=u.append("g"),o.plot=u.append("svg").call(n),o.overplot=u.append("g"),o.xlines=u.append("path"),o.ylines=u.append("path"),o.overlines=u.append("g"),o.xaxislayer=u.append("g"),o.yaxislayer=u.append("g"),o.overaxes=u.append("g")),o.draglayer=r._draggers.append("g")}),i.forEach(function(e){var t=r._plots[e.mainplot];t.overlays.push(e),e.gridlayer=t.overgrid.append("g"),e.zerolinelayer=t.overzero.append("g"),e.plot=t.overplot.append("svg").call(n),e.xlines=t.overlines.append("path"),e.ylines=t.overlines.append("path"),e.xaxislayer=t.overaxes.append("g"),e.yaxislayer=t.overaxes.append("g")}),t.forEach(function(e){var t=r._plots[e];t.plot.attr("preserveAspectRatio","none").style("fill","none"),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)})}function A(e){return M.Lib.syncOrAsync([B.doAutoMargin,O],e)}function O(e){var t,n=e._fullLayout,r=n._size,i=M.Axes.list(e);for(t=0;t<i.length;t++)i[t]._linepositions={};n._paperdiv.style({width:n.width+"px",height:n.height+"px"}).selectAll(".main-svg").call(M.Drawing.setSize,n.width,n.height),e._context.setBackground(e,n.paper_bgcolor);var s=[];return n._paper.selectAll("g.subplot").each(function(t){var i=n._plots[t],o=M.Axes.getFromId(e,t,"x"),u=M.Axes.getFromId(e,t,"y");o.setScale(),u.setScale(),i.bg&&i.bg.call(M.Drawing.setRect,o._offset-r.p,u._offset-r.p,o._length+2*r.p,u._length+2*r.p).call(M.Color.fill,n.plot_bgcolor),i.plot.call(M.Drawing.setRect,o._offset,u._offset,o._length,u._length);var a=M.Drawing.crispRound(e,o.linewidth,1),f=M.Drawing.crispRound(e,u.linewidth,1),l=r.p+f,c="M"+ -l+",",h="h"+(o._length+2*l),p="free"===o.anchor&&-1===s.indexOf(o._id),d=r.h*(1-(o.position||0))+a/2%1,v=o.anchor===u._id&&(o.mirror||"top"!==o.side)||"all"===o.mirror||"allticks"===o.mirror||o.mirrors&&o.mirrors[u._id+"bottom"],m=u._length+r.p+a/2,g=o.anchor===u._id&&(o.mirror||"top"===o.side)||"all"===o.mirror||"allticks"===o.mirror||o.mirrors&&o.mirrors[u._id+"top"],y=-r.p-a/2,b=r.p,w=v?0:a,E=g?0:a,S=","+(-b-E)+"v"+(u._length+2*b+E+w),x="free"===u.anchor&&-1===s.indexOf(u._id),T=r.w*(u.position||0)+f/2%1,N=u.anchor===o._id&&(u.mirror||"right"!==u.side)||"all"===u.mirror||"allticks"===u.mirror||u.mirrors&&u.mirrors[o._id+"left"],C=-r.p-f/2,k=u.anchor===o._id&&(u.mirror||"right"===u.side)||"all"===u.mirror||"allticks"===u.mirror||u.mirrors&&u.mirrors[o._id+"right"],L=o._length+r.p+f/2;o._linepositions[t]=[v?m:void 0,g?y:void 0,p?d:void 0],o.anchor===u._id?o._linepositions[t][3]="top"===o.side?y:m:p&&(o._linepositions[t][3]=d),u._linepositions[t]=[N?C:void 0,k?L:void 0,x?T:void 0],u.anchor===o._id?u._linepositions[t][3]="right"===u.side?L:C:x&&(u._linepositions[t][3]=T);var A="translate("+o._offset+","+u._offset+")",O=A,_=A;p&&(O="translate("+o._offset+","+r.t+")",y+=u._offset-r.t,m+=u._offset-r.t),x&&(_="translate("+r.l+","+u._offset+")",C+=o._offset-r.l,L+=o._offset-r.l),i.xlines.attr("transform",O).attr("d",(v?c+m+h:"")+(g?c+y+h:"")+(p?c+d+h:"")||"M0,0").style("stroke-width",a+"px").call(M.Color.stroke,o.showline?o.linecolor:"rgba(0,0,0,0)"),i.ylines.attr("transform",_).attr("d",(N?"M"+C+S:"")+(k?"M"+L+S:"")+(x?"M"+T+S:"")||"M0,0").attr("stroke-width",f+"px").call(M.Color.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)"),i.xaxislayer.attr("transform",O),i.yaxislayer.attr("transform",_),i.gridlayer.attr("transform",A),i.zerolinelayer.attr("transform",A),i.draglayer.attr("transform",A),p&&s.push(o._id),x&&s.push(u._id)}),M.Axes.makeClipPaths(e),M.Titles.draw(e,"gtitle"),M.Fx.modeBar(e),e._promises.length&&Promise.all(e._promises)}var M=e("../plotly"),_=e("../lib/events"),D=e("d3"),P=e("gl-mat4/fromQuat"),H=e("fast-isnumeric"),B=M.Plots;M.plot=function(e,t,n,i){function c(){var t,n,r,i=e.calcdata;for(M.Legend.draw(e),t=0;t<i.length;t++)n=i[t],r=n[0].trace,r.visible===!0&&r._module.colorbar?r._module.colorbar(e,n):B.autoMargin(e,"cb"+r.uid);return B.doAutoMargin(e),B.previousPromises(e)}function p(){var t=JSON.stringify(N._size)===O?[]:[c,A];return M.Lib.syncOrAsync(t.concat(M.Fx.init),e)}function d(){if(k){for(var t,n,r=B.getSubplotIds(N,"cartesian"),i=e._modules,s=0;s<r.length;s++){t=N._plots[r[s]];for(var o=0;o<i.length;o++)n=i[o],n.setPositions&&n.setPositions(e,t)}return M.Lib.markTime("done with bar/box adjustments"),M.ErrorBars.calc(e),M.Lib.markTime("done Plotly.ErrorBars.calc"),M.Lib.syncOrAsync([M.Shapes.calcAutorange,M.Annotations.calcAutorange,m],e)}}function m(){for(var t=M.Axes.list(e,"",!0),n=0;n<t.length;n++)M.Axes.doAutoRange(t[n])}function g(){return M.Axes.doTicks(e,"redraw")}function y(){function t(e,t){var n,r,i,s=[];for(n=0;n<e.length;n++)r=e[n],i=r[0].trace,i.xaxis+i.yaxis===t&&s.push(r);return s}function n(e,t){var n,r,i,s=[];for(n=0;n<e.length;n++)r=e[n],i=r[0].trace,i._module===t&&i.visible===!0&&s.push(r);return s}var r,i,s,f,l,c,h,p,d,v,m,g=e.calcdata,y=B.getSubplotIds(N,"cartesian"),b=e._modules;for(e._fullLayout._hasGL3D&&o(e),e._fullLayout._hasGeo&&u(e),e._fullLayout._hasGL2D&&a(e),r=0;r<g.length;r++)s=g[r],f=s[0].trace,f.visible===!0&&f._module.colorbar||(l=f.uid,N._paper.selectAll(".hm"+l+",.contour"+l+",.cb"+l+",#clip"+l).remove());for(r=0;r<y.length;r++){for(c=y[r],h=e._fullLayout._plots[c],p=t(g,c),d=[],h.plot&&h.plot.selectAll("g.trace").remove(),i=0;i<b.length;i++)m=b[i],m.plot&&(v=n(p,m),m.plot(e,h,v),M.Lib.markTime("done "+(v[0]&&v[0][0].trace.type)),v[0]&&v[0][0].trace&&B.traceIs(v[0][0].trace,"errorBarsOK")&&(d=d.concat(v)));e._fullLayout._hasCartesian&&(M.ErrorBars.plot(e,h,d),M.Lib.markTime("done ErrorBars"))}var w=n(g,M.Pie);return w.length&&M.Pie.plot(e,w),B.style(e),M.Lib.markTime("done plots.style"),M.Shapes.drawAll(e),M.Annotations.drawAll(e),B.addLinks(e),B.previousPromises(e)}function b(){e._replotting=!1,M.Lib.markTime("done plot"),e.emit("plotly_afterplot")}M.Lib.markTime("in plot"),e=r(e),_.init(e);var w=_.triggerHandler(e,"plotly_beforeplot",[t,n,i]);if(w!==!1){t||n||M.Lib.isPlotDiv(e)||console.log("Warning: calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",e),s(e,i),n||(n={}),D.select(e).classed("js-plotly-plot",!0),M.Drawing.makeTester(e),e._promises=[];var E=0===(e.data||[]).length&&Array.isArray(t);if(Array.isArray(t)&&(h(t,e.data),E?e.data=t:e.data.push.apply(e.data,t),e.empty=!1),(!e.layout||E)&&(e.layout=l(n)),e._dragging)return void (e._replotPending=!0);if(e._replotPending=!1,B.supplyDefaults(e),t&&t[0]&&t[0].r)return f(e,t,n);e._replotting=!0;var S=e._fullData.length>0;if(S){var x=M.Axes.getSubplots(e).join(""),T=Object.keys(e._fullLayout._plots||{}).join("");(e.framework!==C||E||T!==x)&&(e.framework=C,C(e))}else E&&C(e);var N=e._fullLayout,k=!e.calcdata||e.calcdata.length!==(e.data||[]).length;k&&(v(e),(e._context.doubleClick!==!1||e._context.displayModeBar!==!1)&&M.Axes.saveRangeInitial(e));for(var L=0;L<e.calcdata.length;L++)e.calcdata[L][0].trace=e._fullData[L];var O=JSON.stringify(N._size),P=M.Lib.syncOrAsync([B.previousPromises,c,A,p,d,g,y],e,b);return P&&P.then?P:Promise.resolve()}},M.redraw=function(e){return e=r(e),M.Lib.isPlotDiv(e)?(e.calcdata=void 0,M.plot(e).then(function(){e.emit("plotly_redraw")})):void console.log("This element is not a Plotly Plot",e)},M.newPlot=function(e,t,n,i){e=r(e),B.purge(e),M.plot(e,t,n,i)},M.extendTraces=function j(e,t,n,i){e=r(e);var s=S(e,t,n,i,function(e,t){return e.concat(t)},function(e,t){return e.splice(0,e.length-t)});M.redraw(e);var o=[e,s.update,n,s.maxPoints];M.Queue&&M.Queue.add(e,M.prependTraces,o,j,arguments)},M.prependTraces=function F(e,t,n,i){e=r(e);var s=S(e,t,n,i,function(e,t){return t.concat(e)},function(e,t){return e.splice(t,e.length)});M.redraw(e);var o=[e,s.update,n,s.maxPoints];M.Queue&&M.Queue.add(e,M.extendTraces,o,F,arguments)},M.addTraces=function I(e,t,n){e=r(e);var i,s=[],o=M.deleteTraces,u=I,a=[e,s],f=[e,t];for(b(e,t,n),Array.isArray(t)||(t=[t]),i=0;i<t.length;i+=1)e.data.push(t[i]);for(i=0;i<t.length;i++)s.push(-t.length+i);if("undefined"==typeof n)return M.redraw(e),void (M.Queue&&M.Queue.add(e,o,a,u,f));Array.isArray(n)||(n=[n]);try{y(e,s,n)}catch(l){throw e.data.splice(e.data.length-t.length,t.length),l}M.Queue&&M.Queue.startSequence(e),M.Queue&&M.Queue.add(e,o,a,u,f),M.moveTraces(e,s,n),M.Queue&&M.Queue.stopSequence(e)},M.deleteTraces=function q(e,t){e=r(e);var n,i,s=[],o=M.addTraces,u=q,a=[e,s,t],f=[e,t];if("undefined"==typeof t)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(t)||(t=[t]),g(e,t,"indices"),t=m(t,e.data.length-1),t.sort().reverse(),n=0;n<t.length;n+=1)i=e.data.splice(t[n],1)[0],s.push(i);M.redraw(e),M.Queue&&M.Queue.add(e,o,a,u,f)},M.moveTraces=function R(e,t,n){e=r(e);var i,s=[],o=[],u=R,a=R,f=[e,n,t],l=[e,t,n];if(y(e,t,n),t=Array.isArray(t)?t:[t],"undefined"==typeof n)for(n=[],i=0;i<t.length;i++)n.push(-t.length+i);for(n=Array.isArray(n)?n:[n],t=m(t,e.data.length-1),n=m(n,e.data.length-1),i=0;i<e.data.length;i++)-1===t.indexOf(i)&&s.push(e.data[i]);for(i=0;i<t.length;i++)o.push({newIndex:n[i],trace:e.data[t[i]]});for(o.sort(function(e,t){return e.newIndex-t.newIndex}),i=0;i<o.length;i+=1)s.splice(o[i].newIndex,0,o[i].trace);e.data=s,M.redraw(e),M.Queue&&M.Queue.add(e,u,f,a,l)},M.restyle=function U(e,t,n,i){function s(){return i.map(function(){return void 0})}function o(e){var t=M.Axes.id2name(e);-1===d.indexOf(t)&&d.push(t)}function u(e){return"LAYOUT"+e+".autorange"}function a(e){return"LAYOUT"+e+".range"}function f(t,n,r){if(Array.isArray(t))return void t.forEach(function(e){f(e,n,r)});if(!(t in h)){var o;o="LAYOUT"===t.substr(0,6)?M.Lib.nestedProperty(e.layout,t.replace("LAYOUT","")):M.Lib.nestedProperty(e.data[i[r]],t),t in C||(C[t]=s()),void 0===C[t][r]&&(C[t][r]=o.get()),void 0!==n&&o.set(n)}}e=r(e);var l,c=e._fullLayout,h={};if("string"==typeof t)h[t]=n;else{if(!M.Lib.isPlainObject(t))return void console.log("restyle fail",t,n,i);h=t,void 0===i&&(i=n)}Object.keys(h).length&&(e.changed=!0),H(i)?i=[i]:Array.isArray(i)&&i.length||(i=e._fullData.map(function(e,t){return t}));var p=["mode","visible","type","orientation","fill","histfunc","histnorm","text","x","y","z","xtype","x0","dx","ytype","y0","dy","xaxis","yaxis","line.width","connectgaps","transpose","zsmooth","showscale","marker.showscale","zauto","marker.cauto","autocolorscale","marker.autocolorscale","colorscale","marker.colorscale","reversescale","marker.reversescale","autobinx","nbinsx","xbins","xbins.start","xbins.end","xbins.size","autobiny","nbinsy","ybins","ybins.start","ybins.end","ybins.size","autocontour","ncontours","contours","contours.coloring","error_y","error_y.visible","error_y.value","error_y.type","error_y.traceref","error_y.array","error_y.symmetric","error_y.arrayminus","error_y.valueminus","error_y.tracerefminus","error_x","error_x.visible","error_x.value","error_x.type","error_x.traceref","error_x.array","error_x.symmetric","error_x.arrayminus","error_x.valueminus","error_x.tracerefminus","swapxy","swapxyaxes","orientationaxes","marker.colors","values","labels","label0","dlabel","sort","textinfo","textposition","textfont.size","textfont.family","textfont.color","insidetextfont.size","insidetextfont.family","insidetextfont.color","outsidetextfont.size","outsidetextfont.family","outsidetextfont.color","hole","scalegroup","domain","domain.x","domain.y","domain.x[0]","domain.x[1]","domain.y[0]","domain.y[1]","tilt","tiltaxis","depth","direction","rotation","pull"];for(l=0;l<i.length;l++)if(B.traceIs(e._fullData[i[l]],"box")){p.push("name");break}var d,v=["marker","marker.size","textfont","boxpoints","jitter","pointpos","whiskerwidth","boxmean"],m=["zmin","zmax","zauto","marker.cmin","marker.cmax","marker.cauto","contours.start","contours.end","contours.size","contours.showlines","line","line.smoothing","line.shape","error_y.width","error_x.width","error_x.copy_ystyle","marker.maxdisplayed"],g=["type","x","y","x0","y0","orientation","xaxis","yaxis"],y=!1,b=!1,w=!1,E=!1,S=!1,T=!1,N={},C={},k={};(c._hasGL3D||c._hasGeo||c._hasGL2D)&&(w=!0);var L=["zmin","zmax"],A=["xbins.start","xbins.end","xbins.size"],O=["ybins.start","ybins.end","ybins.size"],_=["contours.start","contours.end","contours.size"];for(var D in h){var P,j,F,q,R,W=h[D];if(N[D]=W,"LAYOUT"!==D.substr(0,6)){for(C[D]=s(),l=0;l<i.length;l++){if(P=e.data[i[l]],j=e._fullData[i[l]],F=M.Lib.nestedProperty(P,D),q=F.get(),R=Array.isArray(W)?W[l%W.length]:W,-1!==L.indexOf(D))f("zauto",!1,l);else if("colorscale"===D)f("autocolorscale",!1,l);else if("autocolorscale"===D)f("colorscale",void 0,l);else if("marker.colorscale"===D)f("marker.autocolorscale",!1,l);else if("marker.autocolorscale"===D)f("marker.colorscale",void 0,l);else if("zauto"===D)f(L,void 0,l);else if(-1!==A.indexOf(D))f("autobinx",!1,l);else if("autobinx"===D)f(A,void 0,l);else if(-1!==O.indexOf(D))f("autobiny",!1,l);else if("autobiny"===D)f(O,void 0,l);else if(-1!==_.indexOf(D))f("autocontour",!1,l);else if("autocontour"===D)f(_,void 0,l);else if(-1!==["x0","dx"].indexOf(D)&&j.x&&"scaled"!==j.xtype)f("xtype","scaled",l);else if(-1!==["y0","dy"].indexOf(D)&&j.y&&"scaled"!==j.ytype)f("ytype","scaled",l);else if("colorbar.thicknessmode"===D&&F.get()!==R&&-1!==["fraction","pixels"].indexOf(R)&&j.colorbar){var X=-1!==["top","bottom"].indexOf(j.colorbar.orient)?c.height-c.margin.t-c.margin.b:c.width-c.margin.l-c.margin.r;f("colorbar.thickness",j.colorbar.thickness*("fraction"===R?1/X:X),l)}else if("colorbar.lenmode"===D&&F.get()!==R&&-1!==["fraction","pixels"].indexOf(R)&&j.colorbar){var V=-1!==["top","bottom"].indexOf(j.colorbar.orient)?c.width-c.margin.l-c.margin.r:c.height-c.margin.t-c.margin.b;f("colorbar.len",j.colorbar.len*("fraction"===R?1/V:V),l)}else"colorbar.tick0"===D||"colorbar.dtick"===D?f("colorbar.tickmode","linear",l):"colorbar.tickmode"===D&&f(["colorbar.tick0","colorbar.dtick"],void 0,l);if("type"===D&&"pie"===R!=("pie"===q)){var $="x",J="y";"bar"!==R&&"bar"!==q||"h"!==P.orientation||($="y",J="x"),M.Lib.swapAttrs(P,["?","?src"],"labels",$),M.Lib.swapAttrs(P,["d?","?0"],"label",$),M.Lib.swapAttrs(P,["?","?src"],"values",J),"pie"===q?(M.Lib.nestedProperty(P,"marker.color").set(M.Lib.nestedProperty(P,"marker.colors").get()),c._pielayer.selectAll("g.trace").remove()):B.traceIs(P,"cartesian")&&(M.Lib.nestedProperty(P,"marker.colors").set(M.Lib.nestedProperty(P,"marker.color").get()),k[P.xaxis||"x"]=!0,k[P.yaxis||"y"]=!0)}C[D][l]=q;var K=["swapxy","swapxyaxes","orientation","orientationaxes"];if(-1!==K.indexOf(D)){if("orientation"===D){if(F.set(R),F.get()===C[D][l])continue}else"orientationaxes"===D&&(P.orientation={v:"h",h:"v"}[j.orientation]);x(P)}else F.set(R)}if(-1!==["swapxyaxes","orientationaxes"].indexOf(D)&&M.Axes.swap(e,i),"orientationaxes"===D){var Q=M.Lib.nestedProperty(e.layout,"hovermode");"x"===Q.get()?Q.set("y"):"y"===Q.get()&&Q.set("x")}if(-1!==i.indexOf(0)&&-1!==g.indexOf(D)&&(M.Axes.clearTypes(e,i),y=!0),(-1===["autobinx","autobiny","zauto"].indexOf(D)||R!==!1)&&(S=!0),(-1!==["colorbar","line"].indexOf(F.parts[0])||"marker"===F.parts[0]&&"colorbar"===F.parts[1])&&(T=!0),-1!==p.indexOf(D)){if(-1!==["orientation","type"].indexOf(D)){for(d=[],l=0;l<i.length;l++){var G=e.data[i[l]];B.traceIs(G,"cartesian")&&(o(G.xaxis||"x"),o(G.yaxis||"y"),"type"===t&&f(["autobinx","autobiny"],!0,l))}f(d.map(u),!0,0),f(d.map(a),[0,1],0)}y=!0}else-1!==m.indexOf(D)?w=!0:-1!==v.indexOf(D)&&(b=!0)}else F=M.Lib.nestedProperty(e.layout,D.replace("LAYOUT","")),C[D]=[F.get()],F.set(Array.isArray(W)?W[0]:W),y=!0}var Y=Object.keys(k);e:for(l=0;l<Y.length;l++){for(var Z=Y[l],et=Z.charAt(0),tt=et+"axis",nt=0;nt<e.data.length;nt++)if(B.traceIs(e.data[nt],"cartesian")&&(e.data[nt][tt]||et)===Z)continue e;f("LAYOUT"+M.Axes.id2name(Z),null,0)}M.Queue&&M.Queue.add(e,U,[e,C,i],U,[e,N,i]);var rt=!1;M.Axes.list(e).forEach(function(e){e.autorange&&(rt=!0)}),(y||E||b&&rt)&&(e.calcdata=void 0);var it;E?it=[function(){var t=e.layout;return e.layout=void 0,M.plot(e,"",t)}]:y||w||b?it=[M.plot]:(B.supplyDefaults(e),it=[B.previousPromises],S&&it.push(function(){var t,n,r;for(t=0;t<e.calcdata.length;t++)n=e.calcdata[t],r=(((n[0]||{}).trace||{})._module||{}).arraysToCalcdata,r&&r(n);return B.style(e),M.Legend.draw(e),B.previousPromises(e)}),T&&it.push(function(){return e.calcdata.forEach(function(e){if((e[0].t||{}).cb){var t=e[0].trace,n=e[0].t.cb;B.traceIs(t,"contour")&&n.line({width:t.contours.showlines!==!1?t.line.width:0,dash:t.line.dash,color:"line"===t.contours.coloring?n._opts.line.color:t.line.color}),B.traceIs(t,"markerColorscale")?n.options(t.marker.colorbar)():n.options(t.colorbar)()}}),B.previousPromises(e)}));var st=M.Lib.syncOrAsync(it,e);return st&&st.then||(st=Promise.resolve()),st.then(function(){e.emit("plotly_restyle",M.Lib.extendDeep([],[N,i]))})},M.relayout=function z(e,t,n){function i(e,t){if(Array.isArray(e))return void e.forEach(function(e){i(e,t)});if(!(e in d)){var n=M.Lib.nestedProperty(h,e);e in C||(C[e]=n.get()),void 0!==t&&n.set(t)}}function s(e,t){var n=M.Axes.id2name(e[t+"ref"]||t);return(p[n]||{}).autorange}if(e=r(e),!e.framework||!e.framework.isPolar){var o,u,a,f,l,c,h=e.layout,p=e._fullLayout,d={},v=!1,m=!1,g=!1,y=!1,b=!1,w=!1,E=!1;if("string"==typeof t)d[t]=n;else{if(!M.Lib.isPlainObject(t))return void console.log("relayout fail",t,n);d=t}Object.keys(d).length&&(e.changed=!0),a=Object.keys(d),u=M.Axes.list(e);for(var S=0;S<a.length;S++){if(0===a[S].indexOf("allaxes")){for(var x=0;x<u.length;x++)l=u[x]._id.substr(1),c=-1!==l.indexOf("scene")?l+".":"",o=a[S].replace("allaxes",c+u[x]._name),d[o]||(d[o]=d[a[S]]);delete d[a[S]]}a[S].match(/^annotations\[[0-9-]+\].ref$/)&&(f=d[a[S]].split("y"),d[a[S].replace("ref","xref")]=f[0],d[a[S].replace("ref","yref")]=2===f.length?"y"+f[1]:"paper",delete d[a[S]])}var T={},C={},k=["height","width"];for(var L in d){var O=M.Lib.nestedProperty(h,L),_=d[L],D=O.parts.length,P="string"==typeof O.parts[D-1]?D-1:D-2,H=O.parts[P],j=O.parts[P-1]+"."+H,F=O.parts.slice(0,P).join("."),I=M.Lib.nestedProperty(e.layout,F).get(),q=M.Lib.nestedProperty(p,F).get();if(T[L]=_,C[L]="reverse"===H?_:O.get(),-1!==k.indexOf(L)?i("autosize",!1):"autosize"===L?i(k,void 0):j.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/)?i(F+".autorange",!1):j.match(/^[xyz]axis[0-9]*\.autorange$/)?i([F+".range[0]",F+".range[1]"],void 0):j.match(/^aspectratio\.[xyz]$/)?i(O.parts[0]+".aspectmode","manual"):j.match(/^aspectmode$/)?i([F+".x",F+".y",F+".z"],void 0):"tick0"===H||"dtick"===H?i(F+".tickmode","linear"):"tickmode"===H&&i([F+".tick0",F+".dtick"],void 0),"type"===H&&"log"===q.type!=("log"===_)){var R=I;if(R&&R.range)if(q.autorange)"log"===_&&(R.range=R.range[1]>R.range[0]?[1,2]:[2,1]);else{var U=R.range[0],W=R.range[1];"log"===_?(0>=U&&0>=W&&i(F+".autorange",!0),0>=U?U=W/1e6:0>=W&&(W=U/1e6),i(F+".range[0]",Math.log(U)/Math.LN10),i(F+".range[1]",Math.log(W)/Math.LN10)):(i(F+".range[0]",Math.pow(10,U)),i(F+".range[1]",Math.pow(10,W)))}else i(F+".autorange",!0)}if("reverse"===H)I.range?I.range.reverse():(i(F+".autorange",!0),I.range=[1,0]),q.autorange?b=!0:y=!0;else if("annotations"===O.parts[0]||"shapes"===O.parts[0]){var X=O.parts[1],V=O.parts[0],$=h[V]||[],J=M[M.Lib.titleCase(V)],K=$[X]||{};2===O.parts.length&&("add"===d[L]||M.Lib.isPlainObject(d[L])?C[L]="remove":"remove"===d[L]?-1===X?(C[V]=$,delete C[L]):C[L]=K:console.log("???",d)),!s(K,"x")&&!s(K,"y")||M.Lib.containsAny(L,["color","opacity","align","dash"])||(b=!0),J.draw(e,X,O.parts.slice(2).join("."),d[L]),delete d[L]}else 0===O.parts[0].indexOf("scene")?y=!0:0===O.parts[0].indexOf("geo")?y=!0:!p._hasGL2D||-1===L.indexOf("axis")&&"plot_bgcolor"!==O.parts[0]?"hiddenlabels"===L?b=!0:-1!==O.parts[0].indexOf("legend")?v=!0:-1!==L.indexOf("title")?m=!0:-1!==O.parts[0].indexOf("bgcolor")?g=!0:O.parts.length>1&&M.Lib.containsAny(O.parts[1],["tick","exponent","grid","zeroline"])?m=!0:-1!==L.indexOf(".linewidth")&&-1!==L.indexOf("axis")?m=g=!0:O.parts.length>1&&-1!==O.parts[1].indexOf("line")?g=!0:O.parts.length>1&&"mirror"===O.parts[1]?m=g=!0:"margin.pad"===L?m=g=!0:"margin"===O.parts[0]||"autorange"===O.parts[1]||"rangemode"===O.parts[1]||"type"===O.parts[1]||"domain"===O.parts[1]||L.match(/^(bar|box|font)/)?b=!0:"hovermode"===L?w=!0:"dragmode"===L?E=!0:-1===["hovermode","dragmode","height","width","autosize"].indexOf(L)&&(y=!0):y=!0,O.set(_)}M.Queue&&M.Queue.add(e,z,[e,C],z,[e,T]),d.autosize&&(d=N(e,d)),(d.height||d.width||d.autosize)&&(b=!0);var Q=Object.keys(d),G=[B.previousPromises];if(y||b)G.push(function(){return e.layout=void 0,b&&(e.calcdata=void 0),M.plot(e,"",h)});else if(Q.length){B.supplyDefaults(e),p=e._fullLayout,v&&G.push(function(){return M.Legend.draw(e),B.previousPromises(e)}),g&&G.push(A),m&&G.push(function(){return M.Axes.doTicks(e,"redraw"),M.Titles.draw(e,"gtitle"),B.previousPromises(e)}),w&&M.Fx.modeBar(e);var Y;if(E||w){for(Y=B.getSubplotIds(p,"gl3d"),S=0;S<Y.length;S++)l=p[Y[S]]._scene,l.handleDragmode(p.dragmode);for(Y=B.getSubplotIds(p,"gl2d"),S=0;S<Y.length;S++)l=p._plots[Y[S]]._scene2d,l.updateFx(p)}}var Z=M.Lib.syncOrAsync(G,e);return Z&&Z.then||(Z=Promise.resolve()),Z.then(function(){e.emit("plotly_relayout",M.Lib.extendDeep({},T))})}}},{"../lib/events":309,"../plotly":330,d3:53,"fast-isnumeric":58,"gl-mat4/fromQuat":75}],327:[function(e,t,n){"use strict";function r(e,t){try{e._fullLayout._paper.style("background",t)}catch(n){console.log(n)}}t.exports={staticPlot:!1,editable:!1,autosizable:!1,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",displaylogo:!0,plotGlPixelRatio:2,setBackground:r,topojsonURL:"https://cdn.plot.ly/"}},{}],328:[function(e,t,n){"use strict";function r(e){var t=v.Plots.attributes,n=a({type:e}),r=l(e),i=h(e),s={},c={};s.type=null,g(s,t),s=o(n.attributes,s,"attributes",e),void 0!==i.attributes&&g(s,i.attributes),s.type=e,s=f(s),u(s),N.traces[e]=m({},r,{attributes:s}),void 0!==n.layoutAttributes&&(c=o(n.layoutAttributes,c,"layoutAttributes",e),u(c),N.traces[e].layoutAttributes=c)}function i(){var e=v.Plots.layoutAttributes,t={};t=o(e,t,"layoutAttributes","*"),t=c(t),t=p(t),t=f(t),u(t),t=d(t),N.layout={layoutAttributes:t}}function s(){N.defs={valObjects:v.Lib.valObjects,metaKeys:T.concat(["description","role"])}}function o(e,t,n,r){var i,s,u,f,l;return Object.keys(e).forEach(function(c){return c===b?void Object.keys(e[c]).forEach(function(f){i=a({module:e[c][f]}),void 0!==i&&(s=i[n],u=o(s,{},n,r),v.Lib.nestedProperty(t,f).set(g({},u)))}):c===w?void Object.keys(e[c]).forEach(function(i){i===r&&(f=a({module:e[c][i]}),void 0!==f&&(l=f[n],l=o(l,{},n,r),y(t,l)))}):void (t[c]=v.Lib.isPlainObject(e[c])?y({},e[c]):e[c])}),t}function u(e){function t(e){return{valType:"string"}}function n(e,n,r){L.isValObject(e)?"data_array"===e.valType?(e.role="data",r[n+"src"]=t(n)):e.arrayOk===!0&&(r[n+"src"]=t(n)):v.Lib.isPlainObject(e)&&(e.role="object")}L.crawl(e,n)}function a(e){return"type"in e?"area"===e.type?{attributes:C}:v.Plots.getModule({type:e.type}):"module"in e?v[e.module]:void 0}function f(e){return Object.keys(e).forEach(function(t){"_"===t.charAt(0)&&-1===T.indexOf(t)&&delete e[t]}),e}function l(e){return"area"===e?{}:v.Plots.modules[e].meta||{}}function c(e){return m(e,{radialaxis:k.radialaxis,angularaxis:k.angularaxis}),m(e,k.layout),e}function h(e){var t=v.Plots.subplotsRegistry,n=Object.keys(t).filter(function(t){return v.Plots.traceIs({type:e},t)})[0];return"area"===e?{}:void 0===n?{}:t[n]}function p(e){var t=v.Plots.subplotsRegistry;return Object.keys(e).forEach(function(n){Object.keys(t).forEach(function(r){var i,s=t[r];i="cartesian"===r?s.attrRegex.x.test(n)||s.attrRegex.y.test(n):s.attrRegex.test(n),i&&(e[n][E]=!0)})}),e}function d(e){return Object.keys(e).forEach(function(t){var n=g({},e[t]);if(n[S]===!0){var r=t.substr(0,t.length-1);delete n[S],e[t]={items:{}},e[t].items[r]=n,e[t].role="object"}}),e}var v=e("../plotly"),m=v.Lib.extendFlat,g=v.Lib.extendDeep,y=v.Lib.extendDeepAll,b="_nestedModules",w="_composedModules",E="_isSubplotObj",S="_isLinkedToArray",x="_deprecated",T=[E,S,x],N={traces:{},layout:{},defs:{}},C=e("../plots/polar/area_attributes"),k=e("../plots/polar/axis_attributes"),L=t.exports={};L.get=function(){return v.Plots.allTypes.concat("area").forEach(r),i(),s(),N},L.crawl=function(e,t){Object.keys(e).forEach(function(n){var r=e[n];-1===T.indexOf(n)&&(t(r,n,e),L.isValObject(r)||v.Lib.isPlainObject(r)&&L.crawl(r,t))})},L.isValObject=function(e){return e&&void 0!==e.valType}},{"../plotly":330,"../plots/polar/area_attributes":365,"../plots/polar/axis_attributes":366}],329:[function(e,t,n){"use strict";var r=e("../plotly");t.exports=function(e){return r.Lib.extendFlat(r.defaultConfig,e)}},{"../plotly":330}],330:[function(e,t,n){e("es6-promise").polyfill(),n.Lib=e("./lib"),n.util=e("./lib/svg_text_utils"),n.Queue=e("./lib/queue"),n.Icons=e("../build/ploticon"),e("../build/plotcss"),n.MathJaxConfig=e("./fonts/mathjax_config"),n.defaultConfig=e("./plot_api/plot_config"),n.Plots=e("./plots/plots"),n.Axes=e("./plots/cartesian/axes"),n.Fx=e("./plots/cartesian/graph_interact"),n.Scene=e("./plots/gl3d/scene"),n.Gl3dLayout=e("./plots/gl3d/layout"),n.Geo=e("./plots/geo/geo"),n.GeoLayout=e("./plots/geo/layout"),n.Scene2D=e("./plots/gl2d/scene2d"),n.micropolar=e("./plots/polar/micropolar"),n.Color=e("./components/color"),n.Drawing=e("./components/drawing"),n.Colorscale=e("./components/colorscale"),n.Colorbar=e("./components/colorbar"),n.ErrorBars=e("./components/errorbars"),n.Annotations=e("./components/annotations"),n.Shapes=e("./components/shapes"),n.Titles=e("./components/titles"),n.Legend=e("./components/legend"),n.ModeBar=e("./components/modebar"),n.Scatter=e("./traces/scatter"),n.Bars=e("./traces/bars"),n.Boxes=e("./traces/boxes"),n.Heatmap=e("./traces/heatmap"),n.Histogram=e("./traces/histogram"),n.Pie=e("./traces/pie"),n.Contour=e("./traces/contour"),n.Scatter3D=e("./traces/scatter3d"),n.Surface=e("./traces/surface"),n.Mesh3D=e("./traces/mesh3d"),n.ScatterGeo=e("./traces/scattergeo"),n.Choropleth=e("./traces/choropleth"),n.ScatterGl=e("./traces/scattergl"),e("./plot_api/plot_api"),n.PlotSchema=e("./plot_api/plot_schema"),n.Snapshot=e("./snapshot")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":281,"./components/color":283,"./components/colorbar":285,"./components/colorscale":287,"./components/drawing":289,"./components/errorbars":292,"./components/legend":294,"./components/modebar":295,"./components/shapes":297,"./components/titles":298,"./fonts/mathjax_config":304,"./lib":314,"./lib/queue":319,"./lib/svg_text_utils":324,"./plot_api/plot_api":326,"./plot_api/plot_config":327,"./plot_api/plot_schema":328,"./plots/cartesian/axes":333,"./plots/cartesian/graph_interact":334,"./plots/geo/geo":337,"./plots/geo/layout":342,"./plots/gl2d/scene2d":350,"./plots/gl3d/layout":357,"./plots/gl3d/scene":362,"./plots/plots":364,"./plots/polar/micropolar":367,"./snapshot":371,"./traces/bars":376,"./traces/boxes":379,"./traces/choropleth":383,"./traces/contour":386,"./traces/heatmap":388,"./traces/histogram":390,"./traces/mesh3d":394,"./traces/pie":396,"./traces/scatter":398,"./traces/scatter3d":403,"./traces/scattergeo":406,"./traces/scattergl":411,"./traces/surface":415,"es6-promise":56}],331:[function(e,t,n){t.exports={type:{valType:"enumerated",values:[],dflt:"scatter"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0},showlegend:{valType:"boolean",dflt:!0},legendgroup:{valType:"string",dflt:""},opacity:{valType:"number",min:0,max:1,dflt:1},name:{valType:"string"},uid:{valType:"string",dflt:""},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none"],dflt:"all"},stream:{token:{valType:"string",noBlank:!0,strict:!0},maxpoints:{valType:"number",min:0}}}},{}],332:[function(e,t,n){t.exports={xaxis:{valType:"axisid",dflt:"x"},yaxis:{valType:"axisid",dflt:"y"}}},{}],333:[function(e,t,n){"use strict";function r(e,t){if("-"===e.type){var n=e._id,r=n.charAt(0);-1!==n.indexOf("scene")&&(n=r);var u=o(t,n,r);if(u){if("histogram"===u.type&&r==={v:"y",h:"x"}[u.orientation||"v"])return void (e.type="linear");if(s(u,r)){for(var a,f=i(u),l=[],c=0;c<t.length;c++)a=t[c],N.Plots.traceIs(a,"box")&&(a[r+"axis"]||r)===n&&(void 0!==a[f]?l.push(a[f][0]):void 0!==a.name?l.push(a.name):l.push("text"));e.type=L.autoType(l)}else e.type=L.autoType(u[r]||[u[r+"0"]])}}}function i(e){return{v:"x",h:"y"}[e.orientation||"v"]}function s(e,t){var n=i(e);return N.Plots.traceIs(e,"box")&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}function o(e,t,n){for(var r,i=0;i<e.length;i++)if(r=e[i],(r[n+"axis"]||n)===t){if(s(r,n))return r;if((r[n]||[]).length||r[n+"0"])return r}}function u(e){if(!e)return!1;for(var t=0;t<e.length;t++)if(k(e[t]))return!0;return!1}function a(e){var t,n,r=e.tickvals,i=e.ticktext,s=new Array(r.length),o=1.0001*e.range[0]-1e-4*e.range[1],u=1.0001*e.range[1]-1e-4*e.range[0],a=Math.min(o,u),f=Math.max(o,u),l=0;for(Array.isArray(i)||(i=[]),n=0;n<r.length;n++)t=e.d2l(r[n]),t>a&&f>t&&(void 0===i[n]?s[l]=L.tickText(e,t):s[l]=h(e,t,String(i[n])),l++);return l<r.length&&s.splice(l,r.length-l),s}function f(e,t,n){return t*N.Lib.roundUp(e/t,n)}function l(e){var t,n=e.dtick;if(e._tickexponent=0,k(n)||"string"==typeof n||(n=1),"category"===e.type)e._tickround=null;else if(k(n)||"L"===n.charAt(0))if("date"===e.type)n>=864e5?e._tickround="d":n>=36e5?e._tickround="H":n>=6e4?e._tickround="M":n>=1e3?e._tickround="S":e._tickround=3-Math.round(Math.log(n/2)/Math.LN10);else{k(n)||(n=Number(n.substr(1))),e._tickround=2-Math.floor(Math.log(n)/Math.LN10+.01),t="log"===e.type?Math.pow(10,Math.max(e.range[0],e.range[1])):Math.max(Math.abs(e.range[0]),Math.abs(e.range[1]));var r=Math.floor(Math.log(t)/Math.LN10+.01);Math.abs(r)>3&&("SI"===e.exponentformat||"B"===e.exponentformat?e._tickexponent=3*Math.round((r-1)/3):e._tickexponent=r)}else"M"===n.charAt(0)?e._tickround=2===n.length?"m":"y":e._tickround=null}function c(e,t){var n=e.match(V),r=new Date(t);if(n){var i=Math.min(+n[1]||6,6),s=String(t/1e3%1+2.0000005).substr(2,i).replace(/0+$/,"")||"0";return C.time.format(e.replace(V,s))(r)}return C.time.format(e)(r)}function h(e,t,n){var r=e.tickfont||e._td._fullLayout.font;return{x:t,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontColor:r.color}}function p(e,t,n,r){var i,s=t.x,o=e._tickround,u=new Date(s),a="";n&&e.hoverformat?i=c(e.hoverformat,s):e.tickformat?i=c(e.tickformat,s):(r&&(k(o)?o+=2:o={y:"m",m:"d",d:"H",H:"M",M:"S",S:2}[o]),"y"===o?i=q(u):"m"===o?i=R(u):(s!==e._tmin||n||(a="<br>"+q(u)),"d"===o?i=U(u):"H"===o?i=z(u):(s!==e._tmin||n||(a="<br>"+U(u)+", "+q(u)),i=W(u),"M"!==o&&(i+=X(u),"S"!==o&&(i+=g(T(s/1e3,1),e,"none",n).substr(1)))))),t.text=i+a}function d(e,t,n,r,i){var s=e.dtick,o=t.x;if(!r||"string"==typeof s&&"L"===s.charAt(0)||(s="L3"),e.tickformat||"string"==typeof s&&"L"===s.charAt(0))t.text=g(Math.pow(10,o),e,i,r);else if(k(s)||"D"===s.charAt(0)&&T(o+.01,1)<.1)if(-1!==["e","E","power"].indexOf(e.exponentformat)){var u=Math.round(o);0===u?t.text=1:1===u?t.text="10":u>1?t.text="10<sup>"+u+"</sup>":t.text="10<sup>"+ -u+"</sup>",t.fontSize*=1.25}else t.text=g(Math.pow(10,o),e,"","fakehover"),"D1"===s&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6);else{if("D"!==s.charAt(0))throw"unrecognized dtick "+String(s);t.text=String(Math.round(Math.pow(10,T(o,1)))),t.fontSize*=.75}if("D1"===e.dtick){var a=String(t.text).charAt(0);("0"===a||"1"===a)&&("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(0>o?.5:.25)))}}function v(e,t){var n=e._categories[Math.round(t.x)];void 0===n&&(n=""),t.text=String(n)}function m(e,t,n,r,i){"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(i="hide"),t.text=g(t.x,e,i,r)}function g(e,t,n,r){var i=0>e,s=t._tickround,o=n||t.exponentformat||"B",u=t._tickexponent,a=t.tickformat;if(r){var f={exponentformat:t.exponentformat,dtick:"none"===t.showexponent?t.dtick:k(e)?Math.abs(e)||1:1,range:"none"===t.showexponent?t.range:[0,e||1]};l(f),s=(Number(f._tickround)||0)+4,u=f._tickexponent,t.hoverformat&&(a=t.hoverformat)}if(a)return C.format(a)(e).replace(/-/g,"");var c=Math.pow(10,-s)/2;if("none"===o&&(u=0),e=Math.abs(e),c>e)e="0",i=!1;else{if(e+=c,u&&(e*=Math.pow(10,-u),s+=u),0===s)e=String(Math.floor(e));else if(0>s){e=String(Math.round(e)),e=e.substr(0,e.length+s);for(var h=s;0>h;h++)e+="0"}else{e=String(e);var p=e.indexOf(".")+1;p&&(e=e.substr(0,p+s).replace(/\.?0+$/,""))}e=y(e,t._td._fullLayout.separators)}if(u&&"hide"!==o){var d;d=0>u?""+ -u:"power"!==o?"+"+u:String(u),"e"===o||("SI"===o||"B"===o)&&(u>12||-15>u)?e+="e"+d:"E"===o?e+="E"+d:"power"===o?e+="&times;10<sup>"+d+"</sup>":"B"===o&&9===u?e+="B":("SI"===o||"B"===o)&&(e+=$[u/3+5])}return i?""+e:e}function y(e,t){var n=t.charAt(0),r=t.charAt(1),i=e.split("."),s=i[0],o=i.length>1?n+i[1]:"";if(r&&(i.length>1||s.length>4))for(;J.test(s);)s=s.replace(J,"$1"+r+"$2");return s+o}function b(e,t,n){function r(e,n){for(var r=Object.keys(e),i=/^[xyz]axis[0-9]*/,s=[],o=0;o<r.length;o++){var u=r[o];t&&u.charAt(0)!==t||i.test(u)&&s.push(n+u)}return s.sort()}var i=e._fullLayout;if(!i)return[];var s=r(i,"");if(n)return s;for(var o=N.Plots.getSubplotIds(i,"gl3d")||[],u=0;u<o.length;u++){var a=o[u];s=s.concat(r(i[a],a+"."))}return s}function w(e,t){var n,r,i=[];for(n=0;n<t.length;n++){var s=[],o=e._fullData[t[n]].xaxis,u=e._fullData[t[n]].yaxis;if(o&&u){for(r=0;r<i.length;r++)(-1!==i[r].x.indexOf(o)||-1!==i[r].y.indexOf(u))&&s.push(r);if(s.length){var a,f=i[s[0]];if(s.length>1)for(r=1;r<s.length;r++)a=i[s[r]],E(f.x,a.x),E(f.y,a.y);E(f.x,[o]),E(f.y,[u])}else i.push({x:[o],y:[u]})}}return i}function E(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function S(e,t,n){var r,i,s=[],o=[],u=e.layout;for(r=0;r<t.length;r++)s.push(L.getFromId(e,t[r]));for(r=0;r<n.length;r++)o.push(L.getFromId(e,n[r]));var a=Object.keys(s[0]),f=["anchor","domain","overlaying","position","side","tickangle"],l=["linear","log"];for(r=0;r<a.length;r++){var c=a[r],h=s[0][c],p=o[0][c],d=!0,v=!1,m=!1;if("_"!==c.charAt(0)&&"function"!=typeof h&&-1===f.indexOf(c)){for(i=1;i<s.length&&d;i++){var g=s[i][c];"type"===c&&-1!==l.indexOf(h)&&-1!==l.indexOf(g)&&h!==g?v=!0:g!==h&&(d=!1)}for(i=1;i<o.length&&d;i++){var y=o[i][c];"type"===c&&-1!==l.indexOf(p)&&-1!==l.indexOf(y)&&p!==y?m=!0:o[i][c]!==p&&(d=!1)}d&&(v&&(u[s[0]._name].type="linear"),m&&(u[o[0]._name].type="linear"),x(u,c,s,o))}}for(r=0;r<e._fullLayout.annotations.length;r++){var b=e._fullLayout.annotations[r];-1!==t.indexOf(b.xref)&&-1!==n.indexOf(b.yref)&&N.Lib.swapAttrs(u.annotations[r],["?"])}}function x(e,t,n,r){var i,s=N.Lib.nestedProperty,o=s(e[n[0]._name],t).get(),u=s(e[r[0]._name],t).get();for("title"===t&&("Click to enter X axis title"===o&&(o="Click to enter Y axis title"),"Click to enter Y axis title"===u&&(u="Click to enter X axis title")),i=0;i<n.length;i++)s(e,n[i]._name+"."+t).set(u);for(i=0;i<r.length;i++)s(e,r[i]._name+"."+t).set(o)}function T(e,t){return(e%t+t)%t}var N=e("../../plotly"),C=e("d3"),k=e("fast-isnumeric"),L=t.exports={};L.attributes=e("./attributes"),N.Plots.registerSubplot("cartesian",["xaxis","yaxis"],["x","y"],L.attributes),L.layoutAttributes=e("./layout_attributes");var A=/^xaxis[0-9]*$/,O=/^yaxis[0-9]*$/;L.supplyLayoutDefaults=function(e,t,n){function r(e,t){var n=Number(e.substr(5)||1),r=Number(t.substr(5)||1);return n-r}var i,s=Object.keys(e),o=[],u=[],a={},f={};for(i=0;i<s.length;i++){var l=s[i];A.test(l)?o.push(l):O.test(l)&&u.push(l)}for(i=0;i<n.length;i++){var c=n[i],h=L.id2name(c.xaxis),p=L.id2name(c.yaxis);if(h&&-1===o.indexOf(h)&&o.push(h),p&&-1===u.indexOf(p)&&u.push(p),N.Plots.traceIs(c,"2dMap")&&(a[h]=!0,a[p]=!0),N.Plots.traceIs(c,"oriented")){var d="h"===c.orientation?p:h;f[d]=!0}}(t._hasCartesian||t._hasGL2D||!n.length)&&(o.length?o.sort(r):o=["xaxis"],u.length?u.sort(r):u=["yaxis"]),o.concat(u).forEach(function(r){function i(e,t){return N.Lib.coerce(l,c,L.layoutAttributes,e,t)}var s=r.charAt(0),l=e[r]||{},c={},h={letter:s,font:t.font,outerTicks:a[r],showGrid:!f[r],name:r,data:n},p={letter:s,counterAxes:{x:u,y:o}[s].map(L.name2id),overlayableAxes:{x:o,y:u}[s].filter(function(t){return t!==r&&!(e[t]||{}).overlaying}).map(L.name2id)};L.handleAxisDefaults(l,c,i,h),L.handleAxisPositioningDefaults(l,c,i,p),t[r]=c,e[r]||"-"===l.type||(e[r]={type:l.type})}),o.length&&u.length&&N.Lib.coerce(e,t,N.Plots.layoutAttributes,"plot_bgcolor")},L.handleAxisDefaults=function(e,t,n,i){var s=i.letter,o=i.font||{},u="Click to enter "+(i.title||s.toUpperCase()+" axis")+" title";i.name&&(t._name=i.name,t._id=L.name2id(i.name));var a=n("type");"-"===a&&(r(t,i.data),"-"===t.type?t.type="linear":a=e.type=t.type),L.setConvert(t),n("title",u),N.Lib.coerceFont(n,"titlefont",{family:o.family,size:Math.round(1.2*o.size),color:o.color});var f=2===(e.range||[]).length&&k(e.range[0])&&k(e.range[1]),l=n("autorange",!f);l&&n("rangemode");var c=n("range",[-1,"x"===s?6:4]);c[0]===c[1]&&(t.range=[c[0]-1,c[0]+1]),N.Lib.noneOrAll(e.range,t.range,[0,1]),n("fixedrange"),L.handleTickValueDefaults(e,t,n,a),L.handleTickDefaults(e,t,n,a,i);var h=N.Lib.coerce2(e,t,L.layoutAttributes,"linecolor"),p=N.Lib.coerce2(e,t,L.layoutAttributes,"linewidth"),d=n("showline",!!h||!!p);d||(delete t.linecolor,delete t.linewidth),(d||t.ticks)&&n("mirror");var v=N.Lib.coerce2(e,t,L.layoutAttributes,"gridcolor"),m=N.Lib.coerce2(e,t,L.layoutAttributes,"gridwidth"),g=n("showgrid",i.showGrid||!!v||!!m);g||(delete t.gridcolor,delete t.gridwidth);var y=N.Lib.coerce2(e,t,L.layoutAttributes,"zerolinecolor"),b=N.Lib.coerce2(e,t,L.layoutAttributes,"zerolinewidth"),w=n("zeroline",i.showGrid||!!y||!!b);return w||(delete t.zerolinecolor,delete t.zerolinewidth),t},L.handleTickDefaults=function(e,t,n,r,i){var s=N.Lib.coerce2(e,t,L.layoutAttributes,"ticklen"),o=N.Lib.coerce2(e,t,L.layoutAttributes,"tickwidth"),u=N.Lib.coerce2(e,t,L.layoutAttributes,"tickcolor"),a=n("ticks",i.outerTicks||s||o||u?"outside":"");a||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor);var f=n("showticklabels");if(f){N.Lib.coerceFont(n,"tickfont",i.font||{}),n("tickangle");var l=L.getShowAttrDflt(e);if("category"!==r){var c=n("tickformat");i.noHover||n("hoverformat"),c||"date"===r||(n("showexponent",l),n("exponentformat"))}var h=n("tickprefix");h&&n("showtickprefix",l);var p=n("ticksuffix");p&&n("showticksuffix",l)}},L.handleTickValueDefaults=function(e,t,n,r){var i="auto";"array"!==e.tickmode||"log"!==r&&"date"!==r||(e.tickmode="auto"),Array.isArray(e.tickvals)?i="array":e.dtick&&k(e.dtick)&&(i="linear");var s=n("tickmode",i);if("auto"===s)n("nticks");else if("linear"===s)n("tick0"),n("dtick");else{var o=n("tickvals");void 0===o?t.tickmode="auto":n("ticktext")}},L.handleAxisPositioningDefaults=function(e,t,n,r){var i=r.counterAxes||[],s=r.overlayableAxes||[],o=r.letter,u=N.Lib.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:k(e.position)?"free":i[0]||"free"}},"anchor");"free"===u&&n("position"),N.Lib.coerce(e,t,{side:{valType:"enumerated",values:"x"===o?["bottom","top"]:["left","right"],dflt:"x"===o?"bottom":"left"}},"side");var a=!1;if(s.length&&(a=N.Lib.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(s),dflt:!1}},"overlaying")),!a){var f=n("domain");f[0]>f[1]-.01&&(t.domain=[0,1]),N.Lib.noneOrAll(e.domain,t.domain,[0,1])}return t},L.coerceRef=function(e,t,n,r){var i=n._fullLayout._hasGL2D?[]:L.listIds(n,r),s=r+"ref",o={};return o[s]={valType:"enumerated",values:i.concat(["paper"]),dflt:i[0]||"paper"},N.Lib.coerce(e,t,o,s)},L.clearTypes=function(e,t){Array.isArray(t)&&t.length||(t=e._fullData.map(function(e,t){return t})),t.forEach(function(t){var n=e.data[t];delete (L.getFromId(e,n.xaxis)||{}).type,delete (L.getFromId(e,n.yaxis)||{}).type})};var M=/^[xyz][0-9]*$/,_=/^[xyz]axis[0-9]*$/;L.id2name=function(e){if("string"==typeof e&&e.match(M)){var t=e.substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},L.name2id=function(e){if(e.match(_)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},L.cleanId=function(e,t){if(e.match(M)&&(!t||e.charAt(0)===t)){var n=e.substr(1).replace(/^0+/,"");return"1"===n&&(n=""),e.charAt(0)+n}},L.cleanName=function(e,t){if(e.match(M)&&(!t||e.charAt(0)===t)){var n=e.substr(5).replace(/^0+/,"");return"1"===n&&(n=""),e.charAt(0)+"axis"+n}},L.counterLetter=function(e){return{x:"y",y:"x"}[e.charAt(0)]},L.autoType=function(e){return L.moreDates(e)?"date":L.category(e)?"category":u(e)?"linear":"-"},L.getShowAttrDflt=function(e){var t=["showexponent","showtickprefix","showticksuffix"],n=t.filter(function(t){return void 0!==e[t]}),r=function(t){return e[t]===e[n[0]]};return n.every(r)||1===n.length?e[n[0]]:void 0},L.moreDates=function(e){for(var t,n=0,r=0,i=Math.max(1,(e.length-1)/1e3),s=0;s<e.length;s+=i)t=e[Math.round(s)],N.Lib.isDateTime(t)&&(n+=1),k(t)&&(r+=1);return n>2*r},L.category=function(e){for(var t,n=Math.max(1,(e.length-1)/1e3),r=0,i=0,s=0;s<e.length;s+=n)t=L.cleanDatum(e[Math.round(s)]),k(t)?r++:"string"==typeof t&&""!==t&&"None"!==t&&i++;return i>2*r},L.cleanDatum=function(e){try{if("object"==typeof e&&null!==e&&e.getTime)return N.Lib.ms2DateTime(e);if("string"!=typeof e&&!k(e))return"";e=e.toString().replace(/['"%,$# ]/g,"")}catch(t){console.log(t,e)}return e},L.BADNUM=void 0,L.setConvert=function(e){function t(t,n){if(t>0)return Math.log(t)/Math.LN10;if(0>=t&&n&&e.range&&2===e.range.length){var r=e.range[0],s=e.range[1];return.5*(r+s-3*i*Math.abs(r-s))}return L.BADNUM}function n(e){return Math.pow(10,e)}function r(e){return k(e)?Number(e):L.BADNUM}var i=10;if(e.c2l="log"===e.type?t:r,e.l2c="log"===e.type?n:r,e.l2d=function(t){return e.c2d(e.l2c(t))},e.setScale=function(){var t,n=e._td._fullLayout._size;if(e._categories||(e._categories=[]),e.overlaying){var r=L.getFromId(e._td,e.overlaying);e.domain=r.domain}for(e.range&&2===e.range.length&&e.range[0]!==e.range[1]||(e.range=[-1,1]),t=0;2>t;t++)k(e.range[t])||(e.range[t]=k(e.range[1-t])?e.range[1-t]*(t?10:.1):t?1:-1),e.range[t]<-(Number.MAX_VALUE/2)?e.range[t]=-(Number.MAX_VALUE/2):e.range[t]>Number.MAX_VALUE/2&&(e.range[t]=Number.MAX_VALUE/2);if("y"===e._id.charAt(0)?(e._offset=n.t+(1-e.domain[1])*n.h,e._length=n.h*(e.domain[1]-e.domain[0]),e._m=e._length/(e.range[0]-e.range[1]),e._b=-e._m*e.range[1]):(e._offset=n.l+e.domain[0]*n.w,e._length=n.w*(e.domain[1]-e.domain[0]),e._m=e._length/(e.range[1]-e.range[0]),e._b=-e._m*e.range[0]),!isFinite(e._m)||!isFinite(e._b))throw N.Lib.notifier("Something went wrong with axis scaling","long"),e._td._replotting=!1,new Error("axis scaling")},e.l2p=function(t){return k(t)?C.round(N.Lib.constrain(e._b+e._m*t,-i*e._length,(1+i)*e._length),2):L.BADNUM},e.p2l=function(t){return(t-e._b)/e._m},e.c2p=function(t,n){return e.l2p(e.c2l(t,n))},e.p2c=function(t){return e.l2c(e.p2l(t))},-1!==["linear","log","-"].indexOf(e.type))e.c2d=r,e.d2c=function(e){return e=L.cleanDatum(e),k(e)?Number(e):L.BADNUM},e.d2l=function(t,n){return"log"===e.type?e.c2l(e.d2c(t),n):e.d2c(t)};else if("date"===e.type){if(e.c2d=function(e){return k(e)?N.Lib.ms2DateTime(e):L.BADNUM},e.d2c=function(e){return k(e)?Number(e):N.Lib.dateTime2ms(e)},e.d2l=e.d2c,e.range&&e.range.length>1)try{var s=e.range.map(N.Lib.dateTime2ms);!k(e.range[0])&&k(s[0])&&(e.range[0]=s[0]),!k(e.range[1])&&k(s[1])&&(e.range[1]=s[1])}catch(o){console.log(o,e.range)}}else"category"===e.type&&(e.c2d=function(t){return e._categories[Math.round(t)]},e.d2c=function(t){-1===e._categories.indexOf(t)&&e._categories.push(t);var n=e._categories.indexOf(t);return-1===n?L.BADNUM:n},e.d2l=e.d2c);e.makeCalcdata=function(t,n){var r,i,s;if(n in t)for(r=t[n],i=new Array(r.length),s=0;s<r.length;s++)i[s]=e.d2c(r[s]);else{var o=n+"0"in t?e.d2c(t[n+"0"]):0,u=t["d"+n]?Number(t["d"+n]):1;for(r=t[{x:"y",y:"x"}[n]],i=new Array(r.length),s=0;s<r.length;s++)i[s]=o+s*u}return i},e._min=[],e._max=[],e._minDtick=null,e._forceTick0=null},L.minDtick=function(e,t,n,r){-1===["log","category"].indexOf(e.type)&&r?null===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):((t/e._minDtick+1e-6)%1>2e-6||((n-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0)):e._minDtick=0},L.doAutoRange=function(e){if(e._length||e.setScale(),e.autorange&&e._min&&e._max&&e._min.length&&e._max.length){var t,n=e._min[0].val,r=e._max[0].val;for(t=1;t<e._min.length&&n===r;t++)n=Math.min(n,e._min[t].val);for(t=1;t<e._max.length&&n===r;t++)r=Math.max(r,e._max[t].val);var i,s,o,u,a,f,l,c=0,h=e.range&&e.range[1]<e.range[0];for("reversed"===e.autorange&&(h=!0,e.autorange=!0),t=0;t<e._min.length;t++)for(s=e._min[t],i=0;i<e._max.length;i++)o=e._max[i],l=o.val-s.val,f=e._length-s.pad-o.pad,l>0&&f>0&&l/f>c&&(u=s,a=o,c=l/f);n===r?e.range=h?[n+1,"normal"!==e.rangemode?0:n-1]:["normal"!==e.rangemode?0:n-1,n+1]:c&&(("linear"===e.type||"-"===e.type)&&("tozero"===e.rangemode&&u.val>=0?u={val:0,pad:0}:"nonnegative"===e.rangemode&&(u.val-c*u.pad<0&&(u={val:0,pad:0}),a.val<0&&(a={val:1,pad:0})),c=(a.val-u.val)/(e._length-u.pad-a.pad)),e.range=[u.val-c*u.pad,a.val+c*a.pad],e.range[0]===e.range[1]&&(e.range=[e.range[0]-1,e.range[0]+1]),h&&e.range.reverse());var p=e._td.layout[e._name];p||(e._td.layout[e._name]=p={}),p!==e&&(p.range=e.range.slice(),p.autorange=e.autorange)}},L.saveRangeInitial=function(e,t){for(var n,r,i,s=L.list(e,"",!0),o=!1,u=0;u<s.length;u++)n=s[u],r=void 0===n._rangeInitial,i=r||n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1],(r&&n.autorange===!1||t&&i)&&(n._rangeInitial=n.range.slice(),o=!0);return o};var D=Number.MAX_VALUE/2;L.expand=function(e,t,n){function r(e){if(Array.isArray(e))return function(t){return Math.max(Number(e[t]||0),0)};var t=Math.max(Number(e||0),0);return function(){return t}}function i(n){function r(e){return k(e)&&Math.abs(e)<D}if(a=t[n],k(a)){if(c=b(n)+g,h=w(n)+g,d=a-S(n),v=a+E(n),"log"===e.type&&v/10>d&&(d=v/10),f=e.c2l(d),l=e.c2l(v),y&&(f=Math.min(0,f),l=Math.max(0,l)),r(f)){for(p=!0,o=0;o<e._min.length&&p;o++)u=e._min[o],u.val<=f&&u.pad>=h?p=!1:u.val>=f&&u.pad<=h&&(e._min.splice(o,1),o--);p&&e._min.push({val:f,pad:y&&0===f?0:h})}if(r(l)){for(p=!0,o=0;o<e._max.length&&p;o++)u=e._max[o],u.val>=l&&u.pad>=c?p=!1:u.val<=l&&u.pad<=c&&(e._max.splice(o,1),o--);p&&e._max.push({val:l,pad:y&&0===l?0:c})}}}if(e.autorange&&t){e._min||(e._min=[]),e._max||(e._max=[]),n||(n={}),e._m||e.setScale();var s,o,u,a,f,l,c,h,p,d,v,m=t.length,g=n.padded?.05*e._length:0,y=n.tozero&&("linear"===e.type||"-"===e.type),b=r((e._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),w=r((e._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),E=r(n.vpadplus||n.vpad),S=r(n.vpadminus||n.vpad);for(s=0;6>s;s++)i(s);for(s=m-1;s>5;s--)i(s)}},L.autoBin=function(e,t,n,r){function i(e){return(1+100*(e-p)/c.dtick)%100<2}var s=N.Lib.aggNums(Math.min,null,e),o=N.Lib.aggNums(Math.max,null,e);if("category"===t.type)return{start:s-.5,end:o+.5,size:1};var u;if(n)u=(o-s)/n;else{var a=N.Lib.distinctVals(e),f=Math.pow(10,Math.floor(Math.log(a.minDiff)/Math.LN10)),l=f*N.Lib.roundUp(a.minDiff/f,[.9,1.9,4.9,9.9],!0);u=Math.max(l,2*N.Lib.stdev(e)/Math.pow(e.length,r?.25:.4))}var c={type:"log"===t.type?"linear":t.type,range:[s,o]};L.autoTicks(c,u);var h,p=L.tickIncrement(L.tickFirst(c),c.dtick,"reverse");if("number"==typeof c.dtick){for(var d=0,v=0,m=0,g=0,y=0;y<e.length;y++)e[y]%1===0?m++:k(e[y])||g++,i(e[y])&&d++,i(e[y]+c.dtick/2)&&v++;var b=e.length-g;if(m===b&&"date"!==t.type)c.dtick<1?p=s-.5*c.dtick:p-=.5;else if(.1*b>v&&(d>.3*b||i(s)||i(o))){var w=c.dtick/2;p+=s>p+w?w:-w}var E=1+Math.floor((o-p)/c.dtick);h=p+E*c.dtick}else for(h=p;o>=h;)h=L.tickIncrement(h,c.dtick);return{start:p,end:h,size:c.dtick}},L.calcTicks=function(e){if("array"===e.tickmode)return a(e);if("auto"===e.tickmode||!e.dtick){var t,n=e.nticks;n||("category"===e.type?(t=e.tickfont?1.2*(e.tickfont.size||12):15,n=e._length/t):(t="y"===e._id.charAt(0)?40:80,n=N.Lib.constrain(e._length/t,4,9)+1)),L.autoTicks(e,Math.abs(e.range[1]-e.range[0])/n),e._minDtick>0&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e._forceTick0)}e.tick0||(e.tick0="date"===e.type?(new Date(2e3,0,1)).getTime():0),l(e),e._tmin=L.tickFirst(e);var r=e.range[1]<e.range[0],i=[],s=1.0001*e.range[1]-1e-4*e.range[0];"category"===e.type&&(s=r?Math.max(-0.5,s):Math.min(e._categories.length-.5,s));for(var o=e._tmin;(r?o>=s:s>=o)&&(i.push(o),!(i.length>1e3));o=L.tickIncrement(o,e.dtick,r));e._tmax=i[i.length-1];for(var u=new Array(i.length),f=0;f<i.length;f++)u[f]=L.tickText(e,i[f]);return u};var P=[2,5,10],H=[1,2,3,6,12],B=[1,2,5,10,15,30],j=[1,2,3,7,14],F=[-0.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],I=[-0.301,0,.301,.699,1];L.autoTicks=function(e,t){var n;if("date"===e.type)e.tick0=(new Date(2e3,0,1)).getTime(),t>157788e5?(t/=315576e5,n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),e.dtick="M"+12*f(t,n,P)):t>12096e5?(t/=26298e5,e.dtick="M"+f(t,1,H)):t>432e5?(e.dtick=f(t,864e5,j),e.tick0=(new Date(2e3,0,2)).getTime()):t>18e5?e.dtick=f(t,36e5,H):t>3e4?e.dtick=f(t,6e4,B):t>500?e.dtick=f(t,1e3,B):(n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),e.dtick=f(t,n,P));else if("log"===e.type)if(e.tick0=0,t>.7)e.dtick=Math.ceil(t);else if(Math.abs(e.range[1]-e.range[0])<1){var r=1.5*Math.abs((e.range[1]-e.range[0])/t);t=Math.abs(Math.pow(10,e.range[1])-Math.pow(10,e.range[0]))/r,n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),e.dtick="L"+f(t,n,P)}else e.dtick=t>.3?"D2":"D1";else"category"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):(e.tick0=0,n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),e.dtick=f(t,n,P));if(0===e.dtick&&(e.dtick=1),!k(e.dtick)&&"string"!=typeof e.dtick){var i=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(i)}},L.tickIncrement=function(e,t,n){var r=n?-1:1;if(k(t))return e+r*t;var i=t.charAt(0),s=r*Number(t.substr(1));if("M"===i){var o=new Date(e);return o.setMonth(o.getMonth()+s)}if("L"===i)return Math.log(Math.pow(10,e)+s)/Math.LN10;if("D"===i){var u="D2"===t?I:F,a=e+.01*r,f=N.Lib.roundUp(T(a,1),u,n);return Math.floor(a)+Math.log(C.round(Math.pow(10,f),1))/Math.LN10}throw"unrecognized dtick "+String(t)},L.tickFirst=function(e){var t=e.range[1]<e.range[0],n=t?Math.floor:Math.ceil,r=1.0001*e.range[0]-1e-4*e.range[1],i=e.dtick,s=e.tick0;if(k(i)){var o=n((r-s)/i)*i+s;return"category"===e.type&&(o=N.Lib.constrain(o,0,e._categories.length-1)),o}var u,a,f,l=i.charAt(0),c=Number(i.substr(1));if("M"===l){for(u=new Date(s),r=new Date(r),a=12*(r.getFullYear()-u.getFullYear())+r.getMonth()-u.getMonth(),f=u.setMonth(u.getMonth()+(Math.round(a/c)+(t?1:-1))*c);t?f>r:r>f;)f=L.tickIncrement(f,i,t);return f}if("L"===l)return Math.log(n((Math.pow(10,r)-s)/c)*c+s)/Math.LN10;if("D"===l){var h="D2"===i?I:F,p=N.Lib.roundUp(T(r,1),h,t);return Math.floor(r)+Math.log(C.round(Math.pow(10,p),1))/Math.LN10}throw"unrecognized dtick "+String(i)};var q=C.time.format("%Y"),R=C.time.format("%b %Y"),U=C.time.format("%b %-d"),z=C.time.format("%b %-d %Hh"),W=C.time.format("%H:%M"),X=C.time.format(":%S"),V=/%(\d?)f/g;L.tickText=function(e,t,n){function r(r){var i;return void 0===r?!0:n?"none"===r:(i={first:e._tmin,last:e._tmax}[r],"all"!==r&&t!==i)}var i,s=h(e,t),o="array"===e.tickmode,u=n||o;if(o&&Array.isArray(e.ticktext)){for(var a=Math.abs(e.range[1]-e.range[0])/1e4,f=0;f<e.ticktext.length&&!(Math.abs(t-e.d2l(e.tickvals[f]))<a);f++);if(f<e.ticktext.length)return s.text=String(e.ticktext[f]),s}return i="none"!==e.exponentformat&&r(e.showexponent)?"hide":"","date"===e.type?p(e,s,n,u):"log"===e.type?d(e,s,n,u,i):"category"===e.type?v(e,s):m(e,s,n,u,i),e.tickprefix&&!r(e.showtickprefix)&&(s.text=e.tickprefix+s.text),e.ticksuffix&&!r(e.showticksuffix)&&(s.text+=e.ticksuffix),s};var $=["f","p","n","&mu;","m","","k","M","G","T"],J=/(\d+)(\d{3})/;L.list=function(e,t,n){return b(e,t,n).map(function(t){return N.Lib.nestedProperty(e._fullLayout,t).get()})},L.listIds=function(e,t){return b(e,t,!0).map(L.name2id)},L.getFromId=function(e,t,n){var r=e._fullLayout;return"x"===n?t=t.replace(/y[0-9]*/,""):"y"===n&&(t=t.replace(/x[0-9]*/,"")),r[L.id2name(t)]},L.getFromTrace=function(e,t,n){var r=e._fullLayout,i=null;if(N.Plots.traceIs(t,"gl3d")){var s=t.scene;"scene"===s.substr(0,5)&&(i=r[s][n+"axis"])}else i=L.getFromId(e,t[n+"axis"]||n);return i},L.subplotMatch=/^x([0-9]*)y([0-9]*)$/,L.getSubplots=function(e,t){function n(e,t){return-1!==e.indexOf(t._id)}var r,i,s,o=[],u=e.data||[];for(r=0;r<u.length;r++){var a=u[r];if(a.visible!==!1&&"legendonly"!==a.visible&&(N.Plots.traceIs(a,"cartesian")||N.Plots.traceIs(a,"gl2d"))){var f=a.xaxis||"x",l=a.yaxis||"y";s=f+l,-1===o.indexOf(s)&&o.push(s)}}var c=L.list(e,"",!0);for(r=0;r<c.length;r++){var h=c[r],p=h._id.charAt(0),d="free"===h.anchor?"x"===p?"y":"x":h.anchor,v=L.getFromId(e,d),m=!1;for(i=0;i<o.length;i++)if(n(o[i],h)){m=!0;break}if("free"!==h.anchor||!m){if(!v)return void console.log(["Warning: couldnt find anchor",d,"for axis",h._id].join(" "));s="x"===p?h._id+v._id:v._id+h._id,-1===o.indexOf(s)&&o.push(s)}}var g=L.subplotMatch,y=[];for(r=0;r<o.length;r++)s=o[r],g.test(s)&&y.push(s);return y.sort(function(e,t){var n=e.match(g),r=t.match(g);return n[1]===r[1]?+(n[2]||1)-(r[2]||1):+(n[1]||0)-(r[1]||0)}),t?L.findSubplotsWithAxis(y,t):y},L.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],i=0;i<e.length;i++){var s=e[i];n.test(s)&&r.push(s)}return r},L.makeClipPaths=function(e){var t,n,r=e._fullLayout,i=r._defs,s={_offset:0,_length:r.width,_id:""},o={_offset:0,_length:r.height,_id:""},u=L.list(e,"x",!0),a=L.list(e,"y",!0),f=[];for(t=0;t<u.length;t++)for(f.push({x:u[t],y:o}),n=0;n<a.length;n++)0===t&&f.push({x:s,y:a[n]}),f.push({x:u[t],y:a[n]});var l=i.selectAll("g.clips").data([0]);l.enter().append("g").classed("clips",!0);var c=l.selectAll(".axesclip").data(f,function(e){return e.x._id+e.y._id});c.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+r._uid+e.x._id+e.y._id}).append("rect"),c.exit().remove(),c.each(function(e){C.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})},L.doTicks=function(e,t,n){function r(e){var t=a.l2p(e.x);return t>1&&t<a._length-1}function i(e,t){var n=e.selectAll("path."+w).data("inside"===a.ticks?P:y,b);t&&a.ticks?(n.enter().append("path").classed(w,1).classed("ticks",1).classed("crisp",1).call(N.Color.stroke,a.tickcolor).style("stroke-width",M+"px").attr("d",t),n.attr("transform",h),n.exit().remove()):n.remove()}function s(r,i){function s(e,t){e.each(function(e){var n=p(t),r=C.select(this),i=r.select(".text-math-group"),s=h(e)+(k(t)&&0!==+t?" rotate("+t+","+l(e)+","+(c(e)-e.fontSize/2)+")":"");if(i.empty()){var o=r.select("text").attr({transform:s,"text-anchor":n});o.empty()||o.selectAll("tspan.line").attr({x:o.attr("x"),y:o.attr("y")})}else{var u=N.Drawing.bBox(i.node()).width*{end:-0.5,start:.5}[n];i.attr("transform",s+(u?"translate("+u+",0)":""))}})}function o(){return L.length&&Promise.all(L)}function u(){if(s(f,a.tickangle),"x"===m&&!k(a.tickangle)&&("log"!==a.type||"D"!==String(a.dtick).charAt(0))){var r=[];for(f.each(function(e){var t=C.select(this),n=t.select(".text-math-group"),i=a.l2p(e.x);n.empty()&&(n=t.select("text"));var s=N.Drawing.bBox(n.node());r.push({top:0,bottom:10,height:10,left:i-s.width/2,right:i+s.width/2+2,width:s.width+2})}),v=0;v<r.length-1;v++)if(N.Lib.bBoxIntersect(r[v],r[v+1])){S=30;break}if(S){var i=Math.abs((y[y.length-1].x-y[0].x)*a._m)/(y.length-1);2.5*E>i&&(S=90),s(f,S)}a._lastangle=S}return n||N.Titles.draw(e,t+"title"),t+" done"}var f=r.selectAll("g."+w).data(y,b);if(!a.showticklabels||!k(i))return f.remove(),void N.Titles.draw(e,t+"title");var l,c,p,d;if("x"===m){var g="bottom"===_?1:-1;l=function(e){return e.dx},d=i+(T+x)*g,c=function(e){return e.dy+d+e.fontSize*("bottom"===_?1:-0.5)},p=function(e){return k(e)&&0!==e&&180!==e?0>e*g?"end":"start":"middle"}}else c=function(e){return e.dy+e.fontSize/2},l=function(e){return e.dx+i+(T+x+(90===Math.abs(a.tickangle)?e.fontSize/2:0))*("right"===_?1:-1)},p=function(e){return k(e)&&90===Math.abs(e)?"middle":"right"===_?"start":"end"};var E=0,S=0,L=[];f.enter().append("g").classed(w,1).append("text").attr("text-anchor","middle").each(function(t){var n=C.select(this),r=e._promises.length;n.call(N.Drawing.setPosition,l(t),c(t)).call(N.Drawing.font,t.font,t.fontSize,t.fontColor).text(t.text).call(N.util.convertToTspans),r=e._promises[r],r?L.push(e._promises.pop().then(function(){s(n,a.tickangle)})):s(n,a.tickangle)}),f.exit().remove(),f.each(function(e){E=Math.max(E,e.fontSize)}),s(f,a._lastangle||a.tickangle);var A=N.Lib.syncOrAsync([o,u]);return A&&A.then&&e._promises.push(A),A}function o(e,t){return e.visible!==!0||e.xaxis+e.yaxis!==t?!1:N.Plots.traceIs(e,"bar")&&e.orientation==={x:"h",y:"v"}[m]?!0:e.fill&&e.fill.charAt(e.fill.length-1)===m}function u(t,n,i){var s=t.gridlayer,u=t.zerolinelayer,f=t["hidegrid"+m]?[]:P,l="M0,0"+("x"===m?"v":"h")+n._length,c=s.selectAll("path."+E).data(a.showgrid===!1?[]:f,b);c.enter().append("path").classed(E,1).classed("crisp",1).attr("d",l).each(function(e){a.zeroline&&("linear"===a.type||"-"===a.type)&&Math.abs(e.x)<a.dtick/100&&C.select(this).remove()}),c.attr("transform",h).call(N.Color.stroke,a.gridcolor||"#ddd").style("stroke-width",A+"px"),c.exit().remove();for(var p=!1,d=0;d<e._fullData.length;d++)if(o(e._fullData[d],i)){p=!0;break}var v=a.range[0]*a.range[1]<=0&&a.zeroline&&("linear"===a.type||"-"===a.type)&&f.length&&(p||r({x:0})||!a.showline),g=u.selectAll("path."+S).data(v?[{x:0}]:[]);g.enter().append("path").classed(S,1).classed("zl",1).classed("crisp",1).attr("d",l),g.attr("transform",h).call(N.Color.stroke,a.zerolinecolor||N.Color.defaultLine).style("stroke-width",O+"px"),g.exit().remove()}var a,f=e._fullLayout,l=!1;if("object"==typeof t)a=t,t=a._id,l=!0;else if(a=L.getFromId(e,t),"redraw"===t&&f._paper.selectAll("g.subplot").each(function(e){var t=f._plots[e],n=t.x(),r=t.y();t.plot.attr("viewBox","0 0 "+n._length+" "+r._length),t.xaxislayer.selectAll("."+n._id+"tick").remove(),t.yaxislayer.selectAll("."+r._id+"tick").remove(),t.gridlayer.selectAll("path").remove(),t.zerolinelayer.selectAll("path").remove()}),!t||"redraw"===t)return N.Lib.syncOrAsync(L.list(e,"",!0).map(function(n){return function(){if(n._id){var r=L.doTicks(e,n._id);return"redraw"===t&&(n._r=n.range.slice()),r}}}));a.tickformat||(-1===["none","e","E","power","SI","B"].indexOf(a.exponentformat)&&(a.exponentformat="e"),-1===["all","first","last","none"].indexOf(a.showexponent)&&(a.showexponent="all")),a.range=[+a.range[0],+a.range[1]],a.setScale();var c,h,p,d,v,m=t.charAt(0),g=L.counterLetter(t),y=L.calcTicks(a),b=function(e){return e.text+e.x+a.mirror},w=t+"tick",E=t+"grid",S=t+"zl",x=(a.linewidth||1)/2,T=("outside"===a.ticks?a.ticklen:1)+(a.linewidth||0),A=N.Drawing.crispRound(e,a.gridwidth,1),O=N.Drawing.crispRound(e,a.zerolinewidth,A),M=N.Drawing.crispRound(e,a.tickwidth,1);if("x"===m)c=["bottom","top"],h=function(e){return"translate("+a.l2p(e.x)+",0)"},p="M0,",d="v";else{if("y"!==m)return void console.log("unrecognized doTicks axis",t);c=["left","right"],h=function(e){return"translate(0,"+a.l2p(e.x)+")"},p="M",d=",0h"}var _=a.side||c[0],D=[-1,1,_===c[1]?1:-1];"inside"!==a.ticks==("x"===m)&&(D=D.map(function(e){return-e}));var P=y.filter(r);if(l)return i(a._axislayer,p+(a._pos+x*D[2])+d+D[2]*a.ticklen),s(a._axislayer,a._pos);var H=L.getSubplots(e,a).map(function(e){var t=f._plots[e];if(f._hasCartesian){var n=t[m+"axislayer"],r=a._linepositions[e]||[],o=t[g](),l=o._id===a.anchor,h=[!1,!1,!1],y="";if("allticks"===a.mirror?h=[!0,!0,!1]:l&&("ticks"===a.mirror?h=[!0,!0,!1]:h[c.indexOf(_)]=!0),a.mirrors)for(v=0;2>v;v++){var b=a.mirrors[o._id+c[v]];("ticks"===b||"labels"===b)&&(h[v]=!0)}return void 0!==r[2]&&(h[2]=!0),h.forEach(function(e,t){var n=r[t],i=D[t];e&&k(n)&&(y+=p+(n+x*i)+d+i*a.ticklen)}),i(n,y),u(t,o,e),s(n,r[3])}}).filter(function(e){return e&&e.then});return H.length?Promise.all(H):0},L.swap=function(e,t){for(var n=w(e,t),r=0;r<n.length;r++)S(e,n[r].x,n[r].y)}},{"../../plotly":330,"./attributes":332,"./layout_attributes":335,d3:53,"fast-isnumeric":58}],334:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=e.length;r>0;r--)n.push(t);return n}function i(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].p2c(t));return n}function s(e,t){return function(n){var r=e(n),i=t(n);return Math.sqrt(r*r+i*i)}}function o(e,t,n){n||(n="xy");var s=e._fullLayout,o=s._plots[n],p=[n].concat(o.overlays.map(function(e){return e.id})),d=p.map(function(t){return E.Axes.getFromId(e,t,"x")}),v=p.map(function(t){return E.Axes.getFromId(e,t,"y")}),m=t.hovermode||s.hovermode;if(-1===["x","y","closest"].indexOf(m)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return h(e,t);var g,y,b,w,S,x,k,L,A,O,M,_,D=[],P=[];if(Array.isArray(t))for(m="array",b=0;b<t.length;b++)S=e.calcdata[t[b].curveNumber||0],"none"!==S[0].trace.hoverinfo&&P.push(S);else{for(w=0;w<e.calcdata.length;w++)S=e.calcdata[w],x=S[0].trace,"none"!==x.hoverinfo&&-1!==p.indexOf(x.xaxis+x.yaxis)&&P.push(S);var H,B;if(t.target&&"clientX"in t&&"clientY"in t){if(N.triggerHandler(e,"plotly_beforehover",t)===!1)return;var j=t.target.getBoundingClientRect();if(H=t.clientX-j.left,B=t.clientY-j.top,0>H||H>j.width||0>B||B>j.height)return h(e,t)}else H="xpx"in t?t.xpx:d[0]._length/2,B="ypx"in t?t.ypx:v[0]._length/2;if(g="xval"in t?r(p,t.xval):i(d,H),y="yval"in t?r(p,t.yval):i(v,B),!T(g[0])||!T(y[0]))return console.log("Plotly.Fx.hover failed",t,e),h(e,t)}var F=1/0;for(w=0;w<P.length;w++)if(S=P[w],S&&S[0]&&S[0].trace&&S[0].trace.visible===!0){if(x=S[0].trace,k=p.indexOf(x.xaxis+x.yaxis),L=m,M={cd:S,trace:x,xa:d[k],ya:v[k],name:e.data.length>1||-1!==x.hoverinfo.indexOf("name")?x.name:void 0,index:!1,distance:Math.min(F,C.MAXDIST),color:E.Color.defaultLine,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},_=D.length,"array"===L){var I=t[w];"pointNumber"in I?(M.index=I.pointNumber,L="closest"):(L="","xval"in I&&(A=I.xval,L="x"),"yval"in I&&(O=I.yval,L=L?"closest":"y"))}else A=g[k],O=y[k];if(x._module&&x._module.hoverPoints){var q=x._module.hoverPoints(M,A,O,L);if(q)for(var R,U=0;U<q.length;U++)R=q[U],T(R.x0)&&T(R.y0)&&D.push(u(R,m))}else console.log("unrecognized trace type in hover",x);"closest"===m&&D.length>_&&(D.splice(0,_),F=D[0].distance)}if(0===D.length)return h(e,t);var z="y"===m&&P.length>1;D.sort(function(e,t){return e.distance-t.distance});var W={hovermode:m,rotateLabels:z,bgColor:E.Color.combine(s.plot_bgcolor,s.paper_bgcolor),container:s._hoverlayer,outerContainer:s._paperdiv},X=a(D,W);f(D,z?d[0]:v[0]),l(X,z);var V=e._hoverdata,$=[];for(b=0;b<D.length;b++){var J=D[b],K={data:J.trace._input,fullData:J.trace,curveNumber:J.trace.index,pointNumber:J.index,x:J.xVal,y:J.yVal,xaxis:J.xa,yaxis:J.ya};void 0!==J.zLabelVal&&(K.z=J.zLabelVal),$.push(K)}e._hoverdata=$,c(e,t,V)&&(V&&e.emit("plotly_unhover",{points:V}),e.emit("plotly_hover",{points:e._hoverdata,xaxes:d,yaxes:v,xvals:g,yvals:y}))}function u(e,t){e.posref="y"===t?(e.x0+e.x1)/2:(e.y0+e.y1)/2,e.x0=E.Lib.constrain(e.x0,0,e.xa._length),e.x1=E.Lib.constrain(e.x1,0,e.xa._length),e.y0=E.Lib.constrain(e.y0,0,e.ya._length),e.y1=E.Lib.constrain(e.y1,0,e.ya._length);var n;if(void 0!==e.xLabelVal){n="log"===e.xa.type&&e.xLabelVal<=0;var r=E.Axes.tickText(e.xa,e.xa.c2l(n?-e.xLabelVal:e.xLabelVal),"hover");n?0===e.xLabelVal?e.xLabel="0":e.xLabel="-"+r.text:e.xLabel=r.text,e.xVal=e.xa.c2d(e.xLabelVal)}if(void 0!==e.yLabelVal){n="log"===e.ya.type&&e.yLabelVal<=0;var i=E.Axes.tickText(e.ya,e.ya.c2l(n?-e.yLabelVal:e.yLabelVal),"hover");n?0===e.yLabelVal?e.yLabel="0":e.yLabel="-"+i.text:e.yLabel=i.text,e.yVal=e.ya.c2d(e.yLabelVal)}if(void 0!==e.zLabelVal&&(e.zLabel=String(e.zLabelVal)),void 0!==e.xerr){var s=E.Axes.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;void 0!==e.xerrneg?e.xLabel+=" +"+s+" / -"+E.Axes.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" &plusmn; "+s,"x"===t&&(e.distance+=1)}if(void 0!==e.yerr){var o=E.Axes.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;void 0!==e.yerrneg?e.yLabel+=" +"+o+" / -"+E.Axes.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" &plusmn; "+o,"y"===t&&(e.distance+=1)}var u=e.trace.hoverinfo;return"all"!==u&&(u=u.split("+"),-1===u.indexOf("x")&&(e.xLabel=void 0),-1===u.indexOf("y")&&(e.yLabel=void 0),-1===u.indexOf("z")&&(e.zLabel=void 0),-1===u.indexOf("text")&&(e.text=void 0),-1===u.indexOf("name")&&(e.name=void 0)),e}function a(e,t){var n,r,i=t.hovermode,s=t.rotateLabels,o=t.bgColor,u=t.container,a=t.outerContainer,f=e[0],l=f.xa,c=f.ya,h="y"===i?"yLabel":"xLabel",p=f[h],d=(String(p)||"").split(" ")[0],v=a.node().getBoundingClientRect(),m=v.top,g=v.width,y=v.height,b=f.distance<=C.MAXDIST&&("x"===i||"y"===i);for(n=0;n<e.length;n++)if(r=e[n].trace.hoverinfo,-1===r.indexOf("all")&&-1===r.indexOf(i)){b=!1;break}var w=u.selectAll("g.axistext").data(b?[0]:[]);w.enter().append("g").classed("axistext",!0),w.exit().remove(),w.each(function(){var t=S.select(this),n=t.selectAll("path").data([0]),r=t.selectAll("text").data([0]);n.enter().append("path").style({fill:E.Color.defaultLine,"stroke-width":"1px",stroke:E.Color.background}),r.enter().append("text").call(E.Drawing.font,B,H,E.Color.background).attr("data-notex",1),r.text(p).call(E.util.convertToTspans).call(E.Drawing.setPosition,0,0).selectAll("tspan.line").call(E.Drawing.setPosition,0,0),t.attr("transform","");var s=r.node().getBoundingClientRect();if("x"===i){r.attr("text-anchor","middle").call(E.Drawing.setPosition,0,"top"===l.side?m-s.bottom-D-P:m-s.top+D+P).selectAll("tspan.line").attr({x:r.attr("x"),y:r.attr("y")});var o="top"===l.side?"-":"";n.attr("d","M0,0L"+D+","+o+D+"H"+(P+s.width/2)+"v"+o+(2*P+s.height)+"H-"+(P+s.width/2)+"V"+o+D+"H-"+D+"Z"),t.attr("transform","translate("+(l._offset+(f.x0+f.x1)/2)+","+(c._offset+("top"===l.side?0:c._length))+")")}else{r.attr("text-anchor","right"===c.side?"start":"end").call(E.Drawing.setPosition,("right"===c.side?1:-1)*(P+D),m-s.top-s.height/2).selectAll("tspan.line").attr({x:r.attr("x"),y:r.attr("y")});var u="right"===c.side?"":"-";n.attr("d","M0,0L"+u+D+","+D+"V"+(P+s.height/2)+"h"+u+(2*P+s.width)+"V-"+(P+s.height/2)+"H"+u+D+"V-"+D+"Z"),t.attr("transform","translate("+(l._offset+("right"===c.side?l._length:0))+","+(c._offset+(f.y0+f.y1)/2)+")")}e=e.filter(function(e){return void 0!==e.zLabelVal||(e[h]||"").split(" ")[0]===d})});var T=u.selectAll("g.hovertext").data(e,function(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr||""].join(",")});return T.enter().append("g").classed("hovertext",!0).each(function(){var e=S.select(this);e.append("rect").call(E.Color.fill,E.Color.addOpacity(o,.8)),e.append("text").classed("name",!0).call(E.Drawing.font,B,H),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(E.Drawing.font,B,H)}),T.exit().remove(),T.each(function(e){var t=S.select(this).attr("transform",""),n="",r="",u=E.Color.opacity(e.color)?e.color:E.Color.defaultLine,a=E.Color.combine(u,o),f=x(a).getBrightness()>128?"#000":E.Color.background;if(e.name&&void 0===e.zLabelVal){var h=document.createElement("p");h.innerHTML=e.name,n=h.textContent||"",n.length>15&&(n=n.substr(0,12)+"...")}void 0!==e.zLabel?(void 0!==e.xLabel&&(r+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(r+="y: "+e.yLabel+"<br>"),r+=(r?"z: ":"")+e.zLabel):b&&e[i+"Label"]===p?r=e[("x"===i?"y":"x")+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&(r=e.yLabel):r=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",e.text&&(r+=(r?"<br>":"")+e.text),""===r&&(""===n&&t.remove(),r=n);var d=t.select("text.nums").style("fill",f).call(E.Drawing.setPosition,0,0).text(r).attr("data-notex",1).call(E.util.convertToTspans);d.selectAll("tspan.line").call(E.Drawing.setPosition,0,0);var v=t.select("text.name"),w=0;n&&n!==r?(v.style("fill",a).text(n).call(E.Drawing.setPosition,0,0).attr("data-notex",1).call(E.util.convertToTspans),v.selectAll("tspan.line").call(E.Drawing.setPosition,0,0),w=v.node().getBoundingClientRect().width+2*P):(v.remove(),t.select("rect").remove()),t.select("path").style({fill:a,stroke:f});var T,N,C=d.node().getBoundingClientRect(),k=l._offset+(e.x0+e.x1)/2,A=c._offset+(e.y0+e.y1)/2,O=Math.abs(e.x1-e.x0),M=Math.abs(e.y1-e.y0),_=C.width+D+P+w;e.ty0=m-C.top,e.bx=C.width+2*P,e.by=C.height+2*P,e.anchor="start",e.txwidth=C.width,e.tx2width=w,e.offset=0,s?(e.pos=k,T=y>=A+M/2+_,N=A-M/2-_>=0,"top"!==e.idealAlign&&T||!N?T?(A+=M/2,e.anchor="start"):e.anchor="middle":(A-=M/2,e.anchor="end")):(e.pos=A,T=g>=k+O/2+_,N=k-O/2-_>=0,"left"!==e.idealAlign&&T||!N?T?(k+=O/2,e.anchor="start"):e.anchor="middle":(k-=O/2,e.anchor="end")),d.attr("text-anchor",e.anchor),w&&v.attr("text-anchor",e.anchor),t.attr("transform","translate("+k+","+A+")"+(s?"rotate("+L+")":""))}),T}function f(e,t){function n(e){var t=e[0],n=e[e.length-1];if(i=c-t.pos-t.dp+t.size,s=n.pos+n.dp+n.size-h,i>.01){for(u=e.length-1;u>=0;u--)e[u].dp+=i;r=!1}if(!(.01>s)){if(-0.01>i){for(u=e.length-1;u>=0;u--)e[u].dp-=s;r=!1}if(r){var f=0;for(o=0;o<e.length;o++)a=e[o],a.pos+a.dp+a.size>h&&f++;for(o=e.length-1;o>=0&&!(0>=f);o--)a=e[o],a.pos>h-1&&(a.del=!0,f--);for(o=0;o<e.length&&!(0>=f);o++)if(a=e[o],a.pos<c+1)for(a.del=!0,f--,s=2*a.size,u=e.length-1;u>=0;u--)e[u].dp-=s;for(o=e.length-1;o>=0&&!(0>=f);o--)a=e[o],a.pos+a.dp+a.size>h&&(a.del=!0,f--)}}}for(var r,i,s,o,u,a,f,l=0,c=t._offset,h=t._offset+t._length,p=e.map(function(e,n){return[{i:n,dp:0,pos:e.pos,posref:e.posref,size:e.by*("x"===t._id.charAt(0)?O:1)/2}]}).sort(function(e,t){return e[0].posref-t[0].posref});!r&&l<=e.length;){for(l++,r=!0,o=0;o<p.length-1;){var d=p[o],v=p[o+1],m=d[d.length-1],g=v[0];if(i=m.pos+m.dp+m.size-g.pos-g.dp+g.size,i>.01){for(u=v.length-1;u>=0;u--)v[u].dp+=i;for(d.push.apply(d,v),p.splice(o+1,1),f=0,u=d.length-1;u>=0;u--)f+=d[u].dp;for(s=f/d.length,u=d.length-1;u>=0;u--)d[u].dp-=s;r=!1}else o++}p.forEach(n)}for(o=p.length-1;o>=0;o--){var y=p[o];for(u=y.length-1;u>=0;u--){var b=y[u],w=e[b.i];w.offset=b.dp,w.del=b.del}}}function l(e,t){e.each(function(e){var n=S.select(this);if(e.del)return void n.remove();var r="end"===e.anchor?-1:1,i=n.select("text.nums"),s={start:1,end:-1,middle:0}[e.anchor],o=s*(D+P),u=o+s*(e.txwidth+P),a=0,f=e.offset;"middle"===e.anchor&&(o-=e.tx2width/2,u-=e.tx2width/2),t&&(f*=-_,a=e.offset*M),n.select("path").attr("d","middle"===e.anchor?"M-"+e.bx/2+",-"+e.by/2+"h"+e.bx+"v"+e.by+"h-"+e.bx+"Z":"M0,0L"+(r*D+a)+","+(D+f)+"v"+(e.by/2-D)+"h"+r*e.bx+"v-"+e.by+"H"+(r*D+a)+"V"+(f-D)+"Z"),i.call(E.Drawing.setPosition,o+a,f+e.ty0-e.by/2+P).selectAll("tspan.line").attr({x:i.attr("x"),y:i.attr("y")}),e.tx2width&&(n.select("text.name, text.name tspan.line").call(E.Drawing.setPosition,u+s*P+a,f+e.ty0-e.by/2+P),n.select("rect").call(E.Drawing.setRect,u+(s-1)*e.tx2width/2+a,f-e.by/2-1,e.tx2width,e.by+2))})}function c(e,t,n){if(!t.target)return!1;if(!n||n.length!==e._hoverdata.length)return!0;for(var r=n.length-1;r>=0;r--){var i=n[r],s=e._hoverdata[r];if(i.curveNumber!==s.curveNumber||String(i.pointNumber)!==String(s.pointNumber))return!0}return!1}function h(e,t){var n=e._fullLayout;t||(t={}),t.target&&N.triggerHandler(e,"plotly_beforehover",t)===!1||(n._hoverlayer.selectAll("g").remove(),t.target&&e._hoverdata&&e.emit("plotly_unhover",{points:e._hoverdata}),e._hoverdata=void 0)}function p(e){if(e._hasGL3D)return[["toImage","sendDataToCloud"],["orbitRotation","tableRotation","zoom3d","pan3d"],["resetCameraDefault3d","resetCameraLastSave3d"],["hoverClosest3d"]];if(e._hasGeo)return[["toImage","sendDataToCloud"],["zoomInGeo","zoomOutGeo","resetGeo"],["hoverClosestGeo"]];var t,n,r=E.Axes.list({_fullLayout:e},null,!0),i=!0;for(t=0;t<r.length;t++)if(!r[t].fixedrange){i=!1;break}return n=i?[["toImage","sendDataToCloud"]]:[["toImage","sendDataToCloud"],["zoom2d","pan2d"],["zoomIn2d","zoomOut2d","resetScale2d","autoScale2d"]],e._hasCartesian?n.push(["hoverClosest2d","hoverCompare2d"]):e._hasPie?n.push(["hoverClosestPie"]):e._hasGL2D&&n.push(["hoverClosestGl2d"]),n}function d(e,t){return e?"nsew"===e?"pan"===t?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}function v(e,t,n,r,i,s,o,u){function a(e,t){for(L=0;L<e.length;L++)if(!e[L].fixedrange)return t;return""}function f(e){e[0]=Number(e[0]),e[1]=Number(e[1])}function l(n,r,i){var s=W.getBoundingClientRect();for(V=r-s.left,$=i-s.top,J={l:V,r:V,w:0,t:$,b:$,h:0},K=e._hmpixcount?e._hmlumcount/e._hmpixcount:x(e._fullLayout.plot_bgcolor).getLuminance(),Q=Q="M0,0H"+H+"V"+B+"H0V0",G=!1,Y="xy",Z=t.plot.append("path").attr("class","zoombox").style({fill:K>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",Q+"Z"),et=t.plot.append("path").attr("class","zoombox-corners").style({fill:E.Color.background,stroke:E.Color.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),L=0;L<j.length;L++)f(j[L].range)}function c(e,t){var n=Math.max(0,Math.min(H,e+V)),r=Math.max(0,Math.min(B,t+$)),i=Math.abs(n-V),s=Math.abs(r-$),o=Math.floor(Math.min(s,i,C.MINZOOM)/2);J.l=Math.min(V,n),J.r=Math.max(V,n),J.t=Math.min($,r),J.b=Math.max($,r),!q||s<Math.min(Math.max(.6*i,C.MINDRAG),C.MINZOOM)?i<C.MINDRAG?(Y="",J.r=J.l,J.t=J.b,et.attr("d","M0,0Z")):(J.t=0,J.b=B,Y="x",et.attr("d","M"+(J.l-.5)+","+($-C.MINZOOM-.5)+"h-3v"+(2*C.MINZOOM+1)+"h3ZM"+(J.r+.5)+","+($-C.MINZOOM-.5)+"h3v"+(2*C.MINZOOM+1)+"h-3Z")):!I||i<Math.min(.6*s,C.MINZOOM)?(J.l=0,J.r=H,Y="y",et.attr("d","M"+(V-C.MINZOOM-.5)+","+(J.t-.5)+"v-3h"+(2*C.MINZOOM+1)+"v3ZM"+(V-C.MINZOOM-.5)+","+(J.b+.5)+"v3h"+(2*C.MINZOOM+1)+"v-3Z")):(Y="xy",et.attr("d","M"+(J.l-3.5)+","+(J.t-.5+o)+"h3v"+ -o+"h"+o+"v-3h-"+(o+3)+"ZM"+(J.r+3.5)+","+(J.t-.5+o)+"h-3v"+ -o+"h"+ -o+"v-3h"+(o+3)+"ZM"+(J.r+3.5)+","+(J.b+.5-o)+"h-3v"+o+"h"+ -o+"v3h"+(o+3)+"ZM"+(J.l-3.5)+","+(J.b+.5-o)+"h3v"+o+"h"+o+"v3h-"+(o+3)+"Z")),J.w=J.r-J.l,J.h=J.b-J.t,Z.attr("d",Q+"M"+J.l+","+J.t+"v"+J.h+"h"+J.w+"v-"+J.h+"h-"+J.w+"Z"),G||(Z.transition().style("fill",K>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),et.transition().style("opacity",1).duration(200),G=!0)}function h(e,t,n){var r,i,s;for(r=0;r<e.length;r++)i=e[r],i.fixedrange||(s=i.range,i.range=[s[0]+(s[1]-s[0])*t,s[0]+(s[1]-s[0])*n])}function p(t,n){return Math.min(J.h,J.w)<2*C.MINDRAG?(2===n?T():g(e),b(e)):(("xy"===Y||"x"===Y)&&h(D,J.l/H,J.r/H),("xy"===Y||"y"===Y)&&h(P,(B-J.b)/B,(B-J.t)/B),b(e),N(Y),void (F&&e.data&&e._context.showTips&&(E.Lib.notifier("Double-click to<br>zoom back out","long"),F=!1)))}function v(t,n){var r=1===(o+u).length;if(t)N();else if(2!==n||r)if(1===n&&r){var i=o?P[0]:D[0],s="s"===o||"w"===u?0:1,a=i._name+".range["+s+"]",f=m(i,s),l="left",c="middle";if(i.fixedrange)return;o?(c="n"===o?"top":"bottom","right"===i.side&&(l="right")):"e"===u&&(l="right"),z.call(E.util.makeEditable,null,{immediate:!0,background:M.paper_bgcolor,text:String(f),fill:i.tickfont?i.tickfont.color:"#444",horizontalAlign:l,verticalAlign:c}).on("edit",function(t){var n="category"===i.type?i.c2l(t):i.d2l(t);void 0!==n&&E.relayout(e,a,n)})}else g(e);else T()}function y(t){function n(e,t,n){if(!e.fixedrange){f(e.range);var r=e.range,i=r[0]+(r[1]-r[0])*t;e.range=[i+(r[0]-i)*n,i+(r[1]-i)*n]}}if(e._context.scrollZoom||M._enablescrollzoom){var r=e.querySelector(".plotly");if(!(r.scrollHeight-r.clientHeight>10||r.scrollWidth-r.clientWidth>10)){clearTimeout(nt);var i=-t.deltaY;if(isFinite(i)||(i=t.wheelDelta/10),!isFinite(i))return void console.log("did not find wheel motion attributes",t);var s,a=Math.exp(-Math.min(Math.max(i,-20),20)/100),l=it.draglayer.select(".nsewdrag").node().getBoundingClientRect(),c=(t.clientX-l.left)/l.width,h=tt[0]+tt[2]*c,p=(l.bottom-t.clientY)/l.height,d=tt[1]+tt[3]*(1-p);if(u){for(s=0;s<D.length;s++)n(D[s],c,a);tt[2]*=a,tt[0]=h-tt[2]*c}if(o){for(s=0;s<P.length;s++)n(P[s],p,a);tt[3]*=a,tt[1]=d-tt[3]*(1-p)}return k(tt),S(o,u),nt=setTimeout(function(){tt=[0,0,H,B],N()},rt),E.Lib.pauseEvent(t)}}}function w(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.fixedrange||(r.range=[r._r[0]-t/r._m,r._r[1]-t/r._m])}}function r(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-0.3)+3.222))}function i(e,t,n){for(var i=1-t,s=0,o=0;o<e.length;o++){var u=e[o];u.fixedrange||(s=o,u.range[t]=u._r[i]+(u._r[t]-u._r[i])/r(n/u._length))}return e[s]._length*(e[s]._r[t]-e[s].range[t])/(e[s]._r[t]-e[s]._r[i])}return"ew"===I||"ns"===q?(I&&n(D,e),q&&n(P,t),k([I?-e:0,q?-t:0,H,B]),void S(q,I)):("w"===I?e=i(D,0,e):"e"===I?e=i(D,1,-e):I||(e=0),"n"===q?t=i(P,1,t):"s"===q?t=i(P,0,-t):q||(t=0),k(["w"===I?e:0,"n"===q?t:0,H-e,B-t]),void S(q,I))}function S(t,n){function r(e){for(s=0;s<e.length;s++)e[s].fixedrange||o.push(e[s]._id)}function i(r,i){var u;for(s=0;s<r.length;s++)u=r[s],(n&&-1!==o.indexOf(u.xref)||t&&-1!==o.indexOf(u.yref))&&i.draw(e,s)}var s,o=[];for(n&&r(D),t&&r(P),s=0;s<o.length;s++)E.Axes.doTicks(e,o[s],!0);i(M.annotations||[],E.Annotations),i(M.shapes||[],E.Shapes)}function T(){var t,n,r=e._context.doubleClick,i=(I?D:[]).concat(q?P:[]),s={};if("autosize"===r)for(n=0;n<i.length;n++)t=i[n],t.fixedrange||(s[t._name+".autorange"]=!0);else if("reset"===r)for(n=0;n<i.length;n++)t=i[n],s[t._name+".range"]=t._rangeInitial.slice();else if("reset+autosize"===r)for(n=0;n<i.length;n++)t=i[n],t.fixedrange||(void 0===t._rangeInitial||t.range[0]===t._rangeInitial[0]&&t.range[1]===t._rangeInitial[1]?s[t._name+".autorange"]=!0:s[t._name+".range"]=t._rangeInitial.slice());E.relayout(e,s)}function N(t){for(var n={},r=0;r<j.length;r++){var i=j[r];t&&-1===t.indexOf(i._id.charAt(0))||(i._r[0]!==i.range[0]&&(n[i._name+".range[0]"]=i.range[0]),i._r[1]!==i.range[1]&&(n[i._name+".range[1]"]=i.range[1]),i.range=i._r.slice())}k([0,0,H,B]),E.relayout(e,n)}function k(e){var t,n,r,i,s,a,f=M._plots,l=Object.keys(f);for(t=0;t<l.length;t++)if(n=f[l[t]],r=n.x(),i=n.y(),s=u&&-1!==D.indexOf(r)&&!r.fixedrange,a=o&&-1!==P.indexOf(i)&&!i.fixedrange,s||a){var c=[0,0,r._length,i._length];s&&(c[0]=e[0],c[2]=e[2]),a&&(c[1]=e[1],c[3]=e[3]),n.plot.attr("viewBox",c.join(" "))}}var L,A,O,M=e._fullLayout,_=[t].concat(o&&u?t.overlays:[]),D=[t.x()],P=[t.y()],H=D[0]._length,B=P[0]._length;for(L=1;L<_.length;L++)A=_[L].x(),O=_[L].y(),-1===D.indexOf(A)&&D.push(A),-1===P.indexOf(O)&&P.push(O);var j=D.concat(P),I=a(D,u),q=a(P,o),R=d(q+I,M.dragmode),U=o+u+"drag",z=t.draglayer.selectAll("."+U).data([0]);z.enter().append("rect").classed("drag",!0).classed(U,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id),z.call(E.Drawing.setRect,n,r,i,s).call(C.setCursor,R);var W=z.node();if(!q&&!I)return W.onmousedown=null,W.style.pointerEvents=o+u==="nsew"?"all":"none",W;var X={element:W,prepFn:function(e,t,n){o+u==="nsew"&&("zoom"===M.dragmode?!e.shiftKey:e.shiftKey)?(X.moveFn=c,X.doneFn=p,l(e,t,n)):(X.moveFn=w,X.doneFn=v)}};C.dragElement(X);var V,$,J,K,Q,G,Y,Z,et,tt=[0,0,H,B],nt=null,rt=300,it=t.mainplot?M._plots[t.mainplot]:t;return o.length*u.length!==1&&(void 0!==W.onwheel?W.onwheel=y:void 0!==W.onmousewheel&&(W.onmousewheel=y)),W}function m(e,t){var n,r=e.range[t],i=Math.abs(r-e.range[1-t]);return"date"===e.type?E.Lib.ms2DateTime(r,i):"log"===e.type?(n=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,S.format("."+n+"g")(Math.pow(10,r))):(n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,S.format("."+String(n)+"g")(r))}function g(e){e._dragging=!0;var t=e._replotPending;e._replotPending=!1,setTimeout(function(){e._replotPending=t,y(e)},C.DBLCLICKDELAY)}function y(e){e._dragging=!1,e._replotPending&&E.plot(e)}function b(e){S.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function w(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t["z-index"]=999999999,t.background="none",document.body.appendChild(e),e}var E=e("../../plotly"),S=e("d3"),x=e("tinycolor2"),T=e("fast-isnumeric"),N=e("../../lib/events"),C=t.exports={};C.layoutAttributes={dragmode:{valType:"enumerated",values:["zoom","pan","orbit","turntable"]},hovermode:{valType:"enumerated",values:["x","y","closest",!1]}},C.supplyLayoutDefaults=function(e,t,n){function r(n,r){return E.Lib.coerce(e,t,C.layoutAttributes,n,r)}var i,s;r("dragmode",t._hasGL3D?"turntable":"zoom"),t._hasCartesian?(i=t._isHoriz=C.isHoriz(n),s=i?"y":"x"):s="closest",r("hovermode",s)},C.isHoriz=function(e){var t,n,r=!0;for(t=0;t<e.length;t++)if(n=e[t],"h"!==n.orientation){r=!1;break}return r},C.DBLCLICKDELAY=600,C.MINDRAG=8,C.MINZOOM=20;var k=20;C.init=function(e){var t=e._fullLayout;if(!(t._hasGL3D||t._hasGeo||e._context.staticPlot)){var n=Object.keys(t._plots||{}).sort(function(e,n){if((t._plots[e].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var r=e.split("y"),i=n.split("y");return r[0]===i[0]?Number(r[1]||1)-Number(i[1]||1):Number(r[0]||1)-Number(i[0]||1)}return t._plots[e].mainplot?1:-1});n.forEach(function(n){var r=t._plots[n];if(t._hasCartesian){var i=r.x(),s=r.y(),o=(i._linepositions[n]||[])[3],u=(s._linepositions[n]||[])[3];if(T(o)&&"top"===i.side&&(o-=k),T(u)&&"right"!==s.side&&(u-=k),!r.mainplot){var a=v(e,r,0,0,i._length,s._length,"ns","ew");a.onmousemove=function(r){C.hover(e,r,n),t._lasthover=a,t._hoversubplot=n},a.onmouseout=function(t){e._dragging||C.unhover(e,t)},a.onclick=function(t){C.click(e,t)},v(e,r,-k,-k,k,k,"n","w"),v(e,r,i._length,-k,k,k,"n","e"),v(e,r,-k,s._length,k,k,"s","w"),v(e,r,i._length,s._length,k,k,"s","e")}T(o)&&("free"===i.anchor&&(o-=t._size.h*(1-s.domain[1])),v(e,r,.1*i._length,o,.8*i._length,k,"","ew"),v(e,r,0,o,.1*i._length,k,"","w"),v(e,r,.9*i._length,o,.1*i._length,k,"","e")),T(u)&&("free"===s.anchor&&(u-=t._size.w*i.domain[0]),v(e,r,u,.1*s._length,k,.8*s._length,"ns",""),v(e,r,u,.9*s._length,k,.1*s._length,"s",""),v(e,r,u,0,k,.1*s._length,"n",""))}});var r=t._hoverlayer.node();r.onmousemove=function(n){n.target=t._lasthover,C.hover(e,n,t._hoversubplot)},r.onclick=function(n){n.target=t._lasthover,C.click(e,n)},r.onmousedown=function(e){t._lasthover.onmousedown(e)}}};var L=60,A=Math.PI*L/180,O=1/Math.sin(A),M=Math.cos(A),_=Math.sin(A),D=6,P=3,H=13,B="Arial, sans-serif";C.MAXDIST=20;var j=100;C.hover=function(e,t,n){return"string"==typeof e&&(e=document.getElementById(e)),void 0===e._lastHoverTime&&(e._lastHoverTime=0),void 0!==e._hoverTimer&&(clearTimeout(e._hoverTimer),e._hoverTimer=void 0),Date.now()>e._lastHoverTime+j?(o(e,t,n),void (e._lastHoverTime=Date.now())):void (e._hoverTimer=setTimeout(function(){o(e,t,n),e._lastHoverTime=Date.now(),e._hoverTimer=void 0},j))},C.unhover=function(e,t,n){"string"==typeof e&&(e=document.getElementById(e)),e._hoverTimer&&(clearTimeout(e._hoverTimer),e._hoverTimer=void 0),h(e,t,n)},C.getDistanceFunction=function(e,t,n,r){return"closest"===e?r||s(t,n):"x"===e?t:n},C.getClosest=function(e,t,n){if(n.index!==!1)n.index>=0&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var i=t(e[r]);i<n.distance&&(n.index=r,n.distance=i)}return n},C.loneHover=function(e,t){var n={color:e.color||E.Color.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},r=S.select(t.container),i=t.outerContainer?S.select(t.outerContainer):r,s={hovermode:"closest",rotateLabels:!1,bgColor:t.bgColor||E.Color.background,container:r,outerContainer:i},o=a([n],s);return l(o,s.rotateLabels),o.node()},C.loneUnhover=function(e){var t=e instanceof S.selection?e:S.select(e);t.selectAll("g.hovertext").remove()},C.click=function(e,t){e._hoverdata&&t&&t.target&&(e.emit("plotly_click",{points:e._hoverdata}),t.stopImmediatePropagation())},C.modeBar=function(e){function t(){var t=new E.ModeBar({buttons:s,container:i._paperdiv.node(),Plotly:E,graphInfo:e});return i._privateplot&&S.select(t.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),t}function n(){E.Lib.removeElement(e.querySelector(".modebar"))}var r,i=e._fullLayout||{};if(!e._context.displayModeBar)return n();var s=p(i);i._modebar||(n(),i._modebar=t()),r=i._modebar,r.hasButtons(s)||(i._modebar.cleanup(),i._modebar=t())};var F=!0;C.dragAlign=function(e,t,n,r,i){var s=(e-n)/(r-n),o=s+t/(r-n),u=(s+o)/2;return"left"===i||"bottom"===i?s:"center"===i||"middle"===i?u:"right"===i||"top"===i?o:2/3-u>s?s:o>4/3-u?o:u};var I=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];C.dragCursors=function(e,t,n,r){return e="left"===n?0:"center"===n?1:"right"===n?2:E.Lib.constrain(Math.floor(3*e),0,2),t="bottom"===r?0:"middle"===r?1:"top"===r?2:E.Lib.constrain(Math.floor(3*t),0,2),I[t][e]},C.dragElement=function(e){function t(t){var c=document.querySelector(".plugin-editable");return c&&S.select(c).on("blur").call(c),f._dragged=!1,f._dragging=!0,i=t.clientX,s=t.clientY,a=t.target,o=(new Date).getTime(),o-f._mouseDownTime<C.DBLCLICKDELAY?l+=1:(l=1,f._mouseDownTime=o),e.prepFn&&e.prepFn(t,i,s),u=w(),u.onmousemove=n,u.onmouseup=r,u.onmouseout=r,E.Lib.pauseEvent(t)}function n(t){var n=t.clientX-i,r=t.clientY-s;return Math.abs(n)<C.MINDRAG&&(n=0),Math.abs(r)<C.MINDRAG&&(r=0),(n||r)&&(f._dragged=!0),e.moveFn&&e.moveFn(n,r,f._dragged),E.Lib.pauseEvent(t)}function r(t){if(u.onmousemove=null,u.onmouseup=null,u.onmouseout=null,E.Lib.removeElement(u),!f._dragging)return void (f._dragged=!1);if(f._dragging=!1,(new Date).getTime()-f._mouseDownTime>C.DBLCLICKDELAY&&(l=Math.max(l-1,1)),e.doneFn&&e.doneFn(f._dragged,l),!f._dragged){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),a.dispatchEvent(n)}return y(f),f._dragged=!1,E.Lib.pauseEvent(t)}var i,s,o,u,a,f=E.Lib.getPlotDiv(e.element)||{},l=1;f._mouseDownTime||(f._mouseDownTime=0),e.element.onmousedown=t,e.element.style.pointerEvents="all"},C.setCursor=function(e,t){(e.attr("class")||"").split(" ").forEach(function(t){0===t.indexOf("cursor-")&&e.classed(t,!1)}),t&&e.classed("cursor-"+t,!0)},C.inbox=function(e,t){return 0>e*t||0===e?C.MAXDIST*(.6-.3/Math.max(3,Math.abs(e-t))):1/0}},{"../../lib/events":309,"../../plotly":330,d3:53,"fast-isnumeric":58,tinycolor2:213}],335:[function(e,t,n){var r=e("../../plotly"),i=e("../font_attributes"),s=e("../../components/color/attributes"),o=e("../../lib/extend").extendFlat;t.exports={title:{valType:"string"},titlefont:o({},i,{}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal"},range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},fixedrange:{valType:"boolean",dflt:!1},tickmode:{valType:"enumerated",values:["auto","linear","array"]},nticks:{valType:"integer",min:0,dflt:0},tick0:{valType:"number",dflt:0},dtick:{valType:"any",dflt:1},tickvals:{valType:"data_array"},ticktext:{valType:"data_array"},ticks:{valType:"enumerated",values:["outside","inside",""]},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1},ticklen:{valType:"number",min:0,dflt:5},tickwidth:{valType:"number",min:0,dflt:1},tickcolor:{valType:"color",dflt:s.defaultLine},showticklabels:{valType:"boolean",dflt:!0},tickfont:o({},i,{}),tickangle:{valType:"angle",dflt:"auto"},tickprefix:{valType:"string",dflt:""},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},ticksuffix:{valType:"string",dflt:""},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B"},tickformat:{valType:"string",dflt:""},hoverformat:{valType:"string",dflt:""},showline:{valType:"boolean",dflt:!1},linecolor:{valType:"color",dflt:s.defaultLine},linewidth:{valType:"number",min:0,dflt:1},showgrid:{valType:"boolean"},gridcolor:{valType:"color",dflt:s.lightLine},gridwidth:{valType:"number",min:0,dflt:1},zeroline:{valType:"boolean"},zerolinecolor:{valType:"color",dflt:s.defaultLine},zerolinewidth:{valType:"number",dflt:1},anchor:{valType:"enumerated",values:["free",r.Plots.subplotsRegistry.cartesian.idRegex.x.toString(),r.Plots.subplotsRegistry.cartesian.idRegex.y.toString()]},side:{valType:"enumerated",values:["top","bottom","left","right"]},overlaying:{valType:"enumerated",values:["free",r.Plots.subplotsRegistry.cartesian.idRegex.x.toString(),r.Plots.subplotsRegistry.cartesian.idRegex.y.toString()]},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},position:{valType:"number",min:0,max:1,dflt:0},_deprecated:{autotick:{valType:"boolean"}}}},{"../../components/color/attributes":282,"../../lib/extend":310,"../../plotly":330,"../font_attributes":336}],336:[function(e,t,n){t.exports={family:{valType:"string",noBlank:!0,strict:!0},size:{valType:"number",min:1},color:{valType:"color"}}},{}],337:[function(e,t,n){"use strict";function r(e,t){this.id=e.id,this.container=e.container,this.topojsonURL=e.topojsonURL,c(),this.showHover="closest"===t.hovermode,this.hoverContainer=null,this.topojsonName=null,this.topojson=null,this.projectionType=null,this.projection=null,this.clipAngle=null,this.setScale=null,this.path=null,this.zoom=null,this.zoomReset=null,this.makeFramework()}function i(e,t,n){return l.geo.graticule().extent([[e[0],t[0]],[e[1],t[1]]]).step(n)}function s(e,t,n){var r=g.layerNameToAdjective[t];e.select("."+t).selectAll("path").attr("stroke","none").call(f.Color.fill,n[r+"color"])}function o(e,t,n){var r=g.layerNameToAdjective[t];e.select("."+t).selectAll("path").attr("fill","none").call(f.Color.stroke,n[r+"color"]).call(f.Drawing.dashLine,"",n[r+"width"])}function u(e,t,n){e.select("."+t+"graticule").selectAll("path").attr("fill","none").call(f.Color.stroke,n[t].gridcolor).call(f.Drawing.dashLine,"",n[t].gridwidth)}function a(e){var t={type:"linear",showexponent:"all",exponentformat:f.Axes.layoutAttributes.exponentformat.dflt,_td:{_fullLayout:e}};return f.Axes.setConvert(t),t}var f=e("../../plotly"),l=e("d3"),c=e("./projections"),h=e("./set_scale"),p=e("./zoom"),d=e("./zoom_reset"),v=e("../../traces/scattergeo/plot"),m=e("../../traces/choropleth/plot"),g=e("../../constants/geo_constants"),y=e("../../lib/topojson_utils"),b=e("topojson").feature;t.exports=r;var w=r.prototype;w.plot=function(e,t){var n,r,i=this,s=t[i.id],o=t._size;i.projection=null,i.setScale=h(s,o),i.makeProjection(s),i.makePath(),i.adjustLayout(s,o),i.zoom=p(i,s),i.zoomReset=d(i,s),i.mockAxis=a(t),i.framework.call(i.zoom).on("dblclick.zoom",i.zoomReset),n=y.getTopojsonName(s),null===i.topojson||n!==i.topojsonName?(i.topojsonName=n,void 0!==PlotlyGeoAssets.topojson[i.topojsonName]?(i.topojson=PlotlyGeoAssets.topojson[i.topojsonName],i.onceTopojsonIsLoaded(e,s)):(r=y.getTopojsonPath(i.topojsonURL,i.topojsonName),l.json(r,function(t,n){i.topojson=n,PlotlyGeoAssets.topojson[i.topojsonName]=n,i.onceTopojsonIsLoaded(e,s)}))):i.onceTopojsonIsLoaded(e,s)},w.onceTopojsonIsLoaded=function(e,t){var n,r,i=[],s=[];this.drawLayout(t);for(var o=0;o<e.length;o++)n=e[o],r=n.type,"scattergeo"===n.type?i.push(n):"choropleth"===n.type&&s.push(n);i.length>0&&v.plot(this,i),s.length>0&&m.plot(this,s,t),this.render()},w.makeProjection=function(e){var t,n=e.projection,r=n.type,i=null===this.projection||r!==this.projectionType;i?(this.projectionType=r,t=this.projection=l.geo[g.projNames[r]]()):t=this.projection,t.translate(n._translate0).precision(g.precision),e._isAlbersUsa||t.rotate(n._rotate).center(n._center),e._clipAngle?(this.clipAngle=e._clipAngle,t.clipAngle(e._clipAngle-g.clipPad)):this.clipAngle=null,n.parallels&&t.parallels(n.parallels),i&&this.setScale(t),t.translate(n._translate).scale(n._scale)},w.makePath=function(){this.path=l.geo.path().projection(this.projection)},w.makeFramework=function(){var e=this.geoDiv=l.select(this.container).append("div");e.attr("id",this.id).style("position","absolute");var t=this.hoverContainer=e.append("svg");t.attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink"}).style({position:"absolute","z-index":20,"pointer-events":"none"});var n=this.framework=e.append("svg");n.attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink",position:"absolute",preserveAspectRatio:"none"}),n.append("g").attr("class","bglayer").append("rect"),n.append("g").attr("class","baselayer"),n.append("g").attr("class","choroplethlayer"),n.append("g").attr("class","baselayeroverchoropleth"),n.append("g").attr("class","scattergeolayer"),n.on("dblclick.zoom",null)},w.adjustLayout=function(e,t){var n=e.domain;this.geoDiv.style({left:t.l+t.w*n.x[0]+e._marginX+"px",top:t.t+t.h*(1-n.y[1])+e._marginY+"px",width:e._width+"px",height:e._height+"px"}),this.hoverContainer.attr({width:e._width,height:e._height}),this.framework.attr({width:e._width,height:e._height}),this.framework.select(".bglayer").select("rect").attr({width:e._width,height:e._height}).style({fill:e.bgcolor,"stroke-width":0})},w.drawTopo=function(e,t,n){if(n["show"+t]===!0){var r=this.topojson,i="frame"===t?g.sphereSVG:b(r,r.objects[t]);e.append("g").datum(i).attr("class",t).append("path").attr("class","basepath")}},w.drawGraticule=function(e,t,n){var r=n[t];if(r.showgrid===!0){var s=g.scopeDefaults[n.scope],o=s.lonaxisRange,u=s.lataxisRange,a="lonaxis"===t?[r.dtick]:[0,r.dtick],f=i(o,u,a);e.append("g").datum(f).attr("class",t+"graticule").append("path").attr("class","graticulepath")}},w.drawLayout=function(e){var t,n=this.framework.select("g.baselayer"),r=g.baseLayers,i=g.axesNames;n.selectAll("*").remove();for(var s=0;s<r.length;s++)t=r[s],-1!==i.indexOf(t)?this.drawGraticule(n,t,e):this.drawTopo(n,t,e);this.styleLayout(e)},w.styleLayer=function(e,t,n){var r=g.fillLayers,i=g.lineLayers;-1!==r.indexOf(t)?s(e,t,n):-1!==i.indexOf(t)&&o(e,t,n)},w.styleLayout=function(e){for(var t,n=this.framework.select("g.baselayer"),r=g.baseLayers,i=g.axesNames,s=0;s<r.length;s++)t=r[s],-1!==i.indexOf(t)?u(n,t,e):this.styleLayer(n,t,e)},w.render=function(){function e(e){var t=s([e.lon,e.lat]);return t?"translate("+t[0]+","+t[1]+")":null}function t(e){var t=s.rotate(),n=l.geo.distance([e.lon,e.lat],[-t[0],-t[1]]),r=u*Math.PI/180;return n>r?"0":"1.0"}var n=this.framework,r=n.select("g.choroplethlayer"),i=n.select("g.scattergeolayer"),s=this.projection,o=this.path,u=this.clipAngle;n.selectAll("path.basepath").attr("d",o),n.selectAll("path.graticulepath").attr("d",o),r.selectAll("path.choroplethlocation").attr("d",o),r.selectAll("path.basepath").attr("d",o),i.selectAll("path.js-line").attr("d",o),null!==u?(i.selectAll("path.point").style("opacity",t).attr("transform",e),i.selectAll("text").style("opacity",t).attr("transform",e)):(i.selectAll("path.point").attr("transform",e),i.selectAll("text").attr("transform",e))}},{"../../constants/geo_constants":300,"../../lib/topojson_utils":325,"../../plotly":330,"../../traces/choropleth/plot":384,"../../traces/scattergeo/plot":407,"./projections":344,"./set_scale":345,"./zoom":346,"./zoom_reset":347,d3:53,topojson:214}],338:[function(e,t,n){t.exports={geo:{valType:"geoid",dflt:"geo"}}},{}],339:[function(e,t,n){var r=e("../../../components/color/attributes");t.exports={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:r.lightLine},gridwidth:{valType:"number",min:0,dflt:1}}},{"../../../components/color/attributes":282}],340:[function(e,t,n){"use strict";var r=e("../../../plotly"),i=e("../../../constants/geo_constants"),s=e("./axis_attributes");t.exports=function(e,t){function n(e,t){return r.Lib.coerce(c,h,s,e,t)}function o(e){var n,r,s,o,u,a,f=t.scope;return"world"===f?(n=t.projection,r=n.type,s=n.rotation,u=i[e+"Span"],a=void 0!==u[r]?u[r]/2:u["*"]/2,o="lonaxis"===e?s.lon:s.lat,[o-a,o+a]):i.scopeDefaults[f][e+"Range"]}for(var u=i.axesNames,f=0;f<u.length;f++){var l=u[f],c=e[l]||{},h={},p=o(l),d=n("range",p);r.Lib.noneOrAll(c.range,h.range,[0,1]),n("tick0",d[0]),n("dtick","lonaxis"===l?30:10);var v=n("showgrid");v&&(n("gridcolor"),n("gridwidth")),t[l]=h,t[l]._fullRange=p}}},{"../../../constants/geo_constants":300,"../../../plotly":330,"./axis_attributes":339}],341:[function(e,t,n){"use strict";function r(e,t,n){var r,i=n("scope"),o="world"!==i,f=s.scopeDefaults[i],l=n("resolution"),c=n("projection.type",f.projType),h="albers usa"===c,p=-1!==c.indexOf("conic");if(p){var d=f.projParallels||[0,60];n("projection.parallels",d)}if(h)t.scope="usa";else{var v=f.projRotate||[0,0,0];n("projection.rotation.lon",v[0]),n("projection.rotation.lat",v[1]),n("projection.rotation.roll",v[2]),r=n("showcoastlines",!o),r&&(n("coastlinecolor"),n("coastlinewidth")),r=n("showocean"),r&&n("oceancolor")}n("projection.scale"),r=n("showland"),r&&n("landcolor"),r=n("showlakes"),r&&n("lakecolor"),r=n("showrivers"),r&&(n("rivercolor"),n("riverwidth")),r=n("showcountries",o),r&&(n("countrycolor"),n("countrywidth")),("usa"===i||"north america"===i&&50===l)&&(n("showsubunits",!0),n("subunitcolor"),n("subunitwidth")),o||(r=n("showframe",!0),r&&(n("framecolor"),n("framewidth"))),n("bgcolor"),u(e,t),t._isHighRes=50===l,t._clipAngle=s.lonaxisSpan[c]/2,t._isAlbersUsa=h,t._isConic=p,t._isScoped=o;var m=t.projection.rotation||{};t.projection._rotate=[-m.lon||0,-m.lat||0,m.roll||0]}var i=e("../../../plotly"),s=e("../../../constants/geo_constants"),o=e("./layout_attributes"),u=e("./axis_defaults");t.exports=function(e,t,n){function s(e,t){return i.Lib.coerce(c,h,o,e,t)}for(var u=i.Plots.getSubplotIdsInData(n,"geo"),a=u.length,f=0;a>f;f++){var l=u[f],c=e[l]||{},h={};s("domain.x"),s("domain.y",[f/a,(f+1)/a]),r(c,h,s),t[l]=h}}},{"../../../constants/geo_constants":300,"../../../plotly":330,"./axis_defaults":340,"./layout_attributes":343}],342:[function(e,t,n){"use strict";var r=e("../../../plotly"),i=e("./attributes");r.Plots.registerSubplot("geo","geo","geo",i),n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./defaults")},{"../../../plotly":330,"./attributes":338,"./defaults":341,"./layout_attributes":343}],343:[function(e,t,n){var r=e("../../../components/color/attributes"),i=e("../../../constants/geo_constants"),s=e("./axis_attributes");t.exports={domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(i.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(i.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,max:10,dflt:1}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:r.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:i.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:i.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:i.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:i.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:r.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:r.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:r.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:r.background},lonaxis:s,lataxis:s}},{"../../../components/color/attributes":282,"../../../constants/geo_constants":300,"./axis_attributes":339}],344:[function(e,t,n){function r(){function e(e,n){return{type:"Feature",id:e.id,properties:e.properties,geometry:t(e.geometry,n)}}function t(e,n){if(!e)return null;if("GeometryCollection"===e.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(e){return t(e,n)})};if(!T.hasOwnProperty(e.type))return null;var r=T[e.type];return i.geo.stream(e,n(r)),r.result()}function n(){}function r(e){if((t=e.length)<4)return!1;for(var t,n=0,r=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];++n<t;)r+=e[n-1][1]*e[n][0]-e[n-1][0]*e[n][1];return 0>=r}function s(e,t){for(var n=t[0],r=t[1],i=!1,s=0,o=e.length,u=o-1;o>s;u=s++){var a=e[s],f=a[0],l=a[1],c=e[u],h=c[0],p=c[1];l>r^p>r&&(h-f)*(r-l)/(p-l)+f>n&&(i=!i)}return i}function o(e){return e>1?L:-1>e?-L:Math.asin(e)}function u(e,t){var n=(2+L)*Math.sin(t);t/=2;for(var r=0,i=1/0;10>r&&Math.abs(i)>N;r++){var s=Math.cos(t);t-=i=(t+Math.sin(t)*(s+2)-n)/(2*s*(1+s))}return[2/Math.sqrt(k*(4+k))*e*(1+Math.cos(t)),2*Math.sqrt(k/(4+k))*Math.sin(t)]}function a(e,t){function n(n,r){var i=D(n/t,r);return i[0]*=e,i}return arguments.length<2&&(t=e),1===t?D:t===1/0?l:(n.invert=function(n,r){var i=D.invert(n/e,r);return i[0]*=t,i},n)}function f(){var e=2,t=_(a),n=t(e);return n.coefficient=function(n){return arguments.length?t(e=+n):e},n}function l(e,t){return[e*Math.cos(t)/Math.cos(t/=2),2*Math.sin(t)]}function c(e,t){return[3*e/(2*k)*Math.sqrt(k*k/3-t*t),t]}function h(e,t){return[e,1.25*Math.log(Math.tan(k/4+.4*t))]}function p(e){return function(t){var n,r=e*Math.sin(t),i=30;do t-=n=(t+Math.sin(t)-r)/(1+Math.cos(t));while(Math.abs(n)>N&&--i>0);return t/2}}function d(e,t,n){function r(n,r){return[e*n*Math.cos(r=i(r)),t*Math.sin(r)]}var i=p(n);return r.invert=function(r,i){var s=o(i/t);return[r/(e*Math.cos(s)),o((2*s+Math.sin(2*s))/n)]},r}function v(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-0.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-0.044475+.028874*n-.005916*r)))]}function m(e,t){var n,r=Math.min(18,36*Math.abs(t)/k),i=Math.floor(r),s=r-i,o=(n=H[i])[0],u=n[1],a=(n=H[++i])[0],f=n[1],l=(n=H[Math.min(19,++i)])[0],c=n[1];return[e*(a+s*(l-o)/2+s*s*(l-2*a+o)/2),(t>0?L:-L)*(f+s*(c-u)/2+s*s*(c-2*f+u)/2)]}function g(e,t){return[e*Math.cos(t),t]}i.geo.project=function(e,n){var r=n.stream;if(!r)throw new Error("not yet supported");return(e&&y.hasOwnProperty(e.type)?y[e.type]:t)(e,r)};var y={Feature:e,FeatureCollection:function(t,n){return{type:"FeatureCollection",features:t.features.map(function(t){return e(t,n)})}}},b=[],w=[],E={point:function(e,t){b.push([e,t])},result:function(){var e=b.length?b.length<2?{type:"Point",coordinates:b[0]}:{type:"MultiPoint",coordinates:b}:null;return b=[],e}},S={lineStart:n,point:function(e,t){b.push([e,t])},lineEnd:function(){b.length&&(w.push(b),b=[])},result:function(){var e=w.length?w.length<2?{type:"LineString",coordinates:w[0]}:{type:"MultiLineString",coordinates:w}:null;return w=[],e}},x={polygonStart:n,lineStart:n,point:function(e,t){b.push([e,t])},lineEnd:function(){var e=b.length;if(e){do b.push(b[0].slice());while(++e<4);w.push(b),b=[]}},polygonEnd:n,result:function(){if(!w.length)return null;var e=[],t=[];return w.forEach(function(n){r(n)?e.push([n]):t.push(n)}),t.forEach(function(t){var n=t[0];e.some(function(e){return s(e[0],n)?(e.push(t),!0):void 0})||e.push([t])}),w=[],e.length?e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}:null}},T={Point:E,MultiPoint:E,LineString:S,MultiLineString:S,Polygon:x,MultiPolygon:x,Sphere:x},N=1e-6,C=N*N,k=Math.PI,L=k/2,A=(Math.sqrt(k),k/180),O=180/k,M=i.geo.projection,_=i.geo.projectionMutator;i.geo.interrupt=function(e){function t(t,n){for(var r=0>n?-1:1,i=a[+(0>n)],s=0,o=i.length-1;o>s&&t>i[s][2][0];++s);var u=e(t-i[s][1][0],n);return u[0]+=e(i[s][1][0],r*n>r*i[s][0][1]?i[s][0][1]:n)[0],u}function n(){u=a.map(function(t){return t.map(function(t){var n,r=e(t[0][0],t[0][1])[0],i=e(t[2][0],t[2][1])[0],s=e(t[1][0],t[0][1])[1],o=e(t[1][0],t[1][1])[1];return s>o&&(n=s,s=o,o=n),[[r,s],[i,o]]})})}function r(){for(var e=1e-6,t=[],n=0,r=a[0].length;r>n;++n){var o=a[0][n],u=180*o[0][0]/k,f=180*o[0][1]/k,l=180*o[1][1]/k,c=180*o[2][0]/k,h=180*o[2][1]/k;t.push(s([[u+e,f+e],[u+e,l-e],[c-e,l-e],[c-e,h+e]],30))}for(var n=a[1].length-1;n>=0;--n){var o=a[1][n],u=180*o[0][0]/k,f=180*o[0][1]/k,l=180*o[1][1]/k,c=180*o[2][0]/k,h=180*o[2][1]/k;t.push(s([[c-e,h-e],[c-e,l+e],[u+e,l+e],[u+e,f-e]],30))}return{type:"Polygon",coordinates:[i.merge(t)]}}function s(e,t){for(var n,r,i,s=-1,o=e.length,u=e[0],a=[];++s<o;){n=e[s],r=(n[0]-u[0])/t,i=(n[1]-u[1])/t;for(var f=0;t>f;++f)a.push([u[0]+f*r,u[1]+f*i]);u=n}return a.push(n),a}function o(e,t){return Math.abs(e[0]-t[0])<N&&Math.abs(e[1]-t[1])<N}var u,a=[[[[-k,0],[0,L],[k,0]]],[[[-k,0],[0,-L],[k,0]]]];e.invert&&(t.invert=function(n,r){for(var i=u[+(0>r)],s=a[+(0>r)],f=0,l=i.length;l>f;++f){var c=i[f];if(c[0][0]<=n&&n<c[1][0]&&c[0][1]<=r&&r<c[1][1]){var h=e.invert(n-e(s[f][1][0],0)[0],r);return h[0]+=s[f][1][0],o(t(h[0],h[1]),[n,r])?h:null}}});var f=i.geo.projection(t),l=f.stream;return f.stream=function(e){var t=f.rotate(),n=l(e),s=(f.rotate([0,0]),l(e));return f.rotate(t),n.sphere=function(){i.geo.stream(r(),s)},n},f.lobes=function(e){return arguments.length?(a=e.map(function(e){return e.map(function(e){return[[e[0][0]*k/180,e[0][1]*k/180],[e[1][0]*k/180,e[1][1]*k/180],[e[2][0]*k/180,e[2][1]*k/180]]})}),n(),f):a.map(function(e){return e.map(function(e){return[[180*e[0][0]/k,180*e[0][1]/k],[180*e[1][0]/k,180*e[1][1]/k],[180*e[2][0]/k,180*e[2][1]/k]]})})},f},u.invert=function(e,t){var n=.5*t*Math.sqrt((4+k)/k),r=o(n),i=Math.cos(r);return[e/(2/Math.sqrt(k*(4+k))*(1+i)),o((r+n*(i+2))/(2+L))]},(i.geo.eckert4=function(){return M(u)}).raw=u;var D=i.geo.azimuthalEqualArea.raw;l.invert=function(e,t){var n=2*o(t/2);return[e*Math.cos(n/2)/Math.cos(n),n]},(i.geo.hammer=f).raw=a,c.invert=function(e,t){return[2/3*k*e/Math.sqrt(k*k/3-t*t),t]},(i.geo.kavrayskiy7=function(){return M(c)}).raw=c,h.invert=function(e,t){return[e,2.5*Math.atan(Math.exp(.8*t))-.625*k]},(i.geo.miller=function(){return M(h)}).raw=h;var P=(p(k),d(Math.SQRT2/L,Math.SQRT2,k));(i.geo.mollweide=function(){return M(P)}).raw=P,v.invert=function(e,t){var n,r=t,i=25;do{var s=r*r,o=s*s;r-=n=(r*(1.007226+s*(.015085+o*(-0.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.045255+o*(-0.311325+.259866*s-.005916*11*o)))}while(Math.abs(n)>N&&--i>0);return[e/(.8707+(s=r*r)*(-0.131979+s*(-0.013791+s*s*s*(.003971-.001529*s)))),r]},(i.geo.naturalEarth=function(){return M(v)}).raw=v;var H=[[.9986,-0.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];H.forEach(function(e){e[1]*=1.0144}),m.invert=function(e,t){var n=t/L,r=90*n,i=Math.min(18,Math.abs(r/5)),s=Math.max(0,Math.floor(i));do{var o=H[s][1],u=H[s+1][1],a=H[Math.min(19,s+2)][1],f=a-o,l=a-2*u+o,c=2*(Math.abs(n)-u)/f,h=l/f,p=c*(1-h*c*(1-2*h*c));if(p>=0||1===s){r=(t>=0?5:-5)*(p+i);var d,v=50;do i=Math.min(18,Math.abs(r)/5),s=Math.floor(i),p=i-s,o=H[s][1],u=H[s+1][1],a=H[Math.min(19,s+2)][1],r-=(d=(t>=0?L:-L)*(u+p*(a-o)/2+p*p*(a-2*u+o)/2)-t)*O;while(Math.abs(d)>C&&--v>0);break}}while(--s>=0);var m=H[s][0],g=H[s+1][0],y=H[Math.min(19,s+2)][0];return[e/(g+p*(y-m)/2+p*p*(y-2*g+m)/2),r*A]},(i.geo.robinson=function(){return M(m)}).raw=m,g.invert=function(e,t){return[e/Math.cos(t),t]},(i.geo.sinusoidal=function(){return M(g)}).raw=g}var i=e("d3");t.exports=r},{d3:53}],345:[function(e,t,n){"use strict";function r(e,t){var n=e.projection,r=e.lonaxis,o=e.lataxis,f=e.domain,l=e.framewidth||0,c=t.w*(f.x[1]-f.x[0]),h=t.h*(f.y[1]-f.y[0]),p=r.range[0]+u,d=r.range[1]-u,v=o.range[0]+u,m=o.range[1]-u,g=r._fullRange[0]+u,y=r._fullRange[1]-u,b=o._fullRange[0]+u,w=o._fullRange[1]-u;n._translate0=[t.l+c/2,t.t+h/2];var E=d-p,S=m-v,x=[p+E/2,v+S/2],T=n._rotate;n._center=[x[0]+T[0],x[1]+T[1]];var N=function(t){function r(e){return Math.min(S*c/(e[1][0]-e[0][0]),S*h/(e[1][1]-e[0][1]))}var o,u,f,E,S=t.scale(),x=n._translate0,T=i(p,v,d,m),N=i(g,b,y,w);f=s(t,T),o=r(f),E=s(t,N),n._fullScale=r(E),t.scale(o),f=s(t,T),u=[x[0]-f[0][0]+l,x[1]-f[0][1]+l],n._translate=u,t.translate(u),f=s(t,T),e._isAlbersUsa||t.clipExtent(f),o=n.scale*o,n._scale=o,e._width=Math.round(f[1][0])+l,e._height=Math.round(f[1][1])+l,e._marginX=(c-Math.round(f[1][0]))/2,e._marginY=(h-Math.round(f[1][1]))/2};return N}function i(e,t,n,r){var i=(n-e)/4;return{type:"Polygon",coordinates:[[[e,t],[e,r],[e+i,r],[e+2*i,r],[e+3*i,r],[n,r],[n,t],[n-i,t],[n-2*i,t],[n-3*i,t],[e,t]]]}}function s(e,t){return o.geo.path().projection(e).bounds(t)}var o=e("d3"),u=e("../../constants/geo_constants").clipPad;t.exports=r},{"../../constants/geo_constants":300,d3:53}],346:[function(e,t,n){"use strict";function r(e,t){var n;return(n=t._isScoped?s:t._clipAngle?u:o)(e,t.projection)}function i(e,t){var n=t._fullScale;return E.behavior.zoom().translate(e.translate()).scale(e.scale()).scaleExtent([.5*n,100*n])}function s(e,t){function n(){E.select(this).style(T)}function r(){o.scale(E.event.scale).translate(E.event.translate),e.render()}function s(){E.select(this).style(N)}var o=e.projection,u=i(o,t);return u.on("zoomstart",n).on("zoom",r).on("zoomend",s),u}function o(e,t){function n(e){return m.invert(e)}function r(e){var t=m(n(e));return Math.abs(t[0]-e[0])>y||Math.abs(t[1]-e[1])>y}function s(){E.select(this).style(T),a=E.mouse(this),f=m.rotate(),l=m.translate(),c=f,h=n(a)}function o(){return p=E.mouse(this),r(a)?(g.scale(m.scale()),void g.translate(m.translate())):(m.scale(E.event.scale),m.translate([l[0],E.event.translate[1]]),h?n(p)&&(v=n(p),d=[c[0]+(v[0]-h[0]),f[1],f[2]],m.rotate(d),c=d):(a=p,h=n(a)),void e.render())}function u(){E.select(this).style(N)}var a,f,l,c,h,p,d,v,m=e.projection,g=i(m,t),y=2;return g.on("zoomstart",s).on("zoom",o).on("zoomend",u),g}function u(e,t){function n(e){g++||e({type:"zoomstart"})}function r(e){e({type:"zoom"})}function s(e){--g||e({type:"zoomend"})}var o,u=e.projection,p={r:u.rotate(),k:u.scale()},d=i(u,t),v=w(d,"zoomstart","zoom","zoomend"),g=0,y=d.on;return d.on("zoomstart",function(){E.select(this).style(T);var e=E.mouse(this),t=u.rotate(),i=t,s=u.translate(),g=f(t);o=a(u,e),y.call(d,"zoom",function(){var n=E.mouse(this);if(u.scale(p.k=E.event.scale),o){if(a(u,n)){u.rotate(t).translate(s);var f=a(u,n),d=c(o,f),y=m(l(g,d)),b=p.r=h(y,o,i);isFinite(b[0])&&isFinite(b[1])&&isFinite(b[2])||(b=i),u.rotate(b),i=b}}else e=n,o=a(u,e);r(v.of(this,arguments))}),n(v.of(this,arguments))}).on("zoomend",function(){E.select(this).style(N),y.call(d,"zoom",null),s(v.of(this,arguments))}).on("zoom.redraw",function(){e.render()}),E.rebind(d,v,"on")}function a(e,t){var n=e.invert(t);return n&&isFinite(n[0])&&isFinite(n[1])&&g(n)}function f(e){var t=.5*e[0]*S,n=.5*e[1]*S,r=.5*e[2]*S,i=Math.sin(t),s=Math.cos(t),o=Math.sin(n),u=Math.cos(n),a=Math.sin(r),f=Math.cos(r);return[s*u*f+i*o*a,i*u*f-s*o*a,s*o*f+i*u*a,s*u*a-i*o*f]}function l(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],o=t[0],u=t[1],a=t[2],f=t[3];return[n*o-r*u-i*a-s*f,n*u+r*o+i*f-s*a,n*a-r*f+i*o+s*u,n*f+r*a-i*u+s*o]}function c(e,t){if(e&&t){var n=b(e,t),r=Math.sqrt(y(n,n)),i=.5*Math.acos(Math.max(-1,Math.min(1,y(e,t)))),s=Math.sin(i)/r;return r&&[Math.cos(i),n[2]*s,-n[1]*s,n[0]*s]}}function h(e,t,n){var r=v(t,2,e[0]);r=v(r,1,e[1]),r=v(r,0,e[2]-n[2]);var i,s,o=t[0],u=t[1],a=t[2],f=r[0],l=r[1],c=r[2],h=Math.atan2(u,o)*x,d=Math.sqrt(o*o+u*u);Math.abs(l)>d?(s=(l>0?90:-90)-h,i=0):(s=Math.asin(l/d)*x-h,i=Math.sqrt(d*d-l*l));var m=180-s-2*h,g=(Math.atan2(c,f)-Math.atan2(a,i))*x,y=(Math.atan2(c,f)-Math.atan2(a,-i))*x,b=p(n[0],n[1],s,g),w=p(n[0],n[1],m,y);return w>=b?[s,g,n[2]]:[m,y,n[2]]}function p(e,t,n,r){var i=d(n-e),s=d(r-t);return Math.sqrt(i*i+s*s)}function d(e){return(e%360+540)%360-180}function v(e,t,n){var r=n*S,i=e.slice(),s=0===t?1:0,o=2===t?1:2,u=Math.cos(r),a=Math.sin(r);return i[s]=e[s]*u-e[o]*a,i[o]=e[o]*u+e[s]*a,i}function m(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*x,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*x,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*x]}function g(e){var t=e[0]*S,n=e[1]*S,r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function y(e,t){for(var n=0,r=e.length,i=0;r>n;++n)i+=e[n]*t[n];return i}function b(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function w(e){for(var t=0,n=arguments.length,r=[];++t<n;)r.push(arguments[t]);var i=E.dispatch.apply(null,r);return i.of=function(t,n){return function(r){var s;try{s=r.sourceEvent=E.event,r.target=e,E.event=r,i[r.type].apply(t,n)}finally{E.event=s}}},i}var E=e("d3"),S=Math.PI/180,x=180/Math.PI,T={cursor:"pointer"},N={cursor:"auto"};t.exports=r},{d3:53}],347:[function(e,t,n){"use strict";function r(e,t){var n=e.projection,r=e.zoom,s=function(){e.makeProjection(t),e.makePath(),r.scale(n.scale()),r.translate(n.translate()),i(e.hoverContainer),e.render()};return s}var i=e("../../plotly").Fx.loneUnhover;t.exports=r},{"../../plotly":330}],348:[function(e,t,n){"use strict";function r(e,t){this.element=e,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxStart=[0,0],this.boxEnd=[0,0]}function i(e){var t=e.mouseContainer,n=e.glplot,i=new r(t,n);return i.mouseListener=s(t,function(t,r,s){function o(t,n,r){var s=Math.min(n,r),o=Math.max(n,r);s!==o?(t[0]=s,t[1]=o,i.dataBox=t):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}var u=e.xaxis.range,a=e.yaxis.range,f=n.viewBox,l=i.lastPos[0],c=i.lastPos[1];switch(r*=n.pixelRatio,s*=n.pixelRatio,s=f[3]-f[1]-s,e.fullLayout.dragmode){case"zoom":if(t){var h=r/(f[2]-f[0])*(u[1]-u[0])+u[0],p=s/(f[3]-f[1])*(a[1]-a[0])+a[0];i.boxEnabled||(i.boxStart[0]=h,i.boxStart[1]=p),i.boxEnd[0]=h,i.boxEnd[1]=p,i.boxEnabled=!0}else i.boxEnabled&&(o(u,i.boxStart[0],i.boxEnd[0]),o(a,i.boxStart[1],i.boxEnd[1]),i.boxEnabled=!1);break;case"pan":if(i.boxEnabled=!1,t){var d=(l-r)*(u[1]-u[0])/(n.viewBox[2]-n.viewBox[0]),v=(c-s)*(a[1]-a[0])/(n.viewBox[3]-n.viewBox[1]);u[0]+=d,u[1]+=d,a[0]+=v,a[1]+=v,i.lastInputTime=Date.now(),e.cameraChanged()}}i.lastPos[0]=r,i.lastPos[1]=s}),i.wheelListener=o(t,function(t,r){var s=e.xaxis.range,o=e.yaxis.range,u=n.viewBox,a=i.lastPos[0],f=i.lastPos[1];switch(e.fullLayout.dragmode){case"zoom":break;case"pan":var l=Math.exp(.1*r/(u[3]-u[1])),c=a/(u[2]-u[0])*(s[1]-s[0])+s[0],h=f/(u[3]-u[1])*(o[1]-o[0])+o[0];s[0]=(s[0]-c)*l+c,s[1]=(s[1]-c)*l+c,o[0]=(o[0]-h)*l+h,o[1]=(o[1]-h)*l+h,i.lastInputTime=Date.now(),e.cameraChanged()}return!0}),i}var s=e("mouse-change"),o=e("mouse-wheel");t.exports=i},{"mouse-change":173,"mouse-wheel":177}],349:[function(e,t,n){"use strict";function r(e){this.scene=e,this.gl=e.gl,this.pixelRatio=e.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0]}function i(e){return new r(e)}var s=e("../../plotly"),o=e("../../lib/html2unicode"),u=e("../../lib/str2rgbarray"),a=r.prototype,f=["xaxis","yaxis"];a.merge=function(e){this.titleEnable=!1,this.backgroundColor=u(e.plot_bgcolor);var t,n,r,i,s,a,l,c,h,p,d;for(p=0;2>p;++p){for(t=f[p],n=e[this.scene[t]._name],r=/Click to enter .+ title/.test(n.title)?"":n.title,d=0;2>=d;d+=2)this.labelEnable[p+d]=!1,this.labels[p+d]=o(r),this.labelColor[p+d]=u(n.titlefont.color),this.labelFont[p+d]=n.titlefont.family,this.labelSize[p+d]=n.titlefont.size,this.labelPad[p+d]=this.getLabelPad(t,n),this.tickEnable[p+d]=!1,this.tickColor[p+d]=u((n.tickfont||{}).color),this.tickAngle[p+d]="auto"===n.tickangle?0:-n.tickangle,this.tickPad[p+d]=this.getTickPad(n),this.tickMarkLength[p+d]=0,this.tickMarkWidth[p+d]=n.tickwidth||0,this.tickMarkColor[p+d]=u(n.tickcolor),this.borderLineEnable[p+d]=!1,this.borderLineColor[p+d]=u(n.linecolor),this.borderLineWidth[p+d]=n.linewidth||0;l=this.hasSharedAxis(n),s=this.hasAxisInDfltPos(t,n)&&!l,a=this.hasAxisInAltrPos(t,n)&&!l,i=n.mirror||!1,c=l?-1!==String(i).indexOf("all"):!!i,h=l?"allticks"===i:-1!==String(i).indexOf("ticks"),s?this.labelEnable[p]=!0:a&&(this.labelEnable[p+2]=!0),s?this.tickEnable[p]=n.showticklabels:a&&(this.tickEnable[p+2]=n.showticklabels),(s||c)&&(this.borderLineEnable[p]=n.showline),(a||c)&&(this.borderLineEnable[p+2]=n.showline),(s||h)&&(this.tickMarkLength[p]=this.getTickMarkLength(n)),(a||h)&&(this.tickMarkLength[p+2]=this.getTickMarkLength(n)),this.gridLineEnable[p]=n.showgrid,this.gridLineColor[p]=u(n.gridcolor),this.gridLineWidth[p]=n.gridwidth,this.zeroLineEnable[p]=n.zeroline,this.zeroLineColor[p]=u(n.zerolinecolor),this.zeroLineWidth[p]=n.zerolinewidth}},a.hasSharedAxis=function(e){var t=this.scene,n=s.Plots.getSubplotIds(t.fullLayout,"gl2d"),r=s.Axes.findSubplotsWithAxis(n,e);return 0!==r.indexOf(t.id)},a.hasAxisInDfltPos=function(e,t){var n=t.side;return"xaxis"===e?"bottom"===n:"yaxis"===e?"left"===n:void 0},a.hasAxisInAltrPos=function(e,t){var n=t.side;return"xaxis"===e?"top"===n:"yaxis"===e?"right"===n:void 0},a.getLabelPad=function(e,t){var n=1.5,r=t.titlefont.size,i=t.showticklabels;return"xaxis"===e?"top"===t.side?-10+r*(n+(i?1:0)):-10+r*(n+(i?.5:0)):"yaxis"===e?"right"===t.side?10+r*(n+(i?1:.5)):10+r*(n+(i?.5:0)):void 0},a.getTickPad=function(e){return"outside"===e.ticks?10+e.ticklen:15},a.getTickMarkLength=function(e){if(!e.ticks)return 0;var t=e.ticklen;return"inside"===e.ticks?-t:t},t.exports=i},{"../../lib/html2unicode":313,"../../lib/str2rgbarray":323,"../../plotly":330}],350:[function(e,t,n){"use strict";function r(e,t){this.container=e.container,this.pixelRatio=e.plotGlPixelRatio||window.devicePixelRatio,this.id=e.id,this.staticPlot=!!e.staticPlot,this.fullLayout=t,this.updateAxes(t),this.makeFramework(),this.glplotOptions=c(this),this.glplotOptions.merge(t),this.glplot=a(this.glplotOptions),this.camera=h(this),this.traces={},this.spikes=f(this.glplot),this.selectBox=l(this.glplot,{innerFill:!1,outerFill:!0}),this.pickResult=null,this.bounds=[1/0,1/0,-1/0,-1/0],this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw()}function i(e,t){for(var n=0;2>n;++n){var r=e[n],i=t[n];if(r.length!==i.length)return!0;for(var s=0;s<r.length;++s)if(r[s].x!==i[s].x)return!0}return!1}var s,o,u=e("../../plotly"),a=e("gl-plot2d"),f=e("gl-spikes2d"),l=e("gl-select-box"),c=e("./convert"),h=e("./camera"),p=e("../../traces/scattergl/convert"),d=e("../../lib/html2unicode"),v=e("../../lib/show_no_webgl_msg"),m=["xaxis","yaxis"];u.Plots.registerSubplot("gl2d",["xaxis","yaxis"],["x","y"],u.Axes.attributes),t.exports=r;var g=r.prototype;g.makeFramework=function(){if(this.staticPlot){if(!o){s=document.createElement("canvas");try{o=s.getContext("webgl",{preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0})}catch(e){throw new Error(["Error creating static canvas/context for image server"].join(" "))}}this.canvas=s,this.gl=o}else{var t,n=document.createElement("canvas"),r={premultipliedAlpha:!0};try{t=n.getContext("webgl",r)}catch(e){}if(!t)try{t=n.getContext("experimental-webgl",r)}catch(e){}t||v(this),this.canvas=n,this.gl=t}var i=this.canvas,u=this.pixelRatio,a=this.fullLayout;i.width=0|Math.ceil(u*a.width),i.height=0|Math.ceil(u*a.height),i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style["pointer-events"]="none";var f=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");f.style.position="absolute",f.style.top=f.style.left="0px",f.style.width=f.style.height="100%",f.style["z-index"]=20,f.style["pointer-events"]="none";var l=this.mouseContainer=document.createElement("div");l.style.position="absolute";var c=this.container;c.appendChild(i),c.appendChild(f),c.appendChild(l)},g.toImage=function(e){e||(e="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(s),this.glplot.setDirty(!0),this.glplot.draw();var t=this.glplot.gl,n=t.drawingBufferWidth,r=t.drawingBufferHeight;t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new Uint8Array(n*r*4);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,i);for(var o=0,u=r-1;u>o;++o,--u)for(var a=0;n>a;++a)for(var f=0;4>f;++f){var l=i[4*(n*o+a)+f];i[4*(n*o+a)+f]=i[4*(n*u+a)+f],i[4*(n*u+a)+f]=l}var c=document.createElement("canvas");c.width=n,c.height=r;var h=c.getContext("2d"),p=h.createImageData(n,r);p.data.set(i),h.putImageData(p,0,0);var d;switch(e){case"jpeg":d=c.toDataURL("image/jpeg");break;case"webp":d=c.toDataURL("image/webp");break;default:d=c.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(s),d},g.computeTickMarks=function(){this.xaxis._length=this.glplot.viewBox[2]-this.glplot.viewBox[0],this.yaxis._length=this.glplot.viewBox[3]-this.glplot.viewBox[1];for(var e=[u.Axes.calcTicks(this.xaxis),u.Axes.calcTicks(this.yaxis)],t=0;2>t;++t)for(var n=0;n<e[t].length;++n)e[t][n].text=d(e[t][n].text+"").replace(/\n/g," ");return e},g.updateAxes=function(e){var t=u.Axes.subplotMatch,n="xaxis"+this.id.match(t)[1],r="yaxis"+this.id.match(t)[2];this.xaxis=e[n],this.yaxis=e[r]},g.updateFx=function(e){var t=this.fullLayout;t.dragmode=e.dragmode,t.hovermode=e.hovermode},g.cameraChanged=function(){var e=this.camera,t=this.xaxis.range,n=this.yaxis.range;this.glplot.setDataBox([t[0],n[0],t[1],n[1]]);var r=this.computeTickMarks(),s=this.glplotOptions.ticks;i(r,s)&&(this.glplotOptions.ticks=r,this.glplotOptions.dataBox=e.dataBox,this.glplot.update(this.glplotOptions))},g.destroy=function(){this.glplot.dispose()},g.plot=function(e,t){var n,r,i=this.glplot,s=this.pixelRatio;this.fullLayout=t,this.updateAxes(t);var o=t.width,a=t.height,f=0|Math.ceil(s*o),l=0|Math.ceil(s*a),c=this.canvas;(c.width!==f||c.height!==l)&&(c.width=f,c.height=l),e?Array.isArray(e)||(e=[e]):e=[];var h,d;for(n=0;n<e.length;++n){if(h=e[n],d=this.traces[h.uid])d.update(h);else switch(h.type){case"scattergl":d=p(this,h)}this.traces[h.uid]=d}var v=Object.keys(this.traces);e:for(n=0;n<v.length;++n){for(r=0;r<e.length;++r)if(e[r].uid===v[n])continue e;d=this.traces[v[n]],d.dispose(),delete this.traces[v[n]]}var g=this.glplotOptions;g.merge(t),g.screenBox=[0,0,o,a];var y=t._size,b=this.xaxis.domain,w=this.yaxis.domain;g.viewBox=[y.l+b[0]*y.w,y.b+w[0]*y.h,o-y.r-(1-b[1])*y.w,a-y.t-(1-w[1])*y.h],this.mouseContainer.style.width=y.w*(b[1]-b[0])+"px",this.mouseContainer.style.height=y.h*(w[1]-w[0])+"px",this.mouseContainer.height=y.h*(w[1]-w[0]),this.mouseContainer.style.left=y.l+b[0]*y.w+"px",this.mouseContainer.style.top=y.t+(1-w[1])*y.h+"px";var E=this.bounds;for(E[0]=E[1]=1/0,E[2]=E[3]=-1/0,v=Object.keys(this.traces),n=0;n<v.length;++n){d=this.traces[v[n]];for(var S=0;2>S;++S)E[S]=Math.min(E[S],d.bounds[S]),E[S+2]=Math.max(E[S+2],d.bounds[S+2])}var x;for(n=0;2>n;++n)E[n]>E[n+2]&&(E[n]=-1,E[n+2]=1),x=this[m[n]],x._length=g.viewBox[n+2]-g.viewBox[n],u.Axes.doAutoRange(x);g.ticks=this.computeTickMarks();var T=this.xaxis.range,N=this.yaxis.range;g.dataBox=[T[0],N[0],T[1],N[1]],g.merge(t),i.update(g)},g.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var e=this.glplot,t=this.camera,n=t.mouseListener,r=this.fullLayout;this.cameraChanged();var i=n.x*e.pixelRatio,s=this.canvas.height-e.pixelRatio*n.y;if(t.boxEnabled&&"zoom"===r.dragmode)this.selectBox.enabled=!0,this.selectBox.selectBox=[Math.min(t.boxStart[0],t.boxEnd[0]),Math.min(t.boxStart[1],t.boxEnd[1]),Math.max(t.boxStart[0],t.boxEnd[0]),Math.max(t.boxStart[1],t.boxEnd[1])],e.setDirty();else{this.selectBox.enabled=!1;var o=r._size,a=this.xaxis.domain,f=this.yaxis.domain,l=e.pick(i/e.pixelRatio+o.l+a[0]*o.w,s/e.pixelRatio-(o.t+(1-f[1])*o.h));if(l&&r.hovermode){var c=l.object._trace.handlePick(l);if(c&&(!this.lastPickResult||this.lastPickResult.trace!==c.trace||this.lastPickResult.dataCoord[0]!==c.dataCoord[0]||this.lastPickResult.dataCoord[1]!==c.dataCoord[1])){var h=this.lastPickResult=c;this.spikes.update({center:l.dataCoord}),h.screenCoord=[((e.viewBox[2]-e.viewBox[0])*(l.dataCoord[0]-e.dataBox[0])/(e.dataBox[2]-e.dataBox[0])+e.viewBox[0])/e.pixelRatio,(this.canvas.height-(e.viewBox[3]-e.viewBox[1])*(l.dataCoord[1]-e.dataBox[1])/(e.dataBox[3]-e.dataBox[1])-e.viewBox[1])/e.pixelRatio];var p=h.hoverinfo;if("all"!==p){var d=p.split("+");-1===d.indexOf("x")&&(h.traceCoord[0]=void 0),-1===d.indexOf("y")&&(h.traceCoord[1]=void 0),-1===d.indexOf("text")&&(h.textLabel=void 0),-1===d.indexOf("name")&&(h.name=void 0)}u.Fx.loneHover({x:h.screenCoord[0],y:h.screenCoord[1],xLabel:this.hoverFormatter("xaxis",h.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",h.traceCoord[1]),text:h.textLabel,name:h.name,color:h.color},{container:this.svgContainer}),this.lastPickResult={dataCoord:l.dataCoord}}}else!l&&this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,u.Fx.loneUnhover(this.svgContainer))}e.draw()}},g.hoverFormatter=function(e,t){if(void 0===t)return void 0;var n=this[e];return u.Axes.tickText(n,n.c2l(t),"hover").text}},{"../../lib/html2unicode":313,"../../lib/show_no_webgl_msg":321,"../../plotly":330,"../../traces/scattergl/convert":409,"./camera":348,"./convert":349,"gl-plot2d":106,"gl-select-box":136,"gl-spikes2d":147}],351:[function(e,t,n){"use strict";function r(e,t){e=e||document.body,t=t||{};var n=[.01,1/0];"distanceLimits"in t&&(n[0]=t.distanceLimits[0],n[1]=t.distanceLimits[1]),"zoomMin"in t&&(n[0]=t.zoomMin),"zoomMax"in t&&(n[1]=t.zoomMax);var r=s({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:n}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0,c=e.clientWidth,h=e.clientHeight,p={keyBindingMode:"rotate",view:r,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:r.modes,tick:function(){var t=i(),n=this.delay,s=t-2*n;r.idle(t-n),r.recalcMatrix(s),r.flush(t-(100+2*n));for(var o=!0,u=r.computedMatrix,a=0;16>a;++a)o=o&&f[a]===u[a],f[a]=u[a];var p=e.clientWidth===c&&e.clientHeight===h;return c=e.clientWidth,h=e.clientHeight,o?!p:(l=Math.exp(r.computedRadius[0]),!0)},lookAt:function(e,t,n){r.lookAt(r.lastT(),e,t,n)},rotate:function(e,t,n){r.rotate(r.lastT(),e,t,n)},pan:function(e,t,n){r.pan(r.lastT(),e,t,n)},translate:function(e,t,n){r.translate(r.lastT(),e,t,n)}};Object.defineProperties(p,{matrix:{get:function(){return r.computedMatrix},set:function(e){return r.setMatrix(r.lastT(),e),r.computedMatrix},enumerable:!0},mode:{get:function(){return r.getMode()},set:function(e){var t=r.computedUp.slice(),n=r.computedEye.slice(),s=r.computedCenter.slice();if(r.setMode(e),"turntable"===e){var o=i();r._active.lookAt(o,n,s,t),r._active.lookAt(o+500,n,s,[0,0,1]),r._active.flush(o)}return r.getMode()},enumerable:!0},center:{get:function(){return r.computedCenter},set:function(e){return r.lookAt(r.lastT(),null,e),r.computedCenter},enumerable:!0},eye:{get:function(){return r.computedEye},set:function(e){return r.lookAt(r.lastT(),e),r.computedEye},enumerable:!0},up:{get:function(){return r.computedUp},set:function(e){return r.lookAt(r.lastT(),null,null,e),r.computedUp},enumerable:!0},distance:{get:function(){return l},set:function(e){return r.setDistance(r.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return r.getDistanceLimits(n)},set:function(e){return r.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var d=0,v=0;return o(e,function(t,n,s,o){var u="rotate"===p.keyBindingMode,a="pan"===p.keyBindingMode,f="zoom"===p.keyBindingMode,c=!!o.control,h=!!o.alt,m=!!o.shift,g=!!(1&t),y=!!(2&t),b=!!(4&t),w=1/e.clientHeight,E=w*(n-d),S=w*(s-v),x=p.flipX?1:-1,T=p.flipY?1:-1,N=i(),C=Math.PI*p.rotateSpeed;if((u&&g&&!c&&!h&&!m||g&&!c&&!h&&m)&&r.rotate(N,x*C*E,-T*C*S,0),(a&&g&&!c&&!h&&!m||y||g&&c&&!h&&!m)&&r.pan(N,-p.translateSpeed*E*l,p.translateSpeed*S*l,0),f&&g&&!c&&!h&&!m||b||g&&!c&&h&&!m){var k=-p.zoomSpeed*S/window.innerHeight*(N-r.lastT())*100;r.pan(N,0,0,l*(Math.exp(k)-1))}return d=n,v=s,!0}),u(e,function(e,t){var n=p.flipX?1:-1,s=p.flipY?1:-1,o=i();if(Math.abs(e)>Math.abs(t))r.rotate(o,0,0,-e*n*Math.PI*p.rotateSpeed/window.innerWidth);else{var u=-p.zoomSpeed*s*t/window.innerHeight*(o-r.lastT())/100;r.pan(o,0,0,l*(Math.exp(u)-1))}},!0),p}t.exports=r;var i=e("right-now"),s=e("3d-view"),o=e("mouse-change"),u=e("mouse-wheel")},{"3d-view":22,"mouse-change":173,"mouse-wheel":177,"right-now":191}],352:[function(e,t,n){t.exports={scene:{valType:"sceneid",dflt:"scene"}}},{}],353:[function(e,t,n){var r=e("../../cartesian/layout_attributes"),i=e("../../../lib/extend").extendFlat;t.exports={showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:"rgb(0,0,0)"},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},title:r.title,titlefont:r.titlefont,type:r.type,autorange:r.autorange,rangemode:r.rangemode,range:r.range,fixedrange:r.fixedrange,tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,mirror:r.mirror,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:r.tickfont,tickangle:r.tickangle,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,showexponent:r.showexponent,exponentformat:r.exponentformat,tickformat:r.tickformat,hoverformat:r.hoverformat,showline:r.showline,linecolor:r.linecolor,linewidth:r.linewidth,showgrid:r.showgrid,gridcolor:i({},r.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:r.gridwidth,zeroline:r.zeroline,zerolinecolor:r.zerolinecolor,zerolinewidth:r.zerolinewidth}},{"../../../lib/extend":310,"../../cartesian/layout_attributes":335}],354:[function(e,t,n){"use strict";var r=e("../../../plotly"),i=e("./axis_attributes"),s=["xaxis","yaxis","zaxis"],o=function(){};t.exports=function(e,t,n){function u(e,t){return r.Lib.coerce(f,l,i,e,t)}for(var f,l,c=r.Axes,h=0;h<s.length;h++){var p=s[h];f=e[p]||{},l={_id:p[0]+n.scene,_name:p},t[p]=l=c.handleAxisDefaults(f,l,u,{font:n.font,letter:p[0],data:n.data,showGrid:!0}),u("gridcolor"),u("title",p[0]),l.setScale=o,u("showspikes")&&(u("spikesides"),u("spikethickness"),u("spikecolor")),u("showbackground")&&u("backgroundcolor"),u("showaxeslabels")}}},{"../../../plotly":330,"./axis_attributes":353}],355:[function(e,t,n){"use strict";function r(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=a(this.tickPad),this._defaultLabelPad=a(this.labelPad),this._defaultLineTickLength=a(this.lineTickLength)}function i(e){var t=new r;return t.merge(e),t}var s=e("arraytools"),o=e("../../../lib/html2unicode"),u=e("../../../lib/str2rgbarray"),a=s.copy1D,f=["xaxis","yaxis","zaxis"],l=r.prototype;l.merge=function(e){for(var t=this,n=0;3>n;++n){var r=e[f[n]];t.labels[n]=o(r.title),"titlefont"in r&&(r.titlefont.color&&(t.labelColor[n]=u(r.titlefont.color)),r.titlefont.family&&(t.labelFont[n]=r.titlefont.family),r.titlefont.size&&(t.labelSize[n]=r.titlefont.size)),"showline"in r&&(t.lineEnable[n]=r.showline),"linecolor"in r&&(t.lineColor[n]=u(r.linecolor)),"linewidth"in r&&(t.lineWidth[n]=r.linewidth),"showgrid"in r&&(t.gridEnable[n]=r.showgrid),"gridcolor"in r&&(t.gridColor[n]=u(r.gridcolor)),"gridwidth"in r&&(t.gridWidth[n]=r.gridwidth),"zeroline"in r&&(t.zeroEnable[n]=r.zeroline),"zerolinecolor"in r&&(t.zeroLineColor[n]=u(r.zerolinecolor)),"zerolinewidth"in r&&(t.zeroLineWidth[n]=r.zerolinewidth),"ticks"in r&&r.ticks?t.lineTickEnable[n]=!0:t.lineTickEnable[n]=!1,"ticklen"in r&&(t.lineTickLength[n]=t._defaultLineTickLength[n]=r.ticklen),"tickcolor"in r&&(t.lineTickColor[n]=u(r.tickcolor)),"tickwidth"in r&&(t.lineTickWidth[n]=r.tickwidth),"tickangle"in r&&(t.tickAngle[n]="auto"===r.tickangle?0:r.tickangle),"showticklabels"in r&&(t.tickEnable[n]=r.showticklabels),"tickfont"in r&&(r.tickfont.color&&(t.tickColor[n]=u(r.tickfont.color)),r.tickfont.family&&(t.tickFont[n]=r.tickfont.family),r.tickfont.size&&(t.tickSize[n]=r.tickfont.size)),"mirror"in r?-1!==["ticks","all","allticks"].indexOf(r.mirror)?(t.lineTickMirror[n]=!0,t.lineMirror[n]=!0):r.mirror===!0?(t.lineTickMirror[n]=!1,t.lineMirror[n]=!0):(t.lineTickMirror[n]=!1,t.lineMirror[n]=!1):t.lineMirror[n]=!1,"showbackground"in r&&r.showbackground!==!1?(t.backgroundEnable[n]=!0,t.backgroundColor[n]=u(r.backgroundcolor)):t.backgroundEnable[n]=!1}},t.exports=i},{"../../../lib/html2unicode":313,"../../../lib/str2rgbarray":323,arraytools:32}],356:[function(e,t,n){"use strict";var r=e("../../../plotly"),i=e("./layout_attributes"),s=e("./axis_defaults");t.exports=function(e,t,n){function o(e,t){return r.Lib.coerce(c,p,i,e,t)}if(t._hasGL3D){var u,f=r.Plots.getSubplotIdsInData(n,"gl3d");delete t.xaxis,delete t.yaxis;var l=f.length;for(u=0;l>u;++u){var c,h=f[u];void 0!==e[h]?c=e[h]:e[h]=c={};var p=t[h]||{};o("bgcolor");for(var d=Object.keys(i.camera),v=0;v<d.length;v++)o("camera."+d[v]+".x"),o("camera."+d[v]+".y"),o("camera."+d[v]+".z");o("domain.x",[u/l,(u+1)/l]),o("domain.y");var m=!!o("aspectratio.x")&&!!o("aspectratio.y")&&!!o("aspectratio.z"),g=m?"manual":"auto",y=o("aspectmode",g);m||(c.aspectratio=p.aspectratio={x:1,y:1,z:1},"manual"===y&&(p.aspectmode="auto")),s(c,p,{font:t.font,scene:h,data:n}),t[h]=p}}}},{"../../../plotly":330,"./axis_defaults":354,"./layout_attributes":358}],357:[function(e,t,n){"use strict";var r=e("../../../plotly"),i=e("./attributes"),s=["xaxis","yaxis","zaxis"],o=function(){};r.Plots.registerSubplot("gl3d","scene","scene",i),n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./defaults"),n.cleanId=function(e){if(e.match(/^scene[0-9]*$/)){var t=e.substr(5);return"1"===t&&(t=""),"scene"+t}},n.setConvert=function(e){r.Axes.setConvert(e),e.setScale=o},n.initAxes=function(e){var t=e._fullLayout;delete t.xaxis,delete t.yaxis;for(var n=r.Plots.getSubplotIds(t,"gl3d"),i=0;i<n.length;++i)for(var o=n[i],u=t[o],f=0;3>f;++f){var l=s[f],c=u[l];c._td=e}}},{"../../../plotly":330,"./attributes":352,"./defaults":356,"./layout_attributes":358}],358:[function(e,t,n){"use strict";function r(e,t,n){return{x:{valType:"number",dflt:e},y:{valType:"number",dflt:t},z:{valType:"number",dflt:n}}}var i=e("./axis_attributes"),s=e("../../../lib/extend").extendFlat;t.exports={bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},camera:{up:s(r(0,0,1),{}),center:s(r(0,0,0),{}),eye:s(r(1.25,1.25,1.25),{})},domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto"},aspectratio:{x:{valType:"number",min:0},y:{valType:"number",min:0},z:{valType:"number",min:0}},xaxis:i,yaxis:i,zaxis:i,_deprecated:{cameraposition:{valType:"info_array"}}}},{"../../../lib/extend":310,"./axis_attributes":353}],359:[function(e,t,n){"use strict";function r(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}function i(e){var t=new r;return t.merge(e),t}var s=e("../../../lib/str2rgbarray"),o=["xaxis","yaxis","zaxis"],u=r.prototype;u.merge=function(e){for(var t=0;3>t;++t){var n=e[o[t]];this.enabled[t]=n.showspikes,this.colors[t]=s(n.spikecolor),this.drawSides[t]=n.spikesides,this.lineWidth[t]=n.spikethickness}},t.exports=i},{"../../../lib/str2rgbarray":323}],360:[function(e,t,n){"use strict";function r(e){for(var t=new Array(3),n=0;3>n;++n){for(var r=e[n],i=new Array(r.length),s=0;s<r.length;++s)i[s]=r[s].x;t[n]=i}return t}function i(e){for(var t=e.axesOptions,n=e.glplot.axesPixels,i=e.fullSceneLayout,f=[[],[],[]],c=0;3>c;++c){var h=i[u[c]];if(h._length=(n[c].hi-n[c].lo)*n[c].pixelsPerDataUnit/e.dataScale[c],Math.abs(h._length)===1/0)f[c]=[];else{h.range[0]=(n[c].lo+e.dataCenter[c])/e.dataScale[c],h.range[1]=(n[c].hi+e.dataCenter[c])/e.dataScale[c],h._m=1/(e.dataScale[c]*n[c].pixelsPerDataUnit),h.range[0]===h.range[1]&&(h.range[0]-=1,h.range[1]+=1);var p=h.tickmode;if("auto"===h.tickmode){h.tickmode="linear";var d=h.nticks||s.Lib.constrain(h._length/40,4,9);s.Axes.autoTicks(h,Math.abs(h.range[1]-h.range[0])/d)}for(var v=s.Axes.calcTicks(h),m=0;m<v.length;++m)v[m].x=v[m].x*e.dataScale[c]-e.dataCenter[c],v[m].text=o(v[m].text);f[c]=v,h.tickmode=p}}t.ticks=f;for(var c=0;3>c;++c){a[c]=.5*(e.glplot.bounds[0][c]+e.glplot.bounds[1][c]);for(var m=0;2>m;++m)t.bounds[m][c]=e.glplot.bounds[m][c]}e.contourLevels=r(f)}t.exports=i;var s=e("../../../plotly"),o=e("../../../lib/html2unicode"),u=["xaxis","yaxis","zaxis"],a=[0,0,0]},{"../../../lib/html2unicode":313,"../../../plotly":330}],361:[function(e,t,n){"use strict";function r(e,t){var n,r,i=[0,0,0,0];for(n=0;4>n;++n)for(r=0;4>r;++r)i[r]+=e[4*n+r]*t[n];return i}function i(e,t){var n=r(e.projection,r(e.view,r(e.model,[t[0],t[1],t[2],1])));return n}t.exports=i},{}],362:[function(e,t,n){"use strict";function r(e){function t(t,n){if(void 0===n)return void 0;if("string"==typeof n)return n;var r=e.fullSceneLayout[t];return l.Axes.tickText(r,r.c2l(n),"hover").text}var n=e.svgContainer,r=e.container.getBoundingClientRect(),i=r.width,s=r.height;n.setAttributeNS(null,"viewBox","0 0 "+i+" "+s),n.setAttributeNS(null,"width",i),n.setAttributeNS(null,"height",s),d(e),e.glplot.axes.update(e.axesOptions);for(var o=Object.keys(e.traces),u=null,a=null,f=e.glplot.selection,c=0;c<o.length;++c){var h=e.traces[o[c]];h.handlePick(f)&&(u=h,a=e.glplot.selection.index),h.setContourLevels&&h.setContourLevels()}if(null!==u){var p=b(e.glplot.cameraParams,f.dataCoordinate),v=u.data.hoverinfo;if("all"!==v){var m=v.split("+");-1===m.indexOf("x")&&(f.traceCoordinate[0]=void 0),-1===m.indexOf("y")&&(f.traceCoordinate[1]=void 0),-1===m.indexOf("z")&&(f.traceCoordinate[2]=void 0),-1===m.indexOf("text")&&(f.textLabel=void 0),-1===m.indexOf("name")&&(u.name=void 0)}l.Fx.loneHover({x:(.5+.5*p[0]/p[3])*i,y:(.5-.5*p[1]/p[3])*s,xLabel:t("xaxis",f.traceCoordinate[0]),yLabel:t("yaxis",f.traceCoordinate[1]),zLabel:t("zaxis",f.traceCoordinate[2]),text:f.textLabel,name:u.name,color:u.color},{container:n})}else l.Fx.loneUnhover(n)}function i(e,t,n,i){var s={canvas:n,gl:i,container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1};if(e.staticMode){if(!f){a=document.createElement("canvas");try{f=a.getContext("webgl",{preserveDrawingBuffer:!0,premultipliedAlpha:!0})}catch(o){throw new Error("error creating static canvas/context for image server")}}s.pixelRatio=e.pixelRatio,s.gl=f,s.canvas=a}try{e.glplot=c(s)}catch(o){E(e)}if(e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",function(e){console.log("lost context"),e.preventDefault()}),!e.camera){var u=t.scene.camera;e.camera=y(e.container,{center:[u.center.x,u.center.y,u.center.z],eye:[u.eye.x,u.eye.y,u.eye.z],up:[u.up.x,u.up.y,u.up.z],zoomMin:.1,zoomMax:100,mode:"orbit"})}return e.glplot.mouseListener.enabled=!1,e.glplot.camera=e.camera,e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=r.bind(null,e),e.traces={},!0}function s(e,t){var n=document.createElement("div"),r=e.container,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.style.position="absolute",s.style.top=s.style.left="0px",s.style.width=s.style.height="100%",s.style["z-index"]=20,s.style["pointer-events"]="none",n.appendChild(s),this.svgContainer=s,n.id=e.id,n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",r.appendChild(n),this.fullLayout=t,this.id=e.id||"scene",this.plotArgs=[[],{},{}],this.axesOptions=h(t[this.id]),this.spikeOptions=p(t[this.id]),this.container=n,this.staticMode=!!e.staticPlot,this.pixelRatio=e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.dataCenter=[0,0,0],this.contourLevels=[[],[],[]],!i(this,t)}function o(e,t,n,r){for(var i=0;i<t.length;++i)if(Array.isArray(t[i]))for(var s=0;s<t[i].length;++s){var o=e.d2l(t[i][s]);!isNaN(o)&&isFinite(o)&&(r[0][n]=Math.min(r[0][n],o),r[1][n]=Math.max(r[1][n],o))}else{var o=e.d2l(t[i]);!isNaN(o)&&isFinite(o)&&(r[0][n]=Math.min(r[0][n],o),r[1][n]=Math.max(r[1][n],o))}}function u(e,t,n){var r=e.fullSceneLayout;o(r.xaxis,t.x,0,n),o(r.yaxis,t.y,1,n),o(r.zaxis,t.z,2,n)}var a,f,l=e("../../plotly"),c=e("gl-plot3d"),h=e("./layout/convert"),p=e("./layout/spikes"),d=e("./layout/tick_marks"),v=e("../../traces/scatter3d/convert"),m=e("../../traces/surface/convert"),g=e("../../traces/mesh3d/convert"),y=e("./camera"),b=e("./project"),w=e("../../lib/str2rgbarray"),E=e("../../lib/show_no_webgl_msg"),S=s.prototype;S.recoverContext=function(){function e(){return n.isContextLost()?void requestAnimationFrame(e):i(t,t.fullLayout,r,n)?void t.plot.apply(t,t.plotArgs):void console.error("catastrophic/unrecoverable webgl error.  context lost.")}var t=this,n=this.glplot.gl,r=this.glplot.canvas;this.glplot.dispose(),requestAnimationFrame(e)};var x=["xaxis","yaxis","zaxis"];S.plot=function(e,t,n){if(this.plotArgs=[e,t,n],!this.glplot.contextLost){var r,i,s,o,a=t[this.id],f=n[this.id];for(a.bgcolor?this.glplot.clearColor=w(a.bgcolor):this.glplot.clearColor=[0,0,0,0],this.glplot.snapToData=!0,this.fullSceneLayout=a,this.glplotLayout=a,this.axesOptions.merge(a),this.spikeOptions.merge(a),this.handleDragmode(t.dragmode),this.glplot.update({}),s=0;3>s;++s){var c=a[x[s]];l.Gl3dLayout.setConvert(c)}e?Array.isArray(e)||(e=[e]):e=[];for(var h=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],s=0;s<e.length;++s){var r=e[s];r.visible===!0&&u(this,r,h)}for(var p=[1,1,1],d=[0,0,0],o=0;3>o;++o)h[0][o]>h[1][o]?(p[o]=1,d[o]=0):(h[1][o]===h[0][o]?p[o]=1:p[o]=1/(h[1][o]-h[0][o]),d[o]=.5*(h[0][o]+h[1][o])*p[o]);this.dataScale=p,this.dataCenter=d;for(var s=0;s<e.length;++s)if(r=e[s],r.visible===!0){if(i=this.traces[r.uid])i.update(r);else{switch(r.type){case"scatter3d":i=v(this,r);break;case"surface":i=m(this,r);break;case"mesh3d":i=g(this,r)}this.traces[r.uid]=i}i.name=r.name}var y=Object.keys(this.traces);e:for(s=0;s<y.length;++s){for(o=0;o<e.length;++o)if(e[o].uid===y[s]&&e[o].visible===!0)continue e;i=this.traces[y[s]],i.dispose(),delete this.traces[y[s]]}var b=[[0,0,0],[0,0,0]],E=[],S={};for(s=0;3>s;++s){var c=a[x[s]],T=c.type;if(T in S?(S[T].acc*=p[s],S[T].count+=1):S[T]={acc:p[s],count:1},c.autorange){for(b[0][s]=1/0,b[1][s]=-1/0,o=0;o<this.glplot.objects.length;++o){var N=this.glplot.objects[o].bounds;b[0][s]=Math.min(b[0][s],(N[0][s]+d[s])/p[s]),b[1][s]=Math.max(b[1][s],(N[1][s]+d[s])/p[s])}if("rangemode"in c&&"tozero"===c.rangemode&&(b[0][s]=Math.min(b[0][s],0),b[1][s]=Math.max(b[1][s],0)),b[0][s]>b[1][s])b[0][s]=-1,b[1][s]=1;else{var C=b[1][s]-b[0][s];b[0][s]-=C/32,b[1][s]+=C/32}}else{var L=a[x[s]].range;b[0][s]=L[0],b[1][s]=L[1]}b[0][s]===b[1][s]&&(b[0][s]-=1,b[1][s]+=1),E[s]=b[1][s]-b[0][s],this.glplot.bounds[0][s]=b[0][s]*p[s]-d[s],this.glplot.bounds[1][s]=b[1][s]*p[s]-d[s]}for(var A=[1,1,1],s=0;3>s;++s){var c=a[x[s]],T=c.type,O=S[T];A[s]=Math.pow(O.acc,1/O.count)/p[s]}var M,_=4;if("auto"===a.aspectmode)M=Math.max.apply(null,A)/Math.min.apply(null,A)<=_?A:[1,1,1];else if("cube"===a.aspectmode)M=[1,1,1];else if("data"===a.aspectmode)M=A;else{if("manual"!==a.aspectmode)throw new Error("scene.js aspectRatio was not one of the enumerated types");var D=a.aspectratio;M=[D.x,D.y,D.z]}a.aspectratio.x=f.aspectratio.x=M[0],a.aspectratio.y=f.aspectratio.y=M[1],a.aspectratio.z=f.aspectratio.z=M[2],this.glplot.aspect=M;var P=a.domain||null,H=t._size||null;if(P&&H){var B=this.container.style;B.position="absolute",B.left=H.l+P.x[0]*H.w+"px",B.top=H.t+(1-P.y[1])*H.h+"px",B.width=H.w*(P.x[1]-P.x[0])+"px",B.height=H.h*(P.y[1]-P.y[0])+"px"}}},S.destroy=function(){this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null},S.setCameraToDefault=function(){this.glplot.camera.lookAt([1.25,1.25,1.25],[0,0,0],[0,0,1])},S.getCamera=function(){this.glplot.camera.view.recalcMatrix(this.camera.view.lastT());var e=this.glplot.camera.up,t=this.glplot.camera.center,n=this.glplot.camera.eye;return{up:{x:e[0],y:e[1],z:e[2]},center:{x:t[0],y:t[1],z:t[2]},eye:{x:n[0],y:n[1],z:n[2]}}},S.setCamera=function(e){var t=e.up,n=e.center,r=e.eye;this.glplot.camera.lookAt([r.x,r.y,r.z],[n.x,n.y,n.z],[t.x,t.y,t.z])},S.saveCamera=function(e){function t(e,t,n,r){var i=["up","center","eye"],s=["x","y","z"];return e[i[n]][s[r]]===t[i[n]][s[r]]}var n=this.getCamera(),r=l.Lib.nestedProperty(e,this.id+".camera"),i=r.get(),s=!1;if(void 0===i)s=!0;else for(var o=0;3>o;o++)for(var u=0;3>u;u++)if(!t(n,i,o,u)){s=!0;break}return s&&r.set(n),s},S.handleDragmode=function(e){var t=this.camera;t&&("orbit"===e?(t.mode="orbit",t.keyBindingMode="rotate"):"turntable"===e?(t.up=[0,0,1],t.mode="turntable",t.keyBindingMode="rotate"):t.keyBindingMode=e)},S.toImage=function(e){e||(e="png"),this.staticMode&&this.container.appendChild(a),this.glplot.redraw();var t=this.glplot.gl,n=t.drawingBufferWidth,r=t.drawingBufferHeight;t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new Uint8Array(n*r*4);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,i);for(var s=0,o=r-1;o>s;++s,--o)for(var u=0;n>u;++u)for(var f=0;4>f;++f){var l=i[4*(n*s+u)+f];i[4*(n*s+u)+f]=i[4*(n*o+u)+f],i[4*(n*o+u)+f]=l}var c=document.createElement("canvas");c.width=n,c.height=r;var h=c.getContext("2d"),p=h.createImageData(n,r);p.data.set(i),h.putImageData(p,0,0);var d;switch(e){case"jpeg":d=c.toDataURL("image/jpeg");break;case"webp":d=c.toDataURL("image/webp");break;default:d=c.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(a),d},t.exports=s},{"../../lib/show_no_webgl_msg":321,"../../lib/str2rgbarray":323,"../../plotly":330,"../../traces/mesh3d/convert":392,"../../traces/scatter3d/convert":401,"../../traces/surface/convert":413,"./camera":351,"./layout/convert":355,"./layout/spikes":359,"./layout/tick_marks":360,"./project":361,"gl-plot3d":124}],363:[function(e,t,n){var r=e("../plotly"),i=e("./font_attributes"),s=e("../components/color/attributes"),o=r.Lib.extendFlat;t.exports={font:{family:o({},i.family,{dflt:'"Open sans", verdana, arial, sans-serif'}),size:o({},i.size,{dflt:12}),color:o({},i.color,{dflt:s.defaultLine})},title:{valType:"string",dflt:"Click to enter Plot title"},titlefont:o({},i,{}),autosize:{valType:"enumerated",values:[!0,!1,"initial"]},width:{valType:"number",min:10,dflt:700},height:{valType:"number",min:10,dflt:450},margin:{l:{valType:"number",min:0,dflt:80},r:{valType:"number",min:0,dflt:80},t:{valType:"number",min:0,dflt:100},b:{valType:"number",min:0,dflt:80},pad:{valType:"number",min:0,dflt:0},autoexpand:{valType:"boolean",dflt:!0}},paper_bgcolor:{valType:"color",dflt:s.background},plot_bgcolor:{valType:"color",dflt:s.background},separators:{valType:"string",dflt:".,"},hidesources:{valType:"boolean",dflt:!1},smith:{valType:"enumerated",values:[!1],dflt:!1},showlegend:{valType:"boolean"},_hasCartesian:{valType:"boolean",dflt:!1},_hasGL3D:{valType:"boolean",dflt:!1},_hasGeo:{valType:"boolean",dflt:!1},_hasPie:{valType:"boolean",dflt:!1},_hasGL2D:{valType:"boolean",dflt:!1},_composedModules:{"*":"Fx"},_nestedModules:{xaxis:"Axes",yaxis:"Axes",scene:"Gl3dLayout",geo:"GeoLayout",legend:"Legend",annotations:"Annotations",shapes:"Shapes"}}},{"../components/color/attributes":282,"../plotly":330,"./font_attributes":336}],364:[function(e,t,n){"use strict";function r(e){return"object"==typeof e&&(e=e.type),e}function i(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)n.on("click",function(){l.sendDataToCloud(e)});else{var r=window.location.pathname.split("/"),i=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+i})}}function s(e,t){for(var n,r=l.getSubplotIds(t,"gl3d"),i=0;i<r.length;i++)n=r[i],!e[n]&&t[n]._scene&&t[n]._scene.destroy()}function o(e,t){for(var n,r=Object.keys(t),i=0;i<r.length;++i){var s=r[i];if("_"===s.charAt(0)||"function"==typeof t[s]){if(s in e)continue;e[s]=t[s]}else if(Array.isArray(t[s])&&Array.isArray(e[s])&&t[s].length&&u.Lib.isPlainObject(t[s][0])){if(t[s].length!==e[s].length)throw new Error("relinkPrivateKeys needs equal length arrays");for(n=0;n<t[s].length;n++)o(e[s][n],t[s][n])}else u.Lib.isPlainObject(t[s])&&u.Lib.isPlainObject(e[s])&&(o(e[s],t[s]),Object.keys(e[s]).length||delete e[s])}}var u=e("../plotly"),a=e("d3"),f=e("fast-isnumeric"),l=t.exports={},c=l.modules={},h=l.allTypes=[],p=l.allCategories={},d=l.subplotsRegistry={};l.attributes=e("./attributes"),l.attributes.type.values=h,l.fontAttrs=e("./font_attributes"),l.layoutAttributes=e("./layout_attributes"),l.fontWeight="normal",l.register=function(e,t,n,r){if(c[t])throw new Error("type "+t+" already registered");for(var i={},s=0;s<n.length;s++)i[n[s]]=!0,p[n[s]]=!0;c[t]={module:e,categories:i},r&&Object.keys(r).length&&(c[t].meta=r),h.push(t)},l.getModule=function(e){if(void 0!==e.r)return console.log("Oops, tried to put a polar trace on an incompatible graph of cartesian data. Ignoring this dataset.",e),!1;var t=c[r(e)];return t?t.module:!1},l.traceIs=function(e,t){if(e=r(e),"various"===e)return!1;var n=c[e];return n||(void 0!==e&&console.warn("unrecognized trace type "+e),n=c[l.attributes.type.dflt]),!!n.categories[t]},l.registerSubplot=function(e,t,n,r){function i(e){return new RegExp(s+e+o)}if(d[e])throw new Error("subplot "+e+" already registered");var s="^",o="([2-9]|[1-9][0-9]+)?$",u="cartesian"===e||"gl2d"===d;d[e]={attr:t,idRoot:n,attributes:r,attrRegex:u?{x:i(t[0]),y:i(t[1])}:i(t),idRegex:u?{x:i(n[0]),y:i(n[1])}:i(n)}},l.getSubplotIds=function(e,t){if(void 0===l.subplotsRegistry[t])return[];if("cartesian"===t&&!e._hasCartesian)return[];if("gl2d"===t&&!e._hasGL2D)return[];if("cartesian"===t||"gl2d"===t)return Object.keys(e._plots);for(var n,r=l.subplotsRegistry[t].idRegex,i=Object.keys(e),s=[],o=0;o<i.length;o++)n=i[o],r.test(n)&&s.push(n);return s},l.getSubplotIdsInData=function(e,t){if(void 0===l.subplotsRegistry[t])return[];for(var n,r=l.subplotsRegistry[t].attr,i=[],s=0;s<e.length;s++)n=e[s],u.Plots.traceIs(n,t)&&-1===i.indexOf(n[r])&&i.push(n[r]);return i},l.getSubplotData=function(e,t,n){if(void 0===l.subplotsRegistry[t])return[];for(var r,i=l.subplotsRegistry[t].attr,s=[],o=0;o<e.length;o++)if(r=e[o],"gl2d"===t&&l.traceIs(r,"gl2d")){var a=u.Axes.subplotMatch,f="x"+n.match(a)[1],c="y"+n.match(a)[2];r[i[0]]===f&&r[i[1]]===c&&s.push(r)}else r[i]===n&&s.push(r);return s},l.redrawText=function(e){return e._fullLayout._hasGL3D||e.data&&e.data[0]&&e.data[0].r?void 0:new Promise(function(t){setTimeout(function(){u.Annotations.drawAll(e),u.Legend.draw(e),(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()}),t(l.previousPromises(e))},300)})},l.resize=function(e){e&&"none"!==a.select(e).style("display")&&(e._redrawTimer&&clearTimeout(e._redrawTimer),e._redrawTimer=setTimeout(function(){if((e._fullLayout||{}).autosize){var t=e.changed;e.autoplay=!0,u.relayout(e,{autosize:!0}),e.changed=t}},100))},l.previousPromises=function(e){return(e._promises||[]).length?Promise.all(e._promises).then(function(){e._promises=[]}):void 0},l.addLinks=function(e){var t=e._fullLayout,n=t._paper.selectAll("text.js-plot-link-container").data([0]);n.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans",Arial,sans-serif',"font-size":"12px",fill:u.Color.defaultLine,"pointer-events":"all"}).each(function(){var e=a.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)});var r=n.node(),s={y:t._paper.attr("height")-9};r&&r.offsetParent&&r.getComputedTextLength()>=t.width-20?(s["text-anchor"]="start",s.x=5):(s["text-anchor"]="end",s.x=t._paper.attr("width")-7),n.attr(s);var o=n.select(".js-link-to-tool"),f=n.select(".js-link-spacer"),l=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&i(e,o),f.text(o.text()&&l.text()?" - ":"")},l.sendDataToCloud=function(e){e.emit("plotly_beforeexport");var t=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",n=a.select(e).append("div").attr("id","hiddenform").style("display","none"),r=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"}),i=r.append("input").attr({type:"text",name:"data"});return i.node().value=l.graphJson(e,!1,"keepdata"),r.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1},l.supplyDefaults=function(e){var t,n,r,i,a,f,c=e._fullLayout||{},h=e._fullLayout={},p=e.layout||{},d=e._fullData||[],v=e._fullData=[],m=e.data||[],g=e._modules=[];for(l.supplyLayoutGlobalDefaults(p,h),h._dataLength=m.length,t=0;t<m.length;t++)n=m[t],r=l.supplyDataDefaults(n,t,h),v.push(r),l.traceIs(r,"cartesian")?h._hasCartesian=!0:l.traceIs(r,"gl3d")?h._hasGL3D=!0:l.traceIs(r,"geo")?h._hasGeo=!0:l.traceIs(r,"pie")?h._hasPie=!0:l.traceIs(r,"gl2d")?h._hasGL2D=!0:"r"in r&&(h._hasPolar=!0),i=r._module,i&&-1===g.indexOf(i)&&g.push(i);for(t=0;t<g.length;t++)i=g[t],i.cleanData&&i.cleanData(v);if(d.length===m.length)for(t=0;t<v.length;t++)o(v[t],d[t]);for(l.supplyLayoutModuleDefaults(p,h,v),s(h,c),o(h,c),l.doAutoMargin(e),a=u.Axes.list(e),t=0;t<a.length;t++)f=a[t],f._td=e,f.setScale();if((e.calcdata||[]).length===v.length)for(t=0;t<v.length;t++)n=v[t],(e.calcdata[t][0]||{}).trace=n},l.supplyDataDefaults=function(e,t,n){function r(t,n){return u.Lib.coerce(e,s,l.attributes,t,n)}function i(t,n){return l.traceIs(s,t)?u.Lib.coerce(e,s,l.subplotsRegistry[t].attributes,n):void 0}var s={},o=u.Color.defaults[t%u.Color.defaults.length];s.index=t;var a,f,c=r("visible");return r("type"),r("uid"),i("gl3d","scene"),i("geo","geo"),(c||a)&&(f=l.getModule(s),s._module=f),c&&r("hoverinfo",1===n._dataLength?"x+y+z+text":void 0),f&&c&&f.supplyDefaults(e,s,o,n),c&&(r("name","trace "+t),l.traceIs(s,"noOpacity")||r("opacity"),i("cartesian","xaxis"),i("cartesian","yaxis"),i("gl2d","xaxis"),i("gl2d","yaxis"),l.traceIs(s,"showLegend")&&(r("showlegend"),r("legendgroup"))),s._input=e,s},l.supplyLayoutGlobalDefaults=function(e,t){function n(n,r){return u.Lib.coerce(e,t,l.layoutAttributes,n,r)}var r=u.Lib.coerceFont(n,"font");n("title"),u.Lib.coerceFont(n,"titlefont",{family:r.family,size:Math.round(1.4*r.size),color:r.color});var i=n("autosize",e.width&&e.height?!1:"initial");n("width"),n("height"),n("margin.l"),n("margin.r"),n("margin.t"),n("margin.b"),n("margin.pad"),n("margin.autoexpand"),"initial"!==i&&l.sanitizeMargins(t),n("paper_bgcolor"),n("separators"),n("hidesources"),n("smith"),n("_hasCartesian"),n("_hasGL3D"),n("_hasGeo"),n("_hasPie"),n("_hasGL2D")},l.supplyLayoutModuleDefaults=function(e,t,n){var r,i,s=["Axes","Annotations","Shapes","Fx","Bars","Boxes","Gl3dLayout","GeoLayout","Pie","Legend"];for(r=0;r<s.length;r++)i=s[r],u[i]&&u[i].supplyLayoutDefaults(e,t,n)},l.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&t._glcontainer.remove(),void 0!==t._geocontainer&&t._geocontainer.remove(),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.framework,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._modules,delete e._tester,delete e._testref,delete e._promises,delete e._redrawTimer,delete e._replotting,delete e.firstscatter,delete e.hmlumcount,delete e.hmpixcount,delete e.numboxes,delete e._hoverTimer,delete e._lastHoverTime},l.style=function(e){for(var t=e._modules.concat(u.ErrorBars),n=0;n<t.length;n++){var r=t[n];r.style&&r.style(e)}},l.sanitizeMargins=function(e){if(e&&e.margin){var t,n=e.width,r=e.height,i=e.margin,s=n-(i.l+i.r),o=r-(i.t+i.b);0>s&&(t=(n-1)/(i.l+i.r),i.l=Math.floor(t*i.l),i.r=Math.floor(t*i.r)),0>o&&(t=(r-1)/(i.t+i.b),i.t=Math.floor(t*i.t),i.b=Math.floor(t*i.b))}},l.autoMargin=function(e,t,n){var r=e._fullLayout;if(r._pushmargin||(r._pushmargin={}),r.margin.autoexpand!==!1){if(n){var i=n.pad||12;n.l+n.r>.5*r.width&&(n.l=n.r=0),n.b+n.t>.5*r.height&&(n.b=n.t=0),r._pushmargin[t]={l:{val:n.x,size:n.l+i},r:{val:n.x,size:n.r+i},b:{val:n.y,size:n.b+i},t:{val:n.y,size:n.t+i}}}else delete r._pushmargin[t];e._replotting||l.doAutoMargin(e)}},l.doAutoMargin=function(e){var t=e._fullLayout;t._size||(t._size={}),t._pushmargin||(t._pushmargin={});var n=t._size,r=JSON.stringify(n),i=Math.max(t.margin.l||0,0),s=Math.max(t.margin.r||0,0),o=Math.max(t.margin.t||0,0),a=Math.max(t.margin.b||0,0),l=t._pushmargin;return t.margin.autoexpand!==!1&&(l.base={l:{val:0,size:i},r:{val:1,size:s},t:{val:1,size:o},b:{val:0,size:a}},Object.keys(l).forEach(function(e){var n=l[e].l||{},r=l[e].b||{},u=n.val,c=n.size,h=r.val,p=r.size;Object.keys(l).forEach(function(e){if(f(c)&&l[e].r){var n=l[e].r.val,r=l[e].r.size;if(n>u){var d=(c*n+(r-t.width)*u)/(n-u),v=(r*(1-u)+(c-t.width)*(1-n))/(n-u);d>=0&&v>=0&&d+v>i+s&&(i=d,s=v)}}if(f(p)&&l[e].t){var m=l[e].t.val,g=l[e].t.size;if(m>h){var y=(p*m+(g-t.height)*h)/(m-h),b=(g*(1-h)+(p-t.height)*(1-m))/(m-h);y>=0&&b>=0&&y+b>a+o&&(a=y,o=b)}}})})),n.l=Math.round(i),n.r=Math.round(s),n.t=Math.round(o),n.b=Math.round(a),n.p=Math.round(t.margin.pad),n.w=Math.round(t.width)-n.l-n.r,n.h=Math.round(t.height)-n.t-n.b,e._replotting||"{}"===r||r===JSON.stringify(t._size)?void 0:u.plot(e)},l.graphJson=function(e,t,n,r,i){function s(e){if("function"==typeof e)return null;if(u.Lib.isPlainObject(e)){var t,r,i={};for(t in e)if("function"!=typeof e[t]&&-1===["_","["].indexOf(t.charAt(0))){if("keepdata"===n){if("src"===t.substr(t.length-3))continue}else if("keepstream"===n){if(r=e[t+"src"],"string"==typeof r&&r.indexOf(":")>0&&!u.Lib.isPlainObject(e.stream))continue}else if("keepall"!==n&&(r=e[t+"src"],"string"==typeof r&&r.indexOf(":")>0))continue;i[t]=s(e[t])}return i}return Array.isArray(e)?e.map(s):e&&e.getTime?u.Lib.ms2DateTime(e):e}(i&&t&&!e._fullData||i&&!t&&!e._fullLayout)&&l.supplyDefaults(e);var o=i?e._fullData:e.data,a=i?e._fullLayout:e.layout,f={data:(o||[]).map(function(e){var n=s(e);return t&&delete n.fit,n})};return t||(f.layout=s(a)),e.framework&&e.framework.isPolar&&(f=e.framework.getConfig()),"object"===r?f:JSON.stringify(f)}},{"../plotly":330,"./attributes":331,"./font_attributes":336,"./layout_attributes":363,d3:53,"fast-isnumeric":58}],365:[function(e,t,n){var r=e("../../traces/scatter/attributes"),i=r.marker;t.exports={r:r.r,t:r.t,marker:{color:i.color,size:i.size,symbol:i.symbol,opacity:i.opacity}}},{"../../traces/scatter/attributes":397}],366:[function(e,t,n){"use strict";function r(e,t){var n={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}};return s({},t,n)}var i=e("../cartesian/layout_attributes"),s=e("../../lib/extend").extendFlat,o=s({},i.domain,{});t.exports={radialaxis:r("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:o,orientation:{valType:"number"}}),angularaxis:r("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:o}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}}},{"../../lib/extend":310,"../cartesian/layout_attributes":335}],367:[function(e,t,n){var r=e("../../plotly"),i=e("d3"),s=t.exports={version:"0.2.2",manager:e("./micropolar_manager")},o=r.Lib.extendDeepAll;s.Axis=function(){function e(e){n=e||n;var l=f.data,h=f.layout;return("string"==typeof n||n.nodeName)&&(n=i.select(n)),n.datum(l).each(function(e,n){function f(e,t){return u(e)%360+h.orientation}var l=e.slice();c={data:s.util.cloneJson(l),layout:s.util.cloneJson(h)};var p=0;l.forEach(function(e,t){e.color||(e.color=h.defaultColorRange[p],p=(p+1)%h.defaultColorRange.length),e.strokeColor||(e.strokeColor="LinePlot"===e.geometry?e.color:i.rgb(e.color).darker().toString()),c.data[t].color=e.color,c.data[t].strokeColor=e.strokeColor,c.data[t].strokeDash=e.strokeDash,c.data[t].strokeSize=e.strokeSize});var d=l.filter(function(e,t){var n=e.visible;return"undefined"==typeof n||n===!0}),v=!1,m=d.map(function(e,t){return v=v||"undefined"!=typeof e.groupId,e});if(v){var g=i.nest().key(function(e,t){return"undefined"!=typeof e.groupId?e.groupId:"unstacked"}).entries(m),y=[],b=g.map(function(e,t){if("unstacked"===e.key)return e.values;var n=e.values[0].r.map(function(e,t){return 0});return e.values.forEach(function(e,t,r){e.yStack=[n],y.push(n),n=s.util.sumArrays(e.r,n)}),e.values});d=i.merge(b)}d.forEach(function(e,t){e.t=Array.isArray(e.t[0])?e.t:[e.t],e.r=Array.isArray(e.r[0])?e.r:[e.r]});var w=Math.min(h.width-h.margin.left-h.margin.right,h.height-h.margin.top-h.margin.bottom)/2;w=Math.max(10,w);var E,S=[h.margin.left+w,h.margin.top+w];if(v){var x=i.max(s.util.sumArrays(s.util.arrayLast(d).r[0],s.util.arrayLast(y)));E=[0,x]}else E=i.extent(s.util.flattenArray(d.map(function(e,t){return e.r})));h.radialAxis.domain!=s.DATAEXTENT&&(E[0]=0),r=i.scale.linear().domain(h.radialAxis.domain!=s.DATAEXTENT&&h.radialAxis.domain?h.radialAxis.domain:E).range([0,w]),c.layout.radialAxis.domain=r.domain();var T,N=s.util.flattenArray(d.map(function(e,t){return e.t})),C="string"==typeof N[0];C&&(N=s.util.deduplicate(N),T=N.slice(),N=i.range(N.length),d=d.map(function(e,t){var n=e;return e.t=[N],v&&(n.yStack=e.yStack),n}));var k=d.filter(function(e,t){return"LinePlot"===e.geometry||"DotPlot"===e.geometry}).length===d.length,L=null===h.needsEndSpacing?C||!k:h.needsEndSpacing,A=h.angularAxis.domain&&h.angularAxis.domain!=s.DATAEXTENT&&!C&&h.angularAxis.domain[0]>=0,O=A?h.angularAxis.domain:i.extent(N),M=Math.abs(N[1]-N[0]);k&&!C&&(M=0);var _=O.slice();L&&C&&(_[1]+=M);var D=h.angularAxis.ticksCount||4;D>8&&(D=D/(D/8)+D%8),h.angularAxis.ticksStep&&(D=(_[1]-_[0])/D);var P=h.angularAxis.ticksStep||(_[1]-_[0])/(D*(h.minorTicks+1));T&&(P=Math.max(Math.round(P),1)),_[2]||(_[2]=P);var H=i.range.apply(this,_);if(H=H.map(function(e,t){return parseFloat(e.toPrecision(12))}),u=i.scale.linear().domain(_.slice(0,2)).range("clockwise"===h.direction?[0,360]:[360,0]),c.layout.angularAxis.domain=u.domain(),c.layout.angularAxis.endPadding=L?M:0,t=i.select(this).select("svg.chart-root"),"undefined"==typeof t||t.empty()){var B="<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>",j=(new DOMParser).parseFromString(B,"application/xml"),F=this.appendChild(this.ownerDocument.importNode(j.documentElement,!0));t=i.select(F)}t.select(".guides-group").style({"pointer-events":"none"}),t.select(".angular.axis-group").style({"pointer-events":"none"}),t.select(".radial.axis-group").style({"pointer-events":"none"});var I,q=t.select(".chart-group"),R={fill:"none",stroke:h.tickColor},U={"font-size":h.font.size,"font-family":h.font.family,fill:h.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(e,t){return" "+e+" 0 "+h.font.outlineColor}).join(",")};if(h.showLegend){I=t.select(".legend-group").attr({transform:"translate("+[w,h.margin.top]+")"}).style({display:"block"});var z=d.map(function(e,t){var n=s.util.cloneJson(e);return n.symbol="DotPlot"===e.geometry?e.dotType||"circle":"LinePlot"!=e.geometry?"square":"line",n.visibleInLegend="undefined"==typeof e.visibleInLegend||e.visibleInLegend,n.color="LinePlot"===e.geometry?e.strokeColor:e.color,n});s.Legend().config({data:d.map(function(e,t){return e.name||"Element"+t}),legendConfig:o({},s.Legend.defaultConfig().legendConfig,{container:I,elements:z,reverseOrder:h.legend.reverseOrder})})();var W=I.node().getBBox();w=Math.min(h.width-W.width-h.margin.left-h.margin.right,h.height-h.margin.top-h.margin.bottom)/2,w=Math.max(10,w),S=[h.margin.left+w,h.margin.top+w],r.range([0,w]),c.layout.radialAxis.domain=r.domain(),I.attr("transform","translate("+[S[0]+w,S[1]-w]+")")}else I=t.select(".legend-group").style({display:"none"});t.attr({width:h.width,height:h.height}).style({opacity:h.opacity}),q.attr("transform","translate("+S+")").style({cursor:"crosshair"});var X=[(h.width-(h.margin.left+h.margin.right+2*w+(W?W.width:0)))/2,(h.height-(h.margin.top+h.margin.bottom+2*w))/2];if(X[0]=Math.max(0,X[0]),X[1]=Math.max(0,X[1]),t.select(".outer-group").attr("transform","translate("+X+")"),h.title){var V=t.select("g.title-group text").style(U).text(h.title),$=V.node().getBBox();V.attr({x:S[0]-$.width/2,y:S[1]-w-20})}var J=t.select(".radial.axis-group");if(h.radialAxis.gridLinesVisible){var K=J.selectAll("circle.grid-circle").data(r.ticks(5));K.enter().append("circle").attr({"class":"grid-circle"}).style(R),K.attr("r",r),K.exit().remove()}J.select("circle.outside-circle").attr({r:w}).style(R);var Q=t.select("circle.background-circle").attr({r:w}).style({fill:h.backgroundColor,stroke:h.stroke});if(h.radialAxis.visible){var G=i.svg.axis().scale(r).ticks(5).tickSize(5);J.call(G).attr({transform:"rotate("+h.radialAxis.orientation+")"}),J.selectAll(".domain").style(R),J.selectAll("g>text").text(function(e,t){return this.textContent+h.radialAxis.ticksSuffix}).style(U).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(e,t){return"horizontal"===h.radialAxis.tickOrientation?"rotate("+ -h.radialAxis.orientation+") translate("+[0,U["font-size"]]+")":"translate("+[0,U["font-size"]]+")"}}),J.selectAll("g>line").style({stroke:"black"})}var Y=t.select(".angular.axis-group").selectAll("g.angular-tick").data(H),Z=Y.enter().append("g").classed("angular-tick",!0);Y.attr({transform:function(e,t){return"rotate("+f(e,t)+")"}}).style({display:h.angularAxis.visible?"block":"none"}),Y.exit().remove(),Z.append("line").classed("grid-line",!0).classed("major",function(e,t){return t%(h.minorTicks+1)==0}).classed("minor",function(e,t){return t%(h.minorTicks+1)!=0}).style(R),Z.selectAll(".minor").style({stroke:h.minorTickColor}),Y.select("line.grid-line").attr({x1:h.tickLength?w-h.tickLength:0,x2:w}).style({display:h.angularAxis.gridLinesVisible?"block":"none"}),Z.append("text").classed("axis-text",!0).style(U);var et=Y.select("text.axis-text").attr({x:w+h.labelOffset,dy:".35em",transform:function(e,t){var n=f(e,t),r=w+h.labelOffset,i=h.angularAxis.tickOrientation;return"horizontal"==i?"rotate("+ -n+" "+r+" 0)":"radial"==i?270>n&&n>90?"rotate(180 "+r+" 0)":null:"rotate("+(180>=n&&n>0?-90:90)+" "+r+" 0)"}}).style({"text-anchor":"middle",display:h.angularAxis.labelsVisible?"block":"none"}).text(function(e,t){return t%(h.minorTicks+1)!=0?"":T?T[e]+h.angularAxis.ticksSuffix:e+h.angularAxis.ticksSuffix}).style(U);h.angularAxis.rewriteTicks&&et.text(function(e,t){return t%(h.minorTicks+1)!=0?"":h.angularAxis.rewriteTicks(this.textContent,t)});var tt=i.max(q.selectAll(".angular-tick text")[0].map(function(e,t){return e.getCTM().e+e.getBBox().width}));I.attr({transform:"translate("+[w+tt,h.margin.top]+")"});var nt=t.select("g.geometry-group").selectAll("g").size()>0,rt=t.select("g.geometry-group").selectAll("g.geometry").data(d);if(rt.enter().append("g").attr({"class":function(e,t){return"geometry geometry"+t}}),rt.exit().remove(),d[0]||nt){var it=[];d.forEach(function(e,t){var n={};n.radialScale=r,n.angularScale=u,n.container=rt.filter(function(e,n){return n==t}),n.geometry=e.geometry,n.orientation=h.orientation,n.direction=h.direction,n.index=t,it.push({data:e,geometryConfig:n})});var st=i.nest().key(function(e,t){return"undefined"!=typeof e.data.groupId||"unstacked"}).entries(it),ot=[];st.forEach(function(e,t){"unstacked"===e.key?ot=ot.concat(e.values.map(function(e,t){return[e]})):ot.push(e.values)}),ot.forEach(function(e,t){var n;n=Array.isArray(e)?e[0].geometryConfig.geometry:e.geometryConfig.geometry;var r=e.map(function(e,t){return o(s[n].defaultConfig(),e)});s[n]().config(r)()})}var ut,at,ft=t.select(".guides-group"),lt=t.select(".tooltips-group"),ct=s.tooltipPanel().config({container:lt,fontSize:8})(),ht=s.tooltipPanel().config({container:lt,fontSize:8})(),pt=s.tooltipPanel().config({container:lt,hasTick:!0})();if(!C){var dt=ft.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});q.on("mousemove.angular-guide",function(e,t){var n=s.util.getMousePos(Q).angle;dt.attr({x2:-w,transform:"rotate("+n+")"}).style({opacity:.5});var r=(n+180+360-h.orientation)%360;ut=u.invert(r);var i=s.util.convertToCartesian(w+12,n+180);ct.text(s.util.round(ut)).move([i[0]+S[0],i[1]+S[1]])}).on("mouseout.angular-guide",function(e,t){ft.select("line").style({opacity:0})})}var vt=ft.select("circle").style({stroke:"grey",fill:"none"});q.on("mousemove.radial-guide",function(e,t){var n=s.util.getMousePos(Q).radius;vt.attr({r:n}).style({opacity:.5}),at=r.invert(s.util.getMousePos(Q).radius);var i=s.util.convertToCartesian(n,h.radialAxis.orientation);ht.text(s.util.round(at)).move([i[0]+S[0],i[1]+S[1]])}).on("mouseout.radial-guide",function(e,t){vt.style({opacity:0}),pt.hide(),ct.hide(),ht.hide()}),t.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,n){var r=i.select(this),o=r.style("fill"),u="black",f=r.style("opacity")||1;if(r.attr({"data-opacity":f}),"none"!=o){r.attr({"data-fill":o}),u=i.hsl(o).darker().toString(),r.style({fill:u,opacity:1});var l={t:s.util.round(e[0]),r:s.util.round(e[1])};C&&(l.t=T[e[0]]);var c="t: "+l.t+", r: "+l.r,h=this.getBoundingClientRect(),p=t.node().getBoundingClientRect(),d=[h.left+h.width/2-X[0]-p.left,h.top+h.height/2-X[1]-p.top];pt.config({color:u}).text(c),pt.move(d)}else o=r.style("stroke"),r.attr({"data-stroke":o}),u=i.hsl(o).darker().toString(),r.style({stroke:u,opacity:1})}).on("mousemove.tooltip",function(e,t){return 0!=i.event.which?!1:void (i.select(this).attr("data-fill")&&pt.show())}).on("mouseout.tooltip",function(e,t){pt.hide();var n=i.select(this),r=n.attr("data-fill");r?n.style({fill:r,opacity:n.attr("data-opacity")}):n.style({stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})}),p}var t,n,r,u,f={data:[],layout:{}},l={},c={},h=i.dispatch("hover"),p={};return p.render=function(t){return e(t),this},p.config=function(e){if(!arguments.length)return f;var t=s.util.cloneJson(e);return t.data.forEach(function(e,t){f.data[t]||(f.data[t]={}),o(f.data[t],s.Axis.defaultConfig().data[0]),o(f.data[t],e)}),o(f.layout,s.Axis.defaultConfig().layout),o(f.layout,t.layout),this},p.getLiveConfig=function(){return c},p.getinputConfig=function(){return l},p.radialScale=function(e){return r},p.angularScale=function(e){return u},p.svg=function(){return t},i.rebind(p,h,"on"),p},s.Axis.defaultConfig=function(e,t){var n={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:i.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}};return n},s.util={},s.DATAEXTENT="dataExtent",s.AREA="AreaChart",s.LINE="LinePlot",s.DOT="DotPlot",s.BAR="BarChart",s.util._override=function(e,t){for(var n in e)n in t&&(t[n]=e[n])},s.util._extend=function(e,t){for(var n in e)t[n]=e[n]},s.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},s.util.dataFromEquation2=function(e,t){var n=t||6,r=i.range(0,360+n,n).map(function(t,n){var r=t*Math.PI/180,i=e(r);return[t,i]});return r},s.util.dataFromEquation=function(e,t,n){var r=t||6,s=[],o=[];i.range(0,360+r,r).forEach(function(t,n){var r=t*Math.PI/180,i=e(r);s.push(t),o.push(i)});var u={t:s,r:o};return n&&(u.name=n),u},s.util.ensureArray=function(e,t){if("undefined"==typeof e)return null;var n=[].concat(e);return i.range(t).map(function(e,t){return n[t]||n[0]})},s.util.fillArrays=function(e,t,n){return t.forEach(function(t,r){e[t]=s.util.ensureArray(e[t],n)}),e},s.util.cloneJson=function(e){return JSON.parse(JSON.stringify(e))},s.util.validateKeys=function(e,t){"string"==typeof t&&(t=t.split("."));var n=t.shift();return e[n]&&(!t.length||objHasKeys(e[n],t))},s.util.sumArrays=function(e,t){return i.zip(e,t).map(function(e,t){return i.sum(e)})},s.util.arrayLast=function(e){return e[e.length-1]},s.util.arrayEqual=function(e,t){for(var n=Math.max(e.length,t.length,1);n-->=0&&e[n]===t[n];);return-2===n},s.util.flattenArray=function(e){for(var t=[];!s.util.arrayEqual(t,e);)t=e,e=[].concat.apply([],e);return e},s.util.deduplicate=function(e){return e.filter(function(e,t,n){return n.indexOf(e)==t})},s.util.convertToCartesian=function(e,t){var n=t*Math.PI/180,r=e*Math.cos(n),i=e*Math.sin(n);return[r,i]},s.util.round=function(e,t){var n=t||2,r=Math.pow(10,n);return Math.round(e*r)/r},s.util.getMousePos=function(e){var t=i.mouse(e.node()),n=t[0],r=t[1],s={};return s.x=n,s.y=r,s.pos=t,s.angle=180*(Math.atan2(r,n)+Math.PI)/Math.PI,s.radius=Math.sqrt(n*n+r*r),s},s.util.duplicatesCount=function(e){for(var t,n={},r={},i=0,s=e.length;s>i;i++)t=e[i],t in n?(n[t]++,r[t]=n[t]):n[t]=1;return r},s.util.duplicates=function(e){return Object.keys(s.util.duplicatesCount(e))},s.util.translator=function(e,t,n,r){if(r){var i=n.slice();n=t,t=i}var s=t.reduce(function(e,t){return"undefined"!=typeof e?e[t]:void 0},e);"undefined"!=typeof s&&(t.reduce(function(e,n,r){return"undefined"!=typeof e?(r===t.length-1&&delete e[n],e[n]):void 0},e),n.reduce(function(e,t,r){return"undefined"==typeof e[t]&&(e[t]={}),r===n.length-1&&(e[t]=s),e[t]},e))},s.PolyChart=function(){function e(){var e=n[0].geometryConfig,t=e.container;"string"==typeof t&&(t=i.select(t)),t.datum(n).each(function(t,n){function r(t,n){var r=e.radialScale(t[1]),i=(e.angularScale(t[0])+e.orientation)*Math.PI/180;return{r:r,t:i}}function s(e){var t=e.r*Math.cos(e.t),n=e.r*Math.sin(e.t);return{x:t,y:n}}var o=!!t[0].data.yStack,a=t.map(function(e,t){return o?i.zip(e.data.t[0],e.data.r[0],e.data.yStack[0]):i.zip(e.data.t[0],e.data.r[0])}),f=e.angularScale,l=e.radialScale.domain()[0],c={};c.bar=function(n,r,s){var o=t[s].data,u=e.radialScale(n[1])-e.radialScale(0),a=e.radialScale(n[2]||0),l=o.barWidth;i.select(this).attr({"class":"mark bar",d:"M"+[[u+a,-l/2],[u+a,l/2],[a,l/2],[a,-l/2]].join("L")+"Z",transform:function(t,n){return"rotate("+(e.orientation+f(t[0]))+")"}})},c.dot=function(e,n,o){var u=e[2]?[e[0],e[1]+e[2]]:e,a=i.svg.symbol().size(t[o].data.dotSize).type(t[o].data.dotType)(e,n);i.select(this).attr({"class":"mark dot",d:a,transform:function(e,t){var n=s(r(u));return"translate("+[n.x,n.y]+")"}})};var h=i.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});c.line=function(n,r,s){var o=n[2]?a[s].map(function(e,t){return[e[0],e[1]+e[2]]}):a[s];if(i.select(this).each(c.dot).style({opacity:function(e,n){return+t[s].data.dotVisible},fill:m.stroke(n,r,s)}).attr({"class":"mark dot"}),!(r>0)){var u=i.select(this.parentNode).selectAll("path.line").data([0]);u.enter().insert("path"),u.attr({"class":"line",d:h(o),transform:function(t,n){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(e,t){return m.fill(n,r,s)},"fill-opacity":0,stroke:function(e,t){return m.stroke(n,r,s)},"stroke-width":function(e,t){return m["stroke-width"](n,r,s)},"stroke-dasharray":function(e,t){return m["stroke-dasharray"](n,r,s)},opacity:function(e,t){return m.opacity(n,r,s)},display:function(e,t){return m.display(n,r,s)}})}};var p=e.angularScale.range(),d=Math.abs(p[1]-p[0])/a[0].length*Math.PI/180,v=i.svg.arc().startAngle(function(e){return-d/2}).endAngle(function(e){return d/2}).innerRadius(function(t){return e.radialScale(l+(t[2]||0))}).outerRadius(function(t){return e.radialScale(l+(t[2]||0))+e.radialScale(t[1])});c.arc=function(t,n,r){i.select(this).attr({"class":"mark arc",d:v,transform:function(t,n){return"rotate("+(e.orientation+f(t[0])+90)+")"}})};var m={fill:function(e,n,r){return t[r].data.color},stroke:function(e,n,r){return t[r].data.strokeColor},"stroke-width":function(e,n,r){return t[r].data.strokeSize+"px"},"stroke-dasharray":function(e,n,r){return u[t[r].data.strokeDash]},opacity:function(e,n,r){return t[r].data.opacity},display:function(e,n,r){return"undefined"==typeof t[r].data.visible||t[r].data.visible?"block":"none"}},g=i.select(this).selectAll("g.layer").data(a);g.enter().append("g").attr({"class":"layer"});var y=g.selectAll("path.mark").data(function(e,t){return e});y.enter().append("path").attr({"class":"mark"}),y.style(m).each(c[e.geometryType]),y.exit().remove(),g.exit().remove()})}var t,n=[s.PolyChart.defaultConfig()],r=i.dispatch("hover"),u={solid:"none",dash:[5,2],dot:[2,5]};return e.config=function(e){return arguments.length?(e.forEach(function(e,t){n[t]||(n[t]={}),o(n[t],s.PolyChart.defaultConfig()),o(n[t],e)}),this):n},e.getColorScale=function(){return t},i.rebind(e,r,"on"),e},s.PolyChart.defaultConfig=function(){var e={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:i.scale.category20()}};return e},s.BarChart=function(){return s.PolyChart()},s.BarChart.defaultConfig=function(){var e={geometryConfig:{geometryType:"bar"}};return e},s.AreaChart=function(){return s.PolyChart()},s.AreaChart.defaultConfig=function(){var e={geometryConfig:{geometryType:"arc"}};return e},s.DotPlot=function(){return s.PolyChart()},s.DotPlot.defaultConfig=function(){var e={geometryConfig:{geometryType:"dot",dotType:"circle"}};return e},s.LinePlot=function(){return s.PolyChart()},s.LinePlot.defaultConfig=function(){var e={geometryConfig:{geometryType:"line"}};return e},s.Legend=function(){function e(){var n=t.legendConfig,r=t.data.map(function(e,t){return[].concat(e).map(function(e,r){var i=o({},n.elements[t]);return i.name=e,i.color=[].concat(n.elements[t].color)[r],i})}),s=i.merge(r);s=s.filter(function(e,t){return n.elements[t]&&(n.elements[t].visibleInLegend||"undefined"==typeof n.elements[t].visibleInLegend)}),n.reverseOrder&&(s=s.reverse());var u=n.container;("string"==typeof u||u.nodeName)&&(u=i.select(u));var a=s.map(function(e,t){return e.color}),f=n.fontSize,l=null==n.isContinuous?"number"==typeof s[0]:n.isContinuous,c=l?n.height:f*s.length,h=u.classed("legend-group",!0),p=h.selectAll("svg").data([0]),d=p.enter().append("svg").attr({width:300,height:c+f,xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});d.append("g").classed("legend-axis",!0),d.append("g").classed("legend-marks",!0);var v=i.range(s.length),m=i.scale[l?"linear":"ordinal"]().domain(v).range(a),g=i.scale[l?"linear":"ordinal"]().domain(v)[l?"range":"rangePoints"]([0,c]),y=function(e,t){var n=3*t;return"line"===e?"M"+[[-t/2,-t/12],[t/2,-t/12],[t/2,t/12],[-t/2,t/12]]+"Z":-1!=i.svg.symbolTypes.indexOf(e)?i.svg.symbol().type(e).size(n)():i.svg.symbol().type("square").size(n)()};if(l){var b=p.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(a);b.enter().append("stop"),b.attr({offset:function(e,t){return t/(a.length-1)*100+"%"}}).style({"stop-color":function(e,t){return e}}),p.append("rect").classed("legend-mark",!0).attr({height:n.height,width:n.colorBandWidth,fill:"url(#grad1)"})}else{var w=p.select(".legend-marks").selectAll("path.legend-mark").data(s);w.enter().append("path").classed("legend-mark",!0),w.attr({transform:function(e,t){return"translate("+[f/2,g(t)+f/2]+")"},d:function(e,t){var n=e.symbol;return y(n,f)},fill:function(e,t){return m(t)}}),w.exit().remove()}var E=i.svg.axis().scale(g).orient("right"),S=p.select("g.legend-axis").attr({transform:"translate("+[l?n.colorBandWidth:f,f/2]+")"}).call(E);return S.selectAll(".domain").style({fill:"none",stroke:"none"}),S.selectAll("line").style({fill:"none",stroke:l?n.textColor:"none"}),S.selectAll("text").style({fill:n.textColor,"font-size":n.fontSize}).text(function(e,t){return s[t].name}),e}var t=s.Legend.defaultConfig(),n=i.dispatch("hover");return e.config=function(e){return arguments.length?(o(t,e),this):t},i.rebind(e,n,"on"),e},s.Legend.defaultConfig=function(e,t){var n={data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}};return n},s.tooltipPanel=function(){var e,t,n,r={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},u="tooltip-"+s.tooltipPanel.uid++,f=10,l=function(){e=r.container.selectAll("g."+u).data([0]);var i=e.enter().append("g").classed(u,!0).style({"pointer-events":"none",display:"none"});return n=i.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),t=i.append("text").attr({dx:r.padding+f,dy:.3*+r.fontSize}),l};return l.text=function(s){var o=i.hsl(r.color).l,u=o>=.5?"#aaa":"white",a=o>=.5?"black":"white",c=s||"";t.style({fill:a,"font-size":r.fontSize+"px"}).text(c);var h=r.padding,p=t.node().getBBox(),d={fill:r.color,stroke:u,"stroke-width":"2px"},v=p.width+2*h+f,m=p.height+2*h;return n.attr({d:"M"+[[f,-m/2],[f,-m/4],[r.hasTick?0:f,0],[f,m/4],[f,m/2],[v,m/2],[v,-m/2]].join("L")+"Z"}).style(d),e.attr({transform:"translate("+[f,-m/2+2*h]+")"}),e.style({display:"block"}),l},l.move=function(t){return e?(e.attr({transform:"translate("+[t[0],t[1]]+")"}).style({display:"block"}),l):void 0},l.hide=function(){return e?(e.style({display:"none"}),l):void 0},l.show=function(){return e?(e.style({display:"block"}),l):void 0},l.config=function(e){return o(r,e),l},l},s.tooltipPanel.uid=1,s.adapter={},s.adapter.plotly=function(){var e={};return e.convert=function(e,t){var n={};if(e.data&&(n.data=e.data.map(function(e,n){var r=o({},e),i=[[r,["marker","color"],["color"]],[r,["marker","opacity"],["opacity"]],[r,["marker","line","color"],["strokeColor"]],[r,["marker","line","dash"],["strokeDash"]],[r,["marker","line","width"],["strokeSize"]],[r,["marker","symbol"],["dotType"]],[r,["marker","size"],["dotSize"]],[r,["marker","barWidth"],["barWidth"]],[r,["line","interpolation"],["lineInterpolation"]],[r,["showlegend"],["visibleInLegend"]]];return i.forEach(function(e,n){s.util.translator.apply(null,e.concat(t))}),t||delete r.marker,t&&delete r.groupId,t?("LinePlot"===r.geometry?(r.type="scatter",r.dotVisible===!0?(delete r.dotVisible,r.mode="lines+markers"):r.mode="lines"):"DotPlot"===r.geometry?(r.type="scatter",r.mode="markers"):"AreaChart"===r.geometry?r.type="area":"BarChart"===r.geometry&&(r.type="bar"),delete r.geometry):("scatter"===r.type?"lines"===r.mode?r.geometry="LinePlot":"markers"===r.mode?r.geometry="DotPlot":"lines+markers"===r.mode&&(r.geometry="LinePlot",r.dotVisible=!0):"area"===r.type?r.geometry="AreaChart":"bar"===r.type&&(r.geometry="BarChart"),delete r.mode,delete r.type),r}),!t&&e.layout&&"stack"===e.layout.barmode)){var r=s.util.duplicates(n.data.map(function(e,t){return e.geometry}));n.data.forEach(function(e,t){var i=r.indexOf(e.geometry);-1!=i&&(n.data[t].groupId=i)})}if(e.layout){var u=o({},e.layout),f=[[u,["plot_bgcolor"],["backgroundColor"]],[u,["showlegend"],["showLegend"]],[u,["radialaxis"],["radialAxis"]],[u,["angularaxis"],["angularAxis"]],[u.angularaxis,["showline"],["gridLinesVisible"]],[u.angularaxis,["showticklabels"],["labelsVisible"]],[u.angularaxis,["nticks"],["ticksCount"]],[u.angularaxis,["tickorientation"],["tickOrientation"]],[u.angularaxis,["ticksuffix"],["ticksSuffix"]],[u.angularaxis,["range"],["domain"]],[u.angularaxis,["endpadding"],["endPadding"]],[u.radialaxis,["showline"],["gridLinesVisible"]],[u.radialaxis,["tickorientation"],["tickOrientation"]],[u.radialaxis,["ticksuffix"],["ticksSuffix"]],[u.radialaxis,["range"],["domain"]],[u.angularAxis,["showline"],["gridLinesVisible"]],[u.angularAxis,["showticklabels"],["labelsVisible"]],[u.angularAxis,["nticks"],["ticksCount"]],[u.angularAxis,["tickorientation"],["tickOrientation"]],[u.angularAxis,["ticksuffix"],["ticksSuffix"]],[u.angularAxis,["range"],["domain"]],[u.angularAxis,["endpadding"],["endPadding"]],[u.radialAxis,["showline"],["gridLinesVisible"]],[u.radialAxis,["tickorientation"],["tickOrientation"]],[u.radialAxis,["ticksuffix"],["ticksSuffix"]],[u.radialAxis,["range"],["domain"]],[u.font,["outlinecolor"],["outlineColor"]],[u.legend,["traceorder"],["reverseOrder"]],[u,["labeloffset"],["labelOffset"]],[u,["defaultcolorrange"],["defaultColorRange"]]];if(f.forEach(function(e,n){s.util.translator.apply(null,e.concat(t))}),t?("undefined"!=typeof u.tickLength&&(u.angularaxis.ticklen=u.tickLength,delete u.tickLength),u.tickColor&&(u.angularaxis.tickcolor=u.tickColor,delete u.tickColor)):(u.angularAxis&&"undefined"!=typeof u.angularAxis.ticklen&&(u.tickLength=u.angularAxis.ticklen),u.angularAxis&&"undefined"!=typeof u.angularAxis.tickcolor&&(u.tickColor=u.angularAxis.tickcolor)),u.legend&&"boolean"!=typeof u.legend.reverseOrder&&(u.legend.reverseOrder="normal"!=u.legend.reverseOrder),u.legend&&"boolean"==typeof u.legend.traceorder&&(u.legend.traceorder=u.legend.traceorder?"reversed":"normal",delete u.legend.reverseOrder),u.margin&&"undefined"!=typeof u.margin.t){var l=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],h={};i.entries(u.margin).forEach(function(e,t){h[c[l.indexOf(e.key)]]=e.value}),u.margin=h}t&&(delete u.needsEndSpacing,delete u.minorTickColor,delete u.minorTicks,delete u.angularaxis.ticksCount,delete u.angularaxis.ticksCount,delete u.angularaxis.ticksStep,delete u.angularaxis.rewriteTicks,delete u.angularaxis.nticks,delete u.radialaxis.ticksCount,delete u.radialaxis.ticksCount,delete u.radialaxis.ticksStep,delete u.radialaxis.rewriteTicks,delete u.radialaxis.nticks),n.layout=u}return n},e}},{"../../plotly":330,"./micropolar_manager":368,d3:53}],368:[function(e,t,n){"use strict";var r=e("../../plotly"),i=e("d3"),s=e("./undo_manager"),o=t.exports={},u=r.Lib.extendDeepAll;o.framework=function(e){function t(t,s){return s&&(h=s),i.select(i.select(h).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),n=n?u(n,t):t,l||(l=r.micropolar.Axis()),c=r.micropolar.adapter.plotly().convert(n),l.config(c).render(h),e.data=n.data,e.layout=n.layout,o.fillLayout(e),n}var n,f,l,c,h,p=new s;return t.isPolar=!0,t.svg=function(){return l.svg()},t.getConfig=function(){return n},t.getLiveConfig=function(){return r.micropolar.adapter.plotly().convert(l.getLiveConfig(),!0)},t.getLiveScales=function(){return{t:l.angularScale(),r:l.radialScale()}},t.setUndoPoint=function(){var e=this,t=r.micropolar.util.cloneJson(n);!function(t,n){p.add({undo:function(){n&&e(n)},redo:function(){e(t)}})}(t,f),f=r.micropolar.util.cloneJson(t)},t.undo=function(){p.undo()},t.redo=function(){p.redo()},t},o.fillLayout=function(e){var t=i.select(e).selectAll(".plot-container"),n=t.selectAll(".svg-container"),s=e.framework&&e.framework.svg&&e.framework.svg(),o={width:800,height:600,paper_bgcolor:r.Color.background,_container:t,_paperdiv:n,_paper:s};e._fullLayout=u(o,e.layout)}},{"../../plotly":330,"./undo_manager":369,d3:53}],369:[function(e,t,n){"use strict";t.exports=function(){function e(e,t){return e?(i=!0,e[t](),i=!1,this):this}var t,n=[],r=-1,i=!1;return{add:function(e){return i?this:(n.splice(r+1,n.length-r),n.push(e),r=n.length-1,this)},setCallback:function(e){t=e},undo:function(){var i=n[r];return i?(e(i,"undo"),r-=1,t&&t(i.undo),this):this},redo:function(){var i=n[r+1];return i?(e(i,"redo"),r+=1,t&&t(i.redo),this):this},clear:function(){n=[],r=-1},hasUndo:function(){return-1!==r},hasRedo:function(){return r<n.length-1},getCommands:function(){return n},getPreviousCommand:function(){return n[r-1]},getIndex:function(){return r}}}},{}],370:[function(e,t,n){"use strict";function r(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function i(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}var s=e("../plotly"),o=s.Lib.extendFlat,u=s.Lib.extendDeep;t.exports=function(e,t){e.framework&&e.framework.isPolar&&(e=e.framework.getConfig());var n,f=e.data,l=e.layout,c=u([],f),h=u({},l,r(t.tileClass));if(t.width&&(h.width=t.width),t.height&&(h.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){h.annotations=[];var p=Object.keys(h);for(n=0;n<p.length;n++)i(p[n])&&(h[p[n]].title="");for(n=0;n<c.length;n++){var d=c[n];d.showscale=!1,d.marker&&(d.marker.showscale=!1),"pie"===d.type&&(d.textposition="none")}}if(Array.isArray(t.annotations))for(n=0;n<t.annotations.length;n++)h.annotations.push(t.annotations[n]);var v=s.Plots.getSubplotIds(h,"gl3d");if(v.length){var m={};for("thumbnail"===t.tileClass&&(m={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<v.length;n++){var g=v[n];o(h[g].xaxis,m),o(h[g].yaxis,m),o(h[g].zaxis,m),h[g]._scene=null}}var y=document.createElement("div");t.tileClass&&(y.className=t.tileClass);var b={td:y,layout:h,data:c,config:{staticPlot:void 0===t.staticPlot?!0:t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1}};return"transparent"!==t.setBackground&&(b.config.setBackground=t.setBackground||"opaque"),b.td.defaultLayout=r(t.tileClass),b}},{"../plotly":330}],371:[function(e,t,n){"use strict";function r(e){return e._hasGL3D||e._hasGL2D?500:0}function i(e){return function(){var t=e._fullLayout;t._hasGL3D||t._hasGL2D||e.data&&e.data[0]&&e.data[0].r||(s.Annotations.drawAll(e),s.Legend.draw(e,t.showlegend),(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()}))}}var s=e("../plotly"),o={getDelay:r,getRedrawFunc:i,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage")};t.exports=o},{"../plotly":330,"./cloneplot":370,"./svgtoimg":372,"./toimage":373,"./tosvg":374}],372:[function(e,t,n){"use strict";function r(e){var t=e.emitter?e.emitter:new i,n=window.Image,r=window.Blob,s=e.svg,o=e.format||"png",u=e.canvas,a=u.getContext("2d"),f=new n,l=window.URL||window.webkitURL,c=new r([s],{type:"image/svg+xml;charset=utf-8"}),h=l.createObjectURL(c);return u.height=e.height||150,u.width=e.width||300,f.onload=function(){var e;switch(l.revokeObjectURL(h),a.drawImage(f,0,0),o){case"jpeg":e=u.toDataURL("image/jpeg");break;case"png":e=u.toDataURL("image/png");break;case"webp":e=u.toDataURL("image/webp");break;case"svg":e=s;break;default:return t.emit("error","Image format is not jpeg, png or svg")}t.emit("success",e)},f.onerror=function(e){return l.revokeObjectURL(h),t.emit("error",e)},f.src=h,t}var i=e("events").EventEmitter;t.exports=r},{events:57}],373:[function(e,t,n){"use strict";function r(e,t){function n(){var e=r.getDelay(f._fullLayout);setTimeout(function(){var e=s.Snapshot.toSVG(f),n=window.document.createElement("div"),r=window.document.createElement("canvas");n.appendChild(r),n.id=s.Lib.randstr(),r.id=s.Lib.randstr(),o=s.Snapshot.svgToImg({format:t.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:r,emitter:o,svg:e}),o.clean=function(){f&&f.remove()}},e)}var r=s.Snapshot,o=new i,u=r.clone(e,{format:"png"}),f=u.td;f.style.position="absolute",f.style.left="-5000px",document.body.appendChild(f);var l=r.getRedrawFunc(f);return s.plot(f,u.data,u.layout,u.config).then(l).then(n).catch(function(e){o.emit("error",e)}),o}var i=e("events").EventEmitter,s=e("../plotly");t.exports=r},{"../plotly":330,events:57}],374:[function(e,t,n){"use strict";function r(e,t,n){var r=t.toImage("png");e._glimages.append("svg:image").attr({xmlns:"http://www.w3.org/2000/svg","xlink:xlink:href":r,x:n.x,y:n.y,width:n.width,height:n.height,preserveAspectRatio:"none"}),t.destroy()}var i=e("../plotly"),s=e("d3");t.exports=function(e,t){var n,o,u=e._fullLayout,f=u._paper,l=u._size;f.insert("rect",":first-child").call(i.Drawing.setRect,0,0,u.width,u.height).call(i.Color.fill,u.paper_bgcolor);var c,h=i.Plots.getSubplotIds(u,"gl3d");for(o=0;o<h.length;o++)c=u[h[o]],n=c.domain,r(u,c._scene,{x:l.l+l.w*n.x[0],y:l.t+l.h*(1-n.y[1]),width:l.w*(n.x[1]-n.x[0]),height:l.h*(n.y[1]-n.y[0])});var p,d=i.Plots.getSubplotIds(u,"gl2d");for(o=0;o<d.length;o++)p=u._plots[d[o]],r(u,p._scene2d,{x:l.l,y:l.t,width:l.w,height:l.h});var v,m,g=i.Plots.getSubplotIds(u,"geo");for(o=0;o<g.length;o++)v=u[g[o]],n=v.domain,m=v._geo.framework,m.attr("style",null),m.attr({x:l.l+l.w*n.x[0]+v._marginX,y:l.t+l.h*(1-n.y[1])+v._marginY,width:v._width,height:v._height}),u._geoimages.node().appendChild(m.node());if(u._toppaper){var y,b=u._toppaper.node().childNodes;for(o=0;o<b.length;o++)y=b[o],y.childNodes.length&&f.node().appendChild(y)}f.node().style.background="",f.selectAll("text").attr({"data-unformatted":null}).each(function(){var e=s.select(this);if("hidden"===e.style("visibility"))return void e.remove();var t=e.style("font-family");t&&-1!==t.indexOf('"')&&e.style("font-family",t.replace(/"/g,'"'))}),("pdf"===t||"eps"===t)&&f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),f.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),f.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");var w=(new window.XMLSerializer).serializeToString(f.node());return w=i.util.html_entity_decode(w),w=i.util.xml_entity_encode(w)}},{"../plotly":330,d3:53}],375:[function(e,t,n){var r=e("../scatter/attributes"),i=r.marker,s=i.line;t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,orientation:{valType:"enumerated",values:["v","h"]},marker:{color:i.color,colorscale:i.colorscale,cauto:i.cauto,cmax:i.cmax,cmin:i.cmin,autocolorscale:i.autocolorscale,reversescale:i.reversescale,showscale:i.showscale,line:{color:s.color,colorscale:s.colorscale,cauto:s.cauto,cmax:s.cmax,cmin:s.cmin,width:s.width,autocolorscale:s.autocolorscale,reversescale:s.reversescale}},r:r.r,t:r.t,_composedModules:{histogram:"Histogram"},_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"},_deprecated:{bardir:{valType:"enumerated",values:["v","h"]}}}},{"../scatter/attributes":397}],376:[function(e,t,n){"use strict";var r=e("../../plotly"),i=e("d3"),s=e("fast-isnumeric"),o=t.exports={};r.Plots.register(o,"bar",["cartesian","bar","oriented","markerColorscale","errorBarsOK","showLegend"],{}),o.attributes=e("./attributes"),o.layoutAttributes=e("./layout_attributes"),o.supplyDefaults=function(e,t,n,i){function s(n,i){return r.Lib.coerce(e,t,o.attributes,n,i)}if("histogram"===t.type){if(r.Histogram.supplyDefaults(e,t),!t.visible)return}else{var u=r.Scatter.handleXYDefaults(e,t,s);if(!u)return void (t.visible=!1);s("orientation",t.x&&!t.y?"h":"v")}s("marker.color",n),r.Colorscale.hasColorscale(e,"marker")&&r.Colorscale.handleDefaults(e,t,i,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",r.Color.defaultLine),r.Colorscale.hasColorscale(e,"marker.line")&&r.Colorscale.handleDefaults(e,t,i,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width",0),s("text"),r.ErrorBars.supplyDefaults(e,t,r.Color.defaultLine,{axis:"y"}),r.ErrorBars.supplyDefaults(e,t,r.Color.defaultLine,{axis:"x",inherit:"y"})},o.supplyLayoutDefaults=function(e,t,n){function i(n,i){return r.Lib.coerce(e,t,o.layoutAttributes,n,i)}var s,u,a,f=!1,l=!1,c=!1,h={};for(s=0;s<n.length;s++)if(u=n[s],r.Plots.traceIs(u,"bar")&&(f=!0,"overlay"!==e.barmode&&"stack"!==e.barmode&&(a=u.xaxis+u.yaxis,h[a]&&(c=!0),h[a]=!0),u.visible&&"histogram"===u.type)){var p=r.Axes.getFromId({_fullLayout:t},u["v"===u.orientation?"xaxis":"yaxis"]);"category"!==p.type&&(l=!0)}if(f){var d=i("barmode");"overlay"!==d&&i("barnorm"),i("bargap",l&&!c?0:.2),i("bargroupgap")}},o.colorbar=r.Scatter.colorbar,o.calc=function(e,t){if("histogram"===t.type)return r.Histogram.calc(e,t);var n,i,o,u=r.Axes.getFromId(e,t.xaxis||"x"),f=r.Axes.getFromId(e,t.yaxis||"y"),l=t.orientation||(t.x&&!t.y?"h":"v");"h"===l?(i=u.makeCalcdata(t,"x"),n=f.makeCalcdata(t,"y")):(i=f.makeCalcdata(t,"y"),n=u.makeCalcdata(t,"x"));var c=Math.min(n.length,i.length),h=[];for(o=0;c>o;o++)s(n[o])&&s(i[o])&&h.push({p:n[o],s:i[o],b:0});return r.Colorscale.hasColorscale(t,"marker")&&r.Colorscale.calc(t,t.marker.color,"marker","c"),r.Colorscale.hasColorscale(t,"marker.line")&&r.Colorscale.calc(t,t.marker.line.color,"marker.line","c"),h},o.setPositions=function(e,t){var n,i,o=e._fullLayout,u=t.x(),f=t.y();["v","h"].forEach(function(c){function h(t){function n(e){e[d]=e.p+c}var i=[];t.forEach(function(t){e.calcdata[t].forEach(function(e){i.push(e.p)})});var s=r.Lib.distinctVals(i),u=s.vals,a=s.minDiff,f=!1,l=[];"group"===o.barmode&&t.forEach(function(t){f||(e.calcdata[t].forEach(function(e){f||l.forEach(function(t){Math.abs(e.p-t)<a&&(f=!0)})}),f||e.calcdata[t].forEach(function(e){l.push(e.p)}))}),r.Axes.minDtick(m,a,u[0],f),r.Axes.expand(m,u,{vpad:a/2}),a*=1-o.bargap,f&&(a/=p.length);for(var c,h=0;h<t.length;h++){var v=e.calcdata[t[h]][0].t;v.barwidth=a*(1-o.bargroupgap),v.poffset=((f?(2*h+1-t.length)*a:0)-v.barwidth)/2,v.dbar=s.minDiff,c=v.poffset+v.barwidth/2,e.calcdata[t[h]].forEach(n)}}var p=[],d={v:"x",h:"y"}[c],v={v:"y",h:"x"}[c],m=t[d](),g=t[v]();if(e._fullData.forEach(function(e,t){e.visible===!0&&r.Plots.traceIs(e,"bar")&&e.orientation===c&&e.xaxis===u._id&&e.yaxis===f._id&&p.push(t)}),p.length){"overlay"===o.barmode?p.forEach(function(e){h([e])}):h(p);var y="stack"===o.barmode,b=o.barnorm;if(y||b){var w,E,S,x=g.l2c(g.c2l(0)),T=x,N={},C=e.calcdata[p[0]][0].t.barwidth/100,k=0,L=!0;for(n=0;n<p.length;n++)for(E=e.calcdata[p[n]],i=0;i<E.length;i++){k=Math.round(E[i].p/C);var A=N[k]||0;y&&(E[i].b=A),w=E[i].b+E[i].s,N[k]=A+E[i].s,y&&(E[i][v]=w,!b&&s(g.c2l(w))&&(x=Math.max(x,w),T=Math.min(T,w)))}if(b){L=!1;var O="fraction"===b?1:100,M=O/1e9;for(T=0,x=y?O:0,n=0;n<p.length;n++)for(E=e.calcdata[p[n]],i=0;i<E.length;i++)S=O/N[Math.round(E[i].p/C)],E[i].b*=S,E[i].s*=S,w=E[i].b+E[i].s,E[i][v]=w,s(g.c2l(w))&&(T-M>w&&(L=!0,T=w),w>x+M&&(L=!0,x=w))}r.Axes.expand(g,[T,x],{tozero:!0,padded:L})}else{var _=function(e){return e[v]=e.s,e.s};for(n=0;n<p.length;n++)r.Axes.expand(g,e.calcdata[p[n]].map(_),{tozero:!0,padded:!0})}}})},o.arraysToCalcdata=function(e){var t=e[0].trace,n=t.marker,i=n.line;r.Lib.mergeArray(t.text,e,"tx"),r.Lib.mergeArray(n.opacity,e,"mo"),r.Lib.mergeArray(n.color,e,"mc"),r.Lib.mergeArray(i.color,e,"mlc"),r.Lib.mergeArray(i.width,e,"mlw")},o.plot=function(e,t,n){var u=t.x(),f=t.y(),l=e._fullLayout,c=t.plot.select(".barlayer").selectAll("g.trace.bars").data(n).enter().append("g").attr("class","trace bars");c.append("g").attr("class","points").each(function(t){var n=t[0].t,c=t[0].trace;o.arraysToCalcdata(t),i.select(this).selectAll("path").data(r.Lib.identity).enter().append("path").each(function(t){function o(e){return 0===l.bargap&&0===l.bargroupgap?i.round(Math.round(e)-y,2):e}function h(e,t){return Math.abs(e-t)>=2?o(e):e>t?Math.ceil(e):Math.floor(e)}var p,d,v,m;if("h"===c.orientation?(v=f.c2p(n.poffset+t.p,!0),m=f.c2p(n.poffset+t.p+n.barwidth,!0),p=u.c2p(t.b,!0),d=u.c2p(t.s+t.b,!0)):(p=u.c2p(n.poffset+t.p,!0),d=u.c2p(n.poffset+t.p+n.barwidth,!0),m=f.c2p(t.s+t.b,!0),v=f.c2p(t.b,!0)),!(s(p)&&s(d)&&s(v)&&s(m)&&p!==d&&v!==m))return void i.select(this).remove();var g=(t.mlw+1||c.marker.line.width+1||(t.trace?t.trace.marker.line.width:0)+1)-1,y=i.round(g/2%1,2);if(!e._context.staticPlot){var b=r.Color.opacity(t.mc||c.marker.color),w=1>b||g>.01?o:h;p=w(p,d),d=w(d,p),v=w(v,m),m=w(m,v)}i.select(this).attr("d","M"+p+","+v+"V"+m+"H"+d+"V"+v+"Z")})})},o.style=function(e){var t=i.select(e).selectAll("g.trace.bars"),n=t.size(),s=e._fullLayout;t.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===s.barmode&&n>1||0===s.bargap&&0===s.bargroupgap&&!e[0].trace.marker.line.width)&&i.select(this).attr("shape-rendering","crispEdges")}),t.selectAll("g.points").each(function(e){var t=e[0].trace,n=t.marker,s=n.line,o=(t._input||{}).marker||{},u=r.Drawing.tryColorscale(n,o,""),a=r.Drawing.tryColorscale(n,o,"line.");i.select(this).selectAll("path").each(function(e){var t,o,f=(e.mlw+1||s.width+1)-1,c=i.select(this);t="mc"in e?e.mcc=u(e.mc):Array.isArray(n.color)?r.Color.defaultLine:n.color,c.style("stroke-width",f+"px").call(r.Color.fill,t),f&&(o="mlc"in e?e.mlcc=a(e.mlc):Array.isArray(s.color)?r.Color.defaultLine:s.color,c.call(r.Color.stroke,o))})})},o.hoverPoints=function(e,t,n,i){var s,o=e.cd,u=o[0].trace,a=o[0].t,f=e.xa,l=e.ya,c="closest"===i?a.barwidth/2:a.dbar*(1-f._td._fullLayout.bargap)/2;s="closest"!==i?function(e){return e.p}:"h"===u.orientation?function(e){return e.y}:function(e){return e.x};var h,p;"h"===u.orientation?(h=function(e){return r.Fx.inbox(e.b-t,e.x-t)+(e.x-t)/(e.x-e.b)},p=function(e){var t=s(e)-n;return r.Fx.inbox(t-c,t+c)}):(p=function(e){return r.Fx.inbox(e.b-n,e.y-n)+(e.y-n)/(e.y-e.b)},h=function(e){var n=s(e)-t;return r.Fx.inbox(n-c,n+c)});var d=r.Fx.getDistanceFunction(i,h,p);if(r.Fx.getClosest(o,d,e),e.index!==!1){var v=o[e.index],m=v.mcc||u.marker.color,g=v.mlcc||u.marker.line.color,y=v.mlw||u.marker.line.width;return r.Color.opacity(m)?e.color=m:r.Color.opacity(g)&&y&&(e.color=g),"h"===u.orientation?(e.x0=e.x1=f.c2p(v.x,!0),e.xLabelVal=v.s,e.y0=l.c2p(s(v)-c,!0),e.y1=l.c2p(s(v)+c,!0),e.yLabelVal=v.p):(e.y0=e.y1=l.c2p(v.y,!0),e.yLabelVal=v.s,e.x0=f.c2p(s(v)-c,!0),e.x1=f.c2p(s(v)+c,!0),e.xLabelVal=v.p),v.tx&&(e.text=v.tx),r.ErrorBars.hoverInfo(v,u,e),[e]}}},{"../../plotly":330,"./attributes":375,"./layout_attributes":377,d3:53,"fast-isnumeric":58}],377:[function(e,t,n){t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"group"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:""},bargap:{valType:"number",min:0,max:1},bargroupgap:{valType:"number",min:0,max:1,dflt:0}}},{}],378:[function(e,t,n){var r=e("../scatter/attributes"),i=e("../../components/color/attributes"),s=e("../../lib/extend").extendFlat,o=r.marker,u=o.line;t.exports={y:{valType:"data_array"},x:{valType:"data_array"},x0:{valType:"any"},y0:{valType:"any"},whiskerwidth:{valType:"number",min:0,max:1,dflt:.5},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],dflt:"outliers"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],dflt:!1},jitter:{valType:"number",min:0,max:1},pointpos:{valType:"number",min:-2,max:2},orientation:{valType:"enumerated",values:["v","h"]},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)"},symbol:s({},o.symbol,{arrayOk:!1}),opacity:s({},o.opacity,{arrayOk:!1,dflt:1}),size:s({},o.size,{arrayOk:!1}),color:s({},o.color,{arrayOk:!1}),line:{color:s({},u.color,{arrayOk:!1,dflt:i.defaultLine}),width:s({},u.width,{arrayOk:!1,dflt:0}),outliercolor:{valType:"color"},outlierwidth:{valType:"number",min:0,dflt:1}}},line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:2}},fillcolor:r.fillcolor}},{"../../components/color/attributes":282,"../../lib/extend":310,"../scatter/attributes":397}],379:[function(e,t,n){"use strict";function r(){f=2e9}function i(){var e=f;return f=(69069*f+1)%4294967296,Math.abs(f-e)<429496729?i():f/4294967296}var s=e("../../plotly"),o=e("d3"),u=e("fast-isnumeric"),a=t.exports={};s.Plots.register(a,"box",["cartesian","symbols","oriented","box","showLegend"],{}),a.attributes=e("./attributes"),a.layoutAttributes=e("./layout_attributes"),a.supplyDefaults=function(e,t,n){function r(n,r){return s.Lib.coerce(e,t,a.attributes,n,r)}var i,o=r("y"),u=r("x");if(o&&o.length)i="v",u||r("x0");else{if(!u||!u.length)return void (t.visible=!1);i="h",r("y0")}r("orientation",i),r("line.color",(e.marker||{}).color||n),r("line.width",2),r("fillcolor",s.Color.addOpacity(t.line.color,.5)),r("whiskerwidth"),r("boxmean");var f=s.Lib.coerce2(e,t,a.attributes,"marker.outliercolor"),l=r("marker.line.outliercolor"),c=f||l?r("boxpoints","suspectedoutliers"):r("boxpoints");c&&(r("jitter","all"===c?.3:0),r("pointpos","all"===c?-1.5:0),r("marker.symbol"),r("marker.opacity"),r("marker.size"),r("marker.color",t.line.color),r("marker.line.color"),r("marker.line.width"),"suspectedoutliers"===c&&(r("marker.line.outliercolor",t.marker.color),r("marker.line.outlierwidth")))},a.supplyLayoutDefaults=function(e,t,n){function r(n,r){return s.Lib.coerce(e,t,a.layoutAttributes,n,r)}for(var i,o=0;o<n.length;o++)if(s.Plots.traceIs(n[o],"box")){i=!0;break}i&&(r("boxmode"),r("boxgap"),r("boxgroupgap"))},a.calc=function(e,t){function n(e,t,n,r,i){var o;return n in t?p=r.makeCalcdata(t,n):(o=n+"0"in t?t[n+"0"]:"name"in t&&("category"===r.type||u(t.name)&&-1!==["linear","log"].indexOf(r.type)||s.Lib.isDateTime(t.name)&&"date"===r.type)?t.name:e.numboxes,o=r.d2c(o),p=i.map(function(){return o})),p}function r(e,t,n,r,i){var o,a,f,l,c=r.length,h=t.length,p=[],d=[];for(o=0;c>o;++o)a=r[o],e[o]={pos:a},d[o]=a-i,p[o]=[];for(d.push(r[c-1]+i),o=0;h>o;++o)l=t[o],u(l)&&(f=s.Lib.findBin(n[o],d),f>=0&&h>f&&p[f].push(l));return p}function i(e,t){var n,r,i,o;for(o=0;o<t.length;++o)n=t[o].sort(s.Lib.sorterAsc),r=n.length,i=e[o],i.val=n,i.min=n[0],i.max=n[r-1],i.mean=s.Lib.mean(n,r),i.sd=s.Lib.stdev(n,r,i.mean),i.q1=s.Lib.interp(n,.25),i.med=s.Lib.interp(n,.5),i.q3=s.Lib.interp(n,.75),i.lf=Math.min(i.q1,n[Math.min(s.Lib.findBin(2.5*i.q1-1.5*i.q3,n,!0)+1,r-1)]),i.uf=Math.max(i.q3,n[Math.max(s.Lib.findBin(2.5*i.q3-1.5*i.q1,n),0)]),i.lo=4*i.q1-3*i.q3,i.uo=4*i.q3-3*i.q1}var o,a,f,l,c,h,p,d,v,m=s.Axes.getFromId(e,t.xaxis||"x"),g=s.Axes.getFromId(e,t.yaxis||"y"),y=t.orientation,b=[];"h"===y?(o=m,a="x",c=g,h="y"):(o=g,a="y",c=m,h="x"),f=o.makeCalcdata(t,a),s.Axes.expand(o,f,{padded:!0}),p=n(e,t,h,c,f);var w=s.Lib.distinctVals(p);return d=w.vals,v=w.minDiff/2,l=r(b,f,p,d,v),i(b,l),b=b.filter(function(e){return e.val&&e.val.length}),b.length?(b[0].t={boxnum:e.numboxes,dPos:v},e.numboxes++,b):[{t:{emptybox:!0}}]},a.setPositions=function(e,t){var n,r,i,o,u=e._fullLayout,a=t.x(),f=t.y(),l=["v","h"];for(r=0;r<l.length;++r){var c,h,p,d=l[r],v=[],m=[],g=0,y=0;for(n="h"===d?f:a,i=0;i<e.calcdata.length;++i)c=e.calcdata[i],h=c[0].t,p=c[0].trace,p.visible===!0&&s.Plots.traceIs(p,"box")&&!h.emptybox&&p.orientation===d&&p.xaxis===a._id&&p.yaxis===f._id&&(v.push(i),p.boxpoints!==!1&&(g=Math.max(g,p.jitter-p.pointpos-1),y=Math.max(y,p.jitter+p.pointpos-1)));for(i=0;i<v.length;i++)for(c=e.calcdata[v[i]],o=0;o<c.length;o++)m.push(c[o].pos);if(m.length){var b=s.Lib.distinctVals(m),w=b.minDiff/2;for(m.length===b.vals.length&&(e.numboxes=1),s.Axes.minDtick(n,b.minDiff,b.vals[0],!0),r=0;r<v.length;++r)e.calcdata[r][0].t.dPos=w;var E=(1-u.boxgap)*(1-u.boxgroupgap)*w/e.numboxes;s.Axes.expand(n,b.vals,{vpadminus:w+g*E,vpadplus:w+y*E})}}};var f=2e9,l=5,c=.01;a.plot=function(e,t,n){var u,a,f=e._fullLayout,p=t.x(),d=t.y(),v=t.plot.select(".boxlayer").selectAll("g.trace.boxes").data(n).enter().append("g").attr("class","trace boxes");v.each(function(t){var n=t[0].t,v=t[0].trace,m="group"===f.boxmode&&e.numboxes>1,g=n.dPos*(1-f.boxgap)*(1-f.boxgroupgap)/(m?e.numboxes:1),y=m?2*n.dPos*(-0.5+(n.boxnum+.5)/e.numboxes)*(1-f.boxgap):0,b=g*v.whiskerwidth;return v.visible!==!0||n.emptybox?void o.select(this).remove():("h"===v.orientation?(u=d,a=p):(u=p,a=d),n.bPos=y,n.bdPos=g,r(),o.select(this).selectAll("path.box").data(s.Lib.identity).enter().append("path").attr("class","box").each(function(e){var t=u.c2p(e.pos+y,!0),n=u.c2p(e.pos+y-g,!0),r=u.c2p(e.pos+y+g,!0),i=u.c2p(e.pos+y-b,!0),f=u.c2p(e.pos+y+b,!0),l=a.c2p(e.q1,!0),c=a.c2p(e.q3,!0),h=s.Lib.constrain(a.c2p(e.med,!0),Math.min(l,c)+1,Math.max(l,c)-1),p=a.c2p(v.boxpoints===!1?e.min:e.lf,!0),d=a.c2p(v.boxpoints===!1?e.max:e.uf,!0);"h"===v.orientation?o.select(this).attr("d","M"+h+","+n+"V"+r+"M"+l+","+n+"V"+r+"H"+c+"V"+n+"ZM"+l+","+t+"H"+p+"M"+c+","+t+"H"+d+(0===v.whiskerwidth?"":"M"+p+","+i+"V"+f+"M"+d+","+i+"V"+f)):o.select(this).attr("d","M"+n+","+h+"H"+r+"M"+n+","+l+"H"+r+"V"+c+"H"+n+"ZM"+t+","+l+"V"+p+"M"+t+","+c+"V"+d+(0===v.whiskerwidth?"":"M"+i+","+p+"H"+f+"M"+i+","+d+"H"+f))}),v.boxpoints&&o.select(this).selectAll("g.points").data(function(e){return e.forEach(function(e){e.t=n,e.trace=v}),e}).enter().append("g").attr("class","points").selectAll("path").data(function(e){var t,n,r,o,u,a,f,p="all"===v.boxpoints?e.val:e.val.filter(function(t){return t<e.lf||t>e.uf}),d=(e.q3-e.q1)*c,m=[],b=0;if(v.jitter){for(t=0;t<p.length;t++)n=Math.max(0,t-l),o=p[n],r=Math.min(p.length-1,t+l),u=p[r],"all"!==v.boxpoints&&(p[t]<e.lf?u=Math.min(u,e.lf):o=Math.max(o,e.uf)),a=Math.sqrt(d*(r-n)/(u-o))||0,a=s.Lib.constrain(Math.abs(a),0,1),m.push(a),b=Math.max(a,b);f=2*v.jitter/b}return p.map(function(t,n){var r,s=v.pointpos;return v.jitter&&(s+=f*m[n]*(i()-.5)),r="h"===v.orientation?{y:e.pos+s*g+y,x:t}:{x:e.pos+s*g+y,y:t},"suspectedoutliers"===v.boxpoints&&t<e.uo&&t>e.lo&&(r.so=!0),r})}).enter().append("path").call(s.Drawing.translatePoints,p,d),void (v.boxmean&&o.select(this).selectAll("path.mean").data(s.Lib.identity).enter().append("path").attr("class","mean").style("fill","none").each(function(e){var t=u.c2p(e.pos+y,!0),n=u.c2p(e.pos+y-g,!0),r=u.c2p(e.pos+y+g,!0),i=a.c2p(e.mean,!0),s=a.c2p(e.mean-e.sd,!0),f=a.c2p(e.mean+e.sd,!0);"h"===v.orientation?o.select(this).attr("d","M"+i+","+n+"V"+r+("sd"!==v.boxmean?"":"m0,0L"+s+","+t+"L"+i+","+n+"L"+f+","+t+"Z")):o.select(this).attr("d","M"+n+","+i+"H"+r+("sd"!==v.boxmean?"":"m0,0L"+t+","+s+"L"+n+","+i+"L"+t+","+f+"Z"))})))})},a.style=function(e){var t=o.select(e).selectAll("g.trace.boxes");t.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){var t=e[0].trace,n=t.line.width;o.select(this).selectAll("path.box").style("stroke-width",n+"px").call(s.Color.stroke,t.line.color).call(s.Color.fill,t.fillcolor),o.select(this).selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(s.Color.stroke,t.line.color),o.select(this).selectAll("g.points path").call(s.Drawing.pointStyle,t)})},a.hoverPoints=function(e,t,n,r){var i,o,u,a,f,l,c,h,p,d,v=e.cd,m=v[0].trace,g=v[0].t,y=e.xa,b=e.ya,w=[];if(a="closest"===r?2.5*g.bdPos:g.bdPos,"h"===m.orientation?(i=function(e){return s.Fx.inbox(e.min-t,e.max-t)},o=function(e){var t=e.pos+g.bPos-n;return s.Fx.inbox(t-a,t+a)},f="y",l=b,p="x",d=y):(i=function(e){var n=e.pos+g.bPos-t;return s.Fx.inbox(n-a,n+a)},o=function(e){return s.Fx.inbox(e.min-n,e.max-n)},f="x",l=y,p="y",d=b),u=s.Fx.getDistanceFunction(r,i,o),s.Fx.getClosest(v,u,e),e.index!==!1){var E=v[e.index],S=m.line.color,x=(m.marker||{}).color;s.Color.opacity(S)&&m.line.width?e.color=S:s.Color.opacity(x)&&m.boxpoints?e.color=x:e.color=m.fillcolor,e[f+"0"]=l.c2p(E.pos+g.bPos-g.bdPos,!0),e[f+"1"]=l.c2p(E.pos+g.bPos+g.bdPos,!0),c=s.Axes.tickText(l,l.c2l(E.pos),"hover").text,e[f+"LabelVal"]=E.pos;var T,N,C={},k=["med","min","q1","q3","max"];m.boxmean&&k.push("mean"),m.boxpoints&&[].push.apply(k,["lf","uf"]);for(var L=0;L<k.length;L++)T=k[L],T in E&&!(E[T]in C)&&(C[E[T]]=!0,h=d.c2p(E[T],!0),N=s.Lib.extendFlat({},e),N[p+"0"]=N[p+"1"]=h,N[p+"LabelVal"]=E[T],N.attr=T,"mean"===T&&"sd"in E&&"sd"===m.boxmean&&(N[p+"err"]=E.sd),e.name="",w.push(N));return w}}},{"../../plotly":330,"./attributes":378,"./layout_attributes":380,d3:53,"fast-isnumeric":58}],380:[function(e,t,n){t.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay"},boxgap:{valType:"number",min:0,max:1,dflt:.3},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3}}},{}],381:[function(e,t,n){var r=e("../scattergeo/attributes"),i=e("../../components/colorscale/attributes"),s=e("../../plots/attributes"),o=e("../../lib/extend").extendFlat,u=r.marker.line;t.exports={locations:{valType:"data_array"},locationmode:r.locationmode,z:{valType:"data_array"},text:{valType:"data_array"},marker:{line:{color:u.color,width:u.width}},zauto:i.zauto,zmin:i.zmin,zmax:i.zmax,colorscale:i.colorscale,autocolorscale:i.autocolorscale,reversescale:i.reversescale,showscale:i.showscale,hoverinfo:o({},s.hoverinfo,{flags:["location","z","text","name"]}),_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":286,"../../lib/extend":310,"../../plots/attributes":331,"../scattergeo/attributes":404}],382:[function(e,t,n){"use strict";var r=e("../../plotly"),i=e("./");t.exports=function(e,t,n,s){function o(n,s){return r.Lib.coerce(e,t,i.attributes,n,s)}var u,a,f;return u=o("locations"),u&&(a=u.length),u&&a?(f=o("z"),Array.isArray(f)?(f.length>a&&(t.z=f.slice(0,a)),o("locationmode"),o("text"),o("marker.line.color"),o("marker.line.width"),r.Colorscale.handleDefaults(e,t,s,o,{prefix:"",cLetter:"z"}),void o("hoverinfo",1===s._dataLength?"location+z+text":void 0)):void (t.visible=!1)):void (t.visible=!1)}},{"../../plotly":330,"./":383}],383:[function(e,t,n){"use strict";var r=e("../../plotly"),i=t.exports={};r.Plots.register(i,"choropleth",["geo","noOpacity"],{}),i.attributes=e("./attributes"),i.supplyDefaults=e("./defaults"),i.colorbar=r.Colorbar.traceColorbar,i.calc=function(e,t){r.Colorscale.calc(t,t.z,"","z")}},{"../../plotly":330,"./attributes":381,"./defaults":382}],384:[function(e,t,n){"use strict";function r(e,t){function n(t){var n=e.mockAxis;return i.Axes.tickText(n,n.c2l(t),"hover").text}var r=t.hoverinfo;if("none"===r)return function(e){delete e.nameLabel,delete e.textLabel};var s="all"===r?i.Choropleth.attributes.hoverinfo.flags:r.split("+"),o=-1!==s.indexOf("name"),u=-1!==s.indexOf("location"),a=-1!==s.indexOf("z"),f=-1!==s.indexOf("text"),l=!o&&u;return function(e){var r=[];l?e.nameLabel=e.id:(o&&(e.nameLabel=t.name),u&&r.push(e.id)),a&&r.push(n(e.z)),f&&r.push(e.tx),e.textLabel=r.join("<br>")}}var i=e("../../plotly"),s=e("d3"),o=e("../../lib/topojson_utils").getTopojsonFeatures,u=e("../../lib/geo_location_utils").locationToFeature,a=e("../../lib/array_to_calc_item"),f=e("../../constants/geo_constants"),l=t.exports={};l.calcGeoJSON=function(e,t){for(var n,r=[],i=e.locations,s=i.length,f=o(e,t),l=(e.marker||{}).line||{},c=0;s>c;c++)n=u(e.locationmode,i[c],f),void 0!==n&&(n.z=e.z[c],void 0!==e.text&&(n.tx=e.text[c]),a(l.color,n,"mlc",c),a(l.width,n,"mlw",c),r.push(n));return r.length>0&&(r[0].trace=e),r},l.plot=function(e,t,n){var o,u=e.framework,a=e.topojson,h=u.select("g.choroplethlayer"),p=u.select("g.baselayer"),d=u.select("g.baselayeroverchoropleth"),v=f.baseLayersOverChoropleth;h.selectAll("*").remove(),d.selectAll("*").remove();var m=h.selectAll("g.trace.scatter").data(t);m.enter().append("g").attr("class","trace choropleth"),m.each(function(t){function n(t){if(e.showHover){var n=e.projection(t.properties.ct);u(t),i.Fx.loneHover({x:n[0],y:n[1],name:t.nameLabel,text:t.textLabel},{container:e.hoverContainer.node()})}}if(t.visible===!0){var o=l.calcGeoJSON(t,a),u=r(e,t);s.select(this).selectAll("path.choroplethlocation").data(o).enter().append("path").attr("class","choroplethlocation").on("mouseover",n).on("mouseout",function(){i.Fx.loneUnhover(e.hoverContainer)}).on("mousedown",function(){i.Fx.loneUnhover(e.hoverContainer)}).on("mouseup",n)}});for(var g=0;g<v.length;g++)o=v[g],p.select("g."+o).remove(),e.drawTopo(d,o,n),e.styleLayer(d,o,n);l.style(e)},l.style=function(e){e.framework.selectAll("g.trace.choropleth").each(function(e){var t=s.select(this),n=e.marker||{},r=n.line||{},o=e.zmin,u=e.zmax,a=i.Colorscale.getScale(e.colorscale),f=i.Colorscale.makeScaleFunction(a,o,u);t.selectAll("path.choroplethlocation").each(function(e){s.select(this).attr("fill",function(e){return f(e.z)}).call(i.Color.stroke,e.mlc||r.color).call(i.Drawing.dashLine,"",e.mlw||r.width)})})}},{"../../constants/geo_constants":300,"../../lib/array_to_calc_item":306,"../../lib/geo_location_utils":311,"../../lib/topojson_utils":325,"../../plotly":330,d3:53}],385:[function(e,t,n){var r=e("../scatter/attributes"),i=e("../../lib/extend").extendFlat,s=r.line;t.exports={_composedModules:{contour:"Heatmap",histogram2dcontour:"Heatmap"},autocontour:{valType:"boolean",dflt:!0},ncontours:{valType:"integer",dflt:0},contours:{start:{valType:"number",dflt:null},end:{valType:"number",dflt:null},size:{valType:"number",dflt:null},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill"},showlines:{valType:"boolean",dflt:!0}},line:{color:i({},s.color,{}),width:s.width,dash:s.dash,smoothing:i({},s.smoothing,{})}}},{"../../lib/extend":310,"../scatter/attributes":397}],386:[function(e,t,n){"use strict";function r(e,t,n){w.Lib.markTime("in Contour.plot");var r=n[0].trace,s=n[0].x,u=n[0].y,f=r.contours,l=r.uid,c=t.x(),h=t.y(),m=e._fullLayout,b="contour"+l,E=i(f,t,n[0]);if(r.visible!==!0)return void m._paper.selectAll("."+b+",.cb"+l+",.hm"+l).remove();"heatmap"===f.coloring?(r.zauto&&r.autocontour===!1&&(r._input.zmin=r.zmin=f.start-f.size/2,r._input.zmax=r.zmax=r.zmin+E.length*f.size),w.Heatmap.plot(e,t,[n])):m._paper.selectAll(".hm"+l).remove(),o(E),a(E);var S=c.c2p(s[0],!0),x=c.c2p(s[s.length-1],!0),T=h.c2p(u[0],!0),N=h.c2p(u[u.length-1],!0),C=[[S,N],[x,N],[x,T],[S,T]],k=p(t,n,b);d(k,C,f),v(k,E,C,f),g(k,E,f),y(k,t,n[0],C),w.Lib.markTime("done Contour.plot")}function i(e,t,n){for(var r=e.size||1,i=[],s=e.start;s<e.end+r/10;s+=r)i.push({level:s,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.x(),yaxis:t.y(),x:n.x,y:n.y,z:n.z,smoothing:n.trace.line.smoothing});return i}function s(e,t){var n=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(5===n||10===n){var r=(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4;return e>r?5===n?713:1114:5===n?104:208}return 15===n?0:n}function o(e){var t,n,r,i,o,u,a,f,l,c=e[0].z,h=c.length,p=c[0].length,d=2===h||2===p;for(n=0;h-1>n;n++)for(i=[],0===n&&(i=i.concat(x)),n===h-2&&(i=i.concat(T)),t=0;p-1>t;t++)for(r=i.slice(),0===t&&(r=r.concat(N)),t===p-2&&(r=r.concat(C)),o=t+","+n,u=[[c[n][t],c[n][t+1]],[c[n+1][t],c[n+1][t+1]]],l=0;l<e.length;l++)f=e[l],a=s(f.level,u),a&&(f.crossings[o]=a,-1!==r.indexOf(a)&&(f.starts.push([t,n]),d&&-1!==r.indexOf(a,r.indexOf(a)+1)&&f.starts.push([t,n])))}function u(e,t,n){function r(e){return a[e%a.length]}for(var i=t.join(","),s=i,o=e.crossings[s],u=f(o,n,t),a=[h(e,t,[-u[0],-u[1]])],p=u.join(","),d=e.z.length,v=e.z[0].length,m=0;1e4>m;m++){if(o>20?(o=L[o][(u[0]||u[1])<0?0:1],e.crossings[s]=A[o]):delete e.crossings[s],u=k[o],!u){console.log("found bad marching index",o,t,e.level);break}if(a.push(h(e,t,u)),t[0]+=u[0],t[1]+=u[1],l(a[a.length-1],a[a.length-2])&&a.pop(),s=t.join(","),s===i&&u.join(",")===p||n&&(u[0]&&(t[0]<0||t[0]>v-2)||u[1]&&(t[1]<0||t[1]>d-2)))break;o=e.crossings[s]}1e4===m&&console.log("Infinite loop in contour?");var g,y,b,w,E,S,x,T=l(a[0],a[a.length-1]),N=0,C=.2*e.smoothing,O=[],M=0;for(m=1;m<a.length;m++)x=c(a[m],a[m-1]),N+=x,O.push(x);var _=N/O.length*C;for(m=a.length-2;m>=M;m--)if(g=O[m],_>g){for(b=0,y=m-1;y>=M&&g+O[y]<_;y--)g+=O[y];if(T&&m===a.length-2)for(b=0;y>b&&g+O[b]<_;b++)g+=O[b];E=m-y+b+1,S=Math.floor((m+y+b+2)/2),w=T||m!==a.length-2?T||-1!==y?E%2?r(S):[(r(S)[0]+r(S+1)[0])/2,(r(S)[1]+r(S+1)[1])/2]:a[0]:a[a.length-1],a.splice(y+1,m-y+1,w),m=y+1,b&&(M=b),T&&(m===a.length-2?a[b]=a[a.length-1]:0===m&&(a[a.length-1]=a[0]))}if(a.splice(0,M),!(a.length<2))if(T)a.pop(),e.paths.push(a);else{n||console.log("unclosed interior contour?",e.level,i,a.join("L"));var D=!1;e.edgepaths.forEach(function(t,n){if(!D&&l(t[0],a[a.length-1])){a.pop(),D=!0;var r=!1;e.edgepaths.forEach(function(t,i){!r&&l(t[t.length-1],a[0])&&(r=!0,a.splice(0,1),e.edgepaths.splice(n,1),i===n?e.paths.push(a.concat(t)):e.edgepaths[i]=e.edgepaths[i].concat(a,t))}),r||(e.edgepaths[n]=a.concat(t))}}),e.edgepaths.forEach(function(t,n){!D&&l(t[t.length-1],a[0])&&(a.splice(0,1),e.edgepaths[n]=t.concat(a),D=!0)}),D||e.edgepaths.push(a)}}function a(e){var t,n,r,i,s;for(r=0;r<e.length;r++){for(i=e[r],s=0;s<i.starts.length;s++)n=i.starts[s],u(i,n,"edge");for(t=0;Object.keys(i.crossings).length&&1e4>t;)t++,n=Object.keys(i.crossings)[0].split(",").map(Number),u(i,n);1e4===t&&console.log("Infinite loop in contour?")}}function f(e,t,n){var r=0,i=0;return e>20&&t?208===e||1114===e?r=0===n[0]?1:-1:i=0===n[1]?1:-1:-1!==x.indexOf(e)?i=1:-1!==N.indexOf(e)?r=1:-1!==T.indexOf(e)?i=-1:r=-1,[r,i]}function l(e,t){return Math.abs(e[0]-t[0])<.01&&Math.abs(e[1]-t[1])<.01}function c(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function h(e,t,n){var r=t[0]+Math.max(n[0],0),i=t[1]+Math.max(n[1],0),s=e.z[i][r],o=e.xaxis,u=e.yaxis;if(n[1]){var a=(e.level-s)/(e.z[i][r+1]-s);return[o.c2p((1-a)*e.x[r]+a*e.x[r+1],!0),u.c2p(e.y[i],!0)]}var f=(e.level-s)/(e.z[i+1][r]-s);return[o.c2p(e.x[r],!0),u.c2p((1-f)*e.y[i]+f*e.y[i+1],!0)]}function p(e,t,n){var r=e.plot.select(".maplayer").selectAll("g.contour."+n).data(t);return r.enter().append("g").classed("contour",!0).classed(n,!0),r.exit().remove(),r}function d(e,t,n){var r=e.selectAll("g.contourbg").data([0]);r.enter().append("g").classed("contourbg",!0);var i=r.selectAll("path").data("fill"===n.coloring?[0]:[]);i.enter().append("path"),i.exit().remove(),i.attr("d","M"+t.join("L")+"Z").style("stroke","none")}function v(e,t,n,r){var i=e.selectAll("g.contourfill").data([0]);i.enter().append("g").classed("contourfill",!0);var s=i.selectAll("path").data("fill"===r.coloring?t:[]);s.enter().append("path"),s.exit().remove(),s.each(function(e){var t=m(e,n);t?E.select(this).attr("d",t).style("stroke","none"):E.select(this).remove()})}function m(e,t){function n(e){return Math.abs(e[1]-t[0][1])<.01}function r(e){return Math.abs(e[1]-t[2][1])<.01}function i(e){return Math.abs(e[0]-t[0][0])<.01}function s(e){return Math.abs(e[0]-t[2][0])<.01}for(var o,u,a,f,l,c,h=e.edgepaths.length||e.z[0][0]<e.level?"":"M"+t.join("L")+"Z",p=0,d=e.edgepaths.map(function(e,t){return t}),v=!0;d.length;){for(c=w.Drawing.smoothopen(e.edgepaths[p],e.smoothing),h+=v?c:c.replace(/^M/,"L"),d.splice(d.indexOf(p),1),o=e.edgepaths[p][e.edgepaths[p].length-1],f=-1,a=0;4>a;a++){if(!o){console.log("missing end?",p,e);break}for(n(o)&&!s(o)?u=t[1]:i(o)?u=t[0]:r(o)?u=t[3]:s(o)&&(u=t[2]),l=0;l<e.edgepaths.length;l++){var m=e.edgepaths[l][0];Math.abs(o[0]-u[0])<.01?Math.abs(o[0]-m[0])<.01&&(m[1]-o[1])*(u[1]-m[1])>=0&&(u=m,f=l):Math.abs(o[1]-u[1])<.01?Math.abs(o[1]-m[1])<.01&&(m[0]-o[0])*(u[0]-m[0])>=0&&(u=m,f=l):console.log("endpt to newendpt is not vert. or horz.",o,u,m)}if(o=u,f>=0)break;h+="L"+u}if(f===e.edgepaths.length){console.log("unclosed perimeter path");break}p=f,v=-1===d.indexOf(p),v&&(p=d[0],h+="Z")}for(p=0;p<e.paths.length;p++)h+=w.Drawing.smoothclosed(e.paths[p],e.smoothing);return h}function g(e,t,n){var r=t[0].smoothing,i=e.selectAll("g.contourlevel").data(n.showlines===!1?[]:t);i.enter().append("g").classed("contourlevel",!0),i.exit().remove();var s=i.selectAll("path.openline").data(function(e){return e.edgepaths});s.enter().append("path").classed("openline",!0),s.exit().remove(),s.attr("d",function(e){return w.Drawing.smoothopen(e,r)}).style("stroke-miterlimit",1);var o=i.selectAll("path.closedline").data(function(e){return e.paths});o.enter().append("path").classed("closedline",!0),o.exit().remove(),o.attr("d",function(e){return w.Drawing.smoothclosed(e,r)}).style("stroke-miterlimit",1)}function y(e,t,n,r){var i="clip"+n.trace.uid,s=t.plot.selectAll("defs").data([0]);s.enter().append("defs");var u=s.selectAll("#"+i).data(n.trace.connectgaps?[]:[0]);if(u.enter().append("clipPath").attr("id",i),u.exit().remove(),n.trace.connectgaps===!1){var f={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.x(),yaxis:t.y(),x:n.x,y:n.y,z:b(n),smoothing:0};o([f]),a([f]);var l=m(f,r),c=u.selectAll("path").data([0]);c.enter().append("path"),c.attr("d",l)}else i=null;e.call(w.Drawing.setClipUrl,i),t.plot.selectAll(".hm"+n.trace.uid).call(w.Drawing.setClipUrl,i)}function b(e){var t,n,r=e.trace._emptypoints,i=[],s=e.z.length,o=e.z[0].length,u=[];for(t=0;o>t;t++)u.push(1);for(t=0;s>t;t++)i.push(u.slice());for(t=0;t<r.length;t++)n=r[t],i[n[0]][n[1]]=0;return e.zmask=i,i}var w=e("../../plotly"),E=e("d3"),S=t.exports={};w.Plots.register(S,"contour",["cartesian","2dMap","contour"],{}),w.Plots.register(S,"histogram2dcontour",["cartesian","2dMap","contour","histogram"],{}),S.attributes=e("./attributes"),S.supplyDefaults=function(e,t,n,r){function i(n,r){return w.Lib.coerce(e,t,S.attributes,n,r)}var s=w.Lib.coerce2(e,t,S.attributes,"contours.start"),o=w.Lib.coerce2(e,t,S.attributes,"contours.end"),u=s&&o?i("autocontour",!1):i("autocontour");i(u?"ncontours":"contours.size");var a=i("contours.coloring");"fill"===a&&i("contours.showlines"),t.contours.showlines!==!1&&("lines"!==a&&i("line.color","#000"),i("line.width",.5),i("line.dash")),i("line.smoothing"),w.Heatmap.supplyDefaults(e,t,n,r)},S.calc=function(e,t){var n=w.Heatmap.calc(e,t),r=t.contours;if(t.autocontour!==!1){var i={type:"linear",range:[t.zmin,t.zmax]};w.Axes.autoTicks(i,(t.zmax-t.zmin)/(t.ncontours||15)),r.start=w.Axes.tickFirst(i),r.size=i.dtick,i.range.reverse(),r.end=w.Axes.tickFirst(i),r.start===t.zmin&&(r.start+=r.size),r.end===t.zmax&&(r.end-=r.size),r.end+=r.size/100,t._input.contours=r}return n},S.plot=function(e,t,n){for(var i=0;i<n.length;i++)r(e,t,n[i])};var x=[1,9,13,104,713],T=[4,6,7,104,713],N=[8,12,14,208,1114],C=[2,3,11,208,1114],k=[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],L={104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},A={1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11};S.style=function(e){E.select(e).selectAll("g.contour").style("opacity",function(e){return e.trace.opacity}).each(function(e){var t=E.select(this),n=e.trace,r=n.contours,i=n.line,s="lines"===r.coloring,o=r.size||1,u=Math.floor((r.end+o/10-r.start)/o)+1,a=w.Colorscale.getScale(n.colorscale),f=s?0:1,l=E.scale.linear().domain(a.map(function(e){return(e[0]*(u+f-1)-f/2)*o+r.start})).interpolate(E.interpolateRgb).range(a.map(function(e){return e[1]}));t.selectAll("g.contourlevel").each(function(e,t){E.select(this).selectAll("path").call(w.Drawing.lineGroupStyle,i.width,s?l(r.start+t*o):i.color,i.dash)}),t.selectAll("g.contourbg path").style("fill",l(r.start-o/2)),t.selectAll("g.contourfill path").style("fill",function(e,t){return l(r.start+(t+.5)*o)})}),w.Heatmap.style(e)},S.colorbar=function(e,t){var n=t[0].trace,r="cb"+n.uid;if(e._fullLayout._infolayer.selectAll("."+r).remove(),n.showscale===!1)return void w.Plots.autoMargin(e,r);var i=w.Colorbar(e,r);t[0].t.cb=i;var s=n.contours,o=n.line,u=s.size||1,a=Math.floor((s.end+u/10-s.start)/u)+1,f=w.Colorscale.getScale(n.colorscale),l="lines"===s.coloring?0:1,c=E.scale.linear().interpolate(E.interpolateRgb),h=f.map(function(e){return(e[0]*(a+l-1)-l/2)*u+s.start}),p=f.map(function(e){return e[1]});if("heatmap"===s.coloring){n.zauto&&n.autocontour===!1&&(n.zmin=s.start-u/2,n.zmax=n.zmin+a*u),i.filllevels({start:n.zmin,end:n.zmax,size:(n.zmax-n.zmin)/254}),h=f.map(function(e){return e[0]*(n.zmax-n.zmin)+n.zmin});var d=E.extent([n.zmin,n.zmax,s.start,s.start+u*(a-1)]),v=d[n.zmin<n.zmax?0:1],m=d[n.zmin<n.zmax?1:0];v!==n.zmin&&(h.splice(0,0,v),p.splice(0,0,p[0])),m!==n.zmax&&(h.push(m),p.push(p[p.length-1]))}c.domain(h).range(p),i.fillcolor("fill"===s.coloring||"heatmap"===s.coloring?c:"").line({color:"lines"===s.coloring?c:o.color,width:s.showlines!==!1?o.width:0,dash:o.dash}).levels({start:s.start,end:s.end,size:u}).options(n.colorbar)()},S.hoverPoints=function(e,t,n,r){return w.Heatmap.hoverPoints(e,t,n,r,!0)}},{"../../plotly":330,"./attributes":385,d3:53}],387:[function(e,t,n){var r=e("../scatter/attributes"),i=e("../../components/colorscale/attributes"),s=e("../../lib/extend").extendFlat;t.exports={z:{valType:"data_array"},x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:{valType:"data_array"},transpose:{valType:"boolean",dflt:!1},xtype:{valType:"enumerated",values:["array","scaled"]},ytype:{valType:"enumerated",values:["array","scaled"]},zauto:i.zauto,zmin:i.zmin,zmax:i.zmax,colorscale:i.colorscale,autocolorscale:s({},i.autocolorscale,{dflt:!1}),reversescale:i.reversescale,showscale:i.showscale,zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1},connectgaps:{valType:"boolean",dflt:!1},_nestedModules:{colorbar:"Colorbar"},_composedModules:{histogram2d:"Histogram",histogram2dcontour:"Histogram"}}},{"../../components/colorscale/attributes":286,"../../lib/extend":310,"../scatter/attributes":397}],388:[function(e,t,n){"use strict";function r(e,t){var n=t(e),r=n?t(e+"type","array"):"scaled";return"scaled"===r&&(t(e+"0"),t("d"+e)),n}function i(e){for(var t,n=!0,r=!1,i=!1,s=0;s<e.length;s++){if(t=e[s],!Array.isArray(t)){n=!1;break}t.length>0&&(r=!0);for(var o=0;o<t.length;o++)if(v(t[o])){i=!0;break}}return n&&r&&i}function s(e){return v(e)?+e:void 0}function o(e,t,n,r,i,s){var o,u,a,f=[],l=h.Plots.traceIs(e,"contour"),c=h.Plots.traceIs(e,"histogram");if(Array.isArray(t)&&!c&&"category"!==s.type){t=t.map(s.d2c);var p=t.length;if(!(i>=p))return l?t.slice(0,i):t.slice(0,i+1);if(l)f=t.slice(0,i);else if(1===i)f=[t[0]-.5,t[0]+.5];else{for(f=[1.5*t[0]-.5*t[1]],a=1;p>a;a++)f.push(.5*(t[a-1]+t[a]));f.push(1.5*t[p-1]-.5*t[p-2])}if(i>p){var d=f[f.length-1],v=d-f[f.length-2];for(a=p;i>a;a++)d+=v,f.push(d)}}else for(u=r||1,o=void 0===n?0:c||"category"===s.type?n:s.d2c(n),a=l?0:-0.5;i>a;a++)f.push(o+u*a);return f}function u(e){return.5-.25*Math.min(1,.5*e)}function a(e,t,n){var r,i,s=1;if(Array.isArray(n))for(r=0;r<t.length;r++)i=t[r],e[i[0]][i[1]]=n[i[0]][i[1]];else l(e,t);for(r=0;r<t.length&&!(t[r][2]<4);r++);for(t=t.slice(r),r=0;100>r&&s>g;r++)s=l(e,t,u(s));return s>g&&console.log("interp2d didn't converge quickly",s),e}function f(e){var t,n,r,i,s,o,u,a,f=[],l={},c=[],h=e[0],p=[],d=[0,0,0],v=m.maxRowLength(e);for(n=0;n<e.length;n++)for(t=p,p=h,h=e[n+1]||[],r=0;v>r;r++)void 0===p[r]&&(o=(void 0!==p[r-1]?1:0)+(void 0!==p[r+1]?1:0)+(void 0!==t[r]?1:0)+(void 0!==h[r]?1:0),o?(0===n&&o++,0===r&&o++,n===e.length-1&&o++,r===p.length-1&&o++,4>o&&(l[[n,r]]=[n,r,o]),f.push([n,r,o])):c.push([n,r]));for(;c.length;){for(u={},a=!1,s=c.length-1;s>=0;s--)i=c[s],n=i[0],r=i[1],o=((l[[n-1,r]]||d)[2]+(l[[n+1,r]]||d)[2]+(l[[n,r-1]]||d)[2]+(l[[n,r+1]]||d)[2])/20,o&&(u[i]=[n,r,o],c.splice(s,1),a=!0);if(!a)throw"findEmpties iterated with no new neighbors";for(i in u)l[i]=u[i],f.push(u[i])}return f.sort(function(e,t){return t[2]-e[2]})}function l(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m=0;for(o=0;o<t.length;o++){for(r=t[o],i=r[0],s=r[1],p=e[i][s],h=0,c=0,u=0;4>u;u++)a=y[u],f=e[i+a[0]],f&&(l=f[s+a[1]],void 0!==l&&(0===h?d=v=l:(d=Math.min(d,l),v=Math.max(v,l)),c++,h+=l));if(0===c)throw"iterateInterp2d order is wrong: no defined neighbors";e[i][s]=h/c,void 0===p?4>c&&(m=1):(e[i][s]=(1+n)*e[i][s]-n*p,v>d&&(m=Math.max(m,Math.abs(e[i][s]-p)/(v-d))))}return m}function c(e,t,n){function r(e,t){var n=t.length-2,r=h.Lib.constrain(h.Lib.findBin(e,t),0,n),i=t[r],s=t[r+1],o=h.Lib.constrain(r+(e-i)/(s-i)-.5,0,n),u=Math.round(o),a=Math.abs(o-u);return o&&o!==n&&a?{bin0:u,frac:a,bin1:Math.round(u+a/(o-u))}:{bin0:u,bin1:u,frac:0}}function i(e,t){if(void 0!==e){var n=X((e-N)/(C-N));return n[0]=Math.round(n[0]),n[1]=Math.round(n[1]),n[2]=Math.round(n[2]),nt+=t,rt+=n[0]*t,it+=n[1]*t,st+=n[2]*t,n}return[0,0,0,0]}function s(e,t,n){e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=Math.round(255*n[3])}function o(e,t,n,r){var s=e[n.bin0];if(void 0===s)return i(void 0,1);var o,u=e[n.bin1],a=t[n.bin0],f=t[n.bin1],l=u-s||0,c=a-s||0;return o=void 0===u?void 0===f?0:void 0===a?2*(f-s):2*(2*f-a-s)/3:void 0===f?void 0===a?0:2*(2*s-u-a)/3:void 0===a?2*(2*f-u-s)/3:f+s-u-a,i(s+n.frac*l+r.frac*(c+n.frac*o))}h.Lib.markTime("in Heatmap.plot");var u=n[0].trace,a=u.uid,f=t.x(),l=t.y(),c=e._fullLayout,v="hm"+a,g="cb"+a;if(c._paper.selectAll(".contour"+a).remove(),u.visible!==!0)return c._paper.selectAll("."+v).remove(),void c._paper.selectAll("."+g).remove();var y,b,w,E,S,x,T=n[0].z,N=u.zmin,C=u.zmax,k=h.Colorscale.getScale(u.colorscale),L=n[0].x,A=n[0].y,O=h.Plots.traceIs(u,"contour"),M=O?"best":u.zsmooth,_=T.length,D=m.maxRowLength(T),P=!1,H=!1;for(x=0;void 0===y&&x<L.length-1;)y=f.c2p(L[x]),x++;for(x=L.length-1;void 0===b&&x>0;)b=f.c2p(L[x]),x--;for(y>b&&(w=b,b=y,y=w,P=!0),x=0;void 0===E&&x<A.length-1;)E=l.c2p(A[x]),x++;for(x=A.length-1;void 0===S&&x>0;)S=l.c2p(A[x]),x--;if(E>S&&(w=E,E=S,S=w,H=!0),O&&(L=n[0].xfill,A=n[0].yfill),"fast"!==M){var B="best"===M?0:.5;y=Math.max(-B*f._length,y),b=Math.min((1+B)*f._length,b),E=Math.max(-B*l._length,E),S=Math.min((1+B)*l._length,S)}var j=Math.round(b-y),F=Math.round(S-E);if(!(0>=j||0>=F)){var I,q;"fast"===M?(I=D,q=_):(I=j,q=F);var R=document.createElement("canvas");R.width=I,R.height=q;var U,z,W=R.getContext("2d"),X=p.scale.linear().domain(k.map(function(e){return e[0]})).range(k.map(function(e){var t=d(e[1]).toRgb();return[t.r,t.g,t.b,t.a]})).clamp(!0);"fast"===M?(U=P?function(e){return D-1-e}:h.Lib.identity,z=H?function(e){return _-1-e}:h.Lib.identity):(U=function(e){return h.Lib.constrain(Math.round(f.c2p(L[e])-y),0,j)},z=function(e){return h.Lib.constrain(Math.round(l.c2p(A[e])-E),0,F)}),h.Lib.markTime("done init png");var V,$,J,K,Q,G,Y=z(0),Z=[Y,Y],et=P?0:1,tt=H?0:1,nt=0,rt=0,it=0,st=0;if(M){var ot=0,ut=new Uint8Array(j*F*4);if("best"===M){var at,ft,lt,ct=new Array(L.length),ht=new Array(A.length),pt=new Array(j);for(x=0;x<L.length;x++)ct[x]=Math.round(f.c2p(L[x])-y);for(x=0;x<A.length;x++)ht[x]=Math.round(l.c2p(A[x])-E);for(x=0;j>x;x++)pt[x]=r(x,ct);for($=0;F>$;$++)for(at=r($,ht),ft=T[at.bin0],lt=T[at.bin1],x=0;j>x;x++,ot+=4)G=o(ft,lt,pt[x],at),s(ut,ot,G)}else for($=0;_>$;$++)for(Q=T[$],Z=z($),x=0;D>x;x++)G=i(Q[x],1),ot=4*(Z*j+U(x)),s(ut,ot,G);var dt=W.createImageData(j,F);dt.data.set(ut),W.putImageData(dt,0,0)}else for($=0;_>$;$++)if(Q=T[$],Z.reverse(),Z[tt]=z($+1),Z[0]!==Z[1]&&void 0!==Z[0]&&void 0!==Z[1])for(J=U(0),V=[J,J],x=0;D>x;x++)V.reverse(),V[et]=U(x+1),V[0]!==V[1]&&void 0!==V[0]&&void 0!==V[1]&&(K=Q[x],G=i(K,(V[1]-V[0])*(Z[1]-Z[0])),W.fillStyle="rgba("+G.join(",")+")",W.fillRect(V[0],Z[0],V[1]-V[0],Z[1]-Z[0]));h.Lib.markTime("done filling png"),rt=Math.round(rt/nt),it=Math.round(it/nt),st=Math.round(st/nt);var vt=d("rgb("+rt+","+it+","+st+")");e._hmpixcount=(e._hmpixcount||0)+nt,e._hmlumcount=(e._hmlumcount||0)+nt*vt.getLuminance(),c._paper.selectAll("."+v).remove(),t.plot.select(".maplayer").append("svg:image").classed(v,!0).datum(n[0]).attr({xmlns:"http://www.w3.org/2000/svg","xlink:xlink:href":R.toDataURL("image/png"),height:F,width:j,x:y,y:E,preserveAspectRatio:"none"}),h.Lib.markTime("done showing png")}}var h=e("../../plotly"),p=e("d3"),d=e("tinycolor2"),v=e("fast-isnumeric"),m=t.exports={};h.Plots.register(m,"heatmap",["cartesian","2dMap"],{}),m.attributes=e("./attributes"),m.supplyDefaults=function(e,t,n,r){function i(n,r){return h.Lib.coerce(e,t,m.attributes,n,r)}var s=h.Plots.traceIs(t,"contour");if(s||i("zsmooth"),h.Plots.traceIs(t,"histogram")){if(h.Histogram.supplyDefaults(e,t),t.visible===!1)return}else{var o=m.handleXYZDefaults(e,t,i);if(!o)return void (t.visible=!1);i("text");var u=m.hasColumns(t);u||i("transpose"),i("connectgaps",u&&(s||t.zsmooth!==!1))}s&&"none"===(t.contours||{}).coloring||h.Colorscale.handleDefaults(e,t,r,i,{prefix:"",cLetter:"z"})},m.handleXYZDefaults=function(e,t,n){var s,o,u=n("z");if(void 0===u||!u.length)return 0;if(m.hasColumns(e)){if(s=n("x"),o=n("y"),!s||!o)return 0}else if(s=r("x",n),o=r("y",n),!i(u))return 0;return t.z.length},m.hasColumns=function(e){return!Array.isArray(e.z[0])},m.convertColumnXYZ=function(e,t,n){var r,i=e.x.slice(),s=e.y.slice(),o=e.z,u=e.text,a=Math.min(i.length,s.length,o.length),f=void 0!==u&&!Array.isArray(u[0]);for(a<i.length&&(i=i.slice(0,a)),a<s.length&&(s=s.slice(0,a)),r=0;a>r;r++)i[r]=t.d2c(i[r]),s[r]=n.d2c(s[r]);var l,c,p,d=h.Lib.distinctVals(i),v=d.vals,m=h.Lib.distinctVals(s),g=m.vals,y=h.Lib.init2dArray(g.length,v.length);for(f&&(p=h.Lib.init2dArray(g.length,v.length)),r=0;a>r;r++)l=h.Lib.findBin(i[r]+d.minDiff/2,v),c=h.Lib.findBin(s[r]+m.minDiff/2,g),y[c][l]=o[r],f&&(p[c][l]=u[r]);e.x=v,e.y=g,e.z=y,f&&(e.text=p)},m.calc=function(e,t){function n(e){w=t._input.zsmooth=t.zsmooth=!1,h.Lib.notifier("cannot fast-zsmooth: "+e)}h.Lib.markTime("start convert x&y");var r,i,s,u,l,c,p,d,v=h.Axes.getFromId(e,t.xaxis||"x"),g=h.Axes.getFromId(e,t.yaxis||"y"),y=h.Plots.traceIs(t,"contour"),b=h.Plots.traceIs(t,"histogram"),w=y?"best":t.zsmooth;if(v._minDtick=0,g._minDtick=0,h.Lib.markTime("done convert x&y"),b){var E=h.Histogram.calc2d(e,t);r=E.x,i=E.x0,s=E.dx,u=E.y,l=E.y0,c=E.dy,p=E.z}else m.hasColumns(t)&&m.convertColumnXYZ(t,v,g),r=t.x?v.makeCalcdata(t,"x"):[],u=t.y?g.makeCalcdata(t,"y"):[],i=t.x0||0,s=t.dx||1,l=t.y0||0,c=t.dy||1,p=m.cleanZ(t),(y||t.connectgaps)&&(t._emptypoints=f(p),t._interpz=a(p,t._emptypoints,t._interpz));if("fast"===w)if("log"===v.type||"log"===g.type)n("log axis found");else if(!b){if(r.length){var S=(r[r.length-1]-r[0])/(r.length-1),x=Math.abs(S/100);for(d=0;d<r.length-1;d++)if(Math.abs(r[d+1]-r[d]-S)>x){n("x scale is not linear");break}}if(u.length&&"fast"===w){var T=(u[u.length-1]-u[0])/(u.length-1),N=Math.abs(T/100);for(d=0;d<u.length-1;d++)if(Math.abs(u[d+1]-u[d]-T)>N){n("y scale is not linear");break}}}var C=m.maxRowLength(p),k="scaled"===t.xtype?"":t.x,L=o(t,k,i,s,C,v),A="scaled"===t.ytype?"":t.y,O=o(t,A,l,c,p.length,g);h.Axes.expand(v,L),h.Axes.expand(g,O);var M={x:L,y:O,z:p};if(h.Colorscale.calc(t,p,"","z"),y&&t.contours&&"heatmap"===t.contours.coloring){var _="contour"===t.type?"heatmap":"histogram2d";M.xfill=o(_,k,i,s,C,v),M.yfill=o(_,A,l,c,p.length,g)}return[M]},m.cleanZ=function(e){var t,n,r,i,o,u,a=e.z;if(e.transpose){for(t=0,o=0;o<a.length;o++)t=Math.max(t,a[o].length);if(0===t)return!1;r=function(e){return e.length},i=function(e,t,n){return e[n][t]}}else t=a.length,r=function(e,t){return e[t].length},i=function(e,t,n){return e[t][n]};var f=new Array(t);for(o=0;t>o;o++)for(n=r(a,o),f[o]=new Array(n),u=0;n>u;u++)f[o][u]=s(i(a,o,u));return f};var g=.01,y=[[-1,0],[1,0],[0,-1],[0,1]];m.maxRowLength=function(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n].length);return t},m.plot=function(e,t,n){n.forEach(function(n){c(e,t,n)})},m.colorbar=h.Colorbar.traceColorbar,m.style=function(e){p.select(e).selectAll("image").style("opacity",function(e){return e.trace.opacity})},m.hoverPoints=function(e,t,n,r,i){if(!(e.distance<h.Fx.MAXDIST)){var s,o,u,a,f=e.cd[0],l=f.trace,c=e.xa,p=e.ya,d=f.x,v=f.y,m=f.z,g=f.zmask,y=d,b=v;if(e.index!==!1){try{u=Math.round(e.index[1]),a=Math.round(e.index[0])}catch(w){return void console.log("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(0>u||u>=m[0].length||0>a||a>m.length)return}else{if(h.Fx.inbox(t-d[0],t-d[d.length-1])>h.Fx.MAXDIST||h.Fx.inbox(n-v[0],n-v[v.length-1])>h.Fx.MAXDIST)return;if(i){y=[2*d[0]-d[1]];for(var E=1;E<d.length;E++)y.push((d[E]+d[E-1])/2);for(y.push([2*d[d.length-1]-d[d.length-2]]),b=[2*v[0]-v[1]],E=1;E<v.length;E++)b.push((v[E]+v[E-1])/2);b.push([2*v[v.length-1]-v[v.length-2]])}u=Math.max(0,Math.min(y.length-2,h.Lib.findBin(t,y))),a=Math.max(0,Math.min(b.length-2,h.Lib.findBin(n,b)))}var S=c.c2p(d[u]),x=c.c2p(d[u+1]),T=p.c2p(v[a]),N=p.c2p(v[a+1]);i?(x=S,s=d[u],N=T,o=v[a]):(s=(d[u]+d[u+1])/2,o=(v[a]+v[a+1])/2,l.zsmooth&&(S=x=(S+x)/2,T=N=(T+N)/2));var C=m[a][u];g&&!g[a][u]&&(C=void 0);var k;return Array.isArray(l.text)&&Array.isArray(l.text[a])&&(k=l.text[a][u]),[h.Lib.extendFlat(e,{index:[a,u],distance:h.Fx.MAXDIST+10,x0:S,x1:x,y0:T,y1:N,xLabelVal:s,yLabelVal:o,zLabelVal:C,text:k})]}}},{"../../plotly":330,"./attributes":387,d3:53,"fast-isnumeric":58,tinycolor2:213}],389:[function(e,t,n){"use strict";function r(e){return{start:{valType:"number",dflt:null},end:{valType:"number",dflt:null},size:{valType:"any",dflt:1}}}var i=e("../bars/attributes");t.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},marker:{color:{valType:"data_array",arrayOk:void 0}},orientation:i.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:""},autobinx:{valType:"boolean",dflt:!0},nbinsx:{valType:"integer",min:0,dflt:0},xbins:r("x"),autobiny:{valType:"boolean",dflt:!0},nbinsy:{valType:"integer",min:0,dflt:0},ybins:r("y")}},{"../bars/attributes":375}],390:[function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=0,i=0;n>i;i++)t[i]?(e[i]/=t[i],r+=e[i]):e[i]=null;return r}var i=e("../../plotly"),s=e("fast-isnumeric"),o=t.exports={};i.Plots.register(i.Bars,"histogram",["cartesian","bar","histogram","oriented","errorBarsOK","showLegend"],{}),i.Plots.register(i.Heatmap,"histogram2d",["cartesian","2dMap","histogram"],{}),o.attributes=e("./attributes"),o.supplyDefaults=function(e,t){function n(n,r){return i.Lib.coerce(e,t,o.attributes,n,r)}var r,s=["x"],u=n("x"),a=n("y");if(i.Plots.traceIs(t,"2dMap")){if(!(u&&u.length&&a&&a.length))return void (t.visible=!1);r=n("z")||n("marker.color"),s=["x","y"]}else{var f=n("orientation",a&&!u?"h":"v"),l=t["v"===f?"x":"y"];if(!l||!l.length)return void (t.visible=!1);"h"===f&&(s=["y"]),r=t["h"===f?"x":"y"]}r&&n("histfunc"),n("histnorm"),s.forEach(function(r){var s=i.Lib.coerce(e,t,o.attributes,r+"bins.start"),u=i.Lib.coerce(e,t,o.attributes,r+"bins.end"),a=s&&u?n("autobin"+r,!1):n("autobin"+r);n(a?"nbins"+r:r+"bins.size")})};var u={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,r){var i=r[t];return s(i)?(i=Number(i),n[e]+=i,i):0},avg:function(e,t,n,r,i){var o=r[t];return s(o)&&(o=Number(o),n[e]+=o,i[e]++),0},min:function(e,t,n,r){var i=r[t];if(s(i)){if(i=Number(i),!s(n[e]))return n[e]=i,i;if(n[e]>i)return n[e]=i,i-n[e]}return 0},max:function(e,t,n,r){var i=r[t];if(s(i)){if(i=Number(i),!s(n[e]))return n[e]=i,i;if(n[e]<i)return n[e]=i,i-n[e]}return 0}},a={percent:function(e,t){for(var n=e.length,r=100/t,i=0;n>i;i++)e[i]*=r},probability:function(e,t){for(var n=e.length,r=0;n>r;r++)e[r]/=t},density:function(e,t,n,r){var i=e.length;r=r||1;for(var s=0;i>s;s++)e[s]*=n[s]*r},"probability density":function(e,t,n,r){var i=e.length;r&&(t/=r);for(var s=0;i>s;s++)e[s]*=n[s]/t}};o.calc=function(e,t){if(t.visible===!0){var n,o=[],f=[],c=i.Axes.getFromId(e,"h"===t.orientation?t.yaxis||"y":t.xaxis||"x"),h="h"===t.orientation?"y":"x",p={x:"y",y:"x"}[h],d=c.makeCalcdata(t,h);t["autobin"+h]===!1&&h+"bins"in t||(t[h+"bins"]=i.Axes.autoBin(d,c,t["nbins"+h]),t._input[h+"bins"]=t[h+"bins"]);var v,m,g,y,b=t[h+"bins"],w="string"==typeof b.size,E=w?[]:b,S=[],x=[],T=0,N=t.histnorm,C=t.histfunc,k=-1!==N.indexOf("density"),L="max"===C||"min"===C,A=L?null:0,O=u.count,M=a[N],_=!1;for(Array.isArray(t[p])&&"count"!==C&&(y=t[p],_="avg"===C,O=u[C]),n=b.start,m=b.end+(b.start-i.Axes.tickIncrement(b.start,b.size))/1e6;m>n&&o.length<5e3;)v=i.Axes.tickIncrement(n,b.size),o.push((n+v)/2),f.push(A),w&&E.push(n),k&&S.push(1/(v-n)),_&&x.push(0),n=v;var D=f.length;for(n=0;n<d.length;n++)g=i.Lib.findBin(d[n],E),g>=0&&D>g&&(T+=O(g,n,f,y,x));_&&(T=r(f,x)),M&&M(f,T,S);var P=Math.min(o.length,f.length),H=[],B=0,j=P-1;for(n=0;P>n;n++)if(f[n]){B=n;break}for(n=P-1;n>B;n--)if(f[n]){j=n;break}for(n=B;j>=n;n++)s(o[n])&&s(f[n])&&H.push({p:o[n],s:f[n],b:0});return H}},o.calc2d=function(e,t){var n,s,o,f,c,h,p=i.Axes.getFromId(e,t.xaxis||"x"),d=t.x?p.makeCalcdata(t,"x"):[],v=i.Axes.getFromId(e,t.yaxis||"y"),m=t.y?v.makeCalcdata(t,"y"):[],g=Math.min(d.length,m.length);d.length>g&&d.splice(g,d.length-g),m.length>g&&m.splice(g,m.length-g),i.Lib.markTime("done convert data"),!t.autobinx&&"xbins"in t||(t.xbins=i.Axes.autoBin(d,p,t.nbinsx,"2d"),"histogram2dcontour"===t.type&&(t.xbins.start-=t.xbins.size,t.xbins.end+=t.xbins.size),t._input.xbins=t.xbins),!t.autobiny&&"ybins"in t||(t.ybins=i.Axes.autoBin(m,v,t.nbinsy,"2d"),"histogram2dcontour"===t.type&&(t.ybins.start-=t.ybins.size,t.ybins.end+=t.ybins.size),t._input.ybins=t.ybins),i.Lib.markTime("done autoBin"),c=[];var y,b,w=[],E=[],S="string"==typeof t.xbins.size?[]:t.xbins,x="string"==typeof t.xbins.size?[]:t.ybins,T=0,N=[],C=t.histnorm,k=t.histfunc,L=-1!==C.indexOf("density"),A="max"===k||"min"===k,O=A?null:0,M=u.count,_=a[C],D=!1,P=[],H=[],B="z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:"";B&&"count"!==k&&(D="avg"===k,M=u[k]);var j=t.xbins,F=j.end+(j.start-i.Axes.tickIncrement(j.start,j.size))/1e6;for(h=j.start;F>h;h=i.Axes.tickIncrement(h,j.size))w.push(O),Array.isArray(S)&&S.push(h),D&&E.push(0);Array.isArray(S)&&S.push(h);var I=w.length;for(n=t.xbins.start,s=(h-n)/I,n+=s/2,j=t.ybins,F=j.end+(j.start-i.Axes.tickIncrement(j.start,j.size))/1e6,h=j.start;F>h;h=i.Axes.tickIncrement(h,j.size))c.push(w.concat()),Array.isArray(x)&&x.push(h),D&&N.push(E.concat());Array.isArray(x)&&x.push(h);var q=c.length;for(o=t.ybins.start,f=(h-o)/q,o+=f/2,L&&(P=w.map(function(e,t){return Array.isArray(S)?1/(S[t+1]-S[t]):1/s}),H=c.map(function(e,t){return Array.isArray(x)?1/(x[t+1]-x[t]):1/f})),i.Lib.markTime("done making bins"),h=0;g>h;h++)y=i.Lib.findBin(d[h],S),b=i.Lib.findBin(m[h],x),y>=0&&I>y&&b>=0&&q>b&&(T+=M(y,h,c[b],B,N[b]));if(D)for(b=0;q>b;b++)T+=r(c[b],N[b]);if(_)for(b=0;q>b;b++)_(c[b],T,P,H[b]);return i.Lib.markTime("done binning"),{x:d,x0:n,dx:s,y:m,y0:o,dy:f,z:c}}},{"../../plotly":330,"./attributes":389,"fast-isnumeric":58}],391:[function(e,t,n){var r=e("../../components/colorscale/attributes");t.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},i:{valType:"data_array"},j:{valType:"data_array"},k:{valType:"data_array"},delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z"},alphahull:{valType:"number",dflt:-1},intensity:{valType:"data_array"},color:{valType:"color"},vertexcolor:{valType:"data_array"},facecolor:{valType:"data_array"},opacity:{valType:"number",min:0,max:1,dflt:1},flatshading:{valType:"boolean",dflt:!1},contour:{show:{valType:"boolean",dflt:!1},color:{valType:"color",dflt:"#000"},width:{valType:"number",min:1,max:16,dflt:2}},colorscale:r.colorscale,reversescale:r.reversescale,showscale:r.showscale,lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":286}],392:[function(e,t,n){"use strict";function r(e,t,n){this.scene=e,this.uid=n,this.mesh=t,this.name="",this.color="#fff",this.data=null,this.showContour=!1}function i(e){return e.map(function(e){var t=e[0],n=f(e[1]),r=n.toRgb();return{index:t,rgb:[r.r,r.g,r.b,1]}})}function s(e){return e.map(p)}function o(e,t,n){for(var r=new Array(e.length),i=0;i<e.length;++i)r[i]=[e[i],t[i],n[i]];return r}function u(e,t){var n=e.glplot.gl,i=a({gl:n}),s=new r(e,i,t.uid);return s.update(t),e.glplot.add(i),s}var a=e("gl-mesh3d"),f=e("tinycolor2"),l=e("delaunay-triangulate"),c=e("alpha-shape"),h=e("convex-hull"),p=e("../../lib/str2rgbarray"),d=r.prototype;d.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index;return e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},d.update=function(e){function t(e,t,n,r){return t.map(function(t){return e.d2l(t)*n-r})}var n=this.scene,r=n.fullSceneLayout;this.data=e;var u,a=o(t(r.xaxis,e.x,n.dataScale[0],n.dataCenter[0]),t(r.yaxis,e.y,n.dataScale[1],n.dataCenter[1]),t(r.zaxis,e.z,n.dataScale[2],n.dataCenter[2]));if(e.i&&e.j&&e.k)u=o(e.i,e.j,e.k);else if(0===e.alphahull)u=h(a);else if(e.alphahull>0)u=c(e.alphahull,a);else{var f=["x","y","z"].indexOf(e.delaunayaxis);u=l(a.map(function(e){return[e[(f+1)%3],e[(f+2)%3]]}))}var d={positions:a,cells:u,ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,opacity:e.opacity,contourEnable:e.contour.show,contourColor:p(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};e.intensity?(this.color="#fff",d.vertexIntensity=e.intensity,d.colormap=i(e.colorscale)):e.vertexColor?(this.color=e.vertexColor[0],d.vertexColors=s(e.vertexColor)):e.faceColor?(this.color=e.faceColor[0],d.cellColors=s(e.faceColor)):(this.color=e.color,d.meshColor=p(e.color)),this.mesh.update(d)},d.dispose=function(){this.glplot.remove(this.mesh),this.mesh.dispose()},t.exports=u},{"../../lib/str2rgbarray":323,"alpha-shape":23,"convex-hull":42,"delaunay-triangulate":54,"gl-mesh3d":91,tinycolor2:213}],393:[function(e,t,n){"use strict";var r=e("../../plotly"),i=e("./");t.exports=function(e,t,n,s){function o(n,s){return r.Lib.coerce(e,t,i.attributes,n,s)}function u(e){var t=e.map(function(e){var t=o(e);return t&&Array.isArray(t)?t:null});return t.every(function(e){return e&&e.length===t[0].length})&&t}var a=u(["x","y","z"]),f=u(["i","j","k"]);return a?(f&&f.forEach(function(e){for(var t=0;t<e.length;++t)e[t]|=0}),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","contour.show","contour.color","contour.width","colorscale","reversescale","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(e){o(e)}),"intensity"in e?(o("intensity"),o("showscale",!0)):(t.showscale=!1,"vertexColor"in e?o("vertexColor"):"faceColor"in e?o("faceColor"):o("color",n)),t.reversescale&&(t.colorscale=t.colorscale.map(function(e){return[1-e[0],e[1]]}).reverse()),void (t.showscale&&r.Colorbar.supplyDefaults(e,t,s))):void (t.visible=!1)}},{"../../plotly":330,"./":394}],394:[function(e,t,n){"use strict";var r=e("../../plotly"),i=t.exports={};r.Plots.register(i,"mesh3d",["gl3d"],{}),i.attributes=e("./attributes"),i.supplyDefaults=e("./defaults"),i.colorbar=r.Colorbar.traceColorbar},{"../../plotly":330,"./attributes":391,"./defaults":393}],395:[function(e,t,n){var r=e("../../components/color/attributes"),i=e("../../plots/font_attributes"),s=e("../../plots/attributes"),o=e("../../lib/extend").extendFlat;t.exports={labels:{valType:"data_array"},label0:{valType:"number",dflt:0},dlabel:{valType:"number",dflt:1},values:{valType:"data_array"},marker:{colors:{valType:"data_array"},line:{color:{valType:"color",dflt:r.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}}},text:{valType:"data_array"},scalegroup:{valType:"string",dflt:""},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"]},hoverinfo:o({},s.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0},textfont:o({},i,{}),insidetextfont:o({},i,{}),outsidetextfont:o({},i,{}),domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},hole:{valType:"number",min:0,max:1,dflt:0},sort:{valType:"boolean",dflt:!0},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise"},rotation:{valType:"number",min:-360,max:360,dflt:0},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0}}},{"../../components/color/attributes":282,"../../lib/extend":310,"../../plots/attributes":331,"../../plots/font_attributes":336}],396:[function(e,t,n){"use strict";function r(e){var t=(100*e).toPrecision(3);return-1!==t.indexOf(".")?t.replace(/[.]?0+$/,"")+"%":t+"%"}function i(e){var t=e.toPrecision(10);return-1!==t.indexOf(".")?t.replace(/[.]?0+$/,""):t}function s(e){if(!y){var t=p.Color.defaults;y=t.slice();for(var n=0;n<t.length;n++)y.push(m(t[n]).lighten(20).toHexString());for(n=0;n<p.Color.defaults.length;n++)y.push(m(t[n]).darken(20).toHexString())}return y[e%y.length]}function o(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;var n=Math.PI*Math.min(e.v/t.vTotal,.5);return Math.min(1/(1+1/Math.sin(n)),(1-t.trace.hole)/2)}function u(e,t,n){var r=Math.sqrt(e.width*e.width+e.height*e.height),i=e.width/e.height,s=Math.PI*Math.min(t.v/n.vTotal,.5),u=1-n.trace.hole,a=o(t,n),f={scale:a*n.r*2/r,rCenter:1-a,rotate:0};if(f.scale>=1)return f;var l=i+1/(2*Math.tan(s)),c=n.r*Math.min(1/(Math.sqrt(l*l+.5)+l),u/(Math.sqrt(i*i+u/2)+i)),h={scale:2*c/e.height,rCenter:Math.cos(c/n.r)-c*i/n.r,rotate:(180/Math.PI*t.midangle+720)%180-90},p=1/i,d=p+1/(2*Math.tan(s)),v=n.r*Math.min(1/(Math.sqrt(d*d+.5)+d),u/(Math.sqrt(p*p+u/2)+p)),m={scale:2*v/e.width,rCenter:Math.cos(v/n.r)-v/i/n.r,rotate:(180/Math.PI*t.midangle+810)%180-90},g=m.scale>h.scale?m:h;return f.scale<1&&g.scale>f.scale?g:f}function a(e,t){var n=t.pxmid[0],r=t.pxmid[1],i=e.width/2,s=e.height/2;return 0>n&&(i*=-1),0>r&&(s*=-1),{scale:1,rCenter:1,rotate:0,x:i+Math.abs(s)*(i>0?1:-1)/2,y:s/(1+n*n/(r*r)),outside:!0}}function f(e,t){function n(e,t){return e.pxmid[1]-t.pxmid[1]}function r(e,t){return t.pxmid[1]-e.pxmid[1]}function i(e,n){n||(n={});var r,i,s,u,h,p,v=n.labelExtraY+(o?n.yLabelMax:n.yLabelMin),m=o?e.yLabelMin:e.yLabelMax,g=o?e.yLabelMax:e.yLabelMin,y=e.cyFinal+f(e.px0[1],e.px1[1]),b=v-m;if(b*c>0&&(e.labelExtraY=b),Array.isArray(t.pull))for(i=0;i<d.length;i++)s=d[i],s===e||(t.pull[e.i]||0)>=t.pull[s.i]||((e.pxmid[1]-s.pxmid[1])*c>0?(u=s.cyFinal+f(s.px0[1],s.px1[1]),b=u-m-e.labelExtraY,b*c>0&&(e.labelExtraY+=b)):(g+e.labelExtraY-y)*c>0&&(r=3*l*Math.abs(i-d.indexOf(e)),h=s.cxFinal+a(s.px0[0],s.px1[0]),p=h+r-(e.cxFinal+e.pxmid[0])-e.labelExtraX,p*l>0&&(e.labelExtraX+=p)))}var s,o,u,a,f,l,c,h,p,d,v,m,g;for(o=0;2>o;o++)for(u=o?n:r,f=o?Math.max:Math.min,c=o?1:-1,s=0;2>s;s++){for(a=s?Math.max:Math.min,l=s?1:-1,h=e[o][s],h.sort(u),p=e[1-o][s],d=p.concat(h),m=[],v=0;v<h.length;v++)void 0!==h[v].yLabelMid&&m.push(h[v]);for(g=!1,v=0;o&&v<p.length;v++)if(void 0!==p[v].yLabelMid){g=p[v];break}for(v=0;v<m.length;v++){var y=v&&m[v-1];g&&!v&&(y=g),i(m[v],y)}}}function l(e,t){var n,r,i,s,o,u,a,f,l,c,p=[];for(i=0;i<e.length;i++){if(o=e[i][0],u=o.trace,n=t.w*(u.domain.x[1]-u.domain.x[0]),r=t.h*(u.domain.y[1]-u.domain.y[0]),a=u.tiltaxis*Math.PI/180,f=u.pull,Array.isArray(f))for(f=0,s=0;s<u.pull.length;s++)u.pull[s]>f&&(f=u.pull[s]);o.r=Math.min(n/h(u.tilt,Math.sin(a),u.depth),r/h(u.tilt,Math.cos(a),u.depth))/(2+2*f),o.cx=t.l+t.w*(u.domain.x[1]+u.domain.x[0])/2,o.cy=t.t+t.h*(2-u.domain.y[1]-u.domain.y[0])/2,u.scalegroup&&-1===p.indexOf(u.scalegroup)&&p.push(u.scalegroup)}for(s=0;s<p.length;s++){for(c=1/0,l=p[s],i=0;i<e.length;i++)o=e[i][0],o.trace.scalegroup===l&&(c=Math.min(c,o.r*o.r/o.vTotal));for(i=0;i<e.length;i++)o=e[i][0],o.trace.scalegroup===l&&(o.r=Math.sqrt(c*o.vTotal))}}function c(e){function t(e){var t=c.r*Math.sin(e),n=-c.r*Math.cos(e);return p?[t*(1-u*r*r)+n*o*u,t*o*u+n*(1-u*i*i),Math.sin(s)*(n*i-t*r)]:[t,n]}var n,r,i,s,o,u,a,f,l,c=e[0],h=c.trace,p=h.tilt,d=h.rotation*Math.PI/180,v=2*Math.PI/c.vTotal,m="px0",g="px1";if("counterclockwise"===h.direction){for(a=0;a<e.length&&e[a].hidden;a++);if(a===e.length)return;d+=v*e[a].v,v*=-1,m="px1",g="px0"}for(p&&(s=p*Math.PI/180,n=h.tiltaxis*Math.PI/180,o=Math.sin(n)*Math.cos(n),u=1-Math.cos(s),r=Math.sin(n),i=Math.cos(n)),l=t(d),a=0;a<e.length;a++)f=e[a],f.hidden||(f[m]=l,d+=v*f.v/2,f.pxmid=t(d),f.midangle=d,d+=v*f.v/2,l=t(d),f[g]=l,f.largeArc=f.v>c.vTotal/2?1:0)}function h(e,t,n){if(!e)return 1;var r=Math.sin(e*Math.PI/180);return Math.max(.01,n*r*Math.abs(t)+2*Math.sqrt(1-r*r*t*t))}var p=e("../../plotly"),d=e("d3"),v=e("fast-isnumeric"),m=e("tinycolor2"),g=t.exports={};p.Plots.register(g,"pie",["pie","showLegend"],{}),g.attributes=e("./attributes"),g.supplyDefaults=function(e,t,n,r){function i(n,r){return p.Lib.coerce(e,t,g.attributes,n,r)}var s=p.Lib.coerceFont,o=i("values");if(!Array.isArray(o)||!o.length)return void (t.visible=!1);var u=i("labels");Array.isArray(u)||(i("label0"),i("dlabel"));var a=i("marker.line.width");a&&i("marker.line.color");var f=i("marker.colors");Array.isArray(f)||(t.marker.colors=[]),i("scalegroup");var l=i("text"),c=i("textinfo",Array.isArray(l)?"text+percent":"percent");if(i("hoverinfo",1===r._dataLength?"label+text+value+percent":void 0),c&&"none"!==c){var h=i("textposition"),d=Array.isArray(h)||"auto"===h,v=d||"inside"===h,m=d||"outside"===h;if(v||m){var y=s(i,"textfont",r.font);v&&s(i,"insidetextfont",y),m&&s(i,"outsidetextfont",y)}}i("domain.x"),i("domain.y"),i("hole"),i("sort"),i("direction"),i("rotation"),i("pull")},g.layoutAttributes={hiddenlabels:{valType:"data_array"}},g.supplyLayoutDefaults=function(e,t){function n(n,r){return p.Lib.coerce(e,t,g.layoutAttributes,n,r)}n("hiddenlabels")},g.calc=function(e,t){var n,o,u,a,f,l,c=t.values,h=t.labels,d=[],g=e._fullLayout,y=g._piecolormap,b={},w=!1,E=0,S=g.hiddenlabels||[];if(t.dlabel)for(h=new Array(c.length),n=0;n<c.length;n++)h[n]=String(t.label0+n*t.dlabel);for(n=0;n<c.length;n++)o=c[n],v(o)&&(o=+o,0>o||(u=h[n],(void 0===u||""===u)&&(u=n),u=String(u),void 0===b[u]&&(b[u]=!0,a=m(t.marker.colors[n]),a.isValid()?(a=p.Color.tinyRGB(a),y[u]||(y[u]=a)):y[u]?a=y[u]:(a=!1,w=!0),f=-1!==S.indexOf(u),f||(E+=o),d.push({v:o,label:u,color:a,i:n,hidden:f}))));if(t.sort&&d.sort(function(e,t){return t.v-e.v}),w)for(n=0;n<d.length;n++)l=d[n],l.color===!1&&(y[l.label]=l.color=s(g._piedefaultcolorcount),g._piedefaultcolorcount++);if(d[0]&&(d[0].vTotal=E),t.textinfo&&"none"!==t.textinfo){var x,T=-1!==t.textinfo.indexOf("label"),N=-1!==t.textinfo.indexOf("text"),C=-1!==t.textinfo.indexOf("value"),k=-1!==t.textinfo.indexOf("percent");for(n=0;n<d.length;n++)l=d[n],x=T?[l.label]:[],N&&t.text[l.i]&&x.push(t.text[l.i]),C&&x.push(i(l.v)),k&&x.push(r(l.v/E)),l.text=x.join("<br>")}return d};var y;g.plot=function(e,t){var n=e._fullLayout;l(t,n._size);var s=n._pielayer.selectAll("g.trace").data(t);s.enter().append("g").attr({"stroke-linejoin":"round","class":"trace"}),s.exit().remove(),s.order(),s.each(function(t){var s=d.select(this),l=t[0],h=l.trace,v=0,m=(h.depth||0)*l.r*Math.sin(v)/2,g=h.tiltaxis||0,y=g*Math.PI/180,b=[m*Math.sin(y),m*Math.cos(y)],w=l.r*Math.cos(v),E=s.selectAll("g.part").data(h.tilt?["top","sides"]:["top"]);E.enter().append("g").attr("class",function(e){return e+" part"}),E.exit().remove(),E.order(),c(t),s.selectAll(".top").each(function(){var s=d.select(this).selectAll("g.slice").data(t);s.enter().append("g").classed("slice",!0),s.exit().remove();var c=[[[],[]],[[],[]]],v=!1;s.each(function(t){function s(){var n=e._fullLayout,s=e._fullData[h.index],u=s.hoverinfo;if("all"===u&&(u="label+text+value+percent+name"),!e._dragging&&n.hovermode!==!1&&"none"!==u&&u){var a=o(t,l),f=y+t.pxmid[0]*(1-a),c=E+t.pxmid[1]*(1-a),d=[];-1!==u.indexOf("label")&&d.push(t.label),s.text&&s.text[t.i]&&-1!==u.indexOf("text")&&d.push(s.text[t.i]),-1!==u.indexOf("value")&&d.push(i(t.v)),-1!==u.indexOf("percent")&&d.push(r(t.v/l.vTotal)),p.Fx.loneHover({x0:f-a*l.r,x1:f+a*l.r,y:c,text:d.join("<br>"),name:-1!==u.indexOf("name")?s.name:void 0,color:t.color,idealAlign:t.pxmid[0]<0?"left":"right"},{container:n._hoverlayer.node(),outerContainer:n._paper.node()}),N=!0}}function f(){N&&(p.Fx.loneUnhover(n._hoverlayer.node()),N=!1)}function m(e,n,r,i){return"a"+i*l.r+","+i*w+" "+g+" "+t.largeArc+(r?" 1 ":" 0 ")+i*(n[0]-e[0])+","+i*(n[1]-e[1])}if(t.hidden)return void d.select(this).selectAll("path,g").remove();c[t.pxmid[1]<0?0:1][t.pxmid[0]<0?0:1].push(t);var y=l.cx+b[0],E=l.cy+b[1],S=d.select(this),T=S.selectAll("path.surface").data([t]),N=!1;if(T.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),S.select("path.textline").remove(),S.on("mouseover",s).on("mouseout",f),h.pull){var C=+(Array.isArray(h.pull)?h.pull[t.i]:h.pull)||0;C>0&&(y+=C*t.pxmid[0],E+=C*t.pxmid[1])}t.cxFinal=y,t.cyFinal=E;var k=h.hole;if(t.v===l.vTotal){var L="M"+(y+t.px0[0])+","+(E+t.px0[1])+m(t.px0,t.pxmid,!0,1)+m(t.pxmid,t.px0,!0,1)+"Z";k?T.attr("d","M"+(y+k*t.px0[0])+","+(E+k*t.px0[1])+m(t.px0,t.pxmid,!1,k)+m(t.pxmid,t.px0,!1,k)+"Z"+L):T.attr("d",L)}else{var A=m(t.px0,t.px1,!0,1);if(k){var O=1-k;T.attr("d","M"+(y+k*t.px1[0])+","+(E+k*t.px1[1])+m(t.px1,t.px0,!1,k)+"l"+O*t.px0[0]+","+O*t.px0[1]+A+"Z")}else T.attr("d","M"+y+","+E+"l"+t.px0[0]+","+t.px0[1]+A+"Z")}var M=Array.isArray(h.textposition)?h.textposition[t.i]:h.textposition,_=S.selectAll("g.slicetext").data(t.text&&"none"!==M?[0]:[]);_.enter().append("g").classed("slicetext",!0),_.exit().remove(),_.each(function(){var e=d.select(this).selectAll("text").data([0]);e.enter().append("text").attr("data-notex",1),e.exit().remove(),e.text(t.text).attr({"class":"slicetext",transform:"","data-bb":"","text-anchor":"middle",x:0,y:0}).call(p.Drawing.font,"outside"===M?h.outsidetextfont:h.insidetextfont).call(p.util.convertToTspans),e.selectAll("tspan.line").attr({x:0,y:0});var n,r=p.Drawing.bBox(e.node());"outside"===M?n=a(r,t):(n=u(r,t,l),"auto"===M&&n.scale<1&&(e.call(p.Drawing.font,h.outsidetextfont),(h.outsidetextfont.family!==h.insidetextfont.family||h.outsidetextfont.size!==h.insidetextfont.size)&&(e.attr({"data-bb":""}),r=p.Drawing.bBox(e.node())),n=a(r,t)));var i=y+t.pxmid[0]*n.rCenter+(n.x||0),s=E+t.pxmid[1]*n.rCenter+(n.y||0);n.outside&&(t.yLabelMin=s-r.height/2,t.yLabelMid=s,t.yLabelMax=s+r.height/2,t.labelExtraX=0,t.labelExtraY=0,v=!0),e.attr("transform","translate("+i+","+s+")"+(n.scale<1?"scale("+n.scale+")":"")+(n.rotate?"rotate("+n.rotate+")":"")+"translate("+ -(r.left+r.right)/2+","+ -(r.top+r.bottom)/2+")")})}),v&&f(c,h),s.each(function(e){if(e.labelExtraX||e.labelExtraY){var t=d.select(this),n=t.select("g.slicetext text");n.attr("transform","translate("+e.labelExtraX+","+e.labelExtraY+")"+n.attr("transform"));var r=e.cxFinal+e.pxmid[0],i=e.cyFinal+e.pxmid[1],s="M"+r+","+i,o=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var u=e.labelExtraX*e.pxmid[1]/e.pxmid[0],a=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);s+=Math.abs(u)>Math.abs(a)?"l"+a*e.pxmid[0]/e.pxmid[1]+","+a+"H"+(r+e.labelExtraX+o):"l"+e.labelExtraX+","+u+"v"+(a-u)+"h"+o}else s+="V"+(e.yLabelMid+e.labelExtraY)+"h"+o;t.append("path").classed("textline",!0).call(p.Color.stroke,h.outsidetextfont.color).attr({"stroke-width":Math.min(2,h.outsidetextfont.size/8),d:s,fill:"none"})}})})}),setTimeout(function(){s.selectAll("tspan").each(function(){var e=d.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)},g.style=function(e){e._fullLayout._pielayer.selectAll(".trace").each(function(e){var t=e[0],n=t.trace,r=d.select(this);r.style({opacity:n.opacity}),r.selectAll(".top path.surface").each(function(e){d.select(this).call(g.styleOne,e,n)})})},g.styleOne=function(e,t,n){var r=n.marker.line.color;Array.isArray(r)&&(r=r[t.i]||p.Color.defaultLine);var i=n.marker.line.width||0;Array.isArray(i)&&(i=i[t.i]||0),e.style({"stroke-width":i,fill:t.color}).call(p.Color.stroke,r)}},{"../../plotly":330,"./attributes":395,d3:53,"fast-isnumeric":58,tinycolor2:213}],397:[function(e,t,n){var r=e("../../plotly");t.exports={x:{valType:"data_array"},x0:{valType:"any",dflt:0},dx:{valType:"number",dflt:1},y:{valType:"data_array"},y0:{valType:"any",dflt:0},dy:{valType:"number",dflt:1},text:{valType:"string",dflt:"",arrayOk:!0},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:2},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear"},smoothing:{valType:"number",min:0,max:1.3,dflt:1},dash:{valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid"}},connectgaps:{valType:"boolean",dflt:!1},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx"],dflt:"none"},fillcolor:{valType:"color"},marker:{symbol:{valType:"enumerated",values:r.Drawing.symbolList,dflt:"circle",arrayOk:!0},opacity:{valType:"number",min:0,max:1,arrayOk:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0},color:{valType:"color",arrayOk:!0},maxdisplayed:{valType:"number",min:0,dflt:0},sizeref:{valType:"number",dflt:1},sizemin:{valType:"number",min:0,dflt:0},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter"},colorscale:{valType:"colorscale"},cauto:{valType:"boolean",dflt:!0},cmax:{valType:"number",dflt:null},cmin:{valType:"number",dflt:null},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1},showscale:{valType:"boolean",dflt:!1},line:{color:{valType:"color",arrayOk:!0},width:{valType:"number",min:0,arrayOk:!0},colorscale:{valType:"colorscale"},cauto:{valType:"boolean",dflt:!0},cmax:{valType:"number",dflt:null},cmin:{valType:"number",dflt:null},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1}}},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0},textfont:{family:{valType:"string",noBlank:!0,strict:!0,arrayOk:!0},size:{valType:"number",min:1,arrayOk:!0},color:{valType:"color",arrayOk:!0}},r:{valType:"data_array"},t:{valType:"data_array"},_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../plotly":330}],398:[function(e,t,n){"use strict";function r(e,t,n){var r=n("line.shape");"spline"===r&&n("line.smoothing")}var i=e("../../plotly"),s=e("d3"),o=e("fast-isnumeric"),u=t.exports={};i.Plots.register(u,"scatter",["cartesian","symbols","markerColorscale","errorBarsOK","showLegend"],{}),u.PTS_LINESONLY=20,u.attributes=e("./attributes"),u.handleXYDefaults=function(e,t,n){var r,i=n("x"),s=n("y");if(i)s?(r=Math.min(i.length,s.length),r<i.length&&(t.x=i.slice(0,r)),r<s.length&&(t.y=s.slice(0,r))):(r=i.length,n("y0"),n("dy"));else{if(!s)return 0;r=t.y.length,n("x0"),n("dx")}return r},u.supplyDefaults=function(e,t,n,s){function o(n,r){return i.Lib.coerce(e,t,u.attributes,n,r)}var a=u.handleXYDefaults(e,t,o),f=a<u.PTS_LINESONLY?"lines+markers":"lines";return a?(o("text"),o("mode",f),u.hasLines(t)&&(u.lineDefaults(e,t,n,o),r(e,t,o),o("connectgaps")),u.hasMarkers(t)&&u.markerDefaults(e,t,n,s,o),u.hasText(t)&&u.textDefaults(e,t,s,o),(u.hasMarkers(t)||u.hasText(t))&&o("marker.maxdisplayed"),o("fill"),"none"!==t.fill&&(u.fillColorDefaults(e,t,n,o),u.hasLines(t)||r(e,t,o)),i.ErrorBars.supplyDefaults(e,t,n,{axis:"y"}),void i.ErrorBars.supplyDefaults(e,t,n,{axis:"x",inherit:"y"})):void (t.visible=!1)},u.lineDefaults=function(e,t,n,r){var i=(e.marker||{}).color;r("line.color",(Array.isArray(i)?!1:i)||n),r("line.width"),r("line.dash")},u.markerDefaults=function(e,t,n,r,s){var o,a=u.isBubble(e),f=(e.line||{}).color;f&&(n=f),s("marker.symbol"),s("marker.opacity",a?.7:1),s("marker.size"),s("marker.color",n),i.Colorscale.hasColorscale(e,"marker")&&i.Colorscale.handleDefaults(e,t,r,s,{prefix:"marker.",cLetter:"c"}),o=f&&t.marker.color!==f?f:a?i.Color.background:i.Color.defaultLine,s("marker.line.color",o),i.Colorscale.hasColorscale(e,"marker.line")&&i.Colorscale.handleDefaults(e,t,r,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width",a?1:0),a&&(s("marker.sizeref"),s("marker.sizemin"),s("marker.sizemode"))},u.textDefaults=function(e,t,n,r){r("textposition"),i.Lib.coerceFont(r,"textfont",n.font)},u.fillColorDefaults=function(e,t,n,r){var s=!1;if(t.marker){var o=t.marker.color,u=(t.marker.line||{}).color;o&&!Array.isArray(o)?s=o:u&&!Array.isArray(u)&&(s=u)}r("fillcolor",i.Color.addOpacity((t.line||{}).color||s||n,.5))},u.cleanData=function(e){var t,n,r,i,s;for(t=0;t<e.length;t++)if(n=e[t],r=n.fill,"none"!==r&&"scatter"===n.type&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(i=t-1;i>=0;i--)if(s=e[i],"scatter"===s.type&&s.xaxis===n.xaxis&&s.yaxis===n.yaxis){s.opacity=void 0;break}},u.hasLines=function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},u.hasMarkers=function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("markers")},u.hasText=function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},u.isBubble=function(e){return"object"==typeof e.marker&&Array.isArray(e.marker.size)},u.colorbar=function(e,t){var n=t[0].trace,r=n.marker,u="cb"+n.uid;if(e._fullLayout._infolayer.selectAll("."+u).remove(),void 0===r||!r.showscale)return void i.Plots.autoMargin(e,u);var f=i.Colorscale.getScale(r.colorscale),l=r.color,c=r.cmin,h=r.cmax;o(c)||(c=i.Lib.aggNums(Math.min,null,l)),o(h)||(h=i.Lib.aggNums(Math.max,null,l));var p=t[0].t.cb=i.Colorbar(e,u);p.fillcolor(s.scale.linear().domain(f.map(function(e){return c+e[0]*(h-c)})).range(f.map(function(e){return e[1]}))).filllevels({start:c,end:h,size:(h-c)/254}).options(r.colorbar)(),i.Lib.markTime("done colorbar")},u.getBubbleSizeFn=function(e){var t=e.marker,n=t.sizeref||1,r=t.sizemin||0,i="area"===t.sizemode?function(e){return Math.sqrt(e/n)}:function(e){return e/n};return function(e){var t=i(e/2);return o(t)&&t>0?Math.max(t,r):0}},u.calc=function(e,t){var n=i.Axes.getFromId(e,t.xaxis||"x"),r=i.Axes.getFromId(e,t.yaxis||"y");i.Lib.markTime("in Scatter.calc");var s=n.makeCalcdata(t,"x");i.Lib.markTime("finished convert x");var a=r.makeCalcdata(t,"y");i.Lib.markTime("finished convert y");var f,l,c,h=Math.min(s.length,a.length);n._minDtick=0,r._minDtick=0,s.length>h&&s.splice(h,s.length-h),a.length>h&&a.splice(h,a.length-h);var p={padded:!0},d={padded:!0};if(u.hasMarkers(t)){if(f=t.marker,l=f.size,Array.isArray(l)){var v={type:"linear"};i.Axes.setConvert(v),l=v.makeCalcdata(t.marker,"size"),l.length>h&&l.splice(h,l.length-h)}var m,g=1.6*(t.marker.sizeref||1);m="area"===t.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/g),3)}:function(e){return Math.max((e||0)/g,3)},p.ppad=d.ppad=Array.isArray(l)?l.map(m):m(l)}u.calcMarkerColorscales(t),!("tozerox"===t.fill||"tonextx"===t.fill&&e.firstscatter)||s[0]===s[h-1]&&a[0]===a[h-1]?t.error_y.visible||-1===["tonexty","tozeroy"].indexOf(t.fill)&&(u.hasMarkers(t)||u.hasText(t))||(p.padded=!1,p.ppad=0):p.tozero=!0,!("tozeroy"===t.fill||"tonexty"===t.fill&&e.firstscatter)||s[0]===s[h-1]&&a[0]===a[h-1]?-1!==["tonextx","tozerox"].indexOf(t.fill)&&(d.padded=!1):d.tozero=!0,i.Lib.markTime("ready for Axes.expand"),i.Axes.expand(n,s,p),i.Lib.markTime("done expand x"),i.Axes.expand(r,a,d),i.Lib.markTime("done expand y");var y=new Array(h);for(c=0;h>c;c++)y[c]=o(s[c])&&o(a[c])?{x:s[c],y:a[c]}:{x:!1,y:!1};return void 0!==typeof l&&i.Lib.mergeArray(l,y,"ms"),e.firstscatter=!1,y},u.calcMarkerColorscales=function(e){if(u.hasMarkers(e)){var t=e.marker;i.Colorscale.hasColorscale(e,"marker")&&i.Colorscale.calc(e,t.color,"marker","c"),i.Colorscale.hasColorscale(e,"marker.line")&&i.Colorscale.calc(e,t.line.color,"marker.line","c")}},u.selectMarkers=function(e,t,n){var r=t.x(),i=t.y(),o=s.extent(r.range.map(r.l2c)),f=s.extent(i.range.map(i.l2c));n.forEach(function(e,t){var r=e[0].trace;if(u.hasMarkers(r)){var i=r.marker.maxdisplayed;if(0!==i){var s=e.filter(function(e){return e.x>=o[0]&&e.x<=o[1]&&e.y>=f[0]&&e.y<=f[1]}),a=Math.ceil(s.length/i),c=0;n.forEach(function(e,n){var r=e[0].trace;u.hasMarkers(r)&&r.marker.maxdisplayed>0&&t>n&&c++});var h=Math.round(c*a/3+Math.floor(c/3)*a/7.1);e.forEach(function(e){delete e.vis}),s.forEach(function(e,t){0===Math.round((t+h)%a)&&(e.vis=!0)})}}})},u.arraysToCalcdata=function(e){var t=e[0].trace,n=t.marker;if(i.Lib.mergeArray(t.text,e,"tx"),i.Lib.mergeArray(t.textposition,e,"tp"),t.textfont&&(i.Lib.mergeArray(t.textfont.size,e,"ts"),i.Lib.mergeArray(t.textfont.color,e,"tc"),i.Lib.mergeArray(t.textfont.family,e,"tf")),n&&n.line){var r=n.line;i.Lib.mergeArray(n.opacity,e,"mo"),i.Lib.mergeArray(n.symbol,e,"mx"),i.Lib.mergeArray(n.color,e,"mc"),i.Lib.mergeArray(r.color,e,"mlc"),i.Lib.mergeArray(r.width,e,"mlw")}},u.plot=function(e,t,n){function r(e){return e.filter(function(e){return e.vis})}u.selectMarkers(e,t,n);var o=t.x(),f=t.y(),l=t.plot.select(".scatterlayer").selectAll("g.trace.scatter").data(n);l.enter().append("g").attr("class","trace scatter").style("stroke-miterlimit",2);var c,h,p,d="";l.each(function(e){var t=e[0].trace,n=t.line;if(t.visible===!0&&(u.arraysToCalcdata(e),u.hasLines(t)||"none"!==t.fill)){var r,l,v,m,g=s.select(this),y="",b="";c="tozero"===t.fill.substr(0,6)||"to"===t.fill.substr(0,2)&&!d?g.append("path").classed("js-fill",!0):null,p&&(h=p.datum(e)),p=g.append("path").classed("js-fill",!0),-1!==["hv","vh","hvh","vhv"].indexOf(n.shape)?(l=i.Drawing.steps(n.shape),v=i.Drawing.steps(n.shape.split("").reverse().join(""))):l=v="spline"===n.shape?function(e){return i.Drawing.smoothopen(e,n.smoothing)}:function(e){return"M"+e.join("L")},m=function(e){return"L"+v(e.reverse()).substr(1)};var w=u.linePoints(e,{xaxis:o,yaxis:f,connectGaps:t.connectgaps,baseTolerance:Math.max(n.width||1,3)/4,linear:"linear"===n.shape});if(w.length){for(var E=w[0][0],S=w[w.length-1],x=S[S.length-1],T=0;T<w.length;T++){var N=w[T];r=l(N),y+=y?"L"+r.substr(1):r,b=m(N)+b,u.hasLines(t)&&N.length>1&&g.append("path").classed("js-line",!0).attr("d",r)}c?E&&x&&("y"===t.fill.charAt(t.fill.length-1)?E[1]=x[1]=f.c2p(0,!0):E[0]=x[0]=o.c2p(0,!0),c.attr("d",y+"L"+x+"L"+E+"Z")):"tonext"===t.fill.substr(0,6)&&y&&d&&h.attr("d",y+d+"Z"),d=b}}}),l.selectAll("path:not([d])").remove(),l.append("g").attr("class","points").each(function(e){var t=e[0].trace,n=s.select(this),l=u.hasMarkers(t),c=u.hasText(t);!l&&!c||t.visible!==!0?n.remove():(l&&n.selectAll("path.point").data(t.marker.maxdisplayed?r:i.Lib.identity).enter().append("path").classed("point",!0).call(i.Drawing.translatePoints,o,f),c&&n.selectAll("g").data(t.marker.maxdisplayed?r:i.Lib.identity).enter().append("g").append("text").call(i.Drawing.translatePoints,o,f))})},u.linePoints=function(e,t){function n(t){var n=S.c2p(e[t].x),r=x.c2p(e[t].y);return n===L||r===L?!1:[n,r]}function r(e){var t=e[0]/S._length,n=e[1]/x._length;return(1+10*Math.max(0,-t,t-1,-n,n-1))*N}function s(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S=t.xaxis,x=t.yaxis,T=t.connectGaps,N=t.baseTolerance,C=t.linear,k=[],L=i.Axes.BADNUM,A=.2,O=new Array(e.length),M=0;for(o=0;o<e.length;o++)if(u=n(o)){for(M=0,O[M++]=u,o++;o<e.length;o++){if(f=n(o),!f){if(T)continue;break}if(C){if(h=s(f,u),!(h<r(f)*A)){for(d=[(f[0]-u[0])/h,(f[1]-u[1])/h],l=u,m=h,g=b=w=0,p=!1,a=f,o++;o<e.length;o++){if(c=n(o),!c){if(T)continue;break}if(v=[c[0]-u[0],c[1]-u[1]],E=v[0]*d[1]-v[1]*d[0],b=Math.min(b,E),w=Math.max(w,E),w-b>r(c))break;a=c,y=v[0]*d[0]+v[1]*d[1],y>m?(m=y,f=c,p=!1):g>y&&(g=y,l=c,p=!0)}if(p?(O[M++]=f,a!==l&&(O[M++]=l)):(l!==u&&(O[M++]=l),a!==f&&(O[M++]=f)),O[M++]=a,o>=e.length||!c)break;O[M++]=c,u=c}}else O[M++]=f}k.push(O.slice(0,M))}return k},u.style=function(e){var t=s.select(e).selectAll("g.trace.scatter");t.style("opacity",function(e){return e[0].trace.opacity}),t.selectAll("g.points").each(function(e){s.select(this).selectAll("path.point").call(i.Drawing.pointStyle,e.trace||e[0].trace),s.select(this).selectAll("text").call(i.Drawing.textPointStyle,e.trace||e[0].trace)}),t.selectAll("g.trace path.js-line").call(i.Drawing.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(i.Drawing.fillGroupStyle)},u.getTraceColor=function(e,t){var n,r;if("lines"===e.mode)return n=e.line.color,n&&i.Color.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var s=t.mcc||(e.marker||{}).color,o=t.mlcc||((e.marker||{}).line||{}).color;return r=s&&i.Color.opacity(s)?s:o&&i.Color.opacity(o)&&(t.mlw||((e.marker||{}).line||{}).width)?o:"",r?i.Color.opacity(r)<.3?i.Color.addOpacity(r,.3):r:(n=(e.line||{}).color,n&&i.Color.opacity(n)&&u.hasLines(e)&&e.line.width?n:e.fillcolor)},u.hoverPoints=function(e,t,n,r){var s=e.cd,o=s[0].trace,a=e.xa,f=e.ya,l=function(e){var n=Math.max(3,e.mrc||0);return Math.max(Math.abs(a.c2p(e.x)-a.c2p(t))-n,1-3/n)},c=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(f.c2p(e.y)-f.c2p(n))-t,1-3/t)},h=function(e){var r=Math.max(3,e.mrc||0),i=Math.abs(a.c2p(e.x)-a.c2p(t)),s=Math.abs(f.c2p(e.y)-f.c2p(n));return Math.max(Math.sqrt(i*i+s*s)-r,1-3/r)},p=i.Fx.getDistanceFunction(r,l,c,h);if(i.Fx.getClosest(s,p,e),e.index!==!1){var d=s[e.index],v=a.c2p(d.x,!0),m=f.c2p(d.y,!0),g=d.mrc||1;return e.color=u.getTraceColor(o,d),e.x0=v-g,e.x1=v+g,e.xLabelVal=d.x,e.y0=m-g,e.y1=m+g,e.yLabelVal=d.y,d.tx?e.text=d.tx:o.text&&(e.text=o.text),i.ErrorBars.hoverInfo(d,o,e),[e]}}},{"../../plotly":330,"./attributes":397,d3:53,"fast-isnumeric":58}],399:[function(e,t,n){"use strict";function r(e){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var i=e("../scatter/attributes"),s=e("../../constants/gl_markers.json"),o=e("../../lib/extend").extendFlat,u=i.line,a=i.marker,f=a.line;t.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},text:o({},i.text,{}),mode:o({},i.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:r("x"),y:r("y"),z:r("z")},line:{color:u.color,width:u.width,dash:u.dash},marker:{color:a.color,symbol:{valType:"enumerated",values:Object.keys(s),dflt:"circle",arrayOk:!0},size:o({},a.size,{dflt:8}),sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorscale:a.colorscale,cauto:a.cauto,cmax:a.cmax,cmin:a.cmin,autocolorscale:a.autocolorscale,reversescale:a.reversescale,showscale:a.showscale,line:{color:f.color,width:o({},f.width,{arrayOk:!1}),colorscale:f.colorscale,cauto:f.cauto,cmax:f.cmax,cmin:f.cmin,autocolorscale:f.autocolorscale,reversescale:f.reversescale}},textposition:o({},i.textposition,{dflt:"top center"}),textfont:i.textfont,_nestedModules:{error_x:"ErrorBars",error_y:"ErrorBars",error_z:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../constants/gl_markers.json":303,"../../lib/extend":310,"../scatter/attributes":397}],400:[function(e,t,n){"use strict";function r(e,t){function n(e,n){return e in t?t[e]:n}if(!t||!t.visible)return null;var r,i,s,o,u,a=new Array(e.length),f=n("type","percent"),l=n("symmetric",!0),c=+n("value",10),h=+n("valueminus",10),p=n("array",null),d=n("arrayminus",null);if(l&&(h=c,d=p),!("data"!==f||p&&d))return null;for(u=0;u<e.length;++u)switch(r=+e[u],f){case"percent":i=Math.abs(r)*c/100,s=Math.abs(r)*h/100,a[u]=[-s,i];break;case"constant":a[u]=[-h,c];break;case"sqrt":o=Math.sqrt(Math.abs(r)),a[u]=[-o,o];break;case"data":a[u]=[+d[u]-r,+p[u]-r]}return a}function i(e){for(var t=0;t<e.length;++t)if(e[t])return e[t].length;return 0}function s(e){var t,n,s,o,u,a=[r(e.x,e.error_x),r(e.y,e.error_y),r(e.z,e.error_z)],f=i(a);if(0===f)return null;for(t=new Array(f),n=0;f>n;++n){for(u=[[0,0,0],[0,0,0]],s=0;3>s;++s)if(a[s])for(o=0;2>o;++o)u[o][s]=a[s][n][o];t[n]=u}return t}t.exports=s},{}],401:[function(e,t,n){"use strict";function r(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}function i(e,t,n){var r,i=(n+1)%3,s=(n+2)%3,o=[],u=[];for(r=0;r<e.length;++r){var a=e[r];!isNaN(a[i])&&isFinite(a[i])&&!isNaN(a[s])&&isFinite(a[s])&&(o.push([a[i],a[s]]),u.push(r))}var f=y(o);for(r=0;r<f.length;++r)for(var l=f[r],c=0;c<l.length;++c)l[c]=u[l[c]];return{positions:e,cells:f,meshColor:t}}function s(e){var t,n,r=[0,0,0],i=[[0,0,0],[0,0,0],[0,0,0]],s=[0,0,0];for(t=0;3>t;++t)n=e[t],n&&n.copy_zstyle!==!1&&(n=e[2]),n&&(r[t]=n.width/100,i[t]=b(n.color),s=n.thickness);return{capSize:r,color:i,lineWidth:s}}function o(e){var t=[0,0];return Array.isArray(e)?[0,-1]:(e.indexOf("bottom")>=0&&(t[1]+=1),e.indexOf("top")>=0&&(t[1]-=1),e.indexOf("left")>=0&&(t[0]-=1),e.indexOf("right")>=0&&(t[0]+=1),t)}function u(e,t){return t(4*e)}function a(e){return S[e]}function f(e,t,n,r,i){var s=null;if(Array.isArray(e)){s=[];for(var o=0;t>o;o++)void 0===e[o]?s[o]=r:s[o]=n(e[o],i)}else s=n(e,p.Lib.identity);return s}function l(e,t){var n,r,i,l,c,h,d=[],v=e.fullSceneLayout,m=e.dataScale,g=e.dataCenter,y=v.xaxis,E=v.yaxis,S=v.zaxis,T=t.marker,N=t.line,C=s([t.error_x,t.error_y,t.error_z]),L=t.x||[],A=t.y||[],O=t.z||[],M=L.length;for(r=0;M>r;r++)i=y.d2l(L[r])*m[0]-g[0],l=E.d2l(A[r])*m[1]-g[1],c=S.d2l(O[r])*m[2]-g[2],d[r]=[i,l,c];if(Array.isArray(t.text))h=t.text;else if(void 0!==t.text)for(h=new Array(M),r=0;M>r;r++)h[r]=t.text;if(n={position:d,mode:t.mode,text:h},"line"in t&&(n.lineColor=b(N.color),n.lineWidth=N.width,n.lineDashes=N.dash),"marker"in t){var _=p.Scatter.getBubbleSizeFn(t);n.scatterColor=w(T,1,M),n.scatterSize=f(T.size,M,u,20,_),n.scatterMarker=f(T.symbol,M,a,""),n.scatterLineWidth=T.line.width,n.scatterLineColor=w(T.line,1,M),n.scatterAngle=0}"textposition"in t&&(n.textOffset=o(t.textposition),n.textColor=w(t.textfont,1,M),n.textSize=f(t.textfont.size,M,p.Lib.identity,12),n.textFont=t.textfont.family,n.textAngle=0);var D=["x","y","z"];for(n.project=[!1,!1,!1],n.projectScale=[1,1,1],n.projectOpacity=[1,1,1],r=0;3>r;++r){var P=t.projection[D[r]];(n.project[r]=P.show)&&(n.projectOpacity[r]=P.opacity,n.projectScale[r]=P.scale)}return n.errorBounds=x(t),n.errorColor=C.color,n.errorLineWidth=C.lineWidth,n.errorCapSize=C.capSize,n.delaunayAxis=t.surfaceaxis,n.delaunayColor=b(t.surfacecolor),n}function c(e){if(Array.isArray(e)){var t=e[0];return Array.isArray(t)&&(e=t),"rgb("+e.slice(0,3).map(function(e){return Math.round(255*e)})+")"}return null}function h(e,t){var n=new r(e,t.uid);return n.update(t),n}var p=e("../../plotly"),d=e("gl-line3d"),v=e("gl-scatter3d"),m=e("gl-error3d"),g=e("gl-mesh3d"),y=e("delaunay-triangulate"),b=e("../../lib/str2rgbarray"),w=e("../../lib/gl_format_color"),E=e("../../constants/gl3d_dashes.json"),S=e("../../constants/gl_markers.json"),x=e("./calc_errors"),T=r.prototype;T.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),this.textLabels&&void 0!==this.textLabels[e.data.index]?e.textLabel=this.textLabels[e.data.index]:e.textLabel="";var t=e.data.index;return e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},T.update=function(e){var t,n,r,s,o=this.scene.glplot.gl,u=E.solid;this.data=e;var a=l(this.scene,e);"mode"in a&&(this.mode=a.mode),"lineDashes"in a&&a.lineDashes in E&&(u=E[a.lineDashes]),this.color=c(a.scatterColor)||c(a.lineColor),this.dataPoints=a.position,t={gl:o,position:a.position,color:a.lineColor,lineWidth:a.lineWidth||1,dashes:u[0],dashScale:u[1],opacity:e.opacity},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(t):(this.linePlot=d(t),this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var f=e.opacity;if(e.marker&&"number"==typeof e.marker.opacity&&(f*=e.marker.opacity),n={gl:o,position:a.position,color:a.scatterColor,size:a.scatterSize,glyph:a.scatterMarker,opacity:f,orthographic:!0,lineWidth:a.scatterLineWidth,lineColor:a.scatterLineColor,project:a.project,projectScale:a.projectScale,projectOpacity:a.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(n):(this.scatterPlot=v(n),this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),s={gl:o,position:a.position,glyph:a.text,color:a.textColor,size:a.textSize,angle:a.textAngle,alignment:a.textOffset,font:a.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=a.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(s):(this.textMarkers=v(s),this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),r={gl:o,position:a.position,color:a.errorColor,error:a.errorBounds,lineWidth:a.errorLineWidth,capSize:a.errorCapSize,opacity:e.opacity},this.errorBars?a.errorBounds?this.errorBars.update(r):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):a.errorBounds&&(this.errorBars=m(r),this.scene.glplot.add(this.errorBars)),a.delaunayAxis>=0){var h=i(a.position,a.delaunayColor,a.delaunayAxis);this.delaunayMesh?this.delaunayMesh.update(h):(h.gl=o,this.delaunayMesh=g(h),this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},T.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.textMarkers),this.delaunayMesh.dispose())},t.exports=h},{"../../constants/gl3d_dashes.json":302,"../../constants/gl_markers.json":303,"../../lib/gl_format_color":312,"../../lib/str2rgbarray":323,"../../plotly":330,"./calc_errors":400,"delaunay-triangulate":54,"gl-error3d":62,"gl-line3d":68,"gl-mesh3d":91,"gl-scatter3d":134}],402:[function(e,t,n){"use strict";function r(e,t,n){var r=0,i=n("x"),s=n("y"),o=n("z");return i&&s&&o&&(r=Math.min(i.length,s.length,o.length),r<i.length&&(t.x=i.slice(0,r)),r<s.length&&(t.y=s.slice(0,r)),r<o.length&&(t.z=o.slice(0,r))),r}var i=e("../../plotly"),s=e("./");t.exports=function(e,t,n,o){function u(n,r){return i.Lib.coerce(e,t,s.attributes,n,r)}var f=i.Scatter,l=r(e,t,u);if(!l)return void (t.visible=!1);u("text"),u("mode"),f.hasLines(t)&&f.lineDefaults(e,t,n,u),f.hasMarkers(t)&&f.markerDefaults(e,t,n,o,u),f.hasText(t)&&f.textDefaults(e,t,o,u);var c=(t.line||{}).color,h=(t.marker||{}).color;u("surfaceaxis")>=0&&u("surfacecolor",c||h);for(var p=["x","y","z"],d=0;3>d;++d){var v="projection."+p[d];u(v+".show")&&(u(v+".opacity"),u(v+".scale"))}i.ErrorBars.supplyDefaults(e,t,n,{axis:"z"}),i.ErrorBars.supplyDefaults(e,t,n,{axis:"y",inherit:"z"}),i.ErrorBars.supplyDefaults(e,t,n,{axis:"x",inherit:"z"})}},{"../../plotly":330,"./":403}],403:[function(e,t,n){"use strict";var r=e("../../plotly"),i=t.exports={};r.Plots.register(i,"scatter3d",["gl3d","symbols","markerColorscale","showLegend"],{}),i.attributes=e("./attributes"),i.markerSymbols=e("../../constants/gl_markers.json"),i.supplyDefaults=e("./defaults"),i.colorbar=r.Scatter.colorbar,i.calc=function(e,t){var n=[{x:!1,y:!1,trace:t,t:{}}];return r.Scatter.arraysToCalcdata(n),r.Scatter.calcMarkerColorscales(t),n}},{"../../constants/gl_markers.json":303,"../../plotly":330,"./attributes":399,"./defaults":402}],404:[function(e,t,n){var r=e("../scatter/attributes"),i=e("../../plots/attributes"),s=e("../../lib/extend").extendFlat,o=r.marker,u=r.line,a=o.line;t.exports={lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],dflt:"ISO-3"},mode:s({},r.mode,{dflt:"markers"}),text:s({},r.text,{}),line:{color:u.color,width:u.width,dash:u.dash},marker:{symbol:o.symbol,opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,color:o.color,colorscale:o.colorscale,cauto:o.cauto,cmax:o.cmax,cmin:o.cmin,autocolorscale:o.autocolorscale,reversescale:o.reversescale,showscale:o.showscale,line:{color:a.color,width:a.width,colorscale:a.colorscale,cauto:a.cauto,cmax:a.cmax,cmin:a.cmin,autocolorscale:a.autocolorscale,reversescale:a.reversescale}},textfont:r.textfont,textposition:r.textposition,hoverinfo:s({},i.hoverinfo,{flags:["lon","lat","location","text","name"]}),_nestedModules:{"marker.colorbar":"Colorbar"}}},{"../../lib/extend":310,"../../plots/attributes":331,"../scatter/attributes":397}],405:[function(e,t,n){"use strict";function r(e,t,n){var r,i,s=0,o=n("locations");return o?(n("locationmode"),s=o.length):(r=n("lon")||[],i=n("lat")||[],s=Math.min(r.length,i.length),s<r.length&&(t.lon=r.slice(0,s)),s<i.length&&(t.lat=i.slice(0,s)),s)}var i=e("../../plotly"),s=e("./");t.exports=function(e,t,n,o){function u(n,r){return i.Lib.coerce(e,t,s.attributes,n,r)}var f=i.Scatter,l=r(e,t,u);return l?(u("text"),u("mode"),f.hasLines(t)&&f.lineDefaults(e,t,n,u),f.hasMarkers(t)&&f.markerDefaults(e,t,n,o,u),f.hasText(t)&&f.textDefaults(e,t,o,u),void u("hoverinfo",1===o._dataLength?"lon+lat+location+text":void 0)):void (t.visible=!1)}},{"../../plotly":330,"./":406}],406:[function(e,t,n){"use strict";var r=e("../../plotly"),i=t.exports={};r.Plots.register(i,"scattergeo",["geo","symbols","markerColorscale","showLegend"],{}),i.attributes=e("./attributes"),i.supplyDefaults=e("./defaults"),i.colorbar=r.Scatter.colorbar,i.calc=function(e,t){r.Scatter.calcMarkerColorscales(t)}},{"../../plotly":330,"./attributes":404,"./defaults":405}],407:[function(e,t,n){"use strict";function r(e,t,n){function r(e,r){l(e,t,r,n)}var i=e.marker;if(r(e.text,"tx"),r(e.textposition,"tp"),e.textfont&&(r(e.textfont.size,"ts"),r(e.textfont.color,"tc"),r(e.textfont.family,"tf")),i&&i.line){var s=i.line;r(i.opacity,"mo"),r(i.symbol,"mx"),r(i.color,"mc"),r(i.size,"ms"),r(s.color,"mlc"),r(s.width,"mlw")}}function i(e){for(var t=e.lon.length,n=new Array(t),r=0;t>r;r++)n[r]=[e.lon[r],e.lat[r]];return{type:"LineString",coordinates:n,trace:e}}function s(e,t){function n(t){var n=e.mockAxis;return o.Axes.tickText(n,n.c2l(t),"hover").text+""}var r=t.hoverinfo;if("none"===r)return function(e){delete e.textLabel};var i="all"===r?o.ScatterGeo.attributes.hoverinfo.flags:r.split("+"),s=-1!==i.indexOf("location")&&Array.isArray(t.locations),u=-1!==i.indexOf("lon"),a=-1!==i.indexOf("lat"),f=-1!==i.indexOf("text");return function(e){var r=[];s?r.push(e.location):u&&a?r.push("("+n(e.lon)+", "+n(e.lat)+")"):u?r.push("lon: "+n(e.lon)):a&&r.push("lat: "+n(e.lat)),f&&r.push(e.tx||t.text),e.textLabel=r.join("<br>")}}var o=e("../../plotly"),u=e("d3"),a=e("../../lib/topojson_utils").getTopojsonFeatures,f=e("../../lib/geo_location_utils").locationToFeature,l=e("../../lib/array_to_calc_item"),c=t.exports={};c.calcGeoJSON=function(e,t){var n,i,s,o,u,l,c=[],h=Array.isArray(e.locations);h?(u=e.locations,n=u.length,i=a(e,t),s=function(e,t){var n=f(e.locationmode,u[t],i);return void 0!==n?n.properties.ct:void 0}):(n=e.lon.length,s=function(e,t){return[e.lon[t],e.lat[t]]});for(var p=0;n>p;p++)o=s(e,p),o&&(l={lon:o[0],lat:o[1],location:h?e.locations[p]:null},r(e,l,p),c.push(l));return c.length>0&&(c[0].trace=e),c},c.plot=function(e,t){var n=e.framework.select("g.scattergeolayer"),r=o.Scatter,a=e.topojson;n.selectAll("*").remove();var f=n.selectAll("g.trace.scatter").data(t);f.enter().append("g").attr("class","trace scattergeo"),f.each(function(e){r.hasLines(e)&&e.visible===!0&&u.select(this).append("path").datum(i(e)).attr("class","js-line")}),f.append("g").attr("class","points").each(function(t){function n(n){if(e.showHover){var r=e.projection([n.lon,n.lat]);d(n),o.Fx.loneHover({x:r[0],y:r[1],name:m?t.name:void 0,text:n.textLabel,color:n.mc||(t.marker||{}).color},{container:e.hoverContainer.node()})}}var i=u.select(this),f=r.hasMarkers(t),l=r.hasText(t);if(!f&&!l||t.visible!==!0)return void i.remove();var p=c.calcGeoJSON(t,a),d=s(e,t),v=t.hoverinfo,m="all"===v||-1!==v.indexOf("name");f&&i.selectAll("path.point").data(p).enter().append("path").attr("class","point").on("mouseover",n).on("mouseout",function(){o.Fx.loneUnhover(e.hoverContainer)}).on("mousedown",function(){o.Fx.loneUnhover(e.hoverContainer)}).on("mouseup",n),l&&i.selectAll("g").data(p).enter().append("g").append("text")}),c.style(e)},c.style=function(e){var t=e.framework.selectAll("g.trace.scattergeo");t.style("opacity",function(e){return e.opacity}),t.selectAll("g.points").each(function(e){u.select(this).selectAll("path.point").call(o.Drawing.pointStyle,e),u.select(this).selectAll("text").call(o.Drawing.textPointStyle,e)}),t.selectAll("path.js-line").style("fill","none").each(function(e){var t=e.trace,n=t.line||{};u.select(this).call(o.Color.stroke,n.color).call(o.Drawing.dashLine,n.dash||"",n.width||0)})}},{"../../lib/array_to_calc_item":306,"../../lib/geo_location_utils":311,"../../lib/topojson_utils":325,"../../plotly":330,d3:53}],408:[function(e,t,n){var r=e("../scatter/attributes"),i=e("../../constants/gl2d_dashes.json"),s=e("../../constants/gl_markers.json"),o=e("../../lib/extend").extendFlat,u=r.line,a=r.marker,f=a.line;t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:o({},r.text,{}),mode:{valType:"flaglist",flags:["lines","markers"],extras:["none"]},line:{color:u.color,width:u.width,dash:{valType:"enumerated",values:Object.keys(i),dflt:"solid"}},marker:{color:a.color,symbol:{valType:"enumerated",values:Object.keys(s),dflt:"circle",arrayOk:!0},size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorscale:a.colorscale,cauto:a.cauto,cmax:a.cmax,cmin:a.cmin,autocolorscale:a.autocolorscale,reversescale:a.reversescale,showscale:a.showscale,line:{color:f.color,width:f.width,colorscale:f.colorscale,cauto:f.cauto,cmax:f.cmax,cmin:f.cmin,autocolorscale:f.autocolorscale,reversescale:f.reversescale}},fill:o({},r.fill,{values:["none","tozeroy","tozerox"]}),fillcolor:r.fillcolor,_nestedModules:{error_x:"ErrorBars",error_y:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../constants/gl2d_dashes.json":301,"../../constants/gl_markers.json":303,"../../lib/extend":310,"../scatter/attributes":397}],409:[function(e,t,n){"use strict";function r(e,t){this.scene=e,this.uid=t,this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=[],this.bounds=[0,0,0,0],this.hasLines=!1,this.lineOptions={positions:new Float32Array,color:[0,0,0,1],width:1,fill:[!1,!1,!1,!1],fillColor:[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],dashes:[1]},this.line=d(e.glplot,this.lineOptions),this.line._trace=this,this.hasErrorX=!1,this.errorXOptions={positions:new Float32Array,errors:new Float32Array,lineWidth:1,capSize:0,color:[0,0,0,1]},this.errorX=v(e.glplot,this.errorXOptions),this.errorX._trace=this,this.hasErrorY=!1,this.errorYOptions={positions:new Float32Array,errors:new Float32Array,lineWidth:1,capSize:0,color:[0,0,0,1]},this.errorY=v(e.glplot,this.errorYOptions),this.errorY._trace=this,this.hasMarkers=!1,this.scatterOptions={positions:new Float32Array,sizes:[],colors:[],glyphs:[],borderWidths:[],borderColors:[],size:12,color:[0,0,0,1],borderSize:1,borderColor:[0,0,0,1]},this.scatter=h(e.glplot,this.scatterOptions),this.scatter._trace=this,this.fancyScatter=p(e.glplot,this.scatterOptions),this.fancyScatter._trace=this}function i(e,t,n){return Array.isArray(t)||(t=[t]),s(e,t,n)}function s(e,t,n){for(var r=new Array(n),i=t[0],s=0;n>s;++s)r[s]=e(s>=t.length?i:t[s]);return r}function o(e,t,n){return a(T(e,n),x(t,n),n)}function u(e,t,n,r){var i=y(e,t,r);return i=Array.isArray(i[0])?i:s(c.Lib.identity,[i],r),a(i,x(n,r),r)}function a(e,t,n){for(var r=new Array(4*n),i=0;n>i;++i){for(var s=0;3>s;++s)r[4*i+s]=e[i][s];r[4*i+3]=e[i][s]*t[i]}return r}function f(e,t){if(void 0===Float32Array.slice){for(var n=new Float32Array(t),r=0;t>r;r++)n[r]=e[r];return n}return e.slice(0,t)}function l(e,t){var n=new r(e,t.uid);return n.update(t),n}var c=e("../../plotly"),h=e("gl-scatter2d"),p=e("gl-scatter2d-fancy"),d=e("gl-line2d"),v=e("gl-error2d"),m=e("fast-isnumeric"),g=e("../../lib/str2rgbarray"),y=e("../../lib/gl_format_color"),b=e("../../constants/gl_markers.json"),w=e("../../constants/gl2d_dashes.json"),E=["xaxis","yaxis"],S=r.prototype;S.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:[this.xData[t],this.yData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:Array.isArray(this.color)?this.color[t]:this.color,name:this.name,hoverinfo:this.hoverinfo}},S.isFancy=function(e){if("linear"!==this.scene.xaxis.type)return!0;if("linear"!==this.scene.yaxis.type)return!0;if(!e.x||!e.y)return!0;var t=e.marker||{};if(Array.isArray(t.symbol)||"circle"!==t.symbol||Array.isArray(t.size)||Array.isArray(t.line.width)||Array.isArray(t.opacity))return!0;var n=t.color;if(Array.isArray(n))return!0;var r=Array.isArray(t.line.color);return Array.isArray(r)?!0:this.hasErrorX?!0:this.hasErrorY?!0:!1};var x=i.bind(null,function(e){return+e}),T=i.bind(null,g),N=i.bind(null,function(e){return b[e]||""});S.update=function(e){e.visible!==!0?(this.hasLines=!1,this.hasErrorX=!1,this.hasErrorY=!1,this.hasMarkers=!1):(this.hasLines=c.Scatter.hasLines(e),this.hasErrorX=e.error_x.visible===!0,this.hasErrorY=e.error_y.visible===!0,this.hasMarkers=c.Scatter.hasMarkers(e)),this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.isFancy(e)?this.updateFancy(e):this.updateFast(e),this.color=c.Scatter.getTraceColor(e,{})},S.updateFast=function(e){for(var t,n,r=this.xData=e.x,i=this.yData=e.y,s=r.length,o=new Array(s),u=new Float32Array(2*s),a=this.bounds,l=0,c=0,h=0;s>h;++h)t=r[h],n=i[h],m(t)&&m(n)&&(o[l++]=h,u[c++]=t,u[c++]=n,a[0]=Math.min(a[0],t),a[1]=Math.min(a[1],n),a[2]=Math.max(a[2],t),a[3]=Math.max(a[3],n));u=f(u,c),this.idToIndex=o,this.updateLines(e,u),this.updateError("X",e),this.updateError("Y",e);var p;if(this.hasMarkers){this.scatterOptions.positions=u;var d=g(e.marker.color),v=g(e.marker.line.color),y=e.opacity*e.marker.opacity;d[3]*=y,this.scatterOptions.color=d,v[3]*=y,this.scatterOptions.borderColor=v,p=e.marker.size,this.scatterOptions.size=p,this.scatterOptions.borderSize=e.marker.line.width,this.scatter.update(this.scatterOptions)}else this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[],this.scatter.update(this.scatterOptions);this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[],this.fancyScatter.update(this.scatterOptions),this.expandAxesFast(a,p)},S.updateFancy=function(e){var t,n,r,s,o,a,l,h,p=this.scene,d=p.xaxis,v=p.yaxis,m=this.bounds,g=this.xData=d.makeCalcdata(e,"x"),y=this.yData=v.makeCalcdata(e,"y"),b=c.ErrorBars.calcFromTrace(e,p.fullLayout),w=g.length,E=new Array(w),S=new Float32Array(2*w),T=new Float32Array(4*w),C=new Float32Array(4*w),L=0,A=0,O=0,_=0,D="log"===d.type?function(e){return d.d2l(e)}:function(e){return e},P="log"===v.type?function(e){return v.d2l(e)}:function(e){return e};for(t=0;w>t;++t)r=D(g[t]),s=P(y[t]),isNaN(r)||isNaN(s)||(E[L++]=t,S[A++]=r,S[A++]=s,o=T[O++]=r-b[t].xs||0,a=T[O++]=b[t].xh-r||0,T[O++]=0,T[O++]=0,C[_++]=0,C[_++]=0,l=C[_++]=s-b[t].ys||0,h=C[_++]=b[t].yh-s||0,m[0]=Math.min(m[0],r-o),m[1]=Math.min(m[1],s-l),m[2]=Math.max(m[2],r+a),m[3]=Math.max(m[3],s+h));S=f(S,A),this.idToIndex=E,this.updateLines(e,S),this.updateError("X",e,S,T),this.updateError("Y",e,S,C);var H;if(this.hasMarkers){this.scatterOptions.positions=S,this.scatterOptions.sizes=new Array(L),this.scatterOptions.glyphs=new Array(L),this.scatterOptions.borderWidths=new Array(L),this.scatterOptions.colors=new Array(4*L),this.scatterOptions.borderColors=new Array(4*L);var B,j=c.Scatter.getBubbleSizeFn(e),F=e.marker,I=F.opacity,q=e.opacity,R=u(F,I,q,w),U=N(F.symbol,w),z=x(F.line.width,w),W=u(F.line,I,q,w);for(H=i(j,F.size,w),t=0;L>t;++t)for(B=E[t],this.scatterOptions.sizes[t]=4*H[B],this.scatterOptions.glyphs[t]=U[B],this.scatterOptions.borderWidths[t]=.5*z[B],n=0;4>n;++n)this.scatterOptions.colors[4*t+n]=R[4*B+n],this.scatterOptions.borderColors[4*t+n]=W[4*B+n];this.fancyScatter.update(this.scatterOptions)}else this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[],this.fancyScatter.update(this.scatterOptions);this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[],this.scatter.update(this.scatterOptions),this.expandAxesFancy(g,y,H)},S.updateLines=function(e,t){if(this.hasLines){this.lineOptions.positions=t;var n=g(e.line.color);this.hasMarkers&&(n[3]*=e.marker.opacity);for(var r=Math.round(.5*this.lineOptions.width),i=(w[e.line.dash]||[1]).slice(),s=0;s<i.length;++s)i[s]*=r;switch(e.fill){case"tozeroy":this.lineOptions.fill=[!1,!0,!1,!1];break;case"tozerox":this.lineOptions.fill=[!0,!1,!1,!1];break;default:this.lineOptions.fill=[!1,!1,!1,!1]}var o=g(e.fillcolor);this.lineOptions.color=n,this.lineOptions.width=2*e.line.width,this.lineOptions.dashes=i,this.lineOptions.fillColor=[o,o,o,o]}else this.lineOptions.positions=new Float32Array;this.line.update(this.lineOptions)},S.updateError=function(e,t,n,r){var i=this["error"+e],s=t["error_"+e.toLowerCase()],u=this["error"+e+"Options"];"x"===e.toLowerCase()&&s.copy_ystyle&&(s=t.error_y),this["hasError"+e]?(u.positions=n,u.errors=r,u.capSize=s.width,u.lineWidth=s.thickness/2,u.color=o(s.color,1,1)):u.positions=new Float32Array,i.update(u)},S.expandAxesFast=function(e,t){for(var n,r,i,s=t||10,o=0;2>o;o++)n=this.scene[E[o]],r=n._min,r||(r=[]),r.push({val:e[o],pad:s}),i=n._max,i||(i=[]),i.push({val:e[o+2],pad:s})},S.expandAxesFancy=function(e,t,n){var r=this.scene,i={padded:!0,ppad:n};c.Axes.expand(r.xaxis,e,i),c.Axes.expand(r.yaxis,t,i)},S.dispose=function(){this.line.dispose(),this.errorX.dispose(),this.errorY.dispose(),this.scatter.dispose(),this.fancyScatter.dispose()},t.exports=l},{"../../constants/gl2d_dashes.json":301,"../../constants/gl_markers.json":303,"../../lib/gl_format_color":312,"../../lib/str2rgbarray":323,"../../plotly":330,"fast-isnumeric":58,"gl-error2d":60,"gl-line2d":66,"gl-scatter2d":131,"gl-scatter2d-fancy":126}],410:[function(e,t,n){"use strict";var r=e("../../plotly"),i=e("./");t.exports=function(e,t,n,s){function o(n,s){return r.Lib.coerce(e,t,i.attributes,n,s)}var u=r.Scatter,a=u.handleXYDefaults(e,t,o);return a?(o("text"),o("mode",a<u.PTS_LINESONLY?"lines+markers":"lines"),u.hasLines(t)&&u.lineDefaults(e,t,n,o),u.hasMarkers(t)&&u.markerDefaults(e,t,n,s,o),o("fill"),"none"!==t.fill&&u.fillColorDefaults(e,t,n,o),r.ErrorBars.supplyDefaults(e,t,n,{axis:"y"}),void r.ErrorBars.supplyDefaults(e,t,n,{axis:"x",inherit:"y"})):void (t.visible=!1)}},{"../../plotly":330,"./":411}],411:[function(e,t,n){"use strict";var r=e("../../plotly"),i=t.exports={};r.Plots.register(i,"scattergl",["gl2d","symbols","errorBarsOK","markerColorscale","showLegend"],{}),i.attributes=e("./attributes"),i.supplyDefaults=e("./defaults"),i.colorbar=r.Scatter.colorbar,i.calc=r.Scatter3D.calc},{"../../plotly":330,"./attributes":408,"./defaults":410}],412:[function(e,t,n){"use strict";function r(e){return{valType:"boolean",dflt:!1}}function i(e){return{show:{valType:"boolean",dflt:!1},project:{x:r("x"),y:r("y"),z:r("z")},color:{valType:"color",dflt:"#000"},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!1},highlightColor:{valType:"color",dflt:"#000"},highlightWidth:{valType:"number",min:1,max:16,dflt:2}}}var s=e("../../components/colorscale/attributes"),o=e("../../lib/extend").extendFlat;t.exports={z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"data_array"},zauto:s.zauto,zmin:s.zmin,zmax:s.zmax,colorscale:s.colorscale,autocolorscale:o({},s.autocolorscale,{dflt:!1}),reversescale:s.reversescale,showscale:s.showscale,contours:{x:i("x"),y:i("y"),z:i("z")},hidesurface:{valType:"boolean",dflt:!1},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":286,"../../lib/extend":310}],413:[function(e,t,n){"use strict";function r(e,t,n){this.scene=e,this.uid=n,this.surface=t,this.data=null,this.showContour=[!1,!1,!1],this.dataScale=1}function i(e,t){return void 0===t&&(t=1),e.map(function(e){var n=e[0],r=p(e[1]),i=r.toRgb();return{index:n,rgb:[i.r,i.g,i.b,t]}})}function s(e){var t=e.shape,n=[t[0]+2,t[1]+2],r=f(new Float32Array(n[0]*n[1]),n);return h.assign(r.lo(1,1).hi(t[0],t[1]),e),h.assign(r.lo(1).hi(t[0],1),e.hi(t[0],1)),h.assign(r.lo(1,n[1]-1).hi(t[0],1),e.lo(0,t[1]-1).hi(t[0],1)),h.assign(r.lo(0,1).hi(1,t[1]),e.hi(1)),h.assign(r.lo(n[0]-1,1).hi(1,t[1]),e.lo(t[0]-1)),r.set(0,0,e.get(0,0)),r.set(0,n[1]-1,e.get(0,t[1]-1)),r.set(n[0]-1,0,e.get(t[0]-1,0)),r.set(n[0]-1,n[1]-1,e.get(t[0]-1,t[1]-1)),r}function o(e){var t=Math.max(e[0].shape[0],e[0].shape[1]);if(v>t){for(var n=v/t,r=[0|Math.floor(e[0].shape[0]*n+1),0|Math.floor(e[0].shape[1]*n+1)],i=r[0]*r[1],o=0;3>o;++o){var u=s(e[o]),a=f(new Float32Array(i),r);l(a,u,[n,0,0,0,n,0,0,0,1]),e[o]=a}return n}return 1}function u(e,t){var n=e.glplot.gl,i=a({gl:n}),s=new r(e,i,t.uid);return s.update(t),e.glplot.add(i),s}var a=e("gl-surface3d"),f=e("ndarray"),l=e("ndarray-homography"),c=e("ndarray-fill"),h=e("ndarray-ops"),p=e("tinycolor2"),d=e("../../lib/str2rgbarray"),v=128,m=r.prototype;m.handlePick=function(e){if(e.object===this.surface){var t=[Math.min(0|Math.round(e.data.index[0]/this.dataScale-1),this.data.z[0].length-1),Math.min(0|Math.round(e.data.index[1]/this.dataScale-1),this.data.z.length-1)],n=[0,0,0];Array.isArray(this.data.x[0])?n[0]=this.data.x[t[1]][t[0]]:n[0]=this.data.x[t[0]],Array.isArray(this.data.y[0])?n[1]=this.data.y[t[1]][t[0]]:n[1]=this.data.y[t[1]],n[2]=this.data.z[t[1]][t[0]],e.traceCoordinate=n;var r=this.scene.fullSceneLayout;e.dataCoordinate=[r.xaxis.d2l(n[0])*this.scene.dataScale[0]-this.scene.dataCenter[0],r.yaxis.d2l(n[1])*this.scene.dataScale[1]-this.scene.dataCenter[1],r.zaxis.d2l(n[2])*this.scene.dataScale[2]-this.scene.dataCenter[2]];var i=this.data.text;return i&&i[t[1]]&&void 0!==i[t[1]][t[0]]?e.textLabel=i[t[1]][t[0]]:e.textLabel="",e.data.dataCoordinate=e.dataCoordinate.slice(),this.surface.highlight(e.data),this.scene.glplot.spikes.position=e.dataCoordinate,!0}},m.setContourLevels=function(){for(var e=[[],[],[]],t=!1,n=0;3>n;++n)this.showContour[n]&&(t=!0,e[n]=this.scene.contourLevels[n]);t&&this.surface.update({levels:e})},m.update=function(e){var t,n=this.scene,r=n.fullSceneLayout,s=this.surface,u=e.opacity,a=i(e.colorscale,u),l=e.z,h=e.x,p=e.y,v=r.xaxis,m=r.yaxis,g=r.zaxis,y=n.dataScale,b=n.dataCenter,w=l[0].length,E=l.length,S=[f(new Float32Array(w*E),[w,E]),f(new Float32Array(w*E),[w,E]),f(new Float32Array(w*E),[w,E])],x=S[0],T=S[1],N=n.contourLevels;this.data=e,c(S[2],function(e,t){return g.d2l(l[t][e])*y[2]-b[2]}),Array.isArray(h[0])?c(x,function(e,t){return v.d2l(h[t][e])*y[0]-b[0]}):c(x,function(e){return v.d2l(h[e])*y[0]-b[0]}),Array.isArray(p[0])?c(T,function(e,t){return m.d2l(p[t][e])*y[1]-b[1]}):c(T,function(e,t){return m.d2l(p[t])*y[1]-b[1]}),this.dataScale=o(S);var C={colormap:a,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!e.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:1};"opacity"in e&&e.opacity<1&&(C.opacity=.25*e.opacity);var k=[!0,!0,!0],L=[!0,!0,!0],A=["x","y","z"];for(t=0;3>t;++t){var O=e.contours[A[t]];k[t]=O.highlight,L[t]=O.show,C.showContour[t]=O.show||O.highlight,C.showContour[t]&&(C.contourProject[t]=[O.project.x,O.project.y,O.project.z],O.show?(this.showContour[t]=!0,C.levels[t]=N[t],s.highlightColor[t]=C.contourColor[t]=d(O.color),O.usecolormap?s.highlightTint[t]=C.contourTint[t]=0:s.highlightTint[t]=C.contourTint[t]=1,C.contourWidth[t]=O.width):this.showContour[t]=!1,O.highlight&&(C.dynamicColor[t]=d(O.highlightColor),C.dynamicWidth[t]=O.highlightWidth))}C.coords=S,s.update(C),s.highlightEnable=k,s.contourEnable=L,s.visible=e.visible,s.snapToData=!0,"lighting"in e&&(s.ambientLight=e.lighting.ambient,s.diffuseLight=e.lighting.diffuse,s.specularLight=e.lighting.specular,s.roughness=e.lighting.roughness,s.fresnel=e.lighting.fresnel),u&&1>u&&(s.supportsTransparency=!0)},m.dispose=function(){this.glplot.remove(this.surface),this.surface.dispose()},t.exports=u},{"../../lib/str2rgbarray":323,"gl-surface3d":161,ndarray:189,"ndarray-fill":178,"ndarray-homography":183,"ndarray-ops":184,tinycolor2:213}],414:[function(e,t,n){"use strict";var r=e("../../plotly"),i=e("./");t.exports=function(e,t,n,s){function o(n,s){return r.Lib.coerce(e,t,i.attributes,n,s)}var u,a,f=o("z");if(!f)return void (t.visible=!1);var l=f[0].length,c=f.length;if(o("x"),o("y"),!Array.isArray(t.x))for(t.x=[],u=0;l>u;++u)t.x[u]=u;if(o("text"),!Array.isArray(t.y))for(t.y=[],u=0;c>u;++u)t.y[u]=u;o("lighting.ambient"),o("lighting.diffuse"),o("lighting.specular"),o("lighting.roughness"),o("lighting.fresnel"),o("hidesurface"),o("opacity"),o("colorscale");var h=["x","y","z"];for(u=0;3>u;++u){var p="contours."+h[u],d=o(p+".show"),v=o(p+".highlight");if(d||v)for(a=0;3>a;++a)o(p+".project."+h[a]);d&&(o(p+".color"),o(p+".width"),o(p+".usecolormap")),v&&(o(p+".highlightColor"),o(p+".highlightWidth"))}r.Colorscale.handleDefaults(e,t,s,o,{prefix:"",cLetter:"z"})}},{"../../plotly":330,"./":415}],415:[function(e,t,n){"use strict";var r=e("../../plotly"),i=t.exports={};r.Plots.register(i,"surface",["gl3d","noOpacity"],{}),i.attributes=e("./attributes"),i.supplyDefaults=e("./defaults"),i.colorbar=r.Colorbar.traceColorbar,i.calc=function(e,t){r.Colorscale.calc(t,t.z,"","z")}},{"../../plotly":330,"./attributes":412,"./defaults":414}]},{},[305])(305)}),Plotly.version="1.0.0",function(e,t){typeof exports=="object"&&typeof module!="undefined"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):t(e.d3=e.d3||{})}(this,function(e){"use strict";function i(e){return function(t,r){return n(e(t),r)}}function x(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=b?i*=10:s>=w?i*=5:s>=E&&(i*=2),t<e?-i:i}function q(e){return e.length}function z(){}function W(e,t){var n=new z;if(e instanceof z)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r=-1,i=e.length,s;if(t==null)while(++r<i)n.set(r,e[r]);else while(++r<i)n.set(t(s=e[r],r,e),s)}else if(e)for(var o in e)n.set(o,e[o]);return n}function V(){return{}}function $(e,t,n){e[t]=n}function J(){return W()}function K(e,t,n){e.set(t,n)}function Q(){}function Y(e,t){var n=new Q;if(e instanceof Q)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(t==null)while(++r<i)n.add(e[r]);else while(++r<i)n.add(t(e[r],r,e))}return n}function at(e){return+e}function ft(e){return e*e}function lt(e){return e*(2-e)}function ct(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function ht(e){return e*e*e}function pt(e){return--e*e*e+1}function dt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}function Et(e){return 1-Math.cos(e*wt)}function St(e){return Math.sin(e*wt)}function xt(e){return(1-Math.cos(bt*e))/2}function Tt(e){return Math.pow(2,10*e-10)}function Nt(e){return 1-Math.pow(2,-10*e)}function Ct(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function kt(e){return 1-Math.sqrt(1-e*e)}function Lt(e){return Math.sqrt(1- --e*e)}function At(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}function qt(e){return 1-Rt(1-e)}function Rt(e){return(e=+e)<Ot?It*e*e:e<_t?It*(e-=Mt)*e+Dt:e<Ht?It*(e-=Pt)*e+Bt:It*(e-=jt)*e+Ft}function Ut(e){return((e*=2)<=1?1-Rt(1-e):Rt(e-1)+1)/2}function nn(e,t){return e[0]-t[0]||e[1]-t[1]}function rn(e){var t=e.length,n=[0,1],r=2;for(var i=2;i<t;++i){while(r>1&&tn(e[n[r-2]],e[n[r-1]],e[i])<=0)--r;n[r++]=i}return n.slice(0,r)}function hn(){this._x0=this._y0=this._x1=this._y1=null,this._=[]}function pn(){return new hn}function vn(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},u=e._x0,a=e._y0,f=e._x1,l=e._y1,c,h,p,d,v,m,g,y;if(!s)return e._root=o,e;while(s.length){(v=t>=(c=(u+f)/2))?u=c:f=c,(m=n>=(h=(a+l)/2))?a=h:l=h;if(i=s,!(s=s[g=m<<1|v]))return i[g]=o,e}p=+e._x.call(null,s.data),d=+e._y.call(null,s.data);if(t===p&&n===d)return o.next=s,i?i[g]=o:e._root=o,e;do i=i?i[g]=new Array(4):e._root=new Array(4),(v=t>=(c=(u+f)/2))?u=c:f=c,(m=n>=(h=(a+l)/2))?a=h:l=h;while((g=m<<1|v)===(y=(d>=h)<<1|p>=c));return i[y]=s,i[g]=o,e}function mn(e){var t,n,r=e.length,i,s,o=new Array(r),u=new Array(r),a=Infinity,f=Infinity,l=-Infinity,c=-Infinity;for(n=0;n<r;++n){if(isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t)))continue;o[n]=i,u[n]=s,i<a&&(a=i),i>l&&(l=i),s<f&&(f=s),s>c&&(c=s)}l<a&&(a=this._x0,l=this._x1),c<f&&(f=this._y0,c=this._y1),this.cover(a,f).cover(l,c);for(n=0;n<r;++n)vn(this,o[n],u[n],e[n]);return this}function xn(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Ln(e){return e[0]}function On(e){return e[1]}function _n(e,t,n){var r=new Dn(t==null?Ln:t,n==null?On:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Dn(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=undefined}function Pn(e){var t={data:e.data},n=t;while(e=e.next)n=n.next={data:e.data};return t}function Fn(e){if(!(e>=1))throw new Error;this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function In(e){if(!e._start)try{qn(e)}catch(t){if(e._tasks[e._ended+e._active-1])Un(e,t);else if(!e._data)throw t}}function qn(e){while(e._start=e._waiting&&e._active<e._size){var t=e._ended+e._active,n=e._tasks[t],r=n.length-1,i=n[r];n[r]=Rn(e,t),--e._waiting,++e._active,n=i.apply(null,n);if(!e._tasks[t])continue;e._tasks[t]=n||jn}}function Rn(e,t){return function(n,r){if(!e._tasks[t])return;--e._active,++e._ended,e._tasks[t]=null;if(e._error!=null)return;n!=null?Un(e,n):(e._data[t]=r,e._waiting?In(e):zn(e))}}function Un(e,t){var n=e._tasks.length,r;e._error=t,e._data=undefined,e._waiting=NaN;while(--n>=0)if(r=e._tasks[n]){e._tasks[n]=null;if(r.abort)try{r.abort()}catch(t){}}e._active=NaN,zn(e)}function zn(e){if(!e._active&&e._call){var t=e._data;e._data=undefined,e._call(e._error,t)}}function Wn(e){return new Fn(arguments.length?+e:Infinity)}function Qn(e){return e.innerRadius}function Gn(e){return e.outerRadius}function Yn(e){return e.startAngle}function Zn(e){return e.endAngle}function er(e){return e&&e.padAngle}function tr(e){return e>=1?Jn:e<=-1?-Jn:Math.asin(e)}function nr(e,t,n,r,i,s,o,u){var a=n-e,f=r-t,l=o-i,c=u-s,h=(l*(t-s)-c*(e-i))/(c*a-l*f);return[e+h*a,t+h*f]}function rr(e,t,n,r,i,s,o){var u=e-n,a=t-r,f=(o?s:-s)/Math.sqrt(u*u+a*a),l=f*a,c=-f*u,h=e+l,p=t+c,d=n+l,v=r+c,m=(h+d)/2,g=(p+v)/2,y=d-h,b=v-p,w=y*y+b*b,E=i-s,S=h*v-d*p,x=(b<0?-1:1)*Math.sqrt(Math.max(0,E*E*w-S*S)),T=(S*b-y*x)/w,N=(-S*y-b*x)/w,C=(S*b+y*x)/w,k=(-S*y+b*x)/w,L=T-m,A=N-g,O=C-m,M=k-g;return L*L+A*A>O*O+M*M&&(T=C,N=k),{cx:T,cy:N,x01:-l,y01:-c,x11:T*(i/E-1),y11:N*(i/E-1)}}function sr(e){this._context=e}function ur(e){return e[0]}function ar(e){return e[1]}function vr(e){this._curve=e}function mr(e){function t(t){return new vr(e(t))}return t._curve=e,t}function gr(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(mr(e)):t()._curve},e}function Rr(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Ur(e){this._context=e}function Wr(e){this._context=e}function Vr(e){this._context=e}function Jr(e,t){this._basis=new Ur(e),this._beta=t}function Qr(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Gr(e,t){this._context=e,this._k=(1-t)/6}function Zr(e,t){this._context=e,this._k=(1-t)/6}function ti(e,t){this._context=e,this._k=(1-t)/6}function ri(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Vn){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,a=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/a,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/a}if(e._l23_a>Vn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*f+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*f+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function ii(e,t){this._context=e,this._alpha=t}function oi(e,t){this._context=e,this._alpha=t}function ai(e,t){this._context=e,this._alpha=t}function li(e){this._context=e}function hi(e){return e<0?-1:1}function pi(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&0),o=(n-e._y1)/(i||r<0&&0),u=(s*i+o*r)/(r+i);return(hi(s)+hi(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(u))||0}function di(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function vi(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,o-u*n,s,o)}function mi(e){this._context=e}function gi(e){this._context=new yi(e)}function yi(e){this._context=e}function bi(e){return new mi(e)}function wi(e){return new gi(e)}function Ei(e){this._context=e}function Si(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);i[0]=0,s[0]=2,o[0]=e[0]+2*e[1];for(t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n];for(t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];i[n-1]=o[n-1]/s[n-1];for(t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];s[n-1]=(e[n]+i[n-1])/2;for(t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Ti(e,t){this._context=e,this._t=t}function Ci(e){return new Ti(e,0)}function ki(e){return new Ti(e,1)}function Mi(e,t){return e[t]}function ji(e){var t=0,n=-1,r=e.length,i;while(++n<r)if(i=+e[n][1])t+=i;return t}function Ui(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function zi(){}function ts(e){var t;return e=(e+"").trim().toLowerCase(),(t=Vi.exec(e))?(t=parseInt(t[1],16),new os(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1)):(t=$i.exec(e))?ns(parseInt(t[1],16)):(t=Ji.exec(e))?new os(t[1],t[2],t[3],1):(t=Ki.exec(e))?new os(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Qi.exec(e))?rs(t[1],t[2],t[3],t[4]):(t=Gi.exec(e))?rs(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Yi.exec(e))?us(t[1],t[2]/100,t[3]/100,1):(t=Zi.exec(e))?us(t[1],t[2]/100,t[3]/100,t[4]):es.hasOwnProperty(e)?ns(es[e]):e==="transparent"?new os(NaN,NaN,NaN,0):null}function ns(e){return new os(e>>16&255,e>>8&255,e&255,1)}function rs(e,t,n,r){return r<=0&&(e=t=n=NaN),new os(e,t,n,r)}function is(e){return e instanceof zi||(e=ts(e)),e?(e=e.rgb(),new os(e.r,e.g,e.b,e.opacity)):new os}function ss(e,t,n,r){return arguments.length===1?is(e):new os(e,t,n,r==null?1:r)}function os(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function us(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ls(e,t,n,r)}function as(e){if(e instanceof ls)return new ls(e.h,e.s,e.l,e.opacity);e instanceof zi||(e=ts(e));if(!e)return new ls;if(e instanceof ls)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,u=s-i,a=(s+i)/2;return u?(t===s?o=(n-r)/u+(n<r)*6:n===s?o=(r-t)/u+2:o=(t-n)/u+4,u/=a<.5?s+i:2-s-i,o*=60):u=a>0&&a<1?0:o,new ls(o,u,a,e.opacity)}function fs(e,t,n,r){return arguments.length===1?as(e):new ls(e,t,n,r==null?1:r)}function ls(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function cs(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function Ss(e){if(e instanceof Ts)return new Ts(e.l,e.a,e.b,e.opacity);if(e instanceof Ms){var t=e.h*hs;return new Ts(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof os||(e=is(e));var n=Ls(e.r),r=Ls(e.g),i=Ls(e.b),s=Ns((.4124564*n+.3575761*r+.1804375*i)/vs),o=Ns((.2126729*n+.7151522*r+.072175*i)/ms),u=Ns((.0193339*n+.119192*r+.9503041*i)/gs);return new Ts(116*o-16,500*(s-o),200*(o-u),e.opacity)}function xs(e,t,n,r){return arguments.length===1?Ss(e):new Ts(e,t,n,r==null?1:r)}function Ts(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Ns(e){return e>Es?Math.pow(e,1/3):e/ws+ys}function Cs(e){return e>bs?e*e*e:ws*(e-ys)}function ks(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ls(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function As(e){if(e instanceof Ms)return new Ms(e.h,e.c,e.l,e.opacity);e instanceof Ts||(e=Ss(e));var t=Math.atan2(e.b,e.a)*ps;return new Ms(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Os(e,t,n,r){return arguments.length===1?As(e):new Ms(e,t,n,r==null?1:r)}function Ms(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function qs(e){if(e instanceof Us)return new Us(e.h,e.s,e.l,e.opacity);e instanceof os||(e=is(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Is*r+js*t-Fs*n)/(Is+js-Fs),s=r-i,o=(Bs*(n-i)-Ps*s)/Hs,u=Math.sqrt(o*o+s*s)/(Bs*i*(1-i)),a=u?Math.atan2(o,s)*ps-120:NaN;return new Us(a<0?a+360:a,u,i,e.opacity)}function Rs(e,t,n,r){return arguments.length===1?qs(e):new Us(e,t,n,r==null?1:r)}function Us(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function zs(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function $s(e,t){return function(n){return e+n*t}}function Js(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ks(e,t){var n=t-e;return n?$s(e,n>180||n<-180?n-360*Math.round(n/360):n):Vs(isNaN(e)?t:e)}function Qs(e){return(e=+e)===1?Gs:function(t,n){return n-t?Js(t,n,e):Vs(isNaN(t)?n:t)}}function Gs(e,t){var n=t-e;return n?$s(e,n):Vs(isNaN(e)?t:e)}function Zs(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,u;for(o=0;o<n;++o)u=ss(t[o]),r[o]=u.r||0,i[o]=u.g||0,s[o]=u.b||0;return r=e(r),i=e(i),s=e(s),u.opacity=1,function(e){return u.r=r(e),u.g=i(e),u.b=s(e),u+""}}}function ao(e){return function(){return e}}function fo(e){return function(t){return e(t)+""}}function Eo(e){return e==="none"?vo:(go||(go=document.createElement("DIV"),yo=document.documentElement,bo=document.defaultView),go.style.transform=e,e=bo.getComputedStyle(yo.appendChild(go),null).getPropertyValue("transform"),yo.removeChild(go),e=e.slice(7,-1).split(","),mo(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function So(e){return e==null?vo:(wo||(wo=document.createElementNS("http://www.w3.org/2000/svg","g")),wo.setAttribute("transform",e),(e=wo.transform.baseVal.consolidate())?(e=e.matrix,mo(e.a,e.b,e.c,e.d,e.e,e.f)):vo)}function xo(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}function s(e,r,i,s,o,u){if(e!==i||r!==s){var a=o.push("translate(",null,t,null,n);u.push({i:a-4,x:io(e,i)},{i:a-2,x:io(r,s)})}else(i||s)&&o.push("translate("+i+t+s+n)}function o(e,t,n,s){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),s.push({i:n.push(i(n)+"rotate(",null,r)-2,x:io(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}function u(e,t,n,s){e!==t?s.push({i:n.push(i(n)+"skewX(",null,r)-2,x:io(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}function a(e,t,n,r,s,o){if(e!==n||t!==r){var u=s.push(i(s)+"scale(",null,",",null,")");o.push({i:u-4,x:io(e,n)},{i:u-2,x:io(t,r)})}else(n!==1||r!==1)&&s.push(i(s)+"scale("+n+","+r+")")}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),s(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),u(t.skewX,n.skewX,r,i),a(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){var t=-1,n=i.length,s;while(++t<n)r[(s=i[t]).i]=s.x(e);return r.join("")}}}function Oo(e){return((e=Math.exp(e))+1/e)/2}function Mo(e){return((e=Math.exp(e))-1/e)/2}function _o(e){return((e=Math.exp(2*e))-1)/(e+1)}function Po(e){return function(t,n){var r=e((t=fs(t)).h,(n=fs(n)).h),i=Gs(t.s,n.s),s=Gs(t.l,n.l),o=Gs(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=s(e),t.opacity=o(e),t+""}}}function jo(e,t){var n=Gs((e=xs(e)).l,(t=xs(t)).l),r=Gs(e.a,t.a),i=Gs(e.b,t.b),s=Gs(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=s(t),e+""}}function Fo(e){return function(t,n){var r=e((t=Os(t)).h,(n=Os(n)).h),i=Gs(t.c,n.c),s=Gs(t.l,n.l),o=Gs(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=s(e),t.opacity=o(e),t+""}}}function Ro(e){return function t(n){function r(t,r){var i=e((t=Rs(t)).h,(r=Rs(r)).h),s=Gs(t.s,r.s),o=Gs(t.l,r.l),u=Gs(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=s(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}function Vo(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new $o(n)}function $o(e){this._=e}function Jo(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");r>=0&&(n=e.slice(r+1),e=e.slice(0,r));if(e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function Ko(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Qo(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Xo,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}function Go(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function Yo(e,t){var n=Go(e);return function(r,i){return t(n(r),i,e)}}function Zo(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function hu(e){return function(t,n){e(t==null?n:null)}}function pu(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}function wu(e,t){return function(n){return e(n.responseText,t)}}function Pu(){return Ou||(Du(Hu),Ou=_u.now()+Mu)}function Hu(){Ou=0}function Bu(){this._call=this._time=this._next=null}function ju(e,t,n){var r=new Bu;return r.restart(e,t,n),r}function Fu(){Pu(),++xu;var e=ku,t;while(e)(t=Ou-e._time)>=0&&e._call.call(null,t),e=e._next;--xu}function Iu(){Ou=(Au=_u.now())+Mu,xu=Tu=0;try{Fu()}finally{xu=0,Ru(),Ou=0}}function qu(){var e=_u.now(),t=e-Au;t>Cu&&(Mu-=t,Au=e)}function Ru(){var e,t=ku,n,r=Infinity;while(t)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ku=n);Lu=e,Uu(r)}function Uu(e){if(xu)return;Tu&&(Tu=clearTimeout(Tu));var t=e-Ou;t>24?(e<Infinity&&(Tu=setTimeout(Iu,t)),Nu&&(Nu=clearInterval(Nu))):(Nu||(Nu=setInterval(qu,Cu)),xu=1,Du(Iu))}function $u(e,t,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),n==null?1:Math.floor(n)),e},i.range=function(n,r,s){var o=[];n=i.ceil(n),s=s==null?1:Math.floor(s);if(n<r&&s>0){do o.push(new Date(+n));while(t(n,s),e(n),n<r);return o}return o},i.filter=function(n){return $u(function(t){if(t>=t)while(e(t),!n(t))t.setTime(t-1)},function(e,r){if(e>=e)while(--r>=0)while(t(e,1),!n(e));})},n&&(i.count=function(t,r){return Xu.setTime(+t),Vu.setTime(+r),e(Xu),e(Vu),Math.floor(n(Xu,Vu))},i.every=function(e){return e=Math.floor(e),!!isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e===0}:function(t){return i.count(0,t)%e===0}):i:null}),i}function fa(e){return $u(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gu)/ea})}function Pa(e){return $u(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/ea})}function lf(e){if(!(t=af.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",s=t[4]||"",o=!!t[5],u=t[6]&&+t[6],a=!!t[7],f=t[8]&&+t[8].slice(1),l=t[9]||"";l==="n"?(a=!0,l="g"):uf[l]||(l="");if(o||n==="0"&&r==="=")o=!0,n="0",r="=";this.fill=n,this.align=r,this.sign=i,this.symbol=s,this.zero=o,this.width=u,this.comma=a,this.precision=f,this.type=l}function hf(e){return e}function vf(t){return df=pf(t),e.format=df.format,e.formatPrefix=df.formatPrefix,df}function bf(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function wf(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ef(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function Sf(e){function S(e,t){return function(n){var r=[],i=-1,s=0,o=e.length,u,a,f;n instanceof Date||(n=new Date(+n));while(++i<o)if(e.charCodeAt(i)===37){r.push(e.slice(s,i)),(a=xf[u=e.charAt(++i)])!=null?u=e.charAt(++i):a=u==="e"?" ":"0";if(f=t[u])u=f(n,a);r.push(u),s=i+1}return r.push(e.slice(s,i)),r.join("")}}function x(e,t){return function(n){var r=Ef(1900),i=T(r,e,n+="",0);if(i!=n.length)return null;"p"in r&&(r.H=r.H%12+r.p*12);if("W"in r||"U"in r){"w"in r||(r.w="W"in r?1:0);var s="Z"in r?wf(Ef(r.y)).getUTCDay():t(Ef(r.y)).getDay();r.m=0,r.d="W"in r?(r.w+6)%7+r.W*7-(s+5)%7:r.w+r.U*7-(s+6)%7}return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,wf(r)):t(r)}}function T(e,t,n,r){var i=0,s=t.length,o=n.length,u,a;while(i<s){if(r>=o)return-1;u=t.charCodeAt(i++);if(u===37){u=t.charAt(i++),a=E[u in xf?t.charAt(i++):u];if(!a||(r=a(e,n,r))<0)return-1}else if(u!=n.charCodeAt(r++))return-1}return r}function N(e,t,n){var r=f.exec(t.slice(n));return r?(e.p=l[r[0].toLowerCase()],n+r[0].length):-1}function C(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=d[r[0].toLowerCase()],n+r[0].length):-1}function k(e,t,n){var r=c.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1}function L(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1}function A(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=m[r[0].toLowerCase()],n+r[0].length):-1}function O(e,n,r){return T(e,t,n,r)}function M(e,t,r){return T(e,n,t,r)}function _(e,t,n){return T(e,r,t,n)}function D(e){return o[e.getDay()]}function P(e){return s[e.getDay()]}function H(e){return a[e.getMonth()]}function B(e){return u[e.getMonth()]}function j(e){return i[+(e.getHours()>=12)]}function F(e){return o[e.getUTCDay()]}function I(e){return s[e.getUTCDay()]}function q(e){return a[e.getUTCMonth()]}function R(e){return u[e.getUTCMonth()]}function U(e){return i[+(e.getUTCHours()>=12)]}var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,u=e.months,a=e.shortMonths,f=Af(i),l=Of(i),c=Af(s),h=Of(s),p=Af(o),d=Of(o),v=Af(u),m=Of(u),g=Af(a),y=Of(a),b={a:D,A:P,b:H,B:B,c:null,d:Xf,e:Xf,H:Vf,I:$f,j:Jf,L:Kf,m:Qf,M:Gf,p:j,S:Yf,U:Zf,w:el,W:tl,x:null,X:null,y:nl,Y:rl,Z:il,"%":bl},w={a:F,A:I,b:q,B:R,c:null,d:sl,e:sl,H:ol,I:ul,j:al,L:fl,m:ll,M:cl,p:U,S:hl,U:pl,w:dl,W:vl,x:null,X:null,y:ml,Y:gl,Z:yl,"%":bl},E={a:C,A:k,b:L,B:A,c:O,d:Ff,e:Ff,H:qf,I:qf,j:If,L:zf,m:jf,M:Rf,p:N,S:Uf,U:_f,w:Mf,W:Df,x:M,X:_,y:Hf,Y:Pf,Z:Bf,"%":Wf};return b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w),{format:function(e){var t=S(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=x(e+="",bf);return t.toString=function(){return e},t},utcFormat:function(e){var t=S(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=x(e,wf);return t.toString=function(){return e},t}}}function kf(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?(new Array(n-s+1)).join(t)+i:i)}function Lf(e){return e.replace(Cf,"\\$&")}function Af(e){return new RegExp("^(?:"+e.map(Lf).join("|")+")","i")}function Of(e){var t={},n=-1,r=e.length;while(++n<r)t[e[n].toLowerCase()]=n;return t}function Mf(e,t,n){var r=Tf.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function _f(e,t,n){var r=Tf.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Df(e,t,n){var r=Tf.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Pf(e,t,n){var r=Tf.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Hf(e,t,n){var r=Tf.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Bf(e,t,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jf(e,t,n){var r=Tf.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ff(e,t,n){var r=Tf.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function If(e,t,n){var r=Tf.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function qf(e,t,n){var r=Tf.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Rf(e,t,n){var r=Tf.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Uf(e,t,n){var r=Tf.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function zf(e,t,n){var r=Tf.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Wf(e,t,n){var r=Nf.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Xf(e,t){return kf(e.getDate(),t,2)}function Vf(e,t){return kf(e.getHours(),t,2)}function $f(e,t){return kf(e.getHours()%12||12,t,2)}function Jf(e,t){return kf(1+ua.count(Ca(e),e),t,3)}function Kf(e,t){return kf(e.getMilliseconds(),t,3)}function Qf(e,t){return kf(e.getMonth()+1,t,2)}function Gf(e,t){return kf(e.getMinutes(),t,2)}function Yf(e,t){return kf(e.getSeconds(),t,2)}function Zf(e,t){return kf(la.count(Ca(e),e),t,2)}function el(e){return e.getDay()}function tl(e,t){return kf(ca.count(Ca(e),e),t,2)}function nl(e,t){return kf(e.getFullYear()%100,t,2)}function rl(e,t){return kf(e.getFullYear()%1e4,t,4)}function il(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+kf(t/60|0,"0",2)+kf(t%60,"0",2)}function sl(e,t){return kf(e.getUTCDate(),t,2)}function ol(e,t){return kf(e.getUTCHours(),t,2)}function ul(e,t){return kf(e.getUTCHours()%12||12,t,2)}function al(e,t){return kf(1+_a.count(Ga(e),e),t,3)}function fl(e,t){return kf(e.getUTCMilliseconds(),t,3)}function ll(e,t){return kf(e.getUTCMonth()+1,t,2)}function cl(e,t){return kf(e.getUTCMinutes(),t,2)}function hl(e,t){return kf(e.getUTCSeconds(),t,2)}function pl(e,t){return kf(Ha.count(Ga(e),e),t,2)}function dl(e){return e.getUTCDay()}function vl(e,t){return kf(Ba.count(Ga(e),e),t,2)}function ml(e,t){return kf(e.getUTCFullYear()%100,t,2)}function gl(e,t){return kf(e.getUTCFullYear()%1e4,t,4)}function yl(){return"+0000"}function bl(){return"%"}function El(t){return wl=Sf(t),e.timeFormat=wl.format,e.timeParse=wl.parse,e.utcFormat=wl.utcFormat,e.utcParse=wl.utcParse,wl}function xl(e){return e.toISOString()}function Nl(e){var t=new Date(e);return isNaN(t)?null:t}function Ml(e){function i(i){var s=i+"",o=t.get(s);if(!o){if(r!==Ol)return r;t.set(s,o=n.push(i))}return e[(o-1)%e.length]}var t=W(),n=[],r=Ol;return e=e==null?[]:Al.call(e),i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=W();var r=-1,s=e.length,o,u;while(++r<s)t.has(u=(o=e[r])+"")||t.set(u,n.push(o));return i},i.range=function(t){return arguments.length?(e=Al.call(t),i):e.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Ml().domain(n).range(e).unknown(r)},i}function _l(){function l(){var e=t().length,l=r[1]<r[0],c=r[l-0],h=r[1-l];i=(h-c)/Math.max(1,e-u+a*2),o&&(i=Math.floor(i)),c+=(h-c-i*(e-u))*f,s=i*(1-u),o&&(c=Math.round(c),s=Math.round(s));var p=y(e).map(function(e){return c+i*e});return n(l?p.reverse():p)}var e=Ml().unknown(undefined),t=e.domain,n=e.range,r=[0,1],i,s,o=!1,u=0,a=0,f=.5;return delete e.unknown,e.domain=function(e){return arguments.length?(t(e),l()):t()},e.range=function(e){return arguments.length?(r=[+e[0],+e[1]],l()):r.slice()},e.rangeRound=function(e){return r=[+e[0],+e[1]],o=!0,l()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(e){return arguments.length?(o=!!e,l()):o},e.padding=function(e){return arguments.length?(u=a=Math.max(0,Math.min(1,e)),l()):u},e.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},e.paddingOuter=function(e){return arguments.length?(a=Math.max(0,Math.min(1,e)),l()):a},e.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),l()):f},e.copy=function(){return _l().domain(t()).range(r).round(o).paddingInner(u).paddingOuter(a).align(f)},l()}function Dl(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Dl(t())},e}function Pl(){return Dl(_l().paddingInner(1))}function Fl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Hl(t)}function Il(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}function ql(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}function Rl(e,t,n,r){var i=e[0],s=e[1],o=t[0],u=t[1];return s<i?(i=n(s,i),o=r(u,o)):(i=n(i,s),o=r(o,u)),function(e){return o(i(e))}}function Ul(e,t,n,r){var i=Math.min(e.length,t.length)-1,s=new Array(i),u=new Array(i),a=-1;e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());while(++a<i)s[a]=n(e[a],e[a+1]),u[a]=r(t[a],t[a+1]);return function(t){var n=o(e,t,1,i)-1;return u[n](s[n](t))}}function zl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function Wl(e,t){function f(){return o=Math.min(n.length,r.length)>2?Ul:Rl,u=a=null,l}function l(t){return(u||(u=o(n,r,s?Il(e):e,i)))(+t)}var n=jl,r=jl,i=co,s=!1,o,u,a;return l.invert=function(e){return(a||(a=o(r,n,Fl,s?ql(t):t)))(+e)},l.domain=function(e){return arguments.length?(n=Ll.call(e,Bl),f()):n.slice()},l.range=function(e){return arguments.length?(r=Al.call(e),f()):r.slice()},l.rangeRound=function(e){return r=Al.call(e),i=ho,f()},l.clamp=function(e){return arguments.length?(s=!!e,f()):s},l.interpolate=function(e){return arguments.length?(i=e,f()):i},f()}function Vl(e){var t=e.domain;return e.ticks=function(e){var n=t();return S(n[0],n[n.length-1],e==null?10:e)},e.tickFormat=function(e,n){return Xl(t(),e,n)},e.nice=function(n){var r=t(),i=r.length-1,s=n==null?10:n,o=r[0],u=r[i],a=x(o,u,s);return a&&(a=x(Math.floor(o/a)*a,Math.ceil(u/a)*a,s),r[0]=Math.floor(o/a)*a,r[i]=Math.ceil(u/a)*a,t(r)),e},e}function $l(){var e=Wl(Fl,io);return e.copy=function(){return zl(e,$l())},Vl(e)}function Jl(){function t(e){return+e}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=Ll.call(n,Bl),t):e.slice()},t.copy=function(){return Jl().domain(e)},Vl(t)}function Ql(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:Hl(t)}function Gl(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function Yl(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Zl(e){return e===10?Yl:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function ec(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function tc(e){return function(t){return-e(-t)}}function nc(){function o(){return i=ec(r),s=Zl(r),n()[0]<0&&(i=tc(i),s=tc(s)),t}var t=Wl(Ql,Gl).domain([1,10]),n=t.domain,r=10,i=ec(10),s=Zl(10);return t.base=function(e){return arguments.length?(r=+e,o()):r},t.domain=function(e){return arguments.length?(n(e),o()):n()},t.ticks=function(e){var t=n(),o=t[0],u=t[t.length-1],a;if(a=u<o)f=o,o=u,u=f;var f=i(o),l=i(u),c,h,p,d=e==null?10:+e,v=[];if(!(r%1)&&l-f<d){f=Math.round(f)-1,l=Math.round(l)+1;if(o>0)for(;f<l;++f)for(h=1,c=s(f);h<r;++h){p=c*h;if(p<o)continue;if(p>u)break;v.push(p)}else for(;f<l;++f)for(h=r-1,c=s(f);h>=1;--h){p=c*h;if(p<o)continue;if(p>u)break;v.push(p)}}else v=S(f,l,Math.min(l-f,d)).map(s);return a?v.reverse():v},t.tickFormat=function(n,o){o==null&&(o=r===10?".0e":","),typeof o!="function"&&(o=e.format(o));if(n===Infinity)return o;n==null&&(n=10);var u=Math.max(1,r*n/t.ticks().length);return function(e){var t=e/s(Math.round(i(e)));return t*r<r-.5&&(t*=r),t<=u?o(e):""}},t.nice=function(){return n(Kl(n(),{floor:function(e){return s(Math.floor(i(e)))},ceil:function(e){return s(Math.ceil(i(e)))}}))},t.copy=function(){return zl(t,nc().base(r))},t}function rc(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function ic(){function r(t,n){return(n=rc(n,e)-(t=rc(t,e)))?function(r){return(rc(r,e)-t)/n}:Hl(n)}function i(t,n){return n=rc(n,e)-(t=rc(t,e)),function(r){return rc(t+n*r,1/e)}}var e=1,t=Wl(r,i),n=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,n(n())):e},t.copy=function(){return zl(t,ic().exponent(e))},Vl(t)}function sc(){return ic().exponent(.5)}function oc(){function i(){var n=0,i=Math.max(1,t.length);r=new Array(i-1);while(++n<i)r[n-1]=C(e,n/i);return s}function s(e){if(!isNaN(e=+e))return t[o(r,e)]}var e=[],t=[],r=[];return s.invertExtent=function(n){var i=t.indexOf(n);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},s.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var r=0,s=t.length,o;r<s;++r)(o=t[r],o!=null&&!isNaN(o=+o))&&e.push(o);return e.sort(n),i()},s.range=function(e){return arguments.length?(t=Al.call(e),i()):t.slice()},s.quantiles=function(){return r.slice()},s.copy=function(){return oc().domain(e).range(t)},s}function uc(){function s(e){if(e<=e)return i[o(r,e,0,n)]}function u(){var i=-1;r=new Array(n);while(++i<n)r[i]=((i+1)*t-(i-n)*e)/(n+1);return s}var e=0,t=1,n=1,r=[.5],i=[0,1];return s.domain=function(n){return arguments.length?(e=+n[0],t=+n[1],u()):[e,t]},s.range=function(e){return arguments.length?(n=(i=Al.call(e)).length-1,u()):i.slice()},s.invertExtent=function(s){var o=i.indexOf(s);return o<0?[NaN,NaN]:o<1?[e,r[0]]:o>=n?[r[n-1],t]:[r[o-1],r[o]]},s.copy=function(){return uc().domain([e,t]).range(i)},Vl(s)}function ac(){function r(r){if(r<=r)return t[o(e,r,0,n)]}var e=[.5],t=[0,1],n=1;return r.domain=function(i){return arguments.length?(e=Al.call(i),n=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Al.call(i),n=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(n){var r=t.indexOf(n);return[e[r-1],e[r]]},r.copy=function(){return ac().domain(e).range(t)},r}function mc(e){return new Date(e)}function gc(e){return e instanceof Date?+e:+(new Date(+e))}function yc(e,t,n,i,s,o,u,a,f){function S(r){return(u(r)<r?p:o(r)<r?d:s(r)<r?v:i(r)<r?m:t(r)<r?n(r)<r?g:y:e(r)<r?b:w)(r)}function T(t,n,i,s){t==null&&(t=10);if(typeof t=="number"){var o=Math.abs(i-n)/t,u=r(function(e){return e[2]}).right(E,o);u===E.length?(s=x(n/vc,i/vc,t),t=e):u?(u=E[o/E[u-1][2]<E[u][2]/o?u-1:u],s=u[1],t=u[0]):(s=x(n,i,t),t=a)}return s==null?t:t.every(s)}var l=Wl(Fl,io),c=l.invert,h=l.domain,p=f(".%L"),d=f(":%S"),v=f("%I:%M"),m=f("%I %p"),g=f("%a %d"),y=f("%b %d"),b=f("%B"),w=f("%Y"),E=[[u,1,fc],[u,5,5*fc],[u,15,15*fc],[u,30,30*fc],[o,1,lc],[o,5,5*lc],[o,15,15*lc],[o,30,30*lc],[s,1,cc],[s,3,3*cc],[s,6,6*cc],[s,12,12*cc],[i,1,hc],[i,2,2*hc],[n,1,pc],[t,1,dc],[t,3,3*dc],[e,1,vc]];return l.invert=function(e){return new Date(c(e))},l.domain=function(e){return arguments.length?h(Ll.call(e,gc)):h().map(mc)},l.ticks=function(e,t){var n=h(),r=n[0],i=n[n.length-1],s=i<r,o;return s&&(o=r,r=i,i=o),o=T(e,r,i,t),o=o?o.range(r,i+1):[],s?o.reverse():o},l.tickFormat=function(e,t){return t==null?S:f(t)},l.nice=function(e,t){var n=h();return(e=T(e,n[0],n[n.length-1],t))?h(Kl(n,e)):l},l.copy=function(){return zl(l,yc(e,t,n,i,s,o,u,a,f))},l}function Mc(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Bc(e){function i(i){var s=(i-t)/(n-t);return e(r?Math.max(0,Math.min(1,s)):s)}var t=0,n=1,r=!1;return i.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.clamp=function(e){return arguments.length?(r=!!e,i):r},i.interpolator=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return Bc(e).domain([t,n]).clamp(r)},Vl(i)}function qc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===jc&&t.documentElement.namespaceURI===jc?t.createElement(e):t.createElementNS(n,e)}}function Rc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Wc(){return new Xc}function Xc(){this._="@"+(++zc).toString(36)}function Yc(e,t,n){return e=Zc(e,t,n),function(t){var n=t.relatedTarget;(!n||n!==this&&!(n.compareDocumentPosition(this)&8))&&e.call(this,t)}}function Zc(t,n,r){return function(i){var s=e.event;e.event=i;try{t.call(this,this.__data__,n,r)}finally{e.event=s}}}function eh(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function th(e){return function(){var t=this.__on;if(!t)return;for(var n=0,r=-1,i=t.length,s;n<i;++n)(s=t[n],!!e.type&&s.type!==e.type||s.name!==e.name)?t[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?t.length=r:delete this.__on}}function nh(e,t,n){var r=Qc.hasOwnProperty(e.type)?Yc:Zc;return function(i,s,o){var u=this.__on,a,f=r(t,s,o);if(u)for(var l=0,c=u.length;l<c;++l)if((a=u[l]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=f,a.capture=n),a.value=t;return}this.addEventListener(e.type,f,n),a={type:e.type,name:e.name,value:t,listener:f,capture:n},u?u.push(a):this.__on=[a]}}function ih(t,n,r,i){var s=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(r,i)}finally{e.event=s}}function ah(){}function ch(){return[]}function gh(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function wh(e,t,n,r,i,s){var o=0,u,a=t.length,f=s.length;for(;o<f;++o)(u=t[o])?(u.__data__=s[o],r[o]=u):n[o]=new gh(e,s[o]);for(;o<a;++o)if(u=t[o])i[o]=u}function Eh(e,t,n,r,i,s,o){var u,a,f={},l=t.length,c=s.length,h=new Array(l),p;for(u=0;u<l;++u)if(a=t[u])h[u]=p=bh+o.call(a,a.__data__,u,t),p in f?i[u]=a:f[p]=a;for(u=0;u<c;++u)p=bh+o.call(e,s[u],u,s),(a=f[p])?(r[u]=a,a.__data__=s[u],f[p]=null):n[u]=new gh(e,s[u]);for(u=0;u<l;++u)(a=t[u])&&f[h[u]]===a&&(i[u]=a)}function kh(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ph(e){return function(){this.removeAttribute(e)}}function Hh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Bh(e,t){return function(){this.setAttribute(e,t)}}function jh(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Fh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ih(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Uh(e){return function(){this.style.removeProperty(e)}}function zh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Wh(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Vh(e){return function(){delete this[e]}}function $h(e,t){return function(){this[e]=t}}function Jh(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Qh(e){return e.trim().split(/^|\s+/)}function Gh(e){return e.classList||new Yh(e)}function Yh(e){this._node=e,this._names=Qh(e.getAttribute("class")||"")}function Zh(e,t){var n=Gh(e),r=-1,i=t.length;while(++r<i)n.add(t[r])}function ep(e,t){var n=Gh(e),r=-1,i=t.length;while(++r<i)n.remove(t[r])}function tp(e){return function(){Zh(this,e)}}function np(e){return function(){ep(this,e)}}function rp(e,t){return function(){(t.apply(this,arguments)?Zh:ep)(this,e)}}function sp(){this.textContent=""}function op(e){return function(){this.textContent=e}}function up(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function fp(){this.innerHTML=""}function lp(e){return function(){this.innerHTML=e}}function cp(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function pp(){this.nextSibling&&this.parentNode.appendChild(this)}function vp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yp(){return null}function wp(){var e=this.parentNode;e&&e.removeChild(this)}function xp(e,t,n){var r=Rh(e),i=r.CustomEvent;i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Tp(e,t){return function(){return xp(this,e,t)}}function Np(e,t){return function(){return xp(this,e,t.apply(this,arguments))}}function Lp(e,t){this._groups=e,this._parents=t}function Ap(){return new Lp([[document.documentElement]],kp)}function Wp(e,t){var n=e.__transition;if(!n||!(n=n[t])||n.state>Bp)throw new Error("too late");return n}function Xp(e,t){var n=e.__transition;if(!n||!(n=n[t])||n.state>Fp)throw new Error("too late");return n}function Vp(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("too late");return n}function $p(e,t,n){function s(e){n.state=jp,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(s){var f,l,c,h;if(n.state!==jp)return a();for(f in r){h=r[f];if(h.name!==n.name)continue;if(h.state===Ip)return zu(o);h.state===qp?(h.state=Up,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[f]):+f<t&&(h.state=Up,h.timer.stop(),delete r[f])}zu(function(){n.state===Ip&&(n.state=qp,n.timer.restart(u,n.delay,n.time),u(s))}),n.state=Fp,n.on.call("start",e,e.__data__,n.index,n.group);if(n.state!==Fp)return;n.state=Ip,i=new Array(c=n.tween.length);for(f=0,l=-1;f<c;++f)if(h=n.tween[f].value.call(e,e.__data__,n.index,n.group))i[++l]=h;i.length=l+1}function u(t){var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(a),n.state=Rp,1),s=-1,o=i.length;while(++s<o)i[s].call(null,r);n.state===Rp&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Up,n.timer.stop(),delete r[t];for(var i in r)return;delete e.__transition}var r=e.__transition,i;r[t]=n,n.timer=ju(s,0,n.time)}function Qp(e,t){var n,r;return function(){var i=Xp(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Gp(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Xp(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},a=0,f=i.length;a<f;++a)if(i[a].name===t){i[a]=u;break}a===f&&i.push(u)}s.tween=i}}function Zp(e,t,n){var r=e._id;return e.each(function(){var e=Xp(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Vp(e,r).value[t]}}function td(e){return function(){this.removeAttribute(e)}}function nd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rd(e,t,n){var r,i;return function(){var s=this.getAttribute(e);return s===n?null:s===r?i:i=t(r=s,n)}}function id(e,t,n){var r,i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===n?null:s===r?i:i=t(r=s,n)}}function sd(e,t,n){var r,i,s;return function(){var o,u=n(this);return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),o===u?null:o===r&&u===i?s:s=t(r=o,i=u))}}function od(e,t,n){var r,i,s;return function(){var o,u=n(this);return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),o===u?null:o===r&&u===i?s:s=t(r=o,i=u))}}function ad(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttributeNS(e.space,e.local,r(t))}}return n._value=t,n}function fd(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttribute(e,r(t))}}return n._value=t,n}function cd(e,t){return function(){Wp(this,e).delay=+t.apply(this,arguments)}}function hd(e,t){return t=+t,function(){Wp(this,e).delay=t}}function dd(e,t){return function(){Xp(this,e).duration=+t.apply(this,arguments)}}function vd(e,t){return t=+t,function(){Xp(this,e).duration=t}}function gd(e,t){if(typeof t!="function")throw new Error;return function(){Xp(this,e).ease=t}}function Ed(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Sd(e,t,n){var r,i,s=Ed(t)?Wp:Xp;return function(){var o=s(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function Td(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Od(e,t){var n,r,i;return function(){var s=Rh(this).getComputedStyle(this,null),o=s.getPropertyValue(e),u=(this.style.removeProperty(e),s.getPropertyValue(e));return o===u?null:o===n&&u===r?i:i=t(n=o,r=u)}}function Md(e){return function(){this.style.removeProperty(e)}}function _d(e,t,n){var r,i;return function(){var s=Rh(this).getComputedStyle(this,null).getPropertyValue(e);return s===n?null:s===r?i:i=t(r=s,n)}}function Dd(e,t,n){var r,i,s;return function(){var o=Rh(this).getComputedStyle(this,null),u=o.getPropertyValue(e),a=n(this);return a==null&&(a=(this.style.removeProperty(e),o.getPropertyValue(e))),u===a?null:u===r&&a===i?s:s=t(r=u,i=a)}}function Hd(e,t,n){function r(){var r=this,i=t.apply(r,arguments);return i&&function(t){r.style.setProperty(e,i(t),n)}}return r._value=t,r}function jd(e){return function(){this.textContent=e}}function Fd(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Ud(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function zd(e){return Ap().transition(e)}function Wd(){return++Rd}function $d(e,t){var n;while(!(n=e.__transition)||!(n=n[t]))if(!(e=e.parentNode))return Vd.time=Pu(),Vd;return n}function iv(e,t,n){var r=e(n);return"translate("+(isFinite(r)?r:t(n))+",0)"}function sv(e,t,n){var r=e(n);return"translate(0,"+(isFinite(r)?r:t(n))+")"}function ov(e){var t=e.bandwidth()/2;return e.round()&&(t=Math.round(t)),function(n){return e(n)+t}}function uv(){return!this.__axis}function av(e,t){function a(a){var f=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,l=i==null?t.tickFormat?t.tickFormat.apply(t,n):Yd:i,c=Math.max(s,0)+u,h=e===Zd||e===tv?iv:sv,p=t.range(),d=p[0]+.5,v=p[p.length-1]+.5,m=(t.bandwidth?ov:Yd)(t.copy()),g=a.selection?a.selection():a,y=g.selectAll(".domain").data([null]),b=g.selectAll(".tick").data(f,t).order(),w=b.exit(),E=b.enter().append("g").attr("class","tick"),S=b.select("line"),x=b.select("text"),T=e===Zd||e===nv?-1:1,N,C=e===nv||e===ev?(N="x","y"):(N="y","x");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),b=b.merge(E),S=S.merge(E.append("line").attr("stroke","#000").attr(N+"2",T*s).attr(C+"1",.5).attr(C+"2",.5)),x=x.merge(E.append("text").attr("fill","#000").attr(N,T*c).attr(C,.5).attr("dy",e===Zd?"0em":e===tv?"0.71em":"0.32em")),a!==g&&(y=y.transition(a),b=b.transition(a),S=S.transition(a),x=x.transition(a),w=w.transition(a).attr("opacity",rv).attr("transform",function(e){return h(m,this.parentNode.__axis||m,e)}),E.attr("opacity",rv).attr("transform",function(e){return h(this.parentNode.__axis||m,m,e)})),w.remove(),y.attr("d",e===nv||e==ev?"M"+T*o+","+d+"H0.5V"+v+"H"+T*o:"M"+d+","+T*o+"V0.5H"+v+"V"+T*o),b.attr("opacity",1).attr("transform",function(e){return h(m,m,e)}),S.attr(N+"2",T*s),x.attr(N,T*c).text(l),g.filter(uv).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===ev?"start":e===nv?"end":"middle"),g.each(function(){this.__axis=m})}var n=[],r=null,i=null,s=6,o=6,u=3;return a.scale=function(e){return arguments.length?(t=e,a):t},a.ticks=function(){return n=Gd.call(arguments),a},a.tickArguments=function(e){return arguments.length?(n=e==null?[]:Gd.call(e),a):n.slice()},a.tickValues=function(e){return arguments.length?(r=e==null?null:Gd.call(e),a):r&&r.slice()},a.tickFormat=function(e){return arguments.length?(i=e,a):i},a.tickSize=function(e){return arguments.length?(s=o=+e,a):s},a.tickSizeInner=function(e){return arguments.length?(s=+e,a):s},a.tickSizeOuter=function(e){return arguments.length?(o=+e,a):o},a.tickPadding=function(e){return arguments.length?(u=+e,a):u},a}function fv(e){return av(Zd,e)}function lv(e){return av(ev,e)}function cv(e){return av(tv,e)}function hv(e){return av(nv,e)}function pv(e,t){return e.parent===t.parent?1:2}function dv(e){return e.reduce(vv,0)/e.length}function vv(e,t){return e+t.x}function mv(e){return 1+e.reduce(gv,0)}function gv(e,t){return Math.max(e,t.y)}function yv(e){var t;while(t=e.children)e=t[0];return e}function bv(e){var t;while(t=e.children)e=t[t.length-1];return e}function kv(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();while(e===t)i=e,e=n.pop(),t=r.pop();return i}function _v(e,t){var n=new jv(e),r=+e.value&&(n.value=e.value),i,s=[n],o,u,a,f;t==null&&(t=Pv);while(i=s.pop()){r&&(i.value=+i.data.value);if((u=t(i.data))&&(f=u.length)){i.children=new Array(f);for(a=f-1;a>=0;--a)s.push(o=i.children[a]=new jv(u[a])),o.parent=i,o.depth=i.depth+1}}return n.eachBefore(Bv)}function Dv(){return _v(this).eachBefore(Hv)}function Pv(e){return e.children}function Hv(e){e.data=e.data.data}function Bv(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function jv(e){this.data=e,this.depth=this.height=0,this.parent=null}function Fv(e){this._=e,this.next=null}function Rv(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r-t.r;return i*i+1e-6>n*n+r*r}function Uv(e,t){var n,r=null,i=e.head,s,o;switch(t.length){case 1:n=zv(t[0]);break;case 2:n=Wv(t[0],t[1]);break;case 3:n=Xv(t[0],t[1],t[2])}while(i)o=i._,s=i.next,!n||!Rv(n,o)?(r?(e.tail=r,r.next=null):e.head=e.tail=null,t.push(o),n=Uv(e,t),t.pop(),e.head?(i.next=e.head,e.head=i):(i.next=null,e.head=e.tail=i),r=e.tail,r.next=s):r=i,i=s;return e.tail=r,n}function zv(e){return{x:e.x,y:e.y,r:e.r}}function Wv(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,u=t.r,a=s-n,f=o-r,l=u-i,c=Math.sqrt(a*a+f*f);return{x:(n+s+a/c*l)/2,y:(r+o+f/c*l)/2,r:(c+i+u)/2}}function Xv(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,u=t.y,a=t.r,f=n.x,l=n.y,c=n.r,h=2*(r-o),p=2*(i-u),d=2*(a-s),v=r*r+i*i-s*s-o*o-u*u+a*a,m=2*(r-f),g=2*(i-l),y=2*(c-s),b=r*r+i*i-s*s-f*f-l*l+c*c,w=m*p-h*g,E=(p*b-g*v)/w-r,S=(g*d-p*y)/w,x=(m*v-h*b)/w-i,T=(h*y-m*d)/w,N=S*S+T*T-1,C=2*(E*S+x*T+s),k=E*E+x*x-s*s,L=(-C-Math.sqrt(C*C-4*N*k))/(2*N);return{x:E+S*L+r,y:x+T*L+i,r:L}}function Vv(e,t,n){var r=e.x,i=e.y,s=t.r+n.r,o=e.r+n.r,u=t.x-r,a=t.y-i,f=u*u+a*a;if(f){var l=.5+((o*=o)-(s*=s))/(2*f),c=Math.sqrt(Math.max(0,2*s*(o+f)-(o-=f)*o-s*s))/(2*f);n.x=r+l*u+c*a,n.y=i+l*a-c*u}else n.x=r+o,n.y=i}function $v(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return i*i>n*n+r*r}function Jv(e,t,n){var r=e.x-t,i=e.y-n;return r*r+i*i}function Kv(e){this._=e,this.next=null,this.previous=null}function Qv(e){if(!(i=e.length))return 0;var t,n,r,i;t=e[0],t.x=0,t.y=0;if(i>1){n=e[1],t.x=-n.r,n.x=t.r,n.y=0;if(i>2){Vv(n,t,r=e[2]);var s=t.r*t.r,o=n.r*n.r,u=r.r*r.r,a=s+o+u,f=s*t.x+o*n.x+u*r.x,l=s*t.y+o*n.y+u*r.y,c,h,p,d,v,m,g;t=new Kv(t),n=new Kv(n),r=new Kv(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(p=3;p<i;++p){Vv(t._,n._,r=e[p]),r=new Kv(r);if((v=t.previous)===(d=n.next)){if($v(d._,r._)){t=n,n=d,--p;continue e}}else{m=d._.r,g=v._.r;do if(m<=g){if($v(d._,r._)){n=d,t.next=n,n.previous=t,--p;continue e}d=d.next,m+=d._.r}else{if($v(v._,r._)){t=v,t.next=n,n.previous=t,--p;continue e}v=v.previous,g+=v._.r}while(d!==v.next)}r.previous=t,r.next=n,t.next=n.previous=n=r,a+=u=r._.r*r._.r,f+=u*r._.x,l+=u*r._.y,s=Jv(t._,c=f/a,h=l/a);while((r=r.next)!==n)(u=Jv(r._,c,h))<s&&(t=r,s=u);n=t.next}t=[n._],r=n;while((r=r.next)!==n)t.push(r._);r=qv(t);for(p=0;p<i;++p)t=e[p],t.x-=r.x,t.y-=r.y;return r.r}return t.r+n.r}return t.r}function Yv(e){return e==null?null:Zv(e)}function Zv(e){if(typeof e!="function")throw new Error;return e}function em(){return 0}function nm(e){return Math.sqrt(e.value)}function im(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function sm(e,t){return function(n){if(r=n.children){var r,i,s=r.length,o=e(n)*t||0,u;if(o)for(i=0;i<s;++i)r[i].r+=o;u=Qv(r);if(o)for(i=0;i<s;++i)r[i].r-=o;n.r=u+o}}}function om(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function pm(e){return e.id}function dm(e){return e.parentId}function mm(e,t){return e.parent===t.parent?1:2}function gm(e){var t=e.children;return t?t[0]:e.t}function ym(e){var t=e.children;return t?t[t.length-1]:e.t}function bm(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function wm(e){var t=0,n=0,r=e.children,i=r.length,s;while(--i>=0)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Em(e,t,n){return e.a.parent===t.parent?e.a:n}function Sm(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function xm(e){var t=new Sm(e,0),n,r=[t],i,s,o,u;while(n=r.pop())if(s=n._.children){n.children=new Array(u=s.length);for(o=u-1;o>=0;--o)r.push(i=n.children[o]=new Sm(s[o],o)),i.parent=n}return(t.parent=new Sm(null,0)).children=[t],t}function km(e,t,n,r,i,s){var o=[],u=t.children,a,f,l=0,c,h=u.length,p,d,v=t.value,m,g,y,b,w,E,S;while(l<h){p=i-n,d=s-r,g=y=m=u[l].value,E=Math.max(d/p,p/d)/(v*e),S=m*m*E,w=Math.max(y/S,S/g);for(c=l+1;c<h;++c){m+=f=u[c].value,f<g&&(g=f),f>y&&(y=f),S=m*m*E,b=Math.max(y/S,S/g);if(b>w){m-=f;break}w=b}o.push(a={value:m,dice:p<d,children:u.slice(l,c)}),a.dice?am(a,n,r,i,v?r+=d*m/v:s):Nm(a,n,r,v?n+=p*m/v:i,s),v-=m,l=c}return o}function Bm(e){return e.x+e.vx}function jm(e){return e.y+e.vy}function Im(e,t){return t}function qm(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Um(e){return e.x}function zm(e){return e.y}function Qm(){e.event.stopImmediatePropagation()}function Zm(e,t){var n=e.document.documentElement,r=Op(e).on("dragstart.drag",null);t&&(r.on("click.drag",Gm,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function tg(e,t,n,r,i,s,o,u,a,f){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=i,this.x=s,this.y=o,this.dx=u,this.dy=a,this._=f}function ng(){return!e.event.button}function rg(){return this.parentNode}function ig(t){return t==null?{x:e.event.x,y:e.event.y}:t}function ug(e){return e[0]}function ag(e){return e[1]}function fg(){this._=null}function lg(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function cg(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function hg(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function pg(e){while(e.L)e=e.L;return e}function dg(e,t,n,r){var i=[null,null],s=Wg.push(i)-1;return i.left=e,i.right=t,n&&mg(i,e,t,n),r&&mg(i,t,e,r),Ug[e.index].halfedges.push(s),Ug[t.index].halfedges.push(s),i}function vg(e,t,n){var r=[t,n];return r.left=e,r}function mg(e,t,n,r){!e[0]&&!e[1]?(e[0]=r,e.left=t,e.right=n):e.left===n?e[1]=r:e[0]=r}function gg(e,t,n,r,i){var s=e[0],o=e[1],u=s[0],a=s[1],f=o[0],l=o[1],c=0,h=1,p=f-u,d=l-a,v;v=t-u;if(!p&&v>0)return;v/=p;if(p<0){if(v<c)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>c&&(c=v)}v=r-u;if(!p&&v<0)return;v/=p;if(p<0){if(v>h)return;v>c&&(c=v)}else if(p>0){if(v<c)return;v<h&&(h=v)}v=n-a;if(!d&&v>0)return;v/=d;if(d<0){if(v<c)return;v<h&&(h=v)}else if(d>0){if(v>h)return;v>c&&(c=v)}v=i-a;if(!d&&v<0)return;v/=d;if(d<0){if(v>h)return;v>c&&(c=v)}else if(d>0){if(v<c)return;v<h&&(h=v)}return c>0||h<1?(c>0&&(e[0]=[u+c*p,a+c*d]),h<1&&(e[1]=[u+h*p,a+h*d]),!0):!0}function yg(e,t,n,r,i){var s=e[1];if(s)return!0;var o=e[0],u=e.left,a=e.right,f=u[0],l=u[1],c=a[0],h=a[1],p=(f+c)/2,d=(l+h)/2,v,m;if(h===l){if(p<t||p>=r)return;if(f>c){if(!o)o=[p,n];else if(o[1]>=i)return;s=[p,i]}else{if(!o)o=[p,i];else if(o[1]<n)return;s=[p,n]}}else{v=(f-c)/(h-l),m=d-v*p;if(v<-1||v>1)if(f>c){if(!o)o=[(n-m)/v,n];else if(o[1]>=i)return;s=[(i-m)/v,i]}else{if(!o)o=[(i-m)/v,i];else if(o[1]<n)return;s=[(n-m)/v,n]}else if(l<h){if(!o)o=[t,v*t+m];else if(o[0]>=r)return;s=[r,v*r+m]}else{if(!o)o=[r,v*r+m];else if(o[0]<t)return;s=[t,v*t+m]}}return e[0]=o,e[1]=s,!0}function bg(e,t,n,r){var i=Wg.length,s;while(i--)(!yg(s=Wg[i],e,t,n,r)||!gg(s,e,t,n,r)||!(Math.abs(s[0][0]-s[1][0])>Ig||Math.abs(s[0][1]-s[1][1])>Ig))&&delete Wg[i]}function wg(e){return Ug[e.index]={site:e,halfedges:[]}}function Eg(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Sg(e,t){return t[+(t.left!==e.site)]}function xg(e,t){return t[+(t.left===e.site)]}function Tg(){for(var e=0,t=Ug.length,n,r,i,s;e<t;++e)if((n=Ug[e])&&(s=(r=n.halfedges).length)){var o=new Array(s),u=new Array(s);for(i=0;i<s;++i)o[i]=i,u[i]=Eg(n,Wg[r[i]]);o.sort(function(e,t){return u[t]-u[e]});for(i=0;i<s;++i)u[i]=r[o[i]];for(i=0;i<s;++i)r[i]=u[i]}}function Ng(e,t,n,r){var i=Ug.length,s,o,u,a,f,l,c,h,p,d,v,m,g=!0;for(s=0;s<i;++s)if(o=Ug[s]){u=o.site,f=o.halfedges,a=f.length;while(a--)Wg[f[a]]||f.splice(a,1);a=0,l=f.length;while(a<l){d=xg(o,Wg[f[a]]),v=d[0],m=d[1],c=Sg(o,Wg[f[++a%l]]),h=c[0],p=c[1];if(Math.abs(v-h)>Ig||Math.abs(m-p)>Ig)f.splice(a,0,Wg.push(vg(u,d,Math.abs(v-e)<Ig&&r-m>Ig?[e,Math.abs(h-e)<Ig?p:r]:Math.abs(m-r)<Ig&&n-v>Ig?[Math.abs(p-r)<Ig?h:n,r]:Math.abs(v-n)<Ig&&m-t>Ig?[n,Math.abs(h-n)<Ig?p:t]:Math.abs(m-t)<Ig&&v-e>Ig?[Math.abs(p-t)<Ig?h:e,t]:null))-1),++l}l&&(g=!1)}if(g){var y,b,w,E=Infinity;for(s=0,g=null;s<i;++s)if(o=Ug[s])u=o.site,y=u[0]-e,b=u[1]-t,w=y*y+b*b,w<E&&(E=w,g=o);if(g){var S=[e,t],x=[e,r],T=[n,r],N=[n,t];g.halfedges.push(Wg.push(vg(u=g.site,S,x))-1,Wg.push(vg(u,x,T))-1,Wg.push(vg(u,T,N))-1,Wg.push(vg(u,N,S))-1)}}for(s=0;s<i;++s)if(o=Ug[s])o.halfedges.length||delete Ug[s]}function Lg(){lg(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ag(e){var t=e.P,n=e.N;if(!t||!n)return;var r=t.site,i=e.site,s=n.site;if(r===s)return;var o=i[0],u=i[1],a=r[0]-o,f=r[1]-u,l=s[0]-o,c=s[1]-u,h=2*(a*c-f*l);if(h>=-qg)return;var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,g=Cg.pop()||new Lg;g.arc=e,g.site=i,g.x=v+o,g.y=(g.cy=m+u)+Math.sqrt(v*v+m*m),e.circle=g;var y=null,b=zg._;while(b)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}zg.insert(y,g),y||(kg=g)}function Og(e){var t=e.circle;t&&(t.P||(kg=t.N),zg.remove(t),Cg.push(t),lg(t),e.circle=null)}function _g(){lg(this),this.edge=this.site=this.circle=null}function Dg(e){var t=Mg.pop()||new _g;return t.site=e,t}function Pg(e){Og(e),Rg.remove(e),Mg.push(e),lg(e)}function Hg(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],s=e.P,o=e.N,u=[e];Pg(e);var a=s;while(a.circle&&Math.abs(n-a.circle.x)<Ig&&Math.abs(r-a.circle.cy)<Ig)s=a.P,u.unshift(a),Pg(a),a=s;u.unshift(a),Og(a);var f=o;while(f.circle&&Math.abs(n-f.circle.x)<Ig&&Math.abs(r-f.circle.cy)<Ig)o=f.N,u.push(f),Pg(f),f=o;u.push(f),Og(f);var l=u.length,c;for(c=1;c<l;++c)f=u[c],a=u[c-1],mg(f.edge,a.site,f.site,i);a=u[0],f=u[l-1],f.edge=dg(a.site,f.site,null,i),Ag(a),Ag(f)}function Bg(e){var t=e[0],n=e[1],r,i,s,o,u=Rg._;while(u){s=jg(u,n)-t;if(s>Ig)u=u.L;else{o=t-Fg(u,n);if(!(o>Ig)){s>-Ig?(r=u.P,i=u):o>-Ig?(r=u,i=u.N):r=i=u;break}if(!u.R){r=u;break}u=u.R}}wg(e);var a=Dg(e);Rg.insert(r,a);if(!r&&!i)return;if(r===i){Og(r),i=Dg(r.site),Rg.insert(a,i),a.edge=i.edge=dg(r.site,a.site),Ag(r),Ag(i);return}if(!i){a.edge=dg(r.site,a.site);return}Og(r),Og(i);var f=r.site,l=f[0],c=f[1],h=e[0]-l,p=e[1]-c,d=i.site,v=d[0]-l,m=d[1]-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w=[(m*y-p*b)/g+l,(h*b-v*y)/g+c];mg(i.edge,f,d,w),a.edge=dg(f,e,null,w),i.edge=dg(e,d,null,w),Ag(r),Ag(i)}function jg(e,t){var n=e.site,r=n[0],i=n[1],s=i-t;if(!s)return r;var o=e.P;if(!o)return-Infinity;n=o.site;var u=n[0],a=n[1],f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function Fg(e,t){var n=e.N;if(n)return jg(n,t);var r=e.site;return r[1]===t?r[0]:Infinity}function Xg(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function Vg(e,t){return t[1]-e[1]||t[0]-e[0]}function $g(e,t){var n=e.sort(Vg).pop(),r,i,s;Wg=[],Ug=new Array(e.length),Rg=new fg,zg=new fg;for(;;){s=kg;if(n&&(!s||n[1]<s.y||n[1]===s.y&&n[0]<s.x)){if(n[0]!==r||n[1]!==i)Bg(n),r=n[0],i=n[1];n=e.pop()}else{if(!s)break;Hg(s.arc)}}Tg();if(t){var o=+t[0][0],u=+t[0][1],a=+t[1][0],f=+t[1][1];bg(o,u,a,f),Ng(o,u,a,f)}this.edges=Wg,this.cells=Ug,Rg=zg=Wg=Ug=null}function Qg(e,t,n){this.target=e,this.type=t,this.transform=n}function Gg(e,t,n){this.k=e,this.x=t,this.y=n}function Zg(e){return e.__zoom||Yg}function ey(){e.event.stopImmediatePropagation()}function ny(){return!e.event.button}function ry(){var e=this,t,n;return e instanceof SVGElement?(e=e.ownerSVGElement||e,t=e.width.baseVal.value,n=e.height.baseVal.value):(t=e.clientWidth,n=e.clientHeight),[[0,0],[t,n]]}function iy(){return this.__zoom||Yg}function ay(){e.event.stopImmediatePropagation()}function Sy(e){return{type:e}}function xy(){return!e.event.button}function Ty(){var e=this.ownerSVGElement||this;return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Ny(e){while(!e.__brush)if(!(e=e.parentNode))return;return e.__brush}function Cy(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function ky(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function Ly(){return My(dy)}function Ay(){return My(vy)}function My(t){function u(e){var n=e.property("__brush",h).selectAll(".overlay").data([Sy("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",gy.overlay).merge(n).each(function(){var e=Ny(this).extent;Op(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),e.selectAll(".selection").data([Sy("selection")]).enter().append("rect").attr("class","selection").attr("cursor",gy.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,function(e){return e.type});r.exit().remove(),r.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return gy[e.type]}),e.each(a).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",c)}function a(){var e=Op(this),t=Ny(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return e.type[e.type.length-1]==="e"?t[1][0]-s/2:t[0][0]-s/2}).attr("y",function(e){return e.type[0]==="s"?t[1][1]-s/2:t[0][1]-s/2}).attr("width",function(e){return e.type==="n"||e.type==="s"?t[1][0]-t[0][0]+s:s}).attr("height",function(e){return e.type==="e"||e.type==="w"?t[1][1]-t[0][1]+s:s})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(e,t){return e.__brush.emitter||new l(e,t)}function l(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function c(){function F(){var e=uh(n);A&&!O&&!M&&(Math.abs(e[0]-D[0])>Math.abs(e[1]-D[1])?M=!0:O=!0),D=e,L=!0,fy(),I()}function I(){var e;C=D[0]-_[0],k=D[1]-_[1];switch(s){case cy:case ly:u&&(C=Math.max(d-v,Math.min(w-E,C)),m=v+C,S=E+C),l&&(k=Math.max(g-y,Math.min(x-T,k)),b=y+k,N=T+k);break;case hy:u<0?(C=Math.max(d-v,Math.min(w-v,C)),m=v+C,S=E):u>0&&(C=Math.max(d-E,Math.min(w-E,C)),m=v,S=E+C),l<0?(k=Math.max(g-y,Math.min(x-y,k)),b=y+k,N=T):l>0&&(k=Math.max(g-T,Math.min(x-T,k)),b=y,N=T+k);break;case py:u&&(m=Math.max(d,Math.min(w,v-C*u)),S=Math.max(d,Math.min(w,E+C*u))),l&&(b=Math.max(g,Math.min(x,y-k*l)),N=Math.max(g,Math.min(x,T+k*l)))}S<m&&(u*=-1,e=v,v=E,E=e,e=m,m=S,S=e,i in yy&&B.attr("cursor",gy[i=yy[i]])),N<b&&(l*=-1,e=y,y=T,T=e,e=b,b=N,N=e,i in by&&B.attr("cursor",gy[i=by[i]])),c.selection&&(p=c.selection),O&&(m=p[0][0],S=p[1][0]),M&&(b=p[0][1],N=p[1][1]);if(p[0][0]!==m||p[0][1]!==b||p[1][0]!==S||p[1][1]!==N)c.selection=[[m,b],[S,N]],a.call(n),P.brush()}function q(){ay();if(e.event.touches){if(e.event.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500),H.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Zm(e.event.view,L),j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);H.attr("pointer-events","all"),B.attr("cursor",gy.overlay),c.selection&&(p=c.selection),Cy(p)&&(c.selection=null,a.call(n)),P.end()}function R(){switch(e.event.keyCode){case 16:A=u&&l;break;case 18:s===hy&&(u&&(E=S-C*u,v=m+C*u),l&&(T=N-k*l,y=b+k*l),s=py,I());break;case 32:if(s===hy||s===py)u<0?E=S-C:u>0&&(v=m-C),l<0?T=N-k:l>0&&(y=b-k),s=cy,B.attr("cursor",gy.selection),I();break;default:return}fy()}function U(){switch(e.event.keyCode){case 16:A&&(O=M=A=!1,I());break;case 18:s===py&&(u<0?E=S:u>0&&(v=m),l<0?T=N:l>0&&(y=b),s=hy,I());break;case 32:s===cy&&(e.event.altKey?(u&&(E=S-C*u,v=m+C*u),l&&(T=N-k*l,y=b+k*l),s=py):(u<0?E=S:u>0&&(v=m),l<0?T=N:l>0&&(y=b),s=hy),B.attr("cursor",gy[i]),I());break;default:return}fy()}if(e.event.touches){if(e.event.changedTouches.length<e.event.touches.length)return fy()}else if(o)return;if(!r.apply(this,arguments))return;var n=this,i=e.event.target.__data__.type,s=(e.event.metaKey?i="overlay":i)==="selection"?ly:e.event.altKey?py:hy,u=t===vy?null:wy[i],l=t===dy?null:Ey[i],c=Ny(n),h=c.extent,p=c.selection,d=h[0][0],v,m,g=h[0][1],y,b,w=h[1][0],E,S,x=h[1][1],T,N,C,k,L,A=u&&l&&e.event.shiftKey,O,M,_=uh(n),D=_,P=f(n,arguments).beforestart();i==="overlay"?c.selection=p=[[v=t===vy?d:_[0],y=t===dy?g:_[1]],[E=t===vy?w:v,T=t===dy?x:y]]:(v=p[0][0],y=p[0][1],E=p[1][0],T=p[1][1]),m=v,b=y,S=E,N=T;var H=Op(n).attr("pointer-events","none"),B=H.selectAll(".overlay").attr("cursor",gy[i]);if(e.event.touches)H.on("touchmove.brush",F,!0).on("touchend.brush touchcancel.brush",q,!0);else{var j=Op(e.event.view).on("keydown.brush",R,!0).on("keyup.brush",U,!0).on("mousemove.brush",F,!0).on("mouseup.brush",q,!0);Ym(e.event.view)}ay(),Jp(n),a.call(n),P.start()}function h(){var e=this.__brush||{selection:null};return e.extent=n.apply(this,arguments),e.dim=t,e}var n=Ty,r=xy,i=Vo(u,"start","brush","end"),s=6,o;return u.move=function(e,n){e.selection?e.on("start.brush",function(){f(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){f(this,arguments).end()}).tween("brush",function(){function l(t){r.selection=t===1&&Cy(o)?null:u(t),a.call(e),i.brush()}var e=this,r=e.__brush,i=f(e,arguments),s=r.selection,o=t.input(typeof n=="function"?n.apply(this,arguments):n,r.extent),u=co(s,o);return s&&o?l:l(1)}):e.each(function(){var e=this,r=arguments,i=e.__brush,s=t.input(typeof n=="function"?n.apply(e,r):n,i.extent),o=f(e,r).beforestart();Jp(e),i.selection=s==null||Cy(s)?null:s,a.call(e),o.start().brush().end()})},l.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return--this.active===0&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){ih(new uy(u,e,t.output(this.state.selection)),i.apply,i,[e,this.that,this.args])}},u.extent=function(e){return arguments.length?(n=typeof e=="function"?e:oy([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),u):n},u.filter=function(e){return arguments.length?(r=typeof e=="function"?e:oy(!!e),u):r},u.handleSize=function(e){return arguments.length?(s=+e,u):s},u.on=function(){var e=i.on.apply(i,arguments);return e===i?u:e},u}function Fy(e){return function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)}}function Uy(e){return e.source}function zy(e){return e.target}function Wy(e){return e.radius}function Xy(e){return e.startAngle}function Vy(e){return e.endAngle}function Ky(){this.reset()}function Gy(e,t,n){var r=e.s=t+n,i=r-t,s=r-i;e.t=t-s+(n-i)}function yb(e){return e>1?0:e<-1?eb:Math.acos(e)}function bb(e){return e>1?tb:e<-1?-tb:Math.asin(e)}function wb(e){return(e=db(e/2))*e}function Eb(){}function Sb(e,t){e&&Tb.hasOwnProperty(e.type)&&Tb[e.type](e,t)}function Nb(e,t,n){var r=-1,i=e.length-n,s;t.lineStart();while(++r<i)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Cb(e,t){var n=-1,r=e.length;t.polygonStart();while(++n<r)Nb(e[n],t,1);t.polygonEnd()}function Bb(){Hb.point=Fb}function jb(){Ib(Ob,Mb)}function Fb(e,t){Hb.point=Ib,Ob=e,Mb=t,e*=sb,t*=sb,_b=e,Db=fb(t=t/2+nb),Pb=db(t)}function Ib(e,t){e*=sb,t*=sb,t=t/2+nb;var n=e-_b,r=n>=0?1:-1,i=r*n,s=fb(t),o=db(t),u=Pb*o,a=Db*s+u*fb(i),f=u*r*db(i);Lb.add(ab(f,a)),_b=e,Db=s,Pb=o}function Rb(e){return[ab(e[1],e[0]),bb(e[2])]}function Ub(e){var t=e[0],n=e[1],r=fb(n);return[r*fb(t),r*db(t),db(n)]}function zb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Wb(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Xb(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Vb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function $b(e){var t=mb(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function ow(e,t){rw.push(iw=[Jb=e,Qb=e]),t<Kb&&(Kb=t),t>Gb&&(Gb=t)}function uw(e,t){var n=Ub([e*sb,t*sb]);if(tw){var r=Wb(tw,n),i=[r[1],-r[0],0],s=Wb(i,r);$b(s),s=Rb(s);var o=e-Yb,u=o>0?1:-1,a=s[0]*ib*u,f,l=ob(o)>180;l^(u*Yb<a&&a<u*e)?(f=s[1]*ib,f>Gb&&(Gb=f)):(a=(a+360)%360-180,l^(u*Yb<a&&a<u*e))?(f=-s[1]*ib,f<Kb&&(Kb=f)):(t<Kb&&(Kb=t),t>Gb&&(Gb=t)),l?e<Yb?pw(Jb,e)>pw(Jb,Qb)&&(Qb=e):pw(e,Qb)>pw(Jb,Qb)&&(Jb=e):Qb>=Jb?(e<Jb&&(Jb=e),e>Qb&&(Qb=e)):e>Yb?pw(Jb,e)>pw(Jb,Qb)&&(Qb=e):pw(e,Qb)>pw(Jb,Qb)&&(Jb=e)}else ow(e,t);tw=n,Yb=e}function aw(){sw.point=uw}function fw(){iw[0]=Jb,iw[1]=Qb,sw.point=ow,tw=null}function lw(e,t){if(tw){var n=e-Yb;nw.add(ob(n)>180?n+(n>0?360:-360):n)}else Zb=e,ew=t;Hb.point(e,t),uw(e,t)}function cw(){Hb.lineStart()}function hw(){lw(Zb,ew),Hb.lineEnd(),ob(nw)>Yy&&(Jb=-(Qb=180)),iw[0]=Jb,iw[1]=Qb,tw=null}function pw(e,t){return(t-=e)<0?t+360:t}function dw(e,t){return e[0]-t[0]}function vw(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Pw(e,t){e*=sb,t*=sb;var n=fb(t);Hw(n*fb(e),n*db(e),db(t))}function Hw(e,t,n){++gw,bw+=(e-bw)/gw,ww+=(t-ww)/gw,Ew+=(n-Ew)/gw}function Bw(){Dw.point=jw}function jw(e,t){e*=sb,t*=sb;var n=fb(t);Ow=n*fb(e),Mw=n*db(e),_w=db(t),Dw.point=Fw,Hw(Ow,Mw,_w)}function Fw(e,t){e*=sb,t*=sb;var n=fb(t),r=n*fb(e),i=n*db(e),s=db(t),o=ab(mb((o=Mw*s-_w*i)*o+(o=_w*r-Ow*s)*o+(o=Ow*i-Mw*r)*o),Ow*r+Mw*i+_w*s);yw+=o,Sw+=o*(Ow+(Ow=r)),xw+=o*(Mw+(Mw=i)),Tw+=o*(_w+(_w=s)),Hw(Ow,Mw,_w)}function Iw(){Dw.point=Pw}function qw(){Dw.point=Uw}function Rw(){zw(Lw,Aw),Dw.point=Pw}function Uw(e,t){Lw=e,Aw=t,e*=sb,t*=sb,Dw.point=zw;var n=fb(t);Ow=n*fb(e),Mw=n*db(e),_w=db(t),Hw(Ow,Mw,_w)}function zw(e,t){e*=sb,t*=sb;var n=fb(t),r=n*fb(e),i=n*db(e),s=db(t),o=Mw*s-_w*i,u=_w*r-Ow*s,a=Ow*i-Mw*r,f=mb(o*o+u*u+a*a),l=Ow*r+Mw*i+_w*s,c=f&&-yb(l)/f,h=ab(f,l);Nw+=c*o,Cw+=c*u,kw+=c*a,yw+=h,Sw+=h*(Ow+(Ow=r)),xw+=h*(Mw+(Mw=i)),Tw+=h*(_w+(_w=s)),Hw(Ow,Mw,_w)}function $w(e,t){return[e>eb?e-rb:e<-eb?e+rb:e,t]}function Jw(e,t,n){return(e%=rb)?t||n?Vw(Qw(e),Gw(t,n)):Qw(e):t||n?Gw(t,n):$w}function Kw(e){return function(t,n){return t+=e,[t>eb?t-rb:t<-eb?t+rb:t,n]}}function Qw(e){var t=Kw(e);return t.invert=Kw(-e),t}function Gw(e,t){function o(e,t){var o=fb(t),u=fb(e)*o,a=db(e)*o,f=db(t),l=f*n+u*r;return[ab(a*i-l*s,u*n-f*r),bb(l*i+a*s)]}var n=fb(e),r=db(e),i=fb(t),s=db(t);return o.invert=function(e,t){var o=fb(t),u=fb(e)*o,a=db(e)*o,f=db(t),l=f*i-a*s;return[ab(a*i+f*s,u*n+l*r),bb(l*n-u*r)]},o}function Zw(e,t,n,r,i,s){if(!n)return;var o=fb(t),u=db(t),a=r*n;if(i==null)i=t+r*rb,s=t-a/2;else{i=eE(o,i),s=eE(o,s);if(r>0?i<s:i>s)i+=r*rb}for(var f,l=i;r>0?l>s:l<s;l-=a)f=Rb([o,-u*fb(l),-u*db(l)]),e.point(f[0],f[1])}function eE(e,t){t=Ub(t),t[0]-=e,$b(t);var n=yb(-t[1]);return((-t[2]<0?-n:n)+rb-Yy)%rb}function sE(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function uE(e){if(!(t=e.length))return;var t,n=0,r=e[0],i;while(++n<t)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}function lE(e,t,n,r){function i(i,s){return e<=i&&i<=n&&t<=s&&s<=r}function s(i,s,u,f){var l=0,c=0;if(i==null||(l=o(i,u))!==(c=o(s,u))||a(i,s)<0^u>0){do f.point(l===0||l===3?e:n,l>1?r:t);while((l=(l+u+4)%4)!==c)}else f.point(s[0],s[1])}function o(r,i){return ob(r[0]-e)<Yy?i>0?0:3:ob(r[0]-n)<Yy?i>0?2:1:ob(r[1]-t)<Yy?i>0?1:0:i>0?3:2}function u(e,t){return a(e.x,t.x)}function a(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}return function(o){function S(e,t){i(e,t)&&a.point(e,t)}function x(){var t=0;for(var n=0,i=c.length;n<i;++n)for(var s=c[n],o=1,u=s.length,a=s[0],f,l,h=a[0],p=a[1];o<u;++o)f=h,l=p,a=s[o],h=a[0],p=a[1],l<=r?p>r&&(h-f)*(r-l)>(p-l)*(e-f)&&++t:p<=r&&(h-f)*(r-l)<(p-l)*(e-f)&&--t;return t}function T(){a=f,l=[],c=[],w=!0}function N(){var e=x(),t=w&&e,n=(l=_(l)).length;if(t||n)o.polygonStart(),t&&(o.lineStart(),s(null,null,1,o),o.lineEnd()),n&&oE(l,u,e,s,o),o.polygonEnd();a=o,l=c=h=null}function C(){E.point=L,c&&c.push(h=[]),b=!0,y=!1,m=g=NaN}function k(){l&&(L(p,d),v&&y&&f.rejoin(),l.push(f.result())),E.point=S,y&&a.lineEnd()}function L(s,o){var u=i(s,o);c&&h.push([s,o]);if(b)p=s,d=o,v=u,b=!1,u&&(a.lineStart(),a.point(s,o));else if(u&&y)a.point(s,o);else{var f=[m=Math.max(fE,Math.min(aE,m)),g=Math.max(fE,Math.min(aE,g))],l=[s=Math.max(fE,Math.min(aE,s)),o=Math.max(fE,Math.min(aE,o))];rE(f,l,e,t,n,r)?(y||(a.lineStart(),a.point(f[0],f[1])),a.point(l[0],l[1]),u||a.lineEnd(),w=!1):u&&(a.lineStart(),a.point(s,o),w=!1)}m=s,g=o,y=u}var a=o,f=nE(),l,c,h,p,d,v,m,g,y,b,w,E={point:S,lineStart:C,lineEnd:k,polygonStart:T,polygonEnd:N};return E}}function gE(){mE.point=bE,mE.lineEnd=yE}function yE(){mE.point=mE.lineEnd=Eb}function bE(e,t){e*=sb,t*=sb,pE=e,dE=db(t),vE=fb(t),mE.point=wE}function wE(e,t){e*=sb,t*=sb;var n=db(t),r=fb(t),i=ob(e-pE),s=fb(i),o=db(i),u=r*o,a=vE*n-dE*r*s,f=dE*n+vE*r*s;hE.add(ab(mb(u*u+a*a),f)),pE=e,dE=n,vE=r}function NE(e,t,n){var r=y(e,t-Yy,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function CE(e,t,n){var r=y(e,t-Yy,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function kE(){function g(){return{type:"MultiLineString",coordinates:b()}}function b(){return y(lb(r/l)*l,n,l).map(d).concat(y(lb(u/c)*c,o,c).map(v)).concat(y(lb(t/a)*a,e,a).filter(function(e){return ob(e%l)>Yy}).map(h)).concat(y(lb(s/f)*f,i,f).filter(function(e){return ob(e%c)>Yy}).map(p))}var e,t,n,r,i,s,o,u,a=10,f=a,l=90,c=360,h,p,d,v,m=2.5;return g.lines=function(){return b().map(function(e){return{type:"LineString",coordinates:e}})},g.outline=function(){return{type:"Polygon",coordinates:[d(r).concat(v(o).slice(1),d(n).reverse().slice(1),v(u).reverse().slice(1))]}},g.extent=function(e){return arguments.length?g.extentMajor(e).extentMinor(e):g.extentMinor()},g.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),u>o&&(e=u,u=o,o=e),g.precision(m)):[[r,u],[n,o]]},g.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],s=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),s>i&&(n=s,s=i,i=n),g.precision(m)):[[t,s],[e,i]]},g.step=function(e){return arguments.length?g.stepMajor(e).stepMinor(e):g.stepMinor()},g.stepMajor=function(e){return arguments.length?(l=+e[0],c=+e[1],g):[l,c]},g.stepMinor=function(e){return arguments.length?(a=+e[0],f=+e[1],g):[a,f]},g.precision=function(a){return arguments.length?(m=+a,h=NE(s,i,90),p=CE(t,e,m),d=NE(u,o,90),v=CE(r,n,m),g):m},g.extentMajor([[-180,-90+Yy],[180,90-Yy]]).extentMinor([[-180,-80-Yy],[180,80+Yy]])}function LE(){return kE()()}function FE(){jE.point=IE}function IE(e,t){jE.point=qE,DE=HE=e,PE=BE=t}function qE(e,t){_E.add(BE*e-HE*t),HE=e,BE=t}function RE(){qE(DE,PE)}function $E(e,t){e<UE&&(UE=e),e>WE&&(WE=e),t<zE&&(zE=t),t>XE&&(XE=t)}function aS(e,t){JE+=e,KE+=t,++QE}function fS(){uS.point=lS}function lS(e,t){uS.point=cS,aS(sS=e,oS=t)}function cS(e,t){var n=e-sS,r=t-oS,i=mb(n*n+r*r);GE+=i*(sS+e)/2,YE+=i*(oS+t)/2,ZE+=i,aS(sS=e,oS=t)}function hS(){uS.point=aS}function pS(){uS.point=vS}function dS(){mS(rS,iS)}function vS(e,t){uS.point=mS,aS(rS=sS=e,iS=oS=t)}function mS(e,t){var n=e-sS,r=t-oS,i=mb(n*n+r*r);GE+=i*(sS+e)/2,YE+=i*(oS+t)/2,ZE+=i,i=oS*e-sS*t,eS+=i*(sS+e),tS+=i*(oS+t),nS+=i*3,aS(sS=e,oS=t)}function gS(e){this._context=e}function yS(){this._string=[]}function bS(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function TS(e){return e.length>1}function NS(e,t){return((e=e.x)[0]<0?e[1]-tb-Yy:tb-e[1])-((t=t.x)[0]<0?t[1]-tb-Yy:tb-t[1])}function kS(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var u=s>0?eb:-eb,a=ob(s-t);ob(a-eb)<Yy?(e.point(t,n=(n+o)/2>0?tb:-tb),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),i=0):r!==u&&a>=eb&&(ob(t-r)<Yy&&(t-=r*Yy),ob(s-u)<Yy&&(s-=u*Yy),n=LS(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=s,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function LS(e,t,n,r){var i,s,o=db(e-n);return ob(o)>Yy?ub((db(t)*(s=fb(r))*db(n)-db(r)*(i=fb(t))*db(e))/(i*s*o)):(t+r)/2}function AS(e,t,n,r){var i;if(e==null)i=n*tb,r.point(-eb,i),r.point(0,i),r.point(eb,i),r.point(eb,0),r.point(eb,-i),r.point(0,-i),r.point(-eb,-i),r.point(-eb,0),r.point(-eb,i);else if(ob(e[0]-t[0])>Yy){var s=e[0]<t[0]?eb:-eb;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function _S(e){return function(t){var n=new DS;for(var r in e)n[r]=e[r];return n.stream=t,n}}function DS(){}function PS(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],s=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),s!=null&&e.clipExtent(null),kb(n,e.stream(VE));var o=VE.result(),u=Math.min(r/(o[1][0]-o[0][0]),i/(o[1][1]-o[0][1])),a=+t[0][0]+(r-u*(o[1][0]+o[0][0]))/2,f=+t[0][1]+(i-u*(o[1][1]+o[0][1]))/2;return s!=null&&e.clipExtent(s),e.scale(u*150).translate([a,f])}function HS(e,t,n){return PS(e,[[0,0],t],n)}function IS(e){return _S({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function qS(e,t){function n(r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=f-r,y=l-i,b=g*g+y*y;if(b>4*t&&v--){var w=o+h,E=u+p,S=a+d,x=mb(w*w+E*E+S*S),T=bb(S/=x),N=ob(ob(S)-1)<Yy||ob(s-c)<Yy?(s+c)/2:ab(E,w),C=e(N,T),k=C[0],L=C[1],A=k-r,O=L-i,M=y*A-g*O;if(M*M/b>t||ob((g*A+y*O)/b-.5)>.3||o*h+u*p+a*d<jS)n(r,i,s,o,u,a,k,L,N,w/=x,E/=x,S,v,m),m.point(k,L),n(k,L,N,w,E,S,f,l,c,h,p,d,v,m)}}return function(t){function m(n,r){n=e(n,r),t.point(n[0],n[1])}function g(){l=NaN,v.point=y,t.lineStart()}function y(r,i){var s=Ub([r,i]),o=e(r,i);n(l,c,f,h,p,d,l=o[0],c=o[1],f=r,h=s[0],p=s[1],d=s[2],BS,t),t.point(l,c)}function b(){v.point=m,t.lineEnd()}function w(){g(),v.point=E,v.lineEnd=S}function E(e,t){y(r=e,t),i=l,s=c,o=h,u=p,a=d,v.point=y}function S(){n(l,c,f,h,p,d,i,s,r,o,u,a,BS,t),v.lineEnd=b,b()}var r,i,s,o,u,a,f,l,c,h,p,d,v={point:m,lineStart:g,lineEnd:b,polygonStart:function(){t.polygonStart(),v.lineStart=w},polygonEnd:function(){t.polygonEnd(),v.lineStart=g}};return v}}function US(e){return zS(function(){return e})()}function zS(e){function N(e){return e=p(e[0]*sb,e[1]*sb),[e[0]*n+s,o-e[1]*n]}function C(e){return e=p.invert((e[0]-s)/n,(o-e[1])/n),e&&[e[0]*ib,e[1]*ib]}function k(e,r){return e=t(e,r),[e[0]*n+s,o-e[1]*n]}function L(){p=Vw(h=Jw(f,l,c),t);var e=t(u,a);return s=r-e[0]*n,o=i+e[1]*n,A()}function A(){return x=T=null,N}var t,n=150,r=480,i=250,s,o,u=0,a=0,f=0,l=0,c=0,h,p,d=null,v=CS,m=null,g,y,b,w=OE,E=.5,S=FS(k,E),x,T;return N.stream=function(e){return x&&T===e?x:x=RS(v(h,S(w(T=e))))},N.clipAngle=function(e){return arguments.length?(v=+e?OS(d=e*sb,6*sb):(d=null,CS),A()):d*ib},N.clipExtent=function(e){return arguments.length?(w=e==null?(m=g=y=b=null,OE):lE(m=+e[0][0],g=+e[0][1],y=+e[1][0],b=+e[1][1]),A()):m==null?null:[[m,g],[y,b]]},N.scale=function(e){return arguments.length?(n=+e,L()):n},N.translate=function(e){return arguments.length?(r=+e[0],i=+e[1],L()):[r,i]},N.center=function(e){return arguments.length?(u=e[0]%360*sb,a=e[1]%360*sb,L()):[u*ib,a*ib]},N.rotate=function(e){return arguments.length?(f=e[0]%360*sb,l=e[1]%360*sb,c=e.length>2?e[2]%360*sb:0,L()):[f*ib,l*ib,c*ib]},N.precision=function(e){return arguments.length?(S=FS(k,E=e*e),A()):mb(E)},N.fitExtent=function(e,t){return PS(N,e,t)},N.fitSize=function(e,t){return HS(N,e,t)},function(){return t=e.apply(this,arguments),N.invert=t.invert&&C,L()}}function WS(e){var t=0,n=eb/3,r=zS(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*sb,n=e[1]*sb):[t*ib,n*ib]},i}function XS(e){function n(e,n){return[e*t,db(n)/t]}var t=fb(e);return n.invert=function(e,n){return[e/t,bb(n*t)]},n}function VS(e,t){function o(e,t){var n=mb(i-2*r*db(t))/r;return[n*db(e*=r),s-n*fb(e)]}var n=db(e),r=(n+db(t))/2;if(ob(r)<Yy)return XS(e);var i=1+n*(2*r-n),s=mb(i)/r;return o.invert=function(e,t){var n=s-t;return[ab(e,ob(n))/r*vb(n),bb((i-(e*e+n*n)*r*r)/(2*r))]},o}function KS(e){var t=e.length;return{point:function(n,r){var i=-1;while(++i<t)e[i].point(n,r)},sphere:function(){var n=-1;while(++n<t)e[n].sphere()},lineStart:function(){var n=-1;while(++n<t)e[n].lineStart()},lineEnd:function(){var n=-1;while(++n<t)e[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<t)e[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<t)e[n].polygonEnd()}}}function GS(e){return function(t,n){var r=fb(t),i=fb(n),s=e(r*i);return[s*i*db(t),s*db(n)]}}function YS(e){return function(t,n){var r=mb(t*t+n*n),i=e(r),s=db(i),o=fb(i);return[ab(t*s,r*o),bb(r&&n*s/r)]}}function rx(e,t){return[e,hb(gb((tb+t)/2))]}function sx(e){var t=US(e),n=t.scale,r=t.translate,i=t.clipExtent,s;return t.scale=function(e){return arguments.length?(n(e),s&&t.clipExtent(null),t):n()},t.translate=function(e){return arguments.length?(r(e),s&&t.clipExtent(null),t):r()},t.clipExtent=function(e){if(!arguments.length)return s?null:i();if(s=e==null){var o=eb*n(),u=r();e=[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]}return i(e),t},t.clipExtent(null)}function ox(e){return gb((tb+e)/2)}function ux(e,t){function s(e,t){i>0?t<-tb+Yy&&(t=-tb+Yy):t>tb-Yy&&(t=tb-Yy);var n=i/pb(ox(t),r);return[n*db(r*e),i-n*fb(r*e)]}var n=fb(e),r=e===t?db(e):hb(n/fb(t))/hb(ox(t)/ox(e)),i=n*pb(ox(e),r)/r;return r?(s.invert=function(e,t){var n=i-t,s=vb(r)*mb(e*e+n*n);return[ab(e,ob(n))/r*vb(n),2*ub(pb(i/s,1/r))-tb]},s):rx}function fx(e,t){return[e,t]}function cx(e,t){function s(e,t){var n=i-t,s=r*e;return[n*db(s),i-n*fb(s)]}var n=fb(e),r=e===t?db(e):(n-fb(t))/(t-e),i=n/r+e;return ob(r)<Yy?fx:(s.invert=function(e,t){var n=i-t;return[ab(e,ob(n))/r*vb(n),i-vb(r)*mb(e*e+n*n)]},s)}function px(e,t){var n=fb(t),r=fb(e)*n;return[n*db(e)/r,db(t)/r]}function vx(e,t,n){return e===1&&t===0&&n===0?OE:_S({point:function(r,i){this.stream.point(r*e+t,i*e+n)}})}function gx(e,t){return[fb(t)*db(e),db(t)]}function bx(e,t){var n=fb(t),r=1+fb(e)*n;return[n*db(e)/r,db(t)/r]}function Ex(e,t){return[hb(gb((tb+t)/2)),-e]}var t="4.3.0",n=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},r=function(e){return e.length===1&&(e=i(e)),{left:function(t,n,r,i){r==null&&(r=0),i==null&&(i=t.length);while(r<i){var s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right:function(t,n,r,i){r==null&&(r=0),i==null&&(i=t.length);while(r<i){var s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}},s=r(n),o=s.right,u=s.left,a=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},f=function(e){return e===null?NaN:+e},l=function(e,t){var n=e.length,r=0,i,s,o=0,u=-1,a=0;if(t==null)while(++u<n)isNaN(i=f(e[u]))||(s=i-r,r+=s/++a,o+=s*(i-r));else while(++u<n)isNaN(i=f(t(e[u],u,e)))||(s=i-r,r+=s/++a,o+=s*(i-r));if(a>1)return o/(a-1)},c=function(e,t){var n=l(e,t);return n?Math.sqrt(n):n},h=function(e,t){var n=-1,r=e.length,i,s,o;if(t==null){while(++n<r)if((s=e[n])!=null&&s>=s){i=o=s;break}while(++n<r)(s=e[n])!=null&&(i>s&&(i=s),o<s&&(o=s))}else{while(++n<r)if((s=t(e[n],n,e))!=null&&s>=s){i=o=s;break}while(++n<r)(s=t(e[n],n,e))!=null&&(i>s&&(i=s),o<s&&(o=s))}return[i,o]},p=Array.prototype,d=p.slice,v=p.map,m=function(e){return function(){return e}},g=function(e){return e},y=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);while(++r<i)s[r]=e+r*n;return s},b=Math.sqrt(50),w=Math.sqrt(10),E=Math.sqrt(2),S=function(e,t,n){var r=x(e,t,n);return y(Math.ceil(e/r)*r,Math.floor(t/r)*r+r/2,r)},T=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},N=function(){function r(r){var i,s=r.length,u,a=new Array(s);for(i=0;i<s;++i)a[i]=e(r[i],i,r);var f=t(a),l=f[0],c=f[1],h=n(a,l,c);Array.isArray(h)||(h=S(l,c,h));var p=h.length;while(h[0]<=l)h.shift(),--p;while(h[p-1]>=c)h.pop(),--p;var d=new Array(p+1),v;for(i=0;i<=p;++i)v=d[i]=[],v.x0=i>0?h[i-1]:l,v.x1=i<p?h[i]:c;for(i=0;i<s;++i)u=a[i],l<=u&&u<=c&&d[o(h,u,0,p)].push(r[i]);return d}var e=g,t=h,n=T;return r.value=function(t){return arguments.length?(e=typeof t=="function"?t:m(t),r):e},r.domain=function(e){return arguments.length?(t=typeof e=="function"?e:m([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n=typeof e=="function"?e:Array.isArray(e)?m(d.call(e)):m(e),r):n},r},C=function(e,t,n){n==null&&(n=f);if(!(r=e.length))return;if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return o+(u-o)*(i-s)},k=function(e,t,r){return e=v.call(e,f).sort(n),Math.ceil((r-t)/(2*(C(e,.75)-C(e,.25))*Math.pow(e.length,-1/3)))},L=function(e,t,n){return Math.ceil((n-t)/(3.5*c(e)*Math.pow(e.length,-1/3)))},A=function(e,t){var n=-1,r=e.length,i,s;if(t==null){while(++n<r)if((s=e[n])!=null&&s>=s){i=s;break}while(++n<r)(s=e[n])!=null&&s>i&&(i=s)}else{while(++n<r)if((s=t(e[n],n,e))!=null&&s>=s){i=s;break}while(++n<r)(s=t(e[n],n,e))!=null&&s>i&&(i=s)}return i},O=function(e,t){var n=0,r=e.length,i,s=-1,o=r;if(t==null)while(++s<r)isNaN(i=f(e[s]))?--o:n+=i;else while(++s<r)isNaN(i=f(t(e[s],s,e)))?--o:n+=i;if(o)return n/o},M=function(e,t){var r=[],i=e.length,s,o=-1;if(t==null)while(++o<i)isNaN(s=f(e[o]))||r.push(s);else while(++o<i)isNaN(s=f(t(e[o],o,e)))||r.push(s);return C(r.sort(n),.5)},_=function(e){var t=e.length,n,r=-1,i=0,s,o;while(++r<t)i+=e[r].length;s=new Array(i);while(--t>=0){o=e[t],n=o.length;while(--n>=0)s[--i]=o[n]}return s},D=function(e,t){var n=-1,r=e.length,i,s;if(t==null){while(++n<r)if((s=e[n])!=null&&s>=s){i=s;break}while(++n<r)(s=e[n])!=null&&i>s&&(i=s)}else{while(++n<r)if((s=t(e[n],n,e))!=null&&s>=s){i=s;break}while(++n<r)(s=t(e[n],n,e))!=null&&i>s&&(i=s)}return i},P=function(e){var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);while(t<n)i[t]=[r,r=e[++t]];return i},H=function(e,t){var n=t.length,r=new Array(n);while(n--)r[n]=e[t[n]];return r},B=function(e,t){if(!(i=e.length))return;var r=0,i,s=0,o,u=e[s];t||(t=n);while(++r<i)if(t(o=e[r],u)<0||t(u,u)!==0)u=o,s=r;if(t(u,u)===0)return s},j=function(e,t,n){var r=(n==null?e.length:n)-(t=t==null?0:+t),i,s;while(r)s=Math.random()*r--|0,i=e[r+t],e[r+t]=e[s+t],e[s+t]=i;return e},F=function(e,t){var n=0,r=e.length,i,s=-1;if(t==null){while(++s<r)if(i=+e[s])n+=i}else while(++s<r)if(i=+t(e[s],s,e))n+=i;return n},I=function(e){if(!(s=e.length))return[];for(var t=-1,n=D(e,q),r=new Array(n);++t<n;)for(var i=-1,s,o=r[t]=new Array(s);++i<s;)o[i]=e[i][t];return r},R=function(){return I(arguments)},U="$";z.prototype=W.prototype={constructor:z,has:function(e){return U+e in this},get:function(e){return this[U+e]},set:function(e,t){return this[U+e]=t,this},remove:function(e){var t=U+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===U&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===U&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===U&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===U&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===U&&++e;return e},empty:function(){for(var e in this)if(e[0]===U)return!1;return!0},each:function(e){for(var t in this)t[0]===U&&e(this[t],t.slice(1),this)}};var X=function(){function s(t,i,o,u){if(i>=e.length)return r!=null?r(t):n!=null?t.sort(n):t;var a=-1,f=t.length,l=e[i++],c,h,p=W(),d,v=o();while(++a<f)(d=p.get(c=l(h=t[a])+""))?d.push(h):p.set(c,[h]);return p.each(function(e,t){u(v,t,s(e,i,o,u))}),v}function o(n,i){if(++i>e.length)return n;var s,u=t[i-1];return r!=null&&i>=e.length?s=n.entries():(s=[],n.each(function(e,t){s.push({key:t,values:o(e,i)})})),u!=null?s.sort(function(e,t){return u(e.key,t.key)}):s}var e=[],t=[],n,r,i;return i={object:function(e){return s(e,0,V,$)},map:function(e){return s(e,0,J,K)},entries:function(e){return o(s(e,0,J,K),0)},key:function(t){return e.push(t),i},sortKeys:function(n){return t[e.length-1]=n,i},sortValues:function(e){return n=e,i},rollup:function(e){return r=e,i}}},G=W.prototype;Q.prototype=Y.prototype={constructor:Q,has:G.has,add:function(e){return e+="",this[U+e]=e,this},remove:G.remove,clear:G.clear,values:G.keys,size:G.size,empty:G.empty,each:G.each};var Z=function(e){var t=[];for(var n in e)t.push(n);return t},et=function(e){var t=[];for(var n in e)t.push(e[n]);return t},tt=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},nt=function(e,t){return e=e==null?0:+e,t=t==null?1:+t,arguments.length===1?(t=e,e=0):t-=e,function(){return Math.random()*t+e}},rt=function(e,t){var n,r;return e=e==null?0:+e,t=t==null?1:+t,function(){var i;if(n!=null)i=n,n=null;else do n=Math.random()*2-1,i=Math.random()*2-1,r=n*n+i*i;while(!r||r>1);return e+t*i*Math.sqrt(-2*Math.log(r)/r)}},it=function(){var e=rt.apply(this,arguments);return function(){return Math.exp(e())}},st=function(e){return function(){for(var t=0,n=0;n<e;++n)t+=Math.random();return t}},ot=function(e){var t=st(e);return function(){return t()/e}},ut=function(e){return function(){return-Math.log(1-Math.random())/e}},vt=3,mt=function xx(e){function t(t){return Math.pow(t,e)}return e=+e,t.exponent=xx,t}(vt),gt=function Tx(e){function t(t){return 1-Math.pow(1-t,e)}return e=+e,t.exponent=Tx,t}(vt),yt=function Nx(e){function t(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,t.exponent=Nx,t}(vt),bt=Math.PI,wt=bt/2,Ot=4/11,Mt=6/11,_t=8/11,Dt=.75,Pt=9/11,Ht=10/11,Bt=.9375,jt=21/22,Ft=63/64,It=1/Ot/Ot,zt=1.70158,Wt=function Cx(e){function t(t){return t*t*((e+1)*t-e)}return e=+e,t.overshoot=Cx,t}(zt),Xt=function kx(e){function t(t){return--t*t*((e+1)*t+e)+1}return e=+e,t.overshoot=kx,t}(zt),Vt=function Lx(e){function t(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,t.overshoot=Lx,t}(zt),$t=2*Math.PI,Jt=1,Kt=.3,Qt=function Ax(e,t){function r(r){return e*Math.pow(2,10*--r)*Math.sin((n-r)/t)}var n=Math.asin(1/(e=Math.max(1,e)))*(t/=$t);return r.amplitude=function(e){return Ax(e,t*$t)},r.period=function(t){return Ax(e,t)},r}(Jt,Kt),Gt=function Ox(e,t){function r(r){return 1-e*Math.pow(2,-10*(r=+r))*Math.sin((r+n)/t)}var n=Math.asin(1/(e=Math.max(1,e)))*(t/=$t);return r.amplitude=function(e){return Ox(e,t*$t)},r.period=function(t){return Ox(e,t)},r}(Jt,Kt),Yt=function Mx(e,t){function r(r){return((r=r*2-1)<0?e*Math.pow(2,10*r)*Math.sin((n-r)/t):2-e*Math.pow(2,-10*r)*Math.sin((n+r)/t))/2}var n=Math.asin(1/(e=Math.max(1,e)))*(t/=$t);return r.amplitude=function(e){return Mx(e,t*$t)},r.period=function(t){return Mx(e,t)},r}(Jt,Kt),Zt=function(e){var t=-1,n=e.length,r,i=e[n-1],s=0;while(++t<n)r=i,i=e[t],s+=r[1]*i[0]-r[0]*i[1];return s/2},en=function(e){var t=-1,n=e.length,r=0,i=0,s,o=e[n-1],u,a=0;while(++t<n)s=o,o=e[t],a+=u=s[0]*o[1]-o[0]*s[1],r+=(s[0]+o[0])*u,i+=(s[1]+o[1])*u;return a*=3,[r/a,i/a]},tn=function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])},sn=function(e){if((n=e.length)<3)return null;var t,n,r=new Array(n),i=new Array(n);for(t=0;t<n;++t)r[t]=[+e[t][0],+e[t][1],t];r.sort(nn);for(t=0;t<n;++t)i[t]=[r[t][0],-r[t][1]];var s=rn(r),o=rn(i),u=o[0]===s[0],a=o[o.length-1]===s[s.length-1],f=[];for(t=s.length-1;t>=0;--t)f.push(e[r[s[t]][2]]);for(t=+u;t<o.length-a;++t)f.push(e[r[o[t]][2]]);return f},on=function(e,t){var n=e.length,r=e[n-1],i=t[0],s=t[1],o=r[0],u=r[1],a,f,l=!1;for(var c=0;c<n;++c)r=e[c],a=r[0],f=r[1],f>s!=u>s&&i<(o-a)*(s-f)/(u-f)+a&&(l=!l),o=a,u=f;return l},un=function(e){var t=-1,n=e.length,r=e[n-1],i,s,o=r[0],u=r[1],a=0;while(++t<n)i=o,s=u,r=e[t],o=r[0],u=r[1],i-=o,s-=u,a+=Math.sqrt(i*i+s*s);return a},an=Math.PI,fn=2*an,ln=1e-6,cn=fn-ln;hn.prototype=pn.prototype={constructor:hn,moveTo:function(e,t){this._.push("M",this._x0=this._x1=+e,",",this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._.push("Z"))},lineTo:function(e,t){this._.push("L",this._x1=+e,",",this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._.push("Q",+e,",",+t,",",this._x1=+n,",",this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,s){this._.push("C",+e,",",+t,",",+n,",",+r,",",this._x1=+i,",",this._y1=+s)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var s=this._x1,o=this._y1,u=n-e,a=r-t,f=s-e,l=o-t,c=f*f+l*l;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._.push("M",this._x1=e,",",this._y1=t);else if(c>ln)if(Math.abs(l*u-a*f)>ln&&!!i){var h=n-s,p=r-o,d=u*u+a*a,v=h*h+p*p,m=Math.sqrt(d),g=Math.sqrt(c),y=i*Math.tan((an-Math.acos((d+c-v)/(2*m*g)))/2),b=y/g,w=y/m;Math.abs(b-1)>ln&&this._.push("L",e+b*f,",",t+b*l),this._.push("A",i,",",i,",0,0,",+(l*h>f*p),",",this._x1=e+w*u,",",this._y1=t+w*a)}else this._.push("L",this._x1=e,",",this._y1=t)},arc:function(e,t,n,r,i,s){e=+e,t=+t,n=+n;var o=n*Math.cos(r),u=n*Math.sin(r),a=e+o,f=t+u,l=1^s,c=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._.push("M",a,",",f):(Math.abs(this._x1-a)>ln||Math.abs(this._y1-f)>ln)&&this._.push("L",a,",",f);if(!n)return;c>cn?this._.push("A",n,",",n,",0,1,",l,",",e-o,",",t-u,"A",n,",",n,",0,1,",l,",",this._x1=a,",",this._y1=f):(c<0&&(c=c%fn+fn),this._.push("A",n,",",n,",0,",+(c>=an),",",l,",",this._x1=e+n*Math.cos(i),",",this._y1=t+n*Math.sin(i)))},rect:function(e,t,n,r){this._.push("M",this._x0=this._x1=+e,",",this._y0=this._y1=+t,"h",+n,"v",+r,"h",-n,"Z")},toString:function(){return this._.join("")}};var dn=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return vn(this.cover(t,n),t,n,e)},gn=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{if(!(n>e||e>i||r>t||t>s))return this;var o=i-n,u=this._root,a,f;switch(f=(t<(r+s)/2)<<1|e<(n+i)/2){case 0:do a=new Array(4),a[f]=u,u=a;while(o*=2,i=n+o,s=r+o,e>i||t>s);break;case 1:do a=new Array(4),a[f]=u,u=a;while(o*=2,n=i-o,s=r+o,n>e||t>s);break;case 2:do a=new Array(4),a[f]=u,u=a;while(o*=2,i=n+o,r=s-o,e>i||r>t);break;case 3:do a=new Array(4),a[f]=u,u=a;while(o*=2,n=i-o,r=s-o,n>e||r>t)}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this},yn=function(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e},bn=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?undefined:[[this._x0,this._y0],[this._x1,this._y1]]},wn=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i},En=function(e,t,n){var r,i=this._x0,s=this._y0,o,u,a,f,l=this._x1,c=this._y1,h=[],p=this._root,d,v;p&&h.push(new wn(p,i,s,l,c)),n==null?n=Infinity:(i=e-n,s=t-n,l=e+n,c=t+n,n*=n);while(d=h.pop()){if(!(p=d.node)||(o=d.x0)>l||(u=d.y0)>c||(a=d.x1)<i||(f=d.y1)<s)continue;if(p.length){var m=(o+a)/2,g=(u+f)/2;h.push(new wn(p[3],m,g,a,f),new wn(p[2],o,g,m,f),new wn(p[1],m,u,a,g),new wn(p[0],o,u,m,g));if(v=(t>=g)<<1|e>=m)d=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=d}else{var y=e- +this._x.call(null,p.data),b=t- +this._y.call(null,p.data),w=y*y+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,l=e+E,c=t+E,r=p.data}}}return r},Sn=function(e){if(isNaN(l=+this._x.call(null,e))||isNaN(c=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,u=this._y0,a=this._x1,f=this._y1,l,c,h,p,d,v,m,g;if(!n)return this;if(n.length)for(;;){(d=l>=(h=(o+a)/2))?o=h:a=h,(v=c>=(p=(u+f)/2))?u=p:f=p;if(!(t=n,n=n[m=v<<1|d]))return this;if(!n.length)break;if(t[m+1&3]||t[m+2&3]||t[m+3&3])r=t,g=m}while(n.data!==e)if(!(i=n,n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[m]=s:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[g]=n:this._root=n),this):(this._root=s,this)},Tn=function(){return this._root},Nn=function(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e},Cn=function(e){var t=[],n,r=this._root,i,s,o,u,a;r&&t.push(new wn(r,this._x0,this._y0,this._x1,this._y1));while(n=t.pop())if(!e(r=n.node,s=n.x0,o=n.y0,u=n.x1,a=n.y1)&&r.length){var f=(s+u)/2,l=(o+a)/2;(i=r[3])&&t.push(new wn(i,f,l,u,a)),(i=r[2])&&t.push(new wn(i,s,l,f,a)),(i=r[1])&&t.push(new wn(i,f,o,u,l)),(i=r[0])&&t.push(new wn(i,s,o,f,l))}return this},kn=function(e){var t=[],n=[],r;this._root&&t.push(new wn(this._root,this._x0,this._y0,this._x1,this._y1));while(r=t.pop()){var i=r.node;if(i.length){var s,o=r.x0,u=r.y0,a=r.x1,f=r.y1,l=(o+a)/2,c=(u+f)/2;(s=i[0])&&t.push(new wn(s,o,u,l,c)),(s=i[1])&&t.push(new wn(s,l,u,a,c)),(s=i[2])&&t.push(new wn(s,o,c,l,f)),(s=i[3])&&t.push(new wn(s,l,c,a,f))}n.push(r)}while(r=n.pop())e(r.node,r.x0,r.y0,r.x1,r.y1);return this},An=function(e){return arguments.length?(this._x=e,this):this._x},Mn=function(e){return arguments.length?(this._y=e,this):this._y},Hn=_n.prototype=Dn.prototype;Hn.copy=function(){var e=new Dn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Pn(t),e;n=[{source:t,target:e._root=new Array(4)}];while(t=n.pop())for(var i=0;i<4;++i)if(r=t.source[i])r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Pn(r);return e},Hn.add=dn,Hn.addAll=mn,Hn.cover=gn,Hn.data=yn,Hn.extent=bn,Hn.find=En,Hn.remove=Sn,Hn.removeAll=xn,Hn.root=Tn,Hn.size=Nn,Hn.visit=Cn,Hn.visitAfter=kn,Hn.x=An,Hn.y=Mn;var Bn=[].slice,jn={};Fn.prototype=Wn.prototype={constructor:Fn,defer:function(e){if(typeof e!="function"||this._call)throw new Error;if(this._error!=null)return this;var t=Bn.call(arguments,1);return t.push(e),++this._waiting,this._tasks.push(t),In(this),this},abort:function(){return this._error==null&&Un(this,new Error("abort")),this},await:function(e){if(typeof e!="function"||this._call)throw new Error;return this._call=function(t,n){e.apply(null,[t].concat(n))},zn(this),this},awaitAll:function(e){if(typeof e!="function"||this._call)throw new Error;return this._call=e,zn(this),this}};var Xn=function(e){return function(){return e}},Vn=1e-12,$n=Math.PI,Jn=$n/2,Kn=2*$n,ir=function(){function a(){var a,f,l=+e.apply(this,arguments),c=+t.apply(this,arguments),h=i.apply(this,arguments)-Jn,p=s.apply(this,arguments)-Jn,d=Math.abs(p-h),v=p>h;u||(u=a=pn()),c<l&&(f=c,c=l,l=f);if(c>Vn)if(d>Kn-Vn)u.moveTo(c*Math.cos(h),c*Math.sin(h)),u.arc(0,0,c,h,p,!v),l>Vn&&(u.moveTo(l*Math.cos(p),l*Math.sin(p)),u.arc(0,0,l,p,h,v));else{var m=h,g=p,y=h,b=p,w=d,E=d,S=o.apply(this,arguments)/2,x=S>Vn&&(r?+r.apply(this,arguments):Math.sqrt(l*l+c*c)),T=Math.min(Math.abs(c-l)/2,+n.apply(this,arguments)),N=T,C=T,k,L;if(x>Vn){var A=tr(x/l*Math.sin(S)),O=tr(x/c*Math.sin(S));(w-=A*2)>Vn?(A*=v?1:-1,y+=A,b-=A):(w=0,y=b=(h+p)/2),(E-=O*2)>Vn?(O*=v?1:-1,m+=O,g-=O):(E=0,m=g=(h+p)/2)}var M=c*Math.cos(m),_=c*Math.sin(m),D=l*Math.cos(b),P=l*Math.sin(b);if(T>Vn){var H=c*Math.cos(g),B=c*Math.sin(g),j=l*Math.cos(y),F=l*Math.sin(y);if(d<$n){var I=w>Vn?nr(M,_,j,F,H,B,D,P):[D,P],q=M-I[0],R=_-I[1],U=H-I[0],z=B-I[1],W=1/Math.sin(Math.acos((q*U+R*z)/(Math.sqrt(q*q+R*R)*Math.sqrt(U*U+z*z)))/2),X=Math.sqrt(I[0]*I[0]+I[1]*I[1]);N=Math.min(T,(l-X)/(W-1)),C=Math.min(T,(c-X)/(W+1))}}E>Vn?C>Vn?(k=rr(j,F,M,_,c,C,v),L=rr(H,B,D,P,c,C,v),u.moveTo(k.cx+k.x01,k.cy+k.y01),C<T?u.arc(k.cx,k.cy,C,Math.atan2(k.y01,k.x01),Math.atan2(L.y01,L.x01),!v):(u.arc(k.cx,k.cy,C,Math.atan2(k.y01,k.x01),Math.atan2(k.y11,k.x11),!v),u.arc(0,0,c,Math.atan2(k.cy+k.y11,k.cx+k.x11),Math.atan2(L.cy+L.y11,L.cx+L.x11),!v),u.arc(L.cx,L.cy,C,Math.atan2(L.y11,L.x11),Math.atan2(L.y01,L.x01),!v))):(u.moveTo(M,_),u.arc(0,0,c,m,g,!v)):u.moveTo(M,_),l>Vn&&w>Vn?N>Vn?(k=rr(D,P,H,B,l,-N,v),L=rr(M,_,j,F,l,-N,v),u.lineTo(k.cx+k.x01,k.cy+k.y01),N<T?u.arc(k.cx,k.cy,N,Math.atan2(k.y01,k.x01),Math.atan2(L.y01,L.x01),!v):(u.arc(k.cx,k.cy,N,Math.atan2(k.y01,k.x01),Math.atan2(k.y11,k.x11),!v),u.arc(0,0,l,Math.atan2(k.cy+k.y11,k.cx+k.x11),Math.atan2(L.cy+L.y11,L.cx+L.x11),v),u.arc(L.cx,L.cy,N,Math.atan2(L.y11,L.x11),Math.atan2(L.y01,L.x01),!v))):u.arc(0,0,l,b,y,v):u.lineTo(D,P)}else u.moveTo(0,0);u.closePath();if(a)return u=null,a+""||null}var e=Qn,t=Gn,n=Xn(0),r=null,i=Yn,s=Zn,o=er,u=null;return a.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-$n/2;return[Math.cos(r)*n,Math.sin(r)*n]},a.innerRadius=function(t){return arguments.length?(e=typeof t=="function"?t:Xn(+t),a):e},a.outerRadius=function(e){return arguments.length?(t=typeof e=="function"?e:Xn(+e),a):t},a.cornerRadius=function(e){return arguments.length?(n=typeof e=="function"?e:Xn(+e),a):n},a.padRadius=function(e){return arguments.length?(r=e==null?null:typeof e=="function"?e:Xn(+e),a):r},a.startAngle=function(e){return arguments.length?(i=typeof e=="function"?e:Xn(+e),a):i},a.endAngle=function(e){return arguments.length?(s=typeof e=="function"?e:Xn(+e),a):s},a.padAngle=function(e){return arguments.length?(o=typeof e=="function"?e:Xn(+e),a):o},a.context=function(e){return arguments.length?(u=e==null?null:e,a):u},a};sr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var or=function(e){return new sr(e)},fr=function(){function o(o){var u,a=o.length,f,l=!1,c;r==null&&(s=i(c=pn()));for(u=0;u<=a;++u)!(u<a&&n(f=o[u],u,o))===l&&((l=!l)?s.lineStart():s.lineEnd()),l&&s.point(+e(f,u,o),+t(f,u,o));if(c)return s=null,c+""||null}var e=ur,t=ar,n=Xn(!0),r=null,i=or,s=null;return o.x=function(t){return arguments.length?(e=typeof t=="function"?t:Xn(+t),o):e},o.y=function(e){return arguments.length?(t=typeof e=="function"?e:Xn(+e),o):t},o.defined=function(e){return arguments.length?(n=typeof e=="function"?e:Xn(!!e),o):n},o.curve=function(e){return arguments.length?(i=e,r!=null&&(s=i(r)),o):i},o.context=function(e){return arguments.length?(e==null?r=s=null:s=i(r=e),o):r},o},lr=function(){function a(a){var f,l,c,h=a.length,p,d=!1,v,m=new Array(h),g=new Array(h);s==null&&(u=o(v=pn()));for(f=0;f<=h;++f){if(!(f<h&&i(p=a[f],f,a))===d)if(d=!d)l=f,u.areaStart(),u.lineStart();else{u.lineEnd(),u.lineStart();for(c=f-1;c>=l;--c)u.point(m[c],g[c]);u.lineEnd(),u.areaEnd()}d&&(m[f]=+e(p,f,a),g[f]=+n(p,f,a),u.point(t?+t(p,f,a):m[f],r?+r(p,f,a):g[f]))}if(v)return u=null,v+""||null}function f(){return fr().defined(i).curve(o).context(s)}var e=ur,t=null,n=Xn(0),r=ar,i=Xn(!0),s=null,o=or,u=null;return a.x=function(n){return arguments.length?(e=typeof n=="function"?n:Xn(+n),t=null,a):e},a.x0=function(t){return arguments.length?(e=typeof t=="function"?t:Xn(+t),a):e},a.x1=function(e){return arguments.length?(t=e==null?null:typeof e=="function"?e:Xn(+e),a):t},a.y=function(e){return arguments.length?(n=typeof e=="function"?e:Xn(+e),r=null,a):n},a.y0=function(e){return arguments.length?(n=typeof e=="function"?e:Xn(+e),a):n},a.y1=function(e){return arguments.length?(r=e==null?null:typeof e=="function"?e:Xn(+e),a):r},a.lineX0=a.lineY0=function(){return f().x(e).y(n)},a.lineY1=function(){return f().x(e).y(r)},a.lineX1=function(){return f().x(t).y(n)},a.defined=function(e){return arguments.length?(i=typeof e=="function"?e:Xn(!!e),a):i},a.curve=function(e){return arguments.length?(o=e,s!=null&&(u=o(s)),a):o},a.context=function(e){return arguments.length?(e==null?s=u=null:u=o(s=e),a):s},a},cr=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},hr=function(e){return e},pr=function(){function o(o){var u,a=o.length,f,l,c=0,h=new Array(a),p=new Array(a),d=+r.apply(this,arguments),v=Math.min(Kn,Math.max(-Kn,i.apply(this,arguments)-d)),m,g=Math.min(Math.abs(v)/a,s.apply(this,arguments)),y=g*(v<0?-1:1),b;for(u=0;u<a;++u)(b=p[h[u]=u]=+e(o[u],u,o))>0&&(c+=b);t!=null?h.sort(function(e,n){return t(p[e],p[n])}):n!=null&&h.sort(function(e,t){return n(o[e],o[t])});for(u=0,l=c?(v-a*y)/c:0;u<a;++u,d=m)f=h[u],b=p[f],m=d+(b>0?b*l:0)+y,p[f]={data:o[f],index:u,value:b,startAngle:d,endAngle:m,padAngle:g};return p}var e=hr,t=cr,n=null,r=Xn(0),i=Xn(Kn),s=Xn(0);return o.value=function(t){return arguments.length?(e=typeof t=="function"?t:Xn(+t),o):e},o.sortValues=function(e){return arguments.length?(t=e,n=null,o):t},o.sort=function(e){return arguments.length?(n=e,t=null,o):n},o.startAngle=function(e){return arguments.length?(r=typeof e=="function"?e:Xn(+e),o):r},o.endAngle=function(e){return arguments.length?(i=typeof e=="function"?e:Xn(+e),o):i},o.padAngle=function(e){return arguments.length?(s=typeof e=="function"?e:Xn(+e),o):s},o},dr=mr(or);vr.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var yr=function(){return gr(fr().curve(dr))},br=function(){var e=lr().curve(dr),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,s=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return gr(n())},delete e.lineX0,e.lineEndAngle=function(){return gr(r())},delete e.lineX1,e.lineInnerRadius=function(){return gr(i())},delete e.lineY0,e.lineOuterRadius=function(){return gr(s())},delete e.lineY1,e.curve=function(e){return arguments.length?t(mr(e)):t()._curve},e},wr={draw:function(e,t){var n=Math.sqrt(t/$n);e.moveTo(n,0),e.arc(0,0,n,0,Kn)}},Er={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Sr=Math.sqrt(1/3),xr=Sr*2,Tr={draw:function(e,t){var n=Math.sqrt(t/xr),r=n*Sr;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Nr=.8908130915292852,Cr=Math.sin($n/10)/Math.sin(7*$n/10),kr=Math.sin(Kn/10)*Cr,Lr=-Math.cos(Kn/10)*Cr,Ar={draw:function(e,t){var n=Math.sqrt(t*Nr),r=kr*n,i=Lr*n;e.moveTo(0,-n),e.lineTo(r,i);for(var s=1;s<5;++s){var o=Kn*s/5,u=Math.cos(o),a=Math.sin(o);e.lineTo(a*n,-u*n),e.lineTo(u*r-a*i,a*r+u*i)}e.closePath()}},Or={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},Mr=Math.sqrt(3),_r={draw:function(e,t){var n=-Math.sqrt(t/(Mr*3));e.moveTo(0,n*2),e.lineTo(-Mr*n,-n),e.lineTo(Mr*n,-n),e.closePath()}},Dr=-0.5,Pr=Math.sqrt(3)/2,Hr=1/Math.sqrt(12),Br=(Hr/2+1)*3,jr={draw:function(e,t){var n=Math.sqrt(t/Br),r=n/2,i=n*Hr,s=r,o=n*Hr+n,u=-s,a=o;e.moveTo(r,i),e.lineTo(s,o),e.lineTo(u,a),e.lineTo(Dr*r-Pr*i,Pr*r+Dr*i),e.lineTo(Dr*s-Pr*o,Pr*s+Dr*o),e.lineTo(Dr*u-Pr*a,Pr*u+Dr*a),e.lineTo(Dr*r+Pr*i,Dr*i-Pr*r),e.lineTo(Dr*s+Pr*o,Dr*o-Pr*s),e.lineTo(Dr*u+Pr*a,Dr*a-Pr*u),e.closePath()}},Fr=[wr,Er,Tr,Or,Ar,_r,jr],Ir=function(){function r(){var r;n||(n=r=pn()),e.apply(this,arguments).draw(n,+t.apply(this,arguments));if(r)return n=null,r+""||null}var e=Xn(wr),t=Xn(64),n=null;return r.type=function(t){return arguments.length?(e=typeof t=="function"?t:Xn(t),r):e},r.size=function(e){return arguments.length?(t=typeof e=="function"?e:Xn(+e),r):t},r.context=function(e){return arguments.length?(n=e==null?null:e,r):n},r},qr=function(){};Ur.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Rr(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Rr(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var zr=function(e){return new Ur(e)};Wr.prototype={areaStart:qr,areaEnd:qr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Rr(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var Xr=function(e){return new Wr(e)};Vr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Rr(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var $r=function(e){return new Vr(e)};Jr.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0){var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,u=-1,a;while(++u<=n)a=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(r+a*s),this._beta*t[u]+(1-this._beta)*(i+a*o))}this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var Kr=function _x(e){function t(t){return e===1?new Ur(t):new Jr(t,e)}return t.beta=function(e){return _x(+e)},t}(.85);Gr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Qr(this,this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Qr(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Yr=function Dx(e){function t(t){return new Gr(t,e)}return t.tension=function(e){return Dx(+e)},t}(0);Zr.prototype={areaStart:qr,areaEnd:qr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Qr(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ei=function Px(e){function t(t){return new Zr(t,e)}return t.tension=function(e){return Px(+e)},t}(0);ti.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qr(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ni=function Hx(e){function t(t){return new ti(t,e)}return t.tension=function(e){return Hx(+e)},t}(0);ii.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;if(this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:ri(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var si=function Bx(e){function t(t){return e?new ii(t,e):new Gr(t,0)}return t.alpha=function(e){return Bx(+e)},t}(.5);oi.prototype={areaStart:qr,areaEnd:qr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){e=+e,t=+t;if(this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ri(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ui=function jx(e){function t(t){return e?new oi(t,e):new Zr(t,0)}return t.alpha=function(e){return jx(+e)},t}(.5);ai.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;if(this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ri(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var fi=function Fx(e){function t(t){return e?new ai(t,e):new ti(t,0)}return t.alpha=function(e){return Fx(+e)},t}(.5);li.prototype={areaStart:qr,areaEnd:qr,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};var ci=function(e){return new li(e)};mi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vi(this,this._t0,di(this,this._t0))}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;e=+e,t=+t;if(e===this._x1&&t===this._y1)return;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,vi(this,di(this,n=pi(this,e,t)),n);break;default:vi(this,this._t0,n=pi(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}},(gi.prototype=Object.create(mi.prototype)).point=function(e,t){mi.prototype.point.call(this,t,e)},yi.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}},Ei.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n){this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]);if(n===2)this._context.lineTo(e[1],t[1]);else{var r=Si(e),i=Si(t);for(var s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o])}}(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var xi=function(e){return new Ei(e)};Ti.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Ni=function(e){return new Ti(e,.5)},Li=Array.prototype.slice,Ai=function(e,t){if(!((s=e.length)>1))return;for(var n=1,r,i=e[t[0]],s,o=i.length;n<s;++n){r=i,i=e[t[n]];for(var u=0;u<o;++u)i[u][1]+=i[u][0]=isNaN(r[u][1])?r[u][0]:r[u][1]}},Oi=function(e){var t=e.length,n=new Array(t);while(--t>=0)n[t]=t;return n},_i=function(){function i(i){var s=e.apply(this,arguments),o,u=i.length,a=s.length,f=new Array(a),l;for(o=0;o<a;++o){for(var c=s[o],h=f[o]=new Array(u),p=0,d;p<u;++p)h[p]=d=[0,+r(i[p],c,p,i)],d.data=i[p];h.key=c}for(o=0,l=t(f);o<a;++o)f[l[o]].index=o;return n(f,l),f}var e=Xn([]),t=Oi,n=Ai,r=Mi;return i.keys=function(t){return arguments.length?(e=typeof t=="function"?t:Xn(Li.call(t)),i):e},i.value=function(e){return arguments.length?(r=typeof e=="function"?e:Xn(+e),i):r},i.order=function(e){return arguments.length?(t=e==null?Oi:typeof e=="function"?e:Xn(Li.call(e)),i):t},i.offset=function(e){return arguments.length?(n=e==null?Ai:e,i):n},i},Di=function(e,t){if(!((r=e.length)>0))return;for(var n,r,i=0,s=e[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<r;++n)e[n][i][1]/=o}Ai(e,t)},Pi=function(e,t){if(!((i=e.length)>0))return;for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var o=0,u=0;o<i;++o)u+=e[o][n][1]||0;r[n][1]+=r[n][0]=-u/2}Ai(e,t)},Hi=function(e,t){if(!((o=e.length)>0&&(s=(i=e[t[0]]).length)>0))return;for(var n=0,r=1,i,s,o;r<s;++r){for(var u=0,a=0,f=0;u<o;++u){var l=e[t[u]],c=l[r][1]||0,h=l[r-1][1]||0,p=(c-h)/2;for(var d=0;d<u;++d){var v=e[t[d]],m=v[r][1]||0,g=v[r-1][1]||0;p+=m-g}a+=c,f+=p*c}i[r-1][1]+=i[r-1][0]=n,a&&(n-=f/a)}i[r-1][1]+=i[r-1][0]=n,Ai(e,t)},Bi=function(e){var t=e.map(ji);return Oi(e).sort(function(e,n){return t[e]-t[n]})},Fi=function(e){return Bi(e).reverse()},Ii=function(e){var t=e.length,n,r,i=e.map(ji),s=Oi(e).sort(function(e,t){return i[t]-i[e]}),o=0,u=0,a=[],f=[];for(n=0;n<t;++n)r=s[n],o<u?(o+=i[r],a.push(r)):(u+=i[r],f.push(r));return f.reverse().concat(a)},qi=function(e){return Oi(e).reverse()},Ri=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e},Wi=.7,Xi=1/Wi,Vi=/^#([0-9a-f]{3})$/,$i=/^#([0-9a-f]{6})$/,Ji=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,Ki=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,Qi=/^rgba\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Gi=/^rgba\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Yi=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,Zi=/^hsla\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,es={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ri(zi,ts,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Ri(os,ss,Ui(zi,{brighter:function(e){return e=e==null?Xi:Math.pow(Xi,e),new os(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Wi:Math.pow(Wi,e),new os(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}})),Ri(ls,fs,Ui(zi,{brighter:function(e){return e=e==null?Xi:Math.pow(Xi,e),new ls(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Wi:Math.pow(Wi,e),new ls(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new os(cs(e>=240?e-240:e+120,i,r),cs(e,i,r),cs(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var hs=Math.PI/180,ps=180/Math.PI,ds=18,vs=.95047,ms=1,gs=1.08883,ys=4/29,bs=6/29,ws=3*bs*bs,Es=bs*bs*bs;Ri(Ts,xs,Ui(zi,{brighter:function(e){return new Ts(this.l+ds*(e==null?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Ts(this.l-ds*(e==null?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=ms*Cs(e),t=vs*Cs(t),n=gs*Cs(n),new os(ks(3.2404542*t-1.5371385*e-.4985314*n),ks(-0.969266*t+1.8760108*e+.041556*n),ks(.0556434*t-.2040259*e+1.0572252*n),this.opacity)}})),Ri(Ms,Os,Ui(zi,{brighter:function(e){return new Ms(this.h,this.c,this.l+ds*(e==null?1:e),this.opacity)},darker:function(e){return new Ms(this.h,this.c,this.l-ds*(e==null?1:e),this.opacity)},rgb:function(){return Ss(this).rgb()}}));var _s=-0.14861,Ds=1.78277,Ps=-0.29227,Hs=-0.90649,Bs=1.97294,js=Bs*Hs,Fs=Bs*Ds,Is=Ds*Ps-Hs*_s;Ri(Us,Rs,Ui(zi,{brighter:function(e){return e=e==null?Xi:Math.pow(Xi,e),new Us(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Wi:Math.pow(Wi,e),new Us(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*hs,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new os(255*(t+n*(_s*r+Ds*i)),255*(t+n*(Ps*r+Hs*i)),255*(t+n*Bs*r),this.opacity)}}));var Ws=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,u=r<t-1?e[r+2]:2*s-i;return zs((n-r/t)*t,o,i,s,u)}},Xs=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return zs((n-r/t)*t,i,s,o,u)}},Vs=function(e){return function(){return e}},Ys=function Ix(e){function n(e,n){var r=t((e=ss(e)).r,(n=ss(n)).r),i=t(e.g,n.g),s=t(e.b,n.b),o=t(e.opacity,n.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=s(t),e.opacity=o(t),e+""}}var t=Qs(e);return n.gamma=Ix,n}(1),eo=Zs(Ws),to=Zs(Xs),no=function(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(n),s=new Array(n),o;for(o=0;o<r;++o)i[o]=co(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(e){for(o=0;o<r;++o)s[o]=i[o](e);return s}},ro=function(e,t){var n=new Date;return e=+e,t-=e,function(r){return n.setTime(e+t*r),n}},io=function(e,t){return e=+e,t-=e,function(n){return e+t*n}},so=function(e,t){var n={},r={},i;if(e===null||typeof e!="object")e={};if(t===null||typeof t!="object")t={};for(i in t)i in e?n[i]=co(e[i],t[i]):r[i]=t[i];return function(e){for(i in n)r[i]=n[i](e);return r}},oo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uo=new RegExp(oo.source,"g"),lo=function(e,t){var n=oo.lastIndex=uo.lastIndex=0,r,i,s,o=-1,u=[],a=[];e+="",t+="";while((r=oo.exec(e))&&(i=uo.exec(t)))(s=i.index)>n&&(s=t.slice(n,s),u[o]?u[o]+=s:u[++o]=s),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,a.push({i:o,x:io(r,i)})),n=uo.lastIndex;return n<t.length&&(s=t.slice(n),u[o]?u[o]+=s:u[++o]=s),u.length<2?a[0]?fo(a[0].x):ao(t):(t=a.length,function(e){for(var n=0,r;n<t;++n)u[(r=a[n]).i]=r.x(e);return u.join("")})},co=function(e,t){var n=typeof t,r;return t==null||n==="boolean"?Vs(t):(n==="number"?io:n==="string"?(r=ts(t))?(t=r,Ys):lo:t instanceof ts?Ys:t instanceof Date?ro:Array.isArray(t)?no:isNaN(t)?so:io)(e,t)},ho=function(e,t){return e=+e,t-=e,function(n){return Math.round(e+t*n)}},po=180/Math.PI,vo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},mo=function(e,t,n,r,i,s){var o,u,a;if(o=Math.sqrt(e*e+t*t))e/=o,t/=o;if(a=e*n+t*r)n-=e*a,r-=t*a;if(u=Math.sqrt(n*n+r*r))n/=u,r/=u,a/=u;return e*r<t*n&&(e=-e,t=-t,a=-a,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*po,skewX:Math.atan(a)*po,scaleX:o,scaleY:u}},go,yo,bo,wo,To=xo(Eo,"px, ","px)","deg)"),No=xo(So,", ",")",")"),Co=Math.SQRT2,ko=2,Lo=4,Ao=1e-12,Do=function(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],o=t[1],u=t[2],a=s-n,f=o-r,l=a*a+f*f,c,h;if(l<Ao)h=Math.log(u/i)/Co,c=function(e){return[n+e*a,r+e*f,i*Math.exp(Co*e*h)]};else{var p=Math.sqrt(l),d=(u*u-i*i+Lo*l)/(2*i*ko*p),v=(u*u-i*i-Lo*l)/(2*u*ko*p),m=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(v*v+1)-v);h=(g-m)/Co,c=function(e){var t=e*h,s=Oo(m),o=i/(ko*p)*(s*_o(Co*t+m)-Mo(m));return[n+o*a,r+o*f,i*s/Oo(Co*t+m)]}}return c.duration=h*1e3,c},Ho=Po(Ks),Bo=Po(Gs),Io=Fo(Ks),qo=Fo(Gs),Uo=Ro(Ks),zo=Ro(Gs),Wo=function(e,t){var n=new Array(t);for(var r=0;r<t;++r)n[r]=e(r/(t-1));return n},Xo={value:function(){}};$o.prototype=Vo.prototype={constructor:$o,on:function(e,t){var n=this._,r=Jo(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){while(++s<o)if((i=(e=r[s]).type)&&(i=Ko(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);while(++s<o)if(i=(e=r[s]).type)n[i]=Qo(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Qo(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new $o(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};var eu=function(e){function r(e,t){var n,r,s=i(e,function(e,i){if(n)return n(e,i-1);r=e,n=t?Yo(e,t):Go(e)});return s.columns=r,s}function i(e,t){function c(){if(u>=o)return i;if(l)return l=!1,r;var t=u,s;if(e.charCodeAt(t)===34){var a=t;while(a++<o)if(e.charCodeAt(a)===34){if(e.charCodeAt(a+1)!==34)break;++a}return u=a+2,s=e.charCodeAt(a+1),s===13?(l=!0,e.charCodeAt(a+2)===10&&++u):s===10&&(l=!0),e.slice(t+1,a).replace(/""/g,'"')}while(u<o){var f=1;s=e.charCodeAt(u++);if(s===10)l=!0;else if(s===13)l=!0,e.charCodeAt(u)===10&&(++u,++f);else if(s!==n)continue;return e.slice(t,u-f)}return e.slice(t)}var r={},i={},s=[],o=e.length,u=0,a=0,f,l;while((f=c())!==i){var h=[];while(f!==r&&f!==i)h.push(f),f=c();if(t&&(h=t(h,a++))==null)continue;s.push(h)}return s}function s(t,n){return n==null&&(n=Zo(t)),[n.map(a).join(e)].concat(t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})).join("\n")}function o(e){return e.map(u).join("\n")}function u(t){return t.map(a).join(e)}function a(e){return e==null?"":t.test(e+="")?'"'+e.replace(/\"/g,'""')+'"':e}var t=new RegExp('["'+e+"\n]"),n=e.charCodeAt(0);return{parse:r,parseRows:i,format:s,formatRows:o}},tu=eu(","),nu=tu.parse,ru=tu.parseRows,iu=tu.format,su=tu.formatRows,ou=eu("	"),uu=ou.parse,au=ou.parseRows,fu=ou.format,lu=ou.formatRows,cu=function(e,t){function h(e){var t=o.status,i;if(!t&&pu(o)||t>=200&&t<300||t===304){if(f)try{i=f.call(n,o)}catch(s){r.call("error",n,s);return}else i=o;r.call("load",n,i)}else r.call("error",n,e)}var n,r=Vo("beforesend","progress","load","error"),i,s=W(),o=new XMLHttpRequest,u=null,a=null,f,l,c=0;typeof XDomainRequest!="undefined"&&!("withCredentials"in o)&&/^(http(s)?:)?\/\//.test(e)&&(o=new XDomainRequest),"onload"in o?o.onload=o.onerror=o.ontimeout=h:o.onreadystatechange=function(e){o.readyState>3&&h(e)},o.onprogress=function(e){r.call("progress",n,e)},n={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s.get(e):(t==null?s.remove(e):s.set(e,t+""),n)},mimeType:function(e){return arguments.length?(i=e==null?null:e+"",n):i},responseType:function(e){return arguments.length?(l=e,n):l},timeout:function(e){return arguments.length?(c=+e,n):c},user:function(e){return arguments.length<1?u:(u=e==null?null:e+"",n)},password:function(e){return arguments.length<1?a:(a=e==null?null:e+"",n)},response:function(e){return f=e,n},get:function(e,t){return n.send("GET",e,t)},post:function(e,t){return n.send("POST",e,t)},send:function(t,f,h){return o.open(t,e,!0,u,a),i!=null&&!s.has("accept")&&s.set("accept",i+",*/*"),o.setRequestHeader&&s.each(function(e,t){o.setRequestHeader(t,e)}),i!=null&&o.overrideMimeType&&o.overrideMimeType(i),l!=null&&(o.responseType=l),c>0&&(o.timeout=c),h==null&&typeof f=="function"&&(h=f,f=null),h!=null&&h.length===1&&(h=hu(h)),h!=null&&n.on("error",h).on("load",function(e){h(null,e)}),r.call("beforesend",n,o),o.send(f==null?null:f),n},abort:function(){return o.abort(),n},on:function(){var e=r.on.apply(r,arguments);return e===r?n:e}};if(t!=null){if(typeof t!="function")throw new Error("invalid callback: "+t);return n.get(t)}return n},du=function(e,t){return function(n,r){var i=cu(n).mimeType(e).response(t);if(r!=null){if(typeof r!="function")throw new Error("invalid callback: "+r);return i.get(r)}return i}},vu=du("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),mu=du("application/json",function(e){return JSON.parse(e.responseText)}),gu=du("text/plain",function(e){return e.responseText}),yu=du("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t}),bu=function(e,t){return function(n,r,i){arguments.length<3&&(i=r,r=null);var s=cu(n).mimeType(e);return s.row=function(e){return arguments.length?s.response(wu(t,r=e)):r},s.row(r),i?s.get(i):s}},Eu=bu("text/csv",nu),Su=bu("text/tab-separated-values",uu),xu=0,Tu=0,Nu=0,Cu=1e3,ku,Lu,Au=0,Ou=0,Mu=0,_u=typeof performance=="object"&&performance.now?performance:Date,Du=typeof requestAnimationFrame=="function"?requestAnimationFrame:function(e){setTimeout(e,17)};Bu.prototype=ju.prototype={constructor:Bu,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Pu():+n)+(t==null?0:+t),!this._next&&Lu!==this&&(Lu?Lu._next=this:ku=this,Lu=this),this._call=e,this._time=n,Uu()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Uu())}};var zu=function(e,t,n){var r=new Bu;return t=t==null?0:+t,r.restart(function(n){r.stop(),e(n+t)},t,n),r},Wu=function(e,t,n){var r=new Bu,i=t;return t==null?(r.restart(e,t,n),r):(t=+t,n=n==null?Pu():+n,r.restart(function s(o){o+=i,r.restart(s,i+=t,n),e(o)},t,n),r)},Xu=new Date,Vu=new Date,Ju=$u(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Ju.every=function(e){return e=Math.floor(e),!!isFinite(e)&&e>0?e>1?$u(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):Ju:null};var Ku=Ju.range,Qu=1e3,Gu=6e4,Yu=36e5,Zu=864e5,ea=6048e5,ta=$u(function(e){e.setTime(Math.floor(e/Qu)*Qu)},function(e,t){e.setTime(+e+t*Qu)},function(e,t){return(t-e)/Qu},function(e){return e.getUTCSeconds()}),na=ta.range,ra=$u(function(e){e.setTime(Math.floor(e/Gu)*Gu)},function(e,t){e.setTime(+e+t*Gu)},function(e,t){return(t-e)/Gu},function(e){return e.getMinutes()}),ia=ra.range,sa=$u(function(e){var t=e.getTimezoneOffset()*Gu%Yu;t<0&&(t+=Yu),e.setTime(Math.floor((+e-t)/Yu)*Yu+t)},function(e,t){e.setTime(+e+t*Yu)},function(e,t){return(t-e)/Yu},function(e){return e.getHours()}),oa=sa.range,ua=$u(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gu)/Zu},function(e){return e.getDate()-1}),aa=ua.range,la=fa(0),ca=fa(1),ha=fa(2),pa=fa(3),da=fa(4),va=fa(5),ma=fa(6),ga=la.range,ya=ca.range,ba=ha.range,wa=pa.range,Ea=da.range,Sa=va.range,xa=ma.range,Ta=$u(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),Na=Ta.range,Ca=$u(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});Ca.every=function(e){return!!isFinite(e=Math.floor(e))&&e>0?$u(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var ka=Ca.range,La=$u(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Gu)},function(e,t){return(t-e)/Gu},function(e){return e.getUTCMinutes()}),Aa=La.range,Oa=$u(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*Yu)},function(e,t){return(t-e)/Yu},function(e){return e.getUTCHours()}),Ma=Oa.range,_a=$u(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Zu},function(e){return e.getUTCDate()-1}),Da=_a.range,Ha=Pa(0),Ba=Pa(1),ja=Pa(2),Fa=Pa(3),Ia=Pa(4),qa=Pa(5),Ra=Pa(6),Ua=Ha.range,za=Ba.range,Wa=ja.range,Xa=Fa.range,Va=Ia.range,$a=qa.range,Ja=Ra.range,Ka=$u(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()}),Qa=Ka.range,Ga=$u(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Ga.every=function(e){return!!isFinite(e=Math.floor(e))&&e>0?$u(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var Ya=Ga.range,Za=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},ef=function(e){return e=Za(Math.abs(e)),e?e[1]:NaN},tf=function(e,t){return function(n,r){var i=n.length,s=[],o=0,u=e[0],a=0;while(i>0&&u>0){a+u+1>r&&(u=Math.max(1,r-a)),s.push(n.substring(i-=u,i+u));if((a+=u+1)>r)break;u=e[o=(o+1)%e.length]}return s.reverse().join(t)}},nf=function(e,t){e=e.toPrecision(t);e:for(var n=e.length,r=1,i=-1,s;r<n;++r)switch(e[r]){case".":i=s=r;break;case"0":i===0&&(i=r),s=r;break;case"e":break e;default:i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(s+1):e},rf,sf=function(e,t){var n=Za(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(rf=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+(new Array(s-o+1)).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+(new Array(1-s)).join("0")+Za(e,Math.max(0,t+s-1))[0]},of=function(e,t){var n=Za(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+(new Array(-i)).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+(new Array(i-r.length+2)).join("0")},uf={"":nf,"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return of(e*100,t)},r:of,s:sf,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},af=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,ff=function(e){return new lf(e)};lf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var cf=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],pf=function(e){function i(e){function g(e){var n=p,u=d,g,y,b;if(h==="c")u=v(e)+u,e="";else{e=+e;var w=(e<0||1/e<0)&&(e*=-1,!0);e=v(e,c);if(w){g=-1,y=e.length,w=!1;while(++g<y)if(b=e.charCodeAt(g),48<b&&b<58||h==="x"&&96<b&&b<103||h==="X"&&64<b&&b<71){w=!0;break}}n=(w?o==="("?o:"-":o==="-"||o==="("?"":o)+n,u=u+(h==="s"?cf[8+rf/3]:"")+(w&&o==="("?")":"");if(m){g=-1,y=e.length;while(++g<y)if(b=e.charCodeAt(g),48>b||b>57){u=(b===46?r+e.slice(g+1):e.slice(g))+u,e=e.slice(0,g);break}}}l&&!a&&(e=t(e,Infinity));var E=n.length+e.length+u.length,S=E<f?(new Array(f-E+1)).join(i):"";l&&a&&(e=t(S+e,S.length?f-u.length:Infinity),S="");switch(s){case"<":return n+e+u+S;case"=":return n+S+e+u;case"^":return S.slice(0,E=S.length>>1)+n+e+u+S.slice(E)}return S+n+e+u}e=ff(e);var i=e.fill,s=e.align,o=e.sign,u=e.symbol,a=e.zero,f=e.width,l=e.comma,c=e.precision,h=e.type,p=u==="$"?n[0]:u==="#"&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",d=u==="$"?n[1]:/[%p]/.test(h)?"%":"",v=uf[h],m=!h||/[defgprs%]/.test(h);return c=c==null?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,c)):Math.max(0,Math.min(20,c)),g.toString=function(){return e+""},g}function s(e,t){var n=i((e=ff(e),e.type="f",e)),r=Math.max(-8,Math.min(8,Math.floor(ef(t)/3)))*3,s=Math.pow(10,-r),o=cf[8+r/3];return function(e){return n(s*e)+o}}var t=e.grouping&&e.thousands?tf(e.grouping,e.thousands):hf,n=e.currency,r=e.decimal;return{format:i,formatPrefix:s}},df;vf({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var mf=function(e){return Math.max(0,-ef(Math.abs(e)))},gf=function(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ef(t)/3)))*3-ef(Math.abs(e)))},yf=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ef(t)-ef(e))+1},xf={"-":"",_:" ",0:"0"},Tf=/^\s*\d+/,Nf=/^%/,Cf=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,wl;El({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Sl="%Y-%m-%dT%H:%M:%S.%LZ",Tl=Date.prototype.toISOString?xl:e.utcFormat(Sl),Cl=+(new Date("2000-01-01T00:00:00.000Z"))?Nl:e.utcParse(Sl),kl=Array.prototype,Ll=kl.map,Al=kl.slice,Ol={name:"implicit"},Hl=function(e){return function(){return e}},Bl=function(e){return+e},jl=[0,1],Xl=function(t,n,r){var i=t[0],s=t[t.length-1],o=x(i,s,n==null?10:n),u;r=ff(r==null?",f":r);switch(r.type){case"s":var a=Math.max(Math.abs(i),Math.abs(s));return r.precision==null&&!isNaN(u=gf(o,a))&&(r.precision=u),e.formatPrefix(r,a);case"":case"e":case"g":case"p":case"r":r.precision==null&&!isNaN(u=yf(o,Math.max(Math.abs(i),Math.abs(s))))&&(r.precision=u-(r.type==="e"));break;case"f":case"%":r.precision==null&&!isNaN(u=mf(o))&&(r.precision=u-(r.type==="%")*2)}return e.format(r)},Kl=function(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e},fc=1e3,lc=fc*60,cc=lc*60,hc=cc*24,pc=hc*7,dc=hc*30,vc=hc*365,bc=function(){return yc(Ca,Ta,la,ua,sa,ra,ta,Ju,e.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},wc=function(){return yc(Ga,Ka,Ha,_a,Oa,La,ta,Ju,e.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},Ec=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})},Sc=Ec("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),xc=Ec("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Tc=Ec("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Nc=Ec("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Cc=zo(Rs(300,.5,0),Rs(-240,.5,1)),kc=zo(Rs(-100,.75,.35),Rs(80,1.5,.8)),Lc=zo(Rs(260,.75,.35),Rs(80,1.5,.8)),Ac=Rs(),Oc=function(e){if(e<0||e>1)e-=Math.floor(e);var t=Math.abs(e-.5);return Ac.h=360*e-100,Ac.s=1.5-1.5*t,Ac.l=.8-.9*t,Ac+""},_c=Mc(Ec("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Dc=Mc(Ec("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Pc=Mc(Ec("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Hc=Mc(Ec("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),jc="http://www.w3.org/1999/xhtml",Fc={svg:"http://www.w3.org/2000/svg",xhtml:jc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ic=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Fc.hasOwnProperty(t)?{space:Fc[t],local:e}:e},Uc=function(e){var t=Ic(e);return(t.local?Rc:qc)(t)},zc=0;Xc.prototype=Wc.prototype={constructor:Xc,get:function(e){var t=this._;while(!(t in e))if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var Vc=function(e){return function(){return this.matches(e)}};if(typeof document!="undefined"){var $c=document.documentElement;if(!$c.matches){var Jc=$c.webkitMatchesSelector||$c.msMatchesSelector||$c.mozMatchesSelector||$c.oMatchesSelector;Vc=function(e){return function(){return Jc.call(this,e)}}}}var Kc=Vc,Qc={};e.event=null;if(typeof document!="undefined"){var Gc=document.documentElement;"onmouseenter"in Gc||(Qc={mouseenter:"mouseover",mouseleave:"mouseout"})}var rh=function(e,t,n){var r=eh(e+""),i,s=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u)for(var a=0,f=u.length,l;a<f;++a)for(i=0,l=u[a];i<s;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value;return}u=t?nh:th,n==null&&(n=!1);for(i=0;i<s;++i)this.each(u(r[i],t,n));return this},sh=function(){var t=e.event,n;while(n=t.sourceEvent)t=n;return t},oh=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]},uh=function(e){var t=sh();return t.changedTouches&&(t=t.changedTouches[0]),oh(e,t)},fh=function(e){return e==null?ah:function(){return this.querySelector(e)}},lh=function(e){typeof e!="function"&&(e=fh(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,u=r[i]=new Array(o),a,f,l=0;l<o;++l)(a=s[l])&&(f=e.call(a,a.__data__,l,s))&&("__data__"in a&&(f.__data__=a.__data__),u[l]=f);return new Lp(r,this._parents)},hh=function(e){return e==null?ch:function(){return this.querySelectorAll(e)}},ph=function(e){typeof e!="function"&&(e=hh(e));for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],u=o.length,a,f=0;f<u;++f)if(a=o[f])r.push(e.call(a,a.__data__,f,o)),i.push(a);return new Lp(r,i)},dh=function(e){typeof e!="function"&&(e=Kc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,u=r[i]=[],a,f=0;f<o;++f)(a=s[f])&&e.call(a,a.__data__,f,s)&&u.push(a);return new Lp(r,this._parents)},vh=function(e){return new Array(e.length)},mh=function(){return new Lp(this._enter||this._groups.map(vh),this._parents)};gh.prototype={constructor:gh,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var yh=function(e){return function(){return e}},bh="$",Sh=function(e,t){if(!e)return p=new Array(this.size()),f=-1,this.each(function(e){p[++f]=e}),p;var n=t?Eh:wh,r=this._parents,i=this._groups;typeof e!="function"&&(e=yh(e));for(var s=i.length,o=new Array(s),u=new Array(s),a=new Array(s),f=0;f<s;++f){var l=r[f],c=i[f],h=c.length,p=e.call(l,l&&l.__data__,f,r),d=p.length,v=u[f]=new Array(d),m=o[f]=new Array(d),g=a[f]=new Array(h);n(l,c,v,m,g,p,t);for(var y=0,b=0,w,E;y<d;++y)if(w=v[y]){y>=b&&(b=y+1);while(!(E=m[b])&&++b<d);w._next=E||null}}return o=new Lp(o,r),o._enter=u,o._exit=a,o},xh=function(){return new Lp(this._exit||this._groups.map(vh),this._parents)},Th=function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),u=0;u<s;++u)for(var a=t[u],f=n[u],l=a.length,c=o[u]=new Array(l),h,p=0;p<l;++p)if(h=a[p]||f[p])c[p]=h;for(;u<r;++u)o[u]=t[u];return new Lp(o,this._parents)},Nh=function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)if(o=r[i])s&&s!==o.nextSibling&&s.parentNode.insertBefore(o,s),s=o;return this},Ch=function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=kh);for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],u=o.length,a=i[s]=new Array(u),f,l=0;l<u;++l)if(f=o[l])a[l]=f;a.sort(t)}return(new Lp(i,this._parents)).order()},Lh=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},Ah=function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},Oh=function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},Mh=function(){var e=0;return this.each(function(){++e}),e},_h=function(){return!this.node()},Dh=function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,u;s<o;++s)(u=i[s])&&e.call(u,u.__data__,s,i);return this},qh=function(e,t){var n=Ic(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Hh:Ph:typeof t=="function"?n.local?Ih:Fh:n.local?jh:Bh)(n,t))},Rh=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView},Xh=function(e,t,n){var r;return arguments.length>1?this.each((t==null?Uh:typeof t=="function"?Wh:zh)(e,t,n==null?"":n)):Rh(r=this.node()).getComputedStyle(r,null).getPropertyValue(e)},Kh=function(e,t){return arguments.length>1?this.each((t==null?Vh:typeof t=="function"?Jh:$h)(e,t)):this.node()[e]};Yh.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ip=function(e,t){var n=Qh(e+"");if(arguments.length<2){var r=Gh(this.node()),i=-1,s=n.length;while(++i<s)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?rp:t?tp:np)(n,t))},ap=function(e){return arguments.length?this.each(e==null?sp:(typeof e=="function"?up:op)(e)):this.node().textContent},hp=function(e){return arguments.length?this.each(e==null?fp:(typeof e=="function"?cp:lp)(e)):this.node().innerHTML},dp=function(){return this.each(pp)},mp=function(){return this.each(vp)},gp=function(e){var t=typeof e=="function"?e:Uc(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},bp=function(e,t){var n=typeof e=="function"?e:Uc(e),r=t==null?yp:typeof t=="function"?t:fh(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},Ep=function(){return this.each(wp)},Sp=function(e){return arguments.length?this.property("__data__",e):this.node().__data__},Cp=function(e,t){return this.each((typeof t=="function"?Np:Tp)(e,t))},kp=[null];Lp.prototype=Ap.prototype={constructor:Lp,select:lh,selectAll:ph,filter:dh,data:Sh,enter:mh,exit:xh,merge:Th,order:Nh,sort:Ch,call:Lh,nodes:Ah,node:Oh,size:Mh,empty:_h,each:Dh,attr:qh,style:Xh,property:Kh,classed:ip,text:ap,html:hp,raise:dp,lower:mp,append:gp,insert:bp,remove:Ep,datum:Sp,on:rh,dispatch:Cp};var Op=function(e){return typeof e=="string"?new Lp([[document.querySelector(e)]],[document.documentElement]):new Lp([[e]],kp)},Mp=function(e){return typeof e=="string"?new Lp([document.querySelectorAll(e)],[document.documentElement]):new Lp([e==null?[]:e],kp)},_p=function(e,t,n){arguments.length<3&&(n=t,t=sh().changedTouches);for(var r=0,i=t?t.length:0,s;r<i;++r)if((s=t[r]).identifier===n)return oh(e,s);return null},Dp=function(e,t){t==null&&(t=sh().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=oh(e,t[n]);return i},Pp=Vo("start","end","interrupt"),Hp=[],Bp=0,jp=1,Fp=2,Ip=3,qp=4,Rp=5,Up=6,zp=function(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;$p(e,n,{name:t,index:r,group:i,on:Pp,tween:Hp,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Bp})},Jp=function(e,t){var n=e.__transition,r,i,s=!0,o;if(!n)return;t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Fp&&r.state<Rp,r.state=Up,r.timer.stop(),i&&r.on.call("interrupt",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition},Kp=function(e){return this.each(function(){Jp(this,e)})},Yp=function(e,t){var n=this._id;e+="";if(arguments.length<2){var r=Vp(this.node(),n).tween;for(var i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Qp:Gp)(n,e,t))},ed=function(e,t){var n;return(typeof t=="number"?io:t instanceof ts?Ys:(n=ts(t))?(t=n,Ys):lo)(e,t)},ud=function(e,t){var n=Ic(e),r=n==="transform"?No:ed;return this.attrTween(e,typeof t=="function"?(n.local?od:sd)(n,r,Zp(this,"attr."+e,t)):t==null?(n.local?nd:td)(n):(n.local?id:rd)(n,r,t))},ld=function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ic(e);return this.tween(n,(r.local?ad:fd)(r,t))},pd=function(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cd:hd)(t,e)):Vp(this.node(),t).delay},md=function(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dd:vd)(t,e)):Vp(this.node(),t).duration},yd=function(e){var t=this._id;return arguments.length?this.each(gd(t,e)):Vp(this.node(),t).ease},bd=function(e){typeof e!="function"&&(e=Kc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,u=r[i]=[],a,f=0;f<o;++f)(a=s[f])&&e.call(a,a.__data__,f,s)&&u.push(a);return new Ud(r,this._parents,this._name,this._id)},wd=function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),u=0;u<s;++u)for(var a=t[u],f=n[u],l=a.length,c=o[u]=new Array(l),h,p=0;p<l;++p)if(h=a[p]||f[p])c[p]=h;for(;u<r;++u)o[u]=t[u];return new Ud(o,this._parents,this._name,this._id)},xd=function(e,t){var n=this._id;return arguments.length<2?Vp(this.node(),n).on.on(e):this.each(Sd(n,e,t))},Nd=function(){return this.on("end.remove",Td(this._id))},Cd=function(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fh(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var u=r[o],a=u.length,f=s[o]=new Array(a),l,c,h=0;h<a;++h)(l=u[h])&&(c=e.call(l,l.__data__,h,u))&&("__data__"in l&&(c.__data__=l.__data__),f[h]=c,zp(f[h],t,n,h,f,Vp(l,n)));return new Ud(s,this._parents,t,n)},kd=function(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hh(e));for(var r=this._groups,i=r.length,s=[],o=[],u=0;u<i;++u)for(var a=r[u],f=a.length,l,c=0;c<f;++c)if(l=a[c]){for(var h=e.call(l,l.__data__,c,a),p,d=Vp(l,n),v=0,m=h.length;v<m;++v)(p=h[v])&&zp(p,t,n,v,h,d);s.push(h),o.push(l)}return new Ud(s,o,t,n)},Ld=Ap.prototype.constructor,Ad=function(){return new Ld(this._groups,this._parents)},Pd=function(e,t,n){var r=(e+="")==="transform"?To:ed;return t==null?this.styleTween(e,Od(e,r)).on("end.style."+e,Md(e)):this.styleTween(e,typeof t=="function"?Dd(e,r,Zp(this,"style."+e,t)):_d(e,r,t),n)},Bd=function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Hd(e,t,n==null?"":n))},Id=function(e){return this.tween("text",typeof e=="function"?Fd(Zp(this,"text",e)):jd(e==null?"":e+""))},qd=function(){var e=this._name,t=this._id,n=Wd();for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],u=o.length,a,f=0;f<u;++f)if(a=o[f]){var l=Vp(a,t);zp(a,e,n,f,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ud(r,this._parents,e,n)},Rd=0,Xd=Ap.prototype;Ud.prototype=zd.prototype={constructor:Ud,select:Cd,selectAll:kd,filter:bd,merge:wd,selection:Ad,transition:qd,call:Xd.call,nodes:Xd.nodes,node:Xd.node,size:Xd.size,empty:Xd.empty,each:Xd.each,on:xd,attr:ud,attrTween:ld,style:Pd,styleTween:Bd,text:Id,remove:Nd,tween:Yp,delay:pd,duration:md,ease:yd};var Vd={time:null,delay:0,duration:250,ease:dt},Jd=function(e){var t,n;e instanceof Ud?(t=e._id,e=e._name):(t=Wd(),(n=Vd).time=Pu(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],u=o.length,a,f=0;f<u;++f)(a=o[f])&&zp(a,e,t,f,o,n||$d(a,t));return new Ud(r,this._parents,e,t)};Ap.prototype.interrupt=Kp,Ap.prototype.transition=Jd;var Kd=[null],Qd=function(e,t){var n=e.__transition,r,i;if(n){t=t==null?null:t+"";for(i in n)if((r=n[i]).state>jp&&r.name===t)return new Ud([[e]],Kd,t,+i)}return null},Gd=Array.prototype.slice,Yd=function(e){return e},Zd=1,ev=2,tv=3,nv=4,rv=1e-6,wv=function(){function i(i){var s,o=0;i.eachAfter(function(t){var n=t.children;n?(t.x=dv(n),t.y=mv(n)):(t.x=s?o+=e(t,s):0,t.y=0,s=t)});var u=yv(i),a=bv(i),f=u.x-e(u,a)/2,l=a.x+e(a,u)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-f)/(l-f)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}var e=pv,t=1,n=1,r=!1;return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},Ev=function(e){var t=this,n,r=[t],i,s,o;do{n=r.reverse(),r=[];while(t=n.pop()){e(t),i=t.children;if(i)for(s=0,o=i.length;s<o;++s)r.push(i[s])}}while(r.length);return this},Sv=function(e){var t=this,n=[t],r,i;while(t=n.pop()){e(t),r=t.children;if(r)for(i=r.length-1;i>=0;--i)n.push(r[i])}return this},xv=function(e){var t=this,n=[t],r=[],i,s,o;while(t=n.pop()){r.push(t),i=t.children;if(i)for(s=0,o=i.length;s<o;++s)n.push(i[s])}while(t=r.pop())e(t);return this},Tv=function(e){return this.eachAfter(function(t){var n=+e(t.data)||0,r=t.children,i=r&&r.length;while(--i>=0)n+=r[i].value;t.value=n})},Nv=function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},Cv=function(e){var t=this,n=kv(t,e),r=[t];while(t!==n)t=t.parent,r.push(t);var i=r.length;while(e!==n)r.splice(i,0,e),e=e.parent;return r},Lv=function(){var e=this,t=[e];while(e=e.parent)t.push(e);return t},Av=function(){var e=[];return this.each(function(t){e.push(t)}),e},Ov=function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},Mv=function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t};jv.prototype=_v.prototype={constructor:jv,each:Ev,eachAfter:xv,eachBefore:Sv,sum:Tv,sort:Nv,path:Cv,ancestors:Lv,descendants:Av,leaves:Ov,links:Mv,copy:Dv};var Iv=function(e){var t,n=(e=e.slice()).length,r=null,i=r;while(n){var s=new Fv(e[n-1]);i?i=i.next=s:i=r=s,e[t]=e[--n]}return{head:r,tail:i}},qv=function(e){return Uv(Iv(e),[])},Gv=function(e){return Qv(e),e},tm=function(e){return function(){return e}},rm=function(){function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(im(e)).eachAfter(sm(r,.5)).eachBefore(om(1)):i.eachBefore(im(nm)).eachAfter(sm(em,1)).eachAfter(sm(r,i.r/Math.min(t,n))).eachBefore(om(Math.min(t,n)/(2*i.r))),i}var e=null,t=1,n=1,r=em;return i.radius=function(t){return arguments.length?(e=Yv(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r=typeof e=="function"?e:tm(+e),i):r},i},um=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},am=function(e,t,n,r,i){var s=e.children,o,u=-1,a=s.length,f=e.value&&(r-t)/e.value;while(++u<a)o=s[u],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*f},fm=function(){function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/o,i.eachBefore(s(t,o)),r&&i.eachBefore(um),i}function s(e,t){return function(r){r.children&&am(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,s=r.y0,o=r.x1-n,u=r.y1-n;o<i&&(i=o=(i+o)/2),u<s&&(s=u=(s+u)/2),r.x0=i,r.y0=s,r.x1=o,r.y1=u}}var e=1,t=1,n=0,r=!1;return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i},lm="$",cm={depth:-1},hm={},vm=function(){function n(n){var r,i,s=n.length,o,u,a,f=new Array(s),l,c,h={};for(i=0;i<s;++i)r=n[i],a=f[i]=new jv(r),(l=e(r,i,n))!=null&&(l+="")&&(c=lm+(a.id=l),h[c]=c in h?hm:a);for(i=0;i<s;++i){a=f[i],l=t(n[i],i,n);if(l==null||!(l+="")){if(o)throw new Error("multiple roots");o=a}else{u=h[lm+l];if(!u)throw new Error("missing: "+l);if(u===hm)throw new Error("ambiguous: "+l);u.children?u.children.push(a):u.children=[a],a.parent=u}}if(!o)throw new Error("no root");o.parent=cm,o.eachBefore(function(e){e.depth=e.parent.depth+1,--s}).eachBefore(Bv),o.parent=null;if(s>0)throw new Error("cycle");return o}var e=pm,t=dm;return n.id=function(t){return arguments.length?(e=Zv(t),n):e},n.parentId=function(e){return arguments.length?(t=Zv(e),n):t},n};Sm.prototype=Object.create(jv.prototype);var Tm=function(){function i(i){var u=xm(i);u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o);if(r)i.eachBefore(a);else{var f=i,l=i,c=i;i.eachBefore(function(e){e.x<f.x&&(f=e),e.x>l.x&&(l=e),e.depth>c.depth&&(c=e)});var h=f===l?1:e(f,l)/2,p=h-f.x,d=t/(l.x+h+p),v=n/(c.depth||1);i.eachBefore(function(e){e.x=(e.x+p)*d,e.y=e.depth*v})}return i}function s(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){wm(t);var s=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-s):t.z=s}else i&&(t.z=i.z+e(t._,i._));t.parent.A=u(t,i,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function u(t,n,r){if(n){var i=t,s=t,o=n,u=i.parent.children[0],a=i.m,f=s.m,l=o.m,c=u.m,h;while(o=ym(o),i=gm(i),o&&i)u=gm(u),s=ym(s),s.a=t,h=o.z+l-i.z-a+e(o._,i._),h>0&&(bm(Em(o,t,r),t,h),a+=h,f+=h),l+=o.m,a+=i.m,c+=u.m,f+=s.m;o&&!ym(s)&&(s.t=o,s.m+=l-f),i&&!gm(u)&&(u.t=i,u.m+=a-c,r=t)}return r}function a(e){e.x*=t,e.y=e.depth*n}var e=mm,t=1,n=1,r=null;return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},Nm=function(e,t,n,r,i){var s=e.children,o,u=-1,a=s.length,f=e.value&&(i-n)/e.value;while(++u<a)o=s[u],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*f},Cm=(1+Math.sqrt(5))/2,Lm=function qx(e){function t(t,n,r,i,s){km(e,t,n,r,i,s)}return t.ratio=function(e){return qx((e=+e)>1?e:1)},t}(Cm),Am=function(){function l(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(c),i=[0],t&&e.eachBefore(um),e}function c(t){var n=i[t.depth],r=t.x0+n,l=t.y0+n,c=t.x1-n,h=t.y1-n;c<r&&(r=c=(r+c)/2),h<l&&(l=h=(l+h)/2),t.x0=r,t.y0=l,t.x1=c,t.y1=h,t.children&&(n=i[t.depth+1]=s(t)/2,r+=f(t)-n,l+=o(t)-n,c-=u(t)-n,h-=a(t)-n,c<r&&(r=c=(r+c)/2),h<l&&(l=h=(l+h)/2),e(t,r,l,c,h))}var e=Lm,t=!1,n=1,r=1,i=[0],s=em,o=em,u=em,a=em,f=em;return l.round=function(e){return arguments.length?(t=!!e,l):t},l.size=function(e){return arguments.length?(n=+e[0],r=+e[1],l):[n,r]},l.tile=function(t){return arguments.length?(e=Zv(t),l):e},l.padding=function(e){return arguments.length?l.paddingInner(e).paddingOuter(e):l.paddingInner()},l.paddingInner=function(e){return arguments.length?(s=typeof e=="function"?e:tm(+e),l):s},l.paddingOuter=function(e){return arguments.length?l.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):l.paddingTop()},l.paddingTop=function(e){return arguments.length?(o=typeof e=="function"?e:tm(+e),l):o},l.paddingRight=function(e){return arguments.length?(u=typeof e=="function"?e:tm(+e),l):u},l.paddingBottom=function(e){return arguments.length?(a=typeof e=="function"?e:tm(+e),l):a},l.paddingLeft=function(e){return arguments.length?(f=typeof e=="function"?e:tm(+e),l):f},l},Om=function(e,t,n,r,i){function l(e,t,n,r,i,o,u){if(e>=t-1){var a=s[e];a.x0=r,a.y0=i,a.x1=o,a.y1=u;return}var c=f[e],h=n/2+c,p=e+1,d=t-1;while(p<d){var v=p+d>>>1;f[v]<h?p=v+1:d=v}var m=f[p]-c,g=n-m;if(u-i>o-r){var y=(i*g+u*m)/n;l(e,p,m,r,i,o,y),l(p,t,g,r,y,o,u)}else{var b=(r*g+o*m)/n;l(e,p,m,r,i,b,u),l(p,t,g,b,i,o,u)}}var s=e.children,o,u=s.length,a,f=new Array(u+1);for(f[0]=a=o=0;o<u;++o)f[o+1]=a+=s[o].value;l(0,u,e.value,t,n,r,i)},Mm=function(e,t,n,r,i){(e.depth&1?Nm:am)(e,t,n,r,i)},_m=function Rx(e){function t(t,n,r,i,s){if((o=t._squarify)&&o.ratio===e){var o,u,a,f,l=-1,c,h=o.length,p=t.value;while(++l<h){u=o[l],a=u.children;for(f=u.value=0,c=a.length;f<c;++f)u.value+=a[f].value;u.dice?am(u,n,r,i,r+=(s-r)*u.value/p):Nm(u,n,r,n+=(i-n)*u.value/p,s),p-=u.value}}else t._squarify=o=km(e,t,n,r,i,s),o.ratio=e}return t.ratio=function(e){return Rx((e=+e)>1?e:1)},t}(Cm),Dm=function(e,t){function r(){var r,i=n.length,s,o=0,u=0;for(r=0;r<i;++r)s=n[r],o+=s.x,u+=s.y;for(o=o/i-e,u=u/i-t,r=0;r<i;++r)s=n[r],s.x-=o,s.y-=u}var n;return e==null&&(e=0),t==null&&(t=0),r.initialize=function(e){n=e},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(e){return arguments.length?(t=+e,r):t},r},Pm=function(e){return function(){return e}},Hm=function(){return(Math.random()-.5)*1e-6},Fm=function(e){function s(){function d(t,n,i,s,o){var u=t.data,p=t.r,d=c+p;if(u){if(u.index>e){var v=f-u.x-u.vx,m=l-u.y-u.vy,g=v*v+m*m;g<d*d&&(v===0&&(v=Hm(),g+=v*v),m===0&&(m=Hm(),g+=m*m),g=(d-(g=Math.sqrt(g)))/g*r,a.vx+=(v*=g)*(d=(p*=p)/(h+p)),a.vy+=(m*=g)*d,u.vx-=v*(d=1-d),u.vy-=m*d)}return}return n>f+d||s<f-d||i>l+d||o<l-d}var e,s=t.length,u,a,f,l,c,h;for(var p=0;p<i;++p){u=_n(t,Bm,jm).visitAfter(o);for(e=0;e<s;++e)a=t[e],c=n[e],h=c*c,f=a.x+a.vx,l=a.y+a.vy,u.visit(d)}}function o(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function u(){if(!t)return;var r,i=t.length;n=new Array(i);for(r=0;r<i;++r)n[r]=+e(t[r],r,t)}var t,n,r=1,i=1;return typeof e!="function"&&(e=Pm(e==null?1:+e)),s.initialize=function(e){t=e,u()},s.iterations=function(e){return arguments.length?(i=+e,s):i},s.strength=function(e){return arguments.length?(r=+e,s):r},s.radius=function(t){return arguments.length?(e=typeof t=="function"?t:Pm(+t),u(),s):e},s},Rm=function(e){function l(e){return 1/Math.min(u[e.source.index],u[e.target.index])}function c(t){for(var n=0,i=e.length;n<f;++n)for(var o=0,u,l,c,h,p,d,v;o<i;++o)u=e[o],l=u.source,c=u.target,h=c.x+c.vx-l.x-l.vx||Hm(),p=c.y+c.vy-l.y-l.vy||Hm(),d=Math.sqrt(h*h+p*p),d=(d-s[o])/d*t*r[o],h*=d,p*=d,c.vx-=h*(v=a[o]),c.vy-=p*v,l.vx+=h*(v=1-v),l.vy+=p*v}function h(){if(!o)return;var n,i=o.length,f=e.length,l=W(o,t),c;for(n=0,u=new Array(i);n<i;++n)u[n]=0;for(n=0;n<f;++n)c=e[n],c.index=n,typeof c.source!="object"&&(c.source=qm(l,c.source)),typeof c.target!="object"&&(c.target=qm(l,c.target)),++u[c.source.index],++u[c.target.index];for(n=0,a=new Array(f);n<f;++n)c=e[n],a[n]=u[c.source.index]/(u[c.source.index]+u[c.target.index]);r=new Array(f),p(),s=new Array(f),d()}function p(){if(!o)return;for(var t=0,i=e.length;t<i;++t)r[t]=+n(e[t],t,e)}function d(){if(!o)return;for(var t=0,n=e.length;t<n;++t)s[t]=+i(e[t],t,e)}var t=Im,n=l,r,i=Pm(30),s,o,u,a,f=1;return e==null&&(e=[]),c.initialize=function(e){o=e,h()},c.links=function(t){return arguments.length?(e=t,h(),c):e},c.id=function(e){return arguments.length?(t=e,c):t},c.iterations=function(e){return arguments.length?(f=+e,c):f},c.strength=function(e){return arguments.length?(n=typeof e=="function"?e:Pm(+e),p(),c):n},c.distance=function(e){return arguments.length?(i=typeof e=="function"?e:Pm(+e),d(),c):i},c},Wm=10,Xm=Math.PI*(3-Math.sqrt(5)),Vm=function(e){function l(){c(),f.call("tick",t),n<r&&(a.stop(),f.call("end",t))}function c(){var t,r=e.length,a;n+=(s-n)*i,u.each(function(e){e(n)});for(t=0;t<r;++t)a=e[t],a.fx==null?a.x+=a.vx*=o:(a.x=a.fx,a.vx=0),a.fy==null?a.y+=a.vy*=o:(a.y=a.fy,a.vy=0)}function h(){for(var t=0,n=e.length,r;t<n;++t){r=e[t],r.index=t;if(isNaN(r.x)||isNaN(r.y)){var i=Wm*Math.sqrt(t),s=t*Xm;r.x=i*Math.cos(s),r.y=i*Math.sin(s)}if(isNaN(r.vx)||isNaN(r.vy))r.vx=r.vy=0}}function p(t){return t.initialize&&t.initialize(e),t}var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,u=W(),a=ju(l),f=Vo("tick","end");return e==null&&(e=[]),h(),t={tick:c,restart:function(){return a.restart(l),t},stop:function(){return a.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),u.each(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(s=+e,t):s},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},force:function(e,n){return arguments.length>1?(n==null?u.remove(e):u.set(e,p(n)),t):u.get(e)},find:function(t,n,r){var i=0,s=e.length,o,u,a,f,l;r==null?r=Infinity:r*=r;for(i=0;i<s;++i)f=e[i],o=t-f.x,u=n-f.y,a=o*o+u*u,a<r&&(l=f,r=a);return l},on:function(e,n){return arguments.length>1?(f.on(e,n),t):f.on(e)}}},$m=function(){function a(r){var i,s=e.length,o=_n(e,Um,zm).visitAfter(l);for(n=r,i=0;i<s;++i)t=e[i],o.visit(c)}function f(){if(!e)return;var t,n=e.length;i=new Array(n);for(t=0;t<n;++t)i[t]=+r(e[t],t,e)}function l(e){var t=0,n,r,s,o,u;if(e.length){for(s=o=u=0;u<4;++u)(n=e[u])&&(r=n.value)&&(t+=r,s+=r*n.x,o+=r*n.y);e.x=s/t,e.y=o/t}else{n=e,n.x=n.data.x,n.y=n.data.y;do t+=i[n.data.index];while(n=n.next)}e.value=t}function c(e,r,a,f){if(!e.value)return!0;var l=e.x-t.x,c=e.y-t.y,h=f-r,p=l*l+c*c;if(h*h/u<p)return p<o&&(l===0&&(l=Hm(),p+=l*l),c===0&&(c=Hm(),p+=c*c),p<s&&(p=Math.sqrt(s*p)),t.vx+=l*e.value*n/p,t.vy+=c*e.value*n/p),!0;if(e.length||p>=o)return;if(e.data!==t||e.next)l===0&&(l=Hm(),p+=l*l),c===0&&(c=Hm(),p+=c*c),p<s&&(p=Math.sqrt(s*p));do e.data!==t&&(h=i[e.data.index]*n/p,t.vx+=l*h,t.vy+=c*h);while(e=e.next)}var e,t,n,r=Pm(-30),i,s=1,o=Infinity,u=.81;return a.initialize=function(t){e=t,f()},a.strength=function(e){return arguments.length?(r=typeof e=="function"?e:Pm(+e),f(),a):r},a.distanceMin=function(e){return arguments.length?(s=e*e,a):Math.sqrt(s)},a.distanceMax=function(e){return arguments.length?(o=e*e,a):Math.sqrt(o)},a.theta=function(e){return arguments.length?(u=e*e,a):Math.sqrt(u)},a},Jm=function(e){function s(e){for(var t=0,s=n.length,o;t<s;++t)o=n[t],o.vx+=(i[t]-o.x)*r[t]*e}function o(){if(!n)return;var s,o=n.length;r=new Array(o),i=new Array(o);for(s=0;s<o;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}var t=Pm(.1),n,r,i;return typeof e!="function"&&(e=Pm(e==null?0:+e)),s.initialize=function(e){n=e,o()},s.strength=function(e){return arguments.length?(t=typeof e=="function"?e:Pm(+e),o(),s):t},s.x=function(t){return arguments.length?(e=typeof t=="function"?t:Pm(+t),o(),s):e},s},Km=function(e){function s(e){for(var t=0,s=n.length,o;t<s;++t)o=n[t],o.vy+=(i[t]-o.y)*r[t]*e}function o(){if(!n)return;var s,o=n.length;r=new Array(o),i=new Array(o);for(s=0;s<o;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}var t=Pm(.1),n,r,i;return typeof e!="function"&&(e=Pm(e==null?0:+e)),s.initialize=function(e){n=e,o()},s.strength=function(e){return arguments.length?(t=typeof e=="function"?e:Pm(+e),o(),s):t},s.y=function(t){return arguments.length?(e=typeof t=="function"?t:Pm(+t),o(),s):e},s},Gm=function(){e.event.preventDefault(),e.event.stopImmediatePropagation()},Ym=function(e){var t=e.document.documentElement,n=Op(e).on("dragstart.drag",Gm,!0);"onselectstart"in t?n.on("selectstart.drag",Gm,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")},eg=function(e){return function(){return e}};tg.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var sg=function(){function f(e){e.on("mousedown.drag",l).on("touchstart.drag",p).on("touchmove.drag",d).on("touchend.drag touchcancel.drag",v).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){if(a||!t.apply(this,arguments))return;var r=m("mouse",n.apply(this,arguments),uh,this,arguments);if(!r)return;Op(e.event.view).on("mousemove.drag",c,!0).on("mouseup.drag",h,!0),Ym(e.event.view),Qm(),u=!1,r("start")}function c(){Gm(),u=!0,i.mouse("drag")}function h(){Op(e.event.view).on("mousemove.drag mouseup.drag",null),Zm(e.event.view,u),Gm(),i.mouse("end")}function p(){if(!t.apply(this,arguments))return;var r=e.event.changedTouches,i=n.apply(this,arguments),s=r.length,o,u;for(o=0;o<s;++o)if(u=m(r[o].identifier,i,_p,this,arguments))Qm(),u("start")}function d(){var t=e.event.changedTouches,n=t.length,r,s;for(r=0;r<n;++r)if(s=i[t[r].identifier])Gm(),s("drag")}function v(){var t=e.event.changedTouches,n=t.length,r,s;a&&clearTimeout(a),a=setTimeout(function(){a=null},500);for(r=0;r<n;++r)if(s=i[t[r].identifier])Qm(),s("end")}function m(t,n,u,a,l){var c=u(n,t),h,p,d,v=s.copy();if(!ih(new tg(f,"beforestart",h,t,o,c[0],c[1],0,0,v),function(){return(e.event.subject=h=r.apply(a,l))==null?!1:(p=h.x-c[0]||0,d=h.y-c[1]||0,!0)}))return;return function m(e){var r=c,s;switch(e){case"start":i[t]=m,s=o++;break;case"end":delete i[t],--o;case"drag":c=u(n,t),s=o}ih(new tg(f,e,h,t,s,c[0]+p,c[1]+d,c[0]-r[0],c[1]-r[1],v),v.apply,v,[e,a,l])}}var t=ng,n=rg,r=ig,i={},s=Vo("start","drag","end"),o=0,u,a;return f.filter=function(e){return arguments.length?(t=typeof e=="function"?e:eg(!!e),f):t},f.container=function(e){return arguments.length?(n=typeof e=="function"?e:eg(e),f):n},f.subject=function(e){return arguments.length?(r=typeof e=="function"?e:eg(e),f):r},f.on=function(){var e=s.on.apply(s,arguments);return e===s?f:e},f},og=function(e){return function(){return e}};fg.prototype={constructor:fg,insert:function(e,t){var n,r,i;if(e){t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=pg(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);t.L=t.R=null,t.U=n,t.C=!0,e=t;while(n&&n.C)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(cg(this,n),e=n,n=e.U),n.C=!1,r.C=!0,hg(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(hg(this,n),e=n,n=e.U),n.C=!1,r.C=!0,cg(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,r=e.L,i=e.R,s,o;r?i?s=pg(i):s=r:s=i,t?t.L===e?t.L=s:t.R=s:this._=s,r&&i?(o=s.C,s.C=e.C,s.L=r,r.U=s,s!==i?(t=s.U,s.U=e.U,e=s.R,t.L=e,s.R=i,i.U=s):(s.U=t,t=s,e=s.R)):(o=e.C,e=s),e&&(e.U=t);if(o)return;if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){n=t.R,n.C&&(n.C=!1,t.C=!0,cg(this,t),n=t.R);if(n.L&&n.L.C||n.R&&n.R.C){if(!n.R||!n.R.C)n.L.C=!1,n.C=!0,hg(this,n),n=t.R;n.C=t.C,t.C=n.R.C=!1,cg(this,t),e=this._;break}}else{n=t.L,n.C&&(n.C=!1,t.C=!0,hg(this,t),n=t.L);if(n.L&&n.L.C||n.R&&n.R.C){if(!n.L||!n.L.C)n.R.C=!1,n.C=!0,cg(this,n),n=t.L;n.C=t.C,t.C=n.L.C=!1,hg(this,t),e=this._;break}}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}};var Cg=[],kg,Mg=[],Ig=1e-6,qg=1e-12,Rg,Ug,zg,Wg;$g.prototype={constructor:$g,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return Sg(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){var i=n.site,s=n.halfedges,o=-1,u=s.length,a,f=t[s[u-1]],l=f.left===i?f.right:f.left;while(++o<u)a=l,f=t[s[o]],l=f.left===i?f.right:f.left,a&&l&&r<a.index&&r<l.index&&Xg(i,a,l)<0&&e.push([i.data,a.data,l.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){var r=this,i,s=r._found||0,o=r.cells[s]||r.cells[s=0],u=e-o.site[0],a=t-o.site[1],f=u*u+a*a;do o=r.cells[i=s],s=null,o.halfedges.forEach(function(n){var i=r.edges[n],u=i.left;if((u===o.site||!u)&&!(u=i.right))return;var a=e-u[0],l=t-u[1],c=a*a+l*l;c<f&&(f=c,s=u.index)});while(s!==null);return r._found=i,n==null||f<=n*n?o.site:null}};var Jg=function(){function r(r){return new $g(r.map(function(n,i){var s=[Math.round(e(n,i,r)/Ig)*Ig,Math.round(t(n,i,r)/Ig)*Ig];return s.index=i,s.data=n,s}),n)}var e=ug,t=ag,n=null;return r.polygons=function(e){return r(e).polygons()},r.links=function(e){return r(e).links()},r.triangles=function(e){return r(e).triangles()},r.x=function(t){return arguments.length?(e=typeof t=="function"?t:og(+t),r):e},r.y=function(e){return arguments.length?(t=typeof e=="function"?e:og(+e),r):t},r.extent=function(e){return arguments.length?(n=e==null?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(e){return arguments.length?(n=e==null?null:[[0,0],[+e[0],+e[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},Kg=function(e){return function(){return e}};Gg.prototype={constructor:Gg,scale:function(e){return e===1?this:new Gg(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Gg(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Yg=new Gg(1,0,0);Zg.prototype=Gg.prototype;var ty=function(){e.event.preventDefault(),e.event.stopImmediatePropagation()},sy=function(){function m(e){e.on("wheel.zoom",T).on("mousedown.zoom",N).on("dblclick.zoom",C).on("touchstart.zoom",k).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",iy)}function g(e,t){return t=Math.max(r,Math.min(i,t)),t===e.k?e:new Gg(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new Gg(e.k,r,i)}function b(e,t){var n=Math.min(0,e.invertX(t[0][0])-s)||Math.max(0,e.invertX(t[1][0])-o),r=Math.min(0,e.invertY(t[0][1])-u)||Math.max(0,e.invertY(t[1][1])-a);return n||r?e.translate(n,r):e}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function E(e,t,r){e.on("start.zoom",function(){S(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).end()}).tween("zoom",function(){var e=this,i=arguments,s=S(e,i),o=n.apply(e,i),u=r||w(o),a=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),f=e.__zoom,l=typeof t=="function"?t.apply(e,i):t,c=Do(f.invert(u).concat(a/f.k),l.invert(u).concat(a/l.k));return function(e){if(e===1)e=l;else{var t=c(e),n=a/t[2];e=new Gg(n,u[0]-t[0]*n,u[1]-t[1]*n)}s.zoom(null,e)}})}function S(e,t){for(var n=0,r=l.length,i;n<r;++n)if((i=l[n]).that===e)return i;return new x(e,t)}function x(e,t){this.that=e,this.args=t,this.index=-1,this.active=0,this.extent=n.apply(e,t)}function T(){function a(){n.wheel=null,n.end()}if(!t.apply(this,arguments))return;var n=S(this,arguments),s=this.__zoom,o=Math.max(r,Math.min(i,s.k*Math.pow(2,-e.event.deltaY*(e.event.deltaMode?120:1)/500))),u=uh(this);if(n.wheel){if(n.mouse[0][0]!==u[0]||n.mouse[0][1]!==u[1])n.mouse[1]=s.invert(n.mouse[0]=u);clearTimeout(n.wheel)}else{if(s.k===o)return;n.mouse=[u,s.invert(u)],Jp(this),n.start()}ty(),n.wheel=setTimeout(a,v),n.zoom("mouse",b(y(g(s,o),n.mouse[0],n.mouse[1]),n.extent))}function N(){function s(){ty(),n.moved=!0,n.zoom("mouse",b(y(n.that.__zoom,n.mouse[0]=uh(n.that),n.mouse[1]),n.extent))}function o(){r.on("mousemove.zoom mouseup.zoom",null),Zm(e.event.view,n.moved),ty(),n.end()}if(p||!t.apply(this,arguments))return;var n=S(this,arguments),r=Op(e.event.view).on("mousemove.zoom",s,!0).on("mouseup.zoom",o,!0),i=uh(this);Ym(e.event.view),ey(),n.mouse=[i,this.__zoom.invert(i)],Jp(this),n.start()}function C(){if(!t.apply(this,arguments))return;var r=this.__zoom,i=uh(this),s=r.invert(i),o=r.k*(e.event.shiftKey?.5:2),u=b(y(g(r,o),i,s),n.apply(this,arguments));ty(),f>0?Op(this).transition().duration(f).call(E,u,i):Op(this).call(m.transform,u)}function k(){if(!t.apply(this,arguments))return;var n=S(this,arguments),r=e.event.changedTouches,i=r.length,s,o,u;ey();for(s=0;s<i;++s)o=r[s],u=_p(this,r,o.identifier),u=[u,this.__zoom.invert(u),o.identifier],n.touch0?n.touch1||(n.touch1=u):n.touch0=u;if(h){h=clearTimeout(h);if(!n.touch1)return n.end(),C.apply(this,arguments)}e.event.touches.length===i&&(h=setTimeout(function(){h=null},d),Jp(this),n.start())}function L(){var t=S(this,arguments),n=e.event.changedTouches,r=n.length,i,s,o,u;ty(),h&&(h=clearTimeout(h));for(i=0;i<r;++i)s=n[i],o=_p(this,n,s.identifier),t.touch0&&t.touch0[2]===s.identifier?t.touch0[0]=o:t.touch1&&t.touch1[2]===s.identifier&&(t.touch1[0]=o);s=t.that.__zoom;if(t.touch1){var a=t.touch0[0],f=t.touch0[1],l=t.touch1[0],c=t.touch1[1],p=(p=l[0]-a[0])*p+(p=l[1]-a[1])*p,d=(d=c[0]-f[0])*d+(d=c[1]-f[1])*d;s=g(s,Math.sqrt(p/d)),o=[(a[0]+l[0])/2,(a[1]+l[1])/2],u=[(f[0]+c[0])/2,(f[1]+c[1])/2]}else{if(!t.touch0)return;o=t.touch0[0],u=t.touch0[1]}t.zoom("touch",b(y(s,o,u),t.extent))}function A(){var t=S(this,arguments),n=e.event.changedTouches,r=n.length,i,s;ey(),p&&clearTimeout(p),p=setTimeout(function(){p=null},d);for(i=0;i<r;++i)s=n[i],t.touch0&&t.touch0[2]===s.identifier?delete t.touch0:t.touch1&&t.touch1[2]===s.identifier&&delete t.touch1;t.touch1&&!t.touch0&&(t.touch0=t.touch1,delete t.touch1),t.touch0||t.end()}var t=ny,n=ry,r=0,i=Infinity,s=-i,o=i,u=s,a=o,f=250,l=[],c=Vo("start","zoom","end"),h,p,d=500,v=150;return m.transform=function(e,t){var n=e.selection?e.selection():e;n.property("__zoom",iy),e!==n?E(e,t):n.interrupt().each(function(){S(this,arguments).start().zoom(null,typeof t=="function"?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t){m.scaleTo(e,function(){var e=this.__zoom.k,n=typeof t=="function"?t.apply(this,arguments):t;return e*n})},m.scaleTo=function(e,t){m.transform(e,function(){var e=n.apply(this,arguments),r=this.__zoom,i=w(e),s=r.invert(i),o=typeof t=="function"?t.apply(this,arguments):t;return b(y(g(r,o),i,s),e)})},m.translateBy=function(e,t,r){m.transform(e,function(){return b(this.__zoom.translate(typeof t=="function"?t.apply(this,arguments):t,typeof r=="function"?r.apply(this,arguments):r),n.apply(this,arguments))})},x.prototype={start:function(){return++this.active===1&&(this.index=l.push(this)-1,this.emit("start")),this},zoom:function(e,t){return this.mouse&&e!=="mouse"&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&e!=="touch"&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&e!=="touch"&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return--this.active===0&&(l.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){ih(new Qg(m,e,this.that.__zoom),c.apply,c,[e,this.that,this.args])}},m.filter=function(e){return arguments.length?(t=typeof e=="function"?e:Kg(!!e),m):t},m.extent=function(e){return arguments.length?(n=typeof e=="function"?e:Kg([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):n},m.scaleExtent=function(e){return arguments.length?(r=+e[0],i=+e[1],m):[r,i]},m.translateExtent=function(e){return arguments.length?(s=+e[0][0],o=+e[1][0],u=+e[0][1],a=+e[1][1],m):[[s,u],[o,a]]},m.duration=function(e){return arguments.length?(f=+e,m):f},m.on=function(){var e=c.on.apply(c,arguments);return e===c?m:e},m},oy=function(e){return function(){return e}},uy=function(e,t,n){this.target=e,this.type=t,this.selection=n},fy=function(){e.event.preventDefault(),e.event.stopImmediatePropagation()},ly={name:"drag"},cy={name:"space"},hy={name:"handle"},py={name:"center"},dy={name:"x",handles:["e","w"].map(Sy),input:function(e,t){return e&&[[e[0],t[0][1]],[e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},vy={name:"y",handles:["n","s"].map(Sy),input:function(e,t){return e&&[[t[0][0],e[0]],[t[1][0],e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},my={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Sy),input:function(e){return e},output:function(e){return e}},gy={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},yy={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},by={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},wy={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ey={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},Oy=function(){return My(my)},_y=Math.cos,Dy=Math.sin,Py=Math.PI,Hy=Py/2,By=Py*2,jy=Math.max,Iy=function(){function i(i){var s=i.length,o=[],u=y(s),a=[],f=[],l=f.groups=new Array(s),c=new Array(s*s),h,p,d,v,m,g;h=0,m=-1;while(++m<s){p=0,g=-1;while(++g<s)p+=i[m][g];o.push(p),a.push(y(s)),h+=p}t&&u.sort(function(e,n){return t(o[e],o[n])}),n&&a.forEach(function(e,t){e.sort(function(e,r){return n(i[t][e],i[t][r])})}),h=jy(0,By-e*s)/h,v=h?e:By/s,p=0,m=-1;while(++m<s){d=p,g=-1;while(++g<s){var b=u[m],w=a[b][g],E=i[b][w],S=p,x=p+=E*h;c[w*s+b]={index:b,subindex:w,startAngle:S,endAngle:x,value:E}}l[b]={index:b,startAngle:d,endAngle:p,value:o[b]},p+=v}m=-1;while(++m<s){g=m-1;while(++g<s){var T=c[g*s+m],N=c[m*s+g];(T.value||N.value)&&f.push(T.value<N.value?{source:N,target:T}:{source:T,target:N})}}return r?f.sort(r):f}var e=0,t=null,n=null,r=null;return i.padAngle=function(t){return arguments.length?(e=jy(0,t),i):e},i.sortGroups=function(e){return arguments.length?(t=e,i):t},i.sortSubgroups=function(e){return arguments.length?(n=e,i):n},i.sortChords=function(e){return arguments.length?(e==null?r=null:(r=Fy(e))._=e,i):r&&r._},i},qy=Array.prototype.slice,Ry=function(e){return function(){return e}},$y=function(){function o(){var o,u=qy.call(arguments),a=e.apply(this,u),f=t.apply(this,u),l=+n.apply(this,(u[0]=a,u)),c=r.apply(this,u)-Hy,h=i.apply(this,u)-Hy,p=l*_y(c),d=l*Dy(c),v=+n.apply(this,(u[0]=f,u)),m=r.apply(this,u)-Hy,g=i.apply(this,u)-Hy;s||(s=o=pn()),s.moveTo(p,d),s.arc(0,0,l,c,h);if(c!==m||h!==g)s.quadraticCurveTo(0,0,v*_y(m),v*Dy(m)),s.arc(0,0,v,m,g);s.quadraticCurveTo(0,0,p,d),s.closePath();if(o)return s=null,o+""||null}var e=Uy,t=zy,n=Wy,r=Xy,i=Vy,s=null;return o.radius=function(e){return arguments.length?(n=typeof e=="function"?e:Ry(+e),o):n},o.startAngle=function(e){return arguments.length?(r=typeof e=="function"?e:Ry(+e),o):r},o.endAngle=function(e){return arguments.length?(i=typeof e=="function"?e:Ry(+e),o):i},o.source=function(t){return arguments.length?(e=t,o):e},o.target=function(e){return arguments.length?(t=e,o):t},o.context=function(e){return arguments.length?(s=e==null?null:e,o):s},o},Jy=function(){return new Ky};Ky.prototype={constructor:Ky,reset:function(){this.s=this.t=0},add:function(e){Gy(Qy,e,this.t),Gy(this,Qy.s,this.s),this.s?this.t+=Qy.t:this.s=Qy.t},valueOf:function(){return this.s}};var Qy=new Ky,Yy=1e-6,Zy=1e-12,eb=Math.PI,tb=eb/2,nb=eb/4,rb=eb*2,ib=180/eb,sb=eb/180,ob=Math.abs,ub=Math.atan,ab=Math.atan2,fb=Math.cos,lb=Math.ceil,cb=Math.exp,hb=Math.log,pb=Math.pow,db=Math.sin,vb=Math.sign||function(e){return e>0?1:e<0?-1:0},mb=Math.sqrt,gb=Math.tan,xb={Feature:function(e,t){Sb(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,r=-1,i=n.length;while(++r<i)Sb(n[r].geometry,t)}},Tb={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Nb(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Nb(n[r],t,0)},Polygon:function(e,t){Cb(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Cb(n[r],t)},GeometryCollection:function(e,t){var n=e.geometries,r=-1,i=n.length;while(++r<i)Sb(n[r],t)}},kb=function(e,t){e&&xb.hasOwnProperty(e.type)?xb[e.type](e,t):Sb(e,t)},Lb=Jy(),Ab=Jy(),Ob,Mb,_b,Db,Pb,Hb={point:Eb,lineStart:Eb,lineEnd:Eb,polygonStart:function(){Lb.reset(),Hb.lineStart=Bb,Hb.lineEnd=jb},polygonEnd:function(){var e=+Lb;Ab.add(e<0?rb+e:e),this.lineStart=this.lineEnd=this.point=Eb},sphere:function(){Ab.add(rb)}},qb=function(e){return Ab.reset(),kb(e,Hb),Ab*2},Jb,Kb,Qb,Gb,Yb,Zb,ew,tw,nw=Jy(),rw,iw,sw={point:ow,lineStart:aw,lineEnd:fw,polygonStart:function(){sw.point=lw,sw.lineStart=cw,sw.lineEnd=hw,nw.reset(),Hb.polygonStart()},polygonEnd:function(){Hb.polygonEnd(),sw.point=ow,sw.lineStart=aw,sw.lineEnd=fw,Lb<0?(Jb=-(Qb=180),Kb=-(Gb=90)):nw>Yy?Gb=90:nw<-Yy&&(Kb=-90),iw[0]=Jb,iw[1]=Qb}},mw=function(e){var t,n,r,i,s,o,u;Gb=Qb=-(Jb=Kb=Infinity),rw=[],kb(e,sw);if(n=rw.length){rw.sort(dw);for(t=1,r=rw[0],s=[r];t<n;++t)i=rw[t],vw(r,i[0])||vw(r,i[1])?(pw(r[0],i[1])>pw(r[0],r[1])&&(r[1]=i[1]),pw(i[0],r[1])>pw(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-Infinity,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(u=pw(r[1],i[0]))>o&&(o=u,Jb=i[0],Qb=r[1])}return rw=iw=null,Jb===Infinity||Kb===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Jb,Kb],[Qb,Gb]]},gw,yw,bw,ww,Ew,Sw,xw,Tw,Nw,Cw,kw,Lw,Aw,Ow,Mw,_w,Dw={sphere:Eb,point:Pw,lineStart:Bw,lineEnd:Iw,polygonStart:function(){Dw.lineStart=qw,Dw.lineEnd=Rw},polygonEnd:function(){Dw.lineStart=Bw,Dw.lineEnd=Iw}},Ww=function(e){gw=yw=bw=ww=Ew=Sw=xw=Tw=Nw=Cw=kw=0,kb(e,Dw);var t=Nw,n=Cw,r=kw,i=t*t+n*n+r*r;if(i<Zy){t=Sw,n=xw,r=Tw,yw<Yy&&(t=bw,n=ww,r=Ew),i=t*t+n*n+r*r;if(i<Zy)return[NaN,NaN]}return[ab(n,t)*ib,bb(r/mb(i))*ib]},Xw=function(e){return function(){return e}},Vw=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n};$w.invert=$w;var Yw=function(e){function t(t){return t=e(t[0]*sb,t[1]*sb),t[0]*=ib,t[1]*=ib,t}return e=Jw(e[0]*sb,e[1]*sb,e.length>2?e[2]*sb:0),t.invert=function(t){return t=e.invert(t[0]*sb,t[1]*sb),t[0]*=ib,t[1]*=ib,t},t},tE=function(){function o(e,t){r.push(e=i(e,t)),e[0]*=ib,e[1]*=ib}function u(){var o=e.apply(this,arguments),u=t.apply(this,arguments)*sb,a=n.apply(this,arguments)*sb;return r=[],i=Jw(-o[0]*sb,-o[1]*sb,0).invert,Zw(s,u,a,1),o={type:"Polygon",coordinates:[r]},r=i=null,o}var e=Xw([0,0]),t=Xw(90),n=Xw(6),r,i,s={point:o};return u.center=function(t){return arguments.length?(e=typeof t=="function"?t:Xw([+t[0],+t[1]]),u):e},u.radius=function(e){return arguments.length?(t=typeof e=="function"?e:Xw(+e),u):t},u.precision=function(e){return arguments.length?(n=typeof e=="function"?e:Xw(+e),u):n},u},nE=function(){var e=[],t;return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Eb,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},rE=function(e,t,n,r,i,s){var o=e[0],u=e[1],a=t[0],f=t[1],l=0,c=1,h=a-o,p=f-u,d;d=n-o;if(!h&&d>0)return;d/=h;if(h<0){if(d<l)return;d<c&&(c=d)}else if(h>0){if(d>c)return;d>l&&(l=d)}d=i-o;if(!h&&d<0)return;d/=h;if(h<0){if(d>c)return;d>l&&(l=d)}else if(h>0){if(d<l)return;d<c&&(c=d)}d=r-u;if(!p&&d>0)return;d/=p;if(p<0){if(d<l)return;d<c&&(c=d)}else if(p>0){if(d>c)return;d>l&&(l=d)}d=s-u;if(!p&&d<0)return;d/=p;if(p<0){if(d>c)return;d>l&&(l=d)}else if(p>0){if(d<l)return;d<c&&(c=d)}return l>0&&(e[0]=o+l*h,e[1]=u+l*p),c<1&&(t[0]=o+c*h,t[1]=u+c*p),!0},iE=function(e,t){return ob(e[0]-t[0])<Yy&&ob(e[1]-t[1])<Yy},oE=function(e,t,n,r,i){var s=[],o=[],u,a;e.forEach(function(e){if((t=e.length-1)<=0)return;var t,n=e[0],r=e[t],a;if(iE(n,r)){i.lineStart();for(u=0;u<t;++u)i.point((n=e[u])[0],n[1]);i.lineEnd();return}s.push(a=new sE(n,e,null,!0)),o.push(a.o=new sE(n,null,a,!1)),s.push(a=new sE(r,e,null,!1)),o.push(a.o=new sE(r,null,a,!0))});if(!s.length)return;o.sort(t),uE(s),uE(o);for(u=0,a=o.length;u<a;++u)o[u].e=n=!n;var f=s[0],l,c;for(;;){var h=f,p=!0;while(h.v)if((h=h.n)===f)return;l=h.z,i.lineStart();do{h.v=h.o.v=!0;if(h.e){if(p)for(u=0,a=l.length;u<a;++u)i.point((c=l[u])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p){l=h.p.z;for(u=l.length-1;u>=0;--u)i.point((c=l[u])[0],c[1])}else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,l=h.z,p=!p}while(!h.v);i.lineEnd()}},aE=1e9,fE=-aE,cE=function(){var e=0,t=0,n=960,r=500,i,s,o;return o={stream:function(o){return i&&s===o?i:i=lE(e,t,n,r)(s=o)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1],i=s=null,o):[[e,t],[n,r]]}}},hE=Jy(),pE,dE,vE,mE={sphere:Eb,point:Eb,lineStart:gE,lineEnd:Eb,polygonStart:Eb,polygonEnd:Eb},EE=function(e){return hE.reset(),kb(e,mE),+hE},SE=[null,null],xE={type:"LineString",coordinates:SE},TE=function(e,t){return SE[0]=e,SE[1]=t,EE(xE)},AE=function(e,t){var n=e[0]*sb,r=e[1]*sb,i=t[0]*sb,s=t[1]*sb,o=fb(r),u=db(r),a=fb(s),f=db(s),l=o*fb(n),c=o*db(n),h=a*fb(i),p=a*db(i),d=2*bb(mb(wb(s-r)+o*a*wb(i-n))),v=db(d),m=d?function(e){var t=db(e*=d)/v,n=db(d-e)/v,r=n*l+t*h,i=n*c+t*p,s=n*u+t*f;return[ab(i,r)*ib,ab(s,mb(r*r+i*i))*ib]}:function(){return[n*ib,r*ib]};return m.distance=d,m},OE=function(e){return e},ME=Jy(),_E=Jy(),DE,PE,HE,BE,jE={point:Eb,lineStart:Eb,lineEnd:Eb,polygonStart:function(){jE.lineStart=FE,jE.lineEnd=RE},polygonEnd:function(){jE.lineStart=jE.lineEnd=jE.point=Eb,ME.add(ob(_E)),_E.reset()},result:function(){var e=ME/2;return ME.reset(),e}},UE=Infinity,zE=UE,WE=-UE,XE=WE,VE={point:$E,lineStart:Eb,lineEnd:Eb,polygonStart:Eb,polygonEnd:Eb,result:function(){var e=[[UE,zE],[WE,XE]];return WE=XE=-(zE=UE=Infinity),e}},JE=0,KE=0,QE=0,GE=0,YE=0,ZE=0,eS=0,tS=0,nS=0,rS,iS,sS,oS,uS={point:aS,lineStart:fS,lineEnd:hS,polygonStart:function(){uS.lineStart=pS,uS.lineEnd=dS},polygonEnd:function(){uS.point=aS,uS.lineStart=fS,uS.lineEnd=hS},result:function(){var e=nS?[eS/nS,tS/nS]:ZE?[GE/ZE,YE/ZE]:QE?[JE/QE,KE/QE]:[NaN,NaN];return JE=KE=QE=GE=YE=ZE=eS=tS=nS=0,e}};gS.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,rb)}},result:Eb},yS.prototype={_circle:bS(4.5),pointRadius:function(e){return this._circle=bS(e),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}}};var wS=function(e,t){function s(e){return e&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),kb(e,r(i))),i.result()}var n=4.5,r,i;return s.area=function(e){return kb(e,r(jE)),jE.result()},s.bounds=function(e){return kb(e,r(VE)),VE.result()},s.centroid=function(e){return kb(e,r(uS)),uS.result()},s.projection=function(t){return arguments.length?(r=(e=t)==null?OE:t.stream,s):e},s.context=function(e){return arguments.length?(i=(t=e)==null?new yS:new gS(e),typeof n!="function"&&i.pointRadius(n),s):t},s.pointRadius=function(e){return arguments.length?(n=typeof e=="function"?e:(i.pointRadius(+e),+e),s):n},s.projection(e).context(t)},ES=Jy(),SS=function(e,t){var n=t[0],r=t[1],i=[db(n),-fb(n),0],s=0,o=0;ES.reset();for(var u=0,a=e.length;u<a;++u){if(!(l=(f=e[u]).length))continue;var f,l,c=f[l-1],h=c[0],p=c[1]/2+nb,d=db(p),v=fb(p);for(var m=0;m<l;++m,h=y,d=w,v=E,c=g){var g=f[m],y=g[0],b=g[1]/2+nb,w=db(b),E=fb(b),S=y-h,x=S>=0?1:-1,T=x*S,N=T>eb,C=d*w;ES.add(ab(C*x*db(T),v*E+C*fb(T))),s+=N?S+x*rb:S;if(N^h>=n^y>=n){var k=Wb(Ub(c),Ub(g));$b(k);var L=Wb(i,k);$b(L);var A=(N^S>=0?-1:1)*bb(L[2]);if(r>A||r===A&&(k[0]||k[1]))o+=N^S>=0?1:-1}}}return(s<-Yy||s<Yy&&ES<-Yy)^o&1},xS=function(e,t,n,r){return function(i,s){function v(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&s.point(t,n)}function m(e,t){var n=i(e,t);o.point(n[0],n[1])}function g(){d.point=m,o.lineStart()}function y(){d.point=v,o.lineEnd()}function b(e,t){p.push([e,t]);var n=i(e,t);f.point(n[0],n[1])}function w(){f.lineStart(),p=[]}function E(){b(p[0][0],p[0][1]),f.lineEnd();var e=f.clean(),t=a.result(),n,r=t.length,i,o,u;p.pop(),c.push(p),p=null;if(!r)return;if(e&1){o=t[0];if((i=o.length-1)>0){l||(s.polygonStart(),l=!0),s.lineStart();for(n=0;n<i;++n)s.point((u=o[n])[0],u[1]);s.lineEnd()}return}r>1&&e&2&&t.push(t.pop().concat(t.shift())),h.push(t.filter(TS))}var o=t(s),u=i.invert(r[0],r[1]),a=nE(),f=t(a),l=!1,c,h,p,d={point:v,lineStart:g,lineEnd:y,polygonStart:function(){d.point=b,d.lineStart=w,d.lineEnd=E,h=[],c=[]},polygonEnd:function(){d.point=v,d.lineStart=g,d.lineEnd=y,h=_(h);var e=SS(c,u);h.length?(l||(s.polygonStart(),l=!0),oE(h,NS,e,n,s)):e&&(l||(s.polygonStart(),l=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),l&&(s.polygonEnd(),l=!1),h=c=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};return d}},CS=xS(function(){return!0},kS,AS,[-eb,-tb]),OS=function(e,t){function s(n,r,i,s){Zw(s,e,t,i,n,r)}function o(e,t){return fb(e)*fb(t)>n}function u(e){var t,n,s,u,l;return{lineStart:function(){u=s=!1,l=1},point:function(c,h){var p=[c,h],d,v=o(c,h),m=r?v?0:f(c,h):v?f(c+(c<0?eb:-eb),h):0;!t&&(u=s=v)&&e.lineStart();if(v!==s){d=a(t,p);if(iE(t,d)||iE(p,d))p[0]+=Yy,p[1]+=Yy,v=o(p[0],p[1])}if(v!==s)l=0,v?(e.lineStart(),d=a(p,t),e.point(d[0],d[1])):(d=a(t,p),e.point(d[0],d[1]),e.lineEnd()),t=d;else if(i&&t&&r^v){var g;!(m&n)&&(g=a(p,t,!0))&&(l=0,r?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}v&&(!t||!iE(t,p))&&e.point(p[0],p[1]),t=p,s=v,n=m},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return l|(u&&s)<<1}}}function a(e,t,r){var i=Ub(e),s=Ub(t),o=[1,0,0],u=Wb(i,s),a=zb(u,u),f=u[0],l=a-f*f;if(!l)return!r&&e;var c=n*a/l,h=-n*f/l,p=Wb(o,u),d=Vb(o,c),v=Vb(u,h);Xb(d,v);var m=p,g=zb(d,m),y=zb(m,m),b=g*g-y*(zb(d,d)-1);if(b<0)return;var w=mb(b),E=Vb(m,(-g-w)/y);Xb(E,d),E=Rb(E);if(!r)return E;var S=e[0],x=t[0],T=e[1],N=t[1],C;x<S&&(C=S,S=x,x=C);var k=x-S,L=ob(k-eb)<Yy,A=L||k<Yy;!L&&N<T&&(C=T,T=N,N=C);if(A?L?T+N>0^E[1]<(ob(E[0]-S)<Yy?T:N):T<=E[1]&&E[1]<=N:k>eb^(S<=E[0]&&E[0]<=x)){var O=Vb(m,(-g+w)/y);return Xb(O,d),[E,Rb(O)]}}function f(t,n){var i=r?e:eb-e,s=0;return t<-i?s|=1:t>i&&(s|=2),n<-i?s|=4:n>i&&(s|=8),s}var n=fb(e),r=n>0,i=ob(n)>Yy;return xS(o,u,s,r?[0,-e]:[-eb,e-eb])},MS=function(e){return{stream:_S(e)}};DS.prototype={constructor:DS,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var BS=16,jS=fb(30*sb),FS=function(e,t){return+t?qS(e,t):IS(e)},RS=_S({point:function(e,t){this.stream.point(e*sb,t*sb)}}),$S=function(){return WS(VS).scale(155.424).center([0,33.6442])},JS=function(){return $S().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-0.6,38.7])},QS=function(){function l(e){var t=e[0],n=e[1];return a=null,(r.point(t,n),a)||(s.point(t,n),a)||(u.point(t,n),a)}function c(){return e=t=null,l}var e,t,n=JS(),r,i=$S().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=$S().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,a,f={point:function(e,t){a=[e,t]}};return l.invert=function(e){var t=n.scale(),r=n.translate(),s=(e[0]-r[0])/t,u=(e[1]-r[1])/t;return(u>=.12&&u<.234&&s>=-0.425&&s<-0.214?i:u>=.166&&u<.234&&s>=-0.214&&s<-0.115?o:n).invert(e)},l.stream=function(r){return e&&t===r?e:e=KS([n.stream(t=r),i.stream(r),o.stream(r)])},l.precision=function(e){return arguments.length?(n.precision(e),i.precision(e),o.precision(e),c()):n.precision()},l.scale=function(e){return arguments.length?(n.scale(e),i.scale(e*.35),o.scale(e),l.translate(n.translate())):n.scale()},l.translate=function(e){if(!arguments.length)return n.translate();var t=n.scale(),a=+e[0],l=+e[1];return r=n.translate(e).clipExtent([[a-.455*t,l-.238*t],[a+.455*t,l+.238*t]]).stream(f),s=i.translate([a-.307*t,l+.201*t]).clipExtent([[a-.425*t+Yy,l+.12*t+Yy],[a-.214*t-Yy,l+.234*t-Yy]]).stream(f),u=o.translate([a-.205*t,l+.212*t]).clipExtent([[a-.214*t+Yy,l+.166*t+Yy],[a-.115*t-Yy,l+.234*t-Yy]]).stream(f),c()},l.fitExtent=function(e,t){return PS(l,e,t)},l.fitSize=function(e,t){return HS(l,e,t)},l.scale(1070)},ZS=GS(function(e){return mb(2/(1+e))});ZS.invert=YS(function(e){return 2*bb(e/2)});var ex=function(){return US(ZS).scale(124.75).clipAngle(179.999)},tx=GS(function(e){return(e=yb(e))&&e/db(e)});tx.invert=YS(function(e){return e});var nx=function(){return US(tx).scale(79.4188).clipAngle(179.999)};rx.invert=function(e,t){return[e,2*ub(cb(t))-tb]};var ix=function(){return sx(rx).scale(961/rb)},ax=function(){return WS(ux).scale(109.5).parallels([30,30])};fx.invert=fx;var lx=function(){return US(fx).scale(152.63)},hx=function(){return WS(cx).scale(131.154).center([0,13.9389])};px.invert=YS(ub);var dx=function(){return US(px).scale(144.049).clipAngle(60)},mx=function(){function h(){return f=l=null,c}var e=1,t=0,n=0,r=OE,i=null,s,o,u,a=OE,f,l,c;return c={stream:function(e){return f&&l===e?f:f=r(a(l=e))},clipExtent:function(e){return arguments.length?(a=e==null?(i=s=o=u=null,OE):lE(i=+e[0][0],s=+e[0][1],o=+e[1][0],u=+e[1][1]),h()):i==null?null:[[i,s],[o,u]]},scale:function(i){return arguments.length?(r=vx(e=+i,t,n),h()):e},translate:function(i){return arguments.length?(r=vx(e,t=+i[0],n=+i[1]),h()):[t,n]},fitExtent:function(e,t){return PS(c,e,t)},fitSize:function(e,t){return HS(c,e,t)}}};gx.invert=YS(bb);var yx=function(){return US(gx).scale(249.5).clipAngle(90+Yy)};bx.invert=YS(function(e){return 2*ub(e)});var wx=function(){return US(bx).scale(250).clipAngle(142)};Ex.invert=function(e,t){return[-t,2*ub(cb(e))-tb]};var Sx=function(){var e=sx(Ex),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)};e.version=t,e.bisect=o,e.bisectRight=o,e.bisectLeft=u,e.ascending=n,e.bisector=r,e.descending=a,e.deviation=c,e.extent=h,e.histogram=N,e.thresholdFreedmanDiaconis=k,e.thresholdScott=L,e.thresholdSturges=T,e.max=A,e.mean=O,e.median=M,e.merge=_,e.min=D,e.pairs=P,e.permute=H,e.quantile=C,e.range=y,e.scan=B,e.shuffle=j,e.sum=F,e.ticks=S,e.tickStep=x,e.transpose=I,e.variance=l,e.zip=R,e.entries=tt,e.keys=Z,e.values=et,e.map=W,e.set=Y,e.nest=X,e.randomUniform=nt,e.randomNormal=rt,e.randomLogNormal=it,e.randomBates=ot,e.randomIrwinHall=st,e.randomExponential=ut,e.easeLinear=at,e.easeQuad=ct,e.easeQuadIn=ft,e.easeQuadOut=lt,e.easeQuadInOut=ct,e.easeCubic=dt,e.easeCubicIn=ht,e.easeCubicOut=pt,e.easeCubicInOut=dt,e.easePoly=yt,e.easePolyIn=mt,e.easePolyOut=gt,e.easePolyInOut=yt,e.easeSin=xt,e.easeSinIn=Et,e.easeSinOut=St,e.easeSinInOut=xt,e.easeExp=Ct,e.easeExpIn=Tt,e.easeExpOut=Nt,e.easeExpInOut=Ct,e.easeCircle=At,e.easeCircleIn=kt,e.easeCircleOut=Lt,e.easeCircleInOut=At,e.easeBounce=Rt,e.easeBounceIn=qt,e.easeBounceOut=Rt,e.easeBounceInOut=Ut,e.easeBack=Vt,e.easeBackIn=Wt,e.easeBackOut=Xt,e.easeBackInOut=Vt,e.easeElastic=Gt,e.easeElasticIn=Qt,e.easeElasticOut=Gt,e.easeElasticInOut=Yt,e.polygonArea=Zt,e.polygonCentroid=en,e.polygonHull=sn,e.polygonContains=on,e.polygonLength=un,e.path=pn,e.quadtree=_n,e.queue=Wn,e.arc=ir,e.area=lr,e.line=fr,e.pie=pr,e.radialArea=br,e.radialLine=yr,e.symbol=Ir,e.symbols=Fr,e.symbolCircle=wr,e.symbolCross=Er,e.symbolDiamond=Tr,e.symbolSquare=Or,e.symbolStar=Ar,e.symbolTriangle=_r,e.symbolWye=jr,e.curveBasisClosed=Xr,e.curveBasisOpen=$r,e.curveBasis=zr,e.curveBundle=Kr,e.curveCardinalClosed=ei,e.curveCardinalOpen=ni,e.curveCardinal=Yr,e.curveCatmullRomClosed=ui,e.curveCatmullRomOpen=fi,e.curveCatmullRom=si,e.curveLinearClosed=ci,e.curveLinear=or,e.curveMonotoneX=bi,e.curveMonotoneY=wi,e.curveNatural=xi,e.curveStep=Ni,e.curveStepAfter=ki,e.curveStepBefore=Ci,e.stack=_i,e.stackOffsetExpand=Di,e.stackOffsetNone=Ai,e.stackOffsetSilhouette=Pi,e.stackOffsetWiggle=Hi,e.stackOrderAscending=Bi,e.stackOrderDescending=Fi,e.stackOrderInsideOut=Ii,e.stackOrderNone=Oi,e.stackOrderReverse=qi,e.color=ts,e.rgb=ss,e.hsl=fs,e.lab=xs,e.hcl=Os,e.cubehelix=Rs,e.interpolate=co,e.interpolateArray=no,e.interpolateDate=ro,e.interpolateNumber=io,e.interpolateObject=so,e.interpolateRound=ho,e.interpolateString=lo,e.interpolateTransformCss=To,e.interpolateTransformSvg=No,e.interpolateZoom=Do,e.interpolateRgb=Ys,e.interpolateRgbBasis=eo,e.interpolateRgbBasisClosed=to,e.interpolateHsl=Ho,e.interpolateHslLong=Bo,e.interpolateLab=jo,e.interpolateHcl=Io,e.interpolateHclLong=qo,e.interpolateCubehelix=Uo,e.interpolateCubehelixLong=zo,e.interpolateBasis=Ws,e.interpolateBasisClosed=Xs,e.quantize=Wo,e.dispatch=Vo,e.dsvFormat=eu,e.csvParse=nu,e.csvParseRows=ru,e.csvFormat=iu,e.csvFormatRows=su,e.tsvParse=uu,e.tsvParseRows=au,e.tsvFormat=fu,e.tsvFormatRows=lu,e.request=cu,e.html=vu,e.json=mu,e.text=gu,e.xml=yu,e.csv=Eu,e.tsv=Su,e.now=Pu,e.timer=ju,e.timerFlush=Fu,e.timeout=zu,e.interval=Wu,e.timeInterval=$u,e.timeMillisecond=Ju,e.timeMilliseconds=Ku,e.timeSecond=ta,e.timeSeconds=na,e.timeMinute=ra,e.timeMinutes=ia,e.timeHour=sa,e.timeHours=oa,e.timeDay=ua,e.timeDays=aa,e.timeWeek=la,e.timeWeeks=ga,e.timeSunday=la,e.timeSundays=ga,e.timeMonday=ca,e.timeMondays=ya,e.timeTuesday=ha,e.timeTuesdays=ba,e.timeWednesday=pa,e.timeWednesdays=wa,e.timeThursday=da,e.timeThursdays=Ea,e.timeFriday=va,e.timeFridays=Sa,e.timeSaturday=ma,e.timeSaturdays=xa,e.timeMonth=Ta,e.timeMonths=Na,e.timeYear=Ca,e.timeYears=ka,e.utcMillisecond=Ju,e.utcMilliseconds=Ku,e.utcSecond=ta,e.utcSeconds=na,e.utcMinute=La,e.utcMinutes=Aa,e.utcHour=Oa,e.utcHours=Ma,e.utcDay=_a,e.utcDays=Da,e.utcWeek=Ha,e.utcWeeks=Ua,e.utcSunday=Ha,e.utcSundays=Ua,e.utcMonday=Ba,e.utcMondays=za,e.utcTuesday=ja,e.utcTuesdays=Wa,e.utcWednesday=Fa,e.utcWednesdays=Xa,e.utcThursday=Ia,e.utcThursdays=Va,e.utcFriday=qa,e.utcFridays=$a,e.utcSaturday=Ra,e.utcSaturdays=Ja,e.utcMonth=Ka,e.utcMonths=Qa,e.utcYear=Ga,e.utcYears=Ya,e.formatLocale=pf,e.formatDefaultLocale=vf,e.formatSpecifier=ff,e.precisionFixed=mf,e.precisionPrefix=gf,e.precisionRound=yf,e.isoFormat=Tl,e.isoParse=Cl,e.timeFormatLocale=Sf,e.timeFormatDefaultLocale=El,e.scaleBand=_l,e.scalePoint=Pl,e.scaleIdentity=Jl,e.scaleLinear=$l,e.scaleLog=nc,e.scaleOrdinal=Ml,e.scaleImplicit=Ol,e.scalePow=ic,e.scaleSqrt=sc,e.scaleQuantile=oc,e.scaleQuantize=uc,e.scaleThreshold=ac,e.scaleTime=bc,e.scaleUtc=wc,e.schemeCategory10=Sc,e.schemeCategory20b=xc,e.schemeCategory20c=Tc,e.schemeCategory20=Nc,e.scaleSequential=Bc,e.interpolateCubehelixDefault=Cc,e.interpolateRainbow=Oc,e.interpolateWarm=kc,e.interpolateCool=Lc,e.interpolateViridis=_c,e.interpolateMagma=Dc,e.interpolateInferno=Pc,e.interpolatePlasma=Hc,e.creator=Uc,e.customEvent=ih,e.local=Wc,e.matcher=Kc,e.mouse=uh,e.namespace=Ic,e.namespaces=Fc,e.select=Op,e.selectAll=Mp,e.selection=Ap,e.selector=fh,e.selectorAll=hh,e.touch=_p,e.touches=Dp,e.window=Rh,e.active=Qd,e.interrupt=Jp,e.transition=zd,e.axisTop=fv,e.axisRight=lv,e.axisBottom=cv,e.axisLeft=hv,e.cluster=wv,e.hierarchy=_v,e.pack=rm,e.packSiblings=Gv,e.packEnclose=qv,e.partition=fm,e.stratify=vm,e.tree=Tm,e.treemap=Am,e.treemapBinary=Om,e.treemapDice=am,e.treemapSlice=Nm,e.treemapSliceDice=Mm,e.treemapSquarify=Lm,e.treemapResquarify=_m,e.forceCenter=Dm,e.forceCollide=Fm,e.forceLink=Rm,e.forceManyBody=$m,e.forceSimulation=Vm,e.forceX=Jm,e.forceY=Km,e.drag=sg,e.dragDisable=Ym,e.dragEnable=Zm,e.voronoi=Jg,e.zoom=sy,e.zoomIdentity=Yg,e.zoomTransform=Zg,e.brush=Oy,e.brushX=Ly,e.brushY=Ay,e.brushSelection=ky,e.chord=Iy,e.ribbon=$y,e.geoAlbers=JS,e.geoAlbersUsa=QS,e.geoArea=qb,e.geoAzimuthalEqualArea=ex,e.geoAzimuthalEqualAreaRaw=ZS,e.geoAzimuthalEquidistant=nx,e.geoAzimuthalEquidistantRaw=tx,e.geoBounds=mw,e.geoCentroid=Ww,e.geoCircle=tE,e.geoClipExtent=cE,e.geoConicConformal=ax,e.geoConicConformalRaw=ux,e.geoConicEqualArea=$S,e.geoConicEqualAreaRaw=VS,e.geoConicEquidistant=hx,e.geoConicEquidistantRaw=cx,e.geoDistance=TE,e.geoEquirectangular=lx,e.geoEquirectangularRaw=fx,e.geoGnomonic=dx,e.geoGnomonicRaw=px,e.geoGraticule=kE,e.geoGraticule10=LE,e.geoIdentity=mx,e.geoInterpolate=AE,e.geoLength=EE,e.geoMercator=ix,e.geoMercatorRaw=rx,e.geoOrthographic=yx,e.geoOrthographicRaw=gx,e.geoPath=wS,e.geoProjection=US,e.geoProjectionMutator=zS,e.geoRotation=Yw,e.geoStereographic=wx,e.geoStereographicRaw=bx,e.geoStream=kb,e.geoTransform=MS,e.geoTransverseMercator=Sx,e.geoTransverseMercatorRaw=Ex,Object.defineProperty(e,"__esModule",{value:!0})}),function(){function _t(t,n){if(t!==n){var r=t===null,i=t===e,s=t===t,o=n===null,u=n===e,a=n===n;if(t>n&&!o||!s||r&&!u&&a||i&&a)return 1;if(t<n&&!r||!a||o&&!i&&s||u&&s)return-1}return 0}function Dt(e,t,n){var r=e.length,i=n?r:-1;while(n?i--:++i<r)if(t(e[i],i,e))return i;return-1}function Pt(e,t,n){if(t!==t)return Xt(e,n);var r=n-1,i=e.length;while(++r<i)if(e[r]===t)return r;return-1}function Ht(e){return typeof e=="function"||!1}function Bt(e){return e==null?"":e+""}function jt(e,t){var n=-1,r=e.length;while(++n<r&&t.indexOf(e.charAt(n))>-1);return n}function Ft(e,t){var n=e.length;while(n--&&t.indexOf(e.charAt(n))>-1);return n}function It(e,t){return _t(e.criteria,t.criteria)||e.index-t.index}function qt(e,t,n){var r=-1,i=e.criteria,s=t.criteria,o=i.length,u=n.length;while(++r<o){var a=_t(i[r],s[r]);if(a){if(r>=u)return a;var f=n[r];return a*(f==="asc"||f===!0?1:-1)}}return e.index-t.index}function Rt(e){return bt[e]}function Ut(e){return wt[e]}function zt(e,t,n){return t?e=xt[e]:n&&(e=Tt[e]),"\\"+e}function Wt(e){return"\\"+Tt[e]}function Xt(e,t,n){var r=e.length,i=t+(n?0:-1);while(n?i--:++i<r){var s=e[i];if(s!==s)return i}return-1}function Vt(e){return!!e&&typeof e=="object"}function $t(e){return e<=160&&e>=9&&e<=13||e==32||e==160||e==5760||e==6158||e>=8192&&(e<=8202||e==8232||e==8233||e==8239||e==8287||e==12288||e==65279)}function Jt(e,t){var n=-1,r=e.length,i=-1,s=[];while(++n<r)e[n]===t&&(e[n]=b,s[++i]=n);return s}function Kt(e,t){var n,r=-1,i=e.length,s=-1,o=[];while(++r<i){var u=e[r],a=t?t(u,r,e):u;if(!r||n!==a)n=a,o[++s]=u}return o}function Qt(e){var t=-1,n=e.length;while(++t<n&&$t(e.charCodeAt(t)));return t}function Gt(e){var t=e.length;while(t--&&$t(e.charCodeAt(t)));return t}function Yt(e){return Et[e]}function Zt(C){function Hn(e){if(Vt(e)&&!mu(e)&&!(e instanceof In)){if(e instanceof jn)return e;if($t.call(e,"__chain__")&&$t.call(e,"__wrapped__"))return gs(e)}return new jn(e)}function Bn(){}function jn(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function In(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ln,this.__views__=[]}function qn(){var e=new In(this.__wrapped__);return e.__actions__=Yn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Yn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Yn(this.__views__),e}function Rn(){if(this.__filtered__){var e=new In(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Un(){var e=this.__wrapped__.value(),t=this.__dir__,n=mu(e),r=t<0,i=n?e.length:0,s=Ki(0,i,this.__views__),o=s.start,u=s.end,a=u-o,f=r?u:o-1,l=this.__iteratees__,c=l.length,h=0,p=xn(a,this.__takeCount__);if(!n||i<v||i==a&&p==a)return ii(e,this.__actions__);var d=[];e:while(a--&&h<p){f+=t;var y=-1,b=e[f];while(++y<c){var w=l[y],E=w.iteratee,S=w.type,x=E(b);if(S==g)b=x;else if(!x){if(S==m)continue e;break e}}d[h++]=b}return d}function zn(){this.__data__={}}function Wn(e){return this.has(e)&&delete this.__data__[e]}function Xn(t){return t=="__proto__"?e:this.__data__[t]}function Vn(e){return e!="__proto__"&&$t.call(this.__data__,e)}function $n(e,t){return e!="__proto__"&&(this.__data__[e]=t),this}function Jn(e){var t=e?e.length:0;this.data={hash:gn(null),set:new cn};while(t--)this.push(e[t])}function Kn(e,t){var n=e.data,r=typeof t=="string"||Nu(t)?n.set.has(t):n.hash[t];return r?0:-1}function Qn(e){var t=this.data;typeof e=="string"||Nu(e)?t.set.add(e):t.hash[e]=!0}function Gn(e,t){var n=-1,r=e.length,i=-1,s=t.length,o=O(r+s);while(++n<r)o[n]=e[n];while(++i<s)o[n++]=t[i];return o}function Yn(e,t){var n=-1,r=e.length;t||(t=O(r));while(++n<r)t[n]=e[n];return t}function Zn(e,t){var n=-1,r=e.length;while(++n<r)if(t(e[n],n,e)===!1)break;return e}function er(e,t){var n=e.length;while(n--)if(t(e[n],n,e)===!1)break;return e}function tr(e,t){var n=-1,r=e.length;while(++n<r)if(!t(e[n],n,e))return!1;return!0}function nr(e,t,n,r){var i=-1,s=e.length,o=r,u=o;while(++i<s){var a=e[i],f=+t(a);n(f,o)&&(o=f,u=a)}return u}function rr(e,t){var n=-1,r=e.length,i=-1,s=[];while(++n<r){var o=e[n];t(o,n,e)&&(s[++i]=o)}return s}function ir(e,t){var n=-1,r=e.length,i=O(r);while(++n<r)i[n]=t(e[n],n,e);return i}function sr(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}function or(e,t,n,r){var i=-1,s=e.length;r&&s&&(n=e[++i]);while(++i<s)n=t(n,e[i],i,e);return n}function ur(e,t,n,r){var i=e.length;r&&i&&(n=e[--i]);while(i--)n=t(n,e[i],i,e);return n}function ar(e,t){var n=-1,r=e.length;while(++n<r)if(t(e[n],n,e))return!0;return!1}function fr(e,t){var n=e.length,r=0;while(n--)r+=+t(e[n])||0;return r}function lr(t,n){return t===e?n:t}function cr(t,n,r,i){return t===e||!$t.call(i,r)?n:t}function hr(t,n,r){var i=-1,s=ta(n),o=s.length;while(++i<o){var u=s[i],a=t[u],f=r(a,n[u],u,t,n);if((f===f?f!==a:a===a)||a===e&&!(u in t))t[u]=f}return t}function pr(e,t){return t==null?e:vr(t,ta(t),e)}function dr(t,n){var r=-1,i=t==null,s=!i&&es(t),o=s?t.length:0,u=n.length,a=O(u);while(++r<u){var f=n[r];s?a[r]=ts(f,o)?t[f]:e:a[r]=i?e:t[f]}return a}function vr(e,t,n){n||(n={});var r=-1,i=t.length;while(++r<i){var s=t[r];n[s]=e[s]}return n}function mr(t,n,r){var i=typeof t;return i=="function"?n===e?t:ui(t,n,r):t==null?qa:i=="object"?qr(t):n===e?Ja(t):Rr(t,n)}function gr(t,n,r,i,s,o,u){var a;r&&(a=s?r(t,i,s):r(t));if(a!==e)return a;if(!Nu(t))return t;var f=mu(t);if(f){a=Qi(t);if(!n)return Yn(t,a)}else{var l=nn.call(t),c=l==N;if(!(l==L||l==w||c&&!s))return yt[l]?Yi(t,l,n):s?t:{};a=Gi(c?{}:t);if(!n)return pr(a,t)}o||(o=[]),u||(u=[]);var h=o.length;while(h--)if(o[h]==t)return u[h];return o.push(t),u.push(a),(f?Zn:_r)(t,function(e,i){a[i]=gr(e,n,r,i,t,o,u)}),a}function br(t,n,r){if(typeof t!="function")throw new Ct(y);return hn(function(){t.apply(e,r)},n)}function wr(e,t){var n=e?e.length:0,r=[];if(!n)return r;var i=-1,s=Xi(),o=s===Pt,u=o&&t.length>=v?mi(t):null,a=t.length;u&&(s=Kn,o=!1,t=u);e:while(++i<n){var f=e[i];if(o&&f===f){var l=a;while(l--)if(t[l]===f)continue e;r.push(f)}else s(t,f,0)<0&&r.push(f)}return r}function xr(e,t){var n=!0;return Er(e,function(e,r,i){return n=!!t(e,r,i),n}),n}function Tr(e,t,n,r){var i=r,s=i;return Er(e,function(e,o,u){var a=+t(e,o,u);if(n(a,i)||a===r&&a===s)i=a,s=e}),s}function Nr(t,n,r,i){var s=t.length;r=r==null?0:+r||0,r<0&&(r=-r>s?0:s+r),i=i===e||i>s?s:+i||0,i<0&&(i+=s),s=r>i?0:i>>>0,r>>>=0;while(r<s)t[r++]=n;return t}function Cr(e,t){var n=[];return Er(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function kr(e,t,n,r){var i;return n(e,function(e,n,s){if(t(e,n,s))return i=r?n:e,!1}),i}function Lr(e,t,n,r){r||(r=[]);var i=-1,s=e.length;while(++i<s){var o=e[i];Vt(o)&&es(o)&&(n||mu(o)||vu(o))?t?Lr(o,t,n,r):sr(r,o):n||(r[r.length]=o)}return r}function Mr(e,t){return Ar(e,t,na)}function _r(e,t){return Ar(e,t,ta)}function Dr(e,t){return Or(e,t,ta)}function Pr(e,t){var n=-1,r=t.length,i=-1,s=[];while(++n<r){var o=t[n];Tu(e[o])&&(s[++i]=o)}return s}function Hr(t,n,r){if(t==null)return;r!==e&&r in vs(t)&&(n=[r]);var i=0,s=n.length;while(t!=null&&i<s)t=t[n[i++]];return i&&i==s?t:e}function Br(e,t,n,r,i,s){return e===t?!0:e==null||t==null||!Nu(e)&&!Vt(t)?e!==e&&t!==t:jr(e,t,Br,n,r,i,s)}function jr(e,t,n,r,i,s,o){var u=mu(e),a=mu(t),f=E,l=E;u||(f=nn.call(e),f==w?f=L:f!=L&&(u=Pu(e))),a||(l=nn.call(t),l==w?l=L:l!=L&&(a=Pu(t)));var c=f==L,h=l==L,p=f==l;if(p&&!u&&!c)return qi(e,t,f);if(!i){var d=c&&$t.call(e,"__wrapped__"),v=h&&$t.call(t,"__wrapped__");if(d||v)return n(d?e.value():e,v?t.value():t,r,i,s,o)}if(!p)return!1;s||(s=[]),o||(o=[]);var m=s.length;while(m--)if(s[m]==e)return o[m]==t;s.push(e),o.push(t);var g=(u?Ii:Ri)(e,t,n,r,i,s,o);return s.pop(),o.pop(),g}function Fr(t,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;t=vs(t);while(i--){var u=n[i];if(o&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}while(++i<s){u=n[i];var a=u[0],f=t[a],l=u[1];if(o&&u[2]){if(f===e&&!(a in t))return!1}else{var c=r?r(f,l,a):e;if(c===e?!Br(l,f,r,!0):!c)return!1}}return!0}function Ir(e,t){var n=-1,r=es(e)?O(e.length):[];return Er(e,function(e,i,s){r[++n]=t(e,i,s)}),r}function qr(t){var n=$i(t);if(n.length==1&&n[0][2]){var r=n[0][0],i=n[0][1];return function(t){return t==null?!1:t[r]===i&&(i!==e||r in vs(t))}}return function(e){return Fr(e,n)}}function Rr(t,n){var r=mu(t),i=rs(t)&&os(n),s=t+"";return t=ms(t),function(o){if(o==null)return!1;var u=s;o=vs(o);if((r||!i)&&!(u in o)){o=t.length==1?o:Hr(o,Qr(t,0,-1));if(o==null)return!1;u=Ps(t),o=vs(o)}return o[u]===n?n!==e||u in o:Br(n,o[u],e,!0)}}function Ur(t,n,r,i,s){if(!Nu(t))return t;var o=es(n)&&(mu(n)||Pu(n)),u=o?e:ta(n);return Zn(u||n,function(a,f){u&&(f=a,a=n[f]);if(Vt(a))i||(i=[]),s||(s=[]),zr(t,n,f,Ur,r,i,s);else{var l=t[f],c=r?r(l,a,f,t,n):e,h=c===e;h&&(c=a),(c!==e||o&&!(f in t))&&(h||(c===c?c!==l:l===l))&&(t[f]=c)}}),t}function zr(t,n,r,i,s,o,u){var a=o.length,f=n[r];while(a--)if(o[a]==f){t[r]=u[a];return}var l=t[r],c=s?s(l,f,r,t,n):e,h=c===e;h&&(c=f,es(f)&&(mu(f)||Pu(f))?c=mu(l)?l:es(l)?Yn(l):[]:Mu(f)||vu(f)?c=vu(l)?Iu(l):Mu(l)?l:{}:h=!1),o.push(f),u.push(c);if(h)t[r]=i(c,f,s,o,u);else if(c===c?c!==l:l===l)t[r]=c}function Wr(t){return function(n){return n==null?e:n[t]}}function Xr(e){var t=e+"";return e=ms(e),function(n){return Hr(n,e,t)}}function Vr(e,t){var n=e?t.length:0;while(n--){var r=t[n];if(r!=i&&ts(r)){var i=r;pn.call(e,r,1)}}return e}function $r(e,t){return e+yn(Cn()*(t-e+1))}function Jr(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function Qr(t,n,r){var i=-1,s=t.length;n=n==null?0:+n||0,n<0&&(n=-n>s?0:s+n),r=r===e||r>s?s:+r||0,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;var o=O(s);while(++i<s)o[i]=t[i+n];return o}function Gr(e,t){var n;return Er(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function Yr(e,t){var n=e.length;e.sort(t);while(n--)e[n]=e[n].value;return e}function Zr(e,t,n){var r=Ui(),i=-1;t=ir(t,function(e){return r(e)});var s=Ir(e,function(e){var n=ir(t,function(t){return t(e)});return{criteria:n,index:++i,value:e}});return Yr(s,function(e,t){return qt(e,t,n)})}function ei(e,t){var n=0;return Er(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function ti(e,t){var n=-1,r=Xi(),i=e.length,s=r===Pt,o=s&&i>=v,u=o?mi():null,a=[];u?(r=Kn,s=!1):(o=!1,u=t?[]:a);e:while(++n<i){var f=e[n],l=t?t(f,n,e):f;if(s&&f===f){var c=u.length;while(c--)if(u[c]===l)continue e;t&&u.push(l),a.push(f)}else r(u,l,0)<0&&((t||o)&&u.push(l),a.push(f))}return a}function ni(e,t){var n=-1,r=t.length,i=O(r);while(++n<r)i[n]=e[t[n]];return i}function ri(e,t,n,r){var i=e.length,s=r?i:-1;while((r?s--:++s<i)&&t(e[s],s,e));return n?Qr(e,r?0:s,r?s+1:i):Qr(e,r?s+1:0,r?i:s)}function ii(e,t){var n=e;n instanceof In&&(n=n.value());var r=-1,i=t.length;while(++r<i){var s=t[r];n=s.func.apply(s.thisArg,sr([n],s.args))}return n}function si(e,t,n){var r=0,i=e?e.length:r;if(typeof t=="number"&&t===t&&i<=Mn){while(r<i){var s=r+i>>>1,o=e[s];(n?o<=t:o<t)&&o!==null?r=s+1:i=s}return i}return oi(e,t,qa,n)}function oi(t,n,r,i){n=r(n);var s=0,o=t?t.length:0,u=n!==n,a=n===null,f=n===e;while(s<o){var l=yn((s+o)/2),c=r(t[l]),h=c!==e,p=c===c;if(u)var d=p||i;else a?d=p&&h&&(i||c!=null):f?d=p&&(i||h):c==null?d=!1:d=i?c<=n:c<n;d?s=l+1:o=l}return xn(o,On)}function ui(t,n,r){if(typeof t!="function")return qa;if(n===e)return t;switch(r){case 1:return function(e){return t.call(n,e)};case 3:return function(e,r,i){return t.call(n,e,r,i)};case 4:return function(e,r,i,s){return t.call(n,e,r,i,s)};case 5:return function(e,r,i,s,o){return t.call(n,e,r,i,s,o)}}return function(){return t.apply(n,arguments)}}function ai(e){var t=new on(e.byteLength),n=new dn(t);return n.set(new dn(e)),t}function fi(e,t,n){var r=n.length,i=-1,s=Sn(e.length-r,0),o=-1,u=t.length,a=O(u+s);while(++o<u)a[o]=t[o];while(++i<r)a[n[i]]=e[i];while(s--)a[o++]=e[i++];return a}function li(e,t,n){var r=-1,i=n.length,s=-1,o=Sn(e.length-i,0),u=-1,a=t.length,f=O(o+a);while(++s<o)f[s]=e[s];var l=s;while(++u<a)f[l+u]=t[u];while(++r<i)f[l+n[r]]=e[s++];return f}function ci(e,t){return function(n,r,i){var s=t?t():{};r=Ui(r,i,3);if(mu(n)){var o=-1,u=n.length;while(++o<u){var a=n[o];e(s,a,r(a,o,n),n)}}else Er(n,function(t,n,i){e(s,t,r(t,n,i),i)});return s}}function hi(t){return uu(function(n,r){var i=-1,s=n==null?0:r.length,o=s>2?r[s-2]:e,u=s>2?r[2]:e,a=s>1?r[s-1]:e;typeof o=="function"?(o=ui(o,a,5),s-=2):(o=typeof a=="function"?a:e,s-=o?1:0),u&&ns(r[0],r[1],u)&&(o=s<3?e:o,s=1);while(++i<s){var f=r[i];f&&t(n,f,o)}return n})}function pi(e,t){return function(n,r){var i=n?Vi(n):0;if(!ss(i))return e(n,r);var s=t?i:-1,o=vs(n);while(t?s--:++s<i)if(r(o[s],s,o)===!1)break;return n}}function di(e){return function(t,n,r){var i=vs(t),s=r(t),o=s.length,u=e?o:-1;while(e?u--:++u<o){var a=s[u];if(n(i[a],a,i)===!1)break}return t}}function vi(e,t){function r(){var i=this&&this!==Mt&&this instanceof r?n:e;return i.apply(t,arguments)}var n=yi(e);return r}function mi(e){return gn&&cn?new Jn(e):null}function gi(e){return function(t){var n=-1,r=Ba(ga(t)),i=r.length,s="";while(++n<i)s=e(s,r[n],n);return s}}function yi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=yr(e.prototype),r=e.apply(n,t);return Nu(r)?r:n}}function bi(t){function n(r,i,s){s&&ns(r,i,s)&&(i=e);var o=Fi(r,t,e,e,e,e,e,i);return o.placeholder=n.placeholder,o}return n}function wi(t,n){return uu(function(r){var i=r[0];return i==null?i:(r.push(n),t.apply(e,r))})}function Ei(t,n){return function(r,i,s){s&&ns(r,i,s)&&(i=e),i=Ui(i,s,3);if(i.length==1){r=mu(r)?r:ds(r);var o=nr(r,i,t,n);if(!r.length||o!==n)return o}return Tr(r,i,t,n)}}function Si(t,n){return function(r,i,s){i=Ui(i,s,3);if(mu(r)){var o=Dt(r,i,n);return o>-1?r[o]:e}return kr(r,i,t)}}function xi(e){return function(t,n,r){return!t||!t.length?-1:(n=Ui(n,r,3),Dt(t,n,e))}}function Ti(e){return function(t,n,r){return n=Ui(n,r,3),kr(t,n,e,!0)}}function Ni(t){return function(){var n,r=arguments.length,i=t?r:-1,o=0,a=O(r);while(t?i--:++i<r){var c=a[o++]=arguments[i];if(typeof c!="function")throw new Ct(y);!n&&jn.prototype.thru&&Wi(c)=="wrapper"&&(n=new jn([],!0))}i=n?-1:r;while(++i<r){c=a[i];var h=Wi(c),p=h=="wrapper"?zi(c):e;p&&is(p[0])&&p[1]==(f|s|u|l)&&!p[4].length&&p[9]==1?n=n[Wi(p[0])].apply(n,p[3]):n=c.length==1&&is(c)?n[h]():n.thru(c)}return function(){var e=arguments,t=e[0];if(n&&e.length==1&&mu(t)&&t.length>=v)return n.plant(t).value();var i=0,s=r?a[i].apply(this,e):t;while(++i<r)s=a[i].call(this,s);return s}}}function Ci(t,n){return function(r,i,s){return typeof i=="function"&&s===e&&mu(r)?t(r,i):n(r,ui(i,s,3))}}function ki(t){return function(n,r,i){if(typeof r!="function"||i!==e)r=ui(r,i,3);return t(n,r,na)}}function Li(t){return function(n,r,i){if(typeof r!="function"||i!==e)r=ui(r,i,3);return t(n,r)}}function Ai(e){return function(t,n,r){var i={};return n=Ui(n,r,3),_r(t,function(t,r,s){var o=n(t,r,s);r=e?o:r,t=e?t:o,i[r]=t}),i}}function Oi(e){return function(t,n,r){return t=Bt(t),(e?t:"")+Pi(t,n,r)+(e?"":t)}}function Mi(t){var n=uu(function(r,i){var s=Jt(i,n.placeholder);return Fi(r,t,e,i,s)});return n}function _i(t,n){return function(r,i,s,o){var u=arguments.length<3;return typeof i=="function"&&o===e&&mu(r)?t(r,i,s,u):Jr(r,Ui(i,o,4),s,u,n)}}function Di(t,l,c,h,p,d,v,m,g,y){function C(){var i=arguments.length,s=i,o=O(i);while(s--)o[s]=arguments[s];h&&(o=fi(o,h,p)),d&&(o=li(o,d,v));if(S||T){var f=C.placeholder,k=Jt(o,f);i-=k.length;if(i<y){var L=m?Yn(m):e,A=Sn(y-i,0),M=S?k:e,_=S?e:k,D=S?o:e,P=S?e:o;l|=S?u:a,l&=~(S?a:u),x||(l&=~(n|r));var H=[t,l,c,D,M,P,_,L,g,A],B=Di.apply(e,H);return is(t)&&hs(B,H),B.placeholder=f,B}}var j=w?c:this,F=E?j[t]:t;return m&&(o=cs(o,m)),b&&g<o.length&&(o.length=g),this&&this!==Mt&&this instanceof C&&(F=N||yi(t)),F.apply(j,o)}var b=l&f,w=l&n,E=l&r,S=l&s,x=l&i,T=l&o,N=E?e:yi(t);return C}function Pi(e,t,n){var r=e.length;t=+t;if(r>=t||!wn(t))return"";var i=t-r;return n=n==null?" ":n+"",Ca(n,mn(i/n.length)).slice(0,i)}function Hi(e,t,r,i){function u(){var t=-1,n=arguments.length,a=-1,f=i.length,l=O(f+n);while(++a<f)l[a]=i[a];while(n--)l[a++]=arguments[++t];var c=this&&this!==Mt&&this instanceof u?o:e;return c.apply(s?r:this,l)}var s=t&n,o=yi(e);return u}function Bi(t){var n=Et[t];return function(t,r){return r=r===e?0:+r||0,r?(r=fn(10,r),n(t*r)/r):n(t)}}function ji(e){return function(t,n,r,i){var s=Ui(r);return r==null&&s===mr?si(t,n,e):oi(t,n,s(r,i,1),e)}}function Fi(t,i,s,o,f,l,c,h){var p=i&r;if(!p&&typeof t!="function")throw new Ct(y);var d=o?o.length:0;d||(i&=~(u|a),o=f=e),d-=f?f.length:0;if(i&a){var v=o,m=f;o=f=e}var g=p?e:zi(t),b=[t,i,s,o,f,v,m,l,c,h];g&&(us(b,g),i=b[1],h=b[9]),b[9]=h==null?p?0:t.length:Sn(h-d,0)||0;if(i==n)var w=vi(b[0],b[2]);else i!=u&&i!=(n|u)||!!b[4].length?w=Di.apply(e,b):w=Hi.apply(e,b);var E=g?Kr:hs;return E(w,b)}function Ii(t,n,r,i,s,o,u){var a=-1,f=t.length,l=n.length;if(f!=l&&!(s&&l>f))return!1;while(++a<f){var c=t[a],h=n[a],p=i?i(s?h:c,s?c:h,a):e;if(p!==e){if(p)continue;return!1}if(s){if(!ar(n,function(e){return c===e||r(c,e,i,s,o,u)}))return!1}else if(c!==h&&!r(c,h,i,s,o,u))return!1}return!0}function qi(e,t,n){switch(n){case S:case x:return+e==+t;case T:return e.name==t.name&&e.message==t.message;case k:return e!=+e?t!=+t:e==+t;case A:case M:return e==t+""}return!1}function Ri(t,n,r,i,s,o,u){var a=ta(t),f=a.length,l=ta(n),c=l.length;if(f!=c&&!s)return!1;var h=f;while(h--){var p=a[h];if(!(s?p in n:$t.call(n,p)))return!1}var d=s;while(++h<f){p=a[h];var v=t[p],m=n[p],g=i?i(s?m:v,s?v:m,p):e;if(g===e?!r(v,m,i,s,o,u):!g)return!1;d||(d=p=="constructor")}if(!d){var y=t.constructor,b=n.constructor;if(y!=b&&"constructor"in t&&"constructor"in n&&!(typeof y=="function"&&y instanceof y&&typeof b=="function"&&b instanceof b))return!1}return!0}function Ui(e,t,n){var r=Hn.callback||Fa;return r=r===Fa?mr:r,n?r(e,t,n):r}function Wi(e){var t=e.name+"",n=Pn[t],r=n?n.length:0;while(r--){var i=n[r],s=i.func;if(s==null||s==e)return i.name}return t}function Xi(e,t,n){var r=Hn.indexOf||Ms;return r=r===Ms?Pt:r,e?r(e,t,n):r}function $i(e){var t=oa(e),n=t.length;while(n--)t[n][2]=os(t[n][1]);return t}function Ji(t,n){var r=t==null?e:t[n];return Lu(r)?r:e}function Ki(e,t,n){var r=-1,i=n.length;while(++r<i){var s=n[r],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=xn(t,e+o);break;case"takeRight":e=Sn(e,t-o)}}return{start:e,end:t}}function Qi(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&$t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Gi(e){var t=e.constructor;return typeof t=="function"&&t instanceof t||(t=xt),new t}function Yi(e,t,n){var r=e.constructor;switch(t){case D:return ai(e);case S:case x:return new r(+e);case P:case H:case B:case j:case F:case I:case q:case R:case U:var i=e.buffer;return new r(n?ai(i):i,e.byteOffset,e.length);case k:case M:return new r(e);case A:var s=new r(e.source,ut.exec(e));s.lastIndex=e.lastIndex}return s}function Zi(t,n,r){t!=null&&!rs(n,t)&&(n=ms(n),t=n.length==1?t:Hr(t,Qr(n,0,-1)),n=Ps(n));var i=t==null?t:t[n];return i==null?e:i.apply(t,r)}function es(e){return e!=null&&ss(Vi(e))}function ts(e,t){return e=typeof e=="number"||lt.test(e)?+e:-1,t=t==null?_n:t,e>-1&&e%1==0&&e<t}function ns(e,t,n){if(!Nu(n))return!1;var r=typeof t;if(r=="number"?es(n)&&ts(t,n.length):r=="string"&&t in n){var i=n[t];return e===e?e===i:i!==i}return!1}function rs(e,t){var n=typeof e;if(n=="string"&&et.test(e)||n=="number")return!0;if(mu(e))return!1;var r=!Z.test(e);return r||t!=null&&e in vs(t)}function is(e){var t=Wi(e),n=Hn[t];if(typeof n=="function"&&t in In.prototype){if(e===n)return!0;var r=zi(n);return!!r&&e===r[0]}return!1}function ss(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=_n}function os(e){return e===e&&!Nu(e)}function us(e,t){var r=e[1],o=t[1],u=r|o,a=u<f,c=o==f&&r==s||o==f&&r==l&&e[7].length<=t[8]||o==(f|l)&&r==s;if(!a&&!c)return e;o&n&&(e[2]=t[2],u|=r&n?0:i);var h=t[3];if(h){var p=e[3];e[3]=p?fi(p,h,t[4]):Yn(h),e[4]=p?Jt(e[3],b):Yn(t[4])}return h=t[5],h&&(p=e[5],e[5]=p?li(p,h,t[6]):Yn(h),e[6]=p?Jt(e[5],b):Yn(t[6])),h=t[7],h&&(e[7]=Yn(h)),o&f&&(e[8]=e[8]==null?t[8]:xn(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=u,e}function as(t,n){return t===e?n:qu(t,n,as)}function fs(e,t){e=vs(e);var n=-1,r=t.length,i={};while(++n<r){var s=t[n];s in e&&(i[s]=e[s])}return i}function ls(e,t){var n={};return Mr(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function cs(t,n){var r=t.length,i=xn(n.length,r),s=Yn(t);while(i--){var o=n[i];t[i]=ts(o,r)?s[o]:e}return t}function ps(e){var t=na(e),n=t.length,r=n&&e.length,i=!!r&&ss(r)&&(mu(e)||vu(e)),s=-1,o=[];while(++s<n){var u=t[s];(i&&ts(u,r)||$t.call(e,u))&&o.push(u)}return o}function ds(e){return e==null?[]:es(e)?Nu(e)?e:xt(e):ca(e)}function vs(e){return Nu(e)?e:xt(e)}function ms(e){if(mu(e))return e;var t=[];return Bt(e).replace(tt,function(e,n,r,i){t.push(r?i.replace(st,"$1"):n||e)}),t}function gs(e){return e instanceof In?e.clone():new jn(e.__wrapped__,e.__chain__,Yn(e.__actions__))}function ys(e,t,n){(n?ns(e,t,n):t==null)?t=1:t=Sn(yn(t)||1,1);var r=0,i=e?e.length:0,s=-1,o=O(mn(i/t));while(r<i)o[++s]=Qr(e,r,r+=t);return o}function bs(e){var t=-1,n=e?e.length:0,r=-1,i=[];while(++t<n){var s=e[t];s&&(i[++r]=s)}return i}function Es(e,t,n){var r=e?e.length:0;if(!r)return[];if(n?ns(e,t,n):t==null)t=1;return Qr(e,t<0?0:t)}function Ss(e,t,n){var r=e?e.length:0;if(!r)return[];if(n?ns(e,t,n):t==null)t=1;return t=r-(+t||0),Qr(e,0,t<0?0:t)}function xs(e,t,n){return e&&e.length?ri(e,Ui(t,n,3),!0,!0):[]}function Ts(e,t,n){return e&&e.length?ri(e,Ui(t,n,3),!0):[]}function Ns(e,t,n,r){var i=e?e.length:0;return i?(n&&typeof n!="number"&&ns(e,t,n)&&(n=0,r=i),Nr(e,t,n,r)):[]}function Ls(t){return t?t[0]:e}function As(e,t,n){var r=e?e.length:0;return n&&ns(e,t,n)&&(t=!1),r?Lr(e,t):[]}function Os(e){var t=e?e.length:0;return t?Lr(e,!0):[]}function Ms(e,t,n){var r=e?e.length:0;if(!r)return-1;if(typeof n=="number")n=n<0?Sn(r+n,0):n;else if(n){var i=si(e,t);return i<r&&(t===t?t===e[i]:e[i]!==e[i])?i:-1}return Pt(e,t,n||0)}function _s(e){return Ss(e,1)}function Ps(t){var n=t?t.length:0;return n?t[n-1]:e}function Hs(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if(typeof n=="number")i=(n<0?Sn(r+n,0):xn(n||0,r-1))+1;else if(n){i=si(e,t,!0)-1;var s=e[i];return(t===t?t===s:s!==s)?i:-1}if(t!==t)return Xt(e,i,!0);while(i--)if(e[i]===t)return i;return-1}function Bs(){var e=arguments,t=e[0];if(!t||!t.length)return t;var n=0,r=Xi(),i=e.length;while(++n<i){var s=0,o=e[n];while((s=r(t,o,s))>-1)pn.call(t,s,1)}return t}function Fs(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,s=[],o=e.length;t=Ui(t,n,3);while(++i<o){var u=e[i];t(u,i,e)&&(r.push(u),s.push(i))}return Vr(e,s),r}function Is(e){return Es(e,1)}function qs(e,t,n){var r=e?e.length:0;return r?(n&&typeof n!="number"&&ns(e,t,n)&&(t=0,n=r),Qr(e,t,n)):[]}function zs(e,t,n){var r=e?e.length:0;if(!r)return[];if(n?ns(e,t,n):t==null)t=1;return Qr(e,0,t<0?0:t)}function Ws(e,t,n){var r=e?e.length:0;if(!r)return[];if(n?ns(e,t,n):t==null)t=1;return t=r-(+t||0),Qr(e,t<0?0:t)}function Xs(e,t,n){return e&&e.length?ri(e,Ui(t,n,3),!1,!0):[]}function Vs(e,t,n){return e&&e.length?ri(e,Ui(t,n,3)):[]}function Js(t,n,r,i){var s=t?t.length:0;if(!s)return[];n!=null&&typeof n!="boolean"&&(i=r,r=ns(t,n,i)?e:n,n=!1);var o=Ui();if(r!=null||o!==mr)r=o(r,i,3);return n&&Xi()===Pt?Kt(t,r):ti(t,r)}function Ks(e){if(!e||!e.length)return[];var t=-1,n=0;e=rr(e,function(e){if(es(e))return n=Sn(e.length,n),!0});var r=O(n);while(++t<n)r[t]=ir(e,Wr(t));return r}function Qs(t,n,r){var i=t?t.length:0;if(!i)return[];var s=Ks(t);return n==null?s:(n=ui(n,r,4),ir(s,function(t){return or(t,n,e,!0)}))}function Ys(){var e=-1,t=arguments.length;while(++e<t){var n=arguments[e];if(es(n))var r=r?sr(wr(r,n),wr(n,r)):n}return r?ti(r):[]}function eo(e,t){var n=-1,r=e?e.length:0,i={};r&&!t&&!mu(e[0])&&(t=[]);while(++n<r){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function no(e){var t=Hn(e);return t.__chain__=!0,t}function ro(e,t,n){return t.call(n,e),e}function io(e,t,n){return t.call(n,e)}function so(){return no(this)}function oo(){return new jn(this.value(),this.__chain__)}function ao(e){var t,n=this;while(n instanceof Bn){var r=gs(n);t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function fo(){var t=this.__wrapped__,n=function(e){return e.reverse()};if(t instanceof In){var r=t;return this.__actions__.length&&(r=new In(this)),r=r.reverse(),r.__actions__.push({func:io,args:[n],thisArg:e}),new jn(r,this.__chain__)}return this.thru(n)}function lo(){return this.value()+""}function co(){return ii(this.__wrapped__,this.__actions__)}function vo(t,n,r){var i=mu(t)?tr:xr;r&&ns(t,n,r)&&(n=e);if(typeof n!="function"||r!==e)n=Ui(n,r,3);return i(t,n)}function mo(e,t,n){var r=mu(e)?rr:Cr;return t=Ui(t,n,3),r(e,t)}function bo(e,t){return go(e,qr(t))}function xo(e,t,n,r){var i=e?Vi(e):0;return ss(i)||(e=ca(e),i=e.length),typeof n!="number"||r&&ns(t,n,r)?n=0:n=n<0?Sn(i+n,0):n||0,typeof e=="string"||!mu(e)&&Du(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Xi(e,t,n)>-1}function Co(e,t,n){var r=mu(e)?ir:Ir;return t=Ui(t,n,3),r(e,t)}function Lo(e,t){return Co(e,Ja(t))}function Mo(e,t,n){var r=mu(e)?rr:Cr;return t=Ui(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function _o(t,n,r){if(r?ns(t,n,r):n==null){t=ds(t);var i=t.length;return i>0?t[$r(0,i-1)]:e}var s=-1,o=Fu(t),i=o.length,u=i-1;n=xn(n<0?0:+n||0,i);while(++s<n){var a=$r(s,u),f=o[a];o[a]=o[s],o[s]=f}return o.length=n,o}function Do(e){return _o(e,Ln)}function Po(e){var t=e?Vi(e):0;return ss(t)?t:ta(e).length}function Ho(t,n,r){var i=mu(t)?ar:Gr;r&&ns(t,n,r)&&(n=e);if(typeof n!="function"||r!==e)n=Ui(n,r,3);return i(t,n)}function Bo(t,n,r){if(t==null)return[];r&&ns(t,n,r)&&(n=e);var i=-1;n=Ui(n,r,3);var s=Ir(t,function(e,t,r){return{criteria:n(e,t,r),index:++i,value:e}});return Yr(s,It)}function Fo(t,n,r,i){return t==null?[]:(i&&ns(n,r,i)&&(r=e),mu(n)||(n=n==null?[]:[n]),mu(r)||(r=r==null?[]:[r]),Zr(t,n,r))}function Io(e,t){return mo(e,qr(t))}function Ro(e,t){if(typeof t!="function"){if(typeof e!="function")throw new Ct(y);var n=e;e=t,t=n}return e=wn(e=+e)?e:0,function(){if(--e<1)return t.apply(this,arguments)}}function Uo(t,n,r){return r&&ns(t,n,r)&&(n=e),n=t&&n==null?t.length:Sn(+n||0,0),Fi(t,f,e,e,e,e,n)}function zo(t,n){var r;if(typeof n!="function"){if(typeof t!="function")throw new Ct(y);var i=t;t=n,n=i}return function(){return--t>0&&(r=n.apply(this,arguments)),t<=1&&(n=e),r}}function Ko(t,n,r){function v(){f&&un(f),s&&un(s),c=0,s=f=l=e}function m(n,r){r&&un(r),s=f=l=e,n&&(c=qo(),o=t.apply(a,i),!f&&!s&&(i=a=e))}function g(){var e=n-(qo()-u);e<=0||e>n?m(l,s):f=hn(g,e)}function b(){m(p,f)}function w(){i=arguments,u=qo(),a=this,l=p&&(f||!d);if(h===!1)var r=d&&!f;else{!s&&!d&&(c=u);var v=h-(u-c),m=v<=0||v>h;m?(s&&(s=un(s)),c=u,o=t.apply(a,i)):s||(s=hn(b,v))}return m&&f?f=un(f):!f&&n!==h&&(f=hn(g,n)),r&&(m=!0,o=t.apply(a,i)),m&&!f&&!s&&(i=a=e),o}var i,s,o,u,a,f,l,c=0,h=!1,p=!0;if(typeof t!="function")throw new Ct(y);n=n<0?0:+n||0;if(r===!0){var d=!0;p=!1}else Nu(r)&&(d=!!r.leading,h="maxWait"in r&&Sn(+r.maxWait||0,n),p="trailing"in r?!!r.trailing:p);return w.cancel=v,w}function eu(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new Ct(y);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o),o};return n.cache=new eu.Cache,n}function nu(e){if(typeof e!="function")throw new Ct(y);return function(){return!e.apply(this,arguments)}}function ru(e){return zo(2,e)}function uu(t,n){if(typeof t!="function")throw new Ct(y);return n=Sn(n===e?t.length-1:+n||0,0),function(){var e=arguments,r=-1,i=Sn(e.length-n,0),s=O(i);while(++r<i)s[r]=e[n+r];switch(n){case 0:return t.call(this,s);case 1:return t.call(this,e[0],s);case 2:return t.call(this,e[0],e[1],s)}var o=O(n+1);r=-1;while(++r<n)o[r]=e[r];return o[n]=s,t.apply(this,o)}}function au(e){if(typeof e!="function")throw new Ct(y);return function(t){return e.apply(this,t)}}function fu(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new Ct(y);return n===!1?r=!1:Nu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ko(e,t,{leading:r,maxWait:+t,trailing:i})}function lu(t,n){return n=n==null?qa:n,Fi(n,u,e,[t],[])}function cu(e,t,n,r){return t&&typeof t!="boolean"&&ns(e,t,n)?t=!1:typeof t=="function"&&(r=n,n=t,t=!1),typeof n=="function"?gr(e,t,ui(n,r,3)):gr(e,t)}function hu(e,t,n){return typeof t=="function"?gr(e,!0,ui(t,n,3)):gr(e,!0)}function pu(e,t){return e>t}function du(e,t){return e>=t}function vu(e){return Vt(e)&&es(e)&&$t.call(e,"callee")&&!ln.call(e,"callee")}function gu(e){return e===!0||e===!1||Vt(e)&&nn.call(e)==S}function yu(e){return Vt(e)&&nn.call(e)==x}function bu(e){return!!e&&e.nodeType===1&&Vt(e)&&!Mu(e)}function wu(e){return e==null?!0:es(e)&&(mu(e)||Du(e)||vu(e)||Vt(e)&&Tu(e.splice))?!e.length:!ta(e).length}function Eu(t,n,r,i){r=typeof r=="function"?ui(r,i,3):e;var s=r?r(t,n):e;return s===e?Br(t,n,r):!!s}function Su(e){return Vt(e)&&typeof e.message=="string"&&nn.call(e)==T}function xu(e){return typeof e=="number"&&wn(e)}function Tu(e){return Nu(e)&&nn.call(e)==N}function Nu(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Cu(t,n,r,i){return r=typeof r=="function"?ui(r,i,3):e,Fr(t,$i(n),r)}function ku(e){return Ou(e)&&e!=+e}function Lu(e){return e==null?!1:Tu(e)?sn.test(Ot.call(e)):Vt(e)&&ft.test(e)}function Au(e){return e===null}function Ou(e){return typeof e=="number"||Vt(e)&&nn.call(e)==k}function Mu(t){var n;if(!Vt(t)||nn.call(t)!=L||!!vu(t)||!$t.call(t,"constructor")&&(n=t.constructor,typeof n=="function"&&!(n instanceof n)))return!1;var r;return Mr(t,function(e,t){r=t}),r===e||$t.call(t,r)}function _u(e){return Nu(e)&&nn.call(e)==A}function Du(e){return typeof e=="string"||Vt(e)&&nn.call(e)==M}function Pu(e){return Vt(e)&&ss(e.length)&&!!gt[nn.call(e)]}function Hu(t){return t===e}function Bu(e,t){return e<t}function ju(e,t){return e<=t}function Fu(e){var t=e?Vi(e):0;return ss(t)?t?Yn(e):[]:ca(e)}function Iu(e){return vr(e,na(e))}function Uu(t,n,r){var i=yr(t);return r&&ns(t,n,r)&&(n=e),n?pr(i,n):i}function Gu(e){return Pr(e,na(e))}function Yu(t,n,r){var i=t==null?e:Hr(t,ms(n),n+"");return i===e?r:i}function Zu(e,t){if(e==null)return!1;var n=$t.call(e,t);if(!n&&!rs(t)){t=ms(t),e=t.length==1?e:Hr(e,Qr(t,0,-1));if(e==null)return!1;t=Ps(t),n=$t.call(e,t)}return n||ss(e.length)&&ts(t,e.length)&&(mu(e)||vu(e))}function ea(t,n,r){r&&ns(t,n,r)&&(n=e);var i=-1,s=ta(t),o=s.length,u={};while(++i<o){var a=s[i],f=t[a];n?$t.call(u,f)?u[f].push(a):u[f]=[a]:u[f]=a}return u}function na(e){if(e==null)return[];Nu(e)||(e=xt(e));var t=e.length;t=t&&ss(t)&&(mu(e)||vu(e))&&t||0;var n=e.constructor,r=-1,i=typeof n=="function"&&n.prototype===e,s=O(t),o=t>0;while(++r<t)s[r]=r+"";for(var u in e)(!o||!ts(u,t))&&(u!="constructor"||!i&&!!$t.call(e,u))&&s.push(u);return s}function oa(e){e=vs(e);var t=-1,n=ta(e),r=n.length,i=O(r);while(++t<r){var s=n[t];i[t]=[s,e[s]]}return i}function aa(t,n,r){var i=t==null?e:t[n];return i===e&&(t!=null&&!rs(n,t)&&(n=ms(n),t=n.length==1?t:Hr(t,Qr(n,0,-1)),i=t==null?e:t[Ps(n)]),i=i===e?r:i),Tu(i)?i.call(t):i}function fa(e,t,n){if(e==null)return e;var r=t+"";t=e[r]!=null||rs(t,e)?[r]:ms(t);var i=-1,s=t.length,o=s-1,u=e;while(u!=null&&++i<s){var a=t[i];Nu(u)&&(i==o?u[a]=n:u[a]==null&&(u[a]=ts(t[i+1])?[]:{})),u=u[a]}return e}function la(t,n,r,i){var s=mu(t)||Pu(t);n=Ui(n,i,4);if(r==null)if(s||Nu(t)){var o=t.constructor;s?r=mu(t)?new o:[]:r=yr(Tu(o)?o.prototype:e)}else r={};return(s?Zn:_r)(t,function(e,t,i){return n(r,e,t,i)}),r}function ca(e){return ni(e,ta(e))}function ha(e){return ni(e,na(e))}function pa(t,n,r){return n=+n||0,r===e?(r=n,n=0):r=+r||0,t>=xn(n,r)&&t<Sn(n,r)}function da(t,n,r){r&&ns(t,n,r)&&(n=r=e);var i=t==null,s=n==null;r==null&&(s&&typeof t=="boolean"?(r=t,t=1):typeof n=="boolean"&&(r=n,s=!0)),i&&s&&(n=1,s=!1),t=+t||0,s?(n=t,t=0):n=+n||0;if(r||t%1||n%1){var o=Cn();return xn(t+o*(n-t+an("1e-"+((o+"").length-1))),n)}return $r(t,n)}function ma(e){return e=Bt(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function ga(e){return e=Bt(e),e&&e.replace(ct,Rt).replace(it,"")}function ya(t,n,r){t=Bt(t),n+="";var i=t.length;return r=r===e?i:xn(r<0?0:+r||0,i),r-=n.length,r>=0&&t.indexOf(n,r)==r}function ba(e){return e=Bt(e),e&&K.test(e)?e.replace($,Ut):e}function wa(e){return e=Bt(e),e&&rt.test(e)?e.replace(nt,zt):e||"(?:)"}function Sa(e,t,n){e=Bt(e),t=+t;var r=e.length;if(r>=t||!wn(t))return e;var i=(t-r)/2,s=yn(i),o=mn(i);return n=Pi("",o,n),n.slice(0,s)+e+n}function Na(e,t,n){return(n?ns(e,t,n):t==null)?t=0:t&&(t=+t),e=Ma(e),Nn(e,t||(at.test(e)?16:10))}function Ca(e,t){var n="";e=Bt(e),t=+t;if(t<1||!e||!wn(t))return n;do t%2&&(n+=e),t=yn(t/2),e+=e;while(t);return n}function Aa(e,t,n){return e=Bt(e),n=n==null?0:xn(n<0?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function Oa(t,n,r){var i=Hn.templateSettings;r&&ns(t,n,r)&&(n=r=e),t=Bt(t),n=hr(pr({},r||n),i,cr);var s=hr(pr({},n.imports),i.imports,cr),o=ta(s),u=ni(s,o),a,f,l=0,c=n.interpolate||ht,h="__p += '",p=Tt((n.escape||ht).source+"|"+c.source+"|"+(c===Y?ot:ht).source+"|"+(n.evaluate||ht).source+"|$","g"),d="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++mt+"]")+"\n";t.replace(p,function(e,n,r,i,s,o){return r||(r=i),h+=t.slice(l,o).replace(pt,Wt),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(f=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=o+e.length,e}),h+="';\n";var v=n.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(f?h.replace(z,""):h).replace(W,"$1").replace(X,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=ja(function(){return wt(o,d+"return "+h).apply(e,u)});m.source=h;if(Su(m))throw m;return m}function Ma(e,t,n){var r=e;return e=Bt(e),e?(n?ns(r,t,n):t==null)?e.slice(Qt(e),Gt(e)+1):(t+="",e.slice(jt(e,t),Ft(e,t)+1)):e}function _a(e,t,n){var r=e;return e=Bt(e),e?(n?ns(r,t,n):t==null)?e.slice(Qt(e)):e.slice(jt(e,t+"")):e}function Da(e,t,n){var r=e;return e=Bt(e),e?(n?ns(r,t,n):t==null)?e.slice(0,Gt(e)+1):e.slice(0,Ft(e,t+"")+1):e}function Pa(t,n,r){r&&ns(t,n,r)&&(n=e);var i=c,s=h;if(n!=null)if(Nu(n)){var o="separator"in n?n.separator:o;i="length"in n?+n.length||0:i,s="omission"in n?Bt(n.omission):s}else i=+n||0;t=Bt(t);if(i>=t.length)return t;var u=i-s.length;if(u<1)return s;var a=t.slice(0,u);if(o==null)return a+s;if(_u(o)){if(t.slice(u).search(o)){var f,l,p=t.slice(0,u);o.global||(o=Tt(o.source,(ut.exec(o)||"")+"g")),o.lastIndex=0;while(f=o.exec(p))l=f.index;a=a.slice(0,l==null?u:l)}}else if(t.indexOf(o,u)!=u){var d=a.lastIndexOf(o);d>-1&&(a=a.slice(0,d))}return a+s}function Ha(e){return e=Bt(e),e&&J.test(e)?e.replace(V,Yt):e}function Ba(t,n,r){return r&&ns(t,n,r)&&(n=e),t=Bt(t),t.match(n||dt)||[]}function Fa(t,n,r){return r&&ns(t,n,r)&&(n=e),Vt(t)?Ra(t):mr(t,n)}function Ia(e){return function(){return e}}function qa(e){return e}function Ra(e){return qr(gr(e,!0))}function Ua(e,t){return Rr(e,gr(t,!0))}function Xa(t,n,r){if(r==null){var i=Nu(n),s=i?ta(n):e,o=s&&s.length?Pr(n,s):e;if(o?!o.length:!i)o=!1,r=n,n=t,t=this}o||(o=Pr(n,ta(n)));var u=!0,a=-1,f=Tu(t),l=o.length;r===!1?u=!1:Nu(r)&&"chain"in r&&(u=r.chain);while(++a<l){var c=o[a],h=n[c];t[c]=h,f&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(u||n){var r=t(this.__wrapped__),i=r.__actions__=Yn(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,sr([this.value()],arguments))}}(h))}return t}function Va(){return Mt._=rn,this}function $a(){}function Ja(e){return rs(e)?Wr(e):Xr(e)}function Ka(e){return function(t){return Hr(e,ms(t),t+"")}}function Qa(t,n,r){r&&ns(t,n,r)&&(n=r=e),t=+t||0,r=r==null?1:+r||0,n==null?(n=t,t=0):n=+n||0;var i=-1,s=Sn(mn((n-t)/(r||1)),0),o=O(s);while(++i<s)o[i]=t,t+=r;return o}function Ga(e,t,n){e=yn(e);if(e<1||!wn(e))return[];var r=-1,i=O(xn(e,An));t=ui(t,n,1);while(++r<e)r<An?i[r]=t(r):t(r);return i}function Ya(e){var t=++tn;return Bt(e)+t}function Za(e,t){return(+e||0)+(+t||0)}function of(t,n,r){return r&&ns(t,n,r)&&(n=e),n=Ui(n,r,3),n.length==1?fr(mu(t)?t:ds(t),n):ei(t,n)}C=C?en.defaults(Mt.Object(),C,en.pick(Mt,vt)):Mt;var O=C.Array,_=C.Date,bt=C.Error,wt=C.Function,Et=C.Math,St=C.Number,xt=C.Object,Tt=C.RegExp,Nt=C.String,Ct=C.TypeError,kt=O.prototype,Lt=xt.prototype,At=Nt.prototype,Ot=wt.prototype.toString,$t=Lt.hasOwnProperty,tn=0,nn=Lt.toString,rn=Mt._,sn=Tt("^"+Ot.call($t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),on=C.ArrayBuffer,un=C.clearTimeout,an=C.parseFloat,fn=Et.pow,ln=Lt.propertyIsEnumerable,cn=Ji(C,"Set"),hn=C.setTimeout,pn=kt.splice,dn=C.Uint8Array,vn=Ji(C,"WeakMap"),mn=Et.ceil,gn=Ji(xt,"create"),yn=Et.floor,bn=Ji(O,"isArray"),wn=C.isFinite,En=Ji(xt,"keys"),Sn=Et.max,xn=Et.min,Tn=Ji(_,"now"),Nn=C.parseInt,Cn=Et.random,kn=St.NEGATIVE_INFINITY,Ln=St.POSITIVE_INFINITY,An=4294967295,On=An-1,Mn=An>>>1,_n=9007199254740991,Dn=vn&&new vn,Pn={},Fn=Hn.support={};Hn.templateSettings={escape:Q,evaluate:G,interpolate:Y,variable:"",imports:{_:Hn}};var yr=function(){function t(){}return function(n){if(Nu(n)){t.prototype=n;var r=new t;t.prototype=e}return r||{}}}(),Er=pi(_r),Sr=pi(Dr,!0),Ar=di(),Or=di(!0),Kr=Dn?function(e,t){return Dn.set(e,t),e}:qa,zi=Dn?function(e){return Dn.get(e)}:$a,Vi=Wr("length"),hs=function(){var e=0,t=0;return function(n,r){var i=qo(),s=d-(i-t);t=i;if(s>0){if(++e>=p)return n}else e=0;return Kr(n,r)}}(),ws=uu(function(e,t){return Vt(e)&&es(e)?wr(e,Lr(t,!1,!0)):[]}),Cs=xi(),ks=xi(!0),Ds=uu(function(e){var t=e.length,n=t,r=O(l),i=Xi(),s=i===Pt,o=[];while(n--){var u=e[n]=es(u=e[n])?u:[];r[n]=s&&u.length>=120?mi(n&&u):null}var a=e[0],f=-1,l=a?a.length:0,c=r[0];e:while(++f<l){u=a[f];if((c?Kn(c,u):i(o,u,0))<0){var n=t;while(--n){var h=r[n];if((h?Kn(h,u):i(e[n],u,0))<0)continue e}c&&c.push(u),o.push(u)}}return o}),js=uu(function(e,t){t=Lr(t);var n=dr(e,t);return Vr(e,t.sort(_t)),n}),Rs=ji(),Us=ji(!0),$s=uu(function(e){return ti(Lr(e,!1,!0))}),Gs=uu(function(e,t){return es(e)?wr(e,t):[]}),Zs=uu(Ks),to=uu(function(t){var n=t.length,r=n>2?t[n-2]:e,i=n>1?t[n-1]:e;return n>2&&typeof r=="function"?n-=2:(r=n>1&&typeof i=="function"?(--n,i):e,i=e),t.length=n,Qs(t,r,i)}),uo=uu(function(e){return e=Lr(e),this.thru(function(t){return Gn(mu(t)?t:[vs(t)],e)})}),ho=uu(function(e,t){return dr(e,Lr(t))}),po=ci(function(e,t,n){$t.call(e,n)?++e[n]:e[n]=1}),go=Si(Er),yo=Si(Sr,!0),wo=Ci(Zn,Er),Eo=Ci(er,Sr),So=ci(function(e,t,n){$t.call(e,n)?e[n].push(t):e[n]=[t]}),To=ci(function(e,t,n){e[n]=t}),No=uu(function(t,n,r){var i=-1,s=typeof n=="function",o=rs(n),u=es(t)?O(t.length):[];return Er(t,function(t){var a=s?n:o&&t!=null?t[n]:e;u[++i]=a?a.apply(t,r):Zi(t,n,r)}),u}),ko=ci(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ao=_i(or,Er),Oo=_i(ur,Sr),jo=uu(function(e,t){if(e==null)return[];var n=t[2];return n&&ns(t[0],t[1],n)&&(t.length=1),Zr(e,Lr(t),[])}),qo=Tn||function(){return(new _).getTime()},Wo=uu(function(e,t,r){var i=n;if(r.length){var s=Jt(r,Wo.placeholder);i|=u}return Fi(e,i,t,r,s)}),Xo=uu(function(e,t){t=t.length?Lr(t):Gu(e);var r=-1,i=t.length;while(++r<i){var s=t[r];e[s]=Fi(e[s],n,e)}return e}),Vo=uu(function(e,t,i){var s=n|r;if(i.length){var o=Jt(i,Vo.placeholder);s|=u}return Fi(t,s,e,i,o)}),$o=bi(s),Jo=bi(o),Qo=uu(function(e,t){return br(e,1,t)}),Go=uu(function(e,t,n){return br(e,t,n)}),Yo=Ni(),Zo=Ni(!0),tu=uu(function(e,t){t=Lr(t);if(typeof e!="function"||!tr(t,Ht))throw new Ct(y);var n=t.length;return uu(function(r){var i=xn(r.length,n);while(i--)r[i]=t[i](r[i]);return e.apply(this,r)})}),iu=Mi(u),su=Mi(a),ou=uu(function(t,n){return Fi(t,l,e,e,e,Lr(n))}),mu=bn||function(e){return Vt(e)&&ss(e.length)&&nn.call(e)==E},qu=hi(Ur),Ru=hi(function(e,t,n){return n?hr(e,t,n):pr(e,t)}),zu=wi(Ru,lr),Wu=wi(qu,as),Xu=Ti(_r),Vu=Ti(Dr),$u=ki(Ar),Ju=ki(Or),Ku=Li(_r),Qu=Li(Dr),ta=En?function(t){var n=t==null?e:t.constructor;return typeof n=="function"&&n.prototype===t||typeof t!="function"&&es(t)?ps(t):Nu(t)?En(t):[]}:ps,ra=Ai(!0),ia=Ai(),sa=uu(function(e,t){if(e==null)return{};if(typeof t[0]!="function"){var t=ir(Lr(t),Nt);return fs(e,wr(na(e),t))}var n=ui(t[0],t[1],3);return ls(e,function(e,t,r){return!n(e,t,r)})}),ua=uu(function(e,t){return e==null?{}:typeof t[0]=="function"?ls(e,ui(t[0],t[1],3)):fs(e,Lr(t))}),va=gi(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Ea=gi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),xa=Oi(),Ta=Oi(!0),ka=gi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),La=gi(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),ja=uu(function(t,n){try{return t.apply(e,n)}catch(r){return Su(r)?r:new bt(r)}}),za=uu(function(e,t){return function(n){return Zi(n,e,t)}}),Wa=uu(function(e,t){return function(n){return Zi(e,n,t)}}),ef=Bi("ceil"),tf=Bi("floor"),nf=Ei(pu,kn),rf=Ei(Bu,Ln),sf=Bi("round");return Hn.prototype=Bn.prototype,jn.prototype=yr(Bn.prototype),jn.prototype.constructor=jn,In.prototype=yr(Bn.prototype),In.prototype.constructor=In,zn.prototype["delete"]=Wn,zn.prototype.get=Xn,zn.prototype.has=Vn,zn.prototype.set=$n,Jn.prototype.push=Qn,eu.Cache=zn,Hn.after=Ro,Hn.ary=Uo,Hn.assign=Ru,Hn.at=ho,Hn.before=zo,Hn.bind=Wo,Hn.bindAll=Xo,Hn.bindKey=Vo,Hn.callback=Fa,Hn.chain=no,Hn.chunk=ys,Hn.compact=bs,Hn.constant=Ia,Hn.countBy=po,Hn.create=Uu,Hn.curry=$o,Hn.curryRight=Jo,Hn.debounce=Ko,Hn.defaults=zu,Hn.defaultsDeep=Wu,Hn.defer=Qo,Hn.delay=Go,Hn.difference=ws,Hn.drop=Es,Hn.dropRight=Ss,Hn.dropRightWhile=xs,Hn.dropWhile=Ts,Hn.fill=Ns,Hn.filter=mo,Hn.flatten=As,Hn.flattenDeep=Os,Hn.flow=Yo,Hn.flowRight=Zo,Hn.forEach=wo,Hn.forEachRight=Eo,Hn.forIn=$u,Hn.forInRight=Ju,Hn.forOwn=Ku,Hn.forOwnRight=Qu,Hn.functions=Gu,Hn.groupBy=So,Hn.indexBy=To,Hn.initial=_s,Hn.intersection=Ds,Hn.invert=ea,Hn.invoke=No,Hn.keys=ta,Hn.keysIn=na,Hn.map=Co,Hn.mapKeys=ra,Hn.mapValues=ia,Hn.matches=Ra,Hn.matchesProperty=Ua,Hn.memoize=eu,Hn.merge=qu,Hn.method=za,Hn.methodOf=Wa,Hn.mixin=Xa,Hn.modArgs=tu,Hn.negate=nu,Hn.omit=sa,Hn.once=ru,Hn.pairs=oa,Hn.partial=iu,Hn.partialRight=su,Hn.partition=ko,Hn.pick=ua,Hn.pluck=Lo,Hn.property=Ja,Hn.propertyOf=Ka,Hn.pull=Bs,Hn.pullAt=js,Hn.range=Qa,Hn.rearg=ou,Hn.reject=Mo,Hn.remove=Fs,Hn.rest=Is,Hn.restParam=uu,Hn.set=fa,Hn.shuffle=Do,Hn.slice=qs,Hn.sortBy=Bo,Hn.sortByAll=jo,Hn.sortByOrder=Fo,Hn.spread=au,Hn.take=zs,Hn.takeRight=Ws,Hn.takeRightWhile=Xs,Hn.takeWhile=Vs,Hn.tap=ro,Hn.throttle=fu,Hn.thru=io,Hn.times=Ga,Hn.toArray=Fu,Hn.toPlainObject=Iu,Hn.transform=la,Hn.union=$s,Hn.uniq=Js,Hn.unzip=Ks,Hn.unzipWith=Qs,Hn.values=ca,Hn.valuesIn=ha,Hn.where=Io,Hn.without=Gs,Hn.wrap=lu,Hn.xor=Ys,Hn.zip=Zs,Hn.zipObject=eo,Hn.zipWith=to,Hn.backflow=Zo,Hn.collect=Co,Hn.compose=Zo,Hn.each=wo,Hn.eachRight=Eo,Hn.extend=Ru,Hn.iteratee=Fa,Hn.methods=Gu,Hn.object=eo,Hn.select=mo,Hn.tail=Is,Hn.unique=Js,Xa(Hn,Hn),Hn.add=Za,Hn.attempt=ja,Hn.camelCase=va,Hn.capitalize=ma,Hn.ceil=ef,Hn.clone=cu,Hn.cloneDeep=hu,Hn.deburr=ga,Hn.endsWith=ya,Hn.escape=ba,Hn.escapeRegExp=wa,Hn.every=vo,Hn.find=go,Hn.findIndex=Cs,Hn.findKey=Xu,Hn.findLast=yo,Hn.findLastIndex=ks,Hn.findLastKey=Vu,Hn.findWhere=bo,Hn.first=Ls,Hn.floor=tf,Hn.get=Yu,Hn.gt=pu,Hn.gte=du,Hn.has=Zu,Hn.identity=qa,Hn.includes=xo,Hn.indexOf=Ms,Hn.inRange=pa,Hn.isArguments=vu,Hn.isArray=mu,Hn.isBoolean=gu,Hn.isDate=yu,Hn.isElement=bu,Hn.isEmpty=wu,Hn.isEqual=Eu,Hn.isError=Su,Hn.isFinite=xu,Hn.isFunction=Tu,Hn.isMatch=Cu,Hn.isNaN=ku,Hn.isNative=Lu,Hn.isNull=Au,Hn.isNumber=Ou,Hn.isObject=Nu,Hn.isPlainObject=Mu,Hn.isRegExp=_u,Hn.isString=Du,Hn.isTypedArray=Pu,Hn.isUndefined=Hu,Hn.kebabCase=Ea,Hn.last=Ps,Hn.lastIndexOf=Hs,Hn.lt=Bu,Hn.lte=ju,Hn.max=nf,Hn.min=rf,Hn.noConflict=Va,Hn.noop=$a,Hn.now=qo,Hn.pad=Sa,Hn.padLeft=xa,Hn.padRight=Ta,Hn.parseInt=Na,Hn.random=da,Hn.reduce=Ao,Hn.reduceRight=Oo,Hn.repeat=Ca,Hn.result=aa,Hn.round=sf,Hn.runInContext=Zt,Hn.size=Po,Hn.snakeCase=ka,Hn.some=Ho,Hn.sortedIndex=Rs,Hn.sortedLastIndex=Us,Hn.startCase=La,Hn.startsWith=Aa,Hn.sum=of,Hn.template=Oa,Hn.trim=Ma,Hn.trimLeft=_a,Hn.trimRight=Da,Hn.trunc=Pa,Hn.unescape=Ha,Hn.uniqueId=Ya,Hn.words=Ba,Hn.all=vo,Hn.any=Ho,Hn.contains=xo,Hn.eq=Eu,Hn.detect=go,Hn.foldl=Ao,Hn.foldr=Oo,Hn.head=Ls,Hn.include=xo,Hn.inject=Ao,Xa(Hn,function(){var e={};return _r(Hn,function(t,n){Hn.prototype[n]||(e[n]=t)}),e}(),!1),Hn.sample=_o,Hn.prototype.sample=function(e){return!this.__chain__&&e==null?_o(this.value()):this.thru(function(t){return _o(t,e)})},Hn.VERSION=t,Zn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Hn[e].placeholder=Hn}),Zn(["drop","take"],function(e,t){In.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new In(this);n=n==null?1:Sn(yn(n)||0,0);var i=this.clone();return r?i.__takeCount__=xn(i.__takeCount__,n):i.__views__.push({size:n,type:e+(i.__dir__<0?"Right":"")}),i},In.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Zn(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n!=g;In.prototype[e]=function(e,t){var i=this.clone();return i.__iteratees__.push({iteratee:Ui(e,t,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),Zn(["first","last"],function(e,t){var n="take"+(t?"Right":"");In.prototype[e]=function(){return this[n](1).value()[0]}}),Zn(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");In.prototype[e]=function(){return this.__filtered__?new In(this):this[n](1)}}),Zn(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?qr:Ja;In.prototype[e]=function(e){return this[n](r(e))}}),In.prototype.compact=function(){return this.filter(qa)},In.prototype.reject=function(e,t){return e=Ui(e,t,1),this.filter(function(t){return!e(t)})},In.prototype.slice=function(t,n){t=t==null?0:+t||0;var r=this;return r.__filtered__&&(t>0||n<0)?new In(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),n!==e&&(n=+n||0,r=n<0?r.dropRight(-n):r.take(n-t)),r)},In.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},In.prototype.toArray=function(){return this.take(Ln)},_r(In.prototype,function(t,n){var r=/^(?:filter|map|reject)|While$/.test(n),i=/^(?:first|last)$/.test(n),s=Hn[i?"take"+(n=="last"?"Right":""):n];if(!s)return;Hn.prototype[n]=function(){var n=i?[1]:arguments,o=this.__chain__,u=this.__wrapped__,a=!!this.__actions__.length,f=u instanceof In,l=n[0],c=f||mu(u);c&&r&&typeof l=="function"&&l.length!=1&&(f=c=!1);var h=function(t){return i&&o?s(t,1)[0]:s.apply(e,sr([t],n))},p={func:io,args:[h],thisArg:e},d=f&&!a;if(i&&!o)return d?(u=u.clone(),u.__actions__.push(p),t.call(u)):s.call(e,this.value())[0];if(!i&&c){u=d?u:new In(this);var v=t.apply(u,n);return v.__actions__.push(p),new jn(v,o)}return this.thru(h)}}),Zn(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?At:kt)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);Hn.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),_r(In.prototype,function(e,t){var n=Hn[t];if(n){var r=n.name+"",i=Pn[r]||(Pn[r]=[]);i.push({name:t,func:n})}}),Pn[Di(e,r).name]=[{name:"wrapper",func:e}],In.prototype.clone=qn,In.prototype.reverse=Rn,In.prototype.value=Un,Hn.prototype.chain=so,Hn.prototype.commit=oo,Hn.prototype.concat=uo,Hn.prototype.plant=ao,Hn.prototype.reverse=fo,Hn.prototype.toString=lo,Hn.prototype.run=Hn.prototype.toJSON=Hn.prototype.valueOf=Hn.prototype.value=co,Hn.prototype.collect=Hn.prototype.map,Hn.prototype.head=Hn.prototype.first,Hn.prototype.select=Hn.prototype.filter,Hn.prototype.tail=Hn.prototype.rest,Hn}var e,t="3.10.1",n=1,r=2,i=4,s=8,o=16,u=32,a=64,f=128,l=256,c=30,h="...",p=150,d=16,v=200,m=1,g=2,y="Expected a function",b="__lodash_placeholder__",w="[object Arguments]",E="[object Array]",S="[object Boolean]",x="[object Date]",T="[object Error]",N="[object Function]",C="[object Map]",k="[object Number]",L="[object Object]",A="[object RegExp]",O="[object Set]",M="[object String]",_="[object WeakMap]",D="[object ArrayBuffer]",P="[object Float32Array]",H="[object Float64Array]",B="[object Int8Array]",j="[object Int16Array]",F="[object Int32Array]",I="[object Uint8Array]",q="[object Uint8ClampedArray]",R="[object Uint16Array]",U="[object Uint32Array]",z=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V=/&(?:amp|lt|gt|quot|#39|#96);/g,$=/[&<>"'`]/g,J=RegExp(V.source),K=RegExp($.source),Q=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,et=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,nt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,rt=RegExp(nt.source),it=/[\u0300-\u036f\ufe20-\ufe23]/g,st=/\\(\\)?/g,ot=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ut=/\w*$/,at=/^0[xX]/,ft=/^\[object .+?Constructor\]$/,lt=/^\d+$/,ct=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,ht=/($^)/,pt=/['\n\r\u2028\u2029\\]/g,dt=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),vt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],mt=-1,gt={};gt[P]=gt[H]=gt[B]=gt[j]=gt[F]=gt[I]=gt[q]=gt[R]=gt[U]=!0,gt[w]=gt[E]=gt[D]=gt[S]=gt[x]=gt[T]=gt[N]=gt[C]=gt[k]=gt[L]=gt[A]=gt[O]=gt[M]=gt[_]=!1;var yt={};yt[w]=yt[E]=yt[D]=yt[S]=yt[x]=yt[P]=yt[H]=yt[B]=yt[j]=yt[F]=yt[k]=yt[L]=yt[A]=yt[M]=yt[I]=yt[q]=yt[R]=yt[U]=!0,yt[T]=yt[N]=yt[C]=yt[O]=yt[_]=!1;var bt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},wt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Et={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},St={"function":!0,object:!0},xt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Tt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Nt=St[typeof exports]&&exports&&!exports.nodeType&&exports,Ct=St[typeof module]&&module&&!module.nodeType&&module,kt=Nt&&Ct&&typeof global=="object"&&global&&global.Object&&global,Lt=St[typeof self]&&self&&self.Object&&self,At=St[typeof window]&&window&&window.Object&&window,Ot=Ct&&Ct.exports===Nt&&Nt,Mt=kt||At!==(this&&this.window)&&At||Lt||this,en=Zt();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Mt._=en,define(function(){return en})):Nt&&Ct?Ot?(Ct.exports=en)._=en:Nt._=en:Mt._=en}.call(this),function(){(function(){(function(){var t=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},createConsumer:function(t){var n;return t==null&&(t=(n=this.getConfig("url"))!=null?n:this.INTERNAL.default_mount_path),new e.Consumer(this.createWebSocketURL(t))},getConfig:function(e){var t;return t=document.head.querySelector("meta[name='action-cable-"+e+"']"),t!=null?t.getAttribute("content"):void 0},createWebSocketURL:function(e){var t;return e&&!/^wss?:/i.test(e)?(t=document.createElement("a"),t.href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href):e},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var e;e=1<=arguments.length?t.call(arguments,0):[];if(this.debugging)return e.push(Date.now()),console.log.apply(console,["[ActionCable]"].concat(t.call(e)))}}}).call(this)}).call(this);var e=this.ActionCable;(function(){(function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.ConnectionMonitor=function(){function s(e){this.connection=e,this.visibilityDidChange=t(this.visibilityDidChange,this),this.reconnectAttempts=0}var n,r,i;return s.pollInterval={min:3,max:30},s.staleThreshold=6,s.prototype.start=function(){if(!this.isRunning())return this.startedAt=r(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),e.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},s.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=r(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),e.log("ConnectionMonitor stopped")},s.prototype.isRunning=function(){return this.startedAt!=null&&this.stoppedAt==null},s.prototype.recordPing=function(){return this.pingedAt=r()},s.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,e.log("ConnectionMonitor recorded connect")},s.prototype.recordDisconnect=function(){return this.disconnectedAt=r(),e.log("ConnectionMonitor recorded disconnect")},s.prototype.startPolling=function(){return this.stopPolling(),this.poll()},s.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},s.prototype.poll=function(){return this.pollTimeout=setTimeout(function(e){return function(){return e.reconnectIfStale(),e.poll()}}(this),this.getPollInterval())},s.prototype.getPollInterval=function(){var e,t,r,i;return i=this.constructor.pollInterval,r=i.min,t=i.max,e=5*Math.log(this.reconnectAttempts+1),Math.round(n(e,r,t)*1e3)},s.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return e.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+i(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?e.log("ConnectionMonitor skipping reopening recent disconnect"):(e.log("ConnectionMonitor reopening"),this.connection.reopen())},s.prototype.connectionIsStale=function(){var e;return i((e=this.pingedAt)!=null?e:this.startedAt)>this.constructor.staleThreshold},s.prototype.disconnectedRecently=function(){return this.disconnectedAt&&i(this.disconnectedAt)<this.constructor.staleThreshold},s.prototype.visibilityDidChange=function(){if(document.visibilityState==="visible")return setTimeout(function(t){return function(){if(t.connectionIsStale()||!t.connection.isOpen())return e.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),t.connection.reopen()}}(this),200)},r=function(){return(new Date).getTime()},i=function(e){return(r()-e)/1e3},n=function(e,t,n){return Math.max(t,Math.min(n,e))},s}()}).call(this),function(){var t,n,r,i,s,o,u=[].slice,a=function(e,t){return function(){return e.apply(t,arguments)}},f=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=e.INTERNAL,n=i.message_types,r=i.protocols,s=2<=r.length?u.call(r,0,t=r.length-1):(t=0,[]),o=r[t++],e.Connection=function(){function t(t){this.consumer=t,this.open=a(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new e.ConnectionMonitor(this),this.disconnected=!0}return t.reopenDelay=500,t.prototype.send=function(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1},t.prototype.open=function(){if(this.isActive())throw e.log("Attempted to open WebSocket, but existing socket is "+this.getState()),new Error("Existing connection must be closed before opening");return e.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+r),this.webSocket!=null&&this.uninstallEventHandlers(),this.webSocket=new WebSocket(this.consumer.url,r),this.installEventHandlers(),this.monitor.start(),!0},t.prototype.close=function(e){var t,n;t=(e!=null?e:{allowReconnect:!0}).allowReconnect,t||this.monitor.stop();if(this.isActive())return(n=this.webSocket)!=null?n.close():void 0},t.prototype.reopen=function(){var t,n;e.log("Reopening WebSocket, current state is "+this.getState());if(!this.isActive())return this.open();try{return this.close()}catch(n){return t=n,e.log("Failed to reopen WebSocket",t)}finally{e.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},t.prototype.getProtocol=function(){var e;return(e=this.webSocket)!=null?e.protocol:void 0},t.prototype.isOpen=function(){return this.isState("open")},t.prototype.isActive=function(){return this.isState("open","connecting")},t.prototype.isProtocolSupported=function(){var e;return e=this.getProtocol(),f.call(s,e)>=0},t.prototype.isState=function(){var e,t;return t=1<=arguments.length?u.call(arguments,0):[],e=this.getState(),f.call(t,e)>=0},t.prototype.getState=function(){var e,t,n;for(t in WebSocket){n=WebSocket[t];if(n===((e=this.webSocket)!=null?e.readyState:void 0))return t.toLowerCase()}return null},t.prototype.installEventHandlers=function(){var e,t;for(e in this.events)t=this.events[e].bind(this),this.webSocket["on"+e]=t},t.prototype.uninstallEventHandlers=function(){var e;for(e in this.events)this.webSocket["on"+e]=function(){}},t.prototype.events={message:function(e){var t,r,i,s;if(!this.isProtocolSupported())return;i=JSON.parse(e.data),t=i.identifier,r=i.message,s=i.type;switch(s){case n.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case n.ping:return this.monitor.recordPing();case n.confirmation:return this.subscriptions.notify(t,"connected");case n.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",r)}},open:function(){e.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1;if(!this.isProtocolSupported())return e.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(t){e.log("WebSocket onclose event");if(this.disconnected)return;return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return e.log("WebSocket onerror event")}},t}()}.call(this),function(){var t=[].slice;e.Subscriptions=function(){function n(e){this.consumer=e,this.subscriptions=[]}return n.prototype.create=function(t,n){var r,i,s;return r=t,i=typeof r=="object"?r:{channel:r},s=new e.Subscription(this.consumer,i,n),this.add(s)},n.prototype.add=function(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.sendCommand(e,"subscribe"),e},n.prototype.remove=function(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e},n.prototype.reject=function(e){var t,n,r,i,s;r=this.findAll(e),i=[];for(t=0,n=r.length;t<n;t++)s=r[t],this.forget(s),this.notify(s,"rejected"),i.push(s);return i},n.prototype.forget=function(e){var t;return this.subscriptions=function(){var n,r,i,o;i=this.subscriptions,o=[];for(n=0,r=i.length;n<r;n++)t=i[n],t!==e&&o.push(t);return o}.call(this),e},n.prototype.findAll=function(e){var t,n,r,i,s;r=this.subscriptions,i=[];for(t=0,n=r.length;t<n;t++)s=r[t],s.identifier===e&&i.push(s);return i},n.prototype.reload=function(){var e,t,n,r,i;n=this.subscriptions,r=[];for(e=0,t=n.length;e<t;e++)i=n[e],r.push(this.sendCommand(i,"subscribe"));return r},n.prototype.notifyAll=function(){var e,n,r,i,s,o,u;n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],s=this.subscriptions,o=[];for(r=0,i=s.length;r<i;r++)u=s[r],o.push(this.notify.apply(this,[u,n].concat(t.call(e))));return o},n.prototype.notify=function(){var e,n,r,i,s,o,u;o=arguments[0],n=arguments[1],e=3<=arguments.length?t.call(arguments,2):[],typeof o=="string"?u=this.findAll(o):u=[o],s=[];for(r=0,i=u.length;r<i;r++)o=u[r],s.push(typeof o[n]=="function"?o[n].apply(o,e):void 0);return s},n.prototype.sendCommand=function(e,t){var n;return n=e.identifier,this.consumer.send({command:t,identifier:n})},n}()}.call(this),function(){e.Subscription=function(){function t(t,n,r){this.consumer=t,n==null&&(n={}),this.identifier=JSON.stringify(n),e(this,r)}var e;return t.prototype.perform=function(e,t){return t==null&&(t={}),t.action=e,this.send(t)},t.prototype.send=function(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})},t.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},e=function(e,t){var n,r;if(t!=null)for(n in t)r=t[n],e[n]=r;return e},t}()}.call(this),function(){e.Consumer=function(){function t(t){this.url=t,this.subscriptions=new e.Subscriptions(this),this.connection=new e.Connection(this)}return t.prototype.send=function(e){return this.connection.send(e)},t.prototype.connect=function(){return this.connection.open()},t.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},t.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},t}()}.call(this)}).call(this),typeof module=="object"&&module.exports?module.exports=e:typeof define=="function"&&define.amd&&define(e)}.call(this),function(){this.App||(this.App={}),App.cable=ActionCable.createConsumer()}.call(this),function(){}.call(this);var width=450,height=450,colors={clickable:"black",hover:"tomato",clicked:"orange",clickhover:"darkorange"},projection=d3.geoOrthographic().scale(width/2).translate([width/2,height/2]).clipAngle(90).precision(10),path=d3.geoPath().projection(projection),graticule=d3.geoGraticule(),map=d3.select("#globe_nav_container").append("svg").attr("width",width).attr("height",height).attr("class","map"),tooltip=d3.select("#globe_nav_container").append("div").attr("class","hidden tooltip");map.append("defs").append("path").datum({type:"Sphere"}).attr("id","sphere").attr("d",path),map.append("use").attr("class","stroke").attr("xlink:href","#sphere"),map.append("path").datum(graticule).attr("class","graticule").attr("d",path),$(".current-country-data").append('\n  <section class="instructions-section">\n    <h3 id="instructions-title">Click a Country to View Its Data</h3>\n    <p id="instructions">\n      Once you\'ve chosen a country, click on available cities. You will be able to view a Country\'s demographic information based on the <a href="https://www.cia.gov/library/publications/the-world-factbook/" target="_blank">CIA World Factbook.</a> Once you click on a country, you can view a respective city\'s "livability" ratings courtesy of <a href="https://nomadlist.com/" target="_blank">NomadList</a>.\n    </p>\n  </section>\n'),$.ajax({method:"GET",url:"/world_data",async:!0,dataType:"json",success:function(t){renderWorld(t[0],t[1])}}),d3.select(self.frameElement).style("height",height+"px"),function(){}.call(this),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Plotly=e()}}(function(){var e;return function t(e,n,r){function i(o,u){if(!n[o]){if(!e[o]){var f="function"==typeof require&&require;if(!u&&f)return f(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r=e("../src/lib"),i={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var s in i){var o=s.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.addStyleRule(o,i[s])}},{"../src/lib":657}],2:[function(e,t,n){"use strict";t.exports={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",ascent:850,descent:-150},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",ascent:850,descent:-150},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",ascent:850,descent:-150},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",ascent:850,descent:-150},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",ascent:850,descent:-150},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",ascent:850,descent:-150},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150},lasso:{width:1031,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",ascent:850,descent:-150},selectbox:{width:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",ascent:850,descent:-150}}},{}],3:[function(e,t,n){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":778}],4:[function(e,t,n){"use strict";t.exports=e("../src/traces/box")},{"../src/traces/box":790}],5:[function(e,t,n){"use strict";t.exports=e("../src/components/calendars")},{"../src/components/calendars":555}],6:[function(e,t,n){"use strict";t.exports=e("../src/traces/candlestick")},{"../src/traces/candlestick":798}],7:[function(e,t,n){"use strict";t.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":803}],8:[function(e,t,n){"use strict";t.exports=e("../src/traces/contour")},{"../src/traces/contour":812}],9:[function(e,t,n){"use strict";t.exports=e("../src/core")},{"../src/core":643}],10:[function(e,t,n){"use strict";t.exports=e("../src/transforms/filter")},{"../src/transforms/filter":943}],11:[function(e,t,n){"use strict";t.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":944}],12:[function(e,t,n){"use strict";t.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":827}],13:[function(e,t,n){"use strict";t.exports=e("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":836}],14:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram")},{"../src/traces/histogram":844}],15:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":849}],16:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":853}],17:[function(e,t,n){"use strict";var r=e("./core");r.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./pie"),e("./contour"),e("./scatterternary"),e("./scatter3d"),e("./surface"),e("./mesh3d"),e("./scattergeo"),e("./choropleth"),e("./scattergl"),e("./pointcloud"),e("./heatmapgl"),e("./scattermapbox"),e("./ohlc"),e("./candlestick")]),r.register([e("./filter"),e("./groupby")]),r.register([e("./calendars")]),t.exports=r},{"./bar":3,"./box":4,"./calendars":5,"./candlestick":6,"./choropleth":7,"./contour":8,"./core":9,"./filter":10,"./groupby":11,"./heatmap":12,"./heatmapgl":13,"./histogram":14,"./histogram2d":15,"./histogram2dcontour":16,"./mesh3d":18,"./ohlc":19,"./pie":20,"./pointcloud":21,"./scatter3d":22,"./scattergeo":23,"./scattergl":24,"./scattermapbox":25,"./scatterternary":26,"./surface":27}],18:[function(e,t,n){"use strict";t.exports=e("../src/traces/mesh3d")},{"../src/traces/mesh3d":857}],19:[function(e,t,n){"use strict";t.exports=e("../src/traces/ohlc")},{"../src/traces/ohlc":862}],20:[function(e,t,n){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":870}],21:[function(e,t,n){"use strict";t.exports=e("../src/traces/pointcloud")},{"../src/traces/pointcloud":879}],22:[function(e,t,n){"use strict";t.exports=e("../src/traces/scatter3d")},{"../src/traces/scatter3d":909}],23:[function(e,t,n){"use strict";t.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":915}],24:[function(e,t,n){"use strict";t.exports=e("../src/traces/scattergl")},{"../src/traces/scattergl":920}],25:[function(e,t,n){"use strict";t.exports=e("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":927}],26:[function(e,t,n){"use strict";t.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":933}],27:[function(e,t,n){"use strict";t.exports=e("../src/traces/surface")},{"../src/traces/surface":942}],28:[function(e,t,n){"use strict";function r(e,t){e=e||document.body,t=t||{};var n=[.01,1/0];"distanceLimits"in t&&(n[0]=t.distanceLimits[0],n[1]=t.distanceLimits[1]),"zoomMin"in t&&(n[0]=t.zoomMin),"zoomMax"in t&&(n[1]=t.zoomMax);var r=s({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:n}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0,c=e.clientWidth,h=e.clientHeight,p={view:r,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:r.modes,tick:function(){var t=i(),n=this.delay;r.idle(t-n),r.flush(t-(100+2*n));var s=t-2*n;r.recalcMatrix(s);for(var o=!0,u=r.computedMatrix,a=0;a<16;++a)o=o&&f[a]===u[a],f[a]=u[a];var p=e.clientWidth===c&&e.clientHeight===h;return c=e.clientWidth,h=e.clientHeight,o?!p:(l=Math.exp(r.computedRadius[0]),!0)},lookAt:function(e,t,n){r.lookAt(r.lastT(),e,t,n)},rotate:function(e,t,n){r.rotate(r.lastT(),e,t,n)},pan:function(e,t,n){r.pan(r.lastT(),e,t,n)},translate:function(e,t,n){r.translate(r.lastT(),e,t,n)}};Object.defineProperties(p,{matrix:{get:function(){return r.computedMatrix},set:function(e){return r.setMatrix(r.lastT(),e),r.computedMatrix},enumerable:!0},mode:{get:function(){return r.getMode()},set:function(e){return r.setMode(e),r.getMode()},enumerable:!0},center:{get:function(){return r.computedCenter},set:function(e){return r.lookAt(r.lastT(),e),r.computedCenter},enumerable:!0},eye:{get:function(){return r.computedEye},set:function(e){return r.lookAt(r.lastT(),null,e),r.computedEye},enumerable:!0},up:{get:function(){return r.computedUp},set:function(e){return r.lookAt(r.lastT(),null,null,e),r.computedUp},enumerable:!0},distance:{get:function(){return l},set:function(e){return r.setDistance(r.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return r.getDistanceLimits(n)},set:function(e){return r.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var d=0,v=0;return o(e,function(t,n,s,o){var u=1/e.clientHeight,a=u*(n-d),f=u*(s-v),c=p.flipX?1:-1,h=p.flipY?1:-1,m=Math.PI*p.rotateSpeed,g=i();if(1&t)o.shift?r.rotate(g,0,0,-a*m):r.rotate(g,c*m*a,-h*m*f,0);else if(2&t)r.pan(g,-p.translateSpeed*a*l,p.translateSpeed*f*l,0);else if(4&t){var y=p.zoomSpeed*f/window.innerHeight*(g-r.lastT())*50;r.pan(g,0,0,l*(Math.exp(y)-1))}d=n,v=s}),u(e,function(e,t,n){var s=p.flipX?1:-1,o=p.flipY?1:-1,u=i();if(Math.abs(e)>Math.abs(t))r.rotate(u,0,0,-e*s*Math.PI*p.rotateSpeed/window.innerWidth);else{var a=p.zoomSpeed*o*t/window.innerHeight*(u-r.lastT())/100;r.pan(u,0,0,l*(Math.exp(a)-1))}},!0),p}t.exports=r;var i=e("right-now"),s=e("3d-view"),o=e("mouse-change"),u=e("mouse-wheel")},{"3d-view":29,"mouse-change":418,"mouse-wheel":420,"right-now":465}],29:[function(e,t,n){"use strict";function r(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map(function(t){return e[t]}),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}function i(e){e=e||{};var t=e.eye||[0,0,1],n=e.center||[0,0,0],i=e.up||[0,1,0],a=e.distanceLimits||[0,1/0],f=e.mode||"turntable",l=s(),c=o(),h=u();return l.setDistanceLimits(a[0],a[1]),l.lookAt(0,t,n,i),c.setDistanceLimits(a[0],a[1]),c.lookAt(0,t,n,i),h.setDistanceLimits(a[0],a[1]),h.lookAt(0,t,n,i),new r({turntable:l,orbit:c,matrix:h},f)}t.exports=i;var s=e("turntable-camera-controller"),o=e("orbit-camera-controller"),u=e("matrix-camera-controller"),a=r.prototype,f=[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]];f.forEach(function(e){for(var t=e[0],n=[],r=0;r<e[1];++r)n.push("a"+r);var i="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+e[0]+"("+n.join()+")}";a[t]=Function.apply(null,n.concat(i))}),a.recalcMatrix=function(e){this._active.recalcMatrix(e)},a.getDistance=function(e){return this._active.getDistance(e)},a.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},a.lastT=function(){return this._active.lastT()},a.setMode=function(e){if(e!==this._mode){var t=this._controllerNames.indexOf(e);if(!(t<0)){var n=this._active,r=this._controllerList[t],i=Math.max(n.lastT(),r.lastT());n.recalcMatrix(i),r.setMatrix(i,n.computedMatrix),this._active=r,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},a.getMode=function(){return this._mode}},{"matrix-camera-controller":416,"orbit-camera-controller":437,"turntable-camera-controller":499}],30:[function(e,t,n){"use strict";function r(e){var t=u.get(e);if(!t||!e.isBuffer(t._triangleBuffer.buffer)){var n=s(e,new Float32Array([-1,-1,-1,4,4,-1]));t=o(e,[{buffer:n,type:e.FLOAT,size:2}]),t._triangleBuffer=n,u.set(e,t)}t.bind(),e.drawArrays(e.TRIANGLES,0,3),t.unbind()}var i="undefined"==typeof WeakMap?e("weak-map"):WeakMap,s=e("gl-buffer"),o=e("gl-vao"),u=new i;t.exports=r},{"gl-buffer":130,"gl-vao":241,"weak-map":520}],31:[function(e,t,n){function r(e,t,n){t="number"==typeof t?t:1,n=n||": ";var r=e.split(/\r?\n/),s=String(r.length+t-1).length;return r.map(function(e,r){var o=r+t,u=String(o).length,f=i(o,s-u);return f+n+e}).join("\n")}var i=e("pad-left");t.exports=r},{"pad-left":438}],32:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(t+1),r=0;r<e.length;++r)n[r]=e[r];for(var r=0;r<=e.length;++r){for(var i=e.length;i<=t;++i){for(var o=new Array(t),u=0;u<t;++u)o[u]=Math.pow(i+1-r,u);n[i]=o}var f=s.apply(void 0,n);if(f)return!0}return!1}function i(e){var t=e.length;if(0===t)return[];if(1===t)return[0];for(var n=e[0].length,i=[e[0]],s=[0],o=1;o<t;++o)if(i.push(e[o]),r(i,n)){if(s.push(o),s.length===n+1)return s}else i.pop();return s}t.exports=i;var s=e("robust-orientation")},{"robust-orientation":471}],33:[function(e,t,n){"use strict";function r(e,t){return i(t).filter(function(n){for(var r=new Array(n.length),i=0;i<n.length;++i)r[i]=t[n[i]];return s(r)*e<1})}t.exports=r;var i=e("delaunay-triangulate"),s=e("circumradius")},{circumradius:77,"delaunay-triangulate":98}],34:[function(e,t,n){function r(e,t){return s(i(e,t))}t.exports=r;var i=e("alpha-complex"),s=e("simplicial-complex-boundary")},{"alpha-complex":33,"simplicial-complex-boundary":479}],35:[function(e,t,n){"use strict";var r=function(){function e(e){return!Array.isArray(e)&&null!==e&&"object"==typeof e}function t(e,t,n){for(var r=(t-e)/Math.max(n-1,1),i=[],s=0;s<n;s++)i.push(e+s*r);return i}function n(){for(var e=[].slice.call(arguments),t=e.map(function(e){return e.length}),n=Math.min.apply(null,t),r=[],i=0;i<n;i++){r[i]=[];for(var s=0;s<e.length;++s)r[i][s]=e[s][i]}return r}function r(e,t,n){for(var r=Math.min.apply(null,[e.length,t.length,n.length]),i=[],s=0;s<r;s++)i.push([e[s],t[s],n[s]]);return i}function i(e){function t(e){for(var r=0;r<e.length;r++)Array.isArray(e[r])?t(e[r],n):n+=e[r]}var n=0;return t(e,n),n}function s(e){for(var t=[],n=0;n<e.length;++n){t[n]=[];for(var r=0;r<e[n].length;++r)t[n][r]=e[n][r]}return t}function o(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n];return t}function u(e,t){if(e.length!==t.length)return!1;for(var n=e.length;n--;)if(e[n]!==t[n])return!1;return!0}function a(e,t){var n,r;if("string"!=typeof e)return e;if(n=[],"#"===e[0]?(e=e.substr(1),3===e.length&&(e+=e),r=parseInt(e,16),n[0]=r>>16&255,n[1]=r>>8&255,n[2]=255&r):c.test(e)&&(r=e.match(h),n[0]=parseInt(r[1]),n[1]=parseInt(r[2]),n[2]=parseInt(r[3])),!t)for(var i=0;i<3;++i)n[i]=n[i]/255;return n}function f(e,t){var n,r;if("string"!=typeof e)return e;if(n=[],"#"===e[0]?(e=e.substr(1),3===e.length&&(e+=e),r=parseInt(e,16),n[0]=r>>16&255,n[1]=r>>8&255,n[2]=255&r):c.test(e)&&(r=e.match(h),n[0]=parseInt(r[1]),n[1]=parseInt(r[2]),n[2]=parseInt(r[3]),r[4]?n[3]=parseFloat(r[4]):n[3]=1),!t)for(var i=0;i<3;++i)n[i]=n[i]/255;return n}var l={},c=/^rgba?\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*(,.*)?\)$/,h=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?\s*(.*)?\)$/;return l.isPlainObject=e,l.linspace=t,l.zip3=r,l.sum=i,l.zip=n,l.isEqual=u,l.copy2D=s,l.copy1D=o,l.str2RgbArray=a,l.str2RgbaArray=f,l};t.exports=r()},{}],36:[function(e,t,n){function r(e,t){return p.isUndefined(t)?""+t:p.isNumber(t)&&!isFinite(t)?t.toString():p.isFunction(t)||p.isRegExp(t)?t.toString():t}function i(e,t){return p.isString(e)?e.length<t?e:e.slice(0,t):e}function s(e){return i(JSON.stringify(e.actual,r),128)+" "+e.operator+" "+i(JSON.stringify(e.expected,r),128)}function o(e,t,n,r,i){throw new m.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function u(e,t){e||o(e,!0,t,"==",m.ok)}function a(e,t){if(e===t)return!0;if(p.isBuffer(e)&&p.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return p.isDate(e)&&p.isDate(t)?e.getTime()===t.getTime():p.isRegExp(e)&&p.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:p.isObject(e)||p.isObject(t)?l(e,t):e==t}function f(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function l(e,t){if(p.isNullOrUndefined(e)||p.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(p.isPrimitive(e)||p.isPrimitive(t))return e===t;var n=f(e),r=f(t);if(n&&!r||!n&&r)return!1;if(n)return e=d.call(e),t=d.call(t),a(e,t);var i,s,o=g(e),u=g(t);if(o.length!=u.length)return!1;for(o.sort(),u.sort(),s=o.length-1;s>=0;s--)if(o[s]!=u[s])return!1;for(s=o.length-1;s>=0;s--)if(i=o[s],!a(e[i],t[i]))return!1;return!0}function c(e,t){return!!e&&!!t&&("[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t||t.call({},e)===!0)}function h(e,t,n,r){var i;p.isString(n)&&(r=n,n=null);try{t()}catch(e){i=e}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&o(i,n,"Missing expected exception"+r),!e&&c(i,n)&&o(i,n,"Got unwanted exception"+r),e&&i&&n&&!c(i,n)||!e&&i)throw i}var p=e("util/"),d=Array.prototype.slice,v=Object.prototype.hasOwnProperty,m=t.exports=u;m.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=s(this),this.generatedMessage=!0);var t=e.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=t.name,u=r.indexOf("\n"+i);if(u>=0){var a=r.indexOf("\n",u+1);r=r.substring(a+1)}this.stack=r}}},p.inherits(m.AssertionError,Error),m.fail=o,m.ok=u,m.equal=function(e,t,n){e!=t&&o(e,t,n,"==",m.equal)},m.notEqual=function(e,t,n){e==t&&o(e,t,n,"!=",m.notEqual)},m.deepEqual=function(e,t,n){a(e,t)||o(e,t,n,"deepEqual",m.deepEqual)},m.notDeepEqual=function(e,t,n){a(e,t)&&o(e,t,n,"notDeepEqual",m.notDeepEqual)},m.strictEqual=function(e,t,n){e!==t&&o(e,t,n,"===",m.strictEqual)},m.notStrictEqual=function(e,t,n){e===t&&o(e,t,n,"!==",m.notStrictEqual)},m.throws=function(e,t,n){h.apply(this,[!0].concat(d.call(arguments)))},m.doesNotThrow=function(e,t){h.apply(this,[!1].concat(d.call(arguments)))},m.ifError=function(e){if(e)throw e};var g=Object.keys||function(e){var t=[];for(var n in e)v.call(e,n)&&t.push(n);return t}},{"util/":510}],37:[function(e,t,n){t.exports=function(e){return atob(e)}},{}],38:[function(e,t,n){"use strict";function r(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return t}function i(e,t){for(var n=t.length,i=new Array(n+1),o=0;o<n;++o){for(var u=new Array(n+1),f=0;f<=n;++f)u[f]=e[f][o];i[o]=u}i[n]=new Array(n+1);for(var o=0;o<=n;++o)i[n][o]=1;for(var l=new Array(n+1),o=0;o<n;++o)l[o]=t[o];l[n]=1;var c=s(i,l),h=r(c[n+1]);0===h&&(h=1);for(var p=new Array(n+1),o=0;o<=n;++o)p[o]=r(c[o])/h;return p}t.exports=i;var s=e("robust-linear-solve")},{"robust-linear-solve":470}],39:[function(e,t,n){"use strict";function r(e,t){return i(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}var i=e("./lib/rationalize");t.exports=r},{"./lib/rationalize":49}],40:[function(e,t,n){"use strict";function r(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}t.exports=r},{}],41:[function(e,t,n){"use strict";function r(e,t){return i(e[0].mul(t[1]),e[1].mul(t[0]))}var i=e("./lib/rationalize");t.exports=r},{"./lib/rationalize":49}],42:[function(e,t,n){"use strict";function r(e,t){if(i(e))return t?f(e,r(t)):[e[0].clone(),e[1].clone()];var n,c,h=0;if(s(e))n=e.clone();else if("string"==typeof e)n=u(e);else{if(0===e)return[o(0),o(1)];if(e===Math.floor(e))n=o(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),h-=256;n=o(e)}}if(i(t))n.mul(t[1]),c=t[0].clone();else if(s(t))c=t.clone();else if("string"==typeof t)c=u(t);else if(t)if(t===Math.floor(t))c=o(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),h+=256;c=o(t)}else c=o(1);return h>0?n=n.shln(h):h<0&&(c=c.shln(-h)),a(n,c)}var i=e("./is-rat"),s=e("./lib/is-bn"),o=e("./lib/num-to-bn"),u=e("./lib/str-to-bn"),a=e("./lib/rationalize"),f=e("./div");t.exports=r},{"./div":41,"./is-rat":43,"./lib/is-bn":47,"./lib/num-to-bn":48,"./lib/rationalize":49,"./lib/str-to-bn":50}],43:[function(e,t,n){"use strict";function r(e){return Array.isArray(e)&&2===e.length&&i(e[0])&&i(e[1])}var i=e("./lib/is-bn");t.exports=r},{"./lib/is-bn":47}],44:[function(e,t,n){"use strict";function r(e){return e.cmp(new i(0))}var i=e("bn.js");t.exports=r},{"bn.js":57}],45:[function(e,t,n){"use strict";function r(e){var t=e.length,n=e.words,r=0;if(1===t)r=n[0];else if(2===t)r=n[0]+67108864*n[1];else for(var r=0,i=0;i<t;i++){var s=n[i];r+=s*Math.pow(67108864,i)}return e.sign?-r:r}t.exports=r},{}],46:[function(e,t,n){"use strict";function r(e){var t=s(i.lo(e));if(t<32)return t;var n=s(i.hi(e));return n>20?52:n+32}var i=e("double-bits"),s=e("bit-twiddle").countTrailingZeros;t.exports=r},{"bit-twiddle":56,"double-bits":99}],47:[function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&Boolean(e.words)}e("bn.js"),t.exports=r},{"bn.js":57}],48:[function(e,t,n){"use strict";function r(e){var t=s.exponent(e);return t<52?new i(e):(new i(e*Math.pow(2,52-t))).shln(t-52)}var i=e("bn.js"),s=e("double-bits");t.exports=r},{"bn.js":57,"double-bits":99}],49:[function(e,t,n){"use strict";function r(e,t){var n=s(e),r=s(t);if(0===n)return[i(0),i(1)];if(0===r)return[i(0),i(0)];r<0&&(e=e.neg(),t=t.neg());var o=e.gcd(t);return o.cmpn(1)?[e.div(o),t.div(o)]:[e,t]}var i=e("./num-to-bn"),s=e("./bn-sign");t.exports=r},{"./bn-sign":44,"./num-to-bn":48}],50:[function(e,t,n){"use strict";function r(e){return new i(e)}var i=e("bn.js");t.exports=r},{"bn.js":57}],51:[function(e,t,n){"use strict";function r(e,t){return i(e[0].mul(t[0]),e[1].mul(t[1]))}var i=e("./lib/rationalize");t.exports=r},{"./lib/rationalize":49}],52:[function(e,t,n){"use strict";function r(e){return i(e[0])*i(e[1])}var i=e("./lib/bn-sign");t.exports=r},{"./lib/bn-sign":44}],53:[function(e,t,n){"use strict";function r(e,t){return i(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}var i=e("./lib/rationalize");t.exports=r},{"./lib/rationalize":49}],54:[function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1];if(0===t.cmpn(0))return 0;var r=t.divmod(n),o=r.div,u=i(o),f=r.mod;if(0===f.cmpn(0))return u;if(u){var l=s(u)+4,c=i(f.shln(l).divRound(n));return u<0&&(c=-c),u+c*Math.pow(2,-l)}var h=n.bitLength()-f.bitLength()+53,c=i(f.shln(h).divRound(n));return h<1023?c*Math.pow(2,-h):(c*=Math.pow(2,-1023),c*Math.pow(2,1023-h))}var i=e("./lib/bn-to-num"),s=e("./lib/ctz");t.exports=r},{"./lib/bn-to-num":45,"./lib/ctz":46}],55:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){var o=["function ",e,"(a,l,h,",r.join(","),"){",s?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return s?t.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",t,"){i=m;"),n?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),s?o.push("return -1};"):o.push("return i};"),o.join("")}function i(e,t,n,i){var s=new Function([r("A","x"+e+"y",t,["y"],!1,i),r("B","x"+e+"y",t,["y"],!0,i),r("P","c(x,y)"+e+"0",t,["y","c"],!1,i),r("Q","c(x,y)"+e+"0",t,["y","c"],!0,i),"function dispatchBsearch",n,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",n].join(""));return s()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],56:[function(e,t,n){"use strict";"use restrict";function r(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var i=32;n.INT_BITS=i,n.INT_MAX=2147483647,n.INT_MIN=-1<<i-1,n.sign=function(e){return(e>0)-(e<0)},n.abs=function(e){var t=e>>i-1;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(e<t)},n.max=function(e,t){return e^(e^t)&-(e<t)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,t|=n,t|e>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var s=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(s),n.reverse=function(e){return s[255&e]<<24|s[e>>>8&255]<<16|s[e>>>16&255]<<8|s[e>>>24&255]},n.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},n.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},n.interleave3=function(e,t,n){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),e|n<<2},n.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},{}],57:[function(e,t,n){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){return null!==e&&"object"==typeof e&&Array.isArray(e.words)?e:(this.sign=!1,this.words=null,this.length=0,this.red=null,"le"!==t&&"be"!==t||(n=t,t=10),void (null!==e&&this._init(e||0,t||10,n||"be")))}function s(e,t,n){for(var r=0,i=Math.min(e.length,n),s=t;s<i;s++){var o=e.charCodeAt(s)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function o(e,t,n,r){for(var i=0,s=Math.min(e.length,n),o=t;o<s;o++){var u=e.charCodeAt(o)-48;i*=r,i+=u>=49?u-49+10:u>=17?u-17+10:u}return i}function u(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=(new i(1)).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function a(){u.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function f(){u.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function l(){u.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function c(){u.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function h(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else this.m=e,this.prime=null}function p(e){h.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=(new i(1)).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv.sign=!0,this.minv=this.minv.mod(this.r)}"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26,i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36),e=e.toString().replace(/\s+/g,"");var i=0;"-"===e[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.sign=!0),this.strip(),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initNumber=function(e,t,r){e<0&&(this.sign=!0,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s=0;if("be"===r)for(var i=e.length-1,o=0;i>=0;i-=3){var u=e[i]|e[i-1]<<8|e[i-2]<<16;this.words[o]|=u<<s&67108863,this.words[o+1]=u>>>26-s&67108863,s+=24,s>=26&&(s-=26,o++)}else if("le"===r)for(var i=0,o=0;i<e.length;i+=3){var u=e[i]|e[i+1]<<8|e[i+2]<<16;this.words[o]|=u<<s&67108863,this.words[o+1]=u>>>26-s&67108863,s+=24,s>=26&&(s-=26,o++)}return this.strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;for(var r=0,n=e.length-6,i=0;n>=t;n-=6){var o=s(e,n,n+6);this.words[i]|=o<<r&67108863,this.words[i+1]|=o>>>26-r&4194303,r+=24,r>=26&&(r-=26,i++)}if(n+6!==t){var o=s(e,t,n+6);this.words[i]|=o<<r&67108863,this.words[i+1]|=o>>>26-r&4194303}this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var s=e.length-n,u=s%r,a=Math.min(s,s-u)+n,f=0,l=n;l<a;l+=r)f=o(e,l,l+r,t),this.imuln(i),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(0!==u){for(var c=1,f=o(e,l,e.length,t),l=0;l<u;l++)c*=t;this.imuln(c),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.sign=this.sign,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){if(e=e||10,16===e||"hex"===e){for(var r="",i=0,t=0|t||1,s=0,o=0;o<this.length;o++){var u=this.words[o],a=(16777215&(u<<i|s)).toString(16);s=u>>>24-i&16777215,r=0!==s||o!==this.length-1?d[6-a.length]+a+r:a+r,i+=2,i>=26&&(i-=26,o--)}for(0!==s&&(r=s.toString(16)+r);r.length%t!==0;)r="0"+r;return this.sign&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var f=v[e],l=m[e],r="",c=this.clone();for(c.sign=!1;0!==c.cmpn(0);){var h=c.modn(l).toString(e);c=c.idivn(l),r=0!==c.cmpn(0)?d[f-h.length]+h+r:h+r}return 0===this.cmpn(0)&&(r="0"+r),this.sign&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toArray=function(e){this.strip();var t=new Array(this.byteLength());t[0]=0;var n=this.clone();if("le"!==e)for(var r=0;0!==n.cmpn(0);r++){var i=n.andln(255);n.ishrn(8),t[t.length-r-1]=i}else for(var r=0;0!==n.cmpn(0);r++){var i=n.andln(255);n.ishrn(8),t[r]=i}return t},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0===(8191&t)&&(n+=13,t>>>=13),0===(127&t)&&(n+=7,t>>>=7),0===(15&t)&&(n+=4,t>>>=4),0===(3&t)&&(n+=2,t>>>=2),0===(1&t)&&n++,n},i.prototype.bitLength=function(){var e=0,t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var e=this.clone();return e.sign=!this.sign,e},i.prototype.ior=function(e){for(this.sign=this.sign||e.sign;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.iand=function(e){this.sign=this.sign&&e.sign;var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.ixor=function(e){this.sign=this.sign||e.sign;var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);for(var r=e/26|0,i=e%26;this.length<=r;)this.words[this.length++]=0;return t?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this.strip()},i.prototype.iadd=function(e){if(this.sign&&!e.sign){this.sign=!1;var t=this.isub(e);return this.sign=!this.sign,this._normSign()}if(!this.sign&&e.sign){e.sign=!1;var t=this.isub(e);return e.sign=!0,t._normSign()}var n,r;this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,s=0;s<r.length;s++){var t=n.words[s]+r.words[s]+i;this.words[s]=67108863&t,i=t>>>26}for(;0!==i&&s<n.length;s++){var t=n.words[s]+i;this.words[s]=67108863&t,i=t>>>26}if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this},i.prototype.add=function(e){if(e.sign&&!this.sign){e.sign=!1;var t=this.sub(e);return e.sign=!0,t}if(!e.sign&&this.sign){this.sign=!1;var t=e.sub(this);return this.sign=!0,t}return this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(e.sign){e.sign=!1;var t=this.iadd(e);return e.sign=!0,t._normSign()}if(this.sign)return this.sign=!1,this.iadd(e),this.sign=!0,this._normSign();var n=this.cmp(e);if(0===n)return this.sign=!1,this.length=1,this.words[0]=0,this;var r,i;n>0?(r=this,i=e):(r=e,i=this);for(var s=0,o=0;o<i.length;o++){var t=r.words[o]-i.words[o]+s;s=t>>26,this.words[o]=67108863&t}for(;0!==s&&o<r.length;o++){var t=r.words[o]+s;s=t>>26,this.words[o]=67108863&t}if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.sign=!0),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)},i.prototype._smallMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var n=0,r=0;r<t.length-1;r++){for(var i=n>>>26,s=67108863&n,o=Math.min(r,e.length-1),u=Math.max(0,r-this.length+1);u<=o;u++){var a=r-u,f=0|this.words[a],l=0|e.words[u],c=f*l,h=67108863&c;i=i+(c/67108864|0)|0,h=h+s|0,s=67108863&h,i=i+(h>>>26)|0}t.words[r]=s,n=i}return 0!==n?t.words[r]=n:t.length--,t.strip()},i.prototype._bigMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var n=0,r=0,i=0;i<t.length-1;i++){var s=r;r=0;for(var o=67108863&n,u=Math.min(i,e.length-1),a=Math.max(0,i-this.length+1);a<=u;a++){var f=i-a,l=0|this.words[f],c=0|e.words[a],h=l*c,p=67108863&h;s=s+(h/67108864|0)|0,p=p+o|0,o=67108863&p,s=s+(p>>>26)|0,r+=s>>>26,s&=67108863}t.words[i]=o,n=s,s=r}return 0!==n?t.words[i]=n:t.length--,t.strip()},i.prototype.mulTo=function(e,t){var n;return n=this.length+e.length<63?this._smallMulTo(e,t):this._bigMulTo(e,t)},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.imul=function(e){if(0===this.cmpn(0)||0===e.cmpn(0))return this.words[0]=0,this.length=1,this;var t=this.length,n=e.length;this.sign=e.sign!==this.sign,this.length=this.length+e.length,this.words[this.length-1]=0;for(var r=this.length-2;r>=0;r--){for(var i=0,s=0,o=Math.min(r,n-1),u=Math.max(0,r-t+1);u<=o;u++){var a=r-u,f=this.words[a],l=e.words[u],c=f*l,h=67108863&c;i+=c/67108864|0,h+=s,s=67108863&h,i+=h>>>26}this.words[r]=s,this.words[r+1]+=i,i=0}for(var i=0,a=1;a<this.length;a++){var p=this.words[a]+i;this.words[a]=67108863&p,i=p>>>26}return this.strip()},i.prototype.imuln=function(e){n("number"==typeof e);for(var t=0,r=0;r<this.length;r++){var i=this.words[r]*e,s=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=s>>>26,this.words[r]=67108863&s}return 0!==t&&(this.words[r]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.mul(this)},i.prototype.ishln=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=67108863>>>26-t<<26-t;if(0!==t){for(var s=0,o=0;o<this.length;o++){var u=this.words[o]&i,a=this.words[o]-u<<t;this.words[o]=a|s,s=u>>>26-t}s&&(this.words[o]=s,this.length++)}if(0!==r){for(var o=this.length-1;o>=0;o--)this.words[o+r]=this.words[o];for(var o=0;o<r;o++)this.words[o]=0;this.length+=r}return this.strip()},i.prototype.ishrn=function(e,t,r){n("number"==typeof e&&e>=0);var i;i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),u=67108863^67108863>>>s<<s,a=r;if(i-=o,i=Math.max(0,i),a){for(var f=0;f<o;f++)a.words[f]=this.words[f];a.length=o}if(0!==o)if(this.length>o){this.length-=o;for(var f=0;f<this.length;f++)this.words[f]=this.words[f+o]}else this.words[0]=0,this.length=1;for(var l=0,f=this.length-1;f>=0&&(0!==l||f>=i);f--){var c=this.words[f];this.words[f]=l<<26-s|c>>>s,l=c&u}return a&&0!==l&&(a.words[a.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),this},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(!this.sign,"imaskn works only with positive numbers"),0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),e<0?this.isubn(-e):this.sign?1===this.length&&this.words[0]<e?(this.words[0]=e-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(e),this.sign=!0,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),e<0)return this.iaddn(-e);if(this.sign)return this.sign=!1,this.iaddn(e),this.sign=!0,this;this.words[0]-=e;for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.sign=!1,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,s=e.length+r;if(this.words.length<s){for(var o=new Array(s),i=0;i<this.length;i++)o[i]=this.words[i];this.words=o}else i=this.length;for(this.length=Math.max(this.length,s);i<this.length;i++)this.words[i]=0;for(var u=0,i=0;i<e.length;i++){var a=this.words[i+r]+u,f=e.words[i]*t;a-=67108863&f,u=(a>>26)-(f/67108864|0),this.words[i+r]=67108863&a}for(;i<this.length-r;i++){var a=this.words[i+r]+u;u=a>>26,this.words[i+r]=67108863&a}if(0===u)return this.strip();n(u===-1),u=0;for(var i=0;i<this.length;i++){var a=-this.words[i]+u;u=a>>26,this.words[i]=67108863&a}return this.sign=!0,this.strip()},i.prototype._wordDiv=function(e,t){var n=this.length-e.length,r=this.clone(),s=e,o=s.words[s.length-1],u=this._countBits(o);n=26-u,0!==n&&(s=s.shln(n),r.ishln(n),o=s.words[s.length-1]);var a,f=r.length-s.length;if("mod"!==t){a=new i(null),a.length=f+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var c=r.clone()._ishlnsubmul(s,1,f);c.sign||(r=c,a&&(a.words[f]=1));for(var h=f-1;h>=0;h--){var p=67108864*r.words[s.length+h]+r.words[s.length+h-1];for(p=Math.min(p/o|0,67108863),r._ishlnsubmul(s,p,h);r.sign;)p--,r.sign=!1,r._ishlnsubmul(s,1,h),0!==r.cmpn(0)&&(r.sign=!r.sign);a&&(a.words[h]=p)}return a&&a.strip(),r.strip(),"div"!==t&&0!==n&&r.ishrn(n),{div:a?a:null,mod:r}},i.prototype.divmod=function(e,t){if(n(0!==e.cmpn(0)),this.sign&&!e.sign){var r,s,o=this.neg().divmod(e,t);return"mod"!==t&&(r=o.div.neg()),"div"!==t&&(s=0===o.mod.cmpn(0)?o.mod:e.sub(o.mod)),{div:r,mod:s}}if(!this.sign&&e.sign){var r,o=this.divmod(e.neg(),t);return"mod"!==t&&(r=o.div.neg()),{div:r,mod:o.mod}}return this.sign&&e.sign?this.neg().divmod(e.neg(),t):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t)},i.prototype.div=function(e){return this.divmod(e,"div").div},i.prototype.mod=function(e){return this.divmod(e,"mod").mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(0===t.mod.cmpn(0))return t.div;var n=t.div.sign?t.mod.isub(e):t.mod,r=e.shrn(1),i=e.andln(1),s=n.cmp(r);return s<0||1===i&&0===s?t.div:t.div.sign?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+this.words[i])%e;return r},i.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=this.words[r]+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(!e.sign),n(0!==e.cmpn(0));var t=this,r=e.clone();t=t.sign?t.mod(e):t.clone();for(var s=new i(1),o=new i(0),u=new i(0),a=new i(1),f=0;t.isEven()&&r.isEven();)t.ishrn(1),r.ishrn(1),++f;for(var l=r.clone(),c=t.clone();0!==t.cmpn(0);){for(;t.isEven();)t.ishrn(1),s.isEven()&&o.isEven()?(s.ishrn(1),o.ishrn(1)):(s.iadd(l).ishrn(1),o.isub(c).ishrn(1));for(;r.isEven();)r.ishrn(1),u.isEven()&&a.isEven()?(u.ishrn(1),a.ishrn(1)):(u.iadd(l).ishrn(1),a.isub(c).ishrn(1));t.cmp(r)>=0?(t.isub(r),s.isub(u),o.isub(a)):(r.isub(t),u.isub(s),a.isub(o))}return{a:u,b:a,gcd:r.ishln(f)}},i.prototype._invmp=function(e){n(!e.sign),n(0!==e.cmpn(0));var t=this,r=e.clone();t=t.sign?t.mod(e):t.clone();for(var s=new i(1),o=new i(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(;t.isEven();)t.ishrn(1),s.isEven()?s.ishrn(1):s.iadd(u).ishrn(1);for(;r.isEven();)r.ishrn(1),o.isEven()?o.ishrn(1):o.iadd(u).ishrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(o)):(r.isub(t),o.isub(s))}return 0===t.cmpn(1)?s:o},i.prototype.gcd=function(e){if(0===this.cmpn(0))return e.clone();if(0===e.cmpn(0))return this.clone();var t=this.clone(),n=e.clone();t.sign=!1,n.sign=!1;for(var r=0;t.isEven()&&n.isEven();r++)t.ishrn(1),n.ishrn(1);for(;;){for(;t.isEven();)t.ishrn(1);for(;n.isEven();)n.ishrn(1);var i=t.cmp(n);if(i<0){var s=t;t=n,n=s}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.ishln(r)},i.prototype.invm=function(e){return this.egcd(e).a.mod(e)},i.prototype.isEven=function(){return 0===(1&this.words[0])},i.prototype.isOdd=function(){return 1===(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r){for(var s=this.length;s<r+1;s++)this.words[s]=0;return this.words[r]|=i,this.length=r+1,this}for(var o=i,s=r;0!==o&&s<this.length;s++){var u=this.words[s];u+=o,o=u>>>26,u&=67108863,this.words[s]=u}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.cmpn=function(e){var t=e<0;if(t&&(e=-e),this.sign&&!t)return-1;if(!this.sign&&t)return 1;e&=67108863,this.strip();var n;if(this.length>1)n=1;else{var r=this.words[0];n=r===e?0:r<e?-1:1}return this.sign&&(n=-n),n},i.prototype.cmp=function(e){if(this.sign&&!e.sign)return-1;if(!this.sign&&e.sign)return 1;var t=this.ucmp(e);return this.sign?-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=this.words[n],i=e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},i.red=function(e){return new h(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(!this.sign,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},u.prototype.ireduce=function(e){var t,n=e;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),t=n.bitLength();while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},u.prototype.split=function(e,t){e.ishrn(this.n,0,t)},u.prototype.imulK=function(e){return e.imul(this.k)},r(a,u),a.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void (e.length=1);var s=e.words[9];t.words[t.length++]=s&n;for(var i=10;i<e.length;i++){var o=e.words[i];e.words[i-10]=(o&n)<<4|s>>>22,s=o}e.words[i-10]=s>>>22,e.length-=9},a.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t,n=0,r=0;r<e.length;r++){var i=e.words[r];t=64*i,n+=977*i,t+=n/67108864|0,n&=67108863,e.words[r]=n,n=t}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(f,u),r(l,u),r(c,u),c.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*e.words[n]+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function y(e){if(g[e])return g[e];var y;if("k256"===e)y=new a;else if("p224"===e)y=new f;else if("p192"===e)y=new l;else{if("p25519"!==e)throw new Error("Unknown prime "+e);y=new c}return g[e]=y,y},h.prototype._verify1=function(e){n(!e.sign,"red works only with positives"),n(e.red,"red works only with red numbers")},h.prototype._verify2=function(e,t){n(!e.sign&&!t.sign,"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},h.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.mod(this.m)._forceRed(this)},h.prototype.neg=function(e){var t=e.clone();return t.sign=!t.sign,t.iadd(this.m)._forceRed(this)},h.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},h.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},h.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},h.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},h.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.shln(t))},h.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},h.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},h.prototype.isqr=function(e){return this.imul(e,e)},h.prototype.sqr=function(e){return this.mul(e,e)},h.prototype.sqrt=function(e){if(0===e.cmpn(0))return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new i(1)).ishrn(2),s=this.pow(e,r);return s}for(var o=this.m.subn(1),u=0;0!==o.cmpn(0)&&0===o.andln(1);)u++,o.ishrn(1);n(0!==o.cmpn(0));var a=(new i(1)).toRed(this),f=a.redNeg(),l=this.m.subn(1).ishrn(1),c=this.m.bitLength();for(c=(new i(2*c*c)).toRed(this);0!==this.pow(c,l).cmp(f);)c.redIAdd(f);for(var h=this.pow(c,o),s=this.pow(e,o.addn(1).ishrn(1)),p=this.pow(e,o),d=u;0!==p.cmp(a);){for(var v=p,m=0;0!==v.cmp(a);m++)v=v.redSqr();n(m<d);var g=this.pow(h,(new i(1)).ishln(d-m-1));s=s.redMul(g),h=g.redSqr(),p=p.redMul(h),d=m}return s},h.prototype.invm=function(e){var t=e._invmp(this.m);return t.sign?(t.sign=!1,this.imod(t).redNeg()):this.imod(t)},h.prototype.pow=function(e,t){var n=[];if(0===t.cmpn(0))return new i(1);for(var r=t.clone();0!==r.cmpn(0);)n.push(r.andln(1)),r.ishrn(1);for(var s=e,o=0;o<n.length&&0===n[o];o++,s=this.sqr(s));if(++o<n.length)for(var r=this.sqr(s);o<n.length;o++,r=this.sqr(r))0!==n[o]&&(s=this.mul(s,r));return s},h.prototype.convertTo=function(e){var t=e.mod(this.m);return t===e?t.clone():t},h.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new p(e)},r(p,h),p.prototype.convertTo=function(e){return this.imod(e.shln(this.shift))},p.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},p.prototype.imul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).ishrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},p.prototype.mul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return(new i(0))._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=n.isub(r).ishrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},p.prototype.invm=function(e){var t=this.imod(e._invmp(this.m).mul(this.r2));return t._forceRed(this)}}("undefined"==typeof t||t,this)},{}],58:[function(e,t,n){"use strict";function r(e){var t,n,r,i=e.length,s=0;for(t=0;t<i;++t)s+=e[t].length;var o=new Array(s),u=0;for(t=0;t<i;++t){var a=e[t],f=a.length;for(n=0;n<f;++n){var l=o[u++]=new Array(f-1),c=0;for(r=0;r<f;++r)r!==n&&(l[c++]=a[r]);if(1&n){var h=l[1];l[1]=l[0],l[0]=h}}}return o}t.exports=r},{}],59:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function i(e,t,n,i){for(var s=0,o=0,u=0,a=e.length;u<a;++u){var f=e[u];if(!r(t,f)){for(var l=0;l<2*t;++l)n[s++]=f[l];i[o++]=u}}return o}function s(e,t,n,r){var s=e.length,o=t.length;if(!(s<=0||o<=0)){var u=e[0].length>>>1;if(!(u<=0)){var a,f=c.mallocDouble(2*u*s),l=c.mallocInt32(s);if(s=i(e,u,f,l),s>0){if(1===u&&r)h.init(s),a=h.sweepComplete(u,n,0,s,f,l,0,s,f,l);else{var v=c.mallocDouble(2*u*o),m=c.mallocInt32(o);o=i(t,u,v,m),o>0&&(h.init(s+o),a=1===u?h.sweepBipartite(u,n,0,s,f,l,0,o,v,m):p(u,n,r,s,f,l,o,v,m),c.free(v),c.free(m))}c.free(f),c.free(l)}return a}}}function o(e,t){l.push([e,t])}function u(e){return l=[],s(e,e,o,!0),l}function a(e,t){return l=[],s(e,t,o,!1),l}function f(e,t,n){switch(arguments.length){case 1:return u(e);case 2:return"function"==typeof t?s(e,e,t,!0):a(e,t);case 3:return s(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}}t.exports=f;var l,c=e("typedarray-pool"),h=e("./lib/sweep"),p=e("./lib/intersect")},{"./lib/intersect":61,"./lib/sweep":65,"typedarray-pool":502}],60:[function(e,t,n){"use strict";function r(e,t,n){var r="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(n?"Full":""),i=["function ",r,"(",S.join(),"){","var ",f,"=2*",s,";"],a="for(var i="+l+","+d+"="+f+"*"+l+";i<"+c+";++i,"+d+"+="+f+"){var x0="+h+"["+o+"+"+d+"],x1="+h+"["+o+"+"+d+"+"+s+"],xi="+p+"[i];",T="for(var j="+v+","+b+"="+f+"*"+v+";j<"+m+";++j,"+b+"+="+f+"){var y0="+g+"["+o+"+"+b+"],"+(n?"y1="+g+"["+o+"+"+b+"+"+s+"],":"")+"yi="+y+"[j];";return e?i.push(a,E,":",T):i.push(T,E,":",a),n?i.push("if(y1<x0||x1<y0)continue;"):t?i.push("if(y0<=x0||x1<y0)continue;"):i.push("if(y0<x0||x1<y0)continue;"),i.push("for(var k="+o+"+1;k<"+s+";++k){var r0="+h+"[k+"+d+"],r1="+h+"[k+"+s+"+"+d+"],b0="+g+"[k+"+b+"],b1="+g+"[k+"+s+"+"+b+"];if(r1<b0||b1<r0)continue "+E+";}var "+w+"="+u+"("),t?i.push("yi,xi"):i.push("xi,yi"),i.push(");if("+w+"!==void 0)return "+w+";}}}"),{name:r,code:i.join("")}}function i(e){function t(t,n){var s=r(t,n,e);i.push(s.code),o.push("return "+s.name+"("+S.join()+");")}var n="bruteForce"+(e?"Full":"Partial"),i=[],s=S.slice();e||s.splice(3,0,a);var o=["function "+n+"("+s.join()+"){"];o.push("if("+c+"-"+l+">"+m+"-"+v+"){"),e?(t(!0,!1),o.push("}else{"),t(!1,!1)):(o.push("if("+a+"){"),t(!0,!0),o.push("}else{"),t(!0,!1),o.push("}}else{if("+a+"){"),t(!1,!0),o.push("}else{"),t(!1,!1),o.push("}")),o.push("}}return "+n);var u=i.join("")+o.join(""),f=new Function(u);return f()}var s="d",o="ax",u="vv",a="fp",f="es",l="rs",c="re",h="rb",p="ri",d="rp",v="bs",m="be",g="bb",y="bi",b="bp",w="rv",E="Q",S=[s,o,u,l,c,h,p,v,m,g,y];n.partial=i(!1),n.full=i(!0)},{}],61:[function(e,t,n){"use strict";function r(e,t){var n=8*f.log2(t+1)*(e+1)|0,r=f.nextPow2(N*n);L.length<r&&(a.free(L),L=a.mallocInt32(r));var i=f.nextPow2(C*n);A<i&&(a.free(A),A=a.mallocDouble(i))}function i(e,t,n,r,i,s,o,u,a){var f=N*e;L[f]=t,L[f+1]=n,L[f+2]=r,L[f+3]=i,L[f+4]=s,L[f+5]=o;var l=C*e;A[l]=u,A[l+1]=a}function s(e,t,n,r,i,s,o,u,a,f,l){var c=2*e,h=a*c,p=f[h+t];e:for(var d=i,v=i*c;d<s;++d,v+=c){var m=o[v+t],g=o[v+t+e];if(!(p<m||g<p||r&&p===m)){for(var y=u[d],b=t+1;b<e;++b){var m=o[v+b],g=o[v+b+e],w=f[h+b],E=f[h+b+e];if(g<w||E<m)continue e}var S;if(S=r?n(l,y):n(y,l),void 0!==S)return S}}}function o(e,t,n,r,i,s,o,u,a,f){var l=2*e,c=u*l,h=a[c+t];e:for(var p=r,d=r*l;p<i;++p,d+=l){var v=o[p];if(v!==f){var m=s[d+t],g=s[d+t+e];if(!(h<m||g<h)){for(var y=t+1;y<e;++y){var m=s[d+y],g=s[d+y+e],b=a[c+y],w=a[c+y+e];if(g<b||w<m)continue e}var E=n(v,f);if(void 0!==E)return E}}}}function u(e,t,n,u,a,f,l,v,k){r(e,u+l);var O,D=0,P=2*e;for(i(D++,0,0,u,0,l,n?16:0,-1/0,1/0),n||i(D++,0,0,l,0,u,1,-1/0,1/0);D>0;){D-=1;var H=D*N,B=L[H],j=L[H+1],F=L[H+2],I=L[H+3],q=L[H+4],R=L[H+5],U=D*C,z=A[U],W=A[U+1],X=1&R,V=!!(16&R),$=a,J=f,K=v,Q=k;if(X&&($=v,J=k,K=a,Q=f),!(2&R&&(F=E(e,B,j,F,$,J,W),j>=F)||4&R&&(j=S(e,B,j,F,$,J,z),j>=F))){var G=F-j,Y=q-I;if(V){if(e*G*(G+Y)<y){if(O=p.scanComplete(e,B,t,j,F,$,J,I,q,K,Q),void 0!==O)return O;continue}}else{if(e*Math.min(G,Y)<m){if(O=c(e,B,t,X,j,F,$,J,I,q,K,Q),void 0!==O)return O;continue}if(e*G*Y<g){if(O=p.scanBipartite(e,B,t,X,j,F,$,J,I,q,K,Q),void 0!==O)return O;continue}}var Z=b(e,B,j,F,$,J,z,W);if(j<Z)if(e*(Z-j)<m){if(O=h(e,B+1,t,j,Z,$,J,I,q,K,Q),void 0!==O)return O}else if(B===e-2){if(O=X?p.sweepBipartite(e,t,I,q,K,Q,j,Z,$,J):p.sweepBipartite(e,t,j,Z,$,J,I,q,K,Q),void 0!==O)return O}else i(D++,B+1,j,Z,I,q,X,-1/0,1/0),i(D++,B+1,I,q,j,Z,1^X,-1/0,1/0);if(Z<F){var et=d(e,B,I,q,K,Q),tt=K[P*et+B],nt=w(e,B,et,q,K,Q,tt);if(nt<q&&i(D++,B,Z,F,nt,q,(4|X)+(V?16:0),tt,W),I<et&&i(D++,B,Z,F,I,et,(2|X)+(V?16:0),z,tt),et+1===nt){if(O=V?o(e,B,t,Z,F,$,J,et,K,Q[et]):s(e,B,t,X,Z,F,$,J,et,K,Q[et]),void 0!==O)return O}else if(et<nt){var rt;if(V){if(rt=x(e,B,Z,F,$,J,tt),Z<rt){var it=w(e,B,Z,rt,$,J,tt);if(B===e-2){if(Z<it&&(O=p.sweepComplete(e,t,Z,it,$,J,et,nt,K,Q),void 0!==O))return O;if(it<rt&&(O=p.sweepBipartite(e,t,it,rt,$,J,et,nt,K,Q),void 0!==O))return O}else Z<it&&i(D++,B+1,Z,it,et,nt,16,-1/0,1/0),it<rt&&(i(D++,B+1,it,rt,et,nt,0,-1/0,1/0),i(D++,B+1,et,nt,it,rt,1,-1/0,1/0))}}else rt=X?T(e,B,Z,F,$,J,tt):x(e,B,Z,F,$,J,tt),Z<rt&&(B===e-2?O=X?p.sweepBipartite(e,t,et,nt,K,Q,Z,rt,$,J):p.sweepBipartite(e,t,Z,rt,$,J,et,nt,K,Q):(i(D++,B+1,Z,rt,et,nt,X,-1/0,1/0),i(D++,B+1,et,nt,Z,rt,1^X,-1/0,1/0)))}}}}}t.exports=u;var a=e("typedarray-pool"),f=e("bit-twiddle"),l=e("./brute"),c=l.partial,h=l.full,p=e("./sweep"),d=e("./median"),v=e("./partition"),m=128,g=1<<22,y=1<<22,b=v("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),w=v("lo===p0",["p0"]),E=v("lo<p0",["p0"]),S=v("hi<=p0",["p0"]),x=v("lo<=p0&&p0<=hi",["p0"]),T=v("lo<p0&&p0<=hi",["p0"]),N=6,C=2,k=1024,L=a.mallocInt32(k),A=a.mallocDouble(k)},{"./brute":60,"./median":62,"./partition":63,"./sweep":65,"bit-twiddle":56,"typedarray-pool":502}],62:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){for(var o=2*e,u=o*(n+1)+t,a=n+1;a<r;++a,u+=o)for(var f=i[u],l=a,c=o*(a-1);l>n&&i[c+t]>f;--l,c-=o){for(var h=c,p=c+o,d=0;d<o;++d,++h,++p){var v=i[h];i[h]=i[p],i[p]=v}var m=s[l];s[l]=s[l-1],s[l-1]=m}}function i(e,t,n,i,s,a){if(i<=n+1)return n;for(var f=n,l=i,c=i+n>>>1,h=2*e,p=c,d=s[h*c+t];f<l;){if(l-f<u){r(e,t,f,l,s,a),d=s[h*c+t];break}var v=l-f,m=Math.random()*v+f|0,g=s[h*m+t],y=Math.random()*v+f|0,b=s[h*y+t],w=Math.random()*v+f|0,E=s[h*w+t];g<=b?E>=b?(p=y,d=b):g>=E?(p=m,d=g):(p=w,d=E):b>=E?(p=y,d=b):E>=g?(p=m,d=g):(p=w,d=E);for(var S=h*(l-1),x=h*p,T=0;T<h;++T,++S,++x){var N=s[S];s[S]=s[x],s[x]=N}var C=a[l-1];a[l-1]=a[p],a[p]=C,p=o(e,t,f,l-1,s,a,d);for(var S=h*(l-1),x=h*p,T=0;T<h;++T,++S,++x){var N=s[S];s[S]=s[x],s[x]=N}var C=a[l-1];if(a[l-1]=a[p],a[p]=C,c<p){for(l=p-1;f<l&&s[h*(l-1)+t]===d;)l-=1;l+=1}else{if(!(p<c))break;for(f=p+1;f<l&&s[h*f+t]===d;)f+=1}}return o(e,t,n,c,s,a,s[h*c+t])}t.exports=i;var s=e("./partition"),o=s("lo<p0",["p0"]),u=8},{"./partition":63}],63:[function(e,t,n){"use strict";function r(e,t){var n="abcdef".split("").concat(t),r=[];return e.indexOf("lo")>=0&&r.push("lo=e[k+n]"),e.indexOf("hi")>=0&&r.push("hi=e[k+o]"),n.push(i.replace("_",r.join()).replace("$",e)),Function.apply(void 0,n)}t.exports=r;var i="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],64:[function(e,t,n){"use strict";function r(e,t){t<=4*h?i(0,t-1,e):c(0,t-1,e)}function i(e,t,n){for(var r=2*(e+1),i=e+1;i<=t;++i){for(var s=n[r++],o=n[r++],u=i,a=r-2;u-->e;){var f=n[a-2],l=n[a-1];if(f<s)break;if(f===s&&l<o)break;n[a]=f,n[a+1]=l,a-=2}n[a]=s,n[a+1]=o}}function s(e,t,n){e*=2,t*=2;var r=n[e],i=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function o(e,t,n){e*=2,t*=2,n[e]=n[t],n[e+1]=n[t+1]}function u(e,t,n,r){e*=2,t*=2,n*=2;var i=r[e],s=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=s}function a(e,t,n,r,i){e*=2,t*=2,i[e]=i[t],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function f(e,t,n){e*=2,t*=2;var r=n[e],i=n[t];return!(r<i)&&(r!==i||n[e+1]>n[t+1])}function l(e,t,n,r){e*=2;var i=r[e];return i<t||i===t&&r[e+1]<n}function c(e,t,n){var r=(t-e+1)/6|0,p=e+r,d=t-r,v=e+t>>1,m=v-r,g=v+r,y=p,b=m,w=v,E=g,S=d,x=e+1,T=t-1,N=0;f(y,b,n)&&(N=y,y=b,b=N),f(E,S,n)&&(N=E,E=S,S=N),f(y,w,n)&&(N=y,y=w,w=N),f(b,w,n)&&(N=b,b=w,w=N),f(y,E,n)&&(N=y,y=E,E=N),f(w,E,n)&&(N=w,w=E,E=N),f(b,S,n)&&(N=b,b=S,S=N),f(b,w,n)&&(N=b,b=w,w=N),f(E,S,n)&&(N=E,E=S,S=N);for(var C=n[2*b],k=n[2*b+1],L=n[2*E],A=n[2*E+1],O=2*y,M=2*w,_=2*S,D=2*p,P=2*v,H=2*d,B=0;B<2;++B){var j=n[O+B],F=n[M+B],I=n[_+B];n[D+B]=j,n[P+B]=F,n[H+B]=I}o(m,e,n),o(g,t,n);for(var q=x;q<=T;++q)if(l(q,C,k,n))q!==x&&s(q,x,n),++x;else if(!l(q,L,A,n))for(;;){if(l(T,L,A,n)){l(T,C,k,n)?(u(q,x,T,n),++x,--T):(s(q,T,n),--T);break}if(--T<q)break}a(e,x-1,C,k,n),a(t,T+1,L,A,n),x-2-e<=h?i(e,x-2,n):c(e,x-2,n),t-(T+2)<=h?i(T+2,t,n):c(T+2,t,n),T-x<=h?i(x,T,n):c(x,T,n)}t.exports=r;var h=32},{}],65:[function(e,t,n){"use strict";function r(e){var t=c.nextPow2(e);v.length<t&&(l.free(v),v=l.mallocInt32(t)),m.length<t&&(l.free(m),m=l.mallocInt32(t)),g.length<t&&(l.free(g),g=l.mallocInt32(t)),y.length<t&&(l.free(y),y=l.mallocInt32(t)),b.length<t&&(l.free(b),b=l.mallocInt32(t)),w.length<t&&(l.free(w),w=l.mallocInt32(t));var n=8*t;E.length<n&&(l.free(E),E=l.mallocDouble(n))}function i(e,t,n,r){var i=t[r],s=e[n-1];e[i]=s,t[s]=i}function s(e,t,n,r){e[n]=r,t[r]=n}function o(e,t,n,r,o,u,a,f,l,c){for(var d=0,b=2*e,w=e-1,S=b-1,x=n;x<r;++x){var T=u[x],N=b*x;E[d++]=o[N+w],E[d++]=-(T+1),E[d++]=o[N+S],E[d++]=T}for(var x=a;x<f;++x){var T=c[x]+p,C=b*x;E[d++]=l[C+w],E[d++]=-T,E[d++]=l[C+S],E[d++]=T}var k=d>>>1;h(E,k);for(var L=0,A=0,x=0;x<k;++x){var O=0|E[2*x+1];if(O>=p)O=O-p|0,i(g,y,A--,O);else if(O>=0)i(v,m,L--,O);else if(O<=-p){O=-O-p|0;for(var M=0;M<L;++M){var D=t(v[M],O);if(void 0!==D)return D}s(g,y,A++,O)}else{O=-O-1|0;for(var M=0;M<A;++M){var D=t(O,g[M]);if(void 0!==D)return D}s(v,m,L++,O)}}}function u(e,t,n,r,o,u,a,f,l,c){for(var p=0,d=2*e,S=e-1,T=d-1,N=n;N<r;++N){var C=u[N]+1<<1,k=d*N;E[p++]=o[k+S],E[p++]=-C,E[p++]=o[k+T],E[p++]=C}for(var N=a;N<f;++N){var C=c[N]+1<<1,L=d*N;E[p++]=l[L+S],E[p++]=1|-C,E[p++]=l[L+T],E[p++]=1|C}var A=p>>>1;h(E,A);for(var O=0,M=0,D=0,N=0;N<A;++N){var P=0|E[2*N+1],H=1&P;if(N<A-1&&P>>1===E[2*N+3]>>1&&(H=2,N+=1),P<0){for(var B=-(P>>1)-1,j=0;j<D;++j){var F=t(b[j],B);if(void 0!==F)return F}if(0!==H)for(var j=0;j<O;++j){var F=t(v[j],B);if(void 0!==F)return F}if(1!==H)for(var j=0;j<M;++j){var F=t(g[j],B);if(void 0!==F)return F}0===H?s(v,m,O++,B):1===H?s(g,y,M++,B):2===H&&s(b,w,D++,B)}else{var B=(P>>1)-1;0===H?i(v,m,O--,B):1===H?i(g,y,M--,B):2===H&&i(b,w,D--,B)}}}function a(e,t,n,r,o,u,a,f,l,c,d,g){var y=0,b=2*e,w=t,S=t+e,x=1,T=1;r?T=p:x=p;for(var N=o;N<u;++N){var C=N+x,k=b*N;E[y++]=a[k+w],E[y++]=-C,E[y++]=a[k+S],E[y++]=C}for(var N=l;N<c;++N){var C=N+T,L=b*N;E[y++]=d[L+w],E[y++]=-C}var A=y>>>1;h(E,A);for(var O=0,N=0;N<A;++N){var M=0|E[2*N+1];if(M<0){var C=-M,D=!1;if(C>=p?(D=!r,C-=p):(D=!!r,C-=1),D)s(v,m,O++,C);else{var P=g[C],H=b*C,B=d[H+t+1],j=d[H+t+1+e];e:for(var F=0;F<O;++F){var I=v[F],q=b*I;if(!(j<a[q+t+1]||a[q+t+1+e]<B)){for(var R=t+2;R<e;++R)if(d[H+R+e]<a[q+R]||a[q+R+e]<d[H+R])continue e;var U,z=f[I];if(U=r?n(P,z):n(z,P),void 0!==U)return U}}}}else i(v,m,O--,M-x)}}function f(e,t,n,r,i,s,o,u,a,f,l){for(var c=0,d=2*e,m=t,g=t+e,y=r;y<i;++y){var b=y+p,w=d*y;E[c++]=s[w+m],E[c++]=-b,E[c++]=s[w+g],E[c++]=b}for(var y=u;y<a;++y){var b=y+1,S=d*y;E[c++]=f[S+m],E[c++]=-b}var x=c>>>1;h(E,x);for(var T=0,y=0;y<x;++y){var N=0|E[2*y+1];if(N<0){var b=-N;if(b>=p)v[T++]=b-p;else{b-=1;var C=l[b],k=d*b,L=f[k+t+1],A=f[k+t+1+e];e:for(var O=0;O<T;++O){var M=v[O],D=o[M];if(D===C)break;var P=d*M;if(!(A<s[P+t+1]||s[P+t+1+e]<L)){for(var H=t+2;H<e;++H)if(f[k+H+e]<s[P+H]||s[P+H+e]<f[k+H])continue e;var B=n(D,C);if(void 0!==B)return B}}}}else{for(var b=N-p,O=T-1;O>=0;--O)if(v[O]===b){for(var H=O+1;H<T;++H)v[H-1]=v[H];break}--T}}}t.exports={init:r,sweepBipartite:o,sweepComplete:u,scanBipartite:a,scanComplete:f};var l=e("typedarray-pool"),c=e("bit-twiddle"),h=e("./sort"),p=1<<28,d=1024,v=l.mallocInt32(d),m=l.mallocInt32(d),g=l.mallocInt32(d),y=l.mallocInt32(d),b=l.mallocInt32(d),w=l.mallocInt32(d),E=l.mallocDouble(8*d)},{"./sort":64,"bit-twiddle":56,"typedarray-pool":502}],66:[function(e,t,n){(function(t){"use strict";function i(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=u.prototype):(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,n,r):"string"==typeof t?h(e,t,n):v(e,t)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,r){return f(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function c(e,t){if(f(t),e=o(e,t<0?0:0|m(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=o(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function p(e,t){var n=t.length<0?0:0|m(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=u.prototype):e=p(e,t),e}function v(e,t){if(u.isBuffer(t)){var n=0|m(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||G(t.length)?o(e,0):p(e,t);if("Buffer"===t.type&&et(t.data))return p(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),u.alloc(+e)}function y(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return _(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function E(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:S(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function S(e,t,n,r,i){function s(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,u=e.length,a=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,u/=2,a/=2,n/=2}var f;if(i){var l=-1;for(f=n;f<u;f++)if(s(e,f)===s(t,l===-1?0:f-l)){if(l===-1&&(l=f),f-l+1===a)return l*o}else l!==-1&&(f-=f-l),l=-1}else for(n+a>u&&(n=u-a),f=n;f>=0;f--){for(var c=!0,h=0;h<a;h++)if(s(e,f+h)!==s(t,h)){c=!1;break}if(c)return f}return-1}function x(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))return o;e[n+o]=u}return o}function T(e,t,n,r){return Q(V(t,e.length-n),e,n,r)}function N(e,t,n,r){return Q($(t),e,n,r)}function C(e,t,n,r){return N(e,t,n,r)}function k(e,t,n,r){return Q(K(t),e,n,r)}function L(e,t,n,r){return Q(J(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?Y.fromByteArray(e):Y.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s=e[i],o=null,u=s>239?4:s>223?3:s>191?2:1;if(i+u<=n){var a,f,l,c;switch(u){case 1:s<128&&(o=s);break;case 2:a=e[i+1],128===(192&a)&&(c=(31&s)<<6|63&a,c>127&&(o=c));break;case 3:a=e[i+1],f=e[i+2],128===(192&a)&&128===(192&f)&&(c=(15&s)<<12|(63&a)<<6|63&f,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:a=e[i+1],f=e[i+2],l=e[i+3],128===(192&a)&&128===(192&f)&&128===(192&l)&&(c=(15&s)<<18|(63&a)<<12|(63&f)<<6|63&l,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=u}return M(r)}function M(e){var t=e.length;if(t<=tt)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=tt));return n}function _(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;++s)i+=X(e[s]);return i}function H(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function B(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function F(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function I(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function q(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,i){return i||q(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,i){return i||q(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(e,t,n,r,52,8),n+8}function z(e){if(e=W(e).replace(nt,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var n,r=e.length,i=null,s=[],o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function $(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function J(e,t){for(var n,r,i,s=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}function K(e){return Y.toByteArray(z(e))}function Q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function G(e){return e!==e}var Y=e("base64-js"),Z=e("ieee754"),et=e("isarray");n.Buffer=u,n.SlowBuffer=g,n.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),n.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return a(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return l(null,e,t,n)},u.allocUnsafe=function(e){return c(null,e)},u.allocUnsafeSlow=function(e){return c(null,e)},u.isBuffer=function(e){return null!=e&&!!e._isBuffer},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!et(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):b.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var s=i-r,o=n-t,a=Math.min(s,o),f=this.slice(r,i),l=e.slice(t,n),c=0;c<a;++c)if(f[c]!==l[c]){s=f[c],o=l[c];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},u.prototype.indexOf=function(e,t,n){return E(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return E(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":return N(this,e,t,n);case"latin1":case"binary":return C(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;u.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(u.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+e]}return r},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e+ --t],i=1;t>0&&(i*=256);)r+=this[e+ --t]*i;return r},u.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=t,i=1,s=this[e+ --r];r>0&&(i*=256);)s+=this[e+ --r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return t||B(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},u.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),Z.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),Z.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),Z.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),Z.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;j(this,e,t,n,i,0)}var s=1,o=0;for(this[t]=255&e;++o<n&&(s*=256);)this[t+o]=e/s&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;j(this,e,t,n,i,0)}var s=n-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var s=0,o=1,u=0;for(this[t]=255&e;++s<n&&(o*=256);)e<0&&0===u&&0!==this[t+s-1]&&(u=1),this[t+s]=(e/o>>0)-u&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var s=n-1,o=1,u=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===u&&0!==this[t+s+1]&&(u=1),this[t+s]=(e/o>>0)-u&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var o=u.isBuffer(e)?e:V((new u(e,r)).toString()),a=o.length;for(s=0;s<n-t;++s)this[s+t]=o[s%a]}return this};var nt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":67,ieee754:258,isarray:68}],67:[function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function s(e){var t,n,i,s,o,u,a=e.length;o=r(e),u=new c(3*a/4-o),i=o>0?a-4:a;var f=0;for(t=0,n=0;t<i;t+=4,n+=3)s=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],u[f++]=s>>16&255,u[f++]=s>>8&255,u[f++]=255&s;return 2===o?(s=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,u[f++]=255&s):1===o&&(s=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,u[f++]=s>>8&255,u[f++]=255&s),u}function o(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function u(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(o(r));return i.join("")}function a(e){for(var t,n=e.length,r=n%3,i="",s=[],o=16383,a=0,l=n-r;a<l;a+=o)s.push(u(e,a,a+o>l?l:a+o));return 1===r?(t=e[n-1],i+=f[t>>2],i+=f[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=f[t>>10],i+=f[t>>4&63],i+=f[t<<2&63],i+="="),s.push(i),s.join("")}n.byteLength=i,n.toByteArray=s,n.fromByteArray=a;for(var f=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=h.length;p<d;++p)f[p]=h[p],l[h.charCodeAt(p)]=p;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],68:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],69:[function(e,t,n){"use strict";function r(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function i(e,t){return e[0]-t[0]||e[1]-t[1]}function s(e){return e.map(r).sort(i)}function o(e,t,n){return t in e?e[t]:n}function u(e,t,n){Array.isArray(t)?(n=n||{},t=t||[]):(n=t||{},t=[]);var r=!!o(n,"delaunay",!0),i=!!o(n,"interior",!0),u=!!o(n,"exterior",!0),p=!!o(n,"infinity",!1);if(!i&&!u||0===e.length)return[];var d=a(e,t);if(r||i!==u||p){for(var v=f(e.length,s(t)),m=0;m<d.length;++m){var g=d[m];v.addTriangle(g[0],g[1],g[2])}return r&&l(e,v),u?i?p?c(v,0,p):v.cells():c(v,1,p):c(v,-1)}return d}var a=e("./lib/monotone"),f=e("./lib/triangulation"),l=e("./lib/delaunay"),c=e("./lib/filter");t.exports=u},{"./lib/delaunay":70,"./lib/filter":71,"./lib/monotone":72,"./lib/triangulation":73}],70:[function(e,t,n){"use strict";function r(e,t,n,r,i,o){var u=t.opposite(r,i);if(!(u<0)){if(i<r){var f=r;r=i,i=f,f=o,o=u,u=f}t.isConstraint(r,i)||s(e[r],e[i],e[o],e[u])<0&&n.push(r,i)}}function i(e,t){for(var n=[],i=e.length,o=t.stars,u=0;u<i;++u)for(var f=o[u],l=1;l<f.length;l+=2){var c=f[l];if(!(c<u||t.isConstraint(u,c))){for(var h=f[l-1],p=-1,d=1;d<f.length;d+=2)if(f[d-1]===c){p=f[d];break}p<0||s(e[u],e[c],e[h],e[p])<0&&n.push(u,c)}}for(;n.length>0;){for(var c=n.pop(),u=n.pop(),h=-1,p=-1,f=o[u],v=1;v<f.length;v+=2){var m=f[v-1],g=f[v];m===c?p=g:g===c&&(h=m)}h<0||p<0||s(e[u],e[c],e[h],e[p])>=0||(t.flip(u,c),r(e,t,n,h,u,p),r(e,t,n,u,p,h),r(e,t,n,p,c,h),r(e,t,n,c,h,p))}}var s=e("robust-in-sphere")[4];e("binary-search-bounds"),t.exports=i},{"binary-search-bounds":74,"robust-in-sphere":469}],71:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){this.cells=e,this.neighbor=t,this.flags=r,this.constraint=n,this.active=i,this.next=s,this.boundary=o}function i(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}function s(e,t){for(var n=e.cells(),s=n.length,o=0;o<s;++o){var u=n[o],a=u[0],f=u[1],l=u[2];f<l?f<a&&(u[0]=f,u[1]=l,u[2]=a):l<a&&(u[0]=l,u[1]=a,u[2]=f)}n.sort(i);for(var c=new Array(s),o=0;o<c.length;++o)c[o]=0;var h=[],p=[],d=new Array(3*s),v=new Array(3*s),m=null;t&&(m=[]);for(var g=new r(n,d,v,c,h,p,m),o=0;o<s;++o)for(var u=n[o],y=0;y<3;++y){var a=u[y],f=u[(y+1)%3],b=d[3*o+y]=g.locate(f,a,e.opposite(f,a)),w=v[3*o+y]=e.isConstraint(a,f);b<0&&(w?p.push(o):(h.push(o),c[o]=1),t&&m.push([f,a,-1]))}return g}function o(e,t,n){for(var r=0,i=0;i<e.length;++i)t[i]===n&&(e[r++]=e[i]);return e.length=r,e}function u(e,t,n){var r=s(e,n);if(0===t)return n?r.cells.concat(r.boundary):r.cells;for(var i=1,u=r.active,a=r.next,f=r.flags,l=r.cells,c=r.constraint,h=r.neighbor;u.length>0||a.length>0;){for(;u.length>0;){var p=u.pop();if(f[p]!==-i){f[p]=i;for(var d=(l[p],0);d<3;++d){var v=h[3*p+d];v>=0&&0===f[v]&&(c[3*p+d]?a.push(v):(u.push(v),f[v]=i))}}}var m=a;a=u,u=m,a.length=0,i=-i}var g=o(l,f,t);return n?g.concat(r.boundary):g}var a=e("binary-search-bounds");t.exports=u;var f=r.prototype;f.locate=function(){var e=[0,0,0];return function(t,n,r){var s=t,o=n,u=r;return n<r?n<t&&(s=n,o=r,u=t):r<t&&(s=r,o=t,u=n),s<0?-1:(e[0]=s,e[1]=o,e[2]=u,a.eq(this.cells,e,i))}}()},{"binary-search-bounds":74}],72:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.a=e,this.b=t,this.idx=n,this.lowerIds=r,this.upperIds=i}function i(e,t,n,r){this.a=e,this.b=t,this.type=n,this.idx=r}function s(e,t){var n=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;return n?n:e.type!==d&&(n=p(e.a,e.b,t.b))?n:e.idx-t.idx}function o(e,t){return p(e.a,e.b,t)}function u(e,t,n,r,i){for(var s=h.lt(t,r,o),u=h.gt(t,r,o),a=s;a<u;++a){for(var f=t[a],l=f.lowerIds,c=l.length;c>1&&p(n[l[c-2]],n[l[c-1]],r)>0;)e.push([l[c-1],l[c-2],i]),c-=1;l.length=c,l.push(i);for(var d=f.upperIds,c=d.length;c>1&&p(n[d[c-2]],n[d[c-1]],r)<0;)e.push([d[c-2],d[c-1],i]),c-=1;d.length=c,d.push(i)}}function a(e,t){var n;return(n=e.a[0]<t.a[0]?p(e.a,e.b,t.a):p(t.b,t.a,e.a))?n:(n=t.b[0]<e.b[0]?p(e.a,e.b,t.b):p(t.b,t.a,e.b),n||e.idx-t.idx)}function f(e,t,n){var i=h.le(e,n,a),s=e[i],o=s.upperIds,u=o[o.length-1];s.upperIds=[u],e.splice(i+1,0,new r(n.a,n.b,n.idx,[u],o))}function l(e,t,n){var r=n.a;n.a=n.b,n.b=r;var i=h.eq(e,n,a),s=e[i],o=e[i-1];o.upperIds=s.upperIds,e.splice(i,1)}function c(e,t){for(var n=e.length,o=t.length,a=[],c=0;c<n;++c)a.push(new i(e[c],null,d,c));for(var c=0;c<o;++c){var h=t[c],p=e[h[0]],y=e[h[1]];p[0]<y[0]?a.push(new i(p,y,m,c),new i(y,p,v,c)):p[0]>y[0]&&a.push(new i(y,p,m,c),new i(p,y,v,c))}a.sort(s);for(var b=a[0].a[0]-(1+Math.abs(a[0].a[0]))*Math.pow(2,-52),w=[new r([b,1],[b,0],-1,[],[],[],[])],E=[],c=0,S=a.length;c<S;++c){var x=a[c],T=x.type;T===d?u(E,w,e,x.a,x.idx):T===m?f(w,e,x):l(w,e,x)}return E}var h=e("binary-search-bounds"),p=e("robust-orientation")[3],d=0,v=1,m=2;t.exports=c},{"binary-search-bounds":74,"robust-orientation":471}],73:[function(e,t,n){"use strict";function r(e,t){this.stars=e,this.edges=t}function i(e,t,n){for(var r=1,i=e.length;r<i;r+=2)if(e[r-1]===t&&e[r]===n)return e[r-1]=e[i-2],e[r]=e[i-1],void (e.length=i-2)}function s(e,t){for(var n=new Array(e),i=0;i<e;++i)n[i]=[];return new r(n,t)}var o=e("binary-search-bounds");t.exports=s;var u=r.prototype;u.isConstraint=function(){function e(e,t){return e[0]-t[0]||e[1]-t[1]}var t=[0,0];return function(n,r){return t[0]=Math.min(n,r),t[1]=Math.max(n,r),o.eq(this.edges,t,e)>=0}}(),u.removeTriangle=function(e,t,n){var r=this.stars;i(r[e],t,n),i(r[t],n,e),i(r[n],e,t)},u.addTriangle=function(e,t,n){var r=this.stars;r[e].push(t,n),r[t].push(n,e),r[n].push(e,t)},u.opposite=function(e,t){for(var n=this.stars[t],r=1,i=n.length;r<i;r+=2)if(n[r]===e)return n[r-1];return-1},u.flip=function(e,t){var n=this.opposite(e,t),r=this.opposite(t,e);this.removeTriangle(e,t,n),this.removeTriangle(t,e,r),this.addTriangle(e,r,n),this.addTriangle(t,n,r)},u.edges=function(){for(var e=this.stars,t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length;s<o;s+=2)t.push([i[s],i[s+1]]);return t},u.cells=function(){for(var e=this.stars,t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length;s<o;s+=2){var u=i[s],a=i[s+1];n<Math.min(u,a)&&t.push([n,u,a])}return t}},{"binary-search-bounds":74}],74:[function(e,t,n){"use strict";function r(e,t,n,r,i){var s=["function ",e,"(a,l,h,",r.join(","),"){",i?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?t.indexOf("c")<0?s.push(";if(x===y){return m}else if(x<=y){"):s.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):s.push(";if(",t,"){i=m;"),n?s.push("l=m+1}else{h=m-1}"):s.push("h=m-1}else{l=m+1}"),s.push("}"),i?s.push("return -1};"):s.push("return i};"),s.join("")}function i(e,t,n,i){var s=new Function([r("A","x"+e+"y",t,["y"],i),r("P","c(x,y)"+e+"0",t,["y","c"],i),"function dispatchBsearch",n,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",n].join(""));return s()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],75:[function(e,t,n){"use strict";function r(e){for(var t=1,n=1;n<e.length;++n)for(var r=0;r<n;++r)if(e[n]<e[r])t=-t;else if(e[r]===e[n])return 0;return t}t.exports=r},{}],76:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=e.length,i=0;i<r;++i)n+=e[i]*t[i];return n}function i(e){var t=e.length;if(0===t)return[];var n=(e[0].length,o([e.length+1,e.length+1],1)),i=o([e.length+1],1);n[t][t]=0;for(var s=0;s<t;++s){for(var a=0;a<=s;++a)n[a][s]=n[s][a]=2*r(e[s],e[a]);i[s]=r(e[s],e[s])}for(var f=u(n,i),l=0,c=f[t+1],s=0;s<c.length;++s)l+=c[s];for(var h=new Array(t),s=0;s<t;++s){for(var c=f[s],p=0,a=0;a<c.length;++a)p+=c[a];h[s]=p/l}return h}function s(e){if(0===e.length)return[];for(var t=e[0].length,n=o([t]),r=i(e),s=0;s<e.length;++s)for(var u=0;u<t;++u)n[u]+=e[s][u]*r[s];return n}var o=e("dup"),u=e("robust-linear-solve");s.barycenetric=i,t.exports=s},{dup:100,"robust-linear-solve":470}],77:[function(e,t,n){function r(e){for(var t=i(e),n=0,r=0;r<e.length;++r)for(var s=e[r],o=0;o<t.length;++o)n+=Math.pow(s[o]-t[o],2);return Math.sqrt(n/e.length)}t.exports=r;var i=e("circumcenter")},{circumcenter:76}],78:[function(e,t,n){"use strict";function r(e){var t=w(e),n=b(y(t),e);return n<0?[t,S(t,1/0)]:n>0?[S(t,-1/0),t]:[t,t]}function i(e,t){for(var n=new Array(t.length),r=0;r<t.length;++r){var i=t[r],s=e[i[0]],o=e[i[1]];n[r]=[Math.min(s[0],o[0]),Math.min(s[1],o[1]),Math.max(s[0],o[0]),Math.max(s[1],o[1])]}return n}function s(e){for(var t=new Array(e.length),n=0;n<e.length;++n){var r=e[n];t[n]=[r[0],r[1],r[0],r[1]]}return t}function o(e,t,n){var r=[];return m(n,function(n,i){var s=t[n],o=t[i];if(s[0]!==o[0]&&s[0]!==o[1]&&s[1]!==o[0]&&s[1]!==o[1]){var u=e[s[0]],a=e[s[1]],f=e[o[0]],l=e[o[1]];g(u,a,f,l)&&r.push([n,i])}}),r}function u(e,t,n,r){var i=[];return m(n,r,function(n,r){var s=t[n];if(s[0]!==r&&s[1]!==r){var o=e[r],u=e[s[0]],a=e[s[1]];g(u,a,o,o)&&i.push([n,r])}}),i}function a(e,t,n,r,i){function s(t){if(t>=e.length)return o[t-e.length];var n=e[t];return[y(n[0]),y(n[1])]}for(var o=[],u=0;u<n.length;++u){var a=n[u],f=a[0],l=a[1],c=t[f],h=t[l],p=x(E(e[c[0]]),E(e[c[1]]),E(e[h[0]]),E(e[h[1]]));if(p){var d=o.length+e.length;o.push(p),r.push([f,d],[l,d])}}r.sort(function(e,t){if(e[0]!==t[0])return e[0]-t[0];var n=s(e[1]),r=s(t[1]);return b(n[0],r[0])||b(n[1],r[1])});for(var u=r.length-1;u>=0;--u){var v=r[u],f=v[0],m=t[f],g=m[0],w=m[1],S=e[g],T=e[w];if((S[0]-T[0]||S[1]-T[1])<0){var N=g;g=w,w=N}m[0]=g;var C,k=m[1]=v[1];for(i&&(C=m[2]);u>0&&r[u-1][0]===f;){var v=r[--u],L=v[1];i?t.push([k,L,C]):t.push([k,L]),k=L}i?t.push([k,w,C]):t.push([k,w])}return o}function f(e,t,n){for(var i=e.length+t.length,s=new v(i),o=n,u=0;u<t.length;++u){var a=t[u],f=r(a[0]),l=r(a[1]);o.push([f[0],l[0],f[1],l[1]]),e.push([w(a[0]),w(a[1])])}m(o,function(e,t){s.link(e,t)});for(var c=0,h=!0,p=new Array(i),u=0;u<i;++u){var d=s.find(u);d===u?(p[u]=c,e[c++]=e[u]):(h=!1,p[u]=-1)}if(e.length=c,h)return null;for(var u=0;u<i;++u)p[u]<0&&(p[u]=p[s.find(u)]);return p}function l(e,t){return e[0]-t[0]||e[1]-t[1]}function c(e,t){var n=e[0]-t[0]||e[1]-t[1];return n?n:e[2]<t[2]?-1:e[2]>t[2]?1:0}function h(e,t,n){if(0!==e.length){if(t)for(var r=0;r<e.length;++r){var i=e[r],s=t[i[0]],o=t[i[1]];i[0]=Math.min(s,o),i[1]=Math.max(s,o)}else for(var r=0;r<e.length;++r){var i=e[r],s=i[0],o=i[1];i[0]=Math.min(s,o),i[1]=Math.max(s,o)}n?e.sort(c):e.sort(l);for(var u=1,r=1;r<e.length;++r){var a=e[r-1],f=e[r];(f[0]!==a[0]||f[1]!==a[1]||n&&f[2]!==a[2])&&(e[u++]=f)}e.length=u}}function p(e,t,n){var r=i(e,t),l=o(e,t,r),c=s(e),p=u(e,t,r,c),d=a(e,t,l,p,n),v=f(e,d,c);return h(t,v,n),!!v||l.length>0||p.length>0}function d(e,t,n){var r,i=!1;if(n){r=t;for(var s=new Array(t.length),o=0;o<t.length;++o){var u=t[o];s[o]=[u[0],u[1],n[o]]}t=s}for(;p(e,t,!!n);)i=!0;if(n&&i){r.length=0,n.length=0;for(var o=0;o<t.length;++o){var u=t[o];r.push([u[0],u[1]]),n.push(u[2])}}return i}t.exports=d;var v=e("union-find"),m=e("box-intersect"),g=(e("compare-cell"),e("robust-segment-intersect")),y=e("big-rat"),b=e("big-rat/cmp"),w=e("big-rat/to-float"),E=e("rat-vec"),S=e("nextafter"),x=e("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":79,"big-rat":42,"big-rat/cmp":40,"big-rat/to-float":54,"box-intersect":59,"compare-cell":84,nextafter:433,"rat-vec":459,"robust-segment-intersect":474,"union-find":503}],79:[function(e,t,n){"use strict";function r(e,t){return u(s(e[0],t[1]),s(e[1],t[0]))}function i(e,t,n,i){var s=f(t,e),u=f(i,n),p=r(s,u);if(0===a(p))return null;var d=f(e,n),v=r(u,d),m=o(v,p);return l(e,c(s,m))}t.exports=i;var s=e("big-rat/mul"),o=e("big-rat/div"),u=e("big-rat/sub"),a=e("big-rat/sign"),f=e("rat-vec/sub"),l=e("rat-vec/add"),c=e("rat-vec/muls");e("big-rat/to-float")},{"big-rat/div":41,"big-rat/mul":51,"big-rat/sign":52,"big-rat/sub":53,"big-rat/to-float":54,"rat-vec/add":458,"rat-vec/muls":460,"rat-vec/sub":461}],80:[function(e,t,n){(function(e){var n=function(){"use strict";function t(n,r,i,s){function u(n,i){if(null===n)return null;if(0==i)return n;var a,p;if("object"!=typeof n)return n;if(t.__isArray(n))a=[];else if(t.__isRegExp(n))a=new RegExp(n.source,o(n)),n.lastIndex&&(a.lastIndex=n.lastIndex);else if(t.__isDate(n))a=new Date(n.getTime());else{if(c&&e.isBuffer(n))return a=new e(n.length),n.copy(a),a;"undefined"==typeof s?(p=Object.getPrototypeOf(n),a=Object.create(p)):(a=Object.create(s),p=s)}if(r){var d=f.indexOf(n);if(d!=-1)return l[d];f.push(n),l.push(a)}for(var v in n){var m;p&&(m=Object.getOwnPropertyDescriptor(p,v)),m&&null==m.set||(a[v]=u(n[v],i-1))}return a}var a;"object"==typeof r&&(i=r.depth,s=r.prototype,a=r.filter,r=r.circular);var f=[],l=[],c="undefined"!=typeof e;return"undefined"==typeof r&&(r=!0),"undefined"==typeof i&&(i=1/0),u(n,i)}function n(e){return Object.prototype.toString.call(e)}function r(e){return"object"==typeof e&&"[object Date]"===n(e)}function i(e){return"object"==typeof e&&"[object Array]"===n(e)}function s(e){return"object"==typeof e&&"[object RegExp]"===n(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=n,t.__isDate=r,t.__isArray=i,t.__isRegExp=s,t.__getRegExpFlags=o,t}();"object"==typeof t&&t.exports&&(t.exports=n)}).call(this,e("buffer").Buffer)},{buffer:66}],81:[function(e,t,n){t.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:0,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],82:[function(e,t,n){"use strict";function r(e){var t,n,r,f,c,h,p,d,v,m,g,y,b,w=[],E=[],S=[],x=[];if(o.isPlainObject(e)||(e={}),v=e.nshades||72,d=e.format||"hex",p=e.colormap,p||(p="jet"),"string"==typeof p){if(p=p.toLowerCase(),!a[p])throw Error(p+" not a supported colorscale");h=u(a[p])}else{if(!Array.isArray(p))throw Error("unsupported colormap option",p);h=u(p)}if(h.length>v)throw new Error(p+" map requires nshades to be at least size "+h.length);for(g=Array.isArray(e.alpha)?2!==e.alpha.length?[1,1]:u(e.alpha):"number"==typeof e.alpha?[e.alpha,e.alpha]:[1,1],t=h.map(function(e){return Math.round(e.index*v)}),g[0]<0&&(g[0]=0),g[1]<0&&(g[0]=0),g[0]>1&&(g[0]=1),g[1]>1&&(g[0]=1),b=0;b<t.length;++b)y=h[b].index,n=h[b].rgb,4===n.length&&n[3]>=0&&n[3]<=1||(n[3]=g[0]+(g[1]-g[0])*y);for(b=0;b<t.length-1;++b)c=t[b+1]-t[b],r=h[b].rgb,f=h[b+1].rgb,w=w.concat(o.linspace(r[0],f[0],c)),E=E.concat(o.linspace(r[1],f[1],c)),S=S.concat(o.linspace(r[2],f[2],c)),x=x.concat(o.linspace(r[3],f[3],c));return w=w.map(Math.round),E=E.map(Math.round),S=S.map(Math.round),m=o.zip(w,E,S,x),"hex"===d&&(m=m.map(i)),"rgbaString"===d&&(m=m.map(s)),m}function i(e){for(var t,n="#",r=0;r<3;++r)t=e[r],t=t.toString(16),n+=("00"+t).substr(t.length);return n}function s(e){return"rgba("+e.join(",")+")"}var o=e("arraytools"),u=e("clone"),a=e("./colorScales");t.exports=r},{"./colorScales":81,arraytools:35,clone:80}],83:[function(e,t,n){"use strict";function r(e,t,n){var r=u(e[0],-t[0]),i=u(e[1],-t[1]),s=u(n[0],-t[0]),o=u(n[1],-t[1]),c=f(a(r,s),a(i,o));return c[c.length-1]>=0}function i(e,t,n,i){var u=s(t,n,i);if(0===u){var a=o(s(e,t,n)),f=o(s(e,t,i));if(a===f){if(0===a){var l=r(e,t,n),c=r(e,t,i);return l===c?0:l?1:-1}return 0}return 0===f?a>0?-1:r(e,t,i)?-1:1:0===a?f>0?1:r(e,t,n)?1:-1:o(f-a)}var h=s(e,t,n);if(h>0)return u>0&&s(e,t,i)>0?1:-1;if(h<0)return u>0||s(e,t,i)>0?1:-1;var p=s(e,t,i);return p>0?1:r(e,t,n)?1:-1}t.exports=i;var s=e("robust-orientation"),o=e("signum"),u=e("two-sum"),a=e("robust-product"),f=e("robust-sum")},{"robust-orientation":471,"robust-product":472,"robust-sum":476,signum:478,"two-sum":501}],84:[function(e,t,n){function r(e,t){return e-t}function i(e,t){var n=e.length,i=e.length-t.length;if(i)return i;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return e[0]+e[1]-t[0]-t[1]||s(e[0],e[1])-s(t[0],t[1]);case 3:var o=e[0]+e[1],u=t[0]+t[1];if(i=o+e[2]-(u+t[2]))return i;var f=s(e[0],e[1]),l=s(t[0],t[1]);return s(f,e[2])-s(l,t[2])||s(f+e[2],o)-s(l+t[2],u);case 4:var c=e[0],h=e[1],p=e[2],d=e[3],v=t[0],m=t[1],g=t[2],y=t[3];return c+h+p+d-(v+m+g+y)||s(c,h,p,d)-s(v,m,g,y,v)||s(c+h,c+p,c+d,h+p,h+d,p+d)-s(v+m,v+g,v+y,m+g,m+y,g+y)||s(c+h+p,c+h+d,c+p+d,h+p+d)-s(v+m+g,v+m+y,v+g+y,m+g+y);default:for(var b=e.slice().sort(r),w=t.slice().sort(r),E=0;E<n;++E)if(i=b[E]-w[E])return i;return 0}}t.exports=i;var s=Math.min},{}],85:[function(e,t,n){"use strict";function r(e,t){return i(e,t)||s(e)-s(t)}var i=e("compare-cell"),s=e("cell-orientation");t.exports=r},{"cell-orientation":75,"compare-cell":84}],86:[function(e,t,n){"use strict";function r(e){var t=e.length;if(0===t)return[];if(1===t)return[[0]];var n=e[0].length;return 0===n?[]:1===n?i(e):2===n?s(e):o(e,n)}var i=e("./lib/ch1d"),s=e("./lib/ch2d"),o=e("./lib/chnd");t.exports=r},{"./lib/ch1d":87,"./lib/ch2d":88,"./lib/chnd":89}],87:[function(e,t,n){"use strict";function r(e){for(var t=0,n=0,r=1;r<e.length;++r)e[r][0]<e[t][0]&&(t=r),e[r][0]>e[n][0]&&(n=r);return t<n?[[t],[n]]:t>n?[[n],[t]]:[[t]]}t.exports=r},{}],88:[function(e,t,n){"use strict";function r(e){var t=i(e),n=t.length;if(n<=2)return[];for(var r=new Array(n),s=t[n-1],o=0;o<n;++o){var u=t[o];r[o]=[s,u],s=u}return r}t.exports=r;var i=e("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":417}],89:[function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=new Array(n),i=0;i<t.length;++i)r[i]=e[t[i]];for(var s=t.length,i=0;i<n;++i)t.indexOf(i)<0&&(r[s++]=e[i]);return r}function i(e,t){for(var n=e.length,r=t.length,i=0;i<n;++i)for(var s=e[i],o=0;o<s.length;++o){var u=s[o];if(u<r)s[o]=t[u];else{u-=r;for(var a=0;a<r;++a)u>=t[a]&&(u+=1);s[o]=u}}return e}function s(e,t){try{return o(e,!0)}catch(n){var s=u(e);if(s.length<=t)return[];var a=r(e,s),f=o(a,!0);return i(f,s)}}t.exports=s;var o=e("incremental-convex-hull"),u=e("affine-hull")},{"affine-hull":32,"incremental-convex-hull":259}],90:[function(e,t,n){t.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CPV:"verde",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bdr|\\bdr.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",COG:"^(?!.*\\bdem)(?!.*\\bdr)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CZE:"^(?=.*rep).*czech|czechia|bohemia",CSK:"czechoslovakia",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"ireland",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat).*\\bkorea|^(?=.*people).*\\bkorea|^(?=.*north).*\\bkorea|dprk",KOR:"^(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MKD:"macedonia|fyrom",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"micronesia",MDA:"moldov|b(a|e)ssarabia",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"\\bs\\w*.?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",TZA:"tanzania",THA:"thailand|\\bsiam",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",USA:"united.?states|\\bu\\.?s\\.?a\\.?\\b|\\bu\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],91:[function(e,t,n){function r(e){return e=Math.round(e),e<0?0:e>255?255:e}function i(e){return e<0?0:e>1?1:e}function s(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function o(e){return i("%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))}function u(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function a(e){var t=e.replace(/ /g,"").toLowerCase();if(t in f)return f[t].slice();if("#"===t[0]){if(4===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null}if(7===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null}return null}var i=t.indexOf("("),a=t.indexOf(")");if(i!==-1&&a+1===t.length){var l=t.substr(0,i),c=t.substr(i+1,a-(i+1)).split(","),h=1;switch(l){case"rgba":if(4!==c.length)return null;h=o(c.pop());case"rgb":return 3!==c.length?null:[s(c[0]),s(c[1]),s(c[2]),h];case"hsla":if(4!==c.length)return null;h=o(c.pop());case"hsl":if(3!==c.length)return null;var p=(parseFloat(c[0])%360+360)%360/360,d=o(c[1]),v=o(c[2]),m=v<=.5?v*(d+1):v+d-v*d,g=2*v-m;return[r(255*u(g,m,p+1/3)),r(255*u(g,m,p)),r(255*u(g,m,p-1/3)),h];default:return null}}return null}var f={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=a}catch(e){}},{}],92:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){var o=6*i*i-6*i,u=3*i*i-4*i+1,a=-6*i*i+6*i,f=3*i*i-2*i;if(e.length){s||(s=new Array(e.length));for(var l=e.length-1;l>=0;--l)s[l]=o*e[l]+u*t[l]+a*n[l]+f*r[l];return s}return o*e+u*t+a*n[l]+f*r}function i(e,t,n,r,i,s){var o=i-1,u=i*i,a=o*o,f=(1+2*i)*a,l=i*a,c=u*(3-2*i),h=u*o;if(e.length){s||(s=new Array(e.length));for(var p=e.length-1;p>=0;--p)s[p]=f*e[p]+l*t[p]+c*n[p]+h*r[p];return s}return f*e+l*t+c*n+h*r}t.exports=i,t.exports.derivative=r},{}],93:[function(e,t,n){"use strict";function r(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(e){var t=new r;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var i=0;i<n.length;++i){var o=n[i];if("array"===o||"object"==typeof o&&o.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===o){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+n[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,s(t)}var s=e("./lib/thunk.js");t.exports=i},{"./lib/thunk.js":95}],94:[function(e,t,n){"use strict";function r(e,t,n){var r,i,s=e.length,o=t.arrayArgs.length,u=t.indexArgs.length>0,a=[],f=[],l=0,c=0;for(r=0;r<s;++r)f.push(["i",r,"=0"].join(""));for(i=0;i<o;++i)for(r=0;r<s;++r)c=l,l=e[r],0===r?f.push(["d",i,"s",r,"=t",i,"p",l].join("")):f.push(["d",i,"s",r,"=(t",i,"p",l,"-s",c,"*t",i,"p",c,")"].join(""));for(a.push("var "+f.join(",")),r=s-1;r>=0;--r)l=e[r],a.push(["for(i",r,"=0;i",r,"<s",l,";++i",r,"){"].join(""));for(a.push(n),r=0;r<s;++r){for(c=l,l=e[r],i=0;i<o;++i)a.push(["p",i,"+=d",i,"s",r].join(""));u&&(r>0&&a.push(["index[",c,"]-=s",c].join("")),a.push(["++index[",l,"]"].join(""))),a.push("}")}return a.join("\n")}function i(e,t,n,i){for(var s=t.length,o=n.arrayArgs.length,u=n.blockSize,a=n.indexArgs.length>0,f=[],l=0;l<o;++l)f.push(["var offset",l,"=p",l].join(""));for(var l=e;l<s;++l)f.push(["for(var j"+l+"=SS[",t[l],"]|0;j",l,">0;){"].join("")),f.push(["if(j",l,"<",u,"){"].join("")),f.push(["s",t[l],"=j",l].join("")),f.push(["j",l,"=0"].join("")),f.push(["}else{s",t[l],"=",u].join("")),f.push(["j",l,"-=",u,"}"].join("")),a&&f.push(["index[",t[l],"]=j",l].join(""));for(var l=0;l<o;++l){for(var c=["offset"+l],h=e;h<s;++h)c.push(["j",h,"*t",l,"p",t[h]].join(""));f.push(["p",l,"=(",c.join("+"),")"].join(""))}f.push(r(t,n,i));for(var l=e;l<s;++l)f.push("}");return f.join("\n")}function s(e){for(var t=0,n=e[0].length;t<n;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}function o(e,t,n){for(var r=e.body,i=[],s=[],o=0;o<e.args.length;++o){var u=e.args[o];if(!(u.count<=0)){var a=new RegExp(u.name,"g"),f="",l=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var c=t.offsetArgIndex.indexOf(o),h=t.offsetArgs[c];l=h.array,f="+q"+c;case"array":f="p"+l+f;var p="l"+o,d="a"+l;if(0===t.arrayBlockIndices[l])1===u.count?"generic"===n[l]?u.lvalue?(i.push(["var ",p,"=",d,".get(",f,")"].join("")),r=r.replace(a,p),s.push([d,".set(",f,",",p,")"].join(""))):r=r.replace(a,[d,".get(",f,")"].join("")):r=r.replace(a,[d,"[",f,"]"].join("")):"generic"===n[l]?(i.push(["var ",p,"=",d,".get(",f,")"].join("")),r=r.replace(a,p),u.lvalue&&s.push([d,".set(",f,",",p,")"].join(""))):(i.push(["var ",p,"=",d,"[",f,"]"].join("")),r=r.replace(a,p),u.lvalue&&s.push([d,"[",f,"]=",p].join("")));else{for(var v=[u.name],m=[f],g=0;g<Math.abs(t.arrayBlockIndices[l]);g++)v.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(g+1)+"*t"+l+"b"+g);if(a=new RegExp(v.join(""),"g"),f=m.join("+"),"generic"===n[l])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(a,[d,"[",f,"]"].join(""))}break;case"scalar":r=r.replace(a,"Y"+t.scalarArgs.indexOf(o));break;case"index":r=r.replace(a,"index");break;case"shape":r=r.replace(a,"shape")}}}return[i.join("\n"),r,s.join("\n")].join("\n").trim()}function u(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],s=i.match(/\d+/);s=s?s[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+s:t[r]=i.charAt(0)+s,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}function a(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,a=new Array(e.arrayArgs.length),l=new Array(e.arrayArgs.length),c=0;c<e.arrayArgs.length;++c)l[c]=t[2*c],a[c]=t[2*c+1];for(var h=[],p=[],d=[],v=[],m=[],c=0;c<e.arrayArgs.length;++c){e.arrayBlockIndices[c]<0?(d.push(0),v.push(n),h.push(n),p.push(n+e.arrayBlockIndices[c])):(d.push(e.arrayBlockIndices[c]),v.push(e.arrayBlockIndices[c]+n),h.push(0),p.push(e.arrayBlockIndices[c]));for(var g=[],y=0;y<a[c].length;y++)d[c]<=a[c][y]&&a[c][y]<v[c]&&g.push(a[c][y]-d[c]);m.push(g)}for(var b=["SS"],w=["'use strict'"],E=[],y=0;y<n;++y)E.push(["s",y,"=SS[",y,"]"].join(""));for(var c=0;c<e.arrayArgs.length;++c){b.push("a"+c),b.push("t"+c),b.push("p"+c);for(var y=0;y<n;++y)E.push(["t",c,"p",y,"=t",c,"[",d[c]+y,"]"].join(""));for(var y=0;y<Math.abs(e.arrayBlockIndices[c]);++y)E.push(["t",c,"b",y,"=t",c,"[",h[c]+y,"]"].join(""))}for(var c=0;c<e.scalarArgs.length;++c)b.push("Y"+c);if(e.shapeArgs.length>0&&E.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var S=new Array(n),c=0;c<n;++c)S[c]="0";E.push(["index=[",S.join(","),"]"].join(""))}for(var c=0;c<e.offsetArgs.length;++c){for(var x=e.offsetArgs[c],T=[],y=0;y<x.offset.length;++y)0!==x.offset[y]&&(1===x.offset[y]?T.push(["t",x.array,"p",y].join("")):T.push([x.offset[y],"*t",x.array,"p",y].join("")));0===T.length?E.push("q"+c+"=0"):E.push(["q",c,"=",T.join("+")].join(""))}var N=f([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));E=E.concat(N),w.push("var "+E.join(","));for(var c=0;c<e.arrayArgs.length;++c)w.push("p"+c+"|=0");e.pre.body.length>3&&w.push(o(e.pre,e,l));var C=o(e.body,e,l),k=s(m);k<n?w.push(i(k,m[0],e,C)):w.push(r(m[0],e,C)),e.post.body.length>3&&w.push(o(e.post,e,l)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+w.join("\n")+"\n----------");var L=[e.funcName||"unnamed","_cwise_loop_",a[0].join("s"),"m",k,u(l)].join(""),A=new Function(["function ",L,"(",b.join(","),"){",w.join("\n"),"} return ",L].join(""));return A()}var f=e("uniq");t.exports=a},{uniq:504}],95:[function(e,t,n){"use strict";function r(e){var t=["'use strict'","var CACHED={}"],n=[],r=e.funcName+"_cwise_thunk";t.push(["return function ",r,"(",e.shimArgs.join(","),"){"].join(""));for(var s=[],o=[],u=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],a=[],f=[],l=0;l<e.arrayArgs.length;++l){var c=e.arrayArgs[l];n.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),s.push("t"+c),s.push("r"+c),o.push("t"+c),o.push("r"+c+".join()"),u.push("array"+c+".data"),u.push("array"+c+".stride"),u.push("array"+c+".offset|0"),l>0&&(a.push("array"+e.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[l]))),f.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[l])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+a.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var l=0;l<e.scalarArgs.length;++l)u.push("scalar"+e.scalarArgs[l]);n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",u.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------");var h=new Function("compile",t.join("\n"));return h(i.bind(void 0,e))}var i=e("./compile.js");t.exports=r},{"./compile.js":94}],96:[function(e,t,n){t.exports=e("cwise-compiler")},{"cwise-compiler":93}],97:[function(e,t,n){!function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function n(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function i(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function s(e){return null===e?NaN:+e}function o(e){return!isNaN(e)}function u(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}function a(e){return e.length}function f(e){for(var t=1;e*t%1;)t*=10;return t}function l(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function c(){this._=Object.create(null)}function h(e){return(e+="")===Su||e[0]===xu?xu+e:e}function p(e){return(e+="")[0]===xu?e.slice(1):e}function d(e){return h(e)in this._}function v(e){return(e=h(e))in this._&&delete this._[e]}function m(){var e=[];for(var t in this._)e.push(p(t));return e}function g(){var e=0;for(var t in this._)++e;return e}function y(){for(var e in this._)return!1;return!0}function b(){this._=Object.create(null)}function w(e){return e}function E(e,t,n){return function(){var i=n.apply(t,arguments);return i===t?e:i}}function S(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=Tu.length;n<r;++n){var i=Tu[n]+t;if(i in e)return i}}function x(){}function T(){}function N(e){function t(){for(var t,r=n,i=-1,s=r.length;++i<s;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new c;return t.on=function(t,i){var s,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,s=n.indexOf(o)).concat(n.slice(s+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function C(){lu.event.preventDefault()}function k(){for(var e,t=lu.event;e=t.sourceEvent;)t=e;return t}function L(e){for(var t=new T,n=0,r=arguments.length;++n<r;)t[arguments[n]]=N(t);return t.of=function(n,r){return function(i){try{var s=i.sourceEvent=lu.event;i.target=e,lu.event=i,t[i.type].apply(n,r)}finally{lu.event=s}}},t}function A(e){return Cu(e,Ou),e}function O(e){return"function"==typeof e?e:function(){return ku(e,this)}}function M(e){return"function"==typeof e?e:function(){return Lu(e,this)}}function _(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function s(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=lu.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?u:o:e.local?s:i}function D(e){return e.trim().replace(/\s+/g," ")}function P(e){return new RegExp("(?:^|\\s+)"+lu.requote(e)+"(?:\\s+|$)","g")}function H(e){return(e+"").trim().split(/^|\s+/)}function B(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=H(e).map(j);var i=e.length;return"function"==typeof t?r:n}function j(e){var t=P(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",D(i+" "+e))):n.setAttribute("class",D(i.replace(t," ")))}}function F(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?s:i}function I(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function q(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n===Mu&&t.documentElement.namespaceURI===Mu?t.createElement(e):t.createElementNS(n,e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=lu.ns.qualify(e)).local?n:t}function R(){var e=this.parentNode;e&&e.removeChild(this)}function U(e){return{__data__:e}}function z(e){return function(){return Au(this,e)}}function W(e){return arguments.length||(e=i),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function X(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,s=e[n],o=0,u=s.length;o<u;o++)(i=s[o])&&t(i,o,n);return e}function V(e){return Cu(e,Du),e}function $(e){var t,n;return function(i,s,o){var u,a=e[o].update,f=a.length;for(o!=n&&(n=o,t=0),s>=t&&(t=s+1);!(u=a[t])&&++t<f;);return u}}function J(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=a(t,hu(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function s(){var t,n=new RegExp("^__on([^.]+)"+lu.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,u=e.indexOf("."),a=K;u>0&&(e=e.slice(0,u));var f=Pu.get(e);return f&&(e=f,a=Q),u?t?i:r:t?x:s}function K(e,t){return function(n){var r=lu.event;lu.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{lu.event=r}}}function Q(e,t){var n=K(e,t);return function(e){var t=this,i=e.relatedTarget;i&&(i===t||8&i.compareDocumentPosition(t))||n.call(t,e)}}function G(t){var r=".dragsuppress-"+ ++Bu,i="click"+r,s=lu.select(n(t)).on("touchmove"+r,C).on("dragstart"+r,C).on("selectstart"+r,C);if(null==Hu&&(Hu=!("onselectstart"in t)&&S(t.style,"userSelect")),Hu){var o=e(t).style,u=o[Hu];o[Hu]="none"}return function(e){if(s.on(r,null),Hu&&(o[Hu]=u),e){var t=function(){s.on(i,null)};s.on(i,function(){C(),t()},!0),setTimeout(t,0)}}}function Y(e,t){t.changedTouches&&(t=t.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(ju<0){var s=n(e);if(s.scrollX||s.scrollY){r=lu.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();ju=!o.f&&!o.e,r.remove()}}return ju?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var u=e.getBoundingClientRect();return[t.clientX-u.left-e.clientLeft,t.clientY-u.top-e.clientTop]}function Z(){return lu.event.changedTouches[0].identifier}function et(e){return e>0?1:e<0?-1:0}function tt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function nt(e){return e>1?0:e<-1?qu:Math.acos(e)}function rt(e){return e>1?zu:e<-1?-zu:Math.asin(e)}function it(e){return((e=Math.exp(e))-1/e)/2}function st(e){return((e=Math.exp(e))+1/e)/2}function ot(e){return((e=Math.exp(2*e))-1)/(e+1)}function ut(e){return(e=Math.sin(e/2))*e}function at(){}function ft(e,t,n){return this instanceof ft?(this.h=+e,this.s=+t,void (this.l=+n)):arguments.length<2?e instanceof ft?new ft(e.h,e.s,e.l):xt(""+e,Tt,ft):new ft(e,t,n)}function lt(e,t,n){function r(e){return e>360?e-=360:e<0&&(e+=360),e<60?s+(o-s)*e/60:e<180?o:e<240?s+(o-s)*(240-e)/60:s}function i(e){return Math.round(255*r(e))}var s,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,o=n<=.5?n*(1+t):n+t-n*t,s=2*n-o,new bt(i(e+120),i(e),i(e-120))}function ct(e,t,n){return this instanceof ct?(this.h=+e,this.c=+t,void (this.l=+n)):arguments.length<2?e instanceof ct?new ct(e.h,e.c,e.l):e instanceof pt?vt(e.l,e.a,e.b):vt((e=Nt((e=lu.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ct(e,t,n)}function ht(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new pt(n,Math.cos(e*=Wu)*t,Math.sin(e)*t)}function pt(e,t,n){return this instanceof pt?(this.l=+e,this.a=+t,void (this.b=+n)):arguments.length<2?e instanceof pt?new pt(e.l,e.a,e.b):e instanceof ct?ht(e.h,e.c,e.l):Nt((e=bt(e)).r,e.g,e.b):new pt(e,t,n)}function dt(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=mt(i)*ta,r=mt(r)*na,s=mt(s)*ra,new bt(yt(3.2404542*i-1.5371385*r-.4985314*s),yt(-0.969266*i+1.8760108*r+.041556*s),yt(.0556434*i-.2040259*r+1.0572252*s))}function vt(e,t,n){return e>0?new ct(Math.atan2(n,t)*Xu,Math.sqrt(t*t+n*n),e):new ct(NaN,NaN,e)}function mt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function gt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function yt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function bt(e,t,n){return this instanceof bt?(this.r=~~e,this.g=~~t,void (this.b=~~n)):arguments.length<2?e instanceof bt?new bt(e.r,e.g,e.b):xt(""+e,bt,lt):new bt(e,t,n)}function wt(e){return new bt(e>>16,e>>8&255,255&e)}function Et(e){return wt(e)+""}function St(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function xt(e,t,n){var r,i,s,o=0,u=0,a=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(kt(i[0]),kt(i[1]),kt(i[2]))}return(s=oa.get(e))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&s)>>4,o|=o>>4,u=240&s,u|=u>>4,a=15&s,a|=a<<4):7===e.length&&(o=(16711680&s)>>16,u=(65280&s)>>8,a=255&s)),t(o,u,a))}function Tt(e,t,n){var r,i,s=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),u=o-s,a=(o+s)/2;return u?(i=a<.5?u/(o+s):u/(2-o-s),r=e==o?(t-n)/u+(t<n?6:0):t==o?(n-e)/u+2:(e-t)/u+4,r*=60):(r=NaN,i=a>0&&a<1?0:r),new ft(r,i,a)}function Nt(e,t,n){e=Ct(e),t=Ct(t),n=Ct(n);var r=gt((.4124564*e+.3575761*t+.1804375*n)/ta),i=gt((.2126729*e+.7151522*t+.072175*n)/na),s=gt((.0193339*e+.119192*t+.9503041*n)/ra);return pt(116*i-16,500*(r-i),200*(i-s))}function Ct(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function kt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Lt(e){return"function"==typeof e?e:function(){return e}}function At(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Ot(t,n,e,r)}}function Ot(e,t,n,r){function i(){var e,t=a.status;if(!t&&_t(a)||t>=200&&t<300||304===t){try{e=n.call(s,a)}catch(e){return void o.error.call(s,e)}o.load.call(s,e)}else o.error.call(s,a)}var s={},o=lu.dispatch("beforesend","progress","load","error"),u={},a=new XMLHttpRequest,f=null;return!this.XDomainRequest||"withCredentials"in a||!/^(http(s)?:)?\/\//.test(e)||(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=i:a.onreadystatechange=function(){a.readyState>3&&i()},a.onprogress=function(e){var t=lu.event;lu.event=e;try{o.progress.call(s,a)}finally{lu.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",s):t},s.responseType=function(e){return arguments.length?(f=e,s):f},s.response=function(e){return n=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(hu(arguments)))}}),s.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),a.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),a.setRequestHeader)for(var l in u)a.setRequestHeader(l,u[l]);return null!=t&&a.overrideMimeType&&a.overrideMimeType(t),null!=f&&(a.responseType=f),null!=i&&s.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(s,a),a.send(null==r?null:r),s},s.abort=function(){return a.abort(),s},lu.rebind(s,o,"on"),null==r?s:s.get(Mt(r))}function Mt(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function _t(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Dt(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i=n+t,s={c:e,t:i,n:null};return aa?aa.n=s:ua=s,aa=s,fa||(la=clearTimeout(la),fa=1,ca(Pt)),s}function Pt(){var e=Ht(),t=Bt()-e;t>24?(isFinite(t)&&(clearTimeout(la),la=setTimeout(Pt,t)),fa=0):(fa=1,ca(Pt))}function Ht(){for(var e=Date.now(),t=ua;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Bt(){for(var e,t=ua,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:ua=t.n;return aa=e,n}function jt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Ft(e,t){var n=Math.pow(10,3*Eu(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function It(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,s=r&&n?function(e,t){for(var i=e.length,s=[],o=0,u=r[0],a=0;i>0&&u>0&&(a+u+1>t&&(u=Math.max(1,t-a)),s.push(e.substring(i-=u,i+u)),!((a+=u+1)>t));)u=r[o=(o+1)%r.length];return s.reverse().join(n)}:w;return function(e){var n=pa.exec(e),r=n[1]||" ",o=n[2]||">",u=n[3]||"-",a=n[4]||"",f=n[5],l=+n[6],c=n[7],h=n[8],p=n[9],d=1,v="",m="",g=!1,y=!0;switch(h&&(h=+h.substring(1)),(f||"0"===r&&"="===o)&&(f=r="0",o="="),p){case"n":c=!0,p="g";break;case"%":d=100,m="%",p="f";break;case"p":d=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===a&&(v="0"+p.toLowerCase());case"c":y=!1;case"d":g=!0,h=0;break;case"s":d=-1,p="r"}"$"===a&&(v=i[0],m=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=da.get(p)||qt;var b=f&&c;return function(e){var n=m;if(g&&e%1)return"";var i=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===u?"":u;if(d<0){var a=lu.formatPrefix(e,h);e=a.scale(e),n=a.symbol+m}else e*=d;e=p(e,h);var w,E,S=e.lastIndexOf(".");if(S<0){var x=y?e.lastIndexOf("e"):-1;x<0?(w=e,E=""):(w=e.substring(0,x),E=e.substring(x))}else w=e.substring(0,S),E=t+e.substring(S+1);!f&&c&&(w=s(w,1/0));var T=v.length+w.length+E.length+(b?0:i.length),N=T<l?(new Array(T=l-T+1)).join(r):"";return b&&(w=s(N+w,N.length?l-E.length:1/0)),i+=v,e=w+E,("<"===o?i+e+N:">"===o?N+i+e:"^"===o?N.substring(0,T>>=1)+i+e+N.substring(T):i+(b?e:N+e))+n}}}function qt(e){return e+""}function Rt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ut(e,t,n){function r(t){var n=e(t),r=s(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new ma(n-1)),1),n}function s(e,n){return t(e=new ma(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)for(;o<r;)n(o)%s||u.push(new Date(+o)),t(o,1);else for(;o<r;)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{ma=Rt;var r=new Rt;return r._=e,o(r,t,n)}finally{ma=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=zt(e);return a.floor=a,a.round=zt(r),a.ceil=zt(i),a.offset=zt(s),a.range=u,e}function zt(e){return function(t,n){try{ma=Rt;var r=new Rt;return r._=t,e(r,n)._}finally{ma=Date}}}function Wt(e){function t(e){function t(t){for(var n,i,s,o=[],u=-1,a=0;++u<r;)37===e.charCodeAt(u)&&(o.push(e.slice(a,u)),null!=(i=ya[n=e.charAt(++u)])&&(n=e.charAt(++u)),(s=L[n])&&(n=s(t,null==i?"e"===n?" ":"0":i)),o.push(n),a=u+1);return o.push(e.slice(a,u)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var s=null!=r.Z&&ma!==Rt,o=new(s?Rt:ma);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),s?o._:o},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,s,o,u=0,a=t.length,f=n.length;u<a;){if(r>=f)return-1;if(i=t.charCodeAt(u++),37===i){if(o=t.charAt(u++),s=A[o in ya?t.charAt(u++):o],!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){S.lastIndex=0;var r=S.exec(t.slice(n));return r?(e.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){w.lastIndex=0;var r=w.exec(t.slice(n));return r?(e.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,n){C.lastIndex=0;var r=C.exec(t.slice(n));return r?(e.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){T.lastIndex=0;var r=T.exec(t.slice(n));return r?(e.m=N.get(r[0].toLowerCase()),n+r[0].length):-1}function u(e,t,r){return n(e,L.c.toString(),t,r)}function a(e,t,r){return n(e,L.x.toString(),t,r)}function f(e,t,r){return n(e,L.X.toString(),t,r)}function l(e,t,n){var r=b.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var c=e.dateTime,h=e.date,p=e.time,d=e.periods,v=e.days,m=e.shortDays,g=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{ma=Rt;var t=new ma;return t._=e,r(t)}finally{ma=Date}}var r=t(e);return n.parse=function(e){try{ma=Rt;var t=r.parse(e);return t&&t._}finally{ma=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=cn;var b=lu.map(),w=Vt(v),E=$t(v),S=Vt(m),x=$t(m),T=Vt(g),N=$t(g),C=Vt(y),k=$t(y);d.forEach(function(e,t){b.set(e.toLowerCase(),t)});var L={a:function(e){return m[e.getDay()]},A:function(e){return v[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return g[e.getMonth()]},c:t(c),d:function(e,t){return Xt(e.getDate(),t,2)},e:function(e,t){return Xt(e.getDate(),t,2)},H:function(e,t){return Xt(e.getHours(),t,2)},I:function(e,t){return Xt(e.getHours()%12||12,t,2)},j:function(e,t){return Xt(1+va.dayOfYear(e),t,3)},L:function(e,t){return Xt(e.getMilliseconds(),t,3)},m:function(e,t){return Xt(e.getMonth()+1,t,2)},M:function(e,t){return Xt(e.getMinutes(),t,2)},p:function(e){return d[+(e.getHours()>=12)]},S:function(e,t){return Xt(e.getSeconds(),t,2)},U:function(e,t){return Xt(va.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Xt(va.mondayOfYear(e),t,2)},x:t(h),X:t(p),y:function(e,t){return Xt(e.getFullYear()%100,t,2)},Y:function(e,t){return Xt(e.getFullYear()%1e4,t,4)},Z:fn,"%":function(){return"%"}},A={a:r,A:i,b:s,B:o,c:u,d:nn,e:nn,H:sn,I:sn,j:rn,L:an,m:tn,M:on,p:l,S:un,U:Kt,w:Jt,W:Qt,x:a,X:f,y:Yt,Y:Gt,Z:Zt,"%":ln};return t}function Xt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?(new Array(n-s+1)).join(t)+i:i)}function Vt(e){return new RegExp("^(?:"+e.map(lu.requote).join("|")+")","i")}function $t(e){for(var t=new c,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Jt(e,t,n){ba.lastIndex=0;var r=ba.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Kt(e,t,n){ba.lastIndex=0;var r=ba.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Qt(e,t,n){ba.lastIndex=0;var r=ba.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Gt(e,t,n){ba.lastIndex=0;var r=ba.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Yt(e,t,n){ba.lastIndex=0;var r=ba.exec(t.slice(n,n+2));return r?(e.y=en(+r[0]),n+r[0].length):-1}function Zt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function en(e){return e+(e>68?1900:2e3)}function tn(e,t,n){ba.lastIndex=0;var r=ba.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function nn(e,t,n){ba.lastIndex=0;var r=ba.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function rn(e,t,n){ba.lastIndex=0;var r=ba.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function sn(e,t,n){ba.lastIndex=0;var r=ba.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function on(e,t,n){ba.lastIndex=0;var r=ba.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function un(e,t,n){ba.lastIndex=0;var r=ba.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function an(e,t,n){ba.lastIndex=0;var r=ba.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function fn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=Eu(t)/60|0,i=Eu(t)%60;return n+Xt(r,"0",2)+Xt(i,"0",2)}function ln(e,t,n){wa.lastIndex=0;var r=wa.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function cn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function hn(){}function pn(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function dn(e,t){e&&Ta.hasOwnProperty(e.type)&&Ta[e.type](e,t)}function vn(e,t,n){var r,i=-1,s=e.length-n;for(t.lineStart();++i<s;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function mn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)vn(e[n],t,1);t.polygonEnd()}function gn(){function e(e,t){e*=Wu,t=t*Wu/2+qu/4;var n=e-r,o=n>=0?1:-1,u=o*n,a=Math.cos(t),f=Math.sin(t),l=s*f,c=i*a+l*Math.cos(u),h=l*o*Math.sin(u);Ca.add(Math.atan2(h,c)),r=e,i=a,s=f}var t,n,r,i,s;ka.point=function(o,u){ka.point=e,r=(t=o)*Wu,i=Math.cos(u=(n=u)*Wu/2+qu/4),s=Math.sin(u)},ka.lineEnd=function(){e(t,n)}}function yn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function bn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function wn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function En(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Sn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function xn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Tn(e){return[Math.atan2(e[1],e[0]),rt(e[2])]}function Nn(e,t){return Eu(e[0]-t[0])<Fu&&Eu(e[1]-t[1])<Fu}function Cn(e,t){e*=Wu;var n=Math.cos(t*=Wu);kn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function kn(e,t,n){++La,Oa+=(e-Oa)/La,Ma+=(t-Ma)/La,_a+=(n-_a)/La}function Ln(){function e(e,i){e*=Wu;var s=Math.cos(i*=Wu),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=n*a-r*u)*f+(f=r*o-t*a)*f+(f=t*u-n*o)*f),t*o+n*u+r*a);Aa+=f,Da+=f*(t+(t=o)),Pa+=f*(n+(n=u)),Ha+=f*(r+(r=a)),kn(t,n,r)}var t,n,r;Ia.point=function(i,s){i*=Wu;var o=Math.cos(s*=Wu);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(s),Ia.point=e,kn(t,n,r)}}function An(){Ia.point=Cn}function On(){function e(e,t){e*=Wu;var n=Math.cos(t*=Wu),o=n*Math.cos(e),u=n*Math.sin(e),a=Math.sin(t),f=i*a-s*u,l=s*o-r*a,c=r*u-i*o,h=Math.sqrt(f*f+l*l+c*c),p=r*o+i*u+s*a,d=h&&-nt(p)/h,v=Math.atan2(h,p);Ba+=d*f,ja+=d*l,Fa+=d*c,Aa+=v,Da+=v*(r+(r=o)),Pa+=v*(i+(i=u)),Ha+=v*(s+(s=a)),kn(r,i,s)}var t,n,r,i,s;Ia.point=function(o,u){t=o,n=u,Ia.point=e,o*=Wu;var a=Math.cos(u*=Wu);r=a*Math.cos(o),i=a*Math.sin(o),s=Math.sin(u),kn(r,i,s)},Ia.lineEnd=function(){e(t,n),Ia.lineEnd=An,Ia.point=Cn}}function Mn(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function _n(){return!0}function Dn(e,t,n,r,i){var s=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Nn(n,r)){i.lineStart();for(var u=0;u<t;++u)i.point((n=e[u])[0],n[1]);return void i.lineEnd()}var a=new Hn(n,e,null,!0),f=new Hn(n,null,a,!1);a.o=f,s.push(a),o.push(f),a=new Hn(r,e,null,!1),f=new Hn(r,null,a,!0),a.o=f,s.push(a),o.push(f)}}),o.sort(t),Pn(s),Pn(o),s.length){for(var u=0,a=n,f=o.length;u<f;++u)o[u].e=a=!a;for(var l,c,h=s[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,f=l.length;u<f;++u)i.point((c=l[u])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){l=p.p.z;for(var u=l.length-1;u>=0;--u)i.point((c=l[u])[0],c[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Pn(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Hn(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Bn(e,t,n,r){return function(i,s){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&s.point(t,n)}function u(e,t){var n=i(e,t);m.point(n[0],n[1])}function a(){y.point=u,m.lineStart()}function f(){y.point=o,m.lineEnd()}function l(e,t){v.push([e,t]);var n=i(e,t);w.point(n[0],n[1])}function c(){w.lineStart(),v=[]}function h(){l(v[0][0],v[0][1]),w.lineEnd();var e,t=w.clean(),n=b.buffer(),r=n.length;if(v.pop(),d.push(v),v=null,r)if(1&t){e=n[0];var i,r=e.length-1,o=-1;if(r>0){for(E||(s.polygonStart(),E=!0),s.lineStart();++o<r;)s.point((i=e[o])[0],i[1]);s.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(jn))}var p,d,v,m=t(s),g=i.invert(r[0],r[1]),y={point:o,lineStart:a,lineEnd:f,polygonStart:function(){y.point=l,y.lineStart=c,y.lineEnd=h,p=[],d=[]},polygonEnd:function(){y.point=o,y.lineStart=a,y.lineEnd=f,p=lu.merge(p);var e=zn(g,d);p.length?(E||(s.polygonStart(),E=!0),Dn(p,In,e,n,s)):e&&(E||(s.polygonStart(),E=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),E&&(s.polygonEnd(),E=!1),p=d=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}},b=Fn(),w=t(b),E=!1;return y}}function jn(e){return e.length>1}function Fn(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:x,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function In(e,t){return((e=e.x)[0]<0?e[1]-zu-Fu:zu-e[1])-((t=t.x)[0]<0?t[1]-zu-Fu:zu-t[1])}function qn(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var u=s>0?qu:-qu,a=Eu(s-n);Eu(a-qu)<Fu?(e.point(n,r=(r+o)/2>0?zu:-zu),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(s,r),t=0):i!==u&&a>=qu&&(Eu(n-i)<Fu&&(n-=i*Fu),Eu(s-u)<Fu&&(s-=u*Fu),r=Rn(n,r,s,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=s,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function Rn(e,t,n,r){var i,s,o=Math.sin(e-n);return Eu(o)>Fu?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function Un(e,t,n,r){var i;if(null==e)i=n*zu,r.point(-qu,i),r.point(0,i),r.point(qu,i),r.point(qu,0),r.point(qu,-i),r.point(0,-i),r.point(-qu,-i),r.point(-qu,0),r.point(-qu,i);else if(Eu(e[0]-t[0])>Fu){var s=e[0]<t[0]?qu:-qu;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function zn(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=0;Ca.reset();for(var u=0,a=t.length;u<a;++u){var f=t[u],l=f.length;if(l)for(var c=f[0],h=c[0],p=c[1]/2+qu/4,d=Math.sin(p),v=Math.cos(p),m=1;;){m===l&&(m=0),e=f[m];var g=e[0],y=e[1]/2+qu/4,b=Math.sin(y),w=Math.cos(y),E=g-h,S=E>=0?1:-1,x=S*E,T=x>qu,N=d*b;if(Ca.add(Math.atan2(N*S*Math.sin(x),v*w+N*Math.cos(x))),s+=T?E+S*Ru:E,T^h>=n^g>=n){var C=wn(yn(c),yn(e));xn(C);var k=wn(i,C);xn(k);var L=(T^E>=0?-1:1)*rt(k[2]);(r>L||r===L&&(C[0]||C[1]))&&(o+=T^E>=0?1:-1)}if(!(m++))break;h=g,d=b,v=w,c=e}}return(s<-Fu||s<Fu&&Ca<-Fu)^1&o}function Wn(e){function t(e,t){return Math.cos(e)*Math.cos(t)>s}function n(e){var n,s,a,f,l;return{lineStart:function(){f=a=!1,l=1},point:function(c,h){var p,d=[c,h],v=t(c,h),m=o?v?0:i(c,h):v?i(c+(c<0?qu:-qu),h):0;if(!n&&(f=a=v)&&e.lineStart(),v!==a&&(p=r(n,d),(Nn(n,p)||Nn(d,p))&&(d[0]+=Fu,d[1]+=Fu,v=t(d[0],d[1]))),v!==a)l=0,v?(e.lineStart(),p=r(d,n),e.point(p[0],p[1])):(p=r(n,d),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(u&&n&&o^v){var g;m&s||!(g=r(d,n,!0))||(l=0,o?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!v||n&&Nn(n,d)||e.point(d[0],d[1]),n=d,a=v,s=m},lineEnd:function(){a&&e.lineEnd(),n=null},clean:function(){return l|(f&&a)<<1}}}function r(e,t,n){var r=yn(e),i=yn(t),o=[1,0,0],u=wn(r,i),a=bn(u,u),f=u[0],l=a-f*f;if(!l)return!n&&e;var c=s*a/l,h=-s*f/l,p=wn(o,u),d=Sn(o,c),v=Sn(u,h);En(d,v);var m=p,g=bn(d,m),y=bn(m,m),b=g*g-y*(bn(d,d)-1);if(!(b<0)){var w=Math.sqrt(b),E=Sn(m,(-g-w)/y);if(En(E,d),E=Tn(E),!n)return E;var S,x=e[0],T=t[0],N=e[1],C=t[1];T<x&&(S=x,x=T,T=S);var k=T-x,L=Eu(k-qu)<Fu,A=L||k<Fu;if(!L&&C<N&&(S=N,N=C,C=S),A?L?N+C>0^E[1]<(Eu(E[0]-x)<Fu?N:C):N<=E[1]&&E[1]<=C:k>qu^(x<=E[0]&&E[0]<=T)){var O=Sn(m,(-g+w)/y);return En(O,d),[E,Tn(O)]}}}function i(t,n){var r=o?e:qu-e,i=0;return t<-r?i|=1:t>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var s=Math.cos(e),o=s>0,u=Eu(s)>Fu,a=gr(e,6*Wu);return Bn(t,n,a,o?[0,-e]:[-qu,e-qu])}function Xn(e,t,n,r){return function(i){var s,o=i.a,u=i.b,a=o.x,f=o.y,l=u.x,c=u.y,h=0,p=1,d=l-a,v=c-f;if(s=e-a,d||!(s>0)){if(s/=d,d<0){if(s<h)return;s<p&&(p=s)}else if(d>0){if(s>p)return;s>h&&(h=s)}if(s=n-a,d||!(s<0)){if(s/=d,d<0){if(s>p)return;s>h&&(h=s)}else if(d>0){if(s<h)return;s<p&&(p=s)}if(s=t-f,v||!(s>0)){if(s/=v,v<0){if(s<h)return;s<p&&(p=s)}else if(v>0){if(s>p)return;s>h&&(h=s)}if(s=r-f,v||!(s<0)){if(s/=v,v<0){if(s>p)return;s>h&&(h=s)}else if(v>0){if(s<h)return;s<p&&(p=s)}return h>0&&(i.a={x:a+h*d,y:f+h*v}),p<1&&(i.b={x:a+p*d,y:f+p*v}),i}}}}}}function Vn(e,t,n,r){function i(r,i){return Eu(r[0]-e)<Fu?i>0?0:3:Eu(r[0]-n)<Fu?i>0?2:1:Eu(r[1]-t)<Fu?i>0?1:0:i>0?3:2}function s(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(u){function a(e){for(var t=0,n=m.length,r=e[1],i=0;i<n;++i)for(var s,o=1,u=m[i],a=u.length,f=u[0];o<a;++o)s=u[o],f[1]<=r?s[1]>r&&tt(f,s,e)>0&&++t:s[1]<=r&&tt(f,s,e)<0&&--t,f=s;return 0!==t}function f(s,u,a,f){var l=0,c=0;if(null==s||(l=i(s,a))!==(c=i(u,a))||o(s,u)<0^a>0){do f.point(0===l||3===l?e:n,l>1?r:t);while((l=(l+a+4)%4)!==c)}else f.point(u[0],u[1])}function l(i,s){return e<=i&&i<=n&&t<=s&&s<=r}function c(e,t){l(e,t)&&u.point(e,t)}function h(){A.point=d,m&&m.push(g=[]),T=!0,x=!1,E=S=NaN}function p(){v&&(d(y,b),w&&x&&k.rejoin(),v.push(k.buffer())),A.point=c,x&&u.lineEnd()}function d(e,t){e=Math.max(-Ra,Math.min(Ra,e)),t=Math.max(-Ra,Math.min(Ra,t));var n=l(e,t);if(m&&g.push([e,t]),T)y=e,b=t,w=n,T=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&x)u.point(e,t);else{var r={a:{x:E,y:S},b:{x:e,y:t}};L(r)?(x||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),N=!1):n&&(u.lineStart(),u.point(e,t),N=!1)}E=e,S=t,x=n}var v,m,g,y,b,w,E,S,x,T,N,C=u,k=Fn(),L=Xn(e,t,n,r),A={point:c,lineStart:h,lineEnd:p,polygonStart:function(){u=k,v=[],m=[],N=!0},polygonEnd:function(){u=C,v=lu.merge(v);var t=a([e,r]),n=N&&t,i=v.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),f(null,null,1,u),u.lineEnd()),i&&Dn(v,s,t,f,u),u.polygonEnd()),v=m=g=null}};return A}}function $n(e){var t=0,n=qu/3,r=fr(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*qu/180,n=e[1]*qu/180):[t/qu*180,n/qu*180]},i}function Jn(e,t){function n(e,t){var n=Math.sqrt(s-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,s=1+r*(2*i-r),o=Math.sqrt(s)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,rt((s-(e*e+n*n)*i*i)/(2*i))]},n}function Kn(){function e(e,t){za+=i*e-r*t,r=e,i=t}var t,n,r,i;Ja.point=function(s,o){Ja.point=e,t=r=s,n=i=o},Ja.lineEnd=function(){e(t,n)}}function Qn(e,t){e<Wa&&(Wa=e),e>Va&&(Va=e),t<Xa&&(Xa=t),t>$a&&($a=t)}function Gn(){function e(e,t){o.push("M",e,",",t,s)}function t(e,t){o.push("M",e,",",t),u.point=n}function n(e,t){o.push("L",e,",",t)}function r(){u.point=e}function i(){o.push("Z")}var s=Yn(4.5),o=[],u={point:e,lineStart:function(){u.point=t},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=e},pointRadius:function(e){return s=Yn(e),u},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return u}function Yn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Zn(e,t){Oa+=e,Ma+=t,++_a}function er(){function e(e,i){var s=e-t,o=i-n,u=Math.sqrt(s*s+o*o);Da+=u*(t+e)/2,Pa+=u*(n+i)/2,Ha+=u,Zn(t=e,n=i)}var t,n;Qa.point=function(i,s){Qa.point=e,Zn(t=i,n=s)}}function tr(){Qa.point=Zn}function nr(){function e(e,t){var n=e-r,s=t-i,o=Math.sqrt(n*n+s*s);Da+=o*(r+e)/2,Pa+=o*(i+t)/2,Ha+=o,o=i*e-r*t,Ba+=o*(r+e),ja+=o*(i+t),Fa+=3*o,Zn(r=e,i=t)}var t,n,r,i;Qa.point=function(s,o){Qa.point=e,Zn(t=r=s,n=i=o)},Qa.lineEnd=function(){e(t,n)}}function rr(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,Ru)}function n(t,n){e.moveTo(t,n),u.point=r}function r(t,n){e.lineTo(t,n)}function i(){u.point=t}function s(){e.closePath()}var o=4.5,u={point:t,lineStart:function(){u.point=n},lineEnd:i,polygonStart:function(){u.lineEnd=s},polygonEnd:function(){u.lineEnd=i,u.point=t},pointRadius:function(e){return o=e,u},result:x};return u}function ir(e){function t(e){return(u?r:n)(e)}function n(t){return ur(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=NaN,T.point=s,t.lineStart()}function s(n,r){var s=yn([n,r]),o=e(n,r);i(b,w,y,E,S,x,b=o[0],w=o[1],y=n,E=s[0],S=s[1],x=s[2],u,t),t.point(b,w)}function o(){T.point=n,t.lineEnd()}function a(){r(),T.point=f,T.lineEnd=l}function f(e,t){s(c=e,h=t),p=b,d=w,v=E,m=S,g=x,T.point=s}function l(){i(b,w,y,E,S,x,p,d,c,v,m,g,u,t),T.lineEnd=o,o()}var c,h,p,d,v,m,g,y,b,w,E,S,x,T={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),T.lineStart=a},polygonEnd:function(){t.polygonEnd(),T.lineStart=r}};return T}function i(t,n,r,u,a,f,l,c,h,p,d,v,m,g){var y=l-t,b=c-n,w=y*y+b*b;if(w>4*s&&m--){var E=u+p,S=a+d,x=f+v,T=Math.sqrt(E*E+S*S+x*x),N=Math.asin(x/=T),C=Eu(Eu(x)-1)<Fu||Eu(r-h)<Fu?(r+h)/2:Math.atan2(S,E),k=e(C,N),L=k[0],A=k[1],O=L-t,M=A-n,_=b*O-y*M;(_*_/w>s||Eu((y*O+b*M)/w-.5)>.3||u*p+a*d+f*v<o)&&(i(t,n,r,u,a,f,L,A,C,E/=T,S/=T,x,m,g),g.point(L,A),i(L,A,C,E,S,x,l,c,h,p,d,v,m,g))}}var s=.5,o=Math.cos(30*Wu),u=16;return t.precision=function(e){return arguments.length?(u=(s=e*e)>0&&16,t):Math.sqrt(s)},t}function sr(e){var t=ir(function(t,n){return e([t*Xu,n*Xu])});return function(e){return lr(t(e))}}function or(e){this.stream=e}function ur(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function ar(e){return fr(function(){return e})()}function fr(e){function t(e){return e=u(e[0]*Wu,e[1]*Wu),[e[0]*h+a,f-e[1]*h]}function n(e){return e=u.invert((e[0]-a)/h,(f-e[1])/h),e&&[e[0]*Xu,e[1]*Xu]}function r(){u=Mn(o=pr(g,y,b),s);var e=s(v,m);return a=p-e[0]*h,f=d+e[1]*h,i()}function i(){return l&&(l.valid=!1,l=null),t}var s,o,u,a,f,l,c=ir(function(e,t){return e=s(e,t),[e[0]*h+a,f-e[1]*h]}),h=150,p=480,d=250,v=0,m=0,g=0,y=0,b=0,E=qa,S=w,x=null,T=null;return t.stream=function(e){return l&&(l.valid=!1),l=lr(E(o,c(S(e)))),l.valid=!0,l},t.clipAngle=function(e){return arguments.length?(E=null==e?(x=e,qa):Wn((x=+e)*Wu),i()):x},t.clipExtent=function(e){return arguments.length?(T=e,S=e?Vn(e[0][0],e[0][1],e[1][0],e[1][1]):w,i()):T},t.scale=function(e){return arguments.length?(h=+e,r()):h},t.translate=function(e){return arguments.length?(p=+e[0],d=+e[1],r()):[p,d]},t.center=function(e){return arguments.length?(v=e[0]%360*Wu,m=e[1]%360*Wu,r()):[v*Xu,m*Xu]},t.rotate=function(e){return arguments.length?(g=e[0]%360*Wu,y=e[1]%360*Wu,b=e.length>2?e[2]%360*Wu:0,r()):[g*Xu,y*Xu,b*Xu]},lu.rebind(t,c,"precision"),function(){return s=e.apply(this,arguments),t.invert=s.invert&&n,r()}}function lr(e){return ur(e,function(t,n){e.point(t*Wu,n*Wu)})}function cr(e,t){return[e,t]}function hr(e,t){return[e>qu?e-Ru:e<-qu?e+Ru:e,t]}function pr(e,t,n){return e?t||n?Mn(vr(e),mr(t,n)):vr(e):t||n?mr(t,n):hr}function dr(e){return function(t,n){return t+=e,[t>qu?t-Ru:t<-qu?t+Ru:t,n]}}function vr(e){var t=dr(e);return t.invert=dr(-e),t}function mr(e,t){function n(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*r+u*i;return[Math.atan2(a*s-l*o,u*r-f*i),rt(l*s+a*o)]}var r=Math.cos(e),i=Math.sin(e),s=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*s-a*o;return[Math.atan2(a*s+f*o,u*r+l*i),rt(l*r-u*i)]},n}function gr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;null!=i?(i=yr(n,i),s=yr(n,s),(o>0?i<s:i>s)&&(i+=o*Ru)):(i=e+o*Ru,s=e-.5*a);for(var f,l=i;o>0?l>s:l<s;l-=a)u.point((f=Tn([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function yr(e,t){var n=yn(t);n[0]-=e,xn(n);var r=nt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Fu)%(2*Math.PI)}function br(e,t,n){var r=lu.range(e,t-Fu,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function wr(e,t,n){var r=lu.range(e,t-Fu,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function Er(e){return e.source}function Sr(e){return e.target}function xr(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(ut(r-t)+i*o*ut(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*Xu,Math.atan2(o,Math.sqrt(r*r+i*i))*Xu]}:function(){return[e*Xu,t*Xu]};return d.distance=h,d}function Tr(){function e(e,i){var s=Math.sin(i*=Wu),o=Math.cos(i),u=Eu((e*=Wu)-t),a=Math.cos(u);Ga+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*s-n*o*a)*u),n*s+r*o*a),t=e,n=s,r=o}var t,n,r;Ya.point=function(i,s){t=i*Wu,n=Math.sin(s*=Wu),r=Math.cos(s),Ya.point=e},Ya.lineEnd=function(){Ya.point=Ya.lineEnd=x}}function Nr(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function Cr(e,t){function n(e,t){o>0?t<-zu+Fu&&(t=-zu+Fu):t>zu-Fu&&(t=zu-Fu);var n=o/Math.pow(i(t),s);return[n*Math.sin(s*e),o-n*Math.cos(s*e)]}var r=Math.cos(e),i=function(e){return Math.tan(qu/4+e/2)},s=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),s)/s;return s?(n.invert=function(e,t){var n=o-t,r=et(s)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/s,2*Math.atan(Math.pow(o/r,1/s))-zu]},n):Lr}function kr(e,t){function n(e,t){var n=s-t;return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),s=r/i+e;return Eu(i)<Fu?cr:(n.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/i,s-et(i)*Math.sqrt(e*e+n*n)]},n)}function Lr(e,t){return[e,Math.log(Math.tan(qu/4+t/2))]}function Ar(e){var t,n=ar(e),r=n.scale,i=n.translate,s=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=s.apply(n,arguments);if(o===n){if(t=null==e){var u=qu*r(),a=i();s([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else t&&(o=null);return o},n.clipExtent(null)}function Or(e,t){return[Math.log(Math.tan(qu/4+t/2)),-e]}function Mr(e){return e[0]}function _r(e){return e[1]}function Dr(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;i++){for(;r>1&&tt(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Pr(e,t){return e[0]-t[0]||e[1]-t[1]}function Hr(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Br(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function jr(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Fr(){si(this),this.edge=this.site=this.circle=null}function Ir(e){var t=cf.pop()||new Fr;return t.site=e,t}function qr(e){Qr(e),af.remove(e),cf.push(e),si(e)}function Rr(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},s=e.P,o=e.N,u=[e];qr(e);for(var a=s;a.circle&&Eu(n-a.circle.x)<Fu&&Eu(r-a.circle.cy)<Fu;)s=a.P,u.unshift(a),qr(a),a=s;u.unshift(a),Qr(a);for(var f=o;f.circle&&Eu(n-f.circle.x)<Fu&&Eu(r-f.circle.cy)<Fu;)o=f.N,u.push(f),qr(f),f=o;u.push(f),Qr(f);var l,c=u.length;for(l=1;l<c;++l)f=u[l],a=u[l-1],ni(f.edge,a.site,f.site,i);a=u[0],f=u[c-1],f.edge=ei(a.site,f.site,null,i),Kr(a),Kr(f)}function Ur(e){for(var t,n,r,i,s=e.x,o=e.y,u=af._;u;)if(r=zr(u,o)-s,r>Fu)u=u.L;else{if(i=s-Wr(u,o),!(i>Fu)){r>-Fu?(t=u.P,n=u):i>-Fu?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}var a=Ir(e);if(af.insert(t,a),t||n){if(t===n)return Qr(t),n=Ir(t.site),af.insert(a,n),a.edge=n.edge=ei(t.site,a.site),Kr(t),void Kr(n);if(!n)return void (a.edge=ei(t.site,a.site));Qr(t),Qr(n);var f=t.site,l=f.x,c=f.y,h=e.x-l,p=e.y-c,d=n.site,v=d.x-l,m=d.y-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w={x:(m*y-p*b)/g+l,y:(h*b-v*y)/g+c};ni(n.edge,f,d,w),a.edge=ei(f,e,null,w),n.edge=ei(e,d,null,w),Kr(t),Kr(n)}}function zr(e,t){var n=e.site,r=n.x,i=n.y,s=i-t;if(!s)return r;var o=e.P;if(!o)return-1/0;n=o.site;var u=n.x,a=n.y,f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function Wr(e,t){var n=e.N;if(n)return zr(n,t);var r=e.site;return r.y===t?r.x:1/0}function Xr(e){this.site=e,this.edges=[]}function Vr(e){for(var t,n,r,i,s,o,u,a,f,l,c=e[0][0],h=e[1][0],p=e[0][1],d=e[1][1],v=uf,m=v.length;m--;)if(s=v[m],s&&s.prepare())for(u=s.edges,a=u.length,o=0;o<a;)l=u[o].end(),r=l.x,i=l.y,f=u[++o%a].start(),t=f.x,n=f.y,(Eu(r-t)>Fu||Eu(i-n)>Fu)&&(u.splice(o,0,new ri(ti(s.site,l,Eu(r-c)<Fu&&d-i>Fu?{x:c,y:Eu(t-c)<Fu?n:d}:Eu(i-d)<Fu&&h-r>Fu?{x:Eu(n-d)<Fu?t:h,y:d}:Eu(r-h)<Fu&&i-p>Fu?{x:h,y:Eu(t-h)<Fu?n:p}:Eu(i-p)<Fu&&r-c>Fu?{x:Eu(n-p)<Fu?t:c,y:p}:null),s.site,null)),++a)}function $r(e,t){return t.angle-e.angle}function Jr(){si(this),this.x=this.y=this.arc=this.site=this.cy=null}function Kr(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,s=n.site;if(r!==s){var o=i.x,u=i.y,a=r.x-o,f=r.y-u,l=s.x-o,c=s.y-u,h=2*(a*c-f*l);if(!(h>=-Iu)){var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,c=m+u,g=hf.pop()||new Jr;g.arc=e,g.site=i,g.x=v+o,g.y=c+Math.sqrt(v*v+m*m),g.cy=c,e.circle=g;for(var y=null,b=lf._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}lf.insert(y,g),y||(ff=g)}}}}function Qr(e){var t=e.circle;t&&(t.P||(ff=t.N),lf.remove(t),hf.push(t),si(t),e.circle=null)}function Gr(e){for(var t,n=of,r=Xn(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Yr(t,e)||!r(t)||Eu(t.a.x-t.b.x)<Fu&&Eu(t.a.y-t.b.y)<Fu)&&(t.a=t.b=null,n.splice(i,1))}function Yr(e,t){var n=e.b;if(n)return!0;var r,i,s=e.a,o=t[0][0],u=t[1][0],a=t[0][1],f=t[1][1],l=e.l,c=e.r,h=l.x,p=l.y,d=c.x,v=c.y,m=(h+d)/2,g=(p+v)/2;if(v===p){if(m<o||m>=u)return;if(h>d){if(s){if(s.y>=f)return}else s={x:m,y:a};n={x:m,y:f}}else{if(s){if(s.y<a)return}else s={x:m,y:f};n={x:m,y:a}}}else if(r=(h-d)/(v-p),i=g-r*m,r<-1||r>1)if(h>d){if(s){if(s.y>=f)return}else s={x:(a-i)/r,y:a};n={x:(f-i)/r,y:f}}else{if(s){if(s.y<a)return}else s={x:(f-i)/r,y:f};n={x:(a-i)/r,y:a}}else if(p<v){if(s){if(s.x>=u)return}else s={x:o,y:r*o+i};n={x:u,y:r*u+i}}else{if(s){if(s.x<o)return}else s={x:u,y:r*u+i};n={x:o,y:r*o+i}}return e.a=s,e.b=n,!0}function Zr(e,t){this.l=e,this.r=t,this.a=this.b=null}function ei(e,t,n,r){var i=new Zr(e,t);return of.push(i),n&&ni(i,e,t,n),r&&ni(i,t,e,r),uf[e.i].edges.push(new ri(i,e,t)),uf[t.i].edges.push(new ri(i,t,e)),i}function ti(e,t,n){var r=new Zr(e,null);return r.a=t,r.b=n,of.push(r),r}function ni(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function ri(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ii(){this._=null}function si(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function oi(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ui(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ai(e){for(;e.L;)e=e.L;return e}function fi(e,t){var n,r,i,s=e.sort(li).pop();for(of=[],uf=new Array(e.length),af=new ii,lf=new ii;;)if(i=ff,s&&(!i||s.y<i.y||s.y===i.y&&s.x<i.x))s.x===n&&s.y===r||(uf[s.i]=new Xr(s),Ur(s),n=s.x,r=s.y),s=e.pop();else{if(!i)break;Rr(i.arc)}t&&(Gr(t),Vr(t));var o={cells:uf,edges:of};return af=lf=of=uf=null,o}function li(e,t){return t.y-e.y||t.x-e.x}function ci(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function hi(e){return e.x}function pi(e){return e.y}function di(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function vi(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=.5*(n+i),u=.5*(r+s),a=t.nodes;a[0]&&vi(e,a[0],n,r,o,u),a[1]&&vi(e,a[1],o,r,i,u),a[2]&&vi(e,a[2],n,u,o,s),a[3]&&vi(e,a[3],o,u,i,s)}}function mi(e,t,n,r,i,s,o){var u,a=1/0;return function f(e,l,c,h,p){if(!(l>s||c>o||h<r||p<i)){if(d=e.point){var d,v=t-e.x,m=n-e.y,g=v*v+m*m;if(g<a){var y=Math.sqrt(a=g);r=t-y,i=n-y,s=t+y,o=n+y,u=d}}for(var b=e.nodes,w=.5*(l+h),E=.5*(c+p),S=t>=w,x=n>=E,T=x<<1|S,N=T+4;T<N;++T)if(e=b[3&T])switch(3&T){case 0:f(e,l,c,w,E);break;case 1:f(e,w,c,h,E);break;case 2:f(e,l,E,w,p);break;case 3:f(e,w,E,h,p)}}}(e,r,i,s,o),u}function gi(e,t){e=lu.rgb(e),t=lu.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+St(Math.round(n+s*e))+St(Math.round(r+o*e))+St(Math.round(i+u*e))}}function yi(e,t){var n,r={},i={};for(n in e)n in t?r[n]=Ei(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function bi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wi(e,t){var n,r,i,s=df.lastIndex=vf.lastIndex=0,o=-1,u=[],a=[];for(e+="",t+="";(n=df.exec(e))&&(r=vf.exec(t));)(i=r.index)>s&&(i=t.slice(s,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,a.push({i:o,x:bi(n,r)})),s=vf.lastIndex;return s<t.length&&(i=t.slice(s),u[o]?u[o]+=i:u[++o]=i),u.length<2?a[0]?(t=a[0].x,function(e){return t(e)+""}):function(){return t}:(t=a.length,function(e){for(var n,r=0;r<t;++r)u[(n=a[r]).i]=n.x(e);return u.join("")})}function Ei(e,t){for(var n,r=lu.interpolators.length;--r>=0&&!(n=lu.interpolators[r](e,t)););return n}function Si(e,t){var n,r=[],i=[],s=e.length,o=t.length,u=Math.min(e.length,t.length);for(n=0;n<u;++n)r.push(Ei(e[n],t[n]));for(;n<s;++n)i[n]=e[n];for(;n<o;++n)i[n]=t[n];return function(e){for(n=0;n<u;++n)i[n]=r[n](e);return i}}function xi(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Ti(e){return function(t){return 1-e(1-t)}}function Ni(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Ci(e){return e*e}function ki(e){return e*e*e}function Li(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Ai(e){return function(t){return Math.pow(t,e)}}function Oi(e){return 1-Math.cos(e*zu)}function Mi(e){return Math.pow(2,10*(e-1))}function _i(e){return 1-Math.sqrt(1-e*e)}function Di(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Ru*Math.asin(1/e):(e=1,n=t/4),function(i){return 1+e*Math.pow(2,-10*i)*Math.sin((i-n)*Ru/t)}}function Pi(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Hi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Bi(e,t){e=lu.hcl(e),t=lu.hcl(t);var n=e.h,r=e.c,i=e.l,s=t.h-n,o=t.c-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:s<-180&&(s+=360),function(e){return ht(n+s*e,r+o*e,i+u*e)+""}}function ji(e,t){e=lu.hsl(e),t=lu.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:s<-180&&(s+=360),function(e){return lt(n+s*e,r+o*e,i+u*e)+""}}function Fi(e,t){e=lu.lab(e),t=lu.lab(t);var n=e.l,r=e.a,i=e.b,s=t.l-n,o=t.a-r,u=t.b-i;return function(e){return dt(n+s*e,r+o*e,i+u*e)+""}}function Ii(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function qi(e){var t=[e.a,e.b],n=[e.c,e.d],r=Ui(t),i=Ri(t,n),s=Ui(zi(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Xu,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Xu:0}function Ri(e,t){return e[0]*t[0]+e[1]*t[1]}function Ui(e){var t=Math.sqrt(Ri(e,e));return t&&(e[0]/=t,e[1]/=t),t}function zi(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Wi(e){return e.length?e.pop()+",":""}function Xi(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:bi(e[0],t[0])},{i:i-2,x:bi(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}function Vi(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(Wi(n)+"rotate(",null,")")-2,x:bi(e,t)})):t&&n.push(Wi(n)+"rotate("+t+")")}function $i(e,t,n,r){e!==t?r.push({i:n.push(Wi(n)+"skewX(",null,")")-2,x:bi(e,t)}):t&&n.push(Wi(n)+"skewX("+t+")")}function Ji(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(Wi(n)+"scale(",null,",",null,")");r.push({i:i-4,x:bi(e[0],t[0])},{i:i-2,x:bi(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(Wi(n)+"scale("+t+")")}function Ki(e,t){var n=[],r=[];return e=lu.transform(e),t=lu.transform(t),Xi(e.translate,t.translate,n,r),Vi(e.rotate,t.rotate,n,r),$i(e.skew,t.skew,n,r),Ji(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,s=r.length;++i<s;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Qi(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Gi(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Yi(e){for(var t=e.source,n=e.target,r=es(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var s=i.length;n!==r;)i.splice(s,0,n),n=n.parent;return i}function Zi(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function es(e,t){if(e===t)return e;for(var n=Zi(e),r=Zi(t),i=n.pop(),s=r.pop(),o=null;i===s;)o=i,i=n.pop(),s=r.pop();return o}function ts(e){e.fixed|=2}function ns(e){e.fixed&=-7}function rs(e){e.fixed|=4,e.px=e.x,e.py=e.y}function is(e){e.fixed&=-5}function ss(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var s,o=e.nodes,u=o.length,a=-1;++a<u;)s=o[a],null!=s&&(ss(s,t,n),e.charge+=s.charge,r+=s.charge*s.cx,i+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function os(e,t){return lu.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=hs,e}function us(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function as(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(s=e.children)&&(i=s.length))for(var i,s,o=-1;++o<i;)n.push(s[o]);for(;null!=(e=r.pop());)t(e)}function fs(e){return e.children}function ls(e){return e.value}function cs(e,t){return t.value-e.value}function hs(e){return lu.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function ps(e){return e.x}function ds(e){return e.y}function vs(e,t,n){e.y0=t,e.y=n}function ms(e){return lu.range(e.length)}function gs(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function ys(e){for(var t,n=1,r=0,i=e[0][1],s=e.length;n<s;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function bs(e){return e.reduce(ws,0)}function ws(e,t){return e+t[1]}function Es(e,t){return Ss(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Ss(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];++n<=t;)s[n]=i*n+r;return s}function xs(e){return[lu.min(e),lu.max(e)]}function Ts(e,t){return e.value-t.value}function Ns(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Cs(e,t){e._pack_next=t,t._pack_prev=e}function ks(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Ls(e){function t(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(f=n.length)){var n,r,i,s,o,u,a,f,l=1/0,c=-1/0,h=1/0,p=-1/0;if(n.forEach(As),r=n[0],r.x=-r.r,r.y=0,t(r),f>1&&(i=n[1],i.x=i.r,i.y=0,t(i),f>2))for(s=n[2],_s(r,i,s),t(s),Ns(r,s),r._pack_prev=s,Ns(s,i),i=r._pack_next,o=3;o<f;o++){_s(r,i,s=n[o]);var d=0,v=1,m=1;for(u=i._pack_next;u!==i;u=u._pack_next,v++)if(ks(u,s)){d=1;break}if(1==d)for(a=r._pack_prev;a!==u._pack_prev&&!ks(a,s);a=a._pack_prev,m++);d?(v<m||v==m&&i.r<r.r?Cs(r,i=u):Cs(r=a,i),o--):(Ns(r,s),i=s,t(s))}var g=(l+c)/2,y=(h+p)/2,b=0;for(o=0;o<f;o++)s=n[o],s.x-=g,s.y-=y,b=Math.max(b,s.r+Math.sqrt(s.x*s.x+s.y*s.y));e.r=b,n.forEach(Os)}}function As(e){e._pack_next=e._pack_prev=e}function Os(e){delete e._pack_next,delete e._pack_prev}function Ms(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var s=-1,o=i.length;++s<o;)Ms(i[s],t,n,r)}function _s(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function Ds(e,t){return e.parent==t.parent?1:2}function Ps(e){var t=e.children;return t.length?t[0]:e.t}function Hs(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Bs(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function js(e){for(var t,n=0,r=0,i=e.children,s=i.length;--s>=0;)t=i[s],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Fs(e,t,n){return e.a.parent===t.parent?e.a:n}function Is(e){return 1+lu.max(e,function(e){return e.y})}function qs(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Rs(e){var t=e.children;return t&&t.length?Rs(t[0]):e}function Us(e){var t,n=e.children;return n&&(t=n.length)?Us(n[t-1]):e}function zs(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Ws(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),s<0&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function Xs(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Vs(e){return e.rangeExtent?e.rangeExtent():Xs(e.range())}function $s(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function Js(e,t){var n,r=0,i=e.length-1,s=e[r],o=e[i];return o<s&&(n=r,r=i,i=n,n=s,s=o,o=n),e[r]=t.floor(s),e[i]=t.ceil(o),e}function Ks(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Cf}function Qs(e,t,n,r){var i=[],s=[],o=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=u;)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=lu.bisect(e,t,1,u)-1;return s[n](i[n](t))}}function Gs(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Qs:$s,a=r?Gi:Qi;return o=i(e,t,a,n),u=i(t,e,a,Ei),s}function s(e){return o(e)}var o,u;return s.invert=function(e){return u(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},s.range=function(e){return arguments.length?(t=e,i()):t},s.rangeRound=function(e){return s.range(e).interpolate(Ii)},s.clamp=function(e){return arguments.length?(r=e,i()):r},s.interpolate=function(e){return arguments.length?(n=e,i()):n},s.ticks=function(t){return to(e,t)},s.tickFormat=function(t,n){return no(e,t,n)},s.nice=function(t){return Zs(e,t),i()},s.copy=function(){return Gs(e,t,n,r)},i()}function Ys(e,t){return lu.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Zs(e,t){return Js(e,Ks(eo(e,t)[2])),Js(e,Ks(eo(e,t)[2])),e}function eo(e,t){null==t&&(t=10);var n=Xs(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return s<=.15?i*=10:s<=.35?i*=5:s<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function to(e,t){return lu.range.apply(lu,eo(e,t))}function no(e,t,n){var r=eo(e,t);if(n){var i=pa.exec(n);if(i.shift(),"s"===i[8]){var s=lu.formatPrefix(Math.max(Eu(r[0]),Eu(r[1])));return i[7]||(i[7]="."+ro(s.scale(r[2]))),i[8]="f",n=lu.format(i.join("")),function(e){return n(s.scale(e))+s.symbol}}i[7]||(i[7]="."+io(i[8],r)),n=i.join("")}else n=",."+ro(r[2])+"f";return lu.format(n)}function ro(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function io(e,t){var n=ro(t[2]);return e in kf?Math.abs(n-ro(Math.max(Eu(t[0]),Eu(t[1]))))+ +("e"!==e):n-2*("%"===e)}function so(e,t,n,r){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function s(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return s(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=Js(r.map(i),n?Math:Af);return e.domain(t),r=t.map(s),o},o.ticks=function(){var e=Xs(r),o=[],u=e[0],a=e[1],f=Math.floor(i(u)),l=Math.ceil(i(a)),c=t%1?2:t;if(isFinite(l-f)){if(n){for(;f<l;f++)for(var h=1;h<c;h++)o.push(s(f)*h);o.push(s(f))}else for(o.push(s(f));f++<l;)for(var h=c-1;h>0;h--)o.push(s(f)*h);for(f=0;o[f]<u;f++);for(l=o.length;o[l-1]>a;l--);o=o.slice(f,l)}return o},o.tickFormat=function(e,n){if(!arguments.length)return Lf;arguments.length<2?n=Lf:"function"!=typeof n&&(n=lu.format(n));var r=Math.max(1,t*e/o.ticks().length);return function(e){var o=e/s(Math.round(i(e)));return o*t<t-.5&&(o*=t),o<=r?n(e):""}},o.copy=function(){return so(e.copy(),t,n,r)},Ys(o,e)}function oo(e,t,n){function r(t){return e(i(t))}var i=uo(t),s=uo(1/t);return r.invert=function(t){return s(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return to(n,e)},r.tickFormat=function(e,t){return no(n,e,t)},r.nice=function(e){return r.domain(Zs(n,e))},r.exponent=function(o){return arguments.length?(i=uo(t=o),s=uo(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return oo(e.copy(),t,n)},Ys(r,e)}function uo(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ao(e,t){function n(n){return s[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):NaN))-1)%s.length]}function r(t,n){return lu.range(e.length).map(function(e){return t+n*e})}var i,s,o;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new c;for(var s,o=-1,u=r.length;++o<u;)i.has(s=r[o])||i.set(s,e.push(s));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(s=e,o=0,t={t:"range",a:arguments},n):s},n.rangePoints=function(i,u){arguments.length<2&&(u=0);var a=i[0],f=i[1],l=e.length<2?(a=(a+f)/2,0):(f-a)/(e.length-1+u);return s=r(a+l*u/2,l),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,u){arguments.length<2&&(u=0);var a=i[0],f=i[1],l=e.length<2?(a=f=Math.round((a+f)/2),0):(f-a)/(e.length-1+u)|0;return s=r(a+Math.round(l*u/2+(f-a-(e.length-1+u)*l)/2),l),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,u,a){arguments.length<2&&(u=0),arguments.length<3&&(a=u);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=(c-l)/(e.length-u+2*a);return s=r(l+h*a,h),f&&s.reverse(),o=h*(1-u),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,u,a){arguments.length<2&&(u=0),arguments.length<3&&(a=u);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=Math.floor((c-l)/(e.length-u+2*a));return s=r(l+Math.round((c-l-(e.length-u)*h)/2),h),f&&s.reverse(),o=Math.round(h*(1-u)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Xs(t.a[0])},n.copy=function(){return ao(e,t)},n.domain(e)}function fo(e,t){function n(){var n=0,i=t.length;for(u=[];++n<i;)u[n-1]=lu.quantile(e,n/i);return r}function r(e){if(!isNaN(e=+e))return t[lu.bisect(u,e)]}var u;return r.domain=function(t){return arguments.length?(e=t.map(s).filter(o).sort(i),n()):e},r.range=function(e){return arguments.length?(t=e,n()):t},r.quantiles=function(){return u},r.invertExtent=function(n){return n=t.indexOf(n),n<0?[NaN,NaN]:[n>0?u[n-1]:e[0],n<u.length?u[n]:e[e.length-1]]},r.copy=function(){return fo(e,t)},n()}function lo(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(s*(t-e))))]}function i(){return s=n.length/(t-e),o=n.length-1,r}var s,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=t<0?NaN:t/s+e,[t,t+1/s]},r.copy=function(){return lo(e,t,n)},i()}function co(e,t){function n(n){if(n<=n)return t[lu.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return co(e,t)},n}function ho(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return to(e,t)},t.tickFormat=function(t,n){return no(e,t,n)},t.copy=function(){return ho(e)},t}function po(){return 0}function vo(e){return e.innerRadius}function mo(e){return e.outerRadius}function go(e){return e.startAngle}function yo(e){return e.endAngle}function bo(e){return e&&e.padAngle}function wo(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function Eo(e,t,n,r,i){var s=e[0]-t[0],o=e[1]-t[1],u=(i?r:-r)/Math.sqrt(s*s+o*o),a=u*o,f=-u*s,l=e[0]+a,c=e[1]+f,h=t[0]+a,p=t[1]+f,d=(l+h)/2,v=(c+p)/2,m=h-l,g=p-c,y=m*m+g*g,b=n-r,w=l*p-h*c,E=(g<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-w*w)),S=(w*g-m*E)/y,x=(-w*m-g*E)/y,T=(w*g+m*E)/y,N=(-w*m+g*E)/y,C=S-d,k=x-v,L=T-d,A=N-v;return C*C+k*k>L*L+A*A&&(S=T,x=N),[[S-a,x-f],[S*n/b,x*n/b]]}function So(e){function t(t){function o(){f.push("M",s(e(l),u))}for(var a,f=[],l=[],c=-1,h=t.length,p=Lt(n),d=Lt(r);++c<h;)i.call(this,a=t[c],c)?l.push([+p.call(this,a,c),+d.call(this,a,c)]):l.length&&(o(),l=[]);return l.length&&o(),f.length?f.join(""):null}var n=Mr,r=_r,i=_n,s=xo,o=s.key,u=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?s=e:(s=Hf.get(e)||xo).key,t):o},t.tension=function(e){return arguments.length?(u=e,t):u},t}function xo(e){return e.length>1?e.join("L"):e+"Z"}function To(e){return e.join("L")+"Z"}function No(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Co(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function ko(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Lo(e,t){return e.length<4?xo(e):e[1]+Mo(e.slice(1,-1),_o(e,t))}function Ao(e,t){return e.length<3?To(e):e[0]+Mo((e.push(e[0]),e),_o([e[e.length-2]].concat(e,[e[1]]),t))}function Oo(e,t){return e.length<3?xo(e):e[0]+Mo(e,_o(e,t))}function Mo(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return xo(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;if(n&&(r+="Q"+(s[0]-2*o[0]/3)+","+(s[1]-2*o[1]/3)+","+s[0]+","+s[1],i=e[1],a=2),t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+2*u[0]/3)+","+(s[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function _o(e,t){for(var n,r=[],i=(1-t)/2,s=e[0],o=e[1],u=1,a=e.length;++u<a;)n=s,s=o,o=e[u],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Do(e){if(e.length<3)return xo(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",jo(Ff,o),",",jo(Ff,u)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Fo(a,o,u);return e.pop(),a.push("L",r),a.join("")}function Po(e){if(e.length<4)return xo(e);for(var t,n=[],r=-1,i=e.length,s=[0],o=[0];++r<3;)t=e[r],s.push(t[0]),o.push(t[1]);for(n.push(jo(Ff,s)+","+jo(Ff,o)),--r;++r<i;)t=e[r],s.shift(),s.push(t[0]),o.shift(),o.push(t[1]),Fo(n,s,o);return n.join("")}function Ho(e){for(var t,n,r=-1,i=e.length,s=i+4,o=[],u=[];++r<4;)n=e[r%i],o.push(n[0]),u.push(n[1]);for(t=[jo(Ff,o),",",jo(Ff,u)],--r;++r<s;)n=e[r%i],o.shift(),o.push(n[0]),u.shift(),u.push(n[1]),Fo(t,o,u);return t.join("")}function Bo(e,t){var n=e.length-1;if(n)for(var r,i,s=e[0][0],o=e[0][1],u=e[n][0]-s,a=e[n][1]-o,f=-1;++f<=n;)r=e[f],i=f/n,r[0]=t*r[0]+(1-t)*(s+i*u),r[1]=t*r[1]+(1-t)*(o+i*a);return Do(e)}function jo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Fo(e,t,n){e.push("C",jo(Bf,t),",",jo(Bf,n),",",jo(jf,t),",",jo(jf,n),",",jo(Ff,t),",",jo(Ff,n))}function Io(e,t){return(t[1]-e[1])/(t[0]-e[0])}function qo(e){for(var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=Io(i,s);++t<n;)r[t]=(o+(o=Io(i=s,s=e[t+1])))/2;return r[t]=o,r}function Ro(e){for(var t,n,r,i,s=[],o=qo(e),u=-1,a=e.length-1;++u<a;)t=Io(e[u],e[u+1]),Eu(t)<Fu?o[u]=o[u+1]=0:(n=o[u]/t,r=o[u+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[u]=i*n,o[u+1]=i*r));for(u=-1;++u<=a;)i=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),s.push([i||0,o[u]*i||0]);return s}function Uo(e){return e.length<3?xo(e):e[0]+Mo(e,Ro(e))}function zo(e){for(var t,n,r,i=-1,s=e.length;++i<s;)t=e[i],n=t[0],r=t[1]-zu,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Wo(e){function t(t){function a(){v.push("M",u(e(g),c),l,f(e(m.reverse()),c),"Z")}for(var h,p,d,v=[],m=[],g=[],y=-1,b=t.length,w=Lt(n),E=Lt(i),S=n===r?function(){return p}:Lt(r),x=i===s?function(){return d}:Lt(s);++y<b;)o.call(this,h=t[y],y)?(m.push([p=+w.call(this,h,y),d=+E.call(this,h,y)]),g.push([+S.call(this,h,y),+x.call(this,h,y)])):m.length&&(a(),m=[],g=[]);return m.length&&a(),v.length?v.join(""):null}var n=Mr,r=Mr,i=0,s=_r,o=_n,u=xo,a=u.key,f=u,l="L",c=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=s=e,t):s},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(s=e,t):s},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?u=e:(u=Hf.get(e)||xo).key,f=u.reverse||u,l=u.closed?"M":"L",t):a},t.tension=function(e){return arguments.length?(c=e,t):c},t}function Xo(e){return e.radius}function Vo(e){return[e.x,e.y]}function $o(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-zu;return[n*Math.cos(r),n*Math.sin(r)]}}function Jo(){return 64}function Ko(){return"circle"}function Qo(e){var t=Math.sqrt(e/qu);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Go(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Yo(e,t,n){return Cu(e,Xf),e.namespace=t,e.id=n,e}function Zo(e,t,n,r){var i=e.id,s=e.namespace;return X(e,"function"==typeof n?function(e,o,u){e[s][i].tween.set(t,r(n.call(e,e.__data__,o,u)))}:(n=r(n),function(e){e[s][i].tween.set(t,n)}))}function eu(e){return null==e&&(e=""),function(){this.textContent=e}}function tu(e){return null==e?"__transition__":"__transition_"+e+"__"}function nu(e,t,n,r,i){function s(e){var t=v.delay;return f.t=t+a,t<=e?o(e-t):void (f.c=o)}function o(n){var i=d.active,s=d[i];s&&(s.timer.c=null,s.timer.t=NaN,--d.count,delete d[i],s.event&&s.event.interrupt.call(e,e.__data__,s.index));for(var o in d)if(+o<r){var c=d[o];c.timer.c=null,c.timer.t=NaN,--d.count,delete d[o]}f.c=u,Dt(function(){return f.c&&u(n||1)&&(f.c=null,f.t=NaN),1},0,a),d.active=r,v.event&&v.event.start.call(e,e.__data__,t),p=[],v.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&p.push(r)}),h=v.ease,l=v.duration}function u(i){for(var s=i/l,o=h(s),u=p.length;u>0;)p[--u].call(e,o);if(s>=1)return v.event&&v.event.end.call(e,e.__data__,t),--d.count?delete d[r]:delete e[n],1}var a,f,l,h,p,d=e[n]||(e[n]={active:0,count:0}),v=d[r];v||(a=i.time,f=Dt(s,0,a),v=d[r]={tween:new c,time:a,timer:f,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++d.count)}function ru(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate("+(isFinite(i)?i:n(e))+",0)"})}function iu(e,t,n){e.attr("transform",function(e){var i=t(e);return"translate(0,"+(isFinite(i)?i:n(e))+")"})}function su(e){return e.toISOString()}function ou(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,s=lu.bisect(el,i);return s==el.length?[t.year,eo(e.map(function(e){return e/31536e6}),n)[2]]:s?t[i/el[s-1]<el[s]/i?s-1:s]:[rl,eo(e,n)[2]]}return r.invert=function(t){return uu(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(uu)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,uu(+n+1),t).length}var s=r.domain(),o=Xs(s),u=null==e?i(o,10):"number"==typeof e&&i(o,e);return u&&(e=u[0],t=u[1]),r.domain(Js(s,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=uu(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=uu(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Xs(r.domain()),s=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return s&&(e=s[0],t=s[1]),e.range(n[0],uu(+n[1]+1),t<1?1:t)},r.tickFormat=function(){return n},r.copy=function(){return ou(e.copy(),t,n)},Ys(r,e)}function uu(e){return new Date(e)}function au(e){return JSON.parse(e.responseText)}function fu(e){var t=pu.createRange();return t.selectNode(pu.body),t.createContextualFragment(e.responseText)}var lu={version:"3.5.17"},cu=[].slice,hu=function(e){return cu.call(e)},pu=this.document;if(pu)try{hu(pu.documentElement.childNodes)[0].nodeType}catch(du){hu=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+(new Date)}),pu)try{pu.createElement("DIV").style.setProperty("opacity",0,"")}catch(du){var vu=this.Element.prototype,mu=vu.setAttribute,gu=vu.setAttributeNS,yu=this.CSSStyleDeclaration.prototype,bu=yu.setProperty;vu.setAttribute=function(e,t){mu.call(this,e,t+"")},vu.setAttributeNS=function(e,t,n){gu.call(this,e,t,n+"")},yu.setProperty=function(e,t,n){bu.call(this,e,t+"",n)}}lu.ascending=i,lu.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},lu.min=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<s;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<s;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<s;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},lu.max=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<s;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<s;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<s;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},lu.extent=function(e,t){var n,r,i,s=-1,o=e.length;if(1===arguments.length){for(;++s<o;)if(null!=(r=e[s])&&r>=r){n=i=r;break}for(;++s<o;)null!=(r=e[s])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++s<o;)if(null!=(r=t.call(e,e[s],s))&&r>=r){n=i=r;break}for(;++s<o;)null!=(r=t.call(e,e[s],s))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},lu.sum=function(e,t){var n,r=0,i=e.length,s=-1;if(1===arguments.length)for(;++s<i;)o(n=+e[s])&&(r+=n);else for(;++s<i;)o(n=+t.call(e,e[s],s))&&(r+=n);return r},lu.mean=function(e,t){var n,r=0,i=e.length,u=-1,a=i;if(1===arguments.length)for(;++u<i;)o(n=s(e[u]))?r+=n:--a;else for(;++u<i;)o(n=s(t.call(e,e[u],u)))?r+=n:--a;if(a)return r/a},lu.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},lu.median=function(e,t){var n,r=[],u=e.length,a=-1;if(1===arguments.length)for(;++a<u;)o(n=s(e[a]))&&r.push(n);else for(;++a<u;)o(n=s(t.call(e,e[a],a)))&&r.push(n);if(r.length)return lu.quantile(r.sort(i),.5)},lu.variance=function(e,t){var n,r,i=e.length,u=0,a=0,f=-1,l=0;if(1===arguments.length)for(;++f<i;)o(n=s(e[f]))&&(r=n-u,u+=r/++l,a+=r*(n-u));else for(;++f<i;)o(n=s(t.call(e,e[f],f)))&&(r=n-u,u+=r/++l,a+=r*(n-u));if(l>1)return a/(l-1)},lu.deviation=function(){var e=lu.variance.apply(this,arguments);return e?Math.sqrt(e):e};var wu=u(i);lu.bisectLeft=wu.left,lu.bisect=lu.bisectRight=wu.right,lu.bisector=function(e){return u(1===e.length?function(t,n){return i(e(t),n)}:e)},lu.shuffle=function(e,t,n){(s=arguments.length)<3&&(n=e.length,s<2&&(t=0));for(var r,i,s=n-t;s;)i=Math.random()*s--|0,r=e[s+t],e[s+t]=e[i+t],e[i+t]=r;return e},lu.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},lu.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=[t=i,i=e[++n]];return s},lu.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=lu.min(e,a),r=new Array(n);++t<n;)for(var i,s=-1,o=r[t]=new Array(i);++s<i;)o[s]=e[s][t];return r},lu.zip=function(){return lu.transpose(arguments)},lu.keys=function(e){var t=[];for(var n in e)t.push(n);return t},lu.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},lu.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},lu.merge=function(e){for(var t,n,r,i=e.length,s=-1,o=0;++s<i;)o+=e[s].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var Eu=Math.abs;lu.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],s=f(Eu(n)),o=-1;if(e*=s,t*=s,n*=s,n<0)for(;(r=e+n*++o)>t;)i.push(r/s);else for(;(r=e+n*++o)<t;)i.push(r/s);return i},lu.map=function(e,t){var n=new c;if(e instanceof c)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,s=e.length;if(1===arguments.length)for(;++i<s;)n.set(i,e[i]);else for(;++i<s;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var Su="__proto__",xu="\0";l(c,{has:d,get:function(e){return this._[h(e)]},set:function(e,t){return this._[h(e)]=t},remove:v,keys:m,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:p(t),value:this._[t]});return e},size:g,empty:y,forEach:function(e){for(var t in this._)e.call(this,p(t),this._[t])}}),lu.nest=function(){function e(t,o,u){if(u>=s.length)return r?r.call(i,o):n?o.sort(n):o;for(var a,f,l,h,p=-1,d=o.length,v=s[u++],m=new c;++p<d;)(h=m.get(a=v(f=o[p])))?h.push(f):m.set(a,[f]);return t?(f=t(),l=function(n,r){f.set(n,e(t,r,u))}):(f={},l=function(n,r){f[n]=e(t,r,u)}),m.forEach(l),f}function t(e,n){if(n>=s.length)return e;var r=[],i=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},s=[],o=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(lu.map,n,0),0)},i.key=function(e){return s.push(e),i},i.sortKeys=function(e){return o[s.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},lu.set=function(e){var t=new b;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},l(b,{has:d,add:function(e){return this._[h(e+="")]=!0,e},remove:v,values:m,size:g,empty:y,forEach:function(e){for(var t in this._)e.call(this,p(t))}}),lu.behavior={},lu.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=E(e,t,t[n]);return e};var Tu=["webkit","ms","moz","Moz","o","O"];lu.dispatch=function(){for(var e=new T,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=N(e);return e},T.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},lu.event=null,lu.requote=function(e){return e.replace(Nu,"\\$&")};var Nu=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Cu={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},ku=function(e,t){return t.querySelector(e)},Lu=function(e,t){return t.querySelectorAll(e)},Au=function(e,t){var n=e.matches||e[S(e,"matchesSelector")];return(Au=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(ku=function(e,t){return Sizzle(e,t)[0]||null},Lu=Sizzle,Au=Sizzle.matchesSelector),lu.selection=function(){return lu.select(pu.documentElement)};var Ou=lu.selection.prototype=[];Ou.select=function(e){var t,n,r,i,s=[];e=O(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var a=-1,f=r.length;++a<f;)(i=r[a])?(t.push(n=e.call(i,i.__data__,a,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return A(s)},Ou.selectAll=function(e){var t,n,r=[];e=M(e);for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)(n=o[u])&&(r.push(t=hu(e.call(n,n.__data__,u,i))),t.parentNode=n);return A(r)};var Mu="http://www.w3.org/1999/xhtml",_u={svg:"http://www.w3.org/2000/svg",xhtml:Mu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};lu.ns={prefix:_u,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),_u.hasOwnProperty(n)?{space:_u[n],local:e}:e}},Ou.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=lu.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(_(t,e[t]));return this}return this.each(_(e,t))},Ou.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=H(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!P(e[i]).test(t))return!1;return!0}for(t in e)this.each(B(t,e[t]));return this}return this.each(B(e,t))},Ou.style=function(e,t,r){var i=arguments.length;if(i<3){if("string"!=typeof e){i<2&&(t="");for(r in e)this.each(F(r,e[r],t));return this}if(i<2){var s=this.node();return n(s).getComputedStyle(s,null).getPropertyValue(e)}r=""}return this.each(F(e,t,r))},Ou.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(I(t,e[t]));return this}return this.each(I(e,t))},Ou.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Ou.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Ou.append=function(e){return e=q(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Ou.insert=function(e,t){return e=q(e),t=O(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Ou.remove=function(){return this.each(R)},Ou.data=function(e,t){function n(e,n){var r,i,s,o=e.length,l=n.length,h=Math.min(o,l),p=new Array(l),d=new Array(l),v=new Array(o);if(t){var m,g=new c,y=new Array(o);for(r=-1;++r<o;)(i=e[r])&&(g.has(m=t.call(i,i.__data__,r))?v[r]=i:g.set(m,i),y[r]=m);for(r=-1;++r<l;)(i=g.get(m=t.call(n,s=n[r],r)))?i!==!0&&(p[r]=i,i.__data__=s):d[r]=U(s),g.set(m,!0);for(r=-1;++r<o;)r in y&&g.get(y[r])!==!0&&(v[r]=e[r])}else{for(r=-1;++r<h;)i=e[r],s=n[r],i?(i.__data__=s,p[r]=i):d[r]=U(s);for(;r<l;++r)d[r]=U(n[r]);for(;r<o;++r)v[r]=e[r]}d.update=p,d.parentNode=p.parentNode=v.parentNode=e.parentNode,u.push(d),a.push(p),f.push(v)}var r,i,s=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(r=this[0]).length);++s<o;)(i=r[s])&&(e[s]=i.__data__);return e}var u=V([]),a=A([]),f=A([]);if("function"==typeof e)for(;++s<o;)n(r=this[s],e.call(r,r.parentNode.__data__,s));else for(;++s<o;)n(r=this[s],e);return a.enter=function(){return u},a.exit=function(){return f},a},Ou.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Ou.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=z(e));for(var s=0,o=this.length;s<o;s++){i.push(t=[]),t.parentNode=(n=this[s]).parentNode;for(var u=0,a=n.length;u<a;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return A(i)},Ou.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,s=r[i];--i>=0;)(n=r[i])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this},Ou.sort=function(e){e=W.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Ou.each=function(e){return X(this,function(t,n,r){e.call(t,t.__data__,n,r)})},Ou.call=function(e){var t=hu(arguments);return e.apply(t[0]=this,t),this},Ou.empty=function(){return!this.node()},Ou.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var s=n[r];if(s)return s}return null},Ou.size=function(){var e=0;return X(this,function(){++e}),e};var Du=[];lu.selection.enter=V,lu.selection.enter.prototype=Du,Du.append=Ou.append,Du.empty=Ou.empty,Du.node=Ou.node,Du.call=Ou.call,Du.size=Ou.size,Du.select=function(e){for(var t,n,r,i,s,o=[],u=-1,a=this.length;++u<a;){r=(i=this[u]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var f=-1,l=i.length;++f<l;)(s=i[f])?(t.push(r[f]=n=e.call(i.parentNode,s.__data__,f,u)),n.__data__=s.__data__):t.push(null)}return A(o)},Du.insert=function(e,t){return arguments.length<2&&(t=$(this)),Ou.insert.call(this,e,t)},lu.select=function(t){var n;return"string"==typeof t?(n=[ku(t,pu)],n.parentNode=pu.documentElement):(n=[t],n.parentNode=e(t)),A([n])},lu.selectAll=function(e){var t;return"string"==typeof e?(t=hu(Lu(e,pu)),t.parentNode=pu.documentElement):(t=hu(e),t.parentNode=null),A([t])},Ou.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){r<2&&(t=!1);for(n in e)this.each(J(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(J(e,t,n))};var Pu=lu.map({mouseenter:"mouseover",mouseleave:"mouseout"});pu&&Pu.forEach(function(e){"on"+e in pu&&Pu.remove(e)});var Hu,Bu=0;lu.mouse=function(e){return Y(e,k())};var ju=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;lu.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=k().changedTouches),t)for(var r,i=0,s=t.length;i<s;++i)if((r=t[i]).identifier===n)return Y(e,r)},lu.behavior.drag=function(){function e(){this.on("mousedown.drag",s).on("touchstart.drag",o)}function t(e,t,n,s,o){return function(){function u(){var e,n,r=t(h,v);r&&(e=r[0]-b[0],n=r[1]-b[1],d|=e|n,b=r,p({type:"drag",x:r[0]+f[0],y:r[1]+f[1],dx:e,dy:n}))}function a(){t(h,v)&&(g.on(s+m,null).on(o+m,null),y(d),p({type:"dragend"}))}var f,l=this,c=lu.event.target.correspondingElement||lu.event.target,h=l.parentNode,p=r.of(l,arguments),d=0,v=e(),m=".drag"+(null==v?"":"-"+v),g=lu.select(n(c)).on(s+m,u).on(o+m,a),y=G(c),b=t(h,v);i?(f=i.apply(l,arguments),f=[f.x-b[0],f.y-b[1]]):f=[0,0],p({type:"dragstart"})}}var r=L(e,"drag","dragstart","dragend"),i=null,s=t(x,lu.mouse,n,"mousemove","mouseup"),o=t(Z,lu.touch,w,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},lu.rebind(e,r,"on")},lu.touches=function(e,t){return arguments.length<2&&(t=k().touches),t?hu(t).map(function(t){var n=Y(e,t);return n.identifier=t.identifier,n}):[]};var Fu=1e-6,Iu=Fu*Fu,qu=Math.PI,Ru=2*qu,Uu=Ru-Fu,zu=qu/2,Wu=qu/180,Xu=180/qu,Vu=Math.SQRT2,$u=2,Ju=4;lu.interpolateZoom=function(e,t){var n,r,i=e[0],s=e[1],o=e[2],u=t[0],a=t[1],f=t[2],l=u-i,c=a-s,h=l*l+c*c;if(h<Iu)r=Math.log(f/o)/Vu,n=function(e){return[i+e*l,s+e*c,o*Math.exp(Vu*e*r)]};else{var p=Math.sqrt(h),d=(f*f-o*o+Ju*h)/(2*o*$u*p),v=(f*f-o*o-Ju*h)/(2*f*$u*p),m=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(v*v+1)-v);r=(g-m)/Vu,n=function(e){var t=e*r,n=st(m),u=o/($u*p)*(n*ot(Vu*t+m)-it(m));return[i+u*l,s+u*c,o*n/st(Vu*t+m)]}}return n.duration=1e3*r,n},lu.behavior.zoom=function(){function e(e){e.on(M,c).on(Qu+".zoom",p).on("dblclick.zoom",d).on(P,h)}function t(e){return[(e[0]-T.x)/T.k,(e[1]-T.y)/T.k]}function r(e){return[e[0]*T.k+T.x,e[1]*T.k+T.y]}function i(e){T.k=Math.max(k[0],Math.min(k[1],e))}function s(e,t){t=r(t),T.x+=e[0]-t[0],T.y+=e[1]-t[1]}function o(t,n,r,o){t.__chart__={x:T.x,y:T.y,k:T.k},i(Math.pow(2,o)),s(m=n,r),t=lu.select(t),A>0&&(t=t.transition().duration(A)),t.call(e.event)}function u(){E&&E.domain(w.range().map(function(e){return(e-T.x)/T.k}).map(w.invert)),x&&x.domain(S.range().map(function(e){return(e-T.y)/T.k}).map(S.invert))}function a(e){O++||e({type:"zoomstart"})}function f(e){u(),e({type:"zoom",scale:T.k,translate:[T.x,T.y]})}function l(e){--O||(e({type:"zoomend"}),m=null)}function c(){function e(){u=1,s(lu.mouse(i),h),f(o)}function r(){c.on(_,null).on(D,null),p(u),l(o)}var i=this,o=H.of(i,arguments),u=0,c=lu.select(n(i)).on(_,e).on(D,r),h=t(lu.mouse(i)),p=G(i);Wf.call(i),a(o)}function h(){function e(){var e=lu.touches(d);return p=T.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=t(e))}),e}function n(){var t=lu.event.target;lu.select(t).on(w,r).on(E,u),S.push(t);for(var n=lu.event.changedTouches,i=0,s=n.length;i<s;++i)m[n[i].identifier]=null;var a=e(),f=Date.now();if(1===a.length){if(f-b<500){var l=a[0];o(d,l,m[l.identifier],Math.floor(Math.log(T.k)/Math.LN2)+1),C()}b=f}else if(a.length>1){var l=a[0],c=a[1],h=l[0]-c[0],p=l[1]-c[1];g=h*h+p*p}}function r(){var e,t,n,r,o=lu.touches(d);Wf.call(d);for(var u=0,a=o.length;u<a;++u,r=null)if(n=o[u],r=m[n.identifier]){if(t)break;e=n,t=r}if(r){var l=(l=n[0]-e[0])*l+(l=n[1]-e[1])*l,c=g&&Math.sqrt(l/g);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(c*p)}b=null,s(e,t),f(v)}function u(){if(lu.event.touches.length){for(var t=lu.event.changedTouches,n=0,r=t.length;n<r;++n)delete m[t[n].identifier];for(var i in m)return void e()}lu.selectAll(S).on(y,null),x.on(M,c).on(P,h),N(),l(v)}var p,d=this,v=H.of(d,arguments),m={},g=0,y=".zoom-"+lu.event.changedTouches[0].identifier,w="touchmove"+y,E="touchend"+y,S=[],x=lu.select(d),N=G(d);n(),a(v),x.on(M,null).on(P,n)}function p(){var e=H.of(this,arguments);y?clearTimeout(y):(Wf.call(this),v=t(m=g||lu.mouse(this)),a(e)),y=setTimeout(function(){y=null,l(e)},50),C(),i(Math.pow(2,.002*Ku())*T.k),s(m,v),f(e)}function d(){var e=lu.mouse(this),n=Math.log(T.k)/Math.LN2;o(this,e,t(e),lu.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var v,m,g,y,b,w,E,S,x,T={x:0,y:0,k:1},N=[960,500],k=Gu,A=250,O=0,M="mousedown.zoom",_="mousemove.zoom",D="mouseup.zoom",P="touchstart.zoom",H=L(e,"zoomstart","zoom","zoomend");return Qu||(Qu="onwheel"in pu?(Ku=function(){return-lu.event.deltaY*(lu.event.deltaMode?120:1)},"wheel"):"onmousewheel"in pu?(Ku=function(){return lu.event.wheelDelta},"mousewheel"):(Ku=function(){return-lu.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=H.of(this,arguments),t=T;Uf?lu.select(this).transition().each("start.zoom",function(){T=this.__chart__||{x:0,y:0,k:1},a(e)}).tween("zoom:zoom",function(){var n=N[0],r=N[1],i=m?m[0]:n/2,s=m?m[1]:r/2,o=lu.interpolateZoom([(i-T.x)/T.k,(s-T.y)/T.k,n/T.k],[(i-t.x)/t.k,(s-t.y)/t.k,n/t.k]);return function(t){var r=o(t),u=n/r[2];this.__chart__=T={x:i-r[0]*u,y:s-r[1]*u,k:u},f(e)}}).each("interrupt.zoom",function(){l(e)}).each("end.zoom",function(){l(e)}):(this.__chart__=T,a(e),f(e),l(e))})},e.translate=function(t){return arguments.length?(T={x:+t[0],y:+t[1],k:T.k},u(),e):[T.x,T.y]},e.scale=function(t){return arguments.length?(T={x:T.x,y:T.y,k:null},i(+t),u(),e):T.k},e.scaleExtent=function(t){return arguments.length?(k=null==t?Gu:[+t[0],+t[1]],e):k},e.center=function(t){return arguments.length?(g=t&&[+t[0],+t[1]],e):g},e.size=function(t){return arguments.length?(N=t&&[+t[0],+t[1]],e):N},e.duration=function(t){return arguments.length?(A=+t,e):A},e.x=function(t){return arguments.length?(E=t,w=t.copy(),T={x:0,y:0,k:1},e):E},e.y=function(t){return arguments.length?(x=t,S=t.copy(),T={x:0,y:0,k:1},e):x},lu.rebind(e,H,"on")};var Ku,Qu,Gu=[0,1/0];lu.color=at,at.prototype.toString=function(){return this.rgb()+""},lu.hsl=ft;var Yu=ft.prototype=new at;Yu.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new ft(this.h,this.s,this.l/e)},Yu.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ft(this.h,this.s,e*this.l)},Yu.rgb=function(){return lt(this.h,this.s,this.l)},lu.hcl=ct;var Zu=ct.prototype=new at;Zu.brighter=function(e){return new ct(this.h,this.c,Math.min(100,this.l+ea*(arguments.length?e:1)))},Zu.darker=function(e){return new ct(this.h,this.c,Math.max(0,this.l-ea*(arguments.length?e:1)))},Zu.rgb=function(){return ht(this.h,this.c,this.l).rgb()},lu.lab=pt;var ea=18,ta=.95047,na=1,ra=1.08883,ia=pt.prototype=new at;ia.brighter=function(e){return new pt(Math.min(100,this.l+ea*(arguments.length?e:1)),this.a,this.b)},ia.darker=function(e){return new pt(Math.max(0,this.l-ea*(arguments.length?e:1)),this.a,this.b)},ia.rgb=function(){return dt(this.l,this.a,this.b)},lu.rgb=bt;var sa=bt.prototype=new at;sa.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new bt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new bt(i,i,i)},sa.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new bt(e*this.r,e*this.g,e*this.b)},sa.hsl=function(){return Tt(this.r,this.g,this.b)},sa.toString=function(){return"#"+St(this.r)+St(this.g)+St(this.b)};var oa=lu.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});oa.forEach(function(e,t){oa.set(e,wt(t))}),lu.functor=Lt,lu.xhr=At(w),lu.dsv=function(e,t){function n(e,n,s){arguments.length<3&&(s=n,n=null);var o=Ot(e,t,null==n?r:i(n),s);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function s(t){return t.map(o).join(e)}function o(e){return u.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var u=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(l>=f)return o;if(i)return i=!1,s;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<f;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}l=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++l):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l<f;){var r=e.charCodeAt(l++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(l)&&(++l,++u);else if(r!==a)continue;return e.slice(t,l-u)}return e.slice(t)}for(var r,i,s={},o={},u=[],f=e.length,l=0,c=0;(r=n())!==o;){for(var h=[];r!==s&&r!==o;)h.push(r),r=n();t&&null==(h=t(h,c++))||u.push(h)}return u},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new b,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(o).join(e)].concat(t.map(function(t){return i.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(s).join("\n")},n},lu.csv=lu.dsv(",","text/csv"),lu.tsv=lu.dsv("	","text/tab-separated-values");var ua,aa,fa,la,ca=this[S(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};lu.timer=function(){Dt.apply(this,arguments)},lu.timer.flush=function(){Ht(),Bt()},lu.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var ha=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Ft);lu.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=lu.round(e,jt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ha[8+n/3]};var pa=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,da=lu.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=lu.round(e,jt(e,t))).toFixed(Math.max(0,Math.min(20,jt(e*(1+1e-15),t))))}}),va=lu.time={},ma=Date;Rt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ga.setUTCDate.apply(this._,arguments)},setDay:function(){ga.setUTCDay.apply(this._,arguments)},setFullYear:function(){ga.setUTCFullYear.apply(this._,arguments)},setHours:function(){ga.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ga.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ga.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ga.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ga.setUTCSeconds.apply(this._,arguments)},setTime:function(){ga.setTime.apply(this._,arguments)}};var ga=Date.prototype;va.year=Ut(function(e){return e=va.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),va.years=va.year.range,va.years.utc=va.year.utc.range,va.day=Ut(function(e){var t=new ma(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),va.days=va.day.range,va.days.utc=va.day.utc.range,va.dayOfYear=function(e){var t=va.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=va[e]=Ut(function(e){return(e=va.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=va.year(e).getDay();return Math.floor((va.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});va[e+"s"]=n.range,va[e+"s"].utc=n.utc.range,va[e+"OfYear"]=function(e){var n=va.year(e).getDay();return Math.floor((va.dayOfYear(e)+(n+t)%7)/7)}}),va.week=va.sunday,va.weeks=va.sunday.range,va.weeks.utc=va.sunday.utc.range,va.weekOfYear=va.sundayOfYear;var ya={"-":"",_:" ",0:"0"},ba=/^\s*\d+/,wa=/^%/;lu.locale=function(e){return{numberFormat:It(e),timeFormat:Wt(e)}};var Ea=lu.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});lu.format=Ea.numberFormat,lu.geo={},hn.prototype={s:0,t:0,add:function(e){pn(e,this.t,Sa),pn(Sa.s,this.s,this),this.s?this.t+=Sa.t:this.s=Sa.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Sa=new hn;lu.geo.stream=function(e,t){e&&xa.hasOwnProperty(e.type)?xa[e.type](e,t):dn(e,t)};var xa={Feature:function(e,t){dn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)dn(n[r].geometry,t)}},Ta={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){vn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vn(n[r],t,0)},Polygon:function(e,t){mn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)mn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)dn(n[r],t)}};lu.geo.area=function(e){return Na=0,lu.geo.stream(e,ka),Na};var Na,Ca=new hn,ka={sphere:function(){Na+=4*qu},point:x,lineStart:x,lineEnd:x,polygonStart:function(){Ca.reset(),ka.lineStart=gn},polygonEnd:function(){var e=2*Ca;Na+=e<0?4*qu+e:e,ka.lineStart=ka.lineEnd=ka.point=x}};lu.geo.bounds=function(){function e(e,t){b.push(w=[l=e,h=e]),t<c&&(c=t),t>p&&(p=t)}function t(t,n){var r=yn([t*Wu,n*Wu]);if(g){var i=wn(g,r),s=[i[1],-i[0],0],o=wn(s,i);xn(o),o=Tn(o);var a=t-d,f=a>0?1:-1,v=o[0]*Xu*f,m=Eu(a)>180;if(m^(f*d<v&&v<f*t)){var y=o[1]*Xu;y>p&&(p=y)}else if(v=(v+360)%360-180,m^(f*d<v&&v<f*t)){var y=-o[1]*Xu;y<c&&(c=y)}else n<c&&(c=n),n>p&&(p=n);m?t<d?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t):h>=l?(t<l&&(l=t),t>h&&(h=t)):t>d?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t)}else e(t,n);g=r,d=t}function n(){E.point=t}function r(){w[0]=l,w[1]=h,E.point=e,g=null}function i(e,n){if(g){var r=e-d;y+=Eu(r)>180?r+(r>0?360:-360):r}else v=e,m=n;ka.point(e,n),t(e,n)}function s(){ka.lineStart()}function o(){i(v,m),ka.lineEnd(),Eu(y)>Fu&&(l=-(h=180)),w[0]=l,w[1]=h,g=null}function u(e,t){return(t-=e)<0?t+360:t}function a(e,t){return e[0]-t[0]}function f(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var l,c,h,p,d,v,m,g,y,b,w,E={point:e,lineStart:n,lineEnd:r,polygonStart:function(){E.point=i,E.lineStart=s,E.lineEnd=o,y=0,ka.polygonStart()},polygonEnd:function(){ka.polygonEnd(),E.point=e,E.lineStart=n,E.lineEnd=r,Ca<0?(l=-(h=180),c=-(p=90)):y>Fu?p=90:y<-Fu&&(c=-90),w[0]=l,w[1]=h}};return function(e){p=h=-(l=c=1/0),b=[],lu.geo.stream(e,E);var t=b.length;if(t){b.sort(a);for(var n,r=1,i=b[0],s=[i];r<t;++r)n=b[r],f(n[0],i)||f(n[1],i)?(u(i[0],n[1])>u(i[0],i[1])&&(i[1]=n[1]),u(n[0],i[1])>u(i[0],i[1])&&(i[0]=n[0])):s.push(i=n);for(var o,n,d=-1/0,t=s.length-1,r=0,i=s[t];r<=t;i=n,++r)n=s[r],(o=u(i[1],n[0]))>d&&(d=o,l=n[0],h=i[1])}return b=w=null,l===1/0||c===1/0?[[NaN,NaN],[NaN,NaN]]:[[l,c],[h,p]]}}(),lu.geo.centroid=function(e){La=Aa=Oa=Ma=_a=Da=Pa=Ha=Ba=ja=Fa=0,lu.geo.stream(e,Ia);var t=Ba,n=ja,r=Fa,i=t*t+n*n+r*r;return i<Iu&&(t=Da,n=Pa,r=Ha,Aa<Fu&&(t=Oa,n=Ma,r=_a),i=t*t+n*n+r*r,i<Iu)?[NaN,NaN]:[Math.atan2(n,t)*Xu,rt(r/Math.sqrt(i))*Xu]};var La,Aa,Oa,Ma,_a,Da,Pa,Ha,Ba,ja,Fa,Ia={sphere:x,point:Cn,lineStart:Ln,lineEnd:An,polygonStart:function(){Ia.lineStart=On},polygonEnd:function(){Ia.lineStart=Ln}},qa=Bn(_n,qn,Un,[-qu,-qu/2]),Ra=1e9;lu.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=Vn(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(lu.geo.conicEqualArea=function(){return $n(Jn)}).raw=Jn,lu.geo.albers=function(){return lu.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},lu.geo.albersUsa=function(){function e(e){var s=e[0],o=e[1];return t=null,n(s,o),t||(r(s,o),t)||i(s,o),t}var t,n,r,i,s=lu.geo.albers(),o=lu.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=lu.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-0.425&&r<-0.214?o:i>=.166&&i<.234&&r>=-0.214&&r<-0.115?u:s).invert(e)},e.stream=function(e){var t=s.stream(e),n=o.stream(e),r=u.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(s.precision(t),o.precision(t),u.precision(t),e):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),o.scale(.35*t),u.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(t){if(!arguments.length)return s.translate();var f=s.scale(),l=+t[0],c=+t[1];return n=s.translate(t).clipExtent([[l-.455*f,c-.238*f],[l+.455*f,c+.238*f]]).stream(a).point,r=o.translate([l-.307*f,c+.201*f]).clipExtent([[l-.425*f+Fu,c+.12*f+Fu],[l-.214*f-Fu,c+.234*f-Fu]]).stream(a).point,i=u.translate([l-.205*f,c+.212*f]).clipExtent([[l-.214*f+Fu,c+.166*f+Fu],[l-.115*f-Fu,c+.234*f-Fu]]).stream(a).point,e},e.scale(1070)};var Ua,za,Wa,Xa,Va,$a,Ja={point:x,lineStart:x,lineEnd:x,polygonStart:function(){za=0,Ja.lineStart=Kn},polygonEnd:function(){Ja.lineStart=Ja.lineEnd=Ja.point=x,Ua+=Eu(za/2)}},Ka={point:Qn,lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},Qa={point:Zn,lineStart:er,lineEnd:tr,polygonStart:function(){Qa.lineStart=nr},polygonEnd:function(){Qa.point=Zn,Qa.lineStart=er,Qa.lineEnd=tr}};lu.geo.path=function(){function e(e){return e&&("function"==typeof u&&s.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=i(s)),lu.geo.stream(e,o)),s.result()}function t(){return o=null,e}var n,r,i,s,o,u=4.5;return e.area=function(e){return Ua=0,lu.geo.stream(e,i(Ja)),Ua},e.centroid=function(e){return Oa=Ma=_a=Da=Pa=Ha=Ba=ja=Fa=0,lu.geo.stream(e,i(Qa)),Fa?[Ba/Fa,ja/Fa]:Ha?[Da/Ha,Pa/Ha]:_a?[Oa/_a,Ma/_a]:[NaN,NaN]},e.bounds=function(e){return Va=$a=-(Wa=Xa=1/0),lu.geo.stream(e,i(Ka)),[[Wa,Xa],[Va,$a]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||sr(e):w,t()):n},e.context=function(e){return arguments.length?(s=null==(r=e)?new Gn:new rr(e),"function"!=typeof u&&s.pointRadius(u),t()):r},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(s.pointRadius(+t),+t),e):u},e.projection(lu.geo.albersUsa()).context(null)},lu.geo.transform=function(e){return{stream:function(t){var n=new or(t);for(var r in e)n[r]=e[r];return n}}},or.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},lu.geo.projection=ar,lu.geo.projectionMutator=fr,(lu.geo.equirectangular=function(){return ar(cr)}).raw=cr.invert=cr,lu.geo.rotation=function(e){function t(t){return t=e(t[0]*Wu,t[1]*Wu),t[0]*=Xu,t[1]*=Xu,t}return e=pr(e[0]%360*Wu,e[1]*Wu,e.length>2?e[2]*Wu:0),t.invert=function(t){return t=e.invert(t[0]*Wu,t[1]*Wu),t[0]*=Xu,t[1]*=Xu,t},t},hr.invert=cr,lu.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=pr(-e[0]*Wu,-e[1]*Wu,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Xu,e[1]*=Xu}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=gr((t=+r)*Wu,i*Wu),e):t},e.precision=function(r){return arguments.length?(n=gr(t*Wu,(i=+r)*Wu),e):i},e.angle(90)},lu.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Wu,i=e[1]*Wu,s=t[1]*Wu,o=Math.sin(r),u=Math.cos(r),a=Math.sin(i),f=Math.cos(i),l=Math.sin(s),c=Math.cos(s);return Math.atan2(Math.sqrt((n=c*o)*n+(n=f*l-a*c*u)*n),a*l+f*c*u)},lu.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return lu.range(Math.ceil(s/m)*m,i,m).map(h).concat(lu.range(Math.ceil(f/g)*g,a,g).map(p)).concat(lu.range(Math.ceil(r/d)*d,n,d).filter(function(e){return Eu(e%m)>Fu}).map(l)).concat(lu.range(Math.ceil(u/v)*v,o,v).filter(function(e){return Eu(e%g)>Fu}).map(c))}var n,r,i,s,o,u,a,f,l,c,h,p,d=10,v=d,m=90,g=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(s).concat(p(a).slice(1),h(i).reverse().slice(1),p(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(s=+t[0][0],i=+t[1][0],f=+t[0][1],a=+t[1][1],s>i&&(t=s,s=i,i=t),f>a&&(t=f,f=a,a=t),e.precision(y)):[[s,f],[i,a]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],g=+t[1],e):[m,g]},e.minorStep=function(t){return arguments.length?(d=+t[0],v=+t[1],e):[d,v]},e.precision=function(t){return arguments.length?(y=+t,l=br(u,o,90),c=wr(r,n,y),h=br(f,a,90),p=wr(s,i,y),e):y},e.majorExtent([[-180,-90+Fu],[180,90-Fu]]).minorExtent([[-180,-80-Fu],[180,80+Fu]])},lu.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=Er,i=Sr;return e.distance=function(){return lu.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},lu.geo.interpolate=function(e,t){return xr(e[0]*Wu,e[1]*Wu,t[0]*Wu,t[1]*Wu)},lu.geo.length=function(e){return Ga=0,lu.geo.stream(e,Ya),Ga};var Ga,Ya={sphere:x,point:x,lineStart:Tr,lineEnd:x,polygonStart:x,polygonEnd:x},Za=Nr(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(lu.geo.azimuthalEqualArea=function(){return ar(Za)}).raw=Za;var ef=Nr(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},w);(lu.geo.azimuthalEquidistant=function(){return ar(ef)}).raw=ef,(lu.geo.conicConformal=function(){return $n(Cr)}).raw=Cr,(lu.geo.conicEquidistant=function(){return $n(kr)}).raw=kr;var tf=Nr(function(e){return 1/e},Math.atan);(lu.geo.gnomonic=function(){return ar(tf)}).raw=tf,Lr.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-zu]},(lu.geo.mercator=function(){return Ar(Lr)}).raw=Lr;var nf=Nr(function(){return 1},Math.asin);(lu.geo.orthographic=function(){return ar(nf)}).raw=nf;var rf=Nr(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(lu.geo.stereographic=function(){return ar(rf)}).raw=rf,Or.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-zu]},(lu.geo.transverseMercator=function(){var e=Ar(Or),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Or,lu.geom={},lu.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=Lt(n),s=Lt(r),o=e.length,u=[],a=[];for(t=0;t<o;t++)u.push([+i.call(this,e[t],t),+s.call(this,e[t],t),t]);for(u.sort(Pr),t=0;t<o;t++)a.push([u[t][0],-u[t][1]]);var f=Dr(u),l=Dr(a),c=l[0]===f[0],h=l[l.length-1]===f[f.length-1],p=[];for(t=f.length-1;t>=0;--t)p.push(e[u[f[t]][2]]);for(t=+c;t<l.length-h;++t)p.push(e[u[l[t]][2]]);return p}var n=Mr,r=_r;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},lu.geom.polygon=function(e){return Cu(e,sf),e};var sf=lu.geom.polygon.prototype=[];sf.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},sf.centroid=function(e){var t,n,r=-1,i=this.length,s=0,o=0,u=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=u,u=this[r],n=t[0]*u[1]-u[0]*t[1],s+=(t[0]+u[0])*n,o+=(t[1]+u[1])*n;return[s*e,o*e]},sf.clip=function(e){for(var t,n,r,i,s,o,u=jr(e),a=-1,f=this.length-jr(this),l=this[f-1];++a<f;){for(t=e.slice(),e.length=0,i=this[a],s=t[(r=t.length-u)-1],n=-1;++n<r;)o=t[n],Hr(o,l,i)?(Hr(s,l,i)||e.push(Br(s,o,l,i)),e.push(o)):Hr(s,l,i)&&e.push(Br(s,o,l,i)),s=o;u&&e.push(e[0]),l=i}return e};var of,uf,af,ff,lf,cf=[],hf=[];Xr.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort($r),t.length},ri.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ii.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ai(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(oi(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ui(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ui(this,n),e=n,n=e.U),n.C=!1,r.C=!0,oi(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,s=e.L,o=e.R;if(n=s?o?ai(o):s:o,i?i.L===e?i.L=n:i.R=n:this._=n,s&&o?(r=n.C,n.C=e.C,n.L=s,s.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void (e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,oi(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ui(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,oi(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ui(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,oi(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ui(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},lu.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=u[0][0],i=u[0][1],s=u[1][0],o=u[1][1];return fi(n(e),u).cells.forEach(function(n,u){var a=n.edges,f=n.site,l=t[u]=a.length?a.map(function(e){var t=e.start();return[t.x,t.y]}):f.x>=r&&f.x<=s&&f.y>=i&&f.y<=o?[[r,o],[s,o],[s,i],[r,i]]:[];l.point=e[u]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(s(e,t)/Fu)*Fu,y:Math.round(o(e,t)/Fu)*Fu,i:t}})}var r=Mr,i=_r,s=r,o=i,u=pf;return e?t(e):(t.links=function(e){return fi(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return fi(n(e)).cells.forEach(function(n,r){for(var i,s,o=n.site,u=n.edges.sort($r),a=-1,f=u.length,l=u[f-1].edge,c=l.l===o?l.r:l.l;++a<f;)i=l,s=c,l=u[a].edge,c=l.l===o?l.r:l.l,r<s.i&&r<c.i&&ci(o,s,c)<0&&t.push([e[r],e[s.i],e[c.i]])}),t},t.x=function(e){return arguments.length?(s=Lt(r=e),t):r},t.y=function(e){return arguments.length?(o=Lt(i=e),t):i},t.clipExtent=function(e){return arguments.length?(u=null==e?pf:e,t):u===pf?null:u},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):u===pf?null:u&&u[1]},t)};var pf=[[-1e6,-1e6],[1e6,1e6]];lu.geom.delaunay=function(e){return lu.geom.voronoi().triangles(e)},lu.geom.quadtree=function(e,t,n,r,i){function s(e){function s(e,t,n,r,i,s,o,u){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var a=e.x,l=e.y;if(null!=a)if(Eu(a-n)+Eu(l-r)<.01)f(e,t,n,r,i,s,o,u);else{var c=e.point;e.x=e.y=e.point=null,f(e,c,a,l,i,s,o,u),f(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else f(e,t,n,r,i,s,o,u)}function f(e,t,n,r,i,o,u,a){var f=.5*(i+u),l=.5*(o+a),c=n>=f,h=r>=l,p=h<<1|c;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=di()),c?i=f:u=f,h?o=l:a=l,s(e,t,n,r,i,o,u,a)}var l,c,h,p,d,v,m,g,y,b=Lt(u),w=Lt(a);if(null!=t)v=t,m=n,g=r,y=i;else if(g=y=-(v=m=1/0),c=[],h=[],d=e.length,o)for(p=0;p<d;++p)l=e[p],l.x<v&&(v=l.x),l.y<m&&(m=l.y),l.x>g&&(g=l.x),l.y>y&&(y=l.y),c.push(l.x),h.push(l.y);else for(p=0;p<d;++p){var E=+b(l=e[p],p),S=+w(l,p);E<v&&(v=E),S<m&&(m=S),E>g&&(g=E),S>y&&(y=S),c.push(E),h.push(S)}var x=g-v,T=y-m;x>T?y=m+x:g=v+T;var N=di();if(N.add=function(e){s(N,e,+b(e,++p),+w(e,p),v,m,g,y)},N.visit=function(e){vi(e,N,v,m,g,y)},N.find=function(e){return mi(N,e[0],e[1],v,m,g,y)},p=-1,null==t){for(;++p<d;)s(N,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(N.add);return c=h=e=l=null,N}var o,u=Mr,a=_r;return(o=arguments.length)?(u=hi,a=pi,3===o&&(i=n,r=t,n=t=0),s(e)):(s.x=function(e){return arguments.length?(u=e,s):u},s.y=function(e){return arguments.length?(a=e,s):a},s.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),s):null==t?null:[[t,n],[r,i]]},s.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),s):null==t?null:[r-t,i-n]},s)},lu.interpolateRgb=gi,lu.interpolateObject=yi,lu.interpolateNumber=bi,lu.interpolateString=wi;var df=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vf=new RegExp(df.source,"g");lu.interpolate=Ei,lu.interpolators=[function(e,t){var n=typeof t;return("string"===n?oa.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?gi:wi:t instanceof at?gi:Array.isArray(t)?Si:"object"===n&&isNaN(t)?yi:bi)(e,t)}],lu.interpolateArray=Si;var mf=function(){return w},gf=lu.map({linear:mf,poly:Ai,quad:function(){return Ci},cubic:function(){return ki},sin:function(){return Oi},exp:function(){return Mi},circle:function(){return _i},elastic:Di,back:Pi,bounce:function(){return Hi}}),yf=lu.map({"in":w,out:Ti,"in-out":Ni,"out-in":function(e){return Ni(Ti(e))}});lu.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=gf.get(n)||mf,r=yf.get(r)||w,xi(r(n.apply(null,cu.call(arguments,1))))},lu.interpolateHcl=Bi,lu.interpolateHsl=ji,lu.interpolateLab=Fi,lu.interpolateRound=Ii,lu.transform=function(e){var t=pu.createElementNS(lu.ns.prefix.svg,"g");return(lu.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new qi(n?n.matrix:bf)})(e)},qi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var bf={a:1,b:0,c:0,d:1,e:0,f:0};lu.interpolateTransform=Ki,lu.layout={},lu.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Yi(e[n]));return t}},lu.layout.chord=function(){function e(){var e,f,c,h,p,d={},v=[],m=lu.range(s),g=[];for(n=[],r=[],e=0,h=-1;++h<s;){for(f=0,p=-1;++p<s;)f+=i[h][p];v.push(f),g.push(lu.range(s)),e+=f}for(o&&m.sort(function(e,t){return o(v[e],v[t])}),u&&g.forEach(function(e,t){e.sort(function(e,n){return u(i[t][e],i[t][n])})}),e=(Ru-l*s)/e,f=0,h=-1;++h<s;){for(c=f,p=-1;++p<s;){var y=m[h],b=g[y][p],w=i[y][b],E=f,S=f+=w*e;d[y+"-"+b]={index:y,subindex:b,startAngle:E,endAngle:S,value:w}}r[y]={index:y,startAngle:c,endAngle:f,value:v[y]},f+=l}for(h=-1;++h<s;)for(p=h-1;++p<s;){var x=d[h+"-"+p],T=d[p+"-"+h];(x.value||T.value)&&n.push(x.value<T.value?{source:T,target:x}:{source:x,target:T})}a&&t()}function t(){n.sort(function(e,t){return a((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,s,o,u,a,f={},l=0;return f.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,f):i},f.padding=function(e){return arguments.length?(l=e,n=r=null,f):l},f.sortGroups=function(e){return arguments.length?(o=e,n=r=null,f):o},f.sortSubgroups=function(e){return arguments.length?(u=e,n=null,f):u},f.sortChords=function(e){return arguments.length?(a=e,n&&t(),f):a},f.chords=function(){return n||e(),n},f.groups=function(){return r||e(),r},f},lu.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=i-n,a=s*s+o*o;if(u*u/g<a){if(a<v){var f=t.charge/a;e.px-=s*f,e.py-=o*f}return!0}if(t.point&&a&&a<v){var f=t.pointCharge/a;e.px-=s*f,e.py-=o*f}}return!t.charge}}function t(e){e.px=lu.event.x,e.py=lu.event.y,a.resume()}var n,r,i,s,o,u,a={},f=lu.dispatch("start","tick","end"),l=[1,1],c=.9,h=wf,p=Ef,d=-30,v=Sf,m=.1,g=.64,y=[],b=[];return a.tick=function(){if((i*=.99)<.005)return n=null,f.end({type:"end",alpha:i=0}),!0;var t,r,a,h,p,v,g,w,E,S=y.length,x=b.length;for(r=0;r<x;++r)a=b[r],h=a.source,p=a.target,w=p.x-h.x,E=p.y-h.y,(v=w*w+E*E)&&(v=i*o[r]*((v=Math.sqrt(v))-s[r])/v,w*=v,E*=v,p.x-=w*(g=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=E*g,h.x+=w*(g=1-g),h.y+=E*g);if((g=i*m)&&(w=l[0]/2,E=l[1]/2,r=-1,g))for(;++r<S;)a=y[r],a.x+=(w-a.x)*g,a.y+=(E-a.y)*g;if(d)for(ss(t=lu.geom.quadtree(y),i,u),r=-1;++r<S;)(a=y[r]).fixed||t.visit(e(a));for(r=-1;++r<S;)a=y[r],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*c,a.y-=(a.py-(a.py=a.y))*c);f.tick({type:"tick",alpha:i})},a.nodes=function(e){return arguments.length?(y=e,a):y},a.links=function(e){return arguments.length?(b=e,a):b},a.size=function(e){return arguments.length?(l=e,a):l},a.linkDistance=function(e){return arguments.length?(h="function"==typeof e?e:+e,a):h},a.distance=a.linkDistance,a.linkStrength=function(e){return arguments.length?(p="function"==typeof e?e:+e,a):p},a.friction=function(e){return arguments.length?(c=+e,a):c},a.charge=function(e){return arguments.length?(d="function"==typeof e?e:+e,a):d},a.chargeDistance=function(e){return arguments.length?(v=e*e,a):Math.sqrt(v)},a.gravity=function(e){return arguments.length?(m=+e,a):m},a.theta=function(e){return arguments.length?(g=e*e,a):Math.sqrt(g)},a.alpha=function(e){return arguments.length?(e=+e,i?e>0?i=e:(n.c=null,n.t=NaN,n=null,f.end({type:"end",alpha:i=0})):e>0&&(f.start({type:"start",alpha:i=e}),n=Dt(a.tick)),a):i},a.start=function(){function e(e,r){if(!n){for(n=new Array(i),a=0;a<i;++a)n[a]=[];for(a=0;a<f;++a){var s=b[a];n[s.source.index].push(s.target),n[s.target.index].push(s.source)}}for(var o,u=n[t],a=-1,l=u.length;++a<l;)if(!isNaN(o=u[a][e]))return o;return Math.random()*r}var t,n,r,i=y.length,f=b.length,c=l[0],v=l[1];for(t=0;t<i;++t)(r=y[t]).index=t,r.weight=0;for(t=0;t<f;++t)r=b[t],"number"==typeof r.source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<i;++t)r=y[t],isNaN(r.x)&&(r.x=e("x",c)),isNaN(r.y)&&(r.y=e("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(s=[],"function"==typeof h)for(t=0;t<f;++t)s[t]=+h.call(this,b[t],t);else for(t=0;t<f;++t)s[t]=h;if(o=[],"function"==typeof p)for(t=0;t<f;++t)o[t]=+p.call(this,b[t],t);else for(t=0;t<f;++t)o[t]=p;if(u=[],"function"==typeof d)for(t=0;t<i;++t)u[t]=+d.call(this,y[t],t);else for(t=0;t<i;++t)u[t]=d;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return r||(r=lu.behavior.drag().origin(w).on("dragstart.force",ts).on("drag.force",t).on("dragend.force",ns)),arguments.length?void this.on("mouseover.force",rs).on("mouseout.force",is).call(r):r},lu.rebind(a,f,"on")};var wf=20,Ef=1,Sf=1/0;lu.layout.hierarchy=function(){function e(i){var s,o=[i],u=[];for(i.depth=0;null!=(s=o.pop());)if(u.push(s),(f=n.call(e,s,s.depth))&&(a=f.length)){for(var a,f,l;--a>=0;)o.push(l=f[a]),l.parent=s,l.depth=s.depth+1;r&&(s.value=0),s.children=f}else r&&(s.value=+r.call(e,s,s.depth)||0),delete s.children;return as(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),u}var t=cs,n=fs,r=ls;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(us(t,function(e){e.children&&(e.value=0)}),as(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},lu.layout.partition=function(){function e(t,n,r,i){var s=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,s&&(o=s.length)){var o,u,a,f=-1;for(r=t.value?r/t.value:0;++f<o;)e(u=s[f],n,a=u.value*r,i),n+=a}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,s=-1;++s<i;)r=Math.max(r,t(n[s]));return 1+r}function n(n,s){var o=r.call(this,n,s);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=lu.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},os(n,r)},lu.layout.pie=function(){function e(o){var u,a=o.length,f=o.map(function(n,r){return+t.call(e,n,r)}),l=+("function"==typeof r?r.apply(this,arguments):r),c=("function"==typeof i?i.apply(this,arguments):i)-l,h=Math.min(Math.abs(c)/a,+("function"==typeof s?s.apply(this,arguments):s)),p=h*(c<0?-1:1),d=lu.sum(f),v=d?(c-a*p)/d:0,m=lu.range(a),g=[];return null!=n&&m.sort(n===xf?function(e,t){return f[t]-f[e]}:function(e,t){return n(o[e],o[t])}),m.forEach(function(e){g[e]={data:o[e],value:u=f[e],startAngle:l,endAngle:l+=u*v+p,padAngle:h}}),g}var t=Number,n=xf,r=0,i=Ru,s=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(s=t,e):s},e};var xf={};lu.layout.stack=function(){function e(u,a){if(!(h=u.length))return u;var f=u.map(function(n,r){return t.call(e,n,r)}),l=f.map(function(t){return t.map(function(t,n){return[s.call(e,t,n),o.call(e,t,n)]})}),c=n.call(e,l,a);f=lu.permute(f,c),l=lu.permute(l,c);var h,p,d,v,m=r.call(e,l,a),g=f[0].length;for(d=0;d<g;++d)for(i.call(e,f[0][d],v=m[d],l[0][d][1]),p=1;p<h;++p)i.call(e,f[p][d],v+=l[p-1][d][1],l[p][d][1]);return u}var t=w,n=ms,r=gs,i=vs,s=ps,o=ds;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:Tf.get(t)||ms,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:Nf.get(t)||gs,e):r},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var Tf=lu.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(ys),s=e.map(bs),o=lu.range(r).sort(function(e,t){return i[e]-i[t]}),u=0,a=0,f=[],l=[];for(t=0;t<r;++t)n=o[t],u<a?(u+=s[n],f.push(n)):(a+=s[n],l.push(n));return l.reverse().concat(f)},reverse:function(e){return lu.range(e.length).reverse()},"default":ms}),Nf=lu.map({silhouette:function(e){var t,n,r,i=e.length,s=e[0].length,o=[],u=0,a=[];for(n=0;n<s;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>u&&(u=r),o.push(r)}for(n=0;n<s;++n)a[n]=(u-o[n])/2;return a},wiggle:function(e){var t,n,r,i,s,o,u,a,f,l=e.length,c=e[0],h=c.length,p=[];for(p[0]=a=f=0,n=1;n<h;++n){for(t=0,i=0;t<l;++t)i+=e[t][n][1];for(t=0,s=0,u=c[n][0]-c[n-1][0];t<l;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*u);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/u;s+=o*e[t][n][1]}p[n]=a-=i?s/i*u:0,a<f&&(f=a)}for(n=0;n<h;++n)p[n]-=f;return p},expand:function(e){var t,n,r,i=e.length,s=e[0].length,o=1/i,u=[];for(n=0;n<s;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=o}for(n=0;n<s;++n)u[n]=0;return u},zero:gs});lu.layout.histogram=function(){function e(e,s){for(var o,u,a=[],f=e.map(n,this),l=r.call(this,f,s),c=i.call(this,l,f,s),s=-1,h=f.length,p=c.length-1,d=t?1:1/h;++s<p;)o=a[s]=[],o.dx=c[s+1]-(o.x=c[s]),o.y=0;if(p>0)for(s=-1;++s<h;)u=f[s],u>=l[0]&&u<=l[1]&&(o=a[lu.bisect(c,u,1,p)-1],o.y+=d,o.push(e[s]));return a}var t=!0,n=Number,r=xs,i=Es;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=Lt(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return Ss(e,t)}:Lt(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},lu.layout.pack=function(){function e(e,s){var o=n.call(this,e,s),u=o[0],a=i[0],f=i[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(u.x=u.y=0,as(u,function(e){e.r=+l(e.value)}),as(u,Ls),r){var c=r*(t?1:Math.max(2*u.r/a,2*u.r/f))/2;as(u,function(e){e.r+=c}),as(u,Ls),as(u,function(e){e.r-=c})}return Ms(u,a/2,f/2,t?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t,n=lu.layout.hierarchy().sort(Ts),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},os(e,n)},lu.layout.tree=function(){function e(e,i){var l=o.call(this,e,i),c=l[0],h=t(c);if(as(h,n),h.parent.m=-h.z,us(h,r),f)us(c,s);else{var p=c,d=c,v=c;us(c,function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>v.depth&&(v=e)});var m=u(p,d)/2-p.x,g=a[0]/(d.x+u(d,p)/2+m),y=a[1]/(v.depth||1);us(c,function(e){e.x=(e.x+m)*g,e.y=e.depth*y})}return l}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,s=t.children,o=0,u=s.length;o<u;++o)r.push((s[o]=i={_:s[o],parent:t,children:(i=s[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){js(e);var s=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+u(e._,r._),e.m=e.z-s):e.z=s}else r&&(e.z=r.z+u(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,s=e,o=t,a=i.parent.children[0],f=i.m,l=s.m,c=o.m,h=a.m;o=Hs(o),i=Ps(i),o&&i;)a=Ps(a),s=Hs(s),s.a=e,r=o.z+c-i.z-f+u(o._,i._),r>0&&(Bs(Fs(o,e,n),e,r),f+=r,l+=r),c+=o.m,f+=i.m,h+=a.m,l+=s.m;o&&!Hs(s)&&(s.t=o,s.m+=c-l),i&&!Ps(a)&&(a.t=i,a.m+=f-h,n=e)}return n}function s(e){e.x*=a[0],e.y=e.depth*a[1]}var o=lu.layout.hierarchy().sort(null).value(null),u=Ds,a=[1,1],f=null;return e.separation=function(t){return arguments.length?(u=t,e):u},e.size=function(t){return arguments.length?(f=null==(a=t)?s:null,e):f?null:a},e.nodeSize=function(t){return arguments.length?(f=null==(a=t)?null:s,e):f?a:null},os(e,o)},lu.layout.cluster=function(){function e(e,s){var o,u=t.call(this,e,s),a=u[0],f=0;as(a,function(e){var t=e.children;t&&t.length?(e.x=qs(t),e.y=Is(t)):(e.x=o?f+=n(e,o):0,e.y=0,o=e)});var l=Rs(a),c=Us(a),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return as(a,i?function(e){e.x=(e.x-a.x)*r[0],e.y=(a.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(a.y?e.y/a.y:1))*r[1]}),u}var t=lu.layout.hierarchy().sort(null).value(null),n=Ds,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},os(e,t)},lu.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,s=e.length;++i<s;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function t(n){var s=n.children;if(s&&s.length){var o,u,a,f=c(n),l=[],h=s.slice(),d=1/0,v="slice"===p?f.dx:"dice"===p?f.dy:"slice-dice"===p?1&n.depth?f.dy:f.dx:Math.min(f.dx,f.dy);for(e(h,f.dx*f.dy/n.value),l.area=0;(a=h.length)>0;)l.push(o=h[a-1]),l.area+=o.area,"squarify"!==p||(u=r(l,v))<=d?(h.pop(),d=u):(l.area-=l.pop().area,i(l,v,f,!1),v=Math.min(f.dx,f.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,v,f,!0),l.length=l.area=0),s.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var s,o=c(t),u=r.slice(),a=[];for(e(u,o.dx*o.dy/t.value),a.area=0;s=u.pop();)a.push(s),a.area+=s.area,null!=s.z&&(i(a,s.z?o.dx:o.dy,o,!u.length),a.length=a.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,s=1/0,o=-1,u=e.length;++o<u;)(n=e[o].area)&&(n<s&&(s=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*d/r,r/(t*s*d)):1/0}function i(e,t,n,r){var i,s=-1,o=e.length,u=n.x,f=n.y,l=t?a(e.area/t):0;if(t==n.dx){for((r||l>n.dy)&&(l=n.dy);++s<o;)i=e[s],i.x=u,i.y=f,i.dy=l,u+=i.dx=Math.min(n.x+n.dx-u,l?a(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++s<o;)i=e[s],i.x=u,i.y=f,i.dx=l,f+=i.dy=Math.min(n.y+n.dy-f,l?a(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-f,n.x+=l,n.dx-=l}}function s(r){var i=o||u(r),s=i[0];return s.x=s.y=0,s.value?(s.dx=f[0],s.dy=f[1]):s.dx=s.dy=0,o&&u.revalue(s),e([s],s.dx*s.dy/s.value),(o?n:t)(s),h&&(o=i),i}var o,u=lu.layout.hierarchy(),a=Math.round,f=[1,1],l=null,c=zs,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return s.size=function(e){return arguments.length?(f=e,s):f},s.padding=function(e){function t(t){var n=e.call(s,t,t.depth);return null==n?zs(t):Ws(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Ws(t,e)}if(!arguments.length)return l;var r;return c=null==(l=e)?zs:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,s},s.round=function(e){return arguments.length?(a=e?Math.round:Number,s):a!=Number},s.sticky=function(e){return arguments.length?(h=e,o=null,s):h},s.ratio=function(e){return arguments.length?(d=e,s):d},s.mode=function(e){return arguments.length?(p=e+"",s):p},os(s,u)},lu.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=lu.random.normal.apply(lu,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=lu.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},lu.scale={};var Cf={floor:w,ceil:w};lu.scale.linear=function(){return Gs([0,1],[0,1],Ei,!1)};var kf={s:1,g:1,p:1,r:1,e:1};lu.scale.log=function(){return so(lu.scale.linear().domain([0,1]),10,!0,[1,10])};var Lf=lu.format(".0e"),Af={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};lu.scale.pow=function(){return oo(lu.scale.linear(),1,[0,1])},lu.scale.sqrt=function(){return lu.scale.pow().exponent(.5)},lu.scale.ordinal=function(){return ao([],{t:"range",a:[[]]})},lu.scale.category10=function(){return lu.scale.ordinal().range(Of)},lu.scale.category20=function(){return lu.scale.ordinal().range(Mf)},lu.scale.category20b=function(){return lu.scale.ordinal().range(_f)},lu.scale.category20c=function(){return lu.scale.ordinal().range(Df)};var Of=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Et),Mf=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Et),_f=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Et),Df=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Et);lu.scale.quantile=function(){return fo([],[])},lu.scale.quantize=function(){return lo(0,1,[0,1])},lu.scale.threshold=function(){return co([.5],[0,1])},lu.scale.identity=function(){return ho([0,1])},lu.svg={},lu.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),f=Math.max(0,+r.apply(this,arguments)),l=o.apply(this,arguments)-zu,c=u.apply(this,arguments)-zu,h=Math.abs(c-l),p=l>c?0:1;if(f<e&&(d=f,f=e,e=d),h>=Uu)return t(f,p)+(e?t(e,1-p):"")+"Z";var d,v,m,g,y,b,w,E,S,x,T,N,C=0,k=0,L=[];if((g=(+a.apply(this,arguments)||0)/2)&&(m=s===Pf?Math.sqrt(e*e+f*f):+s.apply(this,arguments),p||(k*=-1),f&&(k=rt(m/f*Math.sin(g))),e&&(C=rt(m/e*Math.sin(g)))),f){y=f*Math.cos(l+k),b=f*Math.sin(l+k),w=f*Math.cos(c-k),E=f*Math.sin(c-k);var A=Math.abs(c-l-2*k)<=qu?0:1;if(k&&wo(y,b,w,E)===p^A){var O=(l+c)/2;y=f*Math.cos(O),b=f*Math.sin(O),w=E=null}}else y=b=0;if(e){S=e*Math.cos(c-C),x=e*Math.sin(c-C),T=e*Math.cos(l+C),N=e*Math.sin(l+C);var M=Math.abs(l-c+2*C)<=qu?0:1;if(C&&wo(S,x,T,N)===1-p^M){var _=(l+c)/2;S=e*Math.cos(_),x=e*Math.sin(_),T=N=null}}else S=x=0;if(h>Fu&&(d=Math.min(Math.abs(f-e)/2,+i.apply(this,arguments)))>.001){v=e<f^p?0:1;var D=d,P=d;if(h<qu){var H=null==T?[S,x]:null==w?[y,b]:Br([y,b],[T,N],[w,E],[S,x]),B=y-H[0],j=b-H[1],F=w-H[0],I=E-H[1],q=1/Math.sin(Math.acos((B*F+j*I)/(Math.sqrt(B*B+j*j)*Math.sqrt(F*F+I*I)))/2),R=Math.sqrt(H[0]*H[0]+H[1]*H[1]);P=Math.min(d,(e-R)/(q-1)),D=Math.min(d,(f-R)/(q+1))}if(null!=w){var U=Eo(null==T?[S,x]:[T,N],[y,b],f,D,p),z=Eo([w,E],[S,x],f,D,p);d===D?L.push("M",U[0],"A",D,",",D," 0 0,",v," ",U[1],"A",f,",",f," 0 ",1-p^wo(U[1][0],U[1][1],z[1][0],z[1][1]),",",p," ",z[1],"A",D,",",D," 0 0,",v," ",z[0]):L.push("M",U[0],"A",D,",",D," 0 1,",v," ",z[0])}else L.push("M",y,",",b);if(null!=T){var W=Eo([y,b],[T,N],e,-P,p),X=Eo([S,x],null==w?[y,b]:[w,E],e,-P,p);d===P?L.push("L",X[0],"A",P,",",P," 0 0,",v," ",X[1],"A",e,",",e," 0 ",p^wo(X[1][0],X[1][1],W[1][0],W[1][1]),",",1-p," ",W[1],"A",P,",",P," 0 0,",v," ",W[0]):L.push("L",X[0],"A",P,",",P," 0 0,",v," ",W[0])}else L.push("L",S,",",x)}else L.push("M",y,",",b),null!=w&&L.push("A",f,",",f," 0 ",A,",",p," ",w,",",E),L.push("L",S,",",x),null!=T&&L.push("A",e,",",e," 0 ",M,",",1-p," ",T,",",N);return L.push("Z"),L.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+ -e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=vo,r=mo,i=po,s=Pf,o=go,u=yo,a=bo;return e.innerRadius=function(t){return arguments.length?(n=Lt(t),e):n},e.outerRadius=function(t){return arguments.length?(r=Lt(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=Lt(t),e):i},e.padRadius=function(t){return arguments.length?(s=t==Pf?Pf:Lt(t),e):s},e.startAngle=function(t){return arguments.length?(o=Lt(t),e):o},e.endAngle=function(t){return arguments.length?(u=Lt(t),e):u},e.padAngle=function(t){return arguments.length?(a=Lt(t),e):a},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-zu;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Pf="auto";lu.svg.line=function(){return So(w)};var Hf=lu.map({linear:xo,"linear-closed":To,step:No,"step-before":Co,"step-after":ko,basis:Do,"basis-open":Po,"basis-closed":Ho,bundle:Bo,cardinal:Oo,"cardinal-open":Lo,"cardinal-closed":Ao,monotone:Uo});Hf.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Bf=[0,2/3,1/3,0],jf=[0,1/3,2/3,0],Ff=[0,1/6,2/3,1/6];lu.svg.line.radial=function(){var e=So(zo);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Co.reverse=ko,ko.reverse=Co,lu.svg.area=function(){return Wo(w)},lu.svg.area.radial=function(){var e=Wo(zo);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},lu.svg.chord=function(){function e(e,u){var a=t(this,s,e,u),f=t(this,o,e,u);return"M"+a.p0+r(a.r,a.p1,a.a1-a.a0)+(n(a,f)?i(a.r,a.p1,a.r,a.p0):i(a.r,a.p1,f.r,f.p0)+r(f.r,f.p1,f.a1-f.a0)+i(f.r,f.p1,a.r,a.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),s=u.call(e,i,r),o=a.call(e,i,r)-zu,l=f.call(e,i,r)-zu;return{r:s,a0:o,a1:l,p0:[s*Math.cos(o),s*Math.sin(o)],p1:[s*Math.cos(l),s*Math.sin(l)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>qu)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var s=Er,o=Sr,u=Xo,a=go,f=yo;return e.radius=function(t){return arguments.length?(u=Lt(t),e):u},e.source=function(t){return arguments.length?(s=Lt(t),e):s},e.target=function(t){return arguments.length?(o=Lt(t),e):o},e.startAngle=function(t){return arguments.length?(a=Lt(t),e):a},e.endAngle=function(t){return arguments.length?(f=Lt(t),e):f},e},lu.svg.diagonal=function(){function e(e,i){var s=t.call(this,e,i),o=n.call(this,e,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(r),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var t=Er,n=Sr,r=Vo;return e.source=function(n){return arguments.length?(t=Lt(n),e):t},e.target=function(t){return arguments.length?(n=Lt(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},lu.svg.diagonal.radial=function(){var e=lu.svg.diagonal(),t=Vo,n=e.projection;return e.projection=function(e){return arguments.length?n($o(t=e)):t},e},lu.svg.symbol=function(){function e(e,i){return(If.get(t.call(this,e,i))||Qo)(n.call(this,e,i))}var t=Ko,n=Jo;return e.type=function(n){return arguments.length?(t=Lt(n),e):t},e.size=function(t){return arguments.length?(n=Lt(t),e):n},e};var If=lu.map({circle:Qo,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Rf)),n=t*Rf;return"M0,"+ -t+"L"+n+",0 0,"+t+" "+ -n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/qf),n=t*qf/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/qf),n=t*qf/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});lu.svg.symbolTypes=If.keys();var qf=Math.sqrt(3),Rf=Math.tan(30*Wu);Ou.transition=function(e){for(var t,n,r=Uf||++Vf,i=tu(e),s=[],o=zf||{time:Date.now(),ease:Li,delay:0,duration:250},u=-1,a=this.length;++u<a;){s.push(t=[]);for(var f=this[u],l=-1,c=f.length;++l<c;)(n=f[l])&&nu(n,l,i,r,o),t.push(n)}return Yo(s,i,r)},Ou.interrupt=function(e){return this.each(null==e?Wf:Go(tu(e)))};var Uf,zf,Wf=Go(tu()),Xf=[],Vf=0;Xf.call=Ou.call,Xf.empty=Ou.empty,Xf.node=Ou.node,Xf.size=Ou.size,lu.transition=function(e,t){return e&&e.transition?Uf?e.transition(t):e:lu.selection().transition(e)},lu.transition.prototype=Xf,Xf.select=function(e){var t,n,r,i=this.id,s=this.namespace,o=[];e=O(e);for(var u=-1,a=this.length;++u<a;){o.push(t=[]);for(var f=this[u],l=-1,c=f.length;++l<c;)(r=f[l])&&(n=e.call(r,r.__data__,l,u))?("__data__"in r&&(n.__data__=r.__data__),nu(n,l,s,i,r[s][i]),t.push(n)):t.push(null)}return Yo(o,s,i)},Xf.selectAll=function(e){var t,n,r,i,s,o=this.id,u=this.namespace,a=[];e=M(e);for(var f=-1,l=this.length;++f<l;)for(var c=this[f],h=-1,p=c.length;++h<p;)if(r=c[h]){s=r[u][o],n=e.call(r,r.__data__,h,f),a.push(t=[]);for(var d=-1,v=n.length;++d<v;)(i=n[d])&&nu(i,d,u,o,s),t.push(i)}return Yo(a,u,o)},Xf.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=z(e));for(var s=0,o=this.length;s<o;s++){i.push(t=[]);for(var n=this[s],u=0,a=n.length;u<a;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return Yo(i,this.namespace,this.id)},Xf.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):X(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Xf.attr=function(e,t){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(u);return n!==e&&(t=o(n,e),function(e){this.setAttribute(u,t(e))})})}function s(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(u.space,u.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(u.space,u.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Ki:Ei,u=lu.ns.qualify(e);return Zo(this,"attr."+e,t,u.local?s:i)},Xf.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=lu.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Xf.style=function(e,t,r){function i(){this.style.removeProperty(e)}function s(t){return null==t?i:(t+="",function(){var i,s=n(this).getComputedStyle(this,null).getPropertyValue(e);return s!==t&&(i=Ei(s,t),function(t){this.style.setProperty(e,i(t),r)})})}var o=arguments.length;if(o<3){if("string"!=typeof e){o<2&&(t="");for(r in e)this.style(r,e[r],t);return this}r=""}return Zo(this,"style."+e,t,s)},Xf.styleTween=function(e,t,r){function i(i,s){var o=t.call(this,i,s,n(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+e,i)},Xf.text=function(e){return Zo(this,"text",e,eu)},Xf.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Xf.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=lu.ease.apply(lu,arguments)),X(this,function(i){i[n][t].ease=e}))},Xf.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:X(this,"function"==typeof e?function(i,s,o){i[n][t].delay=+e.call(i,i.__data__,s,o)}:(e=+e,function(i){i[n][t].delay=e}))},Xf.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:X(this,"function"==typeof e?function(i,s,o){i[n][t].duration=Math.max(1,e.call(i,i.__data__,s,o))}:(e=Math.max(1,e),function(i){i[n][t].duration=e}))},Xf.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=zf,s=Uf;try{Uf=n,X(this,function(t,i,s){zf=t[r][n],e.call(t,t.__data__,i,s)})}finally{zf=i,Uf=s}}else X(this,function(i){var s=i[r][n];(s.event||(s.event=lu.dispatch("start","end","interrupt"))).on(e,t)});return this},Xf.transition=function(){for(var e,t,n,r,i=this.id,s=++Vf,o=this.namespace,u=[],a=0,f=this.length;a<f;a++){u.push(e=[]);for(var t=this[a],l=0,c=t.length;l<c;l++)(n=t[l])&&(r=n[o][i],nu(n,l,o,s,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return Yo(u,o,s)},lu.svg.axis=function(){function e(e){e.each(function(){var e,f=lu.select(this),l=this.__chart__||n,c=this.__chart__=n.copy(),h=null==a?c.ticks?c.ticks.apply(c,u):c.domain():a,p=null==t?c.tickFormat?c.tickFormat.apply(c,u):w:t,d=f.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Fu),m=lu.transition(d.exit()).style("opacity",Fu).remove(),g=lu.transition(d.order()).style("opacity",1),y=Math.max(i,0)+o,b=Vs(c),E=f.selectAll(".domain").data([0]),S=(E.enter().append("path").attr("class","domain"),lu.transition(E));v.append("line"),v.append("text");var x,T,N,C,k=v.select("line"),L=g.select("line"),A=d.select("text").text(p),O=v.select("text"),M=g.select("text"),_="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=ru,x="x",N="y",T="x2",C="y2",A.attr("dy",_<0?"0em":".71em").style("text-anchor","middle"),S.attr("d","M"+b[0]+","+_*s+"V0H"+b[1]+"V"+_*s)):(e=iu,x="y",N="x",T="y2",C="x2",A.attr("dy",".32em").style("text-anchor",_<0?"end":"start"),S.attr("d","M"+_*s+","+b[0]+"H0V"+b[1]+"H"+_*s)),k.attr(C,_*i),O.attr(N,_*y),L.attr(T,0).attr(C,_*i),M.attr(x,0).attr(N,_*y),c.rangeBand){var D=c,P=D.rangeBand()/2;l=c=function(e){return D(e)+P}}else l.rangeBand?l=c:m.call(e,c,l);v.call(e,l,c),g.call(e,c,c)})}var t,n=lu.scale.linear(),r=$f,i=6,s=6,o=3,u=[10],a=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Jf?t+"":$f,e):r},e.ticks=function(){return arguments.length?(u=hu(arguments),e):u},e.tickValues=function(t){return arguments.length?(a=t,e):a},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,s=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(s=+t,e):s},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var $f="bottom",Jf={top:1,right:1,bottom:1,left:1};lu.svg.brush=function(){function e(n){n.each(function(){var n=lu.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",s).on("touchstart.brush",s),o=n.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),n.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=n.selectAll(".resize").data(v,w);u.exit().remove(),u.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Kf[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",e.empty()?"none":null);var a,c=lu.transition(n),h=lu.transition(o);f&&(a=Vs(f),h.attr("x",a[0]).attr("width",a[1]-a[0]),r(c)),l&&(a=Vs(l),h.attr("y",a[0]).attr("height",a[1]-a[0]),i(c)),t(c)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+c[+/e$/.test(e)]+","+h[+/^s/.test(e)]+")"})}function r(e){e.select(".extent").attr("x",c[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function i(e){e.select(".extent").attr("y",h[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function s(){function s(){32==lu.event.keyCode&&(A||(b=null,M[0]-=c[1],M[1]-=h[1],A=2),C())}function v(){32==lu.event.keyCode&&2==A&&(M[0]+=c[1],M[1]+=h[1],A=0,C())}function m(){var e=lu.mouse(E),n=!1;w&&(e[0]+=w[0],e[1]+=w[1]),A||(lu.event.altKey?(b||(b=[(c[0]+c[1])/2,(h[0]+h[1])/2]),M[0]=c[+(e[0]<b[0])],M[1]=h[+(e[1]<b[1])]):b=null),k&&g(e,f,0)&&(r(T),n=!0),L&&g(e,l,1)&&(i(T),n=!0),n&&(t(T),x({type:"brush",mode:A?"move":"resize"}))}function g(e,t,n){var r,i,s=Vs(t),a=s[0],f=s[1],l=M[n],v=n?h:c,m=v[1]-v[0];if(A&&(a-=l,f-=m+l),r=(n?d:p)?Math.max(a,Math.min(f,e[n])):e[n],A?i=(r+=l)+m:(b&&(l=Math.max(a,Math.min(f,2*b[n]-r))),l<r?(i=r,r=l):i=l),v[0]!=r||v[1]!=i)return n?u=null:o=null,v[0]=r,v[1]=i,!0}function y(){m(),T.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),lu.select("body").style("cursor",null),_.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),O(),x({type:"brushend"})}var b,w,E=this,S=lu.select(lu.event.target),x=a.of(E,arguments),T=lu.select(E),N=S.datum(),k=!/^(n|s)$/.test(N)&&f,L=!/^(e|w)$/.test(N)&&l,A=S.classed("extent"),O=G(E),M=lu.mouse(E),_=lu.select(n(E)).on("keydown.brush",s).on("keyup.brush",v);if(lu.event.changedTouches?_.on("touchmove.brush",m).on("touchend.brush",y):_.on("mousemove.brush",m).on("mouseup.brush",y),T.interrupt().selectAll("*").interrupt(),A)M[0]=c[0]-M[0],M[1]=h[0]-M[1];else if(N){var D=+/w$/.test(N),P=+/^n/.test(N);w=[c[1-D]-M[0],h[1-P]-M[1]],M[0]=c[D],M[1]=h[P]}else lu.event.altKey&&(b=M.slice());T.style("pointer-events","none").selectAll(".resize").style("display",null),lu.select("body").style("cursor",S.style("cursor")),x({type:"brushstart"}),m()}var o,u,a=L(e,"brushstart","brush","brushend"),f=null,l=null,c=[0,0],h=[0,0],p=!0,d=!0,v=Qf[0];return e.event=function(e){e.each(function(){var e=a.of(this,arguments),t={x:c,y:h,i:o,j:u},n=this.__chart__||t;this.__chart__=t,Uf?lu.select(this).transition().each("start.brush",function(){o=n.i,u=n.j,c=n.x,h=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=Si(c,t.x),r=Si(h,t.y);return o=u=null,function(i){c=t.x=n(i),h=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,u=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(f=t,v=Qf[!f<<1|!l],e):f},e.y=function(t){return arguments.length?(l=t,v=Qf[!f<<1|!l],e):l},e.clamp=function(t){return arguments.length?(f&&l?(p=!!t[0],d=!!t[1]):f?p=!!t:l&&(d=!!t),e):f&&l?[p,d]:f?p:l?d:null},e.extent=function(t){var n,r,i,s,a;return arguments.length?(f&&(n=t[0],r=t[1],l&&(n=n[0],r=r[0]),o=[n,r],f.invert&&(n=f(n),r=f(r)),r<n&&(a=n,n=r,r=a),n==c[0]&&r==c[1]||(c=[n,r])),l&&(i=t[0],s=t[1],f&&(i=i[1],s=s[1]),u=[i,s],l.invert&&(i=l(i),s=l(s)),s<i&&(a=i,i=s,s=a),i==h[0]&&s==h[1]||(h=[i,s])),e):(f&&(o?(n=o[0],r=o[1]):(n=c[0],r=c[1],f.invert&&(n=f.invert(n),r=f.invert(r)),r<n&&(a=n,n=r,r=a))),l&&(u?(i=u[0],s=u[1]):(i=h[0],s=h[1],l.invert&&(i=l.invert(i),s=l.invert(s)),s<i&&(a=i,i=s,s=a))),f&&l?[[n,i],[r,s]]:f?[n,r]:l&&[i,s])},e.clear=function(){return e.empty()||(c=[0,0],h=[0,0],o=u=null),e},e.empty=function(){return!!f&&c[0]==c[1]||!!l&&h[0]==h[1]},lu.rebind(e,a,"on")};var Kf={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Qf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Gf=va.format=Ea.timeFormat,Yf=Gf.utc,Zf=Yf("%Y-%m-%dT%H:%M:%S.%LZ");Gf.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?su:Zf,su.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},su.toString=Zf.toString,va.second=Ut(function(e){return new ma(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),va.seconds=va.second.range,va.seconds.utc=va.second.utc.range,va.minute=Ut(function(e){return new ma(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),va.minutes=va.minute.range,va.minutes.utc=va.minute.utc.range,va.hour=Ut(function(e){var t=e.getTimezoneOffset()/60;return new ma(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),va.hours=va.hour.range,va.hours.utc=va.hour.utc.range,va.month=Ut(function(e){return e=va.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),va.months=va.month.range,va.months.utc=va.month.utc.range;var el=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],tl=[[va.second,1],[va.second,5],[va.second,15],[va.second,30],[va.minute,1],[va.minute,5],[va.minute,15],[va.minute,30],[va.hour,1],[va.hour,3],[va.hour,6],[va.hour,12],[va.day,1],[va.day,2],[va.week,1],[va.month,1],[va.month,3],[va.year,1]],nl=Gf.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",_n]]),rl={range:function(e,t,n){return lu.range(Math.ceil(e/n)*n,+t,n).map(uu)},floor:w,ceil:w};tl.year=va.year,va.scale=function(){return ou(lu.scale.linear(),tl,nl)};var il=tl.map(function(e){return[e[0].utc,e[1]]}),sl=Yf.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",_n]]);il.year=va.year.utc,va.scale.utc=function(){return ou(lu.scale.linear(),il,sl)},lu.text=At(function(e){return e.responseText}),lu.json=function(e,t){return Ot(e,"application/json",au,t)},lu.html=function(e,t){return Ot(e,"text/html",fu,t)},lu.xml=At(function(e){return e.responseXML}),"function"==typeof du&&du.amd?(this.d3=lu,du(lu)):"object"==typeof t&&t.exports?t.exports=lu:this.d3=lu}()},{}],98:[function(e,t,n){"use strict";function r(e,t){this.point=e,this.index=t}function i(e,t){for(var n=e.point,r=t.point,i=n.length,s=0;s<i;++s){var o=r[s]-n[s];if(o)return o}return 0}function s(e,t,n){if(1===e)return n?[[-1,0]]:[];var r=t.map(function(e,t){return[e[0],t]});r.sort(function(e,t){return e[0]-t[0]});for(var i=new Array(e-1),s=1;s<e;++s){var o=r[s-1],u=r[s];i[s-1]=[o[1],u[1]]}return n&&i.push([-1,i[0][1]],[i[e-1][1],-1]),i}function o(e,t){var n=e.length;if(0===n)return[];var o=e[0].length;if(o<1)return[];if(1===o)return s(n,e,t);for(var f=new Array(n),c=1,h=0;h<n;++h){for(var p=e[h],d=new Array(o+1),v=0,m=0;m<o;++m){var g=p[m];d[m]=g,v+=g*g}d[o]=v,f[h]=new r(d,h),c=Math.max(v,c)}a(f,i),n=f.length;for(var y=new Array(n+o+1),b=new Array(n+o+1),w=(o+1)*(o+1)*c,E=new Array(o+1),h=0;h<=o;++h)E[h]=0;E[o]=w,y[0]=E.slice(),b[0]=-1;for(var h=0;h<=o;++h){var d=E.slice();d[h]=1,y[h+1]=d,b[h+1]=-1}for(var h=0;h<n;++h){var S=f[h];y[h+o+1]=S.point,b[h+o+1]=S.index}var x=u(y,!1);if(x=t?x.filter(function(e){for(var t=0,n=0;n<=o;++n){var r=b[e[n]];if(r<0&&++t>=2)return!1;e[n]=r}return!0}):x.filter(function(e){for(var t=0;t<=o;++t){var n=b[e[t]];if(n<0)return!1;e[t]=n}return!0}),1&o)for(var h=0;h<x.length;++h){var S=x[h],d=S[0];S[0]=S[1],S[1]=d}return x}var u=e("incremental-convex-hull"),a=e("uniq");t.exports=o},{"incremental-convex-hull":259,uniq:504}],99:[function(e,t,n){(function(e){function n(e,t){return p[0]=e,p[1]=t,h[0]}function r(e){return h[0]=e,p[0]}function i(e){return h[0]=e,p[1]}function s(e,t){return p[1]=e,p[0]=t,h[0]}function o(e){return h[0]=e,p[1]}function u(e){return h[0]=e,p[0]}function a(e,t){return d.writeUInt32LE(e,0,!0),d.writeUInt32LE(t,4,!0),d.readDoubleLE(0,!0)}function f(e){return d.writeDoubleLE(e,0,!0),d.readUInt32LE(0,!0)}function l(e){return d.writeDoubleLE(e,0,!0),d.readUInt32LE(4,!0)}var c=!1;if("undefined"!=typeof Float64Array){var h=new Float64Array(1),p=new Uint32Array(h.buffer);h[0]=1,c=!0,1072693248===p[1]?(t.exports=function(e){return h[0]=e,[p[0],p[1]]},t.exports.pack=n,t.exports.lo=r,t.exports.hi=i):1072693248===p[0]?(t.exports=function(e){return h[0]=e,[p[1],p[0]]},t.exports.pack=s,t.exports.lo=o,t.exports.hi=u):c=!1}if(!c){var d=new e(8);t.exports=function(e){return d.writeDoubleLE(e,0,!0),[d.readUInt32LE(0,!0),d.readUInt32LE(4,!0)]},t.exports.pack=a,t.exports.lo=f,t.exports.hi=l}t.exports.sign=function(e){return t.exports.hi(e)>>>31},t.exports.exponent=function(e){var n=t.exports.hi(e);return(n<<1>>>21)-1023},t.exports.fraction=function(e){var n=t.exports.lo(e),r=t.exports.hi(e),i=1048575&r;return 2146435072&r&&(i+=1<<20),[n,i]},t.exports.denormalized=function(e){var n=t.exports.hi(e);return!(2146435072&n)}}).call(this,e("buffer").Buffer)},{buffer:66}],100:[function(e,t,n){"use strict";function r(e,t,n){var i=0|e[n];if(i<=0)return[];var s,o=new Array(i);if(n===e.length-1)for(s=0;s<i;++s)o[s]=t;else for(s=0;s<i;++s)o[s]=r(e,t,n+1);return o}function i(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}function s(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return i(0|e,t);break;case"object":if("number"==typeof e.length)return r(e,t,0)}return[]}t.exports=s},{}],101:[function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r=t&&t.length,s=r?t[0]*n:e.length,u=i(e,0,s,n,!0),a=[];if(!u)return a;var f,l,h,p,d,v,m;if(r&&(u=c(e,t,u,n)),e.length>80*n){f=h=e[0],l=p=e[1];for(var g=n;g<s;g+=n)d=e[g],v=e[g+1],d<f&&(f=d),v<l&&(l=v),d>h&&(h=d),v>p&&(p=v);m=Math.max(h-f,p-l)}return o(u,a,n,f,l,m),a}function i(e,t,n,r,i){var s,o;if(i===M(e,t,n,r)>0)for(s=t;s<n;s+=r)o=L(s,e[s],e[s+1],o);else for(s=n-r;s>=t;s-=r)o=L(s,e[s],e[s+1],o);return o&&S(o,o.next)&&(A(o),o=o.next),o}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do if(n=!1,r.steiner||!S(r,r.next)&&0!==E(r.prev,r,r.next))r=r.next;else{if(A(r),r=t=r.prev,r===r.next)return null;n=!0}while(n||r!==t);return t}function o(e,t,n,r,i,c,h){if(e){!h&&c&&v(e,r,i,c);for(var p,d,m=e;e.prev!==e.next;)if(p=e.prev,d=e.next,c?a(e,r,i,c):u(e))t.push(p.i/n),t.push(e.i/n),t.push(d.i/n),A(e),e=d.next,m=d.next;else if(e=d,e===m){h?1===h?(e=f(e,t,n),o(e,t,n,r,i,c,2)):2===h&&l(e,t,n,r,i,c):o(s(e),t,n,r,i,c,1);break}}}function u(e){var t=e.prev,n=e,r=e.next;if(E(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(b(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&E(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function a(e,t,n,r){var i=e.prev,s=e,o=e.next;if(E(i,s,o)>=0)return!1;for(var u=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,a=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,f=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,l=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,c=g(u,a,t,n,r),h=g(f,l,t,n,r),p=e.nextZ;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&b(i.x,i.y,s.x,s.y,o.x,o.y,p.x,p.y)&&E(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=e.prevZ;p&&p.z>=c;){if(p!==e.prev&&p!==e.next&&b(i.x,i.y,s.x,s.y,o.x,o.y,p.x,p.y)&&E(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function f(e,t,n){var r=e;do{var i=r.prev,s=r.next.next;!S(i,s)&&x(i,r,r.next,s)&&N(i,s)&&N(s,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(s.i/n),A(r),A(r.next),r=e=s),r=r.next}while(r!==e);return r}function l(e,t,n,r,i,u){var a=e;do{for(var f=a.next.next;f!==a.prev;){if(a.i!==f.i&&w(a,f)){var l=k(a,f);return a=s(a,a.next),l=s(l,l.next),o(a,t,n,r,i,u),void o(l,t,n,r,i,u)}f=f.next}a=a.next}while(a!==e)}function c(e,t,n,r){var o,u,a,f,l,c=[];for(o=0,u=t.length;o<u;o++)a=t[o]*r,f=o<u-1?t[o+1]*r:e.length,l=i(e,a,f,r,!1),l===l.next&&(l.steiner=!0),c.push(y(l));for(c.sort(h),o=0;o<c.length;o++)p(c[o],n),n=s(n,n.next);return n}function h(e,t){return e.x-t.x}function p(e,t){if(t=d(e,t)){var n=k(t,e);s(n,n.next)}}function d(e,t){var n,r=t,i=e.x,s=e.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y){var u=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=i&&u>o){if(o=u,u===i){if(s===r.y)return r;if(s===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n.prev;var a,f=n,l=n.x,c=n.y,h=1/0;for(r=n.next;r!==f;)i>=r.x&&r.x>=l&&b(s<c?i:o,s,l,c,s<c?o:i,s,r.x,r.y)&&(a=Math.abs(s-r.y)/(i-r.x),(a<h||a===h&&r.x>n.x)&&N(r,e)&&(n=r,h=a)),r=r.next;return n}function v(e,t,n,r){var i=e;do null===i.z&&(i.z=g(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,m(i)}function m(e){var t,n,r,i,s,o,u,a,f=1;do{for(n=e,e=null,s=null,o=0;n;){for(o++,r=n,u=0,t=0;t<f&&(u++,r=r.nextZ,r);t++);for(a=f;u>0||a>0&&r;)0===u?(i=r,r=r.nextZ,a--):0!==a&&r?n.z<=r.z?(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;n=r}s.nextZ=null,f*=2}while(o>1);return e}function g(e,t,n,r,i){return e=32767*(e-n)/i,t=32767*(t-r)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function y(e){var t=e,n=e;do t.x<n.x&&(n=t),t=t.next;while(t!==e);return n}function b(e,t,n,r,i,s,o,u){return(i-o)*(t-u)-(e-o)*(s-u)>=0&&(e-o)*(r-u)-(n-o)*(t-u)>=0&&(n-o)*(s-u)-(i-o)*(r-u)>=0}function w(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!T(e,t)&&N(e,t)&&N(t,e)&&C(e,t)}function E(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function S(e,t){return e.x===t.x&&e.y===t.y}function x(e,t,n,r){return!!(S(e,t)&&S(n,r)||S(e,r)&&S(n,t))||E(e,t,n)>0!=E(e,t,r)>0&&E(n,r,e)>0!=E(n,r,t)>0}function T(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&x(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function N(e,t){return E(e.prev,e,e.next)<0?E(e,t,e.next)>=0&&E(e,e.prev,t)>=0:E(e,t,e.prev)<0||E(e,e.next,t)<0}function C(e,t){var n=e,r=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do n.y>s!=n.next.y>s&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function k(e,t){var n=new O(e.i,e.x,e.y),r=new O(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function L(e,t,n,r){var i=new O(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function A(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function O(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(e,t,n,r){for(var i=0,s=t,o=n-r;s<n;s+=r)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}t.exports=r,r.deviation=function(e,t,n,r){var i=t&&t.length,s=i?t[0]*n:e.length,o=Math.abs(M(e,0,s,n));if(i)for(var u=0,a=t.length;u<a;u++){var f=t[u]*n,l=u<a-1?t[u+1]*n:e.length;o-=Math.abs(M(e,f,l,n))}var c=0;for(u=0;u<r.length;u+=3){var h=r[u]*n,p=r[u+1]*n,d=r[u+2]*n;c+=Math.abs((e[h]-e[d])*(e[p+1]-e[h+1])-(e[h]-e[p])*(e[d+1]-e[h+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var o=0;o<t;o++)n.vertices.push(e[i][s][o]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},{}],102:[function(e,t,n){"use strict";function r(e,t){var n=e.length;if("number"!=typeof t){t=0;for(var r=0;r<n;++r){var s=e[r];t=Math.max(t,s[0],s[1])}t=(0|t)+1}t|=0;for(var o=new Array(t),r=0;r<t;++r)o[r]=[];for(var r=0;r<n;++r){var s=e[r];o[s[0]].push(s[1]),o[s[1]].push(s[0])}for(var u=0;u<t;++u)i(o[u],function(e,t){return e-t});return o}t.exports=r;var i=e("uniq")},{uniq:504}],103:[function(n,r,i){(function(s,o){!function(n,s){"object"==typeof i&&"undefined"!=typeof r?r.exports=s():"function"==typeof e&&e.amd?e(s):n.ES6Promise=s()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function r(e){Q=e}function i(e){G=e}function u(){return function(){return s.nextTick(p)}}function f(){return function(){K(p)}}function l(){var e=0,t=new et(p),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=p,function(){return e.port2.postMessage(0)}}function h(){var e=setTimeout;return function(){return e(p,1)}}function p(){for(var e=0;e<J;e+=2){var t=rt[e],n=rt[e+1];t(n),rt[e]=void 0,rt[e+1]=void 0}J=0}function d(){try{var e=n,t=e("vertx");return K=t.runOnLoop||t.runOnContext,f()}catch(e){return h()}}function v(e,t){var n=arguments,r=this,i=new this.constructor(g);void 0===i[st]&&B(i);var s=r._state;return s?!function(){var e=n[s-1];G(function(){return D(s,i,e,r._result)})}():A(r,i,e,t),i}function m(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return N(n,e),n}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(e){return ft.error=e,ft}}function E(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function S(e,t,n){G(function(e){var r=!1,i=E(n,t,function(n){r||(r=!0,t!==n?N(e,n):k(e,n))},function(t){r||(r=!0,L(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,L(e,i))},e)}function x(e,t){t._state===ut?k(e,t._result):t._state===at?L(e,t._result):A(t,void 0,function(t){return N(e,t)},function(t){return L(e,t)})}function T(e,n,r){n.constructor===e.constructor&&r===v&&n.constructor.resolve===m?x(e,n):r===ft?L(e,ft.error):void 0===r?k(e,n):t(r)?S(e,n,r):k(e,n)}function N(t,n){t===n?L(t,y()):e(n)?T(t,n,w(n)):k(t,n)}function C(e){e._onerror&&e._onerror(e._result),O(e)}function k(e,t){e._state===ot&&(e._result=t,e._state=ut,0!==e._subscribers.length&&G(O,e))}function L(e,t){e._state===ot&&(e._state=at,e._result=t,G(C,e))}function A(e,t,n,r){var i=e._subscribers,s=i.length;e._onerror=null,i[s]=t,i[s+ut]=n,i[s+at]=r,0===s&&e._state&&G(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,s=e._result,o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?D(n,r,i,s):i(s);e._subscribers.length=0}}function M(){this.error=null}function _(e,t){try{return e(t)}catch(e){return lt.error=e,lt}}function D(e,n,r,i){var s=t(r),o=void 0,u=void 0,a=void 0,f=void 0;if(s){if(o=_(r,i),o===lt?(f=!0,u=o.error,o=null):a=!0,n===o)return void L(n,b())}else o=i,a=!0;n._state!==ot||(s&&a?N(n,o):f?L(n,u):e===ut?k(n,o):e===at&&L(n,o))}function P(e,t){try{t(function(t){N(e,t)},function(t){L(e,t)})}catch(t){L(e,t)}}function H(){return ct++}function B(e){e[st]=ct++,e._state=void 0,e._result=void 0,e._subscribers=[]}function j(e,t){this._instanceConstructor=e,this.promise=new e(g),this.promise[st]||B(this.promise),$(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&k(this.promise,this._result))):L(this.promise,F())}function F(){return new Error("Array Methods must be provided an Array")}function I(e){return(new j(this,e)).promise}function q(e){var t=this;return new t($(e)?function(n,r){for(var i=e.length,s=0;s<i;s++)t.resolve(e[s]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function R(e){var t=this,n=new t(g);return L(n,e),n}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function W(e){this[st]=H(),this._result=this._state=void 0,this._subscribers=[],g!==e&&("function"!=typeof e&&U(),this instanceof W?P(this,e):z())}function X(){var e=void 0;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=W}var V=void 0;V=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var $=V,J=0,K=void 0,Q=void 0,G=function(e,t){rt[J]=e,rt[J+1]=t,J+=2,2===J&&(Q?Q(p):it())},Y="undefined"!=typeof window?window:void 0,Z=Y||{},et=Z.MutationObserver||Z.WebKitMutationObserver,tt="undefined"==typeof self&&"undefined"!=typeof s&&"[object process]"==={}.toString.call(s),nt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,rt=new Array(1e3),it=void 0;it=tt?u():et?l():nt?c():void 0===Y&&"function"==typeof n?d():h();var st=Math.random().toString(36).substring(16),ot=void 0,ut=1,at=2,ft=new M,lt=new M,ct=0;return j.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ot&&n<e;n++)this._eachEntry(t[n],n)},j.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===m){var i=w(e);if(i===v&&e._state!==ot)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===W){var s=new n(g);T(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},j.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ot&&(this._remaining--,e===at?L(r,n):this._result[t]=n),0===this._remaining&&k(r,this._result)},j.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){return n._settledAt(ut,t,e)},function(e){return n._settledAt(at,t,e)})},W.all=I,W.race=q,W.resolve=m,W.reject=R,W._setScheduler=r,W._setAsap=i,W._asap=G,W.prototype={constructor:W,then:v,"catch":function(e){return this.then(null,e)}},X(),W.polyfill=X,W.Promise=W,W})}).call(this,n("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:451}],104:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,a,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),f=n.slice(),r=f.length,a=0;a<r;a++)f[a].apply(this,s);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],105:[function(e,t,n){"use strict";function r(e,t,n){var r=t||0,i=n||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[r*e[12]+e[8],r*e[13]+e[9],r*e[14]+e[10],r*e[15]+e[11]],[i*e[12]-e[8],i*e[13]-e[9],i*e[14]-e[10],i*e[15]-e[11]]]}t.exports=r},{}],106:[function(e,t,n){"use strict";function r(e){for(var t,n=e.length,r=0;r<n;r++)if(t=e.charCodeAt(r),(t<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}t.exports=function(e){var t=typeof e;if("string"===t){var n=e;if(e=+e,0===e&&r(n))return!1}else if("number"!==t)return!1;return e-e<1}},{}],107:[function(e,t,n){"use strict";function r(e){return new Function("f","var p = (f && f.properties || {}); return "+i(e))}function i(e){if(!e)return"true";var t=e[0];if(e.length<=1)return"any"===t?"false":"true";var n="=="===t?o(e[1],e[2],"===",!1):"!="===t?o(e[1],e[2],"!==",!1):"<"===t||">"===t||"<="===t||">="===t?o(e[1],e[2],t,!0):"any"===t?u(e.slice(1),"||"):"all"===t?u(e.slice(1),"&&"):"none"===t?l(u(e.slice(1),"||")):"in"===t?a(e[1],e.slice(2)):"!in"===t?l(a(e[1],e.slice(2))):"has"===t?f(e[1]):"!has"===t?l(f([e[1]])):"true";return"("+n+")"}function s(e){return"$type"===e?"f.type":"$id"===e?"f.id":"p["+JSON.stringify(e)+"]"}function o(e,t,n,r){var i=s(e),o="$type"===e?h.indexOf(t):JSON.stringify(t);return(r?"typeof "+i+"=== typeof "+o+"&&":"")+i+n+o}function u(e,t){return e.map(i).join(t)}function a(e,t){"$type"===e&&(t=t.map(function(e){return h.indexOf(e)}));var n=JSON.stringify(t.sort(c)),r=s(e);return t.length<=200?n+".indexOf("+r+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+r+", "+n+",0,"+(t.length-1)+")"}function f(e){return JSON.stringify(e)+" in p"}function l(e){return"!("+e+")"}function c(e,t){return e<t?-1:e>t?1:0}t.exports=r;var h=["Unknown","Point","LineString","Polygon"]},{}],108:[function(e,t,n){"use strict";function r(e,t,n){return Math.min(t,Math.max(e,n))}function i(e,t,n){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var r=0;r<this.dimension;++r)this.bounds[0][r]=-1/0,this.bounds[1][r]=1/0;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[n],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}function s(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function o(e,t,n){switch(arguments.length){case 0:return new i([0],[0],0);case 1:if("number"==typeof e){var r=s(e);return new i(r,r,0)}return new i(e,s(e.length),0);case 2:if("number"==typeof t){var r=s(e.length);return new i(e,r,+t)}n=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new i(e,t,n)}}t.exports=o;var u=e("cubic-hermite"),a=e("binary-search-bounds"),f=i.prototype;f.flush=function(e){var t=a.gt(this._time,e)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},f.curve=function(e){var t=this._time,n=t.length,i=a.le(t,e),s=this._scratch[0],o=this._state,f=this._velocity,c=this.dimension,h=this.bounds;if(i<0)for(var p=c-1,d=0;d<c;++d,--p)s[d]=o[p];else if(i>=n-1)for(var p=o.length-1,v=e-t[n-1],d=0;d<c;++d,--p)s[d]=o[p]+v*f[p];else{for(var p=c*(i+1)-1,m=t[i],g=t[i+1],y=g-m||1,b=this._scratch[1],w=this._scratch[2],E=this._scratch[3],S=this._scratch[4],x=!0,d=0;d<c;++d,--p)b[d]=o[p],E[d]=f[p]*y,w[d]=o[p+c],S[d]=f[p+c]*y,x=x&&b[d]===w[d]&&E[d]===S[d]&&0===E[d];if(x)for(var d=0;d<c;++d)s[d]=b[d];else u(b,E,w,S,(e-m)/y,s)}for(var T=h[0],N=h[1],d=0;d<c;++d)s[d]=r(T[d],N[d],s[d]);return s},f.dcurve=function(e){var t=this._time,n=t.length,r=a.le(t,e),i=this._scratch[0],s=this._state,o=this._velocity,f=this.dimension;if(r>=n-1)for(var c=s.length-1,h=(e-t[n-1],0);h<f;++h,--c)i[h]=o[c];else{for(var c=f*(r+1)-1,p=t[r],d=t[r+1],v=d-p||1,m=this._scratch[1],g=this._scratch[2],y=this._scratch[3],b=this._scratch[4],w=!0,h=0;h<f;++h,--c)m[h]=s[c],y[h]=o[c]*v,g[h]=s[c+f],b[h]=o[c+f]*v,w=w&&m[h]===g[h]&&y[h]===b[h]&&0===y[h];if(w)for(var h=0;h<f;++h)i[h]=0;else{u.derivative(m,y,g,b,(e-p)/v,i);for(var h=0;h<f;++h)i[h]/=v}}return i},f.lastT=function(){var e=this._time;return e[e.length-1]},f.stable=function(){for(var e=this._velocity,t=e.length,n=this.dimension-1;n>=0;--n)if(e[--t])return!1;return!0},f.jump=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var i=this._state,s=this._velocity,o=i.length-this.dimension,u=this.bounds,a=u[0],f=u[1];this._time.push(t,e);for(var l=0;l<2;++l)for(var c=0;c<n;++c)i.push(i[o++]),s.push(0);this._time.push(e);for(var c=n;c>0;--c)i.push(r(a[c-1],f[c-1],arguments[c])),s.push(0)}},f.push=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var i=this._state,s=this._velocity,o=i.length-this.dimension,u=e-t,a=this.bounds,f=a[0],l=a[1],c=u>1e-6?1/u:0;this._time.push(e);for(var h=n;h>0;--h){var p=r(f[h-1],l[h-1],arguments[h]);i.push(p),s.push((p-i[o++])*c)}}},f.set=function(e){var t=this.dimension;if(!(e<this.lastT()||arguments.length!==t+1)){var n=this._state,i=this._velocity,s=this.bounds,o=s[0],u=s[1];this._time.push(e);for(var a=t;a>0;--a)n.push(r(o[a-1],u[a-1],arguments[a])),i.push(0)}},f.move=function(e){var t=this.lastT(),n=this.dimension;if(!(e<=t||arguments.length!==n+1)){var i=this._state,s=this._velocity,o=i.length-this.dimension,u=this.bounds,a=u[0],f=u[1],l=e-t,c=l>1e-6?1/l:0;this._time.push(e);for(var h=n;h>0;--h){var p=arguments[h];i.push(r(a[h-1],f[h-1],i[o++]+p)),s.push(p*c)}}},f.idle=function(e){var t=this.lastT();if(!(e<t)){var n=this.dimension,i=this._state,s=this._velocity,o=i.length-n,u=this.bounds,a=u[0],f=u[1],l=e-t;this._time.push(e);for(var c=n-1;c>=0;--c)i.push(r(a[c],f[c],i[o]+l*s[o])),s.push(0),o+=1}}},{"binary-search-bounds":55,"cubic-hermite":92}],109:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){this._color=e,this.key=t,this.value=n,this.left=r,this.right=i,this._count=s}function i(e){return new r(e._color,e.key,e.value,e.left,e.right,e._count)}function s(e,t){return new r(e,t.key,t.value,t.left,t.right,t._count)}function o(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function u(e,t){this._compare=e,this.root=t}function a(e,t){if(t.left){var n=a(e,t.left);if(n)return n}var n=e(t.key,t.value);return n?n:t.right?a(e,t.right):void 0}function f(e,t,n,r){var i=t(e,r.key);if(i<=0){if(r.left){var s=f(e,t,n,r.left);if(s)return s}var s=n(r.key,r.value);if(s)return s}if(r.right)return f(e,t,n,r.right)}function l(e,t,n,r,i){var s,o=n(e,i.key),u=n(t,i.key);if(o<=0){if(i.left&&(s=l(e,t,n,r,i.left)))return s;if(u>0&&(s=r(i.key,i.value)))return s}if(u>0&&i.right)return l(e,t,n,r,i.right)}function c(e,t){this.tree=e,this._stack=t}function h(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function p(e){for(var t,n,r,u,a=e.length-1;a>=0;--a){if(t=e[a],0===a)return void (t._color=g);if(n=e[a-1],n.left===t){if(r=n.right,r.right&&r.right._color===m){if(r=n.right=i(r),u=r.right=i(r.right),n.right=r.left,r.left=n,r.right=u,r._color=n._color,t._color=g,n._color=g,u._color=g,o(n),o(r),a>1){var f=e[a-2];f.left===n?f.left=r:f.right=r}return void (e[a-1]=r)}if(r.left&&r.left._color===m){if(r=n.right=i(r),u=r.left=i(r.left),n.right=u.left,r.left=u.right,u.left=n,u.right=r,u._color=n._color,n._color=g,r._color=g,t._color=g,o(n),o(r),o(u),a>1){var f=e[a-2];f.left===n?f.left=u:f.right=u}return void (e[a-1]=u)}if(r._color===g){if(n._color===m)return n._color=g,void (n.right=s(m,r));n.right=s(m,r);continue}if(r=i(r),n.right=r.left,r.left=n,r._color=n._color,n._color=m,o(n),o(r),a>1){var f=e[a-2];f.left===n?f.left=r:f.right=r}e[a-1]=r,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}else{if(r=n.left,r.left&&r.left._color===m){if(r=n.left=i(r),u=r.left=i(r.left),n.left=r.right,r.right=n,r.left=u,r._color=n._color,t._color=g,n._color=g,u._color=g,o(n),o(r),a>1){var f=e[a-2];f.right===n?f.right=r:f.left=r}return void (e[a-1]=r)}if(r.right&&r.right._color===m){if(r=n.left=i(r),u=r.right=i(r.right),n.left=u.right,r.right=u.left,u.right=n,u.left=r,u._color=n._color,n._color=g,r._color=g,t._color=g,o(n),o(r),o(u),a>1){var f=e[a-2];f.right===n?f.right=u:f.left=u}return void (e[a-1]=u)}if(r._color===g){if(n._color===m)return n._color=g,void (n.left=s(m,r));n.left=s(m,r);continue}if(r=i(r),n.left=r.right,r.right=n,r._color=n._color,n._color=m,o(n),o(r),a>1){var f=e[a-2];f.right===n?f.right=r:f.left=r}e[a-1]=r,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}}}function d(e,t){return e<t?-1:e>t?1:0}function v(e){return new u(e||d,null)}t.exports=v;var m=0,g=1,y=u.prototype;Object.defineProperty(y,"keys",{get:function(){var e=[];return this.forEach(function(t,n){e.push(t)}),e}}),Object.defineProperty(y,"values",{get:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e}}),Object.defineProperty(y,"length",{get:function(){return this.root?this.root._count:0}}),y.insert=function(e,t){for(var n=this._compare,i=this.root,a=[],f=[];i;){var l=n(e,i.key);a.push(i),f.push(l),i=l<=0?i.left:i.right}a.push(new r(m,e,t,null,null,1));for(var c=a.length-2;c>=0;--c){var i=a[c];f[c]<=0?a[c]=new r(i._color,i.key,i.value,a[c+1],i.right,i._count+1):a[c]=new r(i._color,i.key,i.value,i.left,a[c+1],i._count+1)}for(var c=a.length-1;c>1;--c){var h=a[c-1],i=a[c];if(h._color===g||i._color===g)break;var p=a[c-2];if(p.left===h)if(h.left===i){var d=p.right;if(!d||d._color!==m){if(p._color=m,p.left=h.right,h._color=g,h.right=p,a[c-2]=h,a[c-1]=i,o(p),o(h),c>=3){var v=a[c-3];v.left===p?v.left=h:v.right=h}break}h._color=g,p.right=s(g,d),p._color=m,c-=1}else{var d=p.right;if(!d||d._color!==m){if(h.right=i.left,p._color=m,p.left=i.right,i._color=g,i.left=h,i.right=p,a[c-2]=i,a[c-1]=h,o(p),o(h),o(i),c>=3){var v=a[c-3];v.left===p?v.left=i:v.right=i}break}h._color=g,p.right=s(g,d),p._color=m,c-=1}else if(h.right===i){var d=p.left;if(!d||d._color!==m){if(p._color=m,p.right=h.left,h._color=g,h.left=p,a[c-2]=h,a[c-1]=i,o(p),o(h),c>=3){var v=a[c-3];v.right===p?v.right=h:v.left=h}break}h._color=g,p.left=s(g,d),p._color=m,c-=1}else{var d=p.left;if(!d||d._color!==m){if(h.left=i.right,p._color=m,p.right=i.left,i._color=g,i.right=h,i.left=p,a[c-2]=i,a[c-1]=h,o(p),o(h),o(i),c>=3){var v=a[c-3];v.right===p?v.right=i:v.left=i}break}h._color=g,p.left=s(g,d),p._color=m,c-=1}}return a[0]._color=g,new u(n,a[0])},y.forEach=function(e,t,n){if(this.root)switch(arguments.length){case 1:return a(e,this.root);case 2:return f(t,this._compare,e,this.root);case 3:if(this._compare(t,n)>=0)return;return l(t,n,this._compare,e,this.root)}},Object.defineProperty(y,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new c(this,e)}}),Object.defineProperty(y,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new c(this,e)}}),y.at=function(e){if(e<0)return new c(this,[]);for(var t=this.root,n=[];;){if(n.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new c(this,n);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new c(this,[])},y.ge=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var s=t(e,n.key);r.push(n),s<=0&&(i=r.length),n=s<=0?n.left:n.right}return r.length=i,new c(this,r)},y.gt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var s=t(e,n.key);r.push(n),s<0&&(i=r.length),n=s<0?n.left:n.right}return r.length=i,new c(this,r)},y.lt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var s=t(e,n.key);r.push(n),s>0&&(i=r.length),n=s<=0?n.left:n.right}return r.length=i,new c(this,r)},y.le=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var s=t(e,n.key);r.push(n),s>=0&&(i=r.length),n=s<0?n.left:n.right}return r.length=i,new c(this,r)},y.find=function(e){for(var t=this._compare,n=this.root,r=[];n;){var i=t(e,n.key);if(r.push(n),0===i)return new c(this,r);n=i<=0?n.left:n.right}return new c(this,[])},y.remove=function(e){var t=this.find(e);return t?t.remove():this},y.get=function(e){for(var t=this._compare,n=this.root;n;){var r=t(e,n.key);if(0===r)return n.value;n=r<=0?n.left:n.right}};var b=c.prototype;Object.defineProperty(b,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(b,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),b.clone=function(){return new c(this.tree,this._stack.slice())},b.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new r(n._color,n.key,n.value,n.left,n.right,n._count);for(var i=e.length-2;i>=0;--i){var n=e[i];n.left===e[i+1]?t[i]=new r(n._color,n.key,n.value,t[i+1],n.right,n._count):t[i]=new r(n._color,n.key,n.value,n.left,t[i+1],n._count)}if(n=t[t.length-1],n.left&&n.right){var s=t.length;for(n=n.left;n.right;)t.push(n),n=n.right;var o=t[s-1];t.push(new r(n._color,o.key,o.value,n.left,n.right,n._count)),t[s-1].key=n.key,t[s-1].value=n.value;for(var i=t.length-2;i>=s;--i)n=t[i],t[i]=new r(n._color,n.key,n.value,n.left,t[i+1],n._count);t[s-1].left=t[s]}if(n=t[t.length-1],n._color===m){var a=t[t.length-2];a.left===n?a.left=null:a.right===n&&(a.right=null),t.pop();for(var i=0;i<t.length;++i)t[i]._count--;return new u(this.tree._compare,t[0])}if(n.left||n.right){n.left?h(n,n.left):n.right&&h(n,n.right),n._color=g;for(var i=0;i<t.length-1;++i)t[i]._count--;return new u(this.tree._compare,t[0])}if(1===t.length)return new u(this.tree._compare,null);for(var i=0;i<t.length;++i)t[i]._count--;var f=t[t.length-2];return p(t),f.left===n?f.left=null:f.right=null,new u(this.tree._compare,t[0])},Object.defineProperty(b,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(b,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(b,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var n=this.tree.root;return n?n._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var r=t.length-2;r>=0;--r)t[r+1]===t[r].right&&(++e,t[r].left&&(e+=t[r].left._count));return e},enumerable:!0}),b.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(b,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),b.update=function(e){var t=this._stack;if(0===t.length)throw new Error("Can't update empty node!");var n=new Array(t.length),i=t[t.length-1];n[n.length-1]=new r(i._color,i.key,e,i.left,i.right,i._count);for(var s=t.length-2;s>=0;--s)i=t[s],i.left===t[s+1]?n[s]=new r(i._color,i.key,i.value,n[s+1],i.right,i._count):n[s]=new r(i._color,i.key,i.value,i.left,n[s+1],i._count);return new u(this.tree._compare,n[0])},b.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(b,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}})},{}],110:[function(e,t,n){function r(e){if(e<0)return Number("0/0");for(var t=u[0],n=u.length-1;n>0;--n)t+=u[n]/(e+n);var r=e+o+.5;return.5*Math.log(2*Math.PI)+(e+.5)*Math.log(r)-r+Math.log(t)-Math.log(e)}var i=7,s=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-0.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],o=607/128,u=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-0.4919138160976202,3399464998481189e-20,4652362892704858e-20,-0.00009837447530487956,.0001580887032249125,-0.00021026444172410488,.00021743961811521265,-0.0001643181065367639,8441822398385275e-20,-0.000026190838401581408,36899182659531625e-22];t.exports=function a(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*a(1-e));if(e>100)return Math.exp(r(e));e-=1;for(var t=s[0],n=1;n<i+2;n++)t+=s[n]/(e+n);var o=e+i+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,e+.5)*Math.exp(-o)*t},t.exports.log=r},{}],111:[function(e,t,n){function r(e){if("Polygon"===e.type)return i(e.coordinates);if("MultiPolygon"===e.type){for(var t=0,n=0;n<e.coordinates.length;n++)t+=i(e.coordinates[n]);return t}return null}function i(e){var t=0;if(e&&e.length>0){t+=Math.abs(s(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(s(e[n]))}return t}function s(e){var t=0;if(e.length>2){for(var n,r,i=0;i<e.length-1;i++)n=e[i],r=e[i+1],t+=o(r[0]-n[0])*(2+Math.sin(o(n[1]))+Math.sin(o(r[1])));t=t*u.RADIUS*u.RADIUS/2}return t}function o(e){return e*Math.PI/180}var u=e("wgs84");t.exports.geometry=r,t.exports.ring=s},{wgs84:526}],112:[function(e,t,n){function r(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(i(r,t)),e;case"Feature":return e.geometry=r(e.geometry,t),e;case"Polygon":case"MultiPolygon":return s(e,t);default:return e}}function i(e,t){return function(n){return e(n,t)}}function s(e,t){return"Polygon"===e.type?e.coordinates=o(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(i(o,t))),e}function o(e,t){t=!!t,e[0]=u(e[0],!t);for(var n=1;n<e.length;n++)e[n]=u(e[n],t);return e}function u(e,t){return a(e)===t?e:e.reverse()}function a(e){return f.ring(e)>=0}var f=e("geojson-area");t.exports=r},{"geojson-area":111}],113:[function(e,t,n){"use strict";function r(e,t,n,r,o,f,l,c){if(n/=t,r/=t,l>=n&&c<=r)return e;if(l>r||c<n)return null;for(var h=[],p=0;p<e.length;p++){var d,v,m=e[p],g=m.geometry,y=m.type;if(d=m.min[o],v=m.max[o],d>=n&&v<=r)h.push(m);else if(!(d>r||v<n)){var b=1===y?i(g,n,r,o):s(g,n,r,o,f,3===y);b.length&&h.push(u(m.tags,y,b,m.id))}}return h.length?h:null}function i(e,t,n,r){for(var i=[],s=0;s<e.length;s++){var o=e[s],u=o[r];u>=t&&u<=n&&i.push(o)}return i}function s(e,t,n,r,i,s){for(var u=[],a=0;a<e.length;a++){var f,l,c,h=0,p=0,d=null,v=e[a],m=v.area,g=v.dist,y=v.outer,b=v.length,w=[];for(l=0;l<b-1;l++)f=d||v[l],d=v[l+1],h=p||f[r],p=d[r],h<t?p>n?(w.push(i(f,d,t),i(f,d,n)),s||(w=o(u,w,m,g,y))):p>=t&&w.push(i(f,d,t)):h>n?p<t?(w.push(i(f,d,n),i(f,d,t)),s||(w=o(u,w,m,g,y))):p<=n&&w.push(i(f,d,n)):(w.push(f),p<t?(w.push(i(f,d,t)),s||(w=o(u,w,m,g,y))):p>n&&(w.push(i(f,d,n)),s||(w=o(u,w,m,g,y))));f=v[b-1],h=f[r],h>=t&&h<=n&&w.push(f),c=w[w.length-1],s&&c&&(w[0][0]!==c[0]||w[0][1]!==c[1])&&w.push(w[0]),o(u,w,m,g,y)}return u}function o(e,t,n,r,i){return t.length&&(t.area=n,t.dist=r,void 0!==i&&(t.outer=i),e.push(t)),[]}t.exports=r;var u=e("./feature")},{"./feature":115}],114:[function(e,t,n){"use strict";function r(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)i(n,e.features[r],t);else"Feature"===e.type?i(n,e,t):i(n,{geometry:e},t);return n}function i(e,t,n){if(null!==t.geometry){var r,u,a,l,c=t.geometry,h=c.type,p=c.coordinates,d=t.properties,v=t.id;if("Point"===h)e.push(f(d,1,[o(p)],v));else if("MultiPoint"===h)e.push(f(d,1,s(p),v));else if("LineString"===h)e.push(f(d,2,[s(p,n)],v));else if("MultiLineString"===h||"Polygon"===h){for(a=[],r=0;r<p.length;r++)l=s(p[r],n),"Polygon"===h&&(l.outer=0===r),a.push(l);e.push(f(d,"Polygon"===h?3:2,a,v))}else if("MultiPolygon"===h){for(a=[],r=0;r<p.length;r++)for(u=0;u<p[r].length;u++)l=s(p[r][u],n),l.outer=0===u,a.push(l);e.push(f(d,3,a,v))}else{if("GeometryCollection"!==h)throw new Error("Input data is not a valid GeoJSON object.");for(r=0;r<c.geometries.length;r++)i(e,{geometry:c.geometries[r],properties:d},n)}}}function s(e,t){for(var n=[],r=0;r<e.length;r++)n.push(o(e[r]));return t&&(a(n,t),u(n)),n}function o(e){var t=Math.sin(e[1]*Math.PI/180),n=e[0]/360+.5,r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r=r<0?0:r>1?1:r,[n,r,0]}function u(e){for(var t,n,r=0,i=0,s=0;s<e.length-1;s++)t=n||e[s],n=e[s+1],r+=t[0]*n[1]-n[0]*t[1],i+=Math.abs(n[0]-t[0])+Math.abs(n[1]-t[1]);e.area=Math.abs(r/2),e.dist=i}t.exports=r;var a=e("./simplify"),f=e("./feature")},{"./feature":115,"./simplify":117}],115:[function(e,t,n){"use strict";function r(e,t,n,r){var s={id:r||null,type:t,geometry:n,tags:e||null,min:[1/0,1/0],max:[-1/0,-1/0]};return i(s),s}function i(e){var t=e.geometry,n=e.min,r=e.max;if(1===e.type)s(n,r,t);else for(var i=0;i<t.length;i++)s(n,r,t[i]);return e}function s(e,t,n){for(var r,i=0;i<n.length;i++)r=n[i],e[0]=Math.min(r[0],e[0]),t[0]=Math.max(r[0],t[0]),e[1]=Math.min(r[1],e[1]),t[1]=Math.max(r[1],t[1])}t.exports=r},{}],116:[function(e,t,n){"use strict";function r(e,t){return new i(e,t)}function i(e,t){t=this.options=a(Object.create(this.options),t);var n=t.debug;n&&console.time("preprocess data");var r=1<<t.maxZoom,i=l(e,t.tolerance/(r*t.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=p(i,t.buffer/t.extent,o),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function s(e,t,n){return 32*((1<<e)*n+t)+e}function o(e,t,n){return[n,(n-e[0])*(t[1]-e[1])/(t[0]-e[0])+e[1],1]}function u(e,t,n){return[(n-e[1])*(t[0]-e[0])/(t[1]-e[1])+e[0],n,1]}function a(e,t){for(var n in t)e[n]=t[n];return e}function f(e,t,n){var r=e.source;if(1!==r.length)return!1;var i=r[0];if(3!==i.type||i.geometry.length>1)return!1;var s=i.geometry[0].length;if(5!==s)return!1;for(var o=0;o<s;o++){var u=c.point(i.geometry[0][o],t,e.z2,e.x,e.y);if(u[0]!==-n&&u[0]!==t+n||u[1]!==-n&&u[1]!==t+n)return!1}return!0}t.exports=r;var l=e("./convert"),c=e("./transform"),h=e("./clip"),p=e("./wrap"),d=e("./tile");i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},i.prototype.splitTile=function(e,t,n,r,i,a,l){for(var c=[e,t,n,r],p=this.options,v=p.debug,m=null;c.length;){r=c.pop(),n=c.pop(),t=c.pop(),e=c.pop();var g=1<<t,y=s(t,n,r),b=this.tiles[y],w=t===p.maxZoom?0:p.tolerance/(g*p.extent);if(!b&&(v>1&&console.time("creation"),b=this.tiles[y]=d(e,g,n,r,w,t===p.maxZoom),this.tileCoords.push({z:t,x:n,y:r}),v)){v>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,b.numFeatures,b.numPoints,b.numSimplified),console.timeEnd("creation"));var E="z"+t;this.stats[E]=(this.stats[E]||0)+1,this.total++}if(b.source=e,i){if(t===p.maxZoom||t===i)continue;var S=1<<i-t;if(n!==Math.floor(a/S)||r!==Math.floor(l/S))continue}else if(t===p.indexMaxZoom||b.numPoints<=p.indexMaxPoints)continue;if(p.solidChildren||!f(b,p.extent,p.buffer)){b.source=null,v>1&&console.time("clipping");var x,T,N,C,k,L,A=.5*p.buffer/p.extent,O=.5-A,M=.5+A,_=1+A;x=T=N=C=null,k=h(e,g,n-A,n+M,0,o,b.min[0],b.max[0]),L=h(e,g,n+O,n+_,0,o,b.min[0],b.max[0]),k&&(x=h(k,g,r-A,r+M,1,u,b.min[1],b.max[1]),T=h(k,g,r+O,r+_,1,u,b.min[1],b.max[1])),L&&(N=h(L,g,r-A,r+M,1,u,b.min[1],b.max[1]),C=h(L,g,r+O,r+_,1,u,b.min[1],b.max[1])),v>1&&console.timeEnd("clipping"),e.length&&(c.push(x||[],t+1,2*n,2*r),c.push(T||[],t+1,2*n,2*r+1),c.push(N||[],t+1,2*n+1,2*r),c.push(C||[],t+1,2*n+1,2*r+1))}else i&&(m=t)}return m},i.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug,u=1<<e;t=(t%u+u)%u;var a=s(e,t,n);if(this.tiles[a])return c.tile(this.tiles[a],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,h=e,p=t,d=n;!l&&h>0;)h--,p=Math.floor(p/2),d=Math.floor(d/2),l=this.tiles[s(h,p,d)];if(!l||!l.source)return null;if(o>1&&console.log("found parent tile z%d-%d-%d",h,p,d),f(l,i,r.buffer))return c.tile(l,i);o>1&&console.time("drilling down");var v=this.splitTile(l.source,h,p,d,e,t,n);if(o>1&&console.timeEnd("drilling down"),null!==v){var m=1<<e-v;a=s(v,Math.floor(t/m),Math.floor(n/m))}return this.tiles[a]?c.tile(this.tiles[a],i):null}},{"./clip":113,"./convert":114,"./tile":118,"./transform":119,"./wrap":120}],117:[function(e,t,n){"use strict";function r(e,t){var n,r,s,o,u=t*t,a=e.length,f=0,l=a-1,c=[];for(e[f][2]=1,e[l][2]=1;l;){for(r=0,n=f+1;n<l;n++)s=i(e[n],e[f],e[l]),s>r&&(o=n,r=s);r>u?(e[o][2]=r,c.push(f),c.push(o),f=o):(l=c.pop(),f=c.pop())}}function i(e,t,n){var r=t[0],i=t[1],s=n[0],o=n[1],u=e[0],a=e[1],f=s-r,l=o-i;if(0!==f||0!==l){var c=((u-r)*f+(a-i)*l)/(f*f+l*l);c>1?(r=s,i=o):c>0&&(r+=f*c,i+=l*c)}return f=u-r,l=a-i,f*f+l*l}t.exports=r},{}],118:[function(e,t,n){"use strict";function r(e,t,n,r,s,o){for(var u={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z2:t,transformed:!1,min:[2,1],max:[-1,0]},a=0;a<e.length;a++){u.numFeatures++,i(u,e[a],s,o);var f=e[a].min,l=e[a].max;f[0]<u.min[0]&&(u.min[0]=f[0]),f[1]<u.min[1]&&(u.min[1]=f[1]),l[0]>u.max[0]&&(u.max[0]=l[0]),l[1]>u.max[1]&&(u.max[1]=l[1])}return u}function i(e,t,n,r){var i,o,u,f,l=t.geometry,c=t.type,h=[],p=n*n;if(1===c)for(i=0;i<l.length;i++)h.push(l[i]),e.numPoints++,e.numSimplified++;else for(i=0;i<l.length;i++)if(u=l[i],r||!(2===c&&u.dist<n||3===c&&u.area<p)){var d=[];for(o=0;o<u.length;o++)f=u[o],(r||f[2]>p)&&(d.push(f),e.numSimplified++),e.numPoints++;3===c&&s(d,u.outer),h.push(d)}else e.numPoints+=u.length;if(h.length){var v={geometry:h,type:c,tags:t.tags||null};null!==t.id&&(v.id=t.id),e.features.push(v)}}function s(e,t){var n=o(e);n<0===t&&e.reverse()}function o(e){for(var t,n,r=0,i=0,s=e.length,o=s-1;i<s;o=i++)t=e[i],n=e[o],r+=(n[0]-t[0])*(t[1]+n[1]);return r}t.exports=r},{}],119:[function(e,t,n){"use strict";function r(e,t){if(e.transformed)return e;var n,r,s,o=e.z2,u=e.x,a=e.y;for(n=0;n<e.features.length;n++){var f=e.features[n],l=f.geometry,c=f.type;if(1===c)for(r=0;r<l.length;r++)l[r]=i(l[r],t,o,u,a);else for(r=0;r<l.length;r++){var h=l[r];for(s=0;s<h.length;s++)h[s]=i(h[s],t,o,u,a)}}return e.transformed=!0,e}function i(e,t,n,r,i){var s=Math.round(t*(e[0]*n-r)),o=Math.round(t*(e[1]*n-i));return[s,o]}n.tile=r,n.point=i},{}],120:[function(e,t,n){"use strict";function r(e,t,n){var r=e,s=o(e,1,-1-t,t,0,n,-1,2),u=o(e,1,1-t,2+t,0,n,-1,2);return(s||u)&&(r=o(e,1,-t,1+t,0,n,-1,2)||[],s&&(r=i(s,1).concat(r)),u&&(r=r.concat(i(u,-1)))),r}function i(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],f=o.type;if(1===f)i=s(o.geometry,t);else{i=[];for(var l=0;l<o.geometry.length;l++)i.push(s(o.geometry[l],t))}n.push(u(o.tags,f,i,o.id))}return n}function s(e,t){var n=[];n.area=e.area,n.dist=e.dist;for(var r=0;r<e.length;r++)n.push([e[r][0]+t,e[r][1],e[r][2]]);return n}var o=e("./clip"),u=e("./feature");t.exports=r},{"./clip":113,"./feature":115}],121:[function(e,t,n){function r(e,t){if("string"!=typeof e)throw new TypeError("must specify type string");if(t=t||{},"undefined"==typeof document&&!t.canvas)return null;var n=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(n.width=t.width),"number"==typeof t.height&&(n.height=t.height);var r,i=t;try{var s=[e];0===e.indexOf("webgl")&&s.push("experimental-"+e);for(var o=0;o<s.length;o++)if(r=n.getContext(s[o],i))return r}catch(e){r=null}return r||null}t.exports=r},{}],122:[function(e,t,n){"use strict";function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function i(e){this.gl=e,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=l(e)}function s(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}function o(e,t,n,r,i){for(var s=e.primalOffset,o=e.primalMinor,u=e.mirrorOffset,a=e.mirrorMinor,f=r[t],l=0;l<3;++l)if(t!==l){var c=s,h=u,p=o,d=a;f&1<<l&&(c=u,h=s,p=a,d=o),c[l]=n[0][l],h[l]=n[1][l],i[l]>0?(p[l]=-1,d[l]=0):(p[l]=0,d[l]=1)}}function u(e,t){var n=new i(e);return n.update(t),n}t.exports=u;var a=e("./lib/text.js"),f=e("./lib/lines.js"),l=e("./lib/background.js"),c=e("./lib/cube.js"),h=e("./lib/ticks.js"),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),d=i.prototype;d.update=function(e){function t(t,n,r){if(r in e){var i,s=e[r],o=this[r];(t?Array.isArray(s)&&Array.isArray(s[0]):Array.isArray(s))?this[r]=i=[n(s[0]),n(s[1]),n(s[2])]:this[r]=i=[n(s),n(s),n(s)];for(var u=0;u<3;++u)if(i[u]!==o[u])return!0}return!1}e=e||{};var n,r=t.bind(this,!1,Number),i=t.bind(this,!1,Boolean),s=t.bind(this,!1,String),o=t.bind(this,!0,function(e){if(Array.isArray(e)){if(3===e.length)return[+e[0],+e[1],+e[2],1];if(4===e.length)return[+e[0],+e[1],+e[2],+e[3]]}return[0,0,0,1]}),u=!1,l=!1;if("bounds"in e)for(var c=e.bounds,p=0;p<2;++p)for(var d=0;d<3;++d)c[p][d]!==this.bounds[p][d]&&(l=!0),this.bounds[p][d]=c[p][d];if("ticks"in e){n=e.ticks,u=!0,this.autoTicks=!1;for(var p=0;p<3;++p)this.tickSpacing[p]=0}else r("tickSpacing")&&(this.autoTicks=!0,l=!0);if(this._firstInit&&("ticks"in e||"tickSpacing"in e||(this.autoTicks=!0),l=!0,u=!0,this._firstInit=!1),l&&this.autoTicks&&(n=h.create(this.bounds,this.tickSpacing),u=!0),u){for(var p=0;p<3;++p)n[p].sort(function(e,t){return e.x-t.x});h.equal(n,this.ticks)?u=!1:this.ticks=n}i("tickEnable"),s("tickFont")&&(u=!0),r("tickSize"),r("tickAngle"),r("tickPad"),o("tickColor");var v=s("labels");s("labelFont")&&(v=!0),i("labelEnable"),r("labelSize"),r("labelPad"),o("labelColor"),i("lineEnable"),i("lineMirror"),r("lineWidth"),o("lineColor"),i("lineTickEnable"),i("lineTickMirror"),r("lineTickLength"),r("lineTickWidth"),o("lineTickColor"),i("gridEnable"),r("gridWidth"),o("gridColor"),i("zeroEnable"),o("zeroLineColor"),r("zeroLineWidth"),i("backgroundEnable"),o("backgroundColor"),this._text?this._text&&(v||u)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&u&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=f(this.gl,this.bounds,this.ticks))};var v=[new s,new s,new s],m=[0,0,0],g={model:p,view:p,projection:p};d.isOpaque=function(){return!0},d.isTransparent=function(){return!1},d.drawTransparent=function(e){};var y=[0,0,0],b=[0,0,0],w=[0,0,0];d.draw=function(e){e=e||g;for(var t=this.gl,n=e.model||p,i=e.view||p,s=e.projection||p,u=this.bounds,a=c(n,i,s,u),f=a.cubeEdges,l=a.axis,h=i[12],d=i[13],E=i[14],S=i[15],T=this.pixelRatio*(s[3]*h+s[7]*d+s[11]*E+s[15]*S)/t.drawingBufferHeight,N=0;N<3;++N)this.lastCubeProps.cubeEdges[N]=f[N],this.lastCubeProps.axis[N]=l[N];for(var C=v,N=0;N<3;++N)o(v[N],N,this.bounds,f,l);for(var t=this.gl,k=m,N=0;N<3;++N)this.backgroundEnable[N]?k[N]=l[N]:k[N]=0;this._background.draw(n,i,s,u,k,this.backgroundColor),this._lines.bind(n,i,s,this);for(var N=0;N<3;++N){var L=[0,0,0];l[N]>0?L[N]=u[1][N]:L[N]=u[0][N];for(var A=0;A<2;++A){var O=(N+1+A)%3,M=(N+1+(1^A))%3;this.gridEnable[O]&&this._lines.drawGrid(O,M,this.bounds,L,this.gridColor[O],this.gridWidth[O]*this.pixelRatio)}for(var A=0;A<2;++A){var O=(N+1+A)%3,M=(N+1+(1^A))%3;this.zeroEnable[M]&&u[0][M]<=0&&u[1][M]>=0&&this._lines.drawZero(O,M,this.bounds,L,this.zeroLineColor[M],this.zeroLineWidth[M]*this.pixelRatio)}}for(var N=0;N<3;++N){this.lineEnable[N]&&this._lines.drawAxisLine(N,this.bounds,C[N].primalOffset,this.lineColor[N],this.lineWidth[N]*this.pixelRatio),this.lineMirror[N]&&this._lines.drawAxisLine(N,this.bounds,C[N].mirrorOffset,this.lineColor[N],this.lineWidth[N]*this.pixelRatio);for(var _=r(y,C[N].primalMinor),D=r(b,C[N].mirrorMinor),P=this.lineTickLength,A=0;A<3;++A){var H=T/n[5*A];_[A]*=P[A]*H,D[A]*=P[A]*H}this.lineTickEnable[N]&&this._lines.drawAxisTicks(N,C[N].primalOffset,_,this.lineTickColor[N],this.lineTickWidth[N]*this.pixelRatio),this.lineTickMirror[N]&&this._lines.drawAxisTicks(N,C[N].mirrorOffset,D,this.lineTickColor[N],this.lineTickWidth[N]*this.pixelRatio)}this._text.bind(n,i,s,this.pixelRatio);for(var N=0;N<3;++N){for(var B=C[N].primalMinor,j=r(w,C[N].primalOffset),A=0;A<3;++A)this.lineTickEnable[N]&&(j[A]+=T*B[A]*Math.max(this.lineTickLength[A],0)/n[5*A]);if(this.tickEnable[N]){for(var A=0;A<3;++A)j[A]+=T*B[A]*this.tickPad[A]/n[5*A];this._text.drawTicks(N,this.tickSize[N],this.tickAngle[N],j,this.tickColor[N])}if(this.labelEnable[N]){for(var A=0;A<3;++A)j[A]+=T*B[A]*this.labelPad[A]/n[5*A];j[N]+=.5*(u[0][N]+u[1][N]),this._text.drawLabel(N,this.labelSize[N],this.labelAngle[N],j,this.labelColor[N])}}},d.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":123,"./lib/cube.js":124,"./lib/lines.js":125,"./lib/text.js":127,"./lib/ticks.js":128}],123:[function(e,t,n){"use strict";function r(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r}function i(e){for(var t=[],n=[],i=0,a=0;a<3;++a)for(var f=(a+1)%3,l=(a+2)%3,c=[0,0,0],h=[0,0,0],p=-1;p<=1;p+=2){n.push(i,i+2,i+1,i+1,i+2,i+3),c[a]=p,h[a]=p;for(var d=-1;d<=1;d+=2){c[f]=d;for(var v=-1;v<=1;v+=2)c[l]=v,t.push(c[0],c[1],c[2],h[0],h[1],h[2]),i+=1}var m=f;f=l,l=m}var g=s(e,new Float32Array(t)),y=s(e,new Uint16Array(n),e.ELEMENT_ARRAY_BUFFER),b=o(e,[{buffer:g,type:e.FLOAT,size:3,offset:0,stride:24},{buffer:g,type:e.FLOAT,size:3,offset:12,stride:24}],y),w=u(e);return w.attributes.position.location=0,w.attributes.normal.location=1,new r(e,g,b,w)}t.exports=i;var s=e("gl-buffer"),o=e("gl-vao"),u=e("./shaders").bg,a=r.prototype;a.draw=function(e,t,n,r,i,s){for(var o=!1,u=0;u<3;++u)o=o||i[u];if(o){var a=this.gl;a.enable(a.POLYGON_OFFSET_FILL),a.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:e,view:t,projection:n,bounds:r,enable:i,colors:s},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),a.disable(a.POLYGON_OFFSET_FILL)}},a.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":126,"gl-buffer":130,"gl-vao":241}],124:[function(e,t,n){"use strict";function r(e,t,n){for(var r=0;r<4;++r){e[r]=n[12+r];for(var i=0;i<3;++i)e[r]+=t[i]*n[4*i+r]}}function i(e){for(var t=0;t<v.length;++t)if(e=a.positive(e,v[t]),e.length<3)return 0;for(var n=e[0],r=n[0]/n[3],i=n[1]/n[3],s=0,t=1;t+1<e.length;++t){var o=e[t],u=e[t+1],f=o[0]/o[3],l=o[1]/o[3],c=u[0]/u[3],h=u[1]/u[3],p=f-r,d=l-i,m=c-r,g=h-i;s+=Math.abs(p*g-d*m)}return s}function s(e,t,n,s){u(l,t,e),u(l,n,l);for(var a=0,v=0;v<2;++v){p[2]=s[v][2];for(var b=0;b<2;++b){p[1]=s[b][1];for(var w=0;w<2;++w)p[0]=s[w][0],r(c[a],p,l),a+=1}}for(var E=-1,v=0;v<8;++v){for(var S=c[v][3],x=0;x<3;++x)h[v][x]=c[v][x]/S;S<0&&(E<0?E=v:h[v][2]<h[E][2]&&(E=v))}if(E<0){E=0;for(var T=0;T<3;++T){for(var N=(T+2)%3,C=(T+1)%3,k=-1,L=-1,A=0;A<2;++A){var O=A<<T,M=O+(A<<N)+(1-A<<C),_=O+(1-A<<N)+(A<<C);f(h[O],h[M],h[_],d)<0||(A?k=1:L=1)}if(k<0||L<0)L>k&&(E|=1<<T);else{for(var A=0;A<2;++A){var O=A<<T,M=O+(A<<N)+(1-A<<C),_=O+(1-A<<N)+(A<<C),D=i([c[O],c[M],c[_],c[O+(1<<N)+(1<<C)]]);A?k=D:L=D}L>k&&(E|=1<<T)}}}for(var P=7^E,H=-1,v=0;v<8;++v)v!==E&&v!==P&&(H<0?H=v:h[H][1]>h[v][1]&&(H=v));for(var B=-1,v=0;v<3;++v){var j=H^1<<v;if(j!==E&&j!==P){B<0&&(B=j);var C=h[j];C[0]<h[B][0]&&(B=j)}}for(var F=-1,v=0;v<3;++v){var j=H^1<<v;if(j!==E&&j!==P&&j!==B){F<0&&(F=j);var C=h[j];C[0]>h[F][0]&&(F=j)}}var I=m;I[0]=I[1]=I[2]=0,I[o.log2(B^H)]=H&B,I[o.log2(H^F)]=H&F;var q=7^F;q===E||q===P?(q=7^B,I[o.log2(F^q)]=q&F):I[o.log2(B^q)]=q&B;for(var R=g,U=E,T=0;T<3;++T)U&1<<T?R[T]=-1:R[T]=1;return y}t.exports=s;var o=e("bit-twiddle"),u=e("gl-mat4/multiply"),a=(e("gl-mat4/invert"),e("split-polygon")),f=e("robust-orientation"),l=new Array(16),c=(new Array(16),new Array(8)),h=new Array(8),p=new Array(3),d=[0,0,0];!function(){for(var e=0;e<8;++e)c[e]=[1,1,1,1],h[e]=[1,1,1]}();var v=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],m=[1,1,1],g=[0,0,0],y={cubeEdges:m,axis:g}},{"bit-twiddle":56,"gl-mat4/invert":154,"gl-mat4/multiply":156,"robust-orientation":471,"split-polygon":489}],125:[function(e,t,n){"use strict";function r(e){return e[0]=e[1]=e[2]=0,e}function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(e,t,n,r,i,s,o,u){this.gl=e,this.vertBuffer=t,this.vao=n,this.shader=r,this.tickCount=i,this.tickOffset=s,this.gridCount=o,this.gridOffset=u}function o(e,t,n){var r=[],i=[0,0,0],o=[0,0,0],l=[0,0,0],c=[0,0,0];r.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var h=0;h<3;++h){for(var p=r.length/3|0,d=0;d<n[h].length;++d){var v=+n[h][d].x;r.push(v,0,1,v,1,1,v,0,-1,v,0,-1,v,1,1,v,1,-1)}var m=r.length/3|0;i[h]=p,o[h]=m-p;for(var p=r.length/3|0,g=0;g<n[h].length;++g){var v=+n[h][g].x;r.push(v,0,1,v,1,1,v,0,-1,v,0,-1,v,1,1,v,1,-1)}var m=r.length/3|0;l[h]=p,c[h]=m-p}var y=u(e,new Float32Array(r)),b=a(e,[{buffer:y,type:e.FLOAT,size:3,stride:0,offset:0}]),w=f(e);return w.attributes.position.location=0,new s(e,y,b,w,o,i,c,l)}t.exports=o;var u=e("gl-buffer"),a=e("gl-vao"),f=e("./shaders").line,l=[0,0,0],c=[0,0,0],h=[0,0,0],p=[0,0,0],d=[1,1],v=s.prototype;v.bind=function(e,t,n){this.shader.bind(),this.shader.uniforms.model=e,this.shader.uniforms.view=t,this.shader.uniforms.projection=n,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=d,this.vao.bind()},v.drawAxisLine=function(e,t,n,s,o){var u=r(c);this.shader.uniforms.majorAxis=c,u[e]=t[1][e]-t[0][e],this.shader.uniforms.minorAxis=u;var a=i(p,n);a[e]+=t[0][e],this.shader.uniforms.offset=a,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=s;var f=r(h);f[(e+2)%3]=1,this.shader.uniforms.screenAxis=f,this.vao.draw(this.gl.TRIANGLES,6);var f=r(h);f[(e+1)%3]=1,this.shader.uniforms.screenAxis=f,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(e,t,n,i,s){if(this.tickCount[e]){var o=r(l);o[e]=1,this.shader.uniforms.majorAxis=o,this.shader.uniforms.offset=t,this.shader.uniforms.minorAxis=n,this.shader.uniforms.color=i,this.shader.uniforms.lineWidth=s;var u=r(h);u[e]=1,this.shader.uniforms.screenAxis=u,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])}},v.drawGrid=function(e,t,n,s,o,u){if(this.gridCount[e]){var a=r(c);a[t]=n[1][t]-n[0][t],this.shader.uniforms.minorAxis=a;var f=i(p,s);f[t]+=n[0][t],this.shader.uniforms.offset=f;var d=r(l);d[e]=1,this.shader.uniforms.majorAxis=d;var v=r(h);v[e]=1,this.shader.uniforms.screenAxis=v,this.shader.uniforms.lineWidth=u,this.shader.uniforms.color=o,this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e])}},v.drawZero=function(e,t,n,s,o,u){var a=r(c);this.shader.uniforms.majorAxis=a,a[e]=n[1][e]-n[0][e],this.shader.uniforms.minorAxis=a;var f=i(p,s);f[e]+=n[0][e],this.shader.uniforms.offset=f;var l=r(h);l[t]=1,this.shader.uniforms.screenAxis=l,this.shader.uniforms.lineWidth=u,this.shader.uniforms.color=o,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":126,"gl-buffer":130,"gl-vao":241}],126:[function(e,t,n){"use strict";var r=e("gl-shader"),i="#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n",s="precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}";n.line=function(e){return r(e,i,s,null,[{name:"position",type:"vec3"}])};var o="#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvoid main() {  \n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n  mat2 planeXform = scale * mat2(cos(angle), sin(angle),\n                                -sin(angle), cos(angle));\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n  vec4 worldPosition = model * vec4(dataPosition, 1);\n  \n  //Compute clip position\n  vec4 viewPosition = view * worldPosition;\n  vec4 clipPosition = projection * viewPosition;\n  clipPosition /= clipPosition.w;\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec4(viewOffset, 0, 0);\n\n  //Done\n  gl_Position = clipPosition;\n}",u="precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}";n.text=function(e){return r(e,o,u,null,[{name:"position",type:"vec3"}])};var a="#define GLSLIFY 1\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  if(dot(normal, enable) > 0.0) {\n    vec3 nPosition = mix(bounds[0], bounds[1], 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n  colorChannel = abs(normal);\n}",f="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] + \n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}";n.bg=function(e){return r(e,a,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":225}],127:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){this.gl=e,this.shader=t,this.buffer=n,this.vao=r,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}function i(e,t){try{return a(e,t)}catch(e){return console.warn("error vectorizing text:",e),{cells:[],positions:[]}}}function s(e,t,n,i,s,a){var l=o(e),c=u(e,[{buffer:l,size:3}]),h=f(e);h.attributes.position.location=0;var p=new r(e,h,l,c);return p.update(t,n,i,s,a),p}t.exports=s;var o=e("gl-buffer"),u=e("gl-vao"),a=e("vectorize-text"),f=e("./shaders").text,l=window||n.global||{},c=l.__TEXT_CACHE||{};l.__TEXT_CACHE={};var h=3,p=r.prototype,d=[0,0];p.bind=function(e,t,n,r){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=e,i.view=t,i.projection=n,i.pixelScale=r,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=d},p.update=function(e,t,n,r,s){function o(e,t,n,r){var s=c[n];s||(s=c[n]={});var o=s[t];o||(o=s[t]=i(t,{triangles:!0,font:n,textAlign:"center",textBaseline:"middle"}));for(var a=(r||12)/12,f=o.positions,l=o.cells,h=0,p=l.length;h<p;++h)for(var d=l[h],v=2;v>=0;--v){var m=f[d[v]];u.push(a*m[0],-a*m[1],e)}}for(var u=(this.gl,[]),a=[0,0,0],f=[0,0,0],l=[0,0,0],p=[0,0,0],d=0;d<3;++d){l[d]=u.length/h|0,o(.5*(e[0][d]+e[1][d]),t[d],n),p[d]=(u.length/h|0)-l[d],a[d]=u.length/h|0;for(var v=0;v<r[d].length;++v)r[d][v].text&&o(r[d][v].x,r[d][v].text,r[d][v].font||s,r[d][v].fontSize||12);f[d]=(u.length/h|0)-a[d]}this.buffer.update(u),this.tickOffset=a,this.tickCount=f,this.labelOffset=l,this.labelCount=p};var v=[0,0,0];p.drawTicks=function(e,t,n,r,i){if(this.tickCount[e]){var s=v;s[0]=s[1]=s[2]=0,s[e]=1,this.shader.uniforms.axis=s,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])}};var m=[0,0,0];p.drawLabel=function(e,t,n,r,i){this.labelCount[e]&&(this.shader.uniforms.axis=m,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.vao.draw(this.gl.TRIANGLES,this.labelCount[e],this.labelOffset[e]))},p.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this,e("_process"))},{"./shaders":126,_process:451,"gl-buffer":130,"gl-vao":241,"vectorize-text":515}],128:[function(e,t,n){"use strict";function r(e,t){var n=e+"",r=n.indexOf("."),i=0;r>=0&&(i=n.length-r-1);var s=Math.pow(10,i),o=Math.round(e*t*s),u=o+"";if(u.indexOf("e")>=0)return u;var a=o/s,f=o%s;o<0?(a=0|-Math.ceil(a),f=0|-f):(a=0|Math.floor(a),f|=0);var l=""+a;if(o<0&&(l="-"+l),i){for(var c=""+f;c.length<i;)c="0"+c;return l+"."+c}return l}function i(e,t){for(var n=[],i=0;i<3;++i){for(var s=[],o=(.5*(e[0][i]+e[1][i]),0);o*t[i]<=e[1][i];++o)s.push({x:o*t[i],text:r(t[i],o)});for(var o=-1;o*t[i]>=e[0][i];--o)s.push({x:o*t[i],text:r(t[i],o)});n.push(s)}return n}function s(e,t){for(var n=0;n<3;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;++r){var i=e[n][r],s=t[n][r];if(i.x!==s.x||i.text!==s.text||i.font!==s.font||i.fontColor!==s.fontColor||i.fontSize!==s.fontSize||i.dx!==s.dx||i.dy!==s.dy)return!1}}return!0}n.create=i,n.equal=s},{}],129:[function(e,t,n){"use strict";function r(e,t,n){this.lo=e,this.hi=t,this.pixelsPerDataUnit=n}function i(e,t,n,r,i){for(var s=0;s<3;++s){for(var o=d,u=v,a=0;a<3;++a)u[a]=o[a]=n[a];u[3]=o[3]=1,u[s]+=1,c(u,u,t),u[3]<0&&(e[s]=1/0),o[s]-=1,c(o,o,t),o[3]<0&&(e[s]=1/0);var f=(o[0]/o[3]-u[0]/u[3])*r,l=(o[1]/o[3]-u[1]/u[3])*i;e[s]=.25*Math.sqrt(f*f+l*l)}return e}function s(e,t,n,r,s){var c=t.model||h,d=t.view||h,v=t.projection||h,y=e.bounds,s=s||a(c,d,v,y),b=s.axis;s.edges,f(p,d,c),f(p,v,p);for(var w=m,E=0;E<3;++E)w[E].lo=1/0,w[E].hi=-1/0,w[E].pixelsPerDataUnit=1/0;var S=o(l(p,p));l(p,p);for(var x=0;x<3;++x){var T=(x+1)%3,N=(x+2)%3,C=g;e:for(var E=0;E<2;++E){var k=[];if(b[x]<0!=!!E){C[x]=y[E][x];for(var L=0;L<2;++L){C[T]=y[L^E][T];for(var A=0;A<2;++A)C[N]=y[A^L^E][N],k.push(C.slice())}for(var L=0;L<S.length;++L){if(0===k.length)continue e;k=u.positive(k,S[L])}for(var L=0;L<k.length;++L)for(var N=k[L],O=i(g,p,N,n,r),A=0;A<3;++A)w[A].lo=Math.min(w[A].lo,N[A]),w[A].hi=Math.max(w[A].hi,N[A]),A!==x&&(w[A].pixelsPerDataUnit=Math.min(w[A].pixelsPerDataUnit,Math.abs(O[A])))}}}return w}t.exports=s;var o=e("extract-frustum-planes"),u=e("split-polygon"),a=e("./lib/cube.js"),f=e("gl-mat4/multiply"),l=e("gl-mat4/transpose"),c=e("gl-vec4/transformMat4"),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),p=new Float32Array(16),d=[0,0,0,1],v=[0,0,0,1],m=[new r(1/0,-1/0,1/0),new r(1/0,-1/0,1/0),new r(1/0,-1/0,1/0)],g=[0,0,0]},{"./lib/cube.js":124,"extract-frustum-planes":105,"gl-mat4/multiply":156,"gl-mat4/transpose":164,"gl-vec4/transformMat4":247,"split-polygon":489}],130:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.gl=e,this.type=t,this.handle=n,this.length=r,this.usage=i}function i(e,t,n,r,i,s){var o=i.length*i.BYTES_PER_ELEMENT;if(s<0)return e.bufferData(t,i,r),o;if(o+s>n)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,s,i),n}function s(e,t){for(var n=a.malloc(e.length,t),r=e.length,i=0;i<r;++i)n[i]=e[i];return n}function o(e,t){for(var n=1,r=t.length-1;r>=0;--r){if(t[r]!==n)return!1;n*=e[r]}return!0}function u(e,t,n,i){if(n=n||e.ARRAY_BUFFER,i=i||e.DYNAMIC_DRAW,n!==e.ARRAY_BUFFER&&n!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(i!==e.DYNAMIC_DRAW&&i!==e.STATIC_DRAW&&i!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var s=e.createBuffer(),o=new r(e,n,s,0,i);return o.update(t),o}var a=e("typedarray-pool"),f=e("ndarray-ops"),l=e("ndarray"),c=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],h=r.prototype;h.bind=function(){this.gl.bindBuffer(this.type,this.handle)},h.unbind=function(){this.gl.bindBuffer(this.type,null)},h.dispose=function(){this.gl.deleteBuffer(this.handle)},h.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"==typeof e&&"undefined"!=typeof e.shape){var n=e.dtype;if(c.indexOf(n)<0&&(n="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var r=gl.getExtension("OES_element_index_uint");n=r&&"uint16"!==n?"uint32":"uint16"}if(n===e.dtype&&o(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=i(this.gl,this.type,this.length,this.usage,e.data,t):this.length=i(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var u=a.malloc(e.size,n),h=l(u,e.shape);f.assign(h,e),t<0?this.length=i(this.gl,this.type,this.length,this.usage,u,t):this.length=i(this.gl,this.type,this.length,this.usage,u.subarray(0,e.size),t),a.free(u)}}else if(Array.isArray(e)){var p;p=this.type===this.gl.ELEMENT_ARRAY_BUFFER?s(e,"uint16"):s(e,"float32"),t<0?this.length=i(this.gl,this.type,this.length,this.usage,p,t):this.length=i(this.gl,this.type,this.length,this.usage,p.subarray(0,e.length),t),a.free(p)}else if("object"==typeof e&&"number"==typeof e.length)this.length=i(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");e|=0,e<=0&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}},t.exports=u},{ndarray:432,"ndarray-ops":426,"typedarray-pool":502}],131:[function(e,t,n){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],132:[function(e,t,n){var r=e("./1.0/numbers");t.exports=function(e){return r[e]}},{"./1.0/numbers":131}],133:[function(e,t,n){"use strict";function r(e,t,n,r){this.plot=e,this.shader=t,this.bufferHi=n,this.bufferLo=r,this.bounds=[1/0,1/0,-1/0,-1/0],this.numPoints=0,this.color=[0,0,0,1]}function i(e,t){var n=s(e.gl,a.vertex,a.fragment),i=o(e.gl),u=o(e.gl),f=new r(e,n,i,u);return f.update(t),e.addObject(f),f}var s=e("gl-shader"),o=e("gl-buffer"),u=e("typedarray-pool"),a=e("./lib/shaders");t.exports=i;var f=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]],l=r.prototype;l.draw=function(){var e=new Float32Array([0,0]),t=new Float32Array([0,0]),n=new Float32Array([0,0]),r=new Float32Array([0,0]),i=[1,1];return function(){var s=this.plot,o=this.shader,u=this.bounds,a=this.numPoints;if(a){var l=s.gl,c=s.dataBox,h=s.viewBox,p=s.pixelRatio,d=u[2]-u[0],v=u[3]-u[1],m=c[2]-c[0],g=c[3]-c[1],y=2*d/m,b=2*v/g,w=(u[0]-c[0]-.5*m)/d,E=(u[1]-c[1]-.5*g)/v;e[0]=y,e[1]=b,t[0]=y-e[0],t[1]=b-e[1],n[0]=w,n[1]=E,r[0]=w-n[0],r[1]=E-n[1];var S=h[2]-h[0],x=h[3]-h[1];i[0]=2*p/S,i[1]=2*p/x,o.bind(),o.uniforms.scaleHi=e,o.uniforms.scaleLo=t,o.uniforms.translateHi=n,o.uniforms.translateLo=r,o.uniforms.pixelScale=i,o.uniforms.color=this.color,this.bufferLo.bind(),o.attributes.positionLo.pointer(l.FLOAT,!1,16,0),this.bufferHi.bind(),o.attributes.positionHi.pointer(l.FLOAT,!1,16,0),o.attributes.pixelOffset.pointer(l.FLOAT,!1,16,8),l.drawArrays(l.TRIANGLES,0,a*f.length)}}}(),l.drawPick=function(e){return e},l.pick=function(){return null},l.update=function(e){e=e||{};var t,n,r,i=e.positions||[],s=e.errors||[],o=1;"lineWidth"in e&&(o=+e.lineWidth);var a=5;"capSize"in e&&(a=+e.capSize),this.color=(e.color||[0,0,0,1]).slice();var l=this.bounds=[1/0,1/0,-1/0,-1/0],c=this.numPoints=i.length>>1;for(t=0;t<c;++t)n=i[2*t],r=i[2*t+1],l[0]=Math.min(n,l[0]),l[1]=Math.min(r,l[1]),l[2]=Math.max(n,l[2]),l[3]=Math.max(r,l[3]);l[2]===l[0]&&(l[2]+=1),l[3]===l[1]&&(l[3]+=1);var h=1/(l[2]-l[0]),p=1/(l[3]-l[1]),d=l[0],v=l[1],m=u.mallocFloat64(c*f.length*4),g=u.mallocFloat32(c*f.length*4),y=u.mallocFloat32(c*f.length*4),b=0;for(t=0;t<c;++t){n=i[2*t],r=i[2*t+1];for(var w=s[4*t],E=s[4*t+1],S=s[4*t+2],x=s[4*t+3],T=0;T<f.length;++T){var N=f[T],C=N[0],k=N[1];C<0?C*=w:C>0&&(C*=E),k<0?k*=S:k>0&&(k*=x),m[b++]=h*(n-d+C),m[b++]=p*(r-v+k),m[b++]=o*N[2]+(a+o)*N[4],m[b++]=o*N[3]+(a+o)*N[5]}}for(t=0;t<m.length;t++)g[t]=m[t],y[t]=m[t]-g[t];this.bufferHi.update(g),this.bufferLo.update(y),u.free(m)},l.dispose=function(){this.plot.removeObject(this),this.shader.dispose(),this.bufferHi.dispose(),this.bufferLo.dispose()}},{"./lib/shaders":134,"gl-buffer":130,"gl-shader":225,"typedarray-pool":502}],134:[function(e,t,n){t.exports={vertex:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 positionHi;\nattribute vec2 positionLo;\nattribute vec2 pixelOffset;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo, pixelScale;\n\nvec2 project(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return (posHi + trHi) * scHi\n       + (posLo + trLo) * scHi\n       + (posHi + trHi) * scLo\n       + (posLo + trLo) * scLo;\n}\n\nvoid main() {\n  vec3 scrPosition = vec3(\n         project(scaleHi, translateHi, scaleLo, translateLo, positionHi, positionLo),\n         1);\n  gl_Position = vec4(\n    scrPosition.xy + scrPosition.z * pixelScale * pixelOffset,\n    0,\n    scrPosition.z);\n}\n",fragment:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"}},{}],135:[function(e,t,n){"use strict";function r(e,t,n,r){this.gl=e,this.shader=r,this.buffer=t,this.vao=n,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1}function i(e,t){for(var n=0;n<3;++n)e[0][n]=Math.min(e[0][n],t[n]),e[1][n]=Math.max(e[1][n],t[n])}function s(e,t,n,r){for(var i=h[r],s=0;s<i.length;++s){var o=i[s];e.push(t[0],t[1],t[2],n[0],n[1],n[2],n[3],o[0],o[1],o[2])}return i.length}function o(e){var t=e.gl,n=u(t),i=a(t,[{buffer:n,type:t.FLOAT,size:3,offset:0,stride:40},{buffer:n,type:t.FLOAT,size:4,offset:12,stride:40},{buffer:n,type:t.FLOAT,size:3,offset:28,stride:40}]),s=f(t);s.attributes.position.location=0,s.attributes.color.location=1,s.attributes.offset.location=2;var o=new r(t,n,i,s);return o.update(e),o}t.exports=o;var u=e("gl-buffer"),a=e("gl-vao"),f=e("./shaders/index"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c=r.prototype;c.isOpaque=function(){return this.opacity>=1},c.isTransparent=function(){return this.opacity<1},c.drawTransparent=c.draw=function(e){var t=this.gl,n=this.shader.uniforms;this.shader.bind();var r=n.view=e.view||l,i=n.projection=e.projection||l;n.model=e.model||l,n.clipBounds=this.clipBounds,n.opacity=this.opacity;var s=r[12],o=r[13],u=r[14],a=r[15],f=this.pixelRatio*(i[3]*s+i[7]*o+i[11]*u+i[15]*a)/t.drawingBufferHeight;this.vao.bind();for(var c=0;c<3;++c)t.lineWidth(this.lineWidth[c]),n.capSize=this.capSize[c]*f,t.drawArrays(t.LINES,this.lineOffset[c],this.lineCount[c]);this.vao.unbind()};var h=function(){for(var e=new Array(3),t=0;t<3;++t){for(var n=[],r=1;r<=2;++r)for(var i=-1;i<=1;i+=2){var s=(r+t)%3,o=[0,0,0];o[s]=i,n.push(o)}e[t]=n}return e}();c.update=function(e){e=e||{},"lineWidth"in e&&(this.lineWidth=e.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in e&&(this.capSize=e.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),"opacity"in e&&(this.opacity=e.opacity);var t=e.color||[[0,0,0],[0,0,0],[0,0,0]],n=e.position,r=e.error;if(Array.isArray(t[0])||(t=[t,t,t]),n&&r){var o=[],u=n.length,a=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var f=0;f<3;++f){this.lineOffset[f]=a;e:for(var l=0;l<u;++l){for(var c=n[l],h=0;h<3;++h)if(isNaN(c[h])||!isFinite(c[h]))continue e;var p=r[l],d=t[f];if(Array.isArray(d[0])&&(d=t[l]),3===d.length&&(d=[d[0],d[1],d[2],1]),!isNaN(p[0][f])&&!isNaN(p[1][f])){if(p[0][f]<0){var v=c.slice();v[f]+=p[0][f],o.push(c[0],c[1],c[2],d[0],d[1],d[2],d[3],0,0,0,v[0],v[1],v[2],d[0],d[1],d[2],d[3],0,0,0),i(this.bounds,v),a+=2+s(o,v,d,f)}if(p[1][f]>0){var v=c.slice();v[f]+=p[1][f],o.push(c[0],c[1],c[2],d[0],d[1],d[2],d[3],0,0,0,v[0],v[1],v[2],d[0],d[1],d[2],d[3],0,0,0),i(this.bounds,v),a+=2+s(o,v,d,f)}}}this.lineCount[f]=a-this.lineOffset[f]}this.buffer.update(o)}},c.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":136,"gl-buffer":130,"gl-vao":241}],136:[function(e,t,n){"use strict";var r=e("gl-shader"),i="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}",s="precision mediump float;\n#define GLSLIFY 1\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(fragPosition, clipBounds[0])) || any(greaterThan(fragPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = opacity * fragColor;\n}";t.exports=function(e){return r(e,i,s,null,[{name:"position",type:"vec3"},{name:"offset",type:"vec3"},{name:"color",type:"vec4"}])}},{"gl-shader":225}],137:[function(e,t,n){"use strict";function r(e){var t=e.getParameter(e.FRAMEBUFFER_BINDING),n=e.getParameter(e.RENDERBUFFER_BINDING),r=e.getParameter(e.TEXTURE_BINDING_2D);return[t,n,r]}function i(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function s(e,t){var n=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);y=new Array(n+1);for(var r=0;r<=n;++r){for(var i=new Array(n),s=0;s<r;++s)i[s]=e.COLOR_ATTACHMENT0+s;for(var s=r;s<n;++s)i[s]=e.NONE;y[r]=i}}function o(e){switch(e){case d:throw new Error("gl-fbo: Framebuffer unsupported");case v:throw new Error("gl-fbo: Framebuffer incomplete attachment");case m:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case g:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function u(e,t,n,r,i,s){if(!r)return null;var o=p(e,t,n,i,r);return o.magFilter=e.NEAREST,o.minFilter=e.NEAREST,o.mipSamples=1,o.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,s,e.TEXTURE_2D,o.handle,0),o}function a(e,t,n,r,i){var s=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,s),e.renderbufferStorage(e.RENDERBUFFER,r,t,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,s),s}function f(e){var t=r(e.gl),n=e.gl,s=e.handle=n.createFramebuffer(),f=e._shape[0],l=e._shape[1],c=e.color.length,h=e._ext,p=e._useStencil,d=e._useDepth,v=e._colorType;n.bindFramebuffer(n.FRAMEBUFFER,s);for(var m=0;m<c;++m)e.color[m]=u(n,f,l,v,n.RGBA,n.COLOR_ATTACHMENT0+m);0===c?(e._color_rb=a(n,f,l,n.RGBA4,n.COLOR_ATTACHMENT0),h&&h.drawBuffersWEBGL(y[0])):c>1&&h.drawBuffersWEBGL(y[c]);var g=n.getExtension("WEBGL_depth_texture");g?p?e.depth=u(n,f,l,g.UNSIGNED_INT_24_8_WEBGL,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):d&&(e.depth=u(n,f,l,n.UNSIGNED_SHORT,n.DEPTH_COMPONENT,n.DEPTH_ATTACHMENT)):d&&p?e._depth_rb=a(n,f,l,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):d?e._depth_rb=a(n,f,l,n.DEPTH_COMPONENT16,n.DEPTH_ATTACHMENT):p&&(e._depth_rb=a(n,f,l,n.STENCIL_INDEX,n.STENCIL_ATTACHMENT));var b=n.checkFramebufferStatus(n.FRAMEBUFFER);if(b!==n.FRAMEBUFFER_COMPLETE){e._destroyed=!0,n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(n.deleteRenderbuffer(e._depth_rb),e._depth_rb=null);for(var m=0;m<e.color.length;++m)e.color[m].dispose(),e.color[m]=null;e._color_rb&&(n.deleteRenderbuffer(e._color_rb),e._color_rb=null),i(n,t),o(b)}i(n,t)}function l(e,t,n,r,i,s,o,u){this.gl=e,this._shape=[0|t,0|n],this._destroyed=!1,this._ext=u,this.color=new Array(i);for(var a=0;a<i;++a)this.color[a]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=r,this._useDepth=s,this._useStencil=o;var l=this,c=[0|t,0|n];Object.defineProperties(c,{0:{get:function(){return l._shape[0]},set:function(e){return l.width=e}},1:{get:function(){return l._shape[1]},set:function(e){return l.height=e}}}),this._shapeVector=c,f(this)}function c(e,t,n){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]!==t||e._shape[1]!==n){var s=e.gl,u=s.getParameter(s.MAX_RENDERBUFFER_SIZE);if(t<0||t>u||n<0||n>u)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=n;for(var a=r(s),f=0;f<e.color.length;++f)e.color[f].shape=e._shape;e._color_rb&&(s.bindRenderbuffer(s.RENDERBUFFER,e._color_rb),s.renderbufferStorage(s.RENDERBUFFER,s.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(s.bindRenderbuffer(s.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&s.renderbufferStorage(s.RENDERBUFFER,s.STENCIL_INDEX,e._shape[0],e._shape[1])),s.bindFramebuffer(s.FRAMEBUFFER,e.handle);var l=s.checkFramebufferStatus(s.FRAMEBUFFER);l!==s.FRAMEBUFFER_COMPLETE&&(e.dispose(),i(s,a),o(l)),i(s,a)}}function h(e,t,n,r){d||(d=e.FRAMEBUFFER_UNSUPPORTED,v=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,m=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,g=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var i=e.getExtension("WEBGL_draw_buffers");if(!y&&i&&s(e,i),Array.isArray(t)&&(r=n,n=0|t[1],t=0|t[0]),"number"!=typeof t)throw new Error("gl-fbo: Missing shape parameter");var o=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||t>o||n<0||n>o)throw new Error("gl-fbo: Parameters are too large for FBO");r=r||{};var u=1;if("color"in r){if(u=Math.max(0|r.color,0),u<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(u>1){if(!i)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(u>e.getParameter(i.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+u+" draw buffers")}}var a=e.UNSIGNED_BYTE,f=e.getExtension("OES_texture_float");if(r.float&&u>0){if(!f)throw new Error("gl-fbo: Context does not support floating point textures");a=e.FLOAT}else r.preferFloat&&u>0&&f&&(a=e.FLOAT);var c=!0;"depth"in r&&(c=!!r.depth);var h=!1;return"stencil"in r&&(h=!!r.stencil),new l(e,t,n,a,u,c,h,i)}var p=e("gl-texture2d");t.exports=h;var d,v,m,g,y=null,b=l.prototype;Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){if(Array.isArray(e)||(e=[0|e,0|e]),2!==e.length)throw new Error("gl-fbo: Shape vector must be length 2");var t=0|e[0],n=0|e[1];return c(this,t,n),[t,n]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return e|=0,c(this,e,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return e|=0,c(this,this._shape[0],e),e},enumerable:!1}}),b.bind=function(){if(!this._destroyed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1])}},b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var e=this.gl;e.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(e.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(e.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":237}],138:[function(e,t,n){function r(e,t,n){"use strict";var r=o(t)||"of unknown name (see npm glsl-shader-name)",f="unknown type";void 0!==n&&(f=n===s.FRAGMENT_SHADER?"fragment":"vertex");for(var l=i("Error compiling %s shader %s:\n",f,r),c=i("%s%s",l,e),h=e.split("\n"),p={},d=0;d<h.length;d++){var v=h[d];if(""!==v){var m=parseInt(v.split(":")[2]);if(isNaN(m))throw new Error(i("Could not parse error: %s",v));p[m]=v}}for(var g=u(t).split("\n"),d=0;d<g.length;d++)if(p[d+3]||p[d+2]||p[d+1]){var y=g[d];if(l+=y+"\n",p[d+1]){var b=p[d+1];b=b.substr(b.split(":",3).join(":").length+1).trim(),l+=i("^^^ %s\n\n",b)}}return{"long":l.trim(),"short":c.trim()}}var i=e("sprintf-js").sprintf,s=e("gl-constants/lookup"),o=e("glsl-shader-name"),u=e("add-line-numbers");t.exports=r},{"add-line-numbers":31,"gl-constants/lookup":132,"glsl-shader-name":249,"sprintf-js":490}],139:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){this.plot=e,this.shader=t,this.pickShader=n,this.positionBuffer=r,this.weightBuffer=i,this.colorBuffer=s,this.idBuffer=o,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}function i(e,t){var n=e.gl,i=a(n,l.vertex,l.fragment),s=a(n,l.pickVertex,l.pickFragment),o=f(n),u=f(n),c=f(n),h=f(n),p=new r(e,i,s,o,u,c,h);return p.update(t),e.addObject(p),p}t.exports=i;var s=e("binary-search-bounds"),o=e("iota-array"),u=e("typedarray-pool"),a=e("gl-shader"),f=e("gl-buffer"),l=e("./lib/shaders"),c=r.prototype,h=[0,0,1,0,0,1,1,0,1,1,0,1];c.draw=function(){var e=[1,0,0,0,1,0,0,0,1];return function(){var t=this.plot,n=this.shader,r=this.bounds,i=this.numVertices;if(!(i<=0)){var s=t.gl,o=t.dataBox,u=r[2]-r[0],a=r[3]-r[1],f=o[2]-o[0],l=o[3]-o[1];e[0]=2*u/f,e[4]=2*a/l,e[6]=2*(r[0]-o[0])/f-1,e[7]=2*(r[1]-o[1])/l-1,n.bind();var c=n.uniforms;c.viewTransform=e,c.shape=this.shape;var h=n.attributes;this.positionBuffer.bind(),h.position.pointer(),this.weightBuffer.bind(),h.weight.pointer(s.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),h.color.pointer(s.UNSIGNED_BYTE,!0),s.drawArrays(s.TRIANGLES,0,i)}}}(),c.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(n){var r=this.plot,i=this.pickShader,s=this.bounds,o=this.numVertices;if(!(o<=0)){var u=r.gl,a=r.dataBox,f=s[2]-s[0],l=s[3]-s[1],c=a[2]-a[0],h=a[3]-a[1];e[0]=2*f/c,e[4]=2*l/h,e[6]=2*(s[0]-a[0])/c-1,e[7]=2*(s[1]-a[1])/h-1;for(var p=0;p<4;++p)t[p]=n>>8*p&255;this.pickOffset=n,i.bind();var d=i.uniforms;d.viewTransform=e,d.pickOffset=t,d.shape=this.shape;var v=i.attributes;return this.positionBuffer.bind(),v.position.pointer(),this.weightBuffer.bind(),v.weight.pointer(u.UNSIGNED_BYTE,!1),this.idBuffer.bind(),v.pickId.pointer(u.UNSIGNED_BYTE,!1),u.drawArrays(u.TRIANGLES,0,o),n+this.shape[0]*this.shape[1]}}}(),c.pick=function(e,t,n){var r=this.pickOffset,i=this.shape[0]*this.shape[1];if(n<r||n>=r+i)return null;var s=n-r,o=this.xData,u=this.yData;return{object:this,pointId:s,dataCoord:[o[s%this.shape[0]],u[s/this.shape[0]|0]]}},c.update=function(e){e=e||{};var t=e.shape||[0,0],n=e.x||o(t[0]),r=e.y||o(t[1]),i=e.z||new Float32Array(t[0]*t[1]);this.xData=n,this.yData=r;var a=e.colorLevels||[0],f=e.colorValues||[0,0,0,1],l=a.length,c=this.bounds,p=c[0]=n[0],d=c[1]=r[0],v=c[2]=n[n.length-1],m=c[3]=r[r.length-1],g=1/(v-p),y=1/(m-d),b=t[0],w=t[1];this.shape=[b,w];var E=(b-1)*(w-1)*(h.length>>>1);this.numVertices=E;for(var S=u.mallocUint8(4*E),x=u.mallocFloat32(2*E),T=u.mallocUint8(2*E),N=u.mallocUint32(E),C=0,k=0;k<w-1;++k)for(var L=y*(r[k]-d),A=y*(r[k+1]-d),O=0;O<b-1;++O)for(var M=g*(n[O]-p),_=g*(n[O+1]-p),D=0;D<h.length;D+=2){var P,H,B,j,F=h[D],I=h[D+1],q=(k+I)*b+(O+F),R=i[q],U=s.le(a,R);if(U<0)P=f[0],H=f[1],B=f[2],j=f[3];else if(U===l-1)P=f[4*l-4],H=f[4*l-3],B=f[4*l-2],j=f[4*l-1];else{var z=(R-a[U])/(a[U+1]-a[U]),W=1-z,X=4*U,V=4*(U+1);P=W*f[X]+z*f[V],H=W*f[X+1]+z*f[V+1],B=W*f[X+2]+z*f[V+2],j=W*f[X+3]+z*f[V+3]}S[4*C]=255*P,S[4*C+1]=255*H,S[4*C+2]=255*B,S[4*C+3]=255*j,x[2*C]=.5*M+.5*_,x[2*C+1]=.5*L+.5*A,T[2*C]=F,T[2*C+1]=I,N[C]=k*b+O,C+=1}this.positionBuffer.update(x),this.weightBuffer.update(T),this.colorBuffer.update(S),this.idBuffer.update(N),u.free(x),u.free(S),u.free(T),u.free(N)},c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":140,"binary-search-bounds":141,"gl-buffer":130,"gl-shader":225,"iota-array":262,"typedarray-pool":502}],140:[function(e,t,n){"use strict";t.exports={fragment:"precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n",vertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n",pickFragment:"precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n",pickVertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"}},{}],141:[function(e,t,n){arguments[4][74][0].apply(n,arguments)},{dup:74}],142:[function(e,t,n){n.lineVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aHi, aLo, dHi, dLo;\n\nuniform vec2 scaleHi, translateHi, scaleLo, translateLo, screenShape;\nuniform float width;\n\nvarying vec2 direction;\n\n\nvec2 project_1_0(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return (posHi + trHi) * scHi\n       + (posLo + trLo) * scHi\n       + (posHi + trHi) * scLo\n       + (posLo + trLo) * scLo;\n}\n\n\nvec2 project_2_1(vec2 scHi, vec2 scLo, vec2 posHi, vec2 posLo) {\n  return scHi * posHi\n       + scLo * posHi\n       + scHi * posLo\n       + scLo * posLo;\n}\n\nvoid main() {\n  vec2 p = project_1_0(scaleHi, translateHi, scaleLo, translateLo, aHi, aLo);\n  vec2 dir = project_2_1(scaleHi, scaleLo, dHi, dLo);\n  vec2 n = 0.5 * width * normalize(screenShape.yx * vec2(dir.y, -dir.x)) / screenShape.xy;\n  vec2 tangent = normalize(screenShape.xy * dir);\n  if(dir.x < 0.0 || (dir.x == 0.0 && dir.y < 0.0)) {\n    direction = -tangent;\n  } else {\n    direction = tangent;\n  }\n  gl_Position = vec4(p + n, 0.0, 1.0);\n}",n.lineFragment="precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nuniform vec2 screenShape;\nuniform sampler2D dashPattern;\nuniform float dashLength;\n\nvarying vec2 direction;\n\nvoid main() {\n  float t = fract(dot(direction, gl_FragCoord.xy) / dashLength);\n  vec4 pcolor = color * texture2D(dashPattern, vec2(t, 0.0)).r;\n  gl_FragColor = vec4(pcolor.rgb * pcolor.a, pcolor.a);\n}",n.mitreVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aHi, aLo;\n\nuniform vec2 scaleHi, translateHi, scaleLo, translateLo;\nuniform float radius;\n\n\nvec2 project_1_0(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return (posHi + trHi) * scHi\n       + (posLo + trLo) * scHi\n       + (posHi + trHi) * scLo\n       + (posLo + trLo) * scLo;\n}\n\n\nvoid main() {\n  vec2 p = project_1_0(scaleHi, translateHi, scaleLo, translateLo, aHi, aLo);\n  gl_Position = vec4(p, 0.0, 1.0);\n  gl_PointSize = radius;\n}",n.mitreFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  if(length(gl_PointCoord.xy - 0.5) > 0.25) {\n    discard;\n  }\n  gl_FragColor = vec4(color.rgb, color.a);\n}",n.pickVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aHi, aLo, dHi;\nattribute vec4 pick0, pick1;\n\nuniform vec2 scaleHi, translateHi, scaleLo, translateLo, screenShape;\nuniform float width;\n\nvarying vec4 pickA, pickB;\n\n\nvec2 project_1_0(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return (posHi + trHi) * scHi\n       + (posLo + trLo) * scHi\n       + (posHi + trHi) * scLo\n       + (posLo + trLo) * scLo;\n}\n\n\nvoid main() {\n  vec2 p = project_1_0(scaleHi, translateHi, scaleLo, translateLo, aHi, aLo);\n  vec2 n = width * normalize(screenShape.yx * vec2(dHi.y, -dHi.x)) / screenShape.xy;\n  gl_Position = vec4(p + n, 0, 1);\n  pickA = pick0;\n  pickB = pick1;\n}",n.pickFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 pickOffset;\n\nvarying vec4 pickA, pickB;\n\nvoid main() {\n  vec4 fragId = vec4(pickA.xyz, 0.0);\n  if(pickB.w > pickA.w) {\n    fragId.xyz = pickB.xyz;\n  }\n\n  fragId += pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  gl_FragColor = fragId / 255.0;\n}",n.fillVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aHi, aLo, dHi;\n\nuniform vec2 scaleHi, translateHi, scaleLo, translateLo, projectAxis;\nuniform float projectValue, depth;\n\n\nvec2 project_1_0(vec2 scHi, vec2 trHi, vec2 scLo, vec2 trLo, vec2 posHi, vec2 posLo) {\n  return (posHi + trHi) * scHi\n       + (posLo + trLo) * scHi\n       + (posHi + trHi) * scLo\n       + (posLo + trLo) * scLo;\n}\n\n\nvoid main() {\n  vec2 p = project_1_0(scaleHi, translateHi, scaleLo, translateLo, aHi, aLo);\n  if(dHi.y < 0.0 || (dHi.y == 0.0 && dHi.x < 0.0)) {\n    if(dot(p, projectAxis) < projectValue) {\n      p = p * (1.0 - abs(projectAxis)) + projectAxis * projectValue;\n    }\n  }\n  gl_Position = vec4(p, depth, 1);\n}",n.fillFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}"},{}],143:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o,u,a){this.plot=e,this.dashPattern=t,this.lineBufferHi=n,this.lineBufferLo=r,this.pickBuffer=i,this.lineShader=s,this.mitreShader=o,this.fillShader=u,this.pickShader=a,this.usingDashes=!1,this.bounds=[1/0,1/0,-1/0,-1/0],this.width=1,this.color=[0,0,1,1],this.fill=[!1,!1,!1,!1],this.fillColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.data=null,this.numPoints=0,this.vertCount=0,this.pickOffset=0}function i(e){return e.map(function(e){return e.slice()})}function s(e,t){var n=e.gl,i=u(n),s=u(n),f=u(n),l=a(n,[1,1]),h=o(n,c.lineVertex,c.lineFragment),p=o(n,c.mitreVertex,c.mitreFragment),d=o(n,c.fillVertex,c.fillFragment),v=o(n,c.pickVertex,c.pickFragment),m=new r(e,l,i,s,f,h,p,d,v);return e.addObject(m),m.update(t),m}t.exports=s;var o=e("gl-shader"),u=e("gl-buffer"),a=e("gl-texture2d"),f=e("ndarray"),l=e("typedarray-pool"),c=e("./lib/shaders"),h=r.prototype;h.setProjectionModel=function(){var e={scaleHi:new Float32Array([0,0]),scaleLo:new Float32Array([0,0]),translateHi:new Float32Array([0,0]),translateLo:new Float32Array([0,0]),screenShape:[0,0]};return function(){var t=this.bounds,n=this.plot.viewBox,r=this.plot.dataBox,i=t[2]-t[0],s=t[3]-t[1],o=r[2]-r[0],u=r[3]-r[1],a=n[2]-n[0],f=n[3]-n[1],l=2*i/o,c=2*s/u,h=(t[0]-r[0]-.5*o)/i,p=(t[1]-r[1]-.5*u)/s;return e.scaleHi[0]=l,e.scaleHi[1]=c,e.scaleLo[0]=l-e.scaleHi[0],e.scaleLo[1]=c-e.scaleHi[1],e.translateHi[0]=h,e.translateHi[1]=p,e.translateLo[0]=h-e.translateHi[0],e.translateLo[1]=p-e.translateHi[1],e.screenShape[0]=a,e.screenShape[1]=f,e}}(),h.setProjectionUniforms=function(e,t){e.scaleHi=t.scaleHi,e.scaleLo=t.scaleLo,e.translateHi=t.translateHi,e.translateLo=t.translateLo,e.screenShape=t.screenShape},h.draw=function(){var e=[1,0],t=[-1,0],n=[0,1],r=[0,-1];return function(){var i=this.vertCount;if(i){var s=this.setProjectionModel(),o=this.plot,u=this.width,a=o.gl,f=o.pixelRatio,l=this.color,c=this.fillShader.attributes;this.lineBufferLo.bind(),c.aLo.pointer(a.FLOAT,!1,16,0),this.lineBufferHi.bind();var h=this.fill;if(h[0]||h[1]||h[2]||h[3]){var p=this.fillShader;p.bind();var d=p.uniforms;this.setProjectionUniforms(d,s),d.depth=o.nextDepthValue(),c.aHi.pointer(a.FLOAT,!1,16,0),c.dHi.pointer(a.FLOAT,!1,16,8),a.depthMask(!0),a.enable(a.DEPTH_TEST);var v=this.fillColor;h[0]&&(d.color=v[0],d.projectAxis=t,d.projectValue=1,a.drawArrays(a.TRIANGLES,0,i)),h[1]&&(d.color=v[1],d.projectAxis=r,d.projectValue=1,a.drawArrays(a.TRIANGLES,0,i)),h[2]&&(d.color=v[2],d.projectAxis=e,d.projectValue=1,a.drawArrays(a.TRIANGLES,0,i)),h[3]&&(d.color=v[3],d.projectAxis=n,d.projectValue=1,a.drawArrays(a.TRIANGLES,0,i)),a.depthMask(!1),a.disable(a.DEPTH_TEST)}var m=this.lineShader;m.bind(),this.lineBufferLo.bind(),m.attributes.aLo.pointer(a.FLOAT,!1,16,0),m.attributes.dLo.pointer(a.FLOAT,!1,16,8),this.lineBufferHi.bind();var g=m.uniforms;this.setProjectionUniforms(g,s),g.color=l,g.width=u*f,g.dashPattern=this.dashPattern.bind(),g.dashLength=this.dashLength*f;var y=m.attributes;if(y.aHi.pointer(a.FLOAT,!1,16,0),y.dHi.pointer(a.FLOAT,!1,16,8),a.drawArrays(a.TRIANGLES,0,i),u>2&&!this.usingDashes){var b=this.mitreShader;this.lineBufferLo.bind(),b.attributes.aLo.pointer(a.FLOAT,!1,48,0),this.lineBufferHi.bind(),b.bind();var w=b.uniforms;this.setProjectionUniforms(w,s),w.color=l,w.radius=u*f,b.attributes.aHi.pointer(a.FLOAT,!1,48,0),a.drawArrays(a.POINTS,0,i/3|0)}}}}(),h.drawPick=function(){var e=[0,0,0,0];return function(t){var n=this.vertCount,r=this.numPoints;if(this.pickOffset=t,!n)return t+r;var i=this.setProjectionModel(),s=this.plot,o=this.width,u=s.gl,a=s.pickPixelRatio,f=this.pickShader,l=this.pickBuffer;e[0]=255&t,e[1]=t>>>8&255,e[2]=t>>>16&255,e[3]=t>>>24,f.bind();var c=f.uniforms;this.setProjectionUniforms(c,i),c.width=o*a,c.pickOffset=e;var h=f.attributes;return this.lineBufferHi.bind(),h.aHi.pointer(u.FLOAT,!1,16,0),h.dHi.pointer(u.FLOAT,!1,16,8),this.lineBufferLo.bind(),h.aLo.pointer(u.FLOAT,!1,16,0),l.bind(),h.pick0.pointer(u.UNSIGNED_BYTE,!1,8,0),h.pick1.pointer(u.UNSIGNED_BYTE,!1,8,4),u.drawArrays(u.TRIANGLES,0,n),t+r}}(),h.pick=function(e,t,n){var r=this.pickOffset,i=this.numPoints;if(n<r||n>=r+i)return null;var s=n-r,o=this.data;return{object:this,pointId:s,dataCoord:[o[2*s],o[2*s+1]]}},h.update=function(e){e=e||{};var t,n,r,s,o,u=this.plot.gl;this.color=(e.color||[0,0,1,1]).slice(),this.width=+(e.width||1),this.fill=(e.fill||[!1,!1,!1,!1]).slice(),this.fillColor=i(e.fillColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var c=e.dashes||[1],h=0;for(t=0;t<c.length;++t)h+=c[t];var p=l.mallocUint8(h);r=0;var d=255;for(t=0;t<c.length;++t){for(n=0;n<c[t];++n)p[r++]=d;d^=255}this.dashPattern.dispose(),this.usingDashes=c.length>1,this.dashPattern=a(u,f(p,[h,1,4],[1,0,0])),this.dashPattern.minFilter=u.NEAREST,this.dashPattern.magFilter=u.NEAREST,this.dashLength=h,l.free(p);var v=e.positions;this.data=v;var m=this.bounds;m[0]=m[1]=1/0,m[2]=m[3]=-1/0;var g=this.numPoints=v.length>>>1;if(0!==g){for(t=0;t<g;++t)s=v[2*t],o=v[2*t+1],isNaN(s)||isNaN(o)||(m[0]=Math.min(m[0],s),m[1]=Math.min(m[1],o),m[2]=Math.max(m[2],s),m[3]=Math.max(m[3],o));m[0]===m[2]&&(m[2]+=1),m[3]===m[1]&&(m[3]+=1);var y=l.mallocFloat64(24*(g-1)),b=l.mallocFloat32(24*(g-1)),w=l.mallocFloat32(24*(g-1)),E=l.mallocUint32(12*(g-1)),S=b.length,x=E.length;r=g;for(var T=0;r>1;){var N=--r;s=v[2*r],o=v[2*r+1];var C=N-1,k=v[2*C],L=v[2*C+1];if(!(isNaN(s)||isNaN(o)||isNaN(k)||isNaN(L))){T+=1,s=(s-m[0])/(m[2]-m[0]),o=(o-m[1])/(m[3]-m[1]),k=(k-m[0])/(m[2]-m[0]),L=(L-m[1])/(m[3]-m[1]);var A=k-s,O=L-o,M=N|1<<24,_=N-1,D=N,P=N-1|1<<24;y[--S]=-O,y[--S]=-A,y[--S]=o,y[--S]=s,E[--x]=M,E[--x]=_,y[--S]=O,y[--S]=A,y[--S]=L,y[--S]=k,E[--x]=D,E[--x]=P,y[--S]=-O,y[--S]=-A,y[--S]=L,y[--S]=k,E[--x]=D,E[--x]=P,y[--S]=O,y[--S]=A,y[--S]=L,y[--S]=k,E[--x]=D,E[--x]=P,y[--S]=-O,y[--S]=-A,y[--S]=o,y[--S]=s,E[--x]=M,E[--x]=_,y[--S]=O,y[--S]=A,y[--S]=o,y[--S]=s,E[--x]=M,E[--x]=_}}for(t=0;t<y.length;t++)b[t]=y[t],w[t]=y[t]-b[t];this.vertCount=6*T,this.lineBufferHi.update(b.subarray(S)),this.lineBufferLo.update(w.subarray(S)),this.pickBuffer.update(E.subarray(x)),l.free(y),l.free(b),l.free(w),l.free(E)}},h.dispose=function(){this.plot.removeObject(this),this.lineBufferLo.dispose(),this.lineBufferHi.dispose(),this.pickBuffer.dispose(),this.lineShader.dispose(),this.mitreShader.dispose(),this.fillShader.dispose(),this.pickShader.dispose(),this.dashPattern.dispose()}},{"./lib/shaders":142,"gl-buffer":130,"gl-shader":225,"gl-texture2d":237,ndarray:432,"typedarray-pool":502}],144:[function(e,t,n){var r=e("gl-shader"),i="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvoid main() {\n  vec4 projected = projection * view * model * vec4(position, 1.0);\n  vec4 tangentClip = projection * view * model * vec4(nextPosition - position, 0.0);\n  vec2 tangent = normalize(screenShape * tangentClip.xy);\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(tangent.y, -tangent.x) / screenShape;\n\n  gl_Position = vec4(projected.xy + projected.w * offset, projected.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n",s="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n",o="precision mediump float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1_0(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\n\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId/255.0, encode_float_1_0(pixelArcLength).xyz);\n}",u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];n.createShader=function(e){return r(e,i,s,null,u)},n.createPickShader=function(e){return r(e,i,o,null,u)}},{"gl-shader":225}],145:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=0;r<3;++r){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}function i(e){for(var t=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],n=0;n<3;++n)t[0][n]=Math.max(e[0][n],t[0][n]),t[1][n]=Math.min(e[1][n],t[1][n]);return t}function s(e,t,n,r){this.arcLength=e,this.position=t,this.index=n,this.dataCoordinate=r}function o(e,t,n,r,i,s){this.gl=e,this.shader=t,this.pickShader=n,this.buffer=r,this.vao=i,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=s,this.dashScale=1,this.opacity=1,this.dirty=!0,this.pixelRatio=1}function u(e){var t=e.gl||e.scene&&e.scene.gl,n=v(t);n.attributes.position.location=0,n.attributes.nextPosition.location=1,n.attributes.arcLength.location=2,n.attributes.lineWidth.location=3,n.attributes.color.location=4;var r=m(t);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;for(var i=a(t),s=f(t,[{buffer:i,size:3,offset:0,stride:48},{buffer:i,size:3,offset:12,stride:48},{buffer:i,size:1,offset:24,stride:48},{buffer:i,size:1,offset:28,stride:48},{buffer:i,size:4,offset:32,stride:48}]),u=p(new Array(1024),[256,1,4]),c=0;c<1024;++c)u.data[c]=255;var h=l(t,u);h.wrap=t.REPEAT;var d=new o(t,n,r,i,s,h);return d.update(e),d}t.exports=u;var a=e("gl-buffer"),f=e("gl-vao"),l=e("gl-texture2d"),c=e("glsl-read-float"),h=e("binary-search-bounds"),p=e("ndarray"),d=e("./lib/shaders"),v=d.createShader,m=d.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],y=o.prototype;y.isTransparent=function(){return this.opacity<1},y.isOpaque=function(){return this.opacity>=1},y.pickSlots=1,y.setPickBase=function(e){this.pickId=e},y.drawTransparent=y.draw=function(e){var t=this.gl,n=this.shader,r=this.vao;n.bind(),n.uniforms={model:e.model||g,view:e.view||g,projection:e.projection||g,clipBounds:i(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount)},y.drawPick=function(e){var t=this.gl,n=this.pickShader,r=this.vao;n.bind(),n.uniforms={model:e.model||g,view:e.view||g,projection:e.projection||g,pickId:this.pickId,clipBounds:i(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount)},y.update=function(e){var t,n;this.dirty=!0;var i=!!e.connectGaps;"dashScale"in e&&(this.dashScale=e.dashScale),"opacity"in e&&(this.opacity=+e.opacity);var s=e.position||e.positions;if(s){var o=e.color||e.colors||[0,0,0,1],u=e.lineWidth||1,a=[],f=[],l=[],c=0,d=0,v=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],m=!1;e:for(t=1;t<s.length;++t){var g=s[t-1],y=s[t];for(f.push(c),l.push(g.slice()),n=0;n<3;++n){if(isNaN(g[n])||isNaN(y[n])||!isFinite(g[n])||!isFinite(y[n])){if(!i&&a.length>0){for(var b=0;b<24;++b)a.push(a[a.length-12]);d+=2,m=!0}continue e}v[0][n]=Math.min(v[0][n],g[n],y[n]),v[1][n]=Math.max(v[1][n],g[n],y[n])}var w,E;Array.isArray(o[0])?(w=o[t-1],E=o[t]):w=E=o,3===w.length&&(w=[w[0],w[1],w[2],1]),3===E.length&&(E=[E[0],E[1],E[2],1]);var S;S=Array.isArray(u)?u[t-1]:u;var x=c;if(c+=r(g,y),m){for(n=0;n<2;++n)a.push(g[0],g[1],g[2],y[0],y[1],y[2],x,S,w[0],w[1],w[2],w[3]);d+=2,m=!1}a.push(g[0],g[1],g[2],y[0],y[1],y[2],x,S,w[0],w[1],w[2],w[3],g[0],g[1],g[2],y[0],y[1],y[2],x,-S,w[0],w[1],w[2],w[3],y[0],y[1],y[2],g[0],g[1],g[2],c,-S,E[0],E[1],E[2],E[3],y[0],y[1],y[2],g[0],g[1],g[2],c,S,E[0],E[1],E[2],E[3]),d+=4}if(this.buffer.update(a),f.push(c),l.push(s[s.length-1].slice()),this.bounds=v,this.vertexCount=d,this.points=l,this.arcLength=f,"dashes"in e){var T=e.dashes,N=T.slice();for(N.unshift(0),t=1;t<N.length;++t)N[t]=N[t-1]+N[t];var C=p(new Array(1024),[256,1,4]);for(t=0;t<256;++t){for(n=0;n<4;++n)C.set(t,0,n,0);1&h.le(N,N[N.length-1]*t/255)?C.set(t,0,0,0):C.set(t,0,0,255)}this.texture.setPixels(C)}}},y.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},y.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=c(e.value[0],e.value[1],e.value[2],0),n=h.le(this.arcLength,t);if(n<0)return null;if(n===this.arcLength.length-1)return new s(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),n);for(var r=this.points[n],i=this.points[Math.min(n+1,this.points.length-1)],o=(t-this.arcLength[n])/(this.arcLength[n+1]-this.arcLength[n]),u=1-o,a=[0,0,0],f=0;f<3;++f)a[f]=u*r[f]+o*i[f];var l=Math.min(o<.5?n:n+1,this.points.length-1);return new s(t,a,l,this.points[l])}},{"./lib/shaders":144,"binary-search-bounds":55,"gl-buffer":130,"gl-texture2d":237,"gl-vao":241,"glsl-read-float":248,ndarray:432}],146:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*s-i*r;return o?(o=1/o,e[0]=s*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null}t.exports=r},{}],147:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=l*o-u*f,h=-l*s+u*a,p=f*s-o*a,d=n*c+r*h+i*p;return d?(d=1/d,e[0]=c*d,e[1]=(-l*r+i*f)*d,e[2]=(u*r-i*o)*d,e[3]=h*d,e[4]=(l*n-i*a)*d,e[5]=(-u*n+i*s)*d,e[6]=p*d,e[7]=(-f*n+r*a)*d,e[8]=(o*n-r*s)*d,e):null}t.exports=r},{}],148:[function(e,t,n){function r(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=r},{}],149:[function(e,t,n){function r(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],150:[function(e,t,n){function r(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11],p=e[12],d=e[13],v=e[14],m=e[15],g=t*o-n*s,y=t*u-r*s,b=t*a-i*s,w=n*u-r*o,E=n*a-i*o,S=r*a-i*u,x=f*d-l*p,T=f*v-c*p,N=f*m-h*p,C=l*v-c*d,k=l*m-h*d,L=c*m-h*v;return g*L-y*k+b*C+w*N-E*T+S*x}t.exports=r},{}],151:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=r*o,c=r*u,h=i*o,p=i*u,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-c-d,e[1]=l+g,e[2]=h-m,e[3]=0,e[4]=l-g,e[5]=1-f-d,e[6]=p+v,e[7]=0,e[8]=h+m,e[9]=p-v,e[10]=1-f-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],152:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=r+r,a=i+i,f=s+s,l=r*u,c=r*a,h=r*f,p=i*a,d=i*f,v=s*f,m=o*u,g=o*a,y=o*f;return e[0]=1-(p+v),e[1]=c+y,e[2]=h-g,e[3]=0,e[4]=c-y,e[5]=1-(l+v),e[6]=d+m,e[7]=0,e[8]=h+g,e[9]=d-m,e[10]=1-(l+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}t.exports=r},{}],153:[function(e,t,n){function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],154:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(i*L-r*A-s*k)*O,e[2]=(v*x-m*S+g*E)*O,e[3]=(h*S-c*x-p*E)*O,e[4]=(a*C-o*A-f*N)*O,e[5]=(n*A-i*C+s*N)*O,e[6]=(m*w-d*x-g*b)*O,e[7]=(l*x-h*w+p*b)*O,e[8]=(o*L-u*C+f*T)*O,e[9]=(r*C-n*L-s*T)*O,e[10]=(d*S-v*w+g*y)*O,e[11]=(c*w-l*S-p*y)*O,e[12]=(u*N-o*k-a*T)*O,e[13]=(n*k-r*N+i*T)*O,e[14]=(v*b-d*E-m*y)*O,e[15]=(l*E-c*b+h*y)*O,e):null}t.exports=r},{}],155:[function(e,t,n){function r(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,v=t[0],m=t[1],g=t[2],y=r[0],b=r[1],w=r[2],E=n[0],S=n[1],x=n[2];return Math.abs(v-E)<1e-6&&Math.abs(m-S)<1e-6&&Math.abs(g-x)<1e-6?i(e):(c=v-E,h=m-S,p=g-x,d=1/Math.sqrt(c*c+h*h+p*p),c*=d,h*=d,p*=d,s=b*p-w*h,o=w*c-y*p,u=y*h-b*c,d=Math.sqrt(s*s+o*o+u*u),d?(d=1/d,s*=d,o*=d,u*=d):(s=0,o=0,u=0),a=h*u-p*o,f=p*s-c*u,l=c*o-h*s,d=Math.sqrt(a*a+f*f+l*l),d?(d=1/d,a*=d,f*=d,l*=d):(a=0,f=0,l=0),e[0]=s,e[1]=a,e[2]=c,e[3]=0,e[4]=o,e[5]=f,e[6]=h,e[7]=0,e[8]=u,e[9]=l,e[10]=p,e[11]=0,e[12]=-(s*v+o*m+u*g),e[13]=-(a*v+f*m+l*g),e[14]=-(c*v+h*m+p*g),e[15]=1,e)}var i=e("./identity");t.exports=r},{"./identity":153}],156:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=n[0],w=n[1],E=n[2],S=n[3];return e[0]=b*r+w*u+E*c+S*v,e[1]=b*i+w*a+E*h+S*m,e[2]=b*s+w*f+E*p+S*g,e[3]=b*o+w*l+E*d+S*y,b=n[4],w=n[5],E=n[6],S=n[7],e[4]=b*r+w*u+E*c+S*v,e[5]=b*i+w*a+E*h+S*m,e[6]=b*s+w*f+E*p+S*g,e[7]=b*o+w*l+E*d+S*y,b=n[8],w=n[9],E=n[10],S=n[11],e[8]=b*r+w*u+E*c+S*v,e[9]=b*i+w*a+E*h+S*m,e[10]=b*s+w*f+E*p+S*g,e[11]=b*o+w*l+E*d+S*y,b=n[12],w=n[13],E=n[14],S=n[15],e[12]=b*r+w*u+E*c+S*v,e[13]=b*i+w*a+E*h+S*m,e[14]=b*s+w*f+E*p+S*g,e[15]=b*o+w*l+E*d+S*y,e}t.exports=r},{}],157:[function(e,t,n){function r(e,t,n,r,i){var s=1/Math.tan(t/2),o=1/(r-i);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e}t.exports=r},{}],158:[function(e,t,n){function r(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L=r[0],A=r[1],O=r[2],M=Math.sqrt(L*L+A*A+O*O);return Math.abs(M)<1e-6?null:(M=1/M,L*=M,A*=M,O*=M,i=Math.sin(n),s=Math.cos(n),o=1-s,u=t[0],a=t[1],f=t[2],l=t[3],c=t[4],h=t[5],p=t[6],d=t[7],v=t[8],m=t[9],g=t[10],y=t[11],b=L*L*o+s,w=A*L*o+O*i,E=O*L*o-A*i,S=L*A*o-O*i,x=A*A*o+s,T=O*A*o+L*i,N=L*O*o+A*i,C=A*O*o-L*i,k=O*O*o+s,e[0]=u*b+c*w+v*E,e[1]=a*b+h*w+m*E,e[2]=f*b+p*w+g*E,e[3]=l*b+d*w+y*E,e[4]=u*S+c*x+v*T,e[5]=a*S+h*x+m*T,e[6]=f*S+p*x+g*T,e[7]=l*S+d*x+y*T,e[8]=u*N+c*C+v*k,e[9]=a*N+h*C+m*k,e[10]=f*N+p*C+g*k,e[11]=l*N+d*C+y*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}t.exports=r},{}],159:[function(e,t,n){function r(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],o=t[5],u=t[6],a=t[7],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+f*r,e[5]=o*i+l*r,e[6]=u*i+c*r,e[7]=a*i+h*r,e[8]=f*i-s*r,e[9]=l*i-o*r,e[10]=c*i-u*r,e[11]=h*i-a*r,e}t.exports=r},{}],160:[function(e,t,n){function r(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-f*r,e[1]=o*i-l*r,e[2]=u*i-c*r,e[3]=a*i-h*r,e[8]=s*r+f*i,e[9]=o*r+l*i,e[10]=u*r+c*i,e[11]=a*r+h*i,e}t.exports=r},{}],161:[function(e,t,n){function r(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[4],l=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+f*r,e[1]=o*i+l*r,e[2]=u*i+c*r,e[3]=a*i+h*r,e[4]=f*i-s*r,e[5]=l*i-o*r,e[6]=c*i-u*r,e[7]=h*i-a*r,e}t.exports=r},{}],162:[function(e,t,n){function r(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}t.exports=r},{}],163:[function(e,t,n){function r(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v=n[0],m=n[1],g=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*g+t[12],e[13]=t[1]*v+t[5]*m+t[9]*g+t[13],e[14]=t[2]*v+t[6]*m+t[10]*g+t[14],e[15]=t[3]*v+t[7]*m+t[11]*g+t[15]):(r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=u,e[5]=a,e[6]=f,e[7]=l,e[8]=c,e[9]=h,e[10]=p,e[11]=d,e[12]=r*v+u*m+c*g+t[12],e[13]=i*v+a*m+h*g+t[13],e[14]=s*v+f*m+p*g+t[14],e[15]=o*v+l*m+d*g+t[15]),e}t.exports=r},{}],164:[function(e,t,n){function r(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}t.exports=r},{}],165:[function(e,t,n){"use strict";function r(e,t){switch(t.length){case 0:break;case 1:e[0]=1/t[0];break;case 4:i(e,t);break;case 9:s(e,t);break;case 16:o(e,t);break;default:throw new Error("currently supports matrices up to 4x4")}return e}t.exports=r;var i=e("gl-mat2/invert"),s=e("gl-mat3/invert"),o=e("gl-mat4/invert")},{"gl-mat2/invert":146,"gl-mat3/invert":147,"gl-mat4/invert":154}],166:[function(e,t,n){n.glMatrix=e("./gl-matrix/common.js"),n.mat2=e("./gl-matrix/mat2.js"),n.mat2d=e("./gl-matrix/mat2d.js"),n.mat3=e("./gl-matrix/mat3.js"),n.mat4=e("./gl-matrix/mat4.js"),n.quat=e("./gl-matrix/quat.js"),n.vec2=e("./gl-matrix/vec2.js"),n.vec3=e("./gl-matrix/vec3.js"),n.vec4=e("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":167,"./gl-matrix/mat2.js":168,"./gl-matrix/mat2d.js":169,"./gl-matrix/mat3.js":170,"./gl-matrix/mat4.js":171,"./gl-matrix/quat.js":172,"./gl-matrix/vec2.js":173,"./gl-matrix/vec3.js":174,"./gl-matrix/vec4.js":175}],167:[function(e,t,n){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(e){r.ARRAY_TYPE=e};var i=Math.PI/180;r.toRadian=function(e){return e*i},r.equals=function(e,t){return Math.abs(e-t)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.exports=r},{}],168:[function(e,t,n){var r=e("./common.js"),i={};i.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},i.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},i.fromValues=function(e,t,n,i){var s=new r.ARRAY_TYPE(4);return s[0]=e,s[1]=t,s[2]=n,s[3]=i,s},i.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},i.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},i.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*s-i*r;return o?(o=1/o,e[0]=s*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null},i.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},i.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},i.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1],f=n[2],l=n[3];return e[0]=r*u+s*a,e[1]=i*u+o*a,e[2]=r*f+s*l,e[3]=i*f+o*l,e},i.mul=i.multiply,i.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a+s*u,e[1]=i*a+o*u,e[2]=r*-u+s*a,e[3]=i*-u+o*a,e},i.scale=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1];return e[0]=r*u,e[1]=i*u,e[2]=s*a,e[3]=o*a,e},i.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},i.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},i.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},i.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},i.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},i.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},i.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},i.sub=i.subtract,i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},i.equals=function(e,t){var n=e[0],i=e[1],s=e[2],o=e[3],u=t[0],a=t[1],f=t[2],l=t[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-a)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-f)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},i.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},i.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},t.exports=i},{"./common.js":167}],169:[function(e,t,n){var r=e("./common.js"),i={};i.create=function(){var e=new r.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},i.clone=function(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},i.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},i.fromValues=function(e,t,n,i,s,o){var u=new r.ARRAY_TYPE(6);return u[0]=e,u[1]=t,u[2]=n,u[3]=i,u[4]=s,u[5]=o,u},i.set=function(e,t,n,r,i,s,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e},i.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=n*s-r*i;return a?(a=1/a,e[0]=s*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e[4]=(i*u-s*o)*a,e[5]=(r*o-n*u)*a,e):null},i.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},i.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=n[0],l=n[1],c=n[2],h=n[3],p=n[4],d=n[5];return e[0]=r*f+s*l,e[1]=i*f+o*l,e[2]=r*c+s*h,e[3]=i*c+o*h,e[4]=r*p+s*d+u,e[5]=i*p+o*d+a,e},i.mul=i.multiply,i.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=Math.sin(n),l=Math.cos(n);return e[0]=r*l+s*f,e[1]=i*l+o*f,e[2]=r*-f+s*l,e[3]=i*-f+o*l,e[4]=u,e[5]=a,e},i.scale=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=n[0],l=n[1];return e[0]=r*f,e[1]=i*f,e[2]=s*l,e[3]=o*l,e[4]=u,e[5]=a,e},i.translate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=n[0],l=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=r*f+s*l+u,e[5]=i*f+o*l+a,e},i.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},i.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},i.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},i.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},i.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},i.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},i.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e},i.sub=i.subtract,i.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},i.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},i.equals=function(e,t){var n=e[0],i=e[1],s=e[2],o=e[3],u=e[4],a=e[5],f=t[0],l=t[1],c=t[2],h=t[3],p=t[4],d=t[5];return Math.abs(n-f)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(o-h)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(u-p)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))},t.exports=i},{"./common.js":167}],170:[function(e,t,n){var r=e("./common.js"),i={};i.create=function(){var e=new r.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},i.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.fromValues=function(e,t,n,i,s,o,u,a,f){var l=new r.ARRAY_TYPE(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=i,l[4]=s,l[5]=o,l[6]=u,l[7]=a,l[8]=f,l},i.set=function(e,t,n,r,i,s,o,u,a,f){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=u,e[7]=a,e[8]=f,e},i.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},i.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=l*o-u*f,h=-l*s+u*a,p=f*s-o*a,d=n*c+r*h+i*p;return d?(d=1/d,e[0]=c*d,e[1]=(-l*r+i*f)*d,e[2]=(u*r-i*o)*d,e[3]=h*d,e[4]=(l*n-i*a)*d,e[5]=(-u*n+i*s)*d,e[6]=p*d,e[7]=(-f*n+r*a)*d,e[8]=(o*n-r*s)*d,e):null},i.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8];return e[0]=o*l-u*f,e[1]=i*f-r*l,e[2]=r*u-i*o,e[3]=u*a-s*l,e[4]=n*l-i*a,e[5]=i*s-n*u,e[6]=s*f-o*a,e[7]=r*a-n*f,e[8]=n*o-r*s,e},i.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8];return t*(f*s-o*a)+n*(-f*i+o*u)+r*(a*i-s*u)},i.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=n[0],p=n[1],d=n[2],v=n[3],m=n[4],g=n[5],y=n[6],b=n[7],w=n[8];return e[0]=h*r+p*o+d*f,e[1]=h*i+p*u+d*l,e[2]=h*s+p*a+d*c,e[3]=v*r+m*o+g*f,e[4]=v*i+m*u+g*l,e[5]=v*s+m*a+g*c,e[6]=y*r+b*o+w*f,e[7]=y*i+b*u+w*l,e[8]=y*s+b*a+w*c,e},i.mul=i.multiply,i.translate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=u,e[5]=a,e[6]=h*r+p*o+f,e[7]=h*i+p*u+l,e[8]=h*s+p*a+c,e},i.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=Math.sin(n),p=Math.cos(n);return e[0]=p*r+h*o,e[1]=p*i+h*u,e[2]=p*s+h*a,e[3]=p*o-h*r,e[4]=p*u-h*i,e[5]=p*a-h*s,e[6]=f,e[7]=l,e[8]=c,e},i.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},i.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},i.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=r*o,c=r*u,h=i*o,p=i*u,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-c-d,e[3]=l-g,e[6]=h+m,e[1]=l+g,e[4]=1-f-d,e[7]=p-v,e[2]=h-m,e[5]=p+v,e[8]=1-f-c,e},i.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(a*C-o*A-f*N)*O,e[2]=(o*L-u*C+f*T)*O,e[3]=(i*L-r*A-s*k)*O,e[4]=(n*A-i*C+s*N)*O,e[5]=(r*C-n*L-s*T)*O,e[6]=(v*x-m*S+g*E)*O,e[7]=(m*w-d*x-g*b)*O,e[8]=(d*S-v*w+g*y)*O,e):null},i.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},i.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},i.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},i.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e},i.sub=i.subtract,i.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},i.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},i.equals=function(e,t){var n=e[0],i=e[1],s=e[2],o=e[3],u=e[4],a=e[5],f=e[6],l=e[7],c=e[8],h=t[0],p=t[1],d=t[2],v=t[3],m=t[4],g=t[5],y=e[6],b=t[7],w=t[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(s-d)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(o-v)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-m)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(a-g)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(f-y)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(l-b)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-w)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))},t.exports=i},{"./common.js":167}],171:[function(e,t,n){var r=e("./common.js"),i={scalar:{},SIMD:{}};i.create=function(){var e=new r.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.fromValues=function(e,t,n,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=new r.ARRAY_TYPE(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=i,g[4]=s,g[5]=o,g[6]=u,g[7]=a,g[8]=f,g[9]=l,g[10]=c,g[11]=h,g[12]=p,g[13]=d,g[14]=v,g[15]=m,g},i.set=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=u,e[7]=a,e[8]=f,e[9]=l,e[10]=c,e[11]=h,e[12]=p,e[13]=d,e[14]=v,e[15]=m,e},i.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.scalar.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},i.SIMD.transpose=function(e,t){var n,r,i,s,o,u,a,f,l,c;return n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),s=SIMD.Float32x4.load(t,12),o=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(i,s,0,1,4,5),a=SIMD.Float32x4.shuffle(o,u,0,2,4,6),f=SIMD.Float32x4.shuffle(o,u,1,3,5,7),SIMD.Float32x4.store(e,0,a),SIMD.Float32x4.store(e,4,f),o=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(i,s,2,3,6,7),l=SIMD.Float32x4.shuffle(o,u,0,2,4,6),c=SIMD.Float32x4.shuffle(o,u,1,3,5,7),SIMD.Float32x4.store(e,8,l),SIMD.Float32x4.store(e,12,c),e},i.transpose=r.USE_SIMD?i.SIMD.transpose:i.scalar.transpose,i.scalar.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(i*L-r*A-s*k)*O,e[2]=(v*x-m*S+g*E)*O,e[3]=(h*S-c*x-p*E)*O,e[4]=(a*C-o*A-f*N)*O,e[5]=(n*A-i*C+s*N)*O,e[6]=(m*w-d*x-g*b)*O,e[7]=(l*x-h*w+p*b)*O,e[8]=(o*L-u*C+f*T)*O,e[9]=(r*C-n*L-s*T)*O,e[10]=(d*S-v*w+g*y)*O,e[11]=(c*w-l*S-p*y)*O,e[12]=(u*N-o*k-a*T)*O,e[13]=(n*k-r*N+i*T)*O,e[14]=(v*b-d*E-m*y)*O,e[15]=(l*E-c*b+h*y)*O,e):null},i.SIMD.invert=function(e,t){var n,r,i,s,o,u,a,f,l,c,h=SIMD.Float32x4.load(t,0),p=SIMD.Float32x4.load(t,4),d=SIMD.Float32x4.load(t,8),v=SIMD.Float32x4.load(t,12);return o=SIMD.Float32x4.shuffle(h,p,0,1,4,5),r=SIMD.Float32x4.shuffle(d,v,0,1,4,5),n=SIMD.Float32x4.shuffle(o,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,o,1,3,5,7),o=SIMD.Float32x4.shuffle(h,p,2,3,6,7),s=SIMD.Float32x4.shuffle(d,v,2,3,6,7),i=SIMD.Float32x4.shuffle(o,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,o,1,3,5,7),o=SIMD.Float32x4.mul(i,s),o=SIMD.Float32x4.swizzle(o,1,0,3,2),u=SIMD.Float32x4.mul(r,o),a=SIMD.Float32x4.mul(n,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),u),a=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,o),a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),o=SIMD.Float32x4.mul(r,i),o=SIMD.Float32x4.swizzle(o,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,o),u),l=SIMD.Float32x4.mul(n,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(s,o)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,o),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),o=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),s),o=SIMD.Float32x4.swizzle(o,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),u),f=SIMD.Float32x4.mul(n,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(i,o)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,o),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),o=SIMD.Float32x4.mul(n,r),o=SIMD.Float32x4.swizzle(o,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,o),f),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),l),o=SIMD.Float32x4.swizzle(o,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,o),f),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,o)),o=SIMD.Float32x4.mul(n,s),o=SIMD.Float32x4.swizzle(o,1,0,3,2),a=SIMD.Float32x4.sub(a,SIMD.Float32x4.mul(i,o)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,o),f),o=SIMD.Float32x4.swizzle(o,2,3,0,1),a=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),a),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(r,o)),o=SIMD.Float32x4.mul(n,i),o=SIMD.Float32x4.swizzle(o,1,0,3,2),a=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,o),a),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,o)),o=SIMD.Float32x4.swizzle(o,2,3,0,1),a=SIMD.Float32x4.sub(a,SIMD.Float32x4.mul(s,o)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,o),l),c=SIMD.Float32x4.mul(n,u),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),o=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(o,o),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(o,o))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(c,a)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(c,f)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(c,l)),e):null},i.invert=r.USE_SIMD?i.SIMD.invert:i.scalar.invert,i.scalar.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15];return e[0]=u*(h*g-p*m)-c*(a*g-f*m)+v*(a*p-f*h),e[1]=-(r*(h*g-p*m)-c*(i*g-s*m)+v*(i*p-s*h)),e[2]=r*(a*g-f*m)-u*(i*g-s*m)+v*(i*f-s*a),e[3]=-(r*(a*p-f*h)-u*(i*p-s*h)+c*(i*f-s*a)),e[4]=-(o*(h*g-p*m)-l*(a*g-f*m)+d*(a*p-f*h)),e[5]=n*(h*g-p*m)-l*(i*g-s*m)+d*(i*p-s*h),e[6]=-(n*(a*g-f*m)-o*(i*g-s*m)+d*(i*f-s*a)),e[7]=n*(a*p-f*h)-o*(i*p-s*h)+l*(i*f-s*a),e[8]=o*(c*g-p*v)-l*(u*g-f*v)+d*(u*p-f*c),e[9]=-(n*(c*g-p*v)-l*(r*g-s*v)+d*(r*p-s*c)),e[10]=n*(u*g-f*v)-o*(r*g-s*v)+d*(r*f-s*u),e[11]=-(n*(u*p-f*c)-o*(r*p-s*c)+l*(r*f-s*u)),e[12]=-(o*(c*m-h*v)-l*(u*m-a*v)+d*(u*h-a*c)),e[13]=n*(c*m-h*v)-l*(r*m-i*v)+d*(r*h-i*c),e[14]=-(n*(u*m-a*v)-o*(r*m-i*v)+d*(r*a-i*u)),e[15]=n*(u*h-a*c)-o*(r*h-i*c)+l*(r*a-i*u),e},i.SIMD.adjoint=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),s=SIMD.Float32x4.load(t,12);return l=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(i,s,0,1,4,5),o=SIMD.Float32x4.shuffle(l,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,l,1,3,5,7),l=SIMD.Float32x4.shuffle(n,r,2,3,6,7),f=SIMD.Float32x4.shuffle(i,s,2,3,6,7),a=SIMD.Float32x4.shuffle(l,f,0,2,4,6),f=SIMD.Float32x4.shuffle(f,l,1,3,5,7),l=SIMD.Float32x4.mul(a,f),l=SIMD.Float32x4.swizzle(l,1,0,3,2),c=SIMD.Float32x4.mul(u,l),h=SIMD.Float32x4.mul(o,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,l),c),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),l=SIMD.Float32x4.mul(u,a),l=SIMD.Float32x4.swizzle(l,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,l),c),d=SIMD.Float32x4.mul(o,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(f,l)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),f),l=SIMD.Float32x4.swizzle(l,1,0,3,2),a=SIMD.Float32x4.swizzle(a,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,l),c),p=SIMD.Float32x4.mul(o,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(a,l)),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),l=SIMD.Float32x4.mul(o,u),l=SIMD.Float32x4.swizzle(l,1,0,3,2),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,l),p),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),d),l=SIMD.Float32x4.swizzle(l,2,3,0,1),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,l),p),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(a,l)),l=SIMD.Float32x4.mul(o,f),l=SIMD.Float32x4.swizzle(l,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(a,l)),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),p),l=SIMD.Float32x4.swizzle(l,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,l),h),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(u,l)),l=SIMD.Float32x4.mul(o,a),l=SIMD.Float32x4.swizzle(l,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,l),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(f,l)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),d),SIMD.Float32x4.store(e,0,c),SIMD.Float32x4.store(e,4,h),SIMD.Float32x4.store(e,8,p),SIMD.Float32x4.store(e,12,d),e},i.adjoint=r.USE_SIMD?i.SIMD.adjoint:i.scalar.adjoint,i.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11],p=e[12],d=e[13],v=e[14],m=e[15],g=t*o-n*s,y=t*u-r*s,b=t*a-i*s,w=n*u-r*o,E=n*a-i*o,S=r*a-i*u,x=f*d-l*p,T=f*v-c*p,N=f*m-h*p,C=l*v-c*d,k=l*m-h*d,L=c*m-h*v;return g*L-y*k+b*C+w*N-E*T+S*x},i.SIMD.multiply=function(e,t,n){var r=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4),s=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),u=SIMD.Float32x4.load(n,0),a=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),s),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),o))));SIMD.Float32x4.store(e,0,a);var f=SIMD.Float32x4.load(n,4),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),s),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),o))));SIMD.Float32x4.store(e,4,l);var c=SIMD.Float32x4.load(n,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),s),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),o))));SIMD.Float32x4.store(e,8,h);var p=SIMD.Float32x4.load(n,12),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,2,2,2,2),s),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,3,3,3,3),o))));return SIMD.Float32x4.store(e,12,d),e},i.scalar.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=n[0],w=n[1],E=n[2],S=n[3];return e[0]=b*r+w*u+E*c+S*v,e[1]=b*i+w*a+E*h+S*m,e[2]=b*s+w*f+E*p+S*g,e[3]=b*o+w*l+E*d+S*y,b=n[4],w=n[5],E=n[6],S=n[7],e[4]=b*r+w*u+E*c+S*v,e[5]=b*i+w*a+E*h+S*m,e[6]=b*s+w*f+E*p+S*g,e[7]=b*o+w*l+E*d+S*y,b=n[8],w=n[9],E=n[10],S=n[11],e[8]=b*r+w*u+E*c+S*v,e[9]=b*i+w*a+E*h+S*m,e[10]=b*s+w*f+E*p+S*g,e[11]=b*o+w*l+E*d+S*y,b=n[12],w=n[13],E=n[14],S=n[15],e[12]=b*r+w*u+E*c+S*v,e[13]=b*i+w*a+E*h+S*m,e[14]=b*s+w*f+E*p+S*g,e[15]=b*o+w*l+E*d+S*y,e},i.multiply=r.USE_SIMD?i.SIMD.multiply:i.scalar.multiply,i.mul=i.multiply,i.scalar.translate=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v=n[0],m=n[1],g=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*g+t[12],e[13]=t[1]*v+t[5]*m+t[9]*g+t[13],e[14]=t[2]*v+t[6]*m+t[10]*g+t[14],e[15]=t[3]*v+t[7]*m+t[11]*g+t[15]):(r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=u,e[5]=a,e[6]=f,e[7]=l,e[8]=c,e[9]=h,e[10]=p,e[11]=d,e[12]=r*v+u*m+c*g+t[12],e[13]=i*v+a*m+h*g+t[13],e[14]=s*v+f*m+p*g+t[14],e[15]=o*v+l*m+d*g+t[15]),e},i.SIMD.translate=function(e,t,n){var r=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4),s=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),u=SIMD.Float32x4(n[0],n[1],n[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(u,1,1,1,1)),s=SIMD.Float32x4.mul(s,SIMD.Float32x4.swizzle(u,2,2,2,2));var a=SIMD.Float32x4.add(r,SIMD.Float32x4.add(i,SIMD.Float32x4.add(s,o)));return SIMD.Float32x4.store(e,12,a),e},i.translate=r.USE_SIMD?i.SIMD.translate:i.scalar.translate,i.scalar.scale=function(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.SIMD.scale=function(e,t,n){var r,i,s,o=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(o,0,0,0,0))),i=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(o,1,1,1,1))),s=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(s,SIMD.Float32x4.swizzle(o,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.scale=r.USE_SIMD?i.SIMD.scale:i.scalar.scale,i.rotate=function(e,t,n,i){var s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A=i[0],O=i[1],M=i[2],_=Math.sqrt(A*A+O*O+M*M);return Math.abs(_)<r.EPSILON?null:(_=1/_,A*=_,O*=_,M*=_,s=Math.sin(n),o=Math.cos(n),u=1-o,a=t[0],f=t[1],l=t[2],c=t[3],h=t[4],p=t[5],d=t[6],v=t[7],m=t[8],g=t[9],y=t[10],b=t[11],w=A*A*u+o,E=O*A*u+M*s,S=M*A*u-O*s,x=A*O*u-M*s,T=O*O*u+o,N=M*O*u+A*s,C=A*M*u+O*s,k=O*M*u-A*s,L=M*M*u+o,e[0]=a*w+h*E+m*S,e[1]=f*w+p*E+g*S,e[2]=l*w+d*E+y*S,e[3]=c*w+v*E+b*S,e[4]=a*x+h*T+m*N,e[5]=f*x+p*T+g*N,e[6]=l*x+d*T+y*N,e[7]=c*x+v*T+b*N,e[8]=a*C+h*k+m*L,e[9]=f*C+p*k+g*L,e[10]=l*C+d*k+y*L,e[11]=c*C+v*k+b*L,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},i.scalar.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],o=t[5],u=t[6],a=t[7],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+f*r,e[5]=o*i+l*r,e[6]=u*i+c*r,e[7]=a*i+h*r,e[8]=f*i-s*r,e[9]=l*i-o*r,e[10]=c*i-u*r,e[11]=h*i-a*r,e},i.SIMD.rotateX=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),i=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var s=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(s,i),SIMD.Float32x4.mul(o,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(s,r))),e},i.rotateX=r.USE_SIMD?i.SIMD.rotateX:i.scalar.rotateX,i.scalar.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-f*r,e[1]=o*i-l*r,e[2]=u*i-c*r,e[3]=a*i-h*r,e[8]=s*r+f*i,e[9]=o*r+l*i,e[10]=u*r+c*i,e[11]=a*r+h*i,e},i.SIMD.rotateY=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),i=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var s=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,i),SIMD.Float32x4.mul(o,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(s,r),SIMD.Float32x4.mul(o,i))),e},i.rotateY=r.USE_SIMD?i.SIMD.rotateY:i.scalar.rotateY,i.scalar.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[4],l=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+f*r,e[1]=o*i+l*r,e[2]=u*i+c*r,e[3]=a*i+h*r,e[4]=f*i-s*r,e[5]=l*i-o*r,e[6]=c*i-u*r,e[7]=h*i-a*r,e},i.SIMD.rotateZ=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),i=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var s=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(s,i),SIMD.Float32x4.mul(o,r))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(s,r))),e},i.rotateZ=r.USE_SIMD?i.SIMD.rotateZ:i.scalar.rotateZ,i.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},i.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.fromRotation=function(e,t,n){var i,s,o,u=n[0],a=n[1],f=n[2],l=Math.sqrt(u*u+a*a+f*f);return Math.abs(l)<r.EPSILON?null:(l=1/l,u*=l,a*=l,f*=l,i=Math.sin(t),s=Math.cos(t),o=1-s,e[0]=u*u*o+s,e[1]=a*u*o+f*i,e[2]=f*u*o-a*i,e[3]=0,e[4]=u*a*o-f*i,e[5]=a*a*o+s,e[6]=f*a*o+u*i,e[7]=0,e[8]=u*f*o+a*i,e[9]=a*f*o-u*i,e[10]=f*f*o+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},i.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=r+r,a=i+i,f=s+s,l=r*u,c=r*a,h=r*f,p=i*a,d=i*f,v=s*f,m=o*u,g=o*a,y=o*f;return e[0]=1-(p+v),e[1]=c+y,e[2]=h-g,e[3]=0,e[4]=c-y,e[5]=1-(l+v),e[6]=d+m,e[7]=0,e[8]=h+g,e[9]=d-m,e[10]=1-(l+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},i.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},i.getRotation=function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},i.fromRotationTranslationScale=function(e,t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3],a=i+i,f=s+s,l=o+o,c=i*a,h=i*f,p=i*l,d=s*f,v=s*l,m=o*l,g=u*a,y=u*f,b=u*l,w=r[0],E=r[1],S=r[2];return e[0]=(1-(d+m))*w,e[1]=(h+b)*w,e[2]=(p-y)*w,e[3]=0,e[4]=(h-b)*E,e[5]=(1-(c+m))*E,e[6]=(v+g)*E,e[7]=0,e[8]=(p+y)*S,e[9]=(v-g)*S,e[10]=(1-(c+d))*S,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},i.fromRotationTranslationScaleOrigin=function(e,t,n,r,i){var s=t[0],o=t[1],u=t[2],a=t[3],f=s+s,l=o+o,c=u+u,h=s*f,p=s*l,d=s*c,v=o*l,m=o*c,g=u*c,y=a*f,b=a*l,w=a*c,E=r[0],S=r[1],x=r[2],T=i[0],N=i[1],C=i[2];return e[0]=(1-(v+g))*E,e[1]=(p+w)*E,e[2]=(d-b)*E,e[3]=0,e[4]=(p-w)*S,e[5]=(1-(h+g))*S,e[6]=(m+y)*S,e[7]=0,e[8]=(d+b)*x,e[9]=(m-y)*x,e[10]=(1-(h+v))*x,e[11]=0,e[12]=n[0]+T-(e[0]*T+e[4]*N+e[8]*C),e[13]=n[1]+N-(e[1]*T+e[5]*N+e[9]*C),e[14]=n[2]+C-(e[2]*T+e[6]*N+e[10]*C),e[15]=1,e},i.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=r*o,c=r*u,h=i*o,p=i*u,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-c-d,e[1]=l+g,e[2]=h-m,e[3]=0,e[4]=l-g,e[5]=1-f-d,e[6]=p+v,e[7]=0,e[8]=h+m,e[9]=p-v,e[10]=1-f-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.frustum=function(e,t,n,r,i,s,o){var u=1/(n-t),a=1/(i-r),f=1/(s-o);return e[0]=2*s*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*a,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(i+r)*a,e[10]=(o+s)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*f,e[15]=0,e},i.perspective=function(e,t,n,r,i){var s=1/Math.tan(t/2),o=1/(r-i);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e},i.perspectiveFromFieldOfView=function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),a=2/(o+u),f=2/(i+s);return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=-((o-u)*a*.5),e[9]=(i-s)*f*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},i.ortho=function(e,t,n,r,i,s,o){var u=1/(t-n),a=1/(r-i),f=1/(s-o);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+n)*u,e[13]=(i+r)*a,e[14]=(o+s)*f,e[15]=1,e},i.lookAt=function(e,t,n,s){var o,u,a,f,l,c,h,p,d,v,m=t[0],g=t[1],y=t[2],b=s[0],w=s[1],E=s[2],S=n[0],x=n[1],T=n[2];return Math.abs(m-S)<r.EPSILON&&Math.abs(g-x)<r.EPSILON&&Math.abs(y-T)<r.EPSILON?i.identity(e):(h=m-S,p=g-x,d=y-T,v=1/Math.sqrt(h*h+p*p+d*d),h*=v,p*=v,d*=v,o=w*d-E*p,u=E*h-b*d,a=b*p-w*h,v=Math.sqrt(o*o+u*u+a*a),v?(v=1/v,o*=v,u*=v,a*=v):(o=0,u=0,a=0),f=p*a-d*u,l=d*o-h*a,c=h*u-p*o,v=Math.sqrt(f*f+l*l+c*c),v?(v=1/v,f*=v,l*=v,c*=v):(f=0,l=0,c=0),e[0]=o,e[1]=f,e[2]=h,e[3]=0,e[4]=u,e[5]=l,e[6]=p,e[7]=0,e[8]=a,e[9]=c,e[10]=d,e[11]=0,e[12]=-(o*m+u*g+a*y),e[13]=-(f*m+l*g+c*y),e[14]=-(h*m+p*g+d*y),e[15]=1,e)},i.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},i.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},i.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},i.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e},i.sub=i.subtract,i.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},i.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},i.equals=function(e,t){var n=e[0],i=e[1],s=e[2],o=e[3],u=e[4],a=e[5],f=e[6],l=e[7],c=e[8],h=e[9],p=e[10],d=e[11],v=e[12],m=e[13],g=e[14],y=e[15],b=t[0],w=t[1],E=t[2],S=t[3],x=t[4],T=t[5],N=t[6],C=t[7],k=t[8],L=t[9],A=t[10],O=t[11],M=t[12],_=t[13],D=t[14],P=t[15];return Math.abs(n-b)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-w)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-E)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(o-S)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(u-x)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(a-T)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(f-N)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(l-C)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-k)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(h-L)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(p-A)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(d-O)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(v-M)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(m-_)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(_))&&Math.abs(g-D)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(y-P)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(P))},t.exports=i},{"./common.js":167}],172:[function(e,t,n){var r=e("./common.js"),i=e("./mat3.js"),s=e("./vec3.js"),o=e("./vec4.js"),u={};u.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.rotationTo=function(){var e=s.create(),t=s.fromValues(1,0,0),n=s.fromValues(0,1,0);return function(r,i,o){var f=s.dot(i,o);return f<-0.999999?(s.cross(e,t,i),s.length(e)<1e-6&&s.cross(e,n,i),s.normalize(e,e),u.setAxisAngle(r,e,Math.PI),r):f>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(s.cross(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+f,u.normalize(r,r))}}(),u.setAxes=function(){var e=i.create();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],u.normalize(t,u.fromMat3(t,e))}}(),u.clone=o.clone,u.fromValues=o.fromValues,u.copy=o.copy,u.set=o.set,u.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},u.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return 0!=r?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n},u.add=o.add,u.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1],f=n[2],l=n[3];return e[0]=r*l+o*u+i*f-s*a,e[1]=i*l+o*a+s*u-r*f,e[2]=s*l+o*f+r*a-i*u,e[3]=o*l-r*u-i*a-s*f,e},u.mul=u.multiply,u.scale=o.scale,u.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a+o*u,e[1]=i*a+s*u,e[2]=s*a-i*u,e[3]=o*a-r*u,e},u.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a-s*u,e[1]=i*a+o*u,e[2]=s*a+r*u,e[3]=o*a-i*u,e},u.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a+i*u,e[1]=i*a-r*u,e[2]=s*a+o*u,e[3]=o*a-s*u,e},u.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},u.dot=o.dot,u.lerp=o.lerp,u.slerp=function(e,t,n,r){var i,s,o,u,a,f=t[0],l=t[1],c=t[2],h=t[3],p=n[0],d=n[1],v=n[2],m=n[3];return s=f*p+l*d+c*v+h*m,s<0&&(s=-s,p=-p,d=-d,v=-v,m=-m),1-s>1e-6?(i=Math.acos(s),o=Math.sin(i),u=Math.sin((1-r)*i)/o,a=Math.sin(r*i)/o):(u=1-r,a=r),e[0]=u*f+a*p,e[1]=u*l+a*d,e[2]=u*c+a*v,e[3]=u*h+a*m,e},u.sqlerp=function(){var e=u.create(),t=u.create();return function(n,r,i,s,o,a){return u.slerp(e,r,o,a),u.slerp(t,i,s,a),u.slerp(n,e,t,2*a*(1-a)),n}}(),u.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s,u=o?1/o:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-i*u,e[3]=s*u,e},u.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},u.length=o.length,u.len=u.length,u.squaredLength=o.squaredLength,u.sqrLen=u.squaredLength,u.normalize=o.normalize,u.fromMat3=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var s=(i+1)%3,o=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*s+s]-t[3*o+o]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*s+o]-t[3*o+s])*n,e[s]=(t[3*s+i]+t[3*i+s])*n,e[o]=(t[3*o+i]+t[3*i+o])*n}return e},u.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},u.exactEquals=o.exactEquals,u.equals=o.equals,t.exports=u},{"./common.js":167,"./mat3.js":170,"./vec3.js":174,"./vec4.js":175}],173:[function(e,t,n){var r=e("./common.js"),i={};i.create=function(){var e=new r.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},i.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},i.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},i.set=function(e,t,n){return e[0]=t,e[1]=n,e},i.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},i.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},i.sub=i.subtract,i.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},i.mul=i.multiply,i.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},i.div=i.divide,i.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},i.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},i.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},i.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},i.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},i.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},i.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},i.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},i.dist=i.distance,i.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},i.sqrDist=i.squaredDistance,i.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},i.len=i.length,i.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},i.sqrLen=i.squaredLength,i.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},i.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},i.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},i.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},i.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},i.lerp=function(e,t,n,r){var i=t[0],s=t[1];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e},i.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},i.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},i.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},i.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},i.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},i.forEach=function(){var e=i.create();return function(t,n,r,i,s,o){var u,a;for(n||(n=2),r||(r=0),a=i?Math.min(i*n+r,t.length):t.length,u=r;u<a;u+=n)e[0]=t[u],e[1]=t[u+1],s(e,e,o),t[u]=e[0],t[u+1]=e[1];return t}}(),i.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},i.equals=function(e,t){var n=e[0],i=e[1],s=t[0],o=t[1];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))},t.exports=i},{"./common.js":167}],174:[function(e,t,n){var r=e("./common.js"),i={};i.create=function(){var e=new r.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},i.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},i.fromValues=function(e,t,n){var i=new r.ARRAY_TYPE(3);return i[0]=e,i[1]=t,i[2]=n,i},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},i.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},i.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},i.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},i.sub=i.subtract,i.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},i.mul=i.multiply,i.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},i.div=i.divide,i.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},i.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},i.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},i.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},i.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},i.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},i.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},i.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},i.dist=i.distance,i.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},i.sqrDist=i.squaredDistance,i.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},i.len=i.length,i.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},i.sqrLen=i.squaredLength,i.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},i.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},i.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e},i.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},i.cross=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2];return e[0]=i*a-s*u,e[1]=s*o-r*a,e[2]=r*u-i*o,e},i.lerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e},i.hermite=function(e,t,n,r,i,s){var o=s*s,u=o*(2*s-3)+1,a=o*(s-2)+s,f=o*(s-1),l=o*(3-2*s);return e[0]=t[0]*u+n[0]*a+r[0]*f+i[0]*l,e[1]=t[1]*u+n[1]*a+r[1]*f+i[1]*l,e[2]=t[2]*u+n[2]*a+r[2]*f+i[2]*l,e},i.bezier=function(e,t,n,r,i,s){var o=1-s,u=o*o,a=s*s,f=u*o,l=3*s*u,c=3*a*o,h=a*s;return e[0]=t[0]*f+n[0]*l+r[0]*c+i[0]*h,e[1]=t[1]*f+n[1]*l+r[1]*c+i[1]*h,e[2]=t[2]*f+n[2]*l+r[2]*c+i[2]*h,e},i.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,s=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*s,e[1]=Math.sin(n)*s,e[2]=i*t,e},i.transformMat4=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,e},i.transformMat3=function(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e},i.transformQuat=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2],f=n[3],l=f*r+u*s-a*i,c=f*i+a*r-o*s,h=f*s+o*i-u*r,p=-o*r-u*i-a*s;return e[0]=l*f+p*-o+c*-a-h*-u,e[1]=c*f+p*-u+h*-o-l*-a,e[2]=h*f+p*-a+l*-u-c*-o,e},i.rotateX=function(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e},i.rotateY=function(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e},i.rotateZ=function(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e},i.forEach=function(){var e=i.create();return function(t,n,r,i,s,o){var u,a;for(n||(n=3),r||(r=0),a=i?Math.min(i*n+r,t.length):t.length,u=r;u<a;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],s(e,e,o),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}(),i.angle=function(e,t){var n=i.fromValues(e[0],e[1],e[2]),r=i.fromValues(t[0],t[1],t[2]);i.normalize(n,n),i.normalize(r,r);var s=i.dot(n,r);return s>1?0:Math.acos(s)},i.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},i.equals=function(e,t){var n=e[0],i=e[1],s=e[2],o=t[0],u=t[1],a=t[2];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-a)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(a))},t.exports=i},{"./common.js":167}],175:[function(e,t,n){var r=e("./common.js"),i={};i.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},i.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.fromValues=function(e,t,n,i){var s=new r.ARRAY_TYPE(4);return s[0]=e,s[1]=t,s[2]=n,s[3]=i,s},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},i.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},i.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},i.sub=i.subtract,i.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},i.mul=i.multiply,i.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},i.div=i.divide,i.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},i.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},i.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},i.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},i.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},i.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},i.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},i.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+s*s)},i.dist=i.distance,i.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return n*n+r*r+i*i+s*s},i.sqrDist=i.squaredDistance,i.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},i.len=i.length,i.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},i.sqrLen=i.squaredLength,i.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},i.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},i.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=s*o),e},i.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},i.lerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e[3]=u+r*(n[3]-u),e},i.random=function(e,t){return t=t||1,e[0]=r.RANDOM(),e[1]=r.RANDOM(),e[2]=r.RANDOM(),e[3]=r.RANDOM(),i.normalize(e,e),i.scale(e,e,t),e},i.transformMat4=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e},i.transformQuat=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2],f=n[3],l=f*r+u*s-a*i,c=f*i+a*r-o*s,h=f*s+o*i-u*r,p=-o*r-u*i-a*s;return e[0]=l*f+p*-o+c*-a-h*-u,e[1]=c*f+p*-u+h*-o-l*-a,e[2]=h*f+p*-a+l*-u-c*-o,e[3]=t[3],e},i.forEach=function(){var e=i.create();return function(t,n,r,i,s,o){var u,a;for(n||(n=4),r||(r=0),a=i?Math.min(i*n+r,t.length):t.length,u=r;u<a;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],s(e,e,o),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}(),i.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},i.equals=function(e,t){var n=e[0],i=e[1],s=e[2],o=e[3],u=t[0],a=t[1],f=t[2],l=t[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-a)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-f)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},t.exports=i},{"./common.js":167}],176:[function(e,t,n){"use strict";function r(e,t){for(var n=[0,0,0,0],r=0;r<4;++r)for(var i=0;i<4;++i)n[i]+=e[4*r+i]*t[r];return n}function i(e,t,n,i,s){for(var o=r(i,r(n,r(t,[e[0],e[1],e[2],1]))),u=0;u<3;++u)o[u]/=o[3];return[.5*s[0]*(1+o[0]),.5*s[1]*(1-o[1])]}function s(e,t){if(2===e.length){for(var n=0,r=0,i=0;i<2;++i)n+=Math.pow(t[i]-e[0][i],2),r+=Math.pow(t[i]-e[1][i],2);return n=Math.sqrt(n),r=Math.sqrt(r),n+r<1e-6?[1,0]:[r/(n+r),n/(r+n)]}if(3===e.length){var s=[0,0];return f(e[0],e[1],e[2],t,s),a(e,s)}return[]}function o(e,t){for(var n=[0,0,0],r=0;r<e.length;++r)for(var i=e[r],s=t[r],o=0;o<3;++o)n[o]+=s*i[o];return n}function u(e,t,n,r,u,a){if(1===e.length)return[0,e[0].slice()];for(var f=new Array(e.length),l=0;l<e.length;++l)f[l]=i(e[l],n,r,u,a);for(var c=0,h=1/0,l=0;l<f.length;++l){for(var p=0,d=0;d<2;++d)p+=Math.pow(f[l][d]-t[d],2);p<h&&(h=p,c=l)}for(var v=s(f,t),m=0,l=0;l<3;++l){if(v[l]<-0.001||v[l]>1.0001)return null;m+=v[l]}return Math.abs(m-1)>.001?null:[c,o(e,v),v]}var a=e("barycentric"),f=e("polytope-closest-point/lib/closest_point_2d.js");t.exports=u},{barycentric:38,"polytope-closest-point/lib/closest_point_2d.js":450}],177:[function(e,t,n){var r="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec4 m_position  = model * vec4(position, 1.0);\n  vec4 t_position  = view * m_position;\n  gl_Position      = projection * t_position;\n  f_color          = color;\n  f_normal         = normal;\n  f_data           = position;\n  f_eyeDirection   = eyePosition   - position;\n  f_lightDirection = lightPosition - position;\n  f_uv             = uv;\n}",i="precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat cookTorranceSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution_2_0(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n  \n  if(!gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular_1_1(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}",s="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}",o="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",u="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}",a="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",f="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}",l="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || \n     any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}",c="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}",h="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}",p="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor,1);\n}\n";n.meshShader={vertex:r,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.wireShader={vertex:s,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.pointShader={vertex:u,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},n.pickShader={vertex:f,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},n.pointPickShader={vertex:c,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},n.contourShader={vertex:h,fragment:p,attributes:[{name:"position",type:"vec3"}]}},{}],178:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C){this.gl=e,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.lineShader=r,this.pointShader=i,this.pickShader=s,this.pointPickShader=o,this.contourShader=u,this.trianglePositions=a,this.triangleColors=l,this.triangleNormals=h,this.triangleUVs=c,this.triangleIds=f,this.triangleVAO=p,this.triangleCount=0,this.lineWidth=1,this.edgePositions=d,this.edgeColors=m,this.edgeUVs=g,this.edgeIds=v,this.edgeVAO=y,this.edgeCount=0,this.pointPositions=b,this.pointColors=E,this.pointUVs=S,this.pointSizes=x,this.pointIds=w,this.pointVAO=T,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=N,this.contourVAO=C,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this._model=H,this._view=H,this._projection=H,this._resolution=[1,1]}function i(e){for(var t=T({colormap:e,nshades:256,format:"rgba"}),n=new Uint8Array(1024),r=0;r<256;++r){for(var i=t[r],s=0;s<3;++s)n[4*r+s]=i[s];n[4*r+3]=255*i[3]}return x(n,[256,256,4],[4,0,1])}function s(e,t,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=0;for(var s=e.length,i=0;i<s;++i)for(var o=e[i],u=0;u<o.length;++u)r[o[u]]=n[i];return r}function o(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=e[r][2];return n}function u(e){var t=m(e,A);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.normal.location=4,t}function a(e){var t=m(e,O);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t}function f(e){var t=m(e,M);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.pointSize.location=4,t}function l(e){var t=m(e,_);return t.attributes.position.location=0,t.attributes.id.location=1,t}function c(e){var t=m(e,D);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.pointSize.location=4,t}function h(e){var t=m(e,P);return t.attributes.position.location=0,t}function p(e){var t=e.gl,n=u(t),i=a(t),s=f(t),o=l(t),p=c(t),d=h(t),v=b(t,x(new Uint8Array([255,255,255,255]),[1,1,4]));v.generateMipmap(),v.minFilter=t.LINEAR_MIPMAP_LINEAR,v.magFilter=t.LINEAR;var m=g(t),w=g(t),E=g(t),S=g(t),T=g(t),N=y(t,[{buffer:m,type:t.FLOAT,size:3},{buffer:T,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:w,type:t.FLOAT,size:4},{buffer:E,type:t.FLOAT,size:2},{buffer:S,type:t.FLOAT,size:3}]),C=g(t),k=g(t),L=g(t),A=g(t),O=y(t,[{buffer:C,type:t.FLOAT,size:3},{buffer:A,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:k,type:t.FLOAT,size:4},{buffer:L,type:t.FLOAT,size:2}]),M=g(t),_=g(t),D=g(t),P=g(t),H=g(t),B=y(t,[{buffer:M,type:t.FLOAT,size:3},{buffer:H,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_,type:t.FLOAT,size:4},{buffer:D,type:t.FLOAT,size:2},{buffer:P,type:t.FLOAT,size:1}]),j=g(t),F=y(t,[{buffer:j,type:t.FLOAT,size:3}]),I=new r(t,v,n,i,s,o,p,d,m,T,w,E,S,N,C,A,k,L,O,M,H,_,D,P,B,j,F);return I.update(e),I}var d=1e-6,v=1e-6,m=e("gl-shader"),g=e("gl-buffer"),y=e("gl-vao"),b=e("gl-texture2d"),w=e("normals"),E=e("gl-mat4/multiply"),S=e("gl-mat4/invert"),x=e("ndarray"),T=e("colormap"),N=e("simplicial-complex-contour"),C=e("typedarray-pool"),k=e("./lib/shaders"),L=e("./lib/closest-point"),A=k.meshShader,O=k.wireShader,M=k.pointShader,_=k.pickShader,D=k.pointPickShader,P=k.contourShader,H=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],B=r.prototype;B.isOpaque=function(){return this.opacity>=1},B.isTransparent=function(){return this.opacity<1},B.pickSlots=1,B.setPickBase=function(e){this.pickId=e},B.highlight=function(e){if(!e||!this.contourEnable)return void (this.contourCount=0);for(var t=N(this.cells,this.intensity,e.intensity),n=t.cells,r=t.vertexIds,i=t.vertexWeights,s=n.length,o=C.mallocFloat32(6*s),u=0,a=0;a<s;++a)for(var f=n[a],l=0;l<2;++l){var c=f[0];2===f.length&&(c=f[l]);for(var h=r[c][0],p=r[c][1],d=i[c],v=1-d,m=this.positions[h],g=this.positions[p],y=0;y<3;++y)o[u++]=d*m[y]+v*g[y]}this.contourCount=u/3|0,this.contourPositions.update(o.subarray(0,u)),C.free(o)},B.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"contourEnable"in e&&(this.contourEnable=e.contourEnable),"contourColor"in e&&(this.contourColor=e.contourColor),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"lightPosition"in e&&(this.lightPosition=e.lightPosition),"opacity"in e&&(this.opacity=e.opacity),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),e.texture?(this.texture.dispose(),this.texture=b(t,e.texture)):e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(i(e.colormap)),this.texture.generateMipmap());var n=e.cells,r=e.positions;if(r&&n){var u=[],a=[],f=[],l=[],c=[],h=[],p=[],m=[],g=[],y=[],E=[],S=[],x=[],T=[];this.cells=n,this.positions=r;var N=e.vertexNormals,C=e.cellNormals,k=void 0===e.vertexNormalsEpsilon?d:e.vertexNormalsEpsilon,L=void 0===e.faceNormalsEpsilon?v:e.faceNormalsEpsilon;e.useFacetNormals&&!C&&(C=w.faceNormals(n,r,L)),C||N||(N=w.vertexNormals(n,r,k));var A=e.vertexColors,O=e.cellColors,M=e.meshColor||[1,1,1,1],_=e.vertexUVs,D=e.vertexIntensity,P=e.cellUVs,H=e.cellIntensity,B=1/0,j=-1/0;if(!_&&!P)if(D)for(var F=0;F<D.length;++F){var I=D[F];B=Math.min(B,I),j=Math.max(j,I)}else if(H)for(var F=0;F<H.length;++F){var I=H[F];B=Math.min(B,I),j=Math.max(j,I)}else for(var F=0;F<r.length;++F){var I=r[F][2];B=Math.min(B,I),j=Math.max(j,I)}D?this.intensity=D:H?this.intensity=s(n,r.length,H):this.intensity=o(r);var q=e.pointSizes,R=e.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var F=0;F<r.length;++F)for(var U=r[F],z=0;z<3;++z)!isNaN(U[z])&&isFinite(U[z])&&(this.bounds[0][z]=Math.min(this.bounds[0][z],U[z]),this.bounds[1][z]=Math.max(this.bounds[1][z],U[z]));var W=0,X=0,V=0;e:for(var F=0;F<n.length;++F){var $=n[F];switch($.length){case 1:for(var J=$[0],U=r[J],z=0;z<3;++z)if(isNaN(U[z])||!isFinite(U[z]))continue e;y.push(U[0],U[1],U[2]);var K;K=A?A[J]:O?O[F]:M,3===K.length?E.push(K[0],K[1],K[2],1):E.push(K[0],K[1],K[2],K[3]);var Q;Q=_?_[J]:D?[(D[J]-B)/(j-B),0]:P?P[F]:H?[(H[F]-B)/(j-B),0]:[(U[2]-B)/(j-B),0],S.push(Q[0],Q[1]),q?x.push(q[J]):x.push(R),T.push(F),V+=1;break;case 2:for(var z=0;z<2;++z)for(var J=$[z],U=r[J],G=0;G<3;++G)if(isNaN(U[G])||!isFinite(U[G]))continue e;for(var z=0;z<2;++z){var J=$[z],U=r[J];h.push(U[0],U[1],U[2]);var K;K=A?A[J]:O?O[F]:M,3===K.length?p.push(K[0],K[1],K[2],1):p.push(K[0],K[1],K[2],K[3]);var Q;Q=_?_[J]:D?[(D[J]-B)/(j-B),0]:P?P[F]:H?[(H[F]-B)/(j-B),0]:[(U[2]-B)/(j-B),0],m.push(Q[0],Q[1]),g.push(F)}X+=1;break;case 3:for(var z=0;z<3;++z)for(var J=$[z],U=r[J],G=0;G<3;++G)if(isNaN(U[G])||!isFinite(U[G]))continue e;for(var z=0;z<3;++z){var J=$[z],U=r[J];u.push(U[0],U[1],U[2]);var K;K=A?A[J]:O?O[F]:M,3===K.length?a.push(K[0],K[1],K[2],1):a.push(K[0],K[1],K[2],K[3]);var Q;Q=_?_[J]:D?[(D[J]-B)/(j-B),0]:P?P[F]:H?[(H[F]-B)/(j-B),0]:[(U[2]-B)/(j-B),0],l.push(Q[0],Q[1]);var Y;Y=N?N[J]:C[F],f.push(Y[0],Y[1],Y[2]),c.push(F)}W+=1}}this.pointCount=V,this.edgeCount=X,this.triangleCount=W,this.pointPositions.update(y),this.pointColors.update(E),this.pointUVs.update(S),this.pointSizes.update(x),this.pointIds.update(new Uint32Array(T)),this.edgePositions.update(h),this.edgeColors.update(p),this.edgeUVs.update(m),this.edgeIds.update(new Uint32Array(g)),this.trianglePositions.update(u),this.triangleColors.update(a),this.triangleUVs.update(l),this.triangleNormals.update(f),this.triangleIds.update(new Uint32Array(c))}},B.drawTransparent=B.draw=function(e){e=e||{};for(var t=this.gl,n=e.model||H,r=e.view||H,i=e.projection||H,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)s[0][o]=Math.max(s[0][o],this.clipBounds[0][o]),s[1][o]=Math.min(s[1][o],this.clipBounds[1][o]);var u={model:n,view:r,projection:i,clipBounds:s,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,contourColor:this.contourColor,texture:0};this.texture.bind(0);var a=new Array(16);E(a,u.view,u.model),E(a,u.projection,a),S(a,a);for(var o=0;o<3;++o)u.eyePosition[o]=a[12+o]/a[15];for(var f=a[15],o=0;o<3;++o)f+=this.lightPosition[o]*a[4*o+3];for(var o=0;o<3;++o){for(var l=a[12+o],c=0;c<3;++c)l+=a[4*c+o]*this.lightPosition[c];u.lightPosition[o]=l/f}if(this.triangleCount>0){var h=this.triShader;h.bind(),h.uniforms=u,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var h=this.lineShader;h.bind(),h.uniforms=u,this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var h=this.pointShader;h.bind(),h.uniforms=u,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var h=this.contourShader;h.bind(),h.uniforms=u,this.contourVAO.bind(),t.drawArrays(t.LINES,0,this.contourCount),this.contourVAO.unbind()}},B.drawPick=function(e){e=e||{};for(var t=this.gl,n=e.model||H,r=e.view||H,i=e.projection||H,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)s[0][o]=Math.max(s[0][o],this.clipBounds[0][o]),s[1][o]=Math.min(s[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(i),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var u={model:n,view:r,projection:i,clipBounds:s,pickId:this.pickId/255},a=this.pickShader;if(a.bind(),a.uniforms=u,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var a=this.pointPickShader;a.bind(),a.uniforms=u,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}},B.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;for(var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],r=this.positions,i=new Array(n.length),s=0;s<n.length;++s)i[s]=r[n[s]];var o=L(i,[e.coord[0],this._resolution[1]-e.coord[1]],this._model,this._view,this._projection,this._resolution);if(!o)return null;for(var u=o[2],a=0,s=0;s<n.length;++s)a+=u[s]*this.intensity[n[s]];return{position:o[1],index:n[o[0]],cell:n,cellId:t,intensity:a,dataCoordinate:this.positions[n[o[0]]]}},B.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},t.exports=p},{"./lib/closest-point":176,"./lib/shaders":177,colormap:82,"gl-buffer":130,"gl-mat4/invert":154,"gl-mat4/multiply":156,"gl-shader":225,"gl-texture2d":237,"gl-vao":241,ndarray:432,normals:434,"simplicial-complex-contour":480,"typedarray-pool":502}],179:[function(e,t,n){"use strict";function r(e,t,n){this.plot=e,this.vbo=t,this.shader=n}function i(e){var t=e.gl,n=s(t,[0,0,0,1,1,0,1,1]),i=o(t,u.boxVert,u.lineFrag);return new r(e,n,i)}t.exports=i;var s=e("gl-buffer"),o=e("gl-shader"),u=e("./shaders"),a=r.prototype;a.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},a.drawBox=function(){var e=[0,0],t=[0,0];return function(n,r,i,s,o){var u=this.plot,a=this.shader,f=u.gl;e[0]=n,e[1]=r,t[0]=i,t[1]=s,a.uniforms.lo=e,a.uniforms.hi=t,a.uniforms.color=o,f.drawArrays(f.TRIANGLE_STRIP,0,4)}}(),a.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":182,"gl-buffer":130,"gl-shader":185}],180:[function(e,t,n){"use strict";function r(e,t,n,r){this.plot=e,this.vbo=t,this.shader=n,this.tickShader=r,this.ticks=[[],[]]}function i(e,t){return e-t}function s(e){var t=e.gl,n=o(t),i=u(t,f.gridVert,f.gridFrag),s=u(t,f.tickVert,f.gridFrag),a=new r(e,n,i,s);return a}t.exports=s;var o=e("gl-buffer"),u=e("gl-shader"),a=e("binary-search-bounds"),f=e("./shaders"),l=r.prototype;l.draw=function(){var e=[0,0],t=[0,0],n=[0,0];return function(){for(var r=this.plot,i=this.vbo,s=this.shader,o=this.ticks,u=r.gl,a=r._tickBounds,f=r.dataBox,l=r.viewBox,c=r.gridLineWidth,h=r.gridLineColor,p=r.gridLineEnable,d=r.pixelRatio,v=0;v<2;++v){var m=a[v],g=a[v+2],y=g-m,b=.5*(f[v+2]+f[v]),w=f[v+2]-f[v];t[v]=2*y/w,e[v]=2*(m-b)/w}s.bind(),i.bind(),s.attributes.dataCoord.pointer(),s.uniforms.dataShift=e,s.uniforms.dataScale=t;for(var E=0,v=0;v<2;++v){n[0]=n[1]=0,n[v]=1,s.uniforms.dataAxis=n,s.uniforms.lineWidth=c[v]/(l[v+2]-l[v])*d,s.uniforms.color=h[v];var S=6*o[v].length;p[v]&&S&&u.drawArrays(u.TRIANGLES,E,S),E+=S}}}(),l.drawTickMarks=function(){var e=[0,0],t=[0,0],n=[1,0],r=[0,1],s=[0,0],o=[0,0];return function(){for(var u=this.plot,f=this.vbo,l=this.tickShader,c=this.ticks,h=u.gl,p=u._tickBounds,d=u.dataBox,v=u.viewBox,m=u.pixelRatio,g=u.screenBox,y=g[2]-g[0],b=g[3]-g[1],w=v[2]-v[0],E=v[3]-v[1],S=0;S<2;++S){var x=p[S],T=p[S+2],N=T-x,C=.5*(d[S+2]+d[S]),k=d[S+2]-d[S];t[S]=2*N/k,e[S]=2*(x-C)/k}t[0]*=w/y,e[0]*=w/y,t[1]*=E/b,e[1]*=E/b,l.bind(),f.bind(),l.attributes.dataCoord.pointer();var L=l.uniforms;L.dataShift=e,L.dataScale=t;var A=u.tickMarkLength,O=u.tickMarkWidth,M=u.tickMarkColor,_=0,D=6*c[0].length,P=Math.min(a.ge(c[0],(d[0]-p[0])/(p[2]-p[0]),i),c[0].length),H=Math.min(a.gt(c[0],(d[2]-p[0])/(p[2]-p[0]),i),c[0].length),B=_+6*P,j=6*Math.max(0,H-P),F=Math.min(a.ge(c[1],(d[1]-p[1])/(p[3]-p[1]),i),c[1].length),I=Math.min(a.gt(c[1],(d[3]-p[1])/(p[3]-p[1]),i),c[1].length),q=D+6*F,R=6*Math.max(0,I-F);s[0]=2*(v[0]-A[1])/y-1,s[1]=(v[3]+v[1])/b-1,o[0]=A[1]*m/y,o[1]=O[1]*m/b,R&&(L.color=M[1],L.tickScale=o,L.dataAxis=r,L.screenOffset=s,h.drawArrays(h.TRIANGLES,q,R)),s[0]=(v[2]+v[0])/y-1,s[1]=2*(v[1]-A[0])/b-1,o[0]=O[0]*m/y,o[1]=A[0]*m/b,j&&(L.color=M[0],L.tickScale=o,L.dataAxis=n,L.screenOffset=s,h.drawArrays(h.TRIANGLES,B,j)),s[0]=2*(v[2]+A[3])/y-1,s[1]=(v[3]+v[1])/b-1,o[0]=A[3]*m/y,o[1]=O[3]*m/b,R&&(L.color=M[3],L.tickScale=o,L.dataAxis=r,L.screenOffset=s,h.drawArrays(h.TRIANGLES,q,R)),s[0]=(v[2]+v[0])/y-1,s[1]=2*(v[3]+A[2])/b-1,o[0]=O[2]*m/y,o[1]=A[2]*m/b,j&&(L.color=M[2],L.tickScale=o,L.dataAxis=n,L.screenOffset=s,h.drawArrays(h.TRIANGLES,B,j))}}(),l.update=function(){var e=[1,1,-1,-1,1,-1],t=[1,-1,1,1,-1,-1];return function(n){for(var r=n.ticks,i=n.bounds,s=new Float32Array(18*(r[0].length+r[1].length)),o=(this.plot.zeroLineEnable,0),u=[[],[]],a=0;a<2;++a)for(var f=u[a],l=r[a],c=i[a],h=i[a+2],p=0;p<l.length;++p){var d=(l[p].x-c)/(h-c);f.push(d);for(var v=0;v<6;++v)s[o++]=d,s[o++]=e[v],s[o++]=t[v]}this.ticks=u,this.vbo.update(s)}}(),l.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":182,"binary-search-bounds":184,"gl-buffer":130,"gl-shader":185}],181:[function(e,t,n){"use strict";function r(e,t,n){this.plot=e,this.vbo=t,this.shader=n}function i(e){var t=e.gl,n=s(t,[-1,-1,-1,1,1,-1,1,1]),i=o(t,u.lineVert,u.lineFrag),a=new r(e,n,i);return a}t.exports=i;var s=e("gl-buffer"),o=e("gl-shader"),u=e("./shaders"),a=r.prototype;a.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},a.drawLine=function(){var e=[0,0],t=[0,0];return function(n,r,i,s,o,u){var a=this.plot,f=this.shader,l=a.gl;e[0]=n,e[1]=r,t[0]=i,t[1]=s,f.uniforms.start=e,f.uniforms.end=t,f.uniforms.width=o*a.pixelRatio,f.uniforms.color=u,l.drawArrays(l.TRIANGLE_STRIP,0,4)}}(),a.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":182,"gl-buffer":130,"gl-shader":185}],182:[function(e,t,n){"use strict";var r="precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n";t.exports={lineVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n",lineFrag:r,textVert:"#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n",textFrag:r,gridVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n",gridFrag:r,boxVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n",tickVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"}},{}],183:[function(e,t,n){"use strict";function r(e,t,n){this.plot=e,this.vbo=t,this.shader=n,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}function i(e){var t=e.gl,n=s(t),i=o(t,f.textVert,f.textFrag),u=new r(e,n,i);return u}t.exports=i;var s=e("gl-buffer"),o=e("gl-shader"),u=e("text-cache"),a=e("binary-search-bounds"),f=e("./shaders"),l=r.prototype;l.drawTicks=function(){var e=[0,0],t=[0,0],n=[0,0];return function(r){var i=this.plot,s=this.shader,o=this.tickX[r],u=this.tickOffset[r],f=i.gl,l=i.viewBox,c=i.dataBox,h=i.screenBox,p=i.pixelRatio,d=i.tickEnable,v=i.tickPad,m=i.tickColor,g=i.tickAngle,y=i.labelEnable,b=i.labelPad,w=i.labelColor,E=i.labelAngle,S=this.labelOffset[r],x=this.labelCount[r],T=a.lt(o,c[r]),N=a.le(o,c[r+2]);e[0]=e[1]=0,e[r]=1,t[r]=(l[2+r]+l[r])/(h[2+r]-h[r])-1;var C=2/h[2+(1^r)]-h[1^r];t[1^r]=C*l[1^r]-1,d[r]&&(t[1^r]-=C*p*v[r],T<N&&u[N]>u[T]&&(s.uniforms.dataAxis=e,s.uniforms.screenOffset=t,s.uniforms.color=m[r],s.uniforms.angle=g[r],f.drawArrays(f.TRIANGLES,u[T],u[N]-u[T]))),y[r]&&x&&(t[1^r]-=C*p*b[r],s.uniforms.dataAxis=n,s.uniforms.screenOffset=t,s.uniforms.color=w[r],s.uniforms.angle=E[r],f.drawArrays(f.TRIANGLES,S,x)),t[1^r]=C*l[2+(1^r)]-1,d[r+2]&&(t[1^r]+=C*p*v[r+2],T<N&&u[N]>u[T]&&(s.uniforms.dataAxis=e,s.uniforms.screenOffset=t,s.uniforms.color=m[r+2],s.uniforms.angle=g[r+2],f.drawArrays(f.TRIANGLES,u[T],u[N]-u[T]))),y[r+2]&&x&&(t[1^r]+=C*p*b[r+2],s.uniforms.dataAxis=n,s.uniforms.screenOffset=t,s.uniforms.color=w[r+2],s.uniforms.angle=E[r+2],f.drawArrays(f.TRIANGLES,S,x))}}(),l.drawTitle=function(){var e=[0,0],t=[0,0];return function(){var n=this.plot,r=this.shader,i=n.gl,s=n.screenBox,o=n.titleCenter,u=n.titleAngle,a=n.titleColor,f=n.pixelRatio;if(this.titleCount){for(var l=0;l<2;++l)t[l]=2*(o[l]*f-s[l])/(s[2+l]-s[l])-1;r.bind(),r.uniforms.dataAxis=e,r.uniforms.screenOffset=t,r.uniforms.angle=u,r.uniforms.color=a,i.drawArrays(i.TRIANGLES,this.titleOffset,this.titleCount)}}}(),l.bind=function(){var e=[0,0],t=[0,0],n=[0,0];return function(){var r=this.plot,i=this.shader,s=r._tickBounds,o=r.dataBox,u=r.screenBox,a=r.viewBox;i.bind();for(var f=0;f<2;++f){var l=s[f],c=s[f+2],h=c-l,p=.5*(o[f+2]+o[f]),d=o[f+2]-o[f],v=a[f],m=a[f+2],g=m-v,y=u[f],b=u[f+2],w=b-y;t[f]=2*h/d*g/w,e[f]=2*(l-p)/d*g/w}n[1]=2*r.pixelRatio/(u[3]-u[1]),n[0]=n[1]*(u[3]-u[1])/(u[2]-u[0]),i.uniforms.dataScale=t,i.uniforms.dataShift=e,i.uniforms.textScale=n,this.vbo.bind(),i.attributes.textCoordinate.pointer()}}(),l.update=function(e){var t,n,r,i,s,o=[],a=e.ticks,f=e.bounds;for(s=0;s<2;++s){var l=[Math.floor(o.length/3)],c=[-1/0],h=a[s];for(t=0;t<h.length;++t){var p=h[t],d=p.x,v=p.text,m=p.font||"sans-serif";i=p.fontSize||12;for(var g=1/(f[s+2]-f[s]),y=f[s],b=v.split("\n"),w=0;w<b.length;w++)for(r=u(m,b[w]).data,n=0;n<r.length;n+=2)o.push(r[n]*i,-r[n+1]*i-w*i*1.2,(d-y)*g);l.push(Math.floor(o.length/3)),c.push(d)}this.tickOffset[s]=l,this.tickX[s]=c}for(s=0;s<2;++s){for(this.labelOffset[s]=Math.floor(o.length/3),r=u(e.labelFont[s],e.labels[s],{textAlign:"center"}).data,i=e.labelSize[s],t=0;t<r.length;t+=2)o.push(r[t]*i,-r[t+1]*i,0);this.labelCount[s]=Math.floor(o.length/3)-this.labelOffset[s]}for(this.titleOffset=Math.floor(o.length/3),r=u(e.titleFont,e.title).data,i=e.titleSize,t=0;t<r.length;t+=2)o.push(r[t]*i,-r[t+1]*i,0);this.titleCount=Math.floor(o.length/3)-this.titleOffset,this.vbo.update(o)},l.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":182,"binary-search-bounds":184,"gl-buffer":130,"gl-shader":185,"text-cache":494}],184:[function(e,t,n){arguments[4][74][0].apply(n,arguments)},{dup:74}],185:[function(e,t,n){"use strict";function r(e){this.gl=e,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function i(e,t){return e.name<t.name?-1:1}function s(e,t,n,i,s){var o=new r(e);return o.update(t,n,i,s),o}var o=e("./lib/create-uniforms"),u=e("./lib/create-attributes"),a=e("./lib/reflect"),f=e("./lib/shader-cache"),l=e("./lib/runtime-reflect"),c=e("./lib/GLError"),h=r.prototype;h.bind=function(){this.program||this._relink();var e,t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),n=this.gl.lastAttribCount;if(t>n)for(e=n;e<t;e++)this.gl.enableVertexAttribArray(e);else if(n>t)for(e=t;e<n;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=t,this.gl.useProgram(this.program)},h.dispose=function(){for(var e=this.gl.lastAttribCount,t=0;t<e;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},h.update=function(e,t,n,r){function s(){p.program=f.program(d,p._vref,p._fref,E,S);for(var e=0;e<n.length;++e)L[e]=d.getUniformLocation(p.program,n[e].name)}if(!t||1===arguments.length){var h=e;e=h.vertex,t=h.fragment,n=h.uniforms,r=h.attributes}var p=this,d=p.gl,v=p._vref;p._vref=f.shader(d,d.VERTEX_SHADER,e),v&&v.dispose(),p.vertShader=p._vref.shader;var m=this._fref;if(p._fref=f.shader(d,d.FRAGMENT_SHADER,t),m&&m.dispose(),p.fragShader=p._fref.shader,!n||!r){var g=d.createProgram();if(d.attachShader(g,p.fragShader),d.attachShader(g,p.vertShader),d.linkProgram(g),!d.getProgramParameter(g,d.LINK_STATUS)){var y=d.getProgramInfoLog(g);throw new c(y,"Error linking program:"+y)}n=n||l.uniforms(d,g),r=r||l.attributes(d,g),d.deleteProgram(g)}r=r.slice(),r.sort(i);var b,w=[],E=[],S=[];for(b=0;b<r.length;++b){var x=r[b];if(x.type.indexOf("mat")>=0){for(var T=0|x.type.charAt(x.type.length-1),N=new Array(T),C=0;C<T;++C)N[C]=S.length,E.push(x.name+"["+C+"]"),"number"==typeof x.location?S.push(x.location+C):Array.isArray(x.location)&&x.location.length===T&&"number"==typeof x.location[C]?S.push(0|x.location[C]):S.push(-1);w.push({name:x.name,type:x.type,locations:N})}else w.push({name:x.name,type:x.type,locations:[S.length]}),E.push(x.name),"number"==typeof x.location?S.push(0|x.location):S.push(-1)}var k=0;for(b=0;b<S.length;++b)if(S[b]<0){for(;S.indexOf(k)>=0;)k+=1;S[b]=k}var L=new Array(n.length);s(),p._relink=s,p.types={uniforms:a(n),attributes:a(r)},p.attributes=u(d,p,w,S),Object.defineProperty(p,"uniforms",o(d,p,n,L))},t.exports=s},{"./lib/GLError":186,"./lib/create-attributes":187,"./lib/create-uniforms":188,"./lib/reflect":189,"./lib/runtime-reflect":190,"./lib/shader-cache":191}],186:[function(e,t,n){function r(e,t,n){this.shortMessage=t||"",this.longMessage=n||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(n?"\n"+n:""),this.stack=(new Error).stack}r.prototype=new Error,r.prototype.name="GLError",r.prototype.constructor=r,t.exports=r},{}],187:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){this._gl=e,this._wrapper=t,this._index=n,this._locations=r,this._dimension=i,this._constFunc=s}function i(e,t,n,i,s,o,u){for(var a=["gl","v"],f=[],l=0;l<s;++l)a.push("x"+l),f.push("x"+l);a.push("if(x0.length===void 0){return gl.vertexAttrib"+s+"f(v,"+f.join()+")}else{return gl.vertexAttrib"+s+"fv(v,x0)}");var c=Function.apply(null,a),h=new r(e,t,n,i,s,c);Object.defineProperty(o,u,{set:function(t){return e.disableVertexAttribArray(i[n]),c(e,i[n],t),t},get:function(){return h},enumerable:!0})}function s(e,t,n,r,s,o,u){for(var a=new Array(s),f=new Array(s),l=0;l<s;++l)i(e,t,n[l],r,s,a,l),f[l]=a[l];Object.defineProperty(a,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<s;++t)f[t].location=e[t];else for(var t=0;t<s;++t)f[t].location=e+t;return e},get:function(){for(var e=new Array(s),t=0;t<s;++t)e[t]=r[n[t]];return e},enumerable:!0}),a.pointer=function(t,i,o,u){t=t||e.FLOAT,i=!!i,o=o||s*s,u=u||0;for(var a=0;a<s;++a){var f=r[n[a]];e.vertexAttribPointer(f,s,t,i,o,u+a*s),e.enableVertexAttribArray(f)}};var c=new Array(s),h=e["vertexAttrib"+s+"fv"];Object.defineProperty(o,u,{set:function(t){for(var i=0;i<s;++i){var o=r[n[i]];if(e.disableVertexAttribArray(o),Array.isArray(t[0]))h.call(e,o,t[i]);else{for(var u=0;u<s;++u)c[u]=t[s*i+u];h.call(e,o,c)}}return t},get:function(){return a},enumerable:!0})}function o(e,t,n,r){for(var o={},a=0,f=n.length;a<f;++a){var l=n[a],c=l.name,h=l.type,p=l.locations;switch(h){case"bool":case"int":case"float":i(e,t,p[0],r,1,o,c);break;default:if(h.indexOf("vec")>=0){var d=h.charCodeAt(h.length-1)-48;if(d<2||d>4)throw new u("","Invalid data type for attribute "+c+": "+h);i(e,t,p[0],r,d,o,c)}else{if(!(h.indexOf("mat")>=0))throw new u("","Unknown data type for attribute "+c+": "+h);var d=h.charCodeAt(h.length-1)-48;if(d<2||d>4)throw new u("","Invalid data type for attribute "+c+": "+h);s(e,t,p,r,d,o,c)}}}return o}t.exports=o;var u=e("./GLError"),a=r.prototype;a.pointer=function(e,t,n,r){var i=this,s=i._gl,o=i._locations[i._index];s.vertexAttribPointer(o,i._dimension,e||s.FLOAT,!!t,n||0,r||0),s.enableVertexAttribArray(o)},a.set=function(e,t,n,r){return this._constFunc(this._locations[this._index],e,t,n,r)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}})},{"./GLError":186}],188:[function(e,t,n){"use strict";function r(e){var t=new Function("y","return function(){return y}");return t(e)}function i(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}function s(e,t,n,s){function a(n){var r=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+n+"])}");return r(e,t,s)}function f(e,t,n){switch(n){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var r=n.indexOf("vec");if(!(0<=r&&r<=1&&n.length===4+r)){if(0===n.indexOf("mat")&&4===n.length){var i=n.charCodeAt(n.length-1)-48;if(i<2||i>4)throw new u("","Invalid uniform dimension type for matrix "+name+": "+n);return"gl.uniformMatrix"+i+"fv(locations["+t+"],false,obj"+e+")"}throw new u("","Unknown uniform data type for "+name+": "+n)}var i=n.charCodeAt(n.length-1)-48;if(i<2||i>4)throw new u("","Invalid data type");switch(n.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+i+"fv(locations["+t+"],obj"+e+")";default:throw new u("","Unrecognized data type for vector "+name+": "+n)}}}function l(e,t){if("object"!=typeof t)return[[e,t]];var n=[];for(var r in t){var i=t[r],s=e;s+=parseInt(r)+""===r?"["+r+"]":"."+r,"object"==typeof i?n.push.apply(n,l(s,i)):n.push([s,i])}return n}function c(t){for(var r=["return function updateProperty(obj){"],i=l("",t),o=0;o<i.length;++o){var u=i[o],a=u[0],c=u[1];s[c]&&r.push(f(a,c,n[c].type))}r.push("return obj}");var h=new Function("gl","locations",r.join("\n"));return h(e,s)}function h(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){var n=e.charCodeAt(e.length-1)-48;if(n<2||n>4)throw new u("","Invalid data type");return"b"===e.charAt(0)?i(n,!1):i(n,0)}if(0===e.indexOf("mat")&&4===e.length){var n=e.charCodeAt(e.length-1)-48;if(n<2||n>4)throw new u("","Invalid uniform dimension type for matrix "+name+": "+e);return i(n*n,0)}throw new u("","Unknown uniform data type for "+name+": "+e)}}function p(e,t,i){if("object"==typeof i){var o=d(i);Object.defineProperty(e,t,{get:r(o),set:c(i),enumerable:!0,configurable:!1})}else s[i]?Object.defineProperty(e,t,{get:a(i),set:c(i),enumerable:!0,configurable:!1}):e[t]=h(n[i].type)}function d(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var n=0;n<e.length;++n)p(t,n,e[n])}else{t={};for(var r in e)p(t,r,e[r])}return t}var v=o(n,!0);return{get:r(d(v)),set:c(v),enumerable:!0,configurable:!0}}var o=e("./reflect"),u=e("./GLError");t.exports=s},{"./GLError":186,"./reflect":189}],189:[function(e,t,n){"use strict";function r(e,t){for(var n={},r=0;r<e.length;++r)for(var i=e[r].name,s=i.split("."),o=n,u=0;u<s.length;++u){var a=s[u].split("[");if(a.length>1){a[0]in o||(o[a[0]]=[]),o=o[a[0]];for(var f=1;f<a.length;++f){var l=parseInt(a[f]);f<a.length-1||u<s.length-1?(l in o||(f<a.length-1?o[l]=[]:o[l]={}),o=o[l]):t?o[l]=r:o[l]=e[r].type}}else u<s.length-1?(a[0]in o||(o[a[0]]={}),o=o[a[0]]):t?o[a[0]]=r:o[a[0]]=e[r].type}return n}t.exports=r},{}],190:[function(e,t,n){"use strict";function r(e,t){if(!u){var n=Object.keys(o);u={};for(var r=0;r<n.length;++r){var i=n[r];u[e[i]]=o[i]}}return u[t]}function i(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=[],s=0;s<n;++s){var o=e.getActiveUniform(t,s);if(o){var u=r(e,o.type);if(o.size>1)for(var a=0;a<o.size;++a)i.push({name:o.name.replace("[0]","["+a+"]"),type:u});else i.push({name:o.name,type:u})}}return i}function s(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=[],s=0;s<n;++s){var o=e.getActiveAttrib(t,s);o&&i.push({name:o.name,type:r(e,o.type)})}return i}n.uniforms=i,n.attributes=s;var o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},u=null},{}],191:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){this.id=e,this.src=t,this.type=n,this.shader=r,this.count=s,this.programs=[],this.cache=o}function i(e){this.gl=e,this.shaders=[{},{}],this.programs={}}function s(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(r);try{var s=c(i,n,t)}catch(e){throw console.warn("Failed to format compiler error: "+e),new l(i,"Error compiling shader:\n"+i)}throw new l(i,s.short,s.long)}return r}function o(e,t,n,r,i){var s=e.createProgram();e.attachShader(s,t),e.attachShader(s,n);for(var o=0;o<r.length;++o)e.bindAttribLocation(s,i[o],r[o]);if(e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS)){var u=e.getProgramInfoLog(s);throw new l(u,"Error linking program: "+u)}return s}function u(e){var t=p.get(e);return t||(t=new i(e),p.set(e,t)),t}function a(e,t,n){return u(e).getShaderReference(t,n)}function f(e,t,n,r,i){return u(e).getProgram(t,n,r,i)}n.shader=a,n.program=f;var l=e("./GLError"),c=e("gl-format-compiler-error"),h="undefined"==typeof WeakMap?e("weakmap-shim"):WeakMap,p=new h,d=0;r.prototype.dispose=function(){if(0===--this.count){for(var e=this.cache,t=e.gl,n=this.programs,r=0,i=n.length;r<i;++r){var s=e.programs[n[r]];s&&(delete e.programs[r],t.deleteProgram(s))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var v=i.prototype;v.getShaderReference=function(e,t){var n=this.gl,i=this.shaders[e===n.FRAGMENT_SHADER|0],o=i[t];if(o&&n.isShader(o.shader))o.count+=1;else{var u=s(n,e,t);o=i[t]=new r(d++,t,e,u,[],1,this)}return o},v.getProgram=function(e,t,n,r){var i=[e.id,t.id,n.join(":"),r.join(":")].join("@"),s=this.programs[i];return s&&this.gl.isProgram(s)||(this.programs[i]=s=o(this.gl,e.shader,t.shader,n,r),e.programs.push(i),t.programs.push(i)),s}},{"./GLError":186,"gl-format-compiler-error":138,"weakmap-shim":523}],192:[function(e,t,n){"use strict";function r(e,t){this.gl=e,this.pickBuffer=t,this.screenBox=[0,0,e.drawingBufferWidth,e.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}function i(e){for(var t=e.slice(),n=0;n<t.length;++n)t[n]=t[n].slice();return t}function s(e,t){return e.x-t.x}function o(e){var t=e.gl,n=u(t,[t.drawingBufferWidth,t.drawingBufferHeight]),i=new r(t,n);return i.grid=a(i),i.text=f(i),i.line=l(i),i.box=c(i),i.update(e),i}t.exports=o;var u=e("gl-select-static"),a=e("./lib/grid"),f=e("./lib/text"),l=e("./lib/line"),c=e("./lib/box"),h=r.prototype;h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){return function(){var e=this.gl,t=this.screenBox,n=this.viewBox,r=this.dataBox,i=this.pixelRatio,s=this.grid,o=this.line,u=this.text,a=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){this.dirty=!1,e.bindFramebuffer(e.FRAMEBUFFER,null),e.enable(e.SCISSOR_TEST),e.disable(e.DEPTH_TEST),e.depthFunc(e.LESS),e.depthMask(!1),e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD,e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);var f=this.borderColor;e.clearColor(f[0]*f[3],f[1]*f[3],f[2]*f[3],f[3]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]),e.viewport(n[0],n[1],n[2]-n[0],n[3]-n[1]);var l=this.backgroundColor;e.clearColor(l[0]*l[3],l[1]*l[3],l[2]*l[3],l[3]),e.clear(e.COLOR_BUFFER_BIT),s.draw();var c=this.zeroLineEnable,h=this.zeroLineColor,p=this.zeroLineWidth;if(c[0]||c[1]){o.bind();for(var d=0;d<2;++d)if(c[d]&&r[d]<=0&&r[d+2]>=0){var v=t[d]-r[d]*(t[d+2]-t[d])/(r[d+2]-r[d]);0===d?o.drawLine(v,t[1],v,t[3],p[d],h[d]):o.drawLine(t[0],v,t[2],v,p[d],h[d])}}for(var d=0;d<a.length;++d)a[d].draw();e.viewport(t[0],t[1],t[2]-t[0],t[3]-t[1]),e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.grid.drawTickMarks(),o.bind();var m=this.borderLineEnable,g=this.borderLineWidth,y=this.borderLineColor;m[1]&&o.drawLine(n[0],n[1]-.5*g[1]*i,n[0],n[3]+.5*g[3]*i,g[1],y[1]),m[0]&&o.drawLine(n[0]-.5*g[0]*i,n[1],n[2]+.5*g[2]*i,n[1],g[0],y[0]),m[3]&&o.drawLine(n[2],n[1]-.5*g[1]*i,n[2],n[3]+.5*g[3]*i,g[3],y[3]),m[2]&&o.drawLine(n[0]-.5*g[0]*i,n[3],n[2]+.5*g[2]*i,n[3],g[2],y[2]),u.bind();for(var d=0;d<2;++d)u.drawTicks(d);this.titleEnable&&u.drawTitle();for(var b=this.overlays,d=0;d<b.length;++d)b[d].draw();e.disable(e.SCISSOR_TEST),e.disable(e.BLEND),e.depthMask(!0)}}}(),h.drawPick=function(){return function(){if(!this.static){var e=this.pickBuffer;this.gl,this._pickTimeout=null,e.begin();for(var t=1,n=this.objects,r=0;r<n.length;++r)t=n[r].drawPick(t);e.end()}}}(),h.pick=function(){return function(e,t){if(!this.static){var n=this.pixelRatio,r=this.pickPixelRatio,i=this.viewBox,s=0|Math.round((e-i[0]/n)*r),o=0|Math.round((t-i[1]/n)*r),u=this.pickBuffer.query(s,o,this.pickRadius);if(!u)return null;for(var a=u.id+(u.value[0]<<8)+(u.value[1]<<16)+(u.value[2]<<24),f=this.objects,l=0;l<f.length;++l){var c=f[l].pick(s,o,a);if(c)return c}return null}}}(),h.setScreenBox=function(e){var t=this.screenBox,n=this.pixelRatio;t[0]=0|Math.round(e[0]*n),t[1]=0|Math.round(e[1]*n),t[2]=0|Math.round(e[2]*n),t[3]=0|Math.round(e[3]*n),this.setDirty()},h.setDataBox=function(e){var t=this.dataBox,n=t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3];n&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.setDirty())},h.setViewBox=function(e){var t=this.pixelRatio,n=this.viewBox;n[0]=0|Math.round(e[0]*t),n[1]=0|Math.round(e[1]*t),n[2]=0|Math.round(e[2]*t),n[3]=0|Math.round(e[3]*t);var r=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((e[2]-e[0])*r),0|Math.round((e[3]-e[1])*r)],this.setDirty()},h.update=function(e){e=e||{};var t=this.gl;this.pixelRatio=e.pixelRatio||1;var n=this.pixelRatio;this.pickPixelRatio=Math.max(n,1),this.setScreenBox(e.screenBox||[0,0,t.drawingBufferWidth/n,t.drawingBufferHeight/n]),this.screenBox,this.setViewBox(e.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/n,.125*(this.screenBox[3]-this.screenBox[1])/n,.875*(this.screenBox[2]-this.screenBox[0])/n,.875*(this.screenBox[3]-this.screenBox[1])/n]);var r=this.viewBox,o=(r[2]-r[0])/(r[3]-r[1]);this.setDataBox(e.dataBox||[-10,-10/o,10,10/o]),this.borderColor=(e.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(e.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(e.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(e.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(e.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(e.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(e.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(e.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(e.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(e.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(e.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(e.titleCenter||[.5*(r[0]+r[2])/n,(r[3]+120)/n]).slice(),this.titleEnable=!("titleEnable"in e&&!e.titleEnable),this.titleAngle=e.titleAngle||0,this.titleColor=(e.titleColor||[0,0,0,1]).slice(),this.labelPad=(e.labelPad||[15,15,15,15]).slice(),this.labelAngle=(e.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(e.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(e.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(e.tickPad||[15,15,15,15]).slice(),this.tickAngle=(e.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(e.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(e.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(e.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(e.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(e.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var u=e.ticks||[[],[]],a=this._tickBounds;a[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(var f=0;f<2;++f){var l=u[f].slice(0);0!==l.length&&(l.sort(s),a[f]=Math.min(a[f],l[0].x),a[f+2]=Math.max(a[f+2],l[l.length-1].x))}this.grid.update({bounds:a,ticks:u}),this.text.update({bounds:a,ticks:u,labels:e.labels||["x","y"],labelSize:e.labelSize||[12,12],labelFont:e.labelFont||["sans-serif","sans-serif"],title:e.title||"",titleSize:e.titleSize||18,titleFont:e.titleFont||"sans-serif"}),this.static=!!e.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var e=this.objects.length-1;e>=0;--e)this.objects[e].dispose();this.objects.length=0;for(var e=this.overlays.length-1;e>=0;--e)this.overlays[e].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(e){this.objects.indexOf(e)<0&&(this.objects.push(e),this.setDirty())},h.removeObject=function(e){for(var t=this.objects,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setDirty();break}},h.addOverlay=function(e){this.overlays.indexOf(e)<0&&(this.overlays.push(e),this.setOverlayDirty())},h.removeOverlay=function(e){for(var t=this.overlays,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setOverlayDirty();break}}},{"./lib/box":179,"./lib/grid":180,"./lib/line":181,"./lib/text":183,"gl-select-static":224}],193:[function(e,t,n){var r=e("gl-shader"),i="precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}",s="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}";t.exports=function(e){return r(e,i,s,null,[{name:"position",type:"vec2"}])}},{"gl-shader":225}],194:[function(e,t,n){"use strict";function r(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function i(e,t){var n=null;try{n=e.getContext("webgl",t),n||(n=e.getContext("experimental-webgl",t))}catch(e){return null}return n}function s(e){var t=Math.round(Math.log(Math.abs(e))/Math.log(10));if(t<0){var n=Math.round(Math.pow(10,-t));return Math.ceil(e*n)/n}if(t>0){var n=Math.round(Math.pow(10,t));return Math.ceil(e/n)*n}return Math.ceil(e)}function o(e){return"boolean"!=typeof e||e}function u(e){function t(){if(!E&&W.autoResize){var e=S.parentNode,t=1,n=1;e&&e!==document.body?(t=e.clientWidth,n=e.clientHeight):(t=window.innerWidth,n=window.innerHeight);var r=0|Math.ceil(t*W.pixelRatio),i=0|Math.ceil(n*W.pixelRatio);if(r!==S.width||i!==S.height){S.width=r,S.height=i;var s=S.style;s.position=s.position||"absolute",s.left="0px",s.top="0px",s.width=t+"px",s.height=n+"px",F=!0}}}function n(){for(var e=P.length,t=j.length,n=0;n<t;++n)B[n]=0;e:for(var n=0;n<e;++n){var r=P[n],i=r.pickSlots;if(i){for(var s=0;s<t;++s)if(B[s]+i<255){H[n]=s,r.setPickBase(B[s]+1),B[s]+=i;continue e}var o=h(T,z);H[n]=t,j.push(o),B.push(i),r.setPickBase(1),t+=1}else H[n]=-1}for(;t>0&&0===B[t-1];)B.pop(),j.pop().dispose()}function u(){return!!W.contextLost||void (T.isContextLost()&&(W.contextLost=!0,W.mouseListener.enabled=!1,W.selection.object=null,W.oncontextloss&&W.oncontextloss()))}function y(){if(!u()){T.colorMask(!0,!0,!0,!0),T.depthMask(!0),T.disable(T.BLEND),T.enable(T.DEPTH_TEST);for(var e=P.length,t=j.length,n=0;n<t;++n){var r=j[n];r.shape=X,r.begin();for(var i=0;i<e;++i)if(H[i]===n){var s=P[i];s.drawPick&&(s.pixelRatio=1,s.drawPick(U))}r.end()}}}function b(){if(!u()){t();var e=W.camera.tick();U.view=W.camera.matrix,F=F||e,I=I||e,M.pixelRatio=W.pixelRatio,D.pixelRatio=W.pixelRatio;var n=P.length,r=J[0],i=J[1];r[0]=r[1]=r[2]=1/0,i[0]=i[1]=i[2]=-1/0;for(var o=0;o<n;++o){var a=P[o];a.pixelRatio=W.pixelRatio,a.axes=W.axes,F=F||!!a.dirty,I=I||!!a.dirty;var f=a.bounds;if(f)for(var c=f[0],h=f[1],p=0;p<3;++p)r[p]=Math.min(r[p],c[p]),i[p]=Math.max(i[p],h[p])}var v=W.bounds;if(W.autoBounds)for(var p=0;p<3;++p){if(i[p]<r[p])r[p]=-1,i[p]=1;else{r[p]===i[p]&&(r[p]-=1,i[p]+=1);var g=.05*(i[p]-r[p]);r[p]=r[p]-g,i[p]=i[p]+g}v[0][p]=r[p],v[1][p]=i[p]}for(var b=!1,p=0;p<3;++p)b=b||K[0][p]!==v[0][p]||K[1][p]!==v[1][p],K[0][p]=v[0][p],K[1][p]=v[1][p];if(b){for(var w=[0,0,0],o=0;o<3;++o)w[o]=s((v[1][o]-v[0][o])/10);M.autoTicks?M.update({bounds:v,tickSpacing:w}):M.update({bounds:v})}I=I||b,F=F||b;var E=T.drawingBufferWidth,S=T.drawingBufferHeight;z[0]=E,z[1]=S,X[0]=0|Math.max(E/W.pixelRatio,1),X[1]=0|Math.max(S/W.pixelRatio,1),m(q,W.fovy,E/S,W.zNear,W.zFar);for(var o=0;o<16;++o)R[o]=0;R[15]=1;for(var x=0,o=0;o<3;++o)x=Math.max(x,v[1][o]-v[0][o]);for(var o=0;o<3;++o)W.autoScale?R[5*o]=W.aspect[o]/(v[1][o]-v[0][o]):R[5*o]=1/x,W.autoCenter&&(R[12+o]=.5*-R[5*o]*(v[0][o]+v[1][o]));for(var o=0;o<n;++o){var a=P[o];a.axesBounds=v,W.clipToBounds&&(a.clipBounds=v)}if(C.object&&(W.snapToData?D.position=C.dataCoordinate:D.position=C.dataPosition,D.bounds=v),I&&(I=!1,y()),F){W.axesPixels=l(W.axes,U,E,S),W.onrender&&W.onrender(),T.bindFramebuffer(T.FRAMEBUFFER,null),T.viewport(0,0,E,S);var N=W.clearColor;T.clearColor(N[0],N[1],N[2],N[3]),T.clear(T.COLOR_BUFFER_BIT|T.DEPTH_BUFFER_BIT),T.depthMask(!0),T.colorMask(!0,!0,!0,!0),T.enable(T.DEPTH_TEST),T.depthFunc(T.LEQUAL),T.disable(T.BLEND),T.disable(T.CULL_FACE);var A=!1;M.enable&&(A=A||M.isTransparent(),M.draw(U)),D.axes=M,C.object&&D.draw(U),T.disable(T.CULL_FACE);for(var o=0;o<n;++o){var a=P[o];a.axes=M,a.pixelRatio=W.pixelRatio,a.isOpaque&&a.isOpaque()&&a.draw(U),a.isTransparent&&a.isTransparent()&&(A=!0)}if(A){k.shape=z,k.bind(),T.clear(T.DEPTH_BUFFER_BIT),T.colorMask(!1,!1,!1,!1),T.depthMask(!0),T.depthFunc(T.LESS),M.enable&&M.isTransparent()&&M.drawTransparent(U);for(var o=0;o<n;++o){var a=P[o];a.isOpaque&&a.isOpaque()&&a.draw(U)}T.enable(T.BLEND),T.blendEquation(T.FUNC_ADD),T.blendFunc(T.ONE,T.ONE_MINUS_SRC_ALPHA),T.colorMask(!0,!0,!0,!0),T.depthMask(!1),T.clearColor(0,0,0,0),T.clear(T.COLOR_BUFFER_BIT),M.isTransparent()&&M.drawTransparent(U);for(var o=0;o<n;++o){var a=P[o];a.isTransparent&&a.isTransparent()&&a.drawTransparent(U)}T.bindFramebuffer(T.FRAMEBUFFER,null),T.blendFunc(T.ONE,T.ONE_MINUS_SRC_ALPHA),T.disable(T.DEPTH_TEST),L.bind(),k.color[0].bind(0),L.uniforms.accumBuffer=0,d(T),T.disable(T.BLEND)}F=!1;for(var o=0;o<n;++o)P[o].dirty=!1}}}function w(){E||W.contextLost||(requestAnimationFrame(w),b())}e=e||{};var E=!1,S=(e.pixelRatio||parseFloat(window.devicePixelRatio),e.canvas);if(!S)if(S=document.createElement("canvas"),e.container){var x=e.container;x.appendChild(S)}else document.body.appendChild(S);var T=e.gl;if(T||(T=i(S,e.glOptions||{premultipliedAlpha:!0,antialias:!0})),!T)throw new Error("webgl not supported");var N=e.bounds||[[-10,-10,-10],[10,10,10]],C=new r,k=p(T,[T.drawingBufferWidth,T.drawingBufferHeight],{preferFloat:!0}),L=g(T),A=e.camera||{eye:[2,0,0],center:[0,0,0],up:[0,1,0],zoomMin:.1,zoomMax:100,mode:"turntable"},O=e.axes||{},M=f(T,O);M.enable=!O.disable;var _=e.spikes||{},D=c(T,_),P=[],H=[],B=[],j=[],F=!0,I=!0,q=new Array(16),R=new Array(16),U={view:null,projection:q,model:R},I=!0,z=[T.drawingBufferWidth,T.drawingBufferHeight],W={gl:T,contextLost:!1,pixelRatio:e.pixelRatio||parseFloat(window.devicePixelRatio),canvas:S,selection:C,camera:a(S,A),axes:M,axesPixels:null,spikes:D,bounds:N,objects:P,shape:z,aspect:e.aspectRatio||[1,1,1],pickRadius:e.pickRadius||10,zNear:e.zNear||.01,zFar:e.zFar||1e3,fovy:e.fovy||Math.PI/4,clearColor:e.clearColor||[0,0,0,0],autoResize:o(e.autoResize),autoBounds:o(e.autoBounds),autoScale:!!e.autoScale,autoCenter:o(e.autoCenter),clipToBounds:o(e.clipToBounds),snapToData:!!e.snapToData,onselect:e.onselect||null,onrender:e.onrender||null,onclick:e.onclick||null,cameraParams:U,oncontextloss:null,mouseListener:null},X=[T.drawingBufferWidth/W.pixelRatio|0,T.drawingBufferHeight/W.pixelRatio|0];W.autoResize&&t(),window.addEventListener("resize",t),W.update=function(e){E||(e=e||{},F=!0,I=!0)},W.add=function(e){E||(e.axes=M,P.push(e),H.push(-1),F=!0,I=!0,n())},W.remove=function(e){if(!E){var t=P.indexOf(e);t<0||(P.splice(t,1),H.pop(),F=!0,I=!0,n())}},W.dispose=function(){if(!E&&(E=!0,window.removeEventListener("resize",t),S.removeEventListener("webglcontextlost",u),W.mouseListener.enabled=!1,!W.contextLost)){M.dispose(),D.dispose();for(var e=0;e<P.length;++e)P[e].dispose();k.dispose();for(var e=0;e<j.length;++e)j[e].dispose();L.dispose(),T=null,M=null,D=null,P=[]}};var V=!1,$=0;W.mouseListener=v(S,function(e,t,n){if(!E){var r=j.length,i=P.length,s=C.object;C.distance=1/0,C.mouse[0]=t,C.mouse[1]=n,C.object=null,C.screen=null,C.dataCoordinate=C.dataPosition=null;var o=!1;if(e&&$)V=!0;else{V&&(I=!0),V=!1;for(var u=0;u<r;++u){var a=j[u].query(t,X[1]-n-1,W.pickRadius);if(a){if(a.distance>C.distance)continue;for(var f=0;f<i;++f){var l=P[f];if(H[f]===u){var c=l.pick(a);c&&(C.buttons=e,C.screen=a.coord,C.distance=a.distance,C.object=l,C.index=c.distance,C.dataPosition=c.position,C.dataCoordinate=c.dataCoordinate,C.data=c,o=!0)}}}}}s&&s!==C.object&&(s.highlight&&s.highlight(null),F=!0),C.object&&(C.object.highlight&&C.object.highlight(C.data),F=!0),o=o||C.object!==s,o&&W.onselect&&W.onselect(C),1&e&&!(1&$)&&W.onclick&&W.onclick(C),$=e}}),S.addEventListener("webglcontextlost",u);var J=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],K=[J[0].slice(),J[1].slice()];return w(),W.redraw=function(){E||(F=!0,b())},W}t.exports=u;var a=e("3d-view-controls"),f=e("gl-axes3d"),l=e("gl-axes3d/properties"),c=e("gl-spikes3d"),h=e("gl-select-static"),p=e("gl-fbo"),d=e("a-big-triangle"),v=e("mouse-change"),m=e("gl-mat4/perspective"),g=e("./lib/shader")},{"./lib/shader":193,"3d-view-controls":28,"a-big-triangle":30,"gl-axes3d":122,"gl-axes3d/properties":129,"gl-fbo":137,"gl-mat4/perspective":157,"gl-select-static":224,"gl-spikes3d":234,"mouse-change":418}],195:[function(e,t,n){n.pointVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}",n.pointFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n",n.pickVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n",n.pickFragment="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"},{}],196:[function(e,t,n){arguments[4][185][0].apply(n,arguments)},{"./lib/GLError":197,"./lib/create-attributes":198,"./lib/create-uniforms":199,"./lib/reflect":200,"./lib/runtime-reflect":201,"./lib/shader-cache":202,dup:185}],197:[function(e,t,n){arguments[4][186][0].apply(n,arguments)},{dup:186}],198:[function(e,t,n){arguments[4][187][0].apply(n,arguments)},{"./GLError":197,dup:187}],199:[function(e,t,n){arguments[4][188][0].apply(n,arguments)},{"./GLError":197,"./reflect":200,dup:188}],200:[function(e,t,n){arguments[4][189][0].apply(n,arguments)},{dup:189}],201:[function(e,t,n){arguments[4][190][0].apply(n,arguments)},{dup:190}],202:[function(e,t,n){arguments[4][191][0].apply(n,arguments)},{"./GLError":197,dup:191,"gl-format-compiler-error":138,"weakmap-shim":523}],203:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.plot=e,this.offsetBuffer=t,this.pickBuffer=n,this.shader=r,this.pickShader=i,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}function i(e,t){var n,r=0,i=e.length>>>1;for(n=0;n<i;n++){var s=e[2*n],o=e[2*n+1];s>=t[0]&&s<=t[2]&&o>=t[1]&&o<=t[3]&&r++}return r}function s(e,t){var n=e.gl,i=u(n),s=u(n),a=o(n,f.pointVertex,f.pointFragment),l=o(n,f.pickVertex,f.pickFragment),c=new r(e,i,s,a,l);return c.update(t),e.addObject(c),c}var o=e("gl-shader"),u=e("gl-buffer"),a=e("typedarray-pool"),f=e("./lib/shader");t.exports=s;var l=r.prototype;l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},l.update=function(e){function t(t,n){return t in e?e[t]:n}var n;e=e||{},this.sizeMin=t("sizeMin",.5),this.sizeMax=t("sizeMax",20),this.color=t("color",[1,0,0,1]).slice(),this.areaRatio=t("areaRatio",1),this.borderColor=t("borderColor",[0,0,0,1]).slice(),this.blend=t("blend",!1);var r=e.positions.length>>>1,i=e.positions instanceof Float32Array,s=e.idToIndex instanceof Int32Array&&e.idToIndex.length>=r,o=e.positions,u=i?o:a.mallocFloat32(o.length),f=s?e.idToIndex:a.mallocInt32(r);if(i||u.set(o),!s)for(u.set(o),n=0;n<r;n++)f[n]=n;this.points=o,this.offsetBuffer.update(u),this.pickBuffer.update(f),i||a.free(u),s||a.free(f),this.pointCount=r,this.pickOffset=0},l.unifiedDraw=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(n){var r=void 0!==n,s=r?this.pickShader:this.shader,o=this.plot.gl,u=this.plot.dataBox;if(0===this.pointCount)return n;var a=u[2]-u[0],f=u[3]-u[1],l=i(this.points,u),c=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(l,.33333)));e[0]=2/a,e[4]=2/f,e[6]=-2*u[0]/a-1,e[7]=-2*u[1]/f-1,this.offsetBuffer.bind(),s.bind(),s.attributes.position.pointer(),s.uniforms.matrix=e,s.uniforms.color=this.color,s.uniforms.borderColor=this.borderColor,s.uniforms.pointCloud=c<5,s.uniforms.pointSize=c,s.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),r&&(t[0]=255&n,t[1]=n>>8&255,t[2]=n>>16&255,t[3]=n>>24&255,this.pickBuffer.bind(),s.attributes.pickId.pointer(o.UNSIGNED_BYTE),s.uniforms.pickOffset=t,this.pickOffset=n);var h=o.getParameter(o.BLEND),p=o.getParameter(o.DITHER);return h&&!this.blend&&o.disable(o.BLEND),p&&o.disable(o.DITHER),o.drawArrays(o.POINTS,0,this.pointCount),h&&!this.blend&&o.enable(o.BLEND),p&&o.enable(o.DITHER),n+this.pointCount}}(),l.draw=l.unifiedDraw,l.drawPick=l.unifiedDraw,l.pick=function(e,t,n){var r=this.pickOffset,i=this.pointCount;if(n<r||n>=r+i)return null;var s=n-r,o=this.points;return{object:this,pointId:s,dataCoord:[o[2*s],o[2*s+1]]}}},{"./lib/shader":195,"gl-buffer":130,"gl-shader":196,"typedarray-pool":502}],204:[function(e,t,n){function r(e,t,n,r){var i,s,o,u,a,f=t[0],l=t[1],c=t[2],h=t[3],p=n[0],d=n[1],v=n[2],m=n[3];return s=f*p+l*d+c*v+h*m,s<0&&(s=-s,p=-p,d=-d,v=-v,m=-m),1-s>1e-6?(i=Math.acos(s),o=Math.sin(i),u=Math.sin((1-r)*i)/o,a=Math.sin(r*i)/o):(u=1-r,a=r),e[0]=u*f+a*p,e[1]=u*l+a*d,e[2]=u*c+a*v,e[3]=u*h+a*m,e}t.exports=r},{}],205:[function(e,t,n){"use strict";t.exports={vertex:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 positionHi, positionLo;\nattribute vec2 offset;\nattribute vec4 color;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo, pixelScale;\n\nvarying vec4 fragColor;\n\n\nvec4 computePosition_1_0(vec2 posHi, vec2 posLo, vec2 scHi, vec2 scLo, vec2 trHi, vec2 trLo, vec2 screenScale, vec2 screenOffset) {\n  return vec4((posHi + trHi) * scHi\n            + (posLo + trLo) * scHi\n            + (posHi + trHi) * scLo\n            + (posLo + trLo) * scLo\n            + screenScale * screenOffset, 0, 1);\n}\n\nvoid main() {\n  fragColor = color;\n\n  gl_Position = computePosition_1_0(\n    positionHi, positionLo,\n    scaleHi, scaleLo,\n    translateHi, translateLo,\n    pixelScale, offset);\n}\n",fragment:"precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n",pickVertex:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 positionHi, positionLo;\nattribute vec2 offset;\nattribute vec4 id;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo, pixelScale;\nuniform vec4 pickOffset;\n\nvarying vec4 fragColor;\n\n\nvec4 computePosition_1_0(vec2 posHi, vec2 posLo, vec2 scHi, vec2 scLo, vec2 trHi, vec2 trLo, vec2 screenScale, vec2 screenOffset) {\n  return vec4((posHi + trHi) * scHi\n            + (posLo + trLo) * scHi\n            + (posHi + trHi) * scLo\n            + (posLo + trLo) * scLo\n            + screenScale * screenOffset, 0, 1);\n}\n\nvoid main() {\n  vec4 fragId = id + pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  fragColor = fragId / 255.0;\n\n  gl_Position = computePosition_1_0(\n    positionHi, positionLo,\n    scaleHi, scaleLo,\n    translateHi, translateLo,\n    pixelScale, offset);\n}\n",pickFragment:"precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = fragColor;\n}\n"}},{}],206:[function(e,t,n){arguments[4][185][0].apply(n,arguments)},{"./lib/GLError":207,"./lib/create-attributes":208,"./lib/create-uniforms":209,"./lib/reflect":210,"./lib/runtime-reflect":211,"./lib/shader-cache":212,dup:185}],207:[function(e,t,n){arguments[4][186][0].apply(n,arguments)},{dup:186}],208:[function(e,t,n){arguments[4][187][0].apply(n,arguments)},{"./GLError":207,dup:187}],209:[function(e,t,n){arguments[4][188][0].apply(n,arguments)},{"./GLError":207,"./reflect":210,dup:188}],210:[function(e,t,n){arguments[4][189][0].apply(n,arguments)},{dup:189}],211:[function(e,t,n){arguments[4][190][0].apply(n,arguments)},{dup:190}],212:[function(e,t,n){arguments[4][191][0].apply(n,arguments)},{"./GLError":207,dup:191,"gl-format-compiler-error":138,"weakmap-shim":523}],213:[function(e,t,n){"use strict";function r(e){if(e in h)return h[e];var t=l(e,{polygons:!0,font:"sans-serif",textAlign:"left",textBaseline:"alphabetic"}),n=[],r=[];t.forEach(function(e){e.forEach(function(e){for(var t=0;t<e.length;++t){var i=e[(t+e.length-1)%e.length],s=e[t],o=e[(t+1)%e.length],u=e[(t+2)%e.length],a=s[0]-i[0],f=s[1]-i[1],l=Math.sqrt(a*a+f*f);a/=l,f/=l,n.push(i[0],i[1]+1.4),r.push(f,-a),n.push(i[0],i[1]+1.4),r.push(-f,a),n.push(s[0],s[1]+1.4),r.push(-f,a),n.push(s[0],s[1]+1.4),r.push(-f,a),n.push(i[0],i[1]+1.4),r.push(f,-a),n.push(s[0],s[1]+1.4),r.push(f,-a);var c=u[0]-o[0],h=u[1]-o[1],p=Math.sqrt(c*c+h*h);c/=p,h/=p,n.push(s[0],s[1]+1.4),r.push(f,-a),n.push(s[0],s[1]+1.4),r.push(-f,a),n.push(o[0],o[1]+1.4),r.push(-h,c),n.push(o[0],o[1]+1.4),r.push(-h,c),n.push(s[0],s[1]+1.4),r.push(h,-c),n.push(o[0],o[1]+1.4),r.push(h,-c)}})});for(var i=[1/0,1/0,-1/0,-1/0],s=0;s<n.length;s+=2)for(var o=0;o<2;++o)i[o]=Math.min(i[o],n[s+o]),i[2+o]=Math.max(i[2+o],n[s+o]);return h[e]={coords:n,normals:r,bounds:i}}function i(e,t,n,r,i,s,o,u){this.plot=e,this.shader=t,this.pickShader=n,this.posHiBuffer=r,this.posLoBuffer=i,this.offsetBuffer=s,this.colorBuffer=o,this.idBuffer=u,this.bounds=[1/0,1/0,-1/0,-1/0],this.numPoints=0,this.numVertices=0,this.pickOffset=0,this.points=null}function s(e,t){var n=e.gl,r=o(n,c.vertex,c.fragment),s=o(n,c.pickVertex,c.pickFragment),a=u(n),f=u(n),l=u(n),h=u(n),p=u(n),d=new i(e,r,s,a,f,l,h,p);return d.update(t),e.addObject(d),d}t.exports=s;var o=e("gl-shader"),u=e("gl-buffer"),a=e("text-cache"),f=e("typedarray-pool"),l=e("vectorize-text"),c=e("./lib/shaders"),h={},p=i.prototype;!function(){function e(){var e=this.plot,o=this.bounds,u=e.viewBox,a=e.dataBox,f=e.pixelRatio,l=o[2]-o[0],c=o[3]-o[1],h=a[2]-a[0],p=a[3]-a[1],d=2*l/h,v=2*c/p,m=(o[0]-a[0]-.5*h)/l,g=(o[1]-a[1]-.5*p)/c;t[0]=d,n[0]=d-t[0],t[1]=v,n[1]=v-t[1],r[0]=m,i[0]=m-r[0],r[1]=g,i[1]=g-r[1];var y=u[2]-u[0],b=u[3]-u[1];s[0]=2*f/y,s[1]=2*f/b}var t=new Float32Array([0,0]),n=new Float32Array([0,0]),r=new Float32Array([0,0]),i=new Float32Array([0,0]),s=[0,0],o=[0,0,0,0];p.drawPick=function(u){var a=void 0!==u,f=this.plot,l=this.numVertices;if(!l)return u;e.call(this);var c=f.gl,h=a?this.pickShader:this.shader;if(h.bind(),a){this.pickOffset=u;for(var p=0;p<4;++p)o[p]=u>>8*p&255;h.uniforms.pickOffset=o,this.idBuffer.bind(),h.attributes.id.pointer(c.UNSIGNED_BYTE,!1)}else this.colorBuffer.bind(),h.attributes.color.pointer(c.UNSIGNED_BYTE,!0);return this.posHiBuffer.bind(),h.attributes.positionHi.pointer(),this.posLoBuffer.bind(),h.attributes.positionLo.pointer(),this.offsetBuffer.bind(),h.attributes.offset.pointer(),h.uniforms.pixelScale=s,h.uniforms.scaleHi=t,h.uniforms.scaleLo=n,h.uniforms.translateHi=r,h.uniforms.translateLo=i,c.drawArrays(c.TRIANGLES,0,l),a?u+this.numPoints:void 0}}(),p.draw=p.drawPick,p.pick=function(e,t,n){var r=this.pickOffset,i=this.numPoints;if(n<r||n>=r+i)return null;var s=n-r,o=this.points;return{object:this,pointId:s,dataCoord:[o[2*s],o[2*s+1]]}},p.update=function(e){e=e||{};var t,n,i=e.positions||[],s=e.colors||[],o=e.glyphs||[],u=e.sizes||[],l=e.borderWidths||[],c=e.borderColors||[];this.points=i;var h,p,d=this.bounds=[1/0,1/0,-1/0,-1/0],v=0,m=[],g=[];for(t=0;t<o.length;++t)for(h=a("sans-serif",o[t]),p=r(o[t]),m.push(h),g.push(p),v+=h.data.length+p.coords.length>>1,n=0;n<2;++n)d[n]=Math.min(d[n],i[2*t+n]),d[2+n]=Math.max(d[2+n],i[2*t+n]);d[0]===d[2]&&(d[2]+=1),d[3]===d[1]&&(d[3]+=1);var y=1/(d[2]-d[0]),b=1/(d[3]-d[1]),w=d[0],E=d[1],S=f.mallocFloat64(2*v),x=f.mallocFloat32(2*v),T=f.mallocFloat32(2*v),N=f.mallocFloat32(2*v),C=f.mallocUint8(4*v),k=f.mallocUint32(v),L=0;for(t=0;t<o.length;++t){h=m[t],p=g[t];var A=y*(i[2*t]-w),O=b*(i[2*t+1]-E),M=u[t],_=255*s[4*t],D=255*s[4*t+1],P=255*s[4*t+2],H=255*s[4*t+3],B=.5*(p.bounds[0]+p.bounds[2]),j=.5*(p.bounds[1]+p.bounds[3]);for(n=0;n<h.data.length;n+=2)S[2*L]=A,S[2*L+1]=O,N[2*L]=-M*(h.data[n]-B),N[2*L+1]=-M*(h.data[n+1]-j),C[4*L]=_,C[4*L+1]=D,C[4*L+2]=P,C[4*L+3]=H,k[L]=t,L+=1;var F=l[t];for(_=255*c[4*t],D=255*c[4*t+1],P=255*c[4*t+2],H=255*c[4*t+3],n=0;n<p.coords.length;n+=2)S[2*L]=A,S[2*L+1]=O,N[2*L]=-(M*(p.coords[n]-B)+F*p.normals[n]),N[2*L+1]=-(M*(p.coords[n+1]-j)+F*p.normals[n+1]),C[4*L]=_,C[4*L+1]=D,C[4*L+2]=P,C[4*L+3]=H,k[L]=t,L+=1}for(this.numPoints=o.length,this.numVertices=v,x.set(S),t=0;t<S.length;t++)T[t]=S[t]-x[t];this.posHiBuffer.update(x),this.posLoBuffer.update(T),this.offsetBuffer.update(N),this.colorBuffer.update(C),this.idBuffer.update(k),f.free(S),f.free(x),f.free(T),f.free(N),f.free(C),f.free(k)},p.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.posHiBuffer.dispose(),this.posLoBuffer.dispose(),this.offsetBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":205,"gl-buffer":130,"gl-shader":206,"text-cache":494,"typedarray-pool":502,"vectorize-text":515}],214:[function(e,t,n){n.pointVertex="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 positionHi, positionLo;\nattribute float weight;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo;\nuniform float pointSize, useWeight;\n\nvarying float fragWeight;\n\n\nvec4 pfx_1_0(vec2 scaleHi, vec2 scaleLo, vec2 translateHi, vec2 translateLo, vec2 positionHi, vec2 positionLo) {\n  return vec4((positionHi + translateHi) * scaleHi\n            + (positionLo + translateLo) * scaleHi\n            + (positionHi + translateHi) * scaleLo\n            + (positionLo + translateLo) * scaleLo, 0.0, 1.0);\n}\n\nvoid main() {\n  gl_Position = pfx_1_0(scaleHi, scaleLo, translateHi, translateLo, positionHi, positionLo);\n  gl_PointSize = pointSize;\n  fragWeight = mix(1.0, weight, useWeight);\n}",n.pointFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\n\nvarying float fragWeight;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  vec4 baseColor = mix(borderColor, color, smoothStep(radius, centerFraction));\n  float alpha = 1.0 - pow(1.0 - baseColor.a, fragWeight);\n  gl_FragColor = vec4(baseColor.rgb * alpha, alpha);\n}",n.pickVertex="precision highp float;\n#define GLSLIFY 1\n\nvec4 pfx_1_0(vec2 scaleHi, vec2 scaleLo, vec2 translateHi, vec2 translateLo, vec2 positionHi, vec2 positionLo) {\n  return vec4((positionHi + translateHi) * scaleHi\n            + (positionLo + translateLo) * scaleHi\n            + (positionHi + translateHi) * scaleLo\n            + (positionLo + translateLo) * scaleLo, 0.0, 1.0);\n}\n\nattribute vec2 positionHi, positionLo;\nattribute vec4 pickId;\n\nuniform vec2 scaleHi, scaleLo, translateHi, translateLo;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_Position = pfx_1_0(scaleHi, scaleLo, translateHi, translateLo, positionHi, positionLo);\n  gl_PointSize = pointSize;\n  fragId = id;\n}",n.pickFragment="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}"},{}],215:[function(e,t,n){arguments[4][74][0].apply(n,arguments)},{dup:74}],216:[function(e,t,n){"use strict";function r(e,t,n,r,s){s<=4*h?i(0,s-1,e,t,n,r):c(0,s-1,e,t,n,r)}function i(e,t,n,r,i,s){for(var o=e+1;o<=t;++o){for(var u=n[o],a=r[2*o],f=r[2*o+1],l=i[o],c=s[o],h=o;h>e;){var p=n[h-1],d=r[2*(h-1)];if((p-u||a-d)>=0)break;n[h]=p,r[2*h]=d,r[2*h+1]=r[2*h-1],i[h]=i[h-1],s[h]=s[h-1],h-=1}n[h]=u,r[2*h]=a,r[2*h+1]=f,i[h]=l,s[h]=c}}function s(e,t,n,r,i,s){var o=n[e],u=r[2*e],a=r[2*e+1],f=i[e],l=s[e];n[e]=n[t],r[2*e]=r[2*t],r[2*e+1]=r[2*t+1],i[e]=i[t],s[e]=s[t],n[t]=o,r[2*t]=u,r[2*t+1]=a,i[t]=f,s[t]=l}function o(e,t,n,r,i,s){n[e]=n[t],r[2*e]=r[2*t],r[2*e+1]=r[2*t+1],i[e]=i[t],s[e]=s[t]}function u(e,t,n,r,i,s,o){var u=r[e],a=i[2*e],f=i[2*e+1],l=s[e],c=o[e];r[e]=r[t],i[2*e]=i[2*t],i[2*e+1]=i[2*t+1],s[e]=s[t],o[e]=o[t],r[t]=r[n],i[2*t]=i[2*n],i[2*t+1]=i[2*n+1],s[t]=s[n],o[t]=o[n],r[n]=u,i[2*n]=a,i[2*n+1]=f,s[n]=l,o[n]=c}function a(e,t,n,r,i,s,o,u,a,f,l){u[e]=u[t],a[2*e]=a[2*t],a[2*e+1]=a[2*t+1],f[e]=f[t],l[e]=l[t],u[t]=n,a[2*t]=r,a[2*t+1]=i,f[t]=s,l[t]=o}function f(e,t,n,r,i){return(n[e]-n[t]||r[2*t]-r[2*e]||i[e]-i[t])<0}function l(e,t,n,r,i,s,o,u){return(t-s[e]||o[2*e]-n||i-u[e])<0}function c(e,t,n,r,p,d){var v=(t-e+1)/6|0,m=e+v,g=t-v,y=e+t>>1,b=y-v,w=y+v,E=m,S=b,x=y,T=w,N=g,C=e+1,k=t-1,L=0;f(E,S,n,r,p,d)&&(L=E,E=S,S=L),f(T,N,n,r,p,d)&&(L=T,T=N,N=L),f(E,x,n,r,p,d)&&(L=E,E=x,x=L),f(S,x,n,r,p,d)&&(L=S,S=x,x=L),f(E,T,n,r,p,d)&&(L=E,E=T,T=L),f(x,T,n,r,p,d)&&(L=x,x=T,T=L),f(S,N,n,r,p,d)&&(L=S,S=N,N=L),f(S,x,n,r,p,d)&&(L=S,S=x,x=L),f(T,N,n,r,p,d)&&(L=T,T=N,N=L);var A=n[S],O=r[2*S],M=r[2*S+1],_=p[S],D=d[S],P=n[T],H=r[2*T],B=r[2*T+1],j=p[T],F=d[T],I=E,q=x,R=N,U=m,z=y,W=g,X=n[I],V=n[q],$=n[R];n[U]=X,n[z]=V,n[W]=$;for(var J=0;J<2;++J){var K=r[2*I+J],Q=r[2*q+J],G=r[2*R+J];r[2*U+J]=K,r[2*z+J]=Q,r[2*W+J]=G}var Y=p[I],Z=p[q],et=p[R];p[U]=Y,p[z]=Z,p[W]=et;var tt=d[I],nt=d[q],rt=d[R];d[U]=tt,d[z]=nt,d[W]=rt,o(b,e,n,r,p,d),o(w,t,n,r,p,d);for(var it=C;it<=k;++it)if(l(it,A,O,M,_,n,r,p))it!==C&&s(it,C,n,r,p,d),++C;else if(!l(it,P,H,B,j,n,r,p))for(;;){if(l(k,P,H,B,j,n,r,p)){l(k,A,O,M,_,n,r,p)?(u(it,C,k,n,r,p,d),++C,--k):(s(it,k,n,r,p,d),--k);break}if(--k<it)break}a(e,C-1,A,O,M,_,D,n,r,p,d),a(t,k+1,P,H,B,j,F,n,r,p,d),C-2-e<=h?i(e,C-2,n,r,p,d):c(e,C-2,n,r,p,d),t-(k+2)<=h?i(k+2,t,n,r,p,d):c(k+2,t,n,r,p,d),k-C<=h?i(C,k,n,r,p,d):c(C,k,n,r,p,d)}t.exports=r;var h=32},{}],217:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o,u){for(var a=n,f=n;f<r;++f){var l=e[2*f],c=e[2*f+1],h=t[f];i<=l&&l<=o&&s<=c&&c<=u&&(f===a?a+=1:(e[2*f]=e[2*a],e[2*f+1]=e[2*a+1],t[f]=t[a],e[2*a]=l,e[2*a+1]=c,t[a]=h,a+=1))}return a}function i(e,t,n){this.pixelSize=e,this.offset=t,this.count=n}function s(e,t,n,s){function a(i,s,o,u,f,l){var c=.5*o,h=u+1,p=f-u;n[E]=p,w[E++]=l;for(var d=0;d<2;++d)for(var v=0;v<2;++v){var m=i+d*c,g=s+v*c,y=r(e,t,h,f,m,g,m+c,g+c);if(y!==h){if(y-h>=Math.max(.9*p,32)){var b=f+u>>>1;a(m,g,c,h,b,l+1),h=b}a(m,g,c,h,y,l+1),h=y}}}var f=e.length>>>1;if(f<1)return[];for(var l=1/0,c=1/0,h=-1/0,p=-1/0,d=0;d<f;++d){var v=e[2*d],m=e[2*d+1];l=Math.min(l,v),h=Math.max(h,v),c=Math.min(c,m),p=Math.max(p,m),t[d]=d}l===h&&(h+=1+Math.abs(h)),c===p&&(p+=1+Math.abs(h));var g=1/(h-l),y=1/(p-c),b=Math.max(h-l,p-c);s=s||[0,0,0,0],s[0]=l,s[1]=c,s[2]=h,s[3]=p;var w=o.mallocInt32(f),E=0;a(l,c,b,0,f,0),u(w,e,t,n,f);for(var S=[],x=0,T=f,E=f-1;E>=0;--E){e[2*E]=(e[2*E]-l)*g,e[2*E+1]=(e[2*E+1]-c)*y;var N=w[E];N!==x&&(S.push(new i(b*Math.pow(.5,N),E+1,T-(E+1))),T=E+1,x=N)}return S.push(new i(b*Math.pow(.5,N+1),0,T)),o.free(w),S}var o=e("typedarray-pool"),u=e("./lib/sort");t.exports=s},{"./lib/sort":216,"typedarray-pool":502}],218:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){this.plot=e,this.positionBufferHi=t,this.positionBufferLo=n,this.pickBuffer=r,this.weightBuffer=i,this.shader=s,this.pickShader=o,this.scales=[],this.size=12,this.borderSize=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0,this.points=null,this.xCoords=null}function i(e,t){var n=e.gl,i=o(n),u=o(n),a=o(n),f=o(n),c=s(n,l.pointVertex,l.pointFragment),h=s(n,l.pickVertex,l.pickFragment),p=new r(e,i,u,a,f,c,h);return p.update(t),e.addObject(p),p}var s=e("gl-shader"),o=e("gl-buffer"),u=e("binary-search-bounds"),a=e("snap-points-2d"),f=e("typedarray-pool"),l=e("./lib/shader");t.exports=i;var c=r.prototype,h=new Float32Array(2),p=new Float32Array(2),d=new Float32Array(2),v=new Float32Array(2),m=[0,0,0,0];c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBufferHi.dispose(),this.positionBufferLo.dispose(),this.pickBuffer.dispose(),this.xCoords&&f.free(this.xCoords),this.plot.removeObject(this)},c.update=function(e){function t(t,n){return t in e?e[t]:n}e=e||{},this.size=t("size",12),this.color=t("color",[1,0,0,1]).slice(),this.borderSize=t("borderSize",1),this.borderColor=t("borderColor",[0,0,0,1]).slice(),this.xCoords&&f.free(this.xCoords),this.points=e.positions;var n=this.points.length>>>1,r=f.mallocInt32(n),i=f.mallocFloat32(2*n),s=f.mallocFloat64(2*n);s.set(this.points),this.scales=a(s,r,i,this.bounds);var o=f.mallocFloat64(n),u=f.mallocFloat32(2*n),l=f.mallocFloat32(2*n);u.set(s);for(var c=0,h=0;c<n;c++,h+=2)l[h]=s[h]-u[h],l[h+1]=s[h+1]-u[h+1],o[c]=s[h];this.positionBufferHi.update(u),this.positionBufferLo.update(l),this.pickBuffer.update(r),this.weightBuffer.update(i),f.free(r),f.free(s),f.free(u),f.free(l),f.free(i),this.xCoords=o,this.pointCount=n,this.pickOffset=0},c.draw=function(e){var t=void 0!==e,n=this.plot,r=t?this.pickShader:this.shader,i=this.scales,s=this.positionBufferHi,o=this.positionBufferLo,a=this.pickBuffer,f=this.bounds,l=this.size,c=this.borderSize,y=n.gl,b=t?n.pickPixelRatio:n.pixelRatio,w=n.viewBox,E=n.dataBox;if(0===this.pointCount)return e;var S=f[2]-f[0],x=f[3]-f[1],T=E[2]-E[0],N=E[3]-E[1],C=(w[2]-w[0])*b/n.pixelRatio,k=(w[3]-w[1])*b/n.pixelRatio,L=Math.min(T/C,N/k),A=2*S/T,O=2*x/N;h[0]=A,h[1]=O,p[0]=A-h[0],p[1]=O-h[1];var M=(f[0]-E[0]-.5*T)/S,_=(f[1]-E[1]-.5*N)/x;d[0]=M,d[1]=_,v[0]=M-d[0],v[1]=_-d[1],r.bind(),r.uniforms.scaleHi=h,r.uniforms.scaleLo=p,r.uniforms.translateHi=d,r.uniforms.translateLo=v,r.uniforms.color=this.color,r.uniforms.borderColor=this.borderColor,r.uniforms.pointSize=b*(l+c),r.uniforms.centerFraction=0===this.borderSize?2:l/(l+c+1.25),s.bind(),r.attributes.positionHi.pointer(),o.bind(),r.attributes.positionLo.pointer(),t?(this.pickOffset=e,m[0]=255&e,m[1]=e>>8&255,m[2]=e>>16&255,m[3]=e>>24&255,r.uniforms.pickOffset=m,a.bind(),r.attributes.pickId.pointer(y.UNSIGNED_BYTE)):(r.uniforms.useWeight=1,this.weightBuffer.bind(),r.attributes.weight.pointer());for(var D=this.xCoords,P=(E[0]-f[0]-L*l*b)/S,H=(E[2]-f[0]+L*l*b)/S,B=!0,j=i.length-1;j>=0;j--){var F=i[j];if(!(F.pixelSize<L&&j>1)){var I=F.offset,q=F.count+I,R=u.ge(D,P,I,q-1),U=u.lt(D,H,R,q-1)+1;U>R&&y.drawArrays(y.POINTS,R,U-R),!t&&B&&(B=!1,r.uniforms.useWeight=0)}}return e+this.pointCount},c.drawPick=c.draw,c.pick=function(e,t,n){var r=n-this.pickOffset;return r<0||r>=this.pointCount?null:{object:this,pointId:r,dataCoord:[this.points[2*r],this.points[2*r+1]]}}},{"./lib/shader":214,"binary-search-bounds":215,"gl-buffer":130,"gl-shader":225,"snap-points-2d":217,"typedarray-pool":502}],219:[function(e,t,n){"use strict";function r(e,t){var n=s[t];if(n||(n=s[t]={}),e in n)return n[e];for(var r=i(e,{textAlign:"center",textBaseline:"middle",lineHeight:1,font:t}),o=i(e,{triangles:!0,textAlign:"center",textBaseline:"middle",lineHeight:1,font:t}),u=[[1/0,1/0],[-1/0,-1/0]],f=0;f<r.positions.length;++f)for(var l=r.positions[f],c=0;c<2;++c)u[0][c]=Math.min(u[0][c],l[c]),u[1][c]=Math.max(u[1][c],l[c]);return n[e]=[o,r,u]}var i=e("vectorize-text");t.exports=r;var s={}},{"vectorize-text":515}],220:[function(e,t,n){function r(e,t){var n=i(e,t),r=n.attributes;return r.position.location=0,r.color.location=1,r.glyph.location=2,r.id.location=3,n}var i=e("gl-shader"),s="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   || \n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n    \n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",o="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n    \n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",u="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   ||\n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n",a="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   ||\n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = interpColor * opacity;\n  }\n}\n",f="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   || \n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = vec4(pickGroup, pickId.bgr);\n  }\n}",l=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],c={vertex:s,fragment:a,attributes:l},h={vertex:o,fragment:a,attributes:l},p={vertex:u,fragment:a,attributes:l},d={vertex:s,fragment:f,attributes:l},v={vertex:o,fragment:f,attributes:l},m={vertex:u,fragment:f,attributes:l};n.createPerspective=function(e){return r(e,c)},n.createOrtho=function(e){return r(e,h)},n.createProject=function(e){return r(e,p)},n.createPickPerspective=function(e){return r(e,d)},n.createPickOrtho=function(e){return r(e,v)},n.createPickProject=function(e){return r(e,m)}},{"gl-shader":225}],221:[function(e,t,n){"use strict";function r(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];return e[0]=t[0]*n+t[4]*r+t[8]*i+t[12]*s,e[1]=t[1]*n+t[5]*r+t[9]*i+t[13]*s,e[2]=t[2]*n+t[6]*r+t[10]*i+t[14]*s,e[3]=t[3]*n+t[7]*r+t[11]*i+t[15]*s,e}function i(e,t,n,i){return r(i,i,n),r(i,i,t),r(i,i,e)}function s(e,t){this.index=e,this.dataCoordinate=this.position=t}function o(e,t,n,r,i,o,u,a,f,l,c,h){this.gl=e,this.pixelRatio=1,this.shader=t,this.orthoShader=n,this.projectShader=r,this.pointBuffer=i,this.colorBuffer=o,this.glyphBuffer=u,this.idBuffer=a,this.vao=f,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.pickId=0,this.pickPerspectiveShader=l,this.pickOrthoShader=c,this.pickProjectShader=h,this.points=[],this._selectResult=new s(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}function u(e){return e[0]=e[1]=e[2]=0,e}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e}function f(e,t,n,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[n]=r,e}function l(e){for(var t=A,n=0;n<2;++n)for(var r=0;r<3;++r)t[n][r]=Math.max(Math.min(e[n][r],1e8),-1e8);return t}function c(e,t,n,r,s){var o,c=t.axesProject,h=t.gl,p=e.uniforms,d=n.model||w,v=n.view||w,m=n.projection||w,y=t.axesBounds,b=l(t.clipBounds);o=t.axes?t.axes.lastCubeProps.axis:[1,1,1],S[0]=2/h.drawingBufferWidth,S[1]=2/h.drawingBufferHeight,e.bind(),p.view=v,p.projection=m,p.screenSize=S,p.highlightId=t.highlightId,p.highlightScale=t.highlightScale,p.clipBounds=b,p.pickGroup=t.pickId/255,p.pixelRatio=t.pixelRatio;for(var E=0;E<3;++E)if(c[E]&&t.projectOpacity[E]<1===r){p.scale=t.projectScale[E],p.opacity=t.projectOpacity[E];for(var A=k,O=0;O<16;++O)A[O]=0;for(var O=0;O<4;++O)A[5*O]=1;A[5*E]=0,o[E]<0?A[12+E]=y[0][E]:A[12+E]=y[1][E],g(A,d,A),p.model=A;var M=(E+1)%3,_=(E+2)%3,D=u(x),P=u(T);D[M]=1,P[_]=1;var H=i(m,v,d,a(N,D)),B=i(m,v,d,a(C,P));if(Math.abs(H[1])>Math.abs(B[1])){var j=H;H=B,B=j,j=D,D=P,P=j;var F=M;M=_,_=F}H[0]<0&&(D[M]=-1),B[1]>0&&(P[_]=-1);for(var I=0,q=0,O=0;O<4;++O)I+=Math.pow(d[4*M+O],2),q+=Math.pow(d[4*_+O],2);D[M]/=Math.sqrt(I),P[_]/=Math.sqrt(q),p.axes[0]=D,p.axes[1]=P,p.fragClipBounds[0]=f(L,b[0],E,-1e8),p.fragClipBounds[1]=f(L,b[1],E,1e8),t.vao.draw(h.TRIANGLES,t.vertexCount),t.lineWidth>0&&(h.lineWidth(t.lineWidth),t.vao.draw(h.LINES,t.lineVertexCount,t.vertexCount))}}function h(e,t,n,r,i,s){var o=n.gl;if(n.vao.bind(),i===n.opacity<1||s){e.bind();var u=e.uniforms;u.model=r.model||w,u.view=r.view||w,u.projection=r.projection||w,S[0]=2/o.drawingBufferWidth,S[1]=2/o.drawingBufferHeight,u.screenSize=S,u.highlightId=n.highlightId,u.highlightScale=n.highlightScale,u.fragClipBounds=_,u.clipBounds=n.axes.bounds,u.opacity=n.opacity,u.pickGroup=n.pickId/255,u.pixelRatio=n.pixelRatio,n.vao.draw(o.TRIANGLES,n.vertexCount),n.lineWidth>0&&(o.lineWidth(n.lineWidth),n.vao.draw(o.LINES,n.lineVertexCount,n.vertexCount))}c(t,n,r,i,s),n.vao.unbind()}function p(e){var t=e.gl,n=y.createPerspective(t),r=y.createOrtho(t),i=y.createProject(t),s=y.createPickPerspective(t),u=y.createPickOrtho(t),a=y.createPickProject(t),f=d(t),l=d(t),c=d(t),h=d(t),p=v(t,[{buffer:f,size:3,type:t.FLOAT},{buffer:l,size:4,type:t.FLOAT},{buffer:c,size:2,type:t.FLOAT},{buffer:h,size:4,type:t.UNSIGNED_BYTE,normalized:!0}]),m=new o(t,n,r,i,f,l,c,h,p,s,u,a);return m.update(e),m}var d=e("gl-buffer"),v=e("gl-vao"),m=e("typedarray-pool"),g=e("gl-mat4/multiply"),y=e("./lib/shaders"),b=e("./lib/glyphs"),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];t.exports=p;var E=o.prototype;E.pickSlots=1,E.setPickBase=function(e){this.pickId=e},E.isTransparent=function(){if(this.opacity<1)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectOpacity[e]<1)return!0;return!1},E.isOpaque=function(){if(this.opacity>=1)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectOpacity[e]>=1)return!0;return!1};var S=[0,0],x=[0,0,0],T=[0,0,0],N=[0,0,0,1],C=[0,0,0,1],k=w.slice(),L=[0,0,0],A=[[0,0,0],[0,0,0]],O=[-1e8,-1e8,-1e8],M=[1e8,1e8,1e8],_=[O,M];E.draw=function(e){var t=this.useOrtho?this.orthoShader:this.shader;h(t,this.projectShader,this,e,!1,!1)},E.drawTransparent=function(e){var t=this.useOrtho?this.orthoShader:this.shader;h(t,this.projectShader,this,e,!0,!1)},E.drawPick=function(e){var t=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;h(t,this.pickProjectShader,this,e,!1,!0)},E.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[2]+(e.value[1]<<8)+(e.value[0]<<16);if(t>=this.pointCount||t<0)return null;var n=this.points[t],r=this._selectResult;r.index=t;for(var i=0;i<3;++i)r.position[i]=r.dataCoordinate[i]=n[i];return r},E.highlight=function(e){if(e){var t=e.index,n=255&t,r=t>>8&255,i=t>>16&255;this.highlightId=[n/255,r/255,i/255,0]}else this.highlightId=[1,1,1,1]},E.update=function(e){if(e=e||{},"perspective"in e&&(this.useOrtho=!e.perspective),"orthographic"in e&&(this.useOrtho=!!e.orthographic),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"project"in e)if(Array.isArray(e.project))this.axesProject=e.project;else{var t=!!e.project;this.axesProject=[t,t,t]}if("projectScale"in e)if(Array.isArray(e.projectScale))this.projectScale=e.projectScale.slice();else{var n=+e.projectScale;this.projectScale=[n,n,n]}if("projectOpacity"in e)if(Array.isArray(e.projectOpacity))this.projectOpacity=e.projectOpacity.slice();else{var n=+e.projectOpacity;this.projectOpacity=[n,n,n]}"opacity"in e&&(this.opacity=e.opacity),this.dirty=!0;var r=e.position;if(r){var i=e.font||"normal",s=e.alignment||[0,0],o=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0],a=e.glyph,f=e.color,l=e.size,c=e.angle,h=e.lineColor,p=0,d=0,v=0,g=r.length;e:for(var y=0;y<g;++y){for(var w=r[y],E=0;E<3;++E)if(isNaN(w[E])||!isFinite(w[E]))continue e;var S;S=Array.isArray(a)?b(a[y],i):a?b(a,i):b("",i);var x=S[0],T=S[1],N=S[2];d+=3*x.cells.length,v+=2*T.edges.length}var C=d+v,k=m.mallocFloat(3*C),L=m.mallocFloat(4*C),A=m.mallocFloat(2*C),O=m.mallocUint32(C),M=[0,s[1]],_=0,D=d,P=[0,0,0,1],H=[0,0,0,1],B=Array.isArray(f)&&Array.isArray(f[0]),j=Array.isArray(h)&&Array.isArray(h[0]);e:for(var y=0;y<g;++y){for(var w=r[y],E=0;E<3;++E){if(isNaN(w[E])||!isFinite(w[E])){p+=1;continue e}u[E]=Math.max(u[E],w[E]),o[E]=Math.min(o[E],w[E])}var S;S=Array.isArray(a)?b(a[y],i):a?b(a,i):b("",i);var x=S[0],T=S[1],N=S[2];if(Array.isArray(f)){var F;if(F=B?f[y]:f,3===F.length){for(var E=0;E<3;++E)P[E]=F[E];P[3]=1}else if(4===F.length)for(var E=0;E<4;++E)P[E]=F[E]}else P[0]=P[1]=P[2]=0,P[3]=1;if(Array.isArray(h)){var F;if(F=j?h[y]:h,3===F.length){for(var E=0;E<3;++E)H[E]=F[E];H[E]=1}else if(4===F.length)for(var E=0;E<4;++E)H[E]=F[E]}else H[0]=H[1]=H[2]=0,H[3]=1;var I=.5;Array.isArray(l)?I=+l[y]:l?I=+l:this.useOrtho&&(I=12);var q=0;Array.isArray(c)?q=+c[y]:c&&(q=+c);for(var R=Math.cos(q),U=Math.sin(q),w=r[y],E=0;E<3;++E)u[E]=Math.max(u[E],w[E]),o[E]=Math.min(o[E],w[E]);s[0]<0?M[0]=s[0]*(1+N[1][0]):s[0]>0&&(M[0]=-s[0]*(1+N[0][0]));for(var z=x.cells,W=x.positions,E=0;E<z.length;++E)for(var X=z[E],V=0;V<3;++V){for(var $=0;$<3;++$)k[3*_+$]=w[$];for(var $=0;$<4;++$)L[4*_+$]=P[$];O[_]=p;var J=W[X[V]];A[2*_]=I*(R*J[0]-U*J[1]+M[0]),A[2*_+1]=I*(U*J[0]+R*J[1]+M[1]),_+=1}for(var z=T.edges,W=T.positions,E=0;E<z.length;++E)for(var X=z[E],V=0;V<2;++V){for(var $=0;$<3;++$)k[3*D+$]=w[$];for(var $=0;$<4;++$)L[4*D+$]=H[$];O[D]=p;var J=W[X[V]];A[2*D]=I*(R*J[0]-U*J[1]+M[0]),A[2*D+1]=I*(U*J[0]+R*J[1]+M[1]),D+=1}p+=1}this.vertexCount=d,this.lineVertexCount=v,this.pointBuffer.update(k),this.colorBuffer.update(L),this.glyphBuffer.update(A),this.idBuffer.update(new Uint32Array(O)),m.free(k),m.free(L),m.free(A),m.free(O),this.bounds=[o,u],this.points=r,this.pointCount=r.length}},E.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/glyphs":219,"./lib/shaders":220,"gl-buffer":130,"gl-mat4/multiply":156,"gl-vao":241,"typedarray-pool":502}],222:[function(e,t,n){"use strict";n.boxVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n",n.boxFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"},{}],223:[function(e,t,n){"use strict";function r(e,t,n){this.plot=e,this.boxBuffer=t,this.boxShader=n,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}function i(e,t){var n=e.gl,i=o(n,[0,0,0,1,1,0,1,1]),a=s(n,u.boxVertex,u.boxFragment),f=new r(e,i,a);return f.update(t),e.addOverlay(f),f}var s=e("gl-shader"),o=e("gl-buffer"),u=e("./lib/shaders");t.exports=i;var a=r.prototype;a.draw=function(){if(this.enabled){var e=this.plot,t=this.selectBox,n=this.borderWidth,r=(this.innerFill,this.innerColor),i=(this.outerFill,this.outerColor),s=this.borderColor,o=e.box,u=e.screenBox,a=e.dataBox,f=e.viewBox,l=e.pixelRatio,c=(t[0]-a[0])*(f[2]-f[0])/(a[2]-a[0])+f[0],h=(t[1]-a[1])*(f[3]-f[1])/(a[3]-a[1])+f[1],p=(t[2]-a[0])*(f[2]-f[0])/(a[2]-a[0])+f[0],d=(t[3]-a[1])*(f[3]-f[1])/(a[3]-a[1])+f[1];if(c=Math.max(c,f[0]),h=Math.max(h,f[1]),p=Math.min(p,f[2]),d=Math.min(d,f[3]),!(p<c||d<h)){o.bind();var v=u[2]-u[0],m=u[3]-u[1];if(this.outerFill&&(o.drawBox(0,0,v,h,i),o.drawBox(0,h,c,d,i),o.drawBox(0,d,v,m,i),o.drawBox(p,h,v,d,i)),this.innerFill&&o.drawBox(c,h,p,d,r),n>0){var g=n*l;o.drawBox(c-g,h-g,p+g,h+g,s),o.drawBox(c-g,d-g,p+g,d+g,s),o.drawBox(c-g,h-g,c+g,d+g,s),o.drawBox(p-g,h-g,p+g,d+g,s)}}}},a.update=function(e){e=e||{},this.innerFill=!!e.innerFill,this.outerFill=!!e.outerFill,this.innerColor=(e.innerColor||[0,0,0,.5]).slice(),this.outerColor=(e.outerColor||[0,0,0,.5]).slice(),this.borderColor=(e.borderColor||[0,0,0,1]).slice(),this.borderWidth=e.borderWidth||0,this.selectBox=(e.selectBox||this.selectBox).slice()},a.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":222,"gl-buffer":130,"gl-shader":225}],224:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.coord=[e,t],this.id=n,this.value=r,this.distance=i}function i(e,t,n){this.gl=e,this.fbo=t,this.buffer=n,this._readTimeout=null;var r=this;this._readCallback=function(){r.gl&&(t.bind(),e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,r.buffer),r._readTimeout=null)}}function s(e,t){var n=o(e,t),r=u.mallocUint8(t[0]*t[1]*4);return new i(e,n,r)}t.exports=s;var o=e("gl-fbo"),u=e("typedarray-pool"),a=e("ndarray"),f=e("bit-twiddle").nextPow2,l=e("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_46_arg0_<255||_inline_46_arg1_<255||_inline_46_arg2_<255||_inline_46_arg3_<255){var _inline_46_l=_inline_46_arg4_-_inline_46_arg6_[0],_inline_46_a=_inline_46_arg5_-_inline_46_arg6_[1],_inline_46_f=_inline_46_l*_inline_46_l+_inline_46_a*_inline_46_a;_inline_46_f<this_closestD2&&(this_closestD2=_inline_46_f,this_closestX=_inline_46_arg6_[0],this_closestY=_inline_46_arg6_[1])}}",args:[{name:"_inline_46_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_46_a","_inline_46_f","_inline_46_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),c=i.prototype;Object.defineProperty(c,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var t=this.fbo.shape[0],n=this.fbo.shape[1];if(n*t*4>this.buffer.length){u.free(this.buffer);for(var r=this.buffer=u.mallocUint8(f(n*t*4)),i=0;i<n*t*4;++i)r[i]=255}return e}}}),c.begin=function(){var e=this.gl;this.shape,e&&(this.fbo.bind(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))},c.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},c.query=function(e,t,n){if(!this.gl)return null;var i=this.fbo.shape.slice();e|=0,t|=0,"number"!=typeof n&&(n=1);var s=0|Math.min(Math.max(e-n,0),i[0]),o=0|Math.min(Math.max(e+n,0),i[0]),u=0|Math.min(Math.max(t-n,0),i[1]),f=0|Math.min(Math.max(t+n,0),i[1]);if(o<=s||f<=u)return null;var c=[o-s,f-u],h=a(this.buffer,[c[0],c[1],4],[4,4*i[0],1],4*(s+i[0]*u)),p=l(h.hi(c[0],c[1],1),n,n),d=p[0],v=p[1];if(d<0||Math.pow(this.radius,2)<p[2])return null;var m=h.get(d,v,0),g=h.get(d,v,1),y=h.get(d,v,2),b=h.get(d,v,3);return new r(d+s|0,v+u|0,m,[g,y,b],Math.sqrt(p[2]))},c.dispose=function(){this.gl&&(this.fbo.dispose(),u.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":56,"cwise/lib/wrapper":96,"gl-fbo":137,ndarray:432,"typedarray-pool":502}],225:[function(e,t,n){"use strict";function r(e){this.gl=e,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function i(e,t){return e.name<t.name?-1:1}function s(e,t,n,i,s){var o=new r(e);return o.update(t,n,i,s),o}var o=e("./lib/create-uniforms"),u=e("./lib/create-attributes"),a=e("./lib/reflect"),f=e("./lib/shader-cache"),l=e("./lib/runtime-reflect"),c=e("./lib/GLError"),h=r.prototype;h.bind=function(){this.program||this._relink(),this.gl.useProgram(this.program)},h.dispose=function(){this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},h.update=function(e,t,n,r){function s(){p.program=f.program(d,p._vref,p._fref,w,E);for(var e=0;e<n.length;++e)L[e]=d.getUniformLocation(p.program,n[e].name)}if(!t||1===arguments.length){var h=e;e=h.vertex,t=h.fragment,n=h.uniforms,r=h.attributes}var p=this,d=p.gl,v=p._vref;p._vref=f.shader(d,d.VERTEX_SHADER,e),v&&v.dispose(),p.vertShader=p._vref.shader;var m=this._fref;if(p._fref=f.shader(d,d.FRAGMENT_SHADER,t),m&&m.dispose(),p.fragShader=p._fref.shader,!n||!r){var g=d.createProgram();if(d.attachShader(g,p.fragShader),d.attachShader(g,p.vertShader),d.linkProgram(g),!d.getProgramParameter(g,d.LINK_STATUS)){var y=d.getProgramInfoLog(g);throw new c(y,"Error linking program:"+y)}n=n||l.uniforms(d,g),r=r||l.attributes(d,g),d.deleteProgram(g)}r=r.slice(),r.sort(i);for(var b=[],w=[],E=[],S=0;S<r.length;++S){var x=r[S];if(x.type.indexOf("mat")>=0){for(var T=0|x.type.charAt(x.type.length-1),N=new Array(T),C=0;C<T;++C)N[C]=E.length,w.push(x.name+"["+C+"]"),"number"==typeof x.location?E.push(x.location+C):Array.isArray(x.location)&&x.location.length===T&&"number"==typeof x.location[C]?E.push(0|x.location[C]):E.push(-1);b.push({name:x.name,type:x.type,locations:N})}else b.push({name:x.name,type:x.type,locations:[E.length]}),w.push(x.name),"number"==typeof x.location?E.push(0|x.location):E.push(-1)}for(var k=0,S=0;S<E.length;++S)if(E[S]<0){for(;E.indexOf(k)>=0;)k+=1;E[S]=k}var L=new Array(n.length);s(),p._relink=s,p.types={uniforms:a(n),attributes:a(r)},p.attributes=u(d,p,b,E),Object.defineProperty(p,"uniforms",o(d,p,n,L))},t.exports=s},{"./lib/GLError":226,"./lib/create-attributes":227,"./lib/create-uniforms":228,"./lib/reflect":229,"./lib/runtime-reflect":230,"./lib/shader-cache":231}],226:[function(e,t,n){arguments[4][186][0].apply(n,arguments)},{dup:186}],227:[function(e,t,n){arguments[4][187][0].apply(n,arguments)},{"./GLError":226,dup:187}],228:[function(e,t,n){arguments[4][188][0].apply(n,arguments)},{"./GLError":226,"./reflect":229,dup:188}],229:[function(e,t,n){arguments[4][189][0].apply(n,arguments)},{dup:189}],230:[function(e,t,n){arguments[4][190][0].apply(n,arguments)},{dup:190}],231:[function(e,t,n){arguments[4][191][0].apply(n,arguments)},{"./GLError":226,dup:191,"gl-format-compiler-error":138,"weakmap-shim":523}],232:[function(e,t,n){"use strict";function r(e){this.plot=e,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}function i(e,t){var n=new r(e);return n.update(t),e.addOverlay(n),n}t.exports=i;var s=r.prototype;s.update=function(e){e=e||{},this.enable=(e.enable||[!0,!0,!1,!1]).slice(),this.width=(e.width||[1,1,1,1]).slice(),this.color=(e.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(e){return e.slice()}),this.center=(e.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},s.draw=function(){var e=this.enable,t=this.width,n=this.color,r=this.center,i=this.plot,s=i.line,o=i.dataBox,u=i.viewBox;if(s.bind(),o[0]<=r[0]&&r[0]<=o[2]&&o[1]<=r[1]&&r[1]<=o[3]){var a=u[0]+(r[0]-o[0])/(o[2]-o[0])*(u[2]-u[0]),f=u[1]+(r[1]-o[1])/(o[3]-o[1])*(u[3]-u[1]);e[0]&&s.drawLine(a,f,u[0],f,t[0],n[0]),e[1]&&s.drawLine(a,f,a,u[1],t[1],n[1]),e[2]&&s.drawLine(a,f,u[2],f,t[2],n[2]),e[3]&&s.drawLine(a,f,a,u[3],t[3],n[3])}},s.dispose=function(){this.plot.removeOverlay(this)}},{}],233:[function(e,t,n){"use strict";var r=e("gl-shader"),i="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n",s="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}";t.exports=function(e){return r(e,i,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":225}],234:[function(e,t,n){"use strict";function r(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}function i(e,t){function n(e,t,n,r,s,o){var u=[e,t,n,0,0,0,1];u[r+3]=1,u[r]=s,i.push.apply(i,u),u[6]=-1,i.push.apply(i,u),u[r]=o,i.push.apply(i,u),i.push.apply(i,u),u[6]=1,i.push.apply(i,u),u[r]=s,i.push.apply(i,u)}var i=[];n(0,0,0,0,0,1),n(0,0,0,1,0,1),n(0,0,0,2,0,1),n(1,0,0,1,-1,1),n(1,0,0,2,-1,1),n(0,1,0,0,-1,1),n(0,1,0,2,-1,1),n(0,0,1,0,-1,1),n(0,0,1,1,-1,1);var a=s(e,i),f=o(e,[{type:e.FLOAT,buffer:a,size:3,offset:0,stride:28},{type:e.FLOAT,buffer:a,size:3,offset:12,stride:28},{type:e.FLOAT,buffer:a,size:1,offset:24,stride:28}]),l=u(e);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.weight.location=2;var c=new r(e,a,f,l);return c.update(t),c}var s=e("gl-buffer"),o=e("gl-vao"),u=e("./shaders/index");t.exports=i;var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=r.prototype,l=[0,0,0],c=[0,0,0],h=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(e){},f.draw=function(e){var t=this.gl,n=this.vao,r=this.shader;n.bind(),r.bind();var i,s=e.model||a,o=e.view||a,u=e.projection||a;this.axes&&(i=this.axes.lastCubeProps.axis);for(var f=l,p=c,d=0;d<3;++d)i&&i[d]<0?(f[d]=this.bounds[0][d],p[d]=this.bounds[1][d]):(f[d]=this.bounds[1][d],p[d]=this.bounds[0][d]);h[0]=t.drawingBufferWidth,h[1]=t.drawingBufferHeight,r.uniforms.model=s,r.uniforms.view=o,r.uniforms.projection=u,r.uniforms.coordinates=[this.position,f,p],r.uniforms.colors=this.colors,r.uniforms.screenShape=h;for(var d=0;d<3;++d)r.uniforms.lineWidth=this.lineWidth[d]*this.pixelRatio,this.enabled[d]&&(n.draw(t.TRIANGLES,6,6*d),this.drawSides[d]&&n.draw(t.TRIANGLES,12,18+12*d));n.unbind()},f.update=function(e){e&&("bounds"in e&&(this.bounds=e.bounds),"position"in e&&(this.position=e.position),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"colors"in e&&(this.colors=e.colors),"enabled"in e&&(this.enabled=e.enabled),"drawSides"in e&&(this.drawSides=e.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":233,"gl-buffer":130,"gl-vao":241}],235:[function(e,t,n){var r=e("gl-shader"),i="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  worldCoordinate = vec3(uv.zw, f.x);\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n",s="precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat beckmannSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution_2_0(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\n\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = beckmannSpecular_1_1(L, V, N, roughness);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor = step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) + step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n",o="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  vec4 worldPosition = model * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z = clipPosition.z + zOffset;\n\n  gl_Position = clipPosition;\n  value = f;\n  kill = -1.0;\n  worldCoordinate = dataCoordinate;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n",u="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if(kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n";n.createShader=function(e){var t=r(e,i,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},n.createPickShader=function(e){var t=r(e,i,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},n.createContourShader=function(e){var t=r(e,o,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t},n.createPickContourShader=function(e){var t=r(e,o,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t}},{"gl-shader":225}],236:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.position=e,this.index=t,this.uv=n,this.level=r,this.dataCoordinate=i}function i(e){var t=w([y({colormap:e,nshades:B,format:"rgba"}).map(function(e){return[e[0],e[1],e[2],255*e[3]]})]);return b.divseq(t,255),t}function s(e,t,n,i,s,o,u,a,f,l,c,h,p,d){this.gl=e,this.shape=t,this.bounds=n,this.intensityBounds=[],this._shader=i,this._pickShader=s,this._coordinateBuffer=o,this._vao=u,this._colorMap=a,this._contourShader=f,this._contourPickShader=l,this._contourBuffer=c,this._contourVAO=h,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new r([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=p,this._dynamicVAO=d,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[E(g.mallocFloat(1024),[0,0]),E(g.mallocFloat(1024),[0,0]),E(g.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}function o(e,t){var n,r,i,s=t.axes&&t.axes.lastCubeProps.axis||F,o=t.showSurface,u=t.showContour;for(n=0;n<3;++n)for(o=o||t.surfaceProject[n],r=0;r<3;++r)u=u||t.contourProject[n][r];for(n=0;n<3;++n){var a=I.projections[n];for(r=0;r<16;++r)a[r]=0;for(r=0;r<4;++r)a[5*r]=1;a[5*n]=0,a[12+n]=t.axesBounds[+(s[n]>0)][n],x(a,e.model,a);var f=I.clipBounds[n];for(i=0;i<2;++i)for(r=0;r<3;++r)f[i][r]=e.clipBounds[i][r];f[0][n]=-1e8,f[1][n]=1e8}return I.showSurface=o,I.showContour=u,I}function u(e,t){e=e||{};var n=this.gl;n.disable(n.CULL_FACE),this._colorMap.bind(0);var r=q;r.model=e.model||D,r.view=e.view||D,r.projection=e.projection||D,r.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],r.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],r.contourColor=this.contourColor[0],r.inverseModel=T(r.inverseModel,r.model);for(var i=0;i<2;++i)for(var s=r.clipBounds[i],u=0;u<3;++u)s[u]=Math.min(Math.max(this.clipBounds[i][u],-1e8),1e8);r.kambient=this.ambientLight,r.kdiffuse=this.diffuseLight,r.kspecular=this.specularLight,r.roughness=this.roughness,r.fresnel=this.fresnel,r.opacity=this.opacity,r.height=0,r.permutation=U,r.vertexColor=this.vertexColor;var a=R;for(x(a,r.view,r.model),x(a,r.projection,a),T(a,a),i=0;i<3;++i)r.eyePosition[i]=a[12+i]/a[15];var f=a[15];for(i=0;i<3;++i)f+=this.lightPosition[i]*a[4*i+3];for(i=0;i<3;++i){var l=a[12+i];for(u=0;u<3;++u)l+=a[4*u+i]*this.lightPosition[u];r.lightPosition[i]=l/f}var c=o(r,this);if(c.showSurface&&t===this.opacity<1){for(this._shader.bind(),this._shader.uniforms=r,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(n.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&this.vertexCount&&(this._shader.uniforms.model=c.projections[i],this._shader.uniforms.clipBounds=c.clipBounds[i],this._vao.draw(n.TRIANGLES,this._vertexCount));this._vao.unbind()}if(c.showContour&&!t){var h=this._contourShader;r.kambient=1,r.kdiffuse=0,r.kspecular=0,r.opacity=1,h.bind(),h.uniforms=r;var p=this._contourVAO;for(p.bind(),i=0;i<3;++i)for(h.uniforms.permutation=H[i],n.lineWidth(this.contourWidth[i]),u=0;u<this.contourLevels[i].length;++u)this._contourCounts[i][u]&&(u===this.highlightLevel[i]?(h.uniforms.contourColor=this.highlightColor[i],h.uniforms.contourTint=this.highlightTint[i]):0!==u&&u-1!==this.highlightLevel[i]||(h.uniforms.contourColor=this.contourColor[i],h.uniforms.contourTint=this.contourTint[i]),h.uniforms.height=this.contourLevels[i][u],p.draw(n.LINES,this._contourCounts[i][u],this._contourOffsets[i][u]));for(i=0;i<3;++i)for(h.uniforms.model=c.projections[i],h.uniforms.clipBounds=c.clipBounds[i],u=0;u<3;++u)if(this.contourProject[i][u]){h.uniforms.permutation=H[u],n.lineWidth(this.contourWidth[u]);for(var d=0;d<this.contourLevels[u].length;++d)d===this.highlightLevel[u]?(h.uniforms.contourColor=this.highlightColor[u],h.uniforms.contourTint=this.highlightTint[u]):0!==d&&d-1!==this.highlightLevel[u]||(h.uniforms.contourColor=this.contourColor[u],h.uniforms.contourTint=this.contourTint[u]),h.uniforms.height=this.contourLevels[u][d],p.draw(n.LINES,this._contourCounts[u][d],this._contourOffsets[u][d])}for(p=this._dynamicVAO,p.bind(),i=0;i<3;++i)if(0!==this._dynamicCounts[i])for(h.uniforms.model=r.model,h.uniforms.clipBounds=r.clipBounds,h.uniforms.permutation=H[i],n.lineWidth(this.dynamicWidth[i]),h.uniforms.contourColor=this.dynamicColor[i],h.uniforms.contourTint=this.dynamicTint[i],h.uniforms.height=this.dynamicLevel[i],p.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]),u=0;u<3;++u)this.contourProject[u][i]&&(h.uniforms.model=c.projections[u],h.uniforms.clipBounds=c.clipBounds[u],p.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]));p.unbind()}}function a(e,t){var n=t.shape.slice(),r=e.shape.slice();b.assign(e.lo(1,1).hi(n[0],n[1]),t),b.assign(e.lo(1).hi(n[0],1),t.hi(n[0],1)),b.assign(e.lo(1,r[1]-1).hi(n[0],1),t.lo(0,n[1]-1).hi(n[0],1)),b.assign(e.lo(0,1).hi(1,n[1]),t.hi(1)),b.assign(e.lo(r[0]-1,1).hi(1,n[1]),t.lo(n[0]-1)),e.set(0,0,t.get(0,0)),e.set(0,r[1]-1,t.get(0,n[1]-1)),e.set(r[0]-1,0,t.get(n[0]-1,0)),e.set(r[0]-1,r[1]-1,t.get(n[0]-1,n[1]-1))}function f(e,t){return Array.isArray(e)?[t(e[0]),t(e[1]),t(e[2])]:[t(e),t(e),t(e)]}function l(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],1]:[e[0],e[1],e[2],e[3]]:[0,0,0,1]}function c(e){if(Array.isArray(e)){if(Array.isArray(e))return[l(e[0]),l(e[1]),l(e[2])];var t=l(e);return[t.slice(),t.slice(),t.slice()]}}function h(e){var t=e.gl,n=L(t),r=O(t),i=A(t),o=M(t),u=d(t),a=v(t,[{buffer:u,size:4,stride:_,offset:0},{buffer:u,size:3,stride:_,offset:16},{buffer:u,size:3,stride:_,offset:28}]),f=d(t),l=v(t,[{buffer:f,size:4,stride:20,offset:0},{buffer:f,size:1,stride:20,offset:16}]),c=d(t),h=v(t,[{buffer:c,size:2,type:t.FLOAT}]),p=m(t,1,B,t.RGBA,t.UNSIGNED_BYTE);p.minFilter=t.LINEAR,p.magFilter=t.LINEAR;var g=new s(t,[0,0],[[0,0,0],[0,0,0]],n,r,u,a,p,i,o,f,l,c,h),y={levels:[[],[],[]]};for(var b in e)y[b]=e[b];return y.colormap=y.colormap||"jet",g.update(y),g}t.exports=h;var p=e("bit-twiddle"),d=e("gl-buffer"),v=e("gl-vao"),m=e("gl-texture2d"),g=e("typedarray-pool"),y=e("colormap"),b=e("ndarray-ops"),w=e("ndarray-pack"),E=e("ndarray"),S=e("surface-nets"),x=e("gl-mat4/multiply"),T=e("gl-mat4/invert"),N=e("binary-search-bounds"),C=e("ndarray-gradient"),k=e("./lib/shaders"),L=k.createShader,A=k.createContourShader,O=k.createPickShader,M=k.createPickContourShader,_=40,D=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],H=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];!function(){for(var e=0;e<3;++e){var t=H[e],n=(e+1)%3,r=(e+2)%3;t[n+0]=1,t[r+3]=1,t[e+6]=1}}();var B=256,j=s.prototype;j.isTransparent=function(){return this.opacity<1},j.isOpaque=function(){if(this.opacity>=1)return!0;for(var e=0;e<3;++e)if(this._contourCounts[e].length>0||this._dynamicCounts[e]>0)return!0;return!1},j.pickSlots=1,j.setPickBase=function(e){this.pickId=e};var F=[0,0,0],I={showSurface:!1,showContour:!1,projections:[D.slice(),D.slice(),D.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},q={model:D,view:D,projection:D,inverseModel:D.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-0.0001,kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},R=D.slice(),U=[1,0,0,0,1,0,0,0,1];j.draw=function(e){return u.call(this,e,!1)},j.drawTransparent=function(e){return u.call(this,e,!0)};var z={model:D,view:D,projection:D,inverseModel:D,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};j.drawPick=function(e){e=e||{};var t=this.gl;t.disable(t.CULL_FACE);var n=z;n.model=e.model||D,n.view=e.view||D,n.projection=e.projection||D,n.shape=this._field[2].shape,n.pickId=this.pickId/255,n.lowerBound=this.bounds[0],n.upperBound=this.bounds[1],n.permutation=U;for(var r=0;r<2;++r)for(var i=n.clipBounds[r],s=0;s<3;++s)i[s]=Math.min(Math.max(this.clipBounds[r][s],-1e8),1e8);var u=o(n,this);if(u.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=n,this._vao.bind(),this._vao.draw(t.TRIANGLES,this._vertexCount),r=0;r<3;++r)this.surfaceProject[r]&&(this._pickShader.uniforms.model=u.projections[r],this._pickShader.uniforms.clipBounds=u.clipBounds[r],this._vao.draw(t.TRIANGLES,this._vertexCount));this._vao.unbind()}if(u.showContour){var a=this._contourPickShader;a.bind(),a.uniforms=n;var f=this._contourVAO;for(f.bind(),s=0;s<3;++s)for(t.lineWidth(this.contourWidth[s]),a.uniforms.permutation=H[s],r=0;r<this.contourLevels[s].length;++r)this._contourCounts[s][r]&&(a.uniforms.height=this.contourLevels[s][r],f.draw(t.LINES,this._contourCounts[s][r],this._contourOffsets[s][r]));for(r=0;r<3;++r)for(a.uniforms.model=u.projections[r],a.uniforms.clipBounds=u.clipBounds[r],s=0;s<3;++s)if(this.contourProject[r][s]){a.uniforms.permutation=H[s],t.lineWidth(this.contourWidth[s]);for(var l=0;l<this.contourLevels[s].length;++l)this._contourCounts[s][l]&&(a.uniforms.height=this.contourLevels[s][l],f.draw(t.LINES,this._contourCounts[s][l],this._contourOffsets[s][l]))}f.unbind()}},j.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=this._field[2].shape,n=this._pickResult,r=t[0]*(e.value[0]+(e.value[2]>>4)/16)/255,i=Math.floor(r),s=r-i,o=t[1]*(e.value[1]+(15&e.value[2])/16)/255,u=Math.floor(o),a=o-u;i+=1,u+=1;var f=n.position;f[0]=f[1]=f[2]=0;for(var l=0;l<2;++l)for(var c=l?s:1-s,h=0;h<2;++h)for(var p=h?a:1-a,d=i+l,v=u+h,m=c*p,g=0;g<3;++g)f[g]+=this._field[g].get(d,v)*m;for(var y=this._pickResult.level,b=0;b<3;++b)if(y[b]=N.le(this.contourLevels[b],f[b]),y[b]<0)this.contourLevels[b].length>0&&(y[b]=0);else if(y[b]<this.contourLevels[b].length-1){var w=this.contourLevels[b][y[b]],E=this.contourLevels[b][y[b]+1];Math.abs(w-f[b])>Math.abs(E-f[b])&&(y[b]+=1)}for(n.index[0]=s<.5?i:i+1,n.index[1]=a<.5?u:u+1,n.uv[0]=r/t[0],n.uv[1]=o/t[1],g=0;g<3;++g)n.dataCoordinate[g]=this._field[g].get(n.index[0],n.index[1]);return n},j.update=function(e){e=e||{},this.dirty=!0,"contourWidth"in e&&(this.contourWidth=f(e.contourWidth,Number)),"showContour"in e&&(this.showContour=f(e.showContour,Boolean)),"showSurface"in e&&(this.showSurface=!!e.showSurface),"contourTint"in e&&(this.contourTint=f(e.contourTint,Boolean)),"contourColor"in e&&(this.contourColor=c(e.contourColor)),"contourProject"in e&&(this.contourProject=f(e.contourProject,function(e){return f(e,Boolean)})),"surfaceProject"in e&&(this.surfaceProject=e.surfaceProject),"dynamicColor"in e&&(this.dynamicColor=c(e.dynamicColor)),"dynamicTint"in e&&(this.dynamicTint=f(e.dynamicTint,Number)),"dynamicWidth"in e&&(this.dynamicWidth=f(e.dynamicWidth,Number)),"opacity"in e&&(this.opacity=e.opacity),"colorBounds"in e&&(this.colorBounds=e.colorBounds),"vertexColor"in e&&(this.vertexColor=e.vertexColor?1:0);var t=e.field||e.coords&&e.coords[2]||null,n=!1;if(t||(t=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in e||"coords"in e){var r=(t.shape[0]+2)*(t.shape[1]+2);r>this._field[2].data.length&&(g.freeFloat(this._field[2].data),this._field[2].data=g.mallocFloat(p.nextPow2(r))),this._field[2]=E(this._field[2].data,[t.shape[0]+2,t.shape[1]+2]),a(this._field[2],t),this.shape=t.shape.slice();for(var s=this.shape,o=0;o<2;++o)this._field[2].size>this._field[o].data.length&&(g.freeFloat(this._field[o].data),this._field[o].data=g.mallocFloat(this._field[2].size)),this._field[o]=E(this._field[o].data,[s[0]+2,s[1]+2]);if(e.coords){var u=e.coords;if(!Array.isArray(u)||3!==u.length)throw new Error("gl-surface: invalid coordinates for x/y");for(o=0;o<2;++o){var l=u[o];for(y=0;y<2;++y)if(l.shape[y]!==s[y])throw new Error("gl-surface: coords have incorrect shape");a(this._field[o],l)}}else if(e.ticks){var h=e.ticks;if(!Array.isArray(h)||2!==h.length)throw new Error("gl-surface: invalid ticks");for(o=0;o<2;++o){var d=h[o];if((Array.isArray(d)||d.length)&&(d=E(d)),d.shape[0]!==s[o])throw new Error("gl-surface: invalid tick length");var v=E(d.data,s);v.stride[o]=d.stride[0],v.stride[1^o]=0,a(this._field[o],v)}}else{for(o=0;o<2;++o){var m=[0,0];m[o]=1,this._field[o]=E(this._field[o].data,[s[0]+2,s[1]+2],m,0)}this._field[0].set(0,0,0);for(var y=0;y<s[0];++y)this._field[0].set(y+1,0,y);for(this._field[0].set(s[0]+1,0,s[0]-1),this._field[1].set(0,0,0),y=0;y<s[1];++y)this._field[1].set(0,y+1,y);this._field[1].set(0,s[1]+1,s[1]-1)}var b=this._field,w=E(g.mallocFloat(3*b[2].size*2),[3,s[0]+2,s[1]+2,2]);for(o=0;o<3;++o)C(w.pick(o),b[o],"mirror");var x=E(g.mallocFloat(3*b[2].size),[s[0]+2,s[1]+2,3]);for(o=0;o<s[0]+2;++o)for(y=0;y<s[1]+2;++y){var T=w.get(0,o,y,0),N=w.get(0,o,y,1),k=w.get(1,o,y,0),L=w.get(1,o,y,1),A=w.get(2,o,y,0),O=w.get(2,o,y,1),M=k*O-L*A,_=A*N-O*T,D=T*L-N*k,H=Math.sqrt(M*M+_*_+D*D);H<1e-8?(H=Math.max(Math.abs(M),Math.abs(_),Math.abs(D)),H<1e-8?(D=1,_=M=0,H=1):H=1/H):H=1/Math.sqrt(H),x.set(o,y,0,M*H),x.set(o,y,1,_*H),x.set(o,y,2,D*H)}g.free(w.data);var B=[1/0,1/0,1/0],j=[-1/0,-1/0,-1/0],F=1/0,I=-1/0,q=(s[0]-1)*(s[1]-1)*6,R=g.mallocFloat(p.nextPow2(10*q)),U=0,z=0;for(o=0;o<s[0]-1;++o)e:for(y=0;y<s[1]-1;++y){for(var W=0;W<2;++W)for(var X=0;X<2;++X)for(var V=0;V<3;++V){var $=this._field[V].get(1+o+W,1+y+X);if(isNaN($)||!isFinite($))continue e}for(V=0;V<6;++V){var J=o+P[V][0],K=y+P[V][1],Q=this._field[0].get(J+1,K+1),G=this._field[1].get(J+1,K+1);$=this._field[2].get(J+1,K+1);var Y=$;M=x.get(J+1,K+1,0),_=x.get(J+1,K+1,1),D=x.get(J+1,K+1,2),e.intensity&&(Y=e.intensity.get(J,K)),R[U++]=J,R[U++]=K,R[U++]=Q,R[U++]=G,R[U++]=$,R[U++]=0,R[U++]=Y,R[U++]=M,R[U++]=_,R[U++]=D,B[0]=Math.min(B[0],Q),B[1]=Math.min(B[1],G),B[2]=Math.min(B[2],$),F=Math.min(F,Y),j[0]=Math.max(j[0],Q),j[1]=Math.max(j[1],G),j[2]=Math.max(j[2],$),I=Math.max(I,Y),z+=1}}for(e.intensityBounds&&(F=+e.intensityBounds[0],I=+e.intensityBounds[1]),o=6;o<U;o+=10)R[o]=(R[o]-F)/(I-F);this._vertexCount=z,this._coordinateBuffer.update(R.subarray(0,U)),g.freeFloat(R),g.free(x.data),this.bounds=[B,j],this.intensity=e.intensity||this._field[2],this.intensityBounds[0]===F&&this.intensityBounds[1]===I||(n=!0),this.intensityBounds=[F,I]}if("levels"in e){var Z=e.levels;for(Z=Array.isArray(Z[0])?Z.slice():[[],[],Z],o=0;o<3;++o)Z[o]=Z[o].slice(),Z.sort(function(e,t){return e-t});e:for(o=0;o<3;++o){if(Z[o].length!==this.contourLevels[o].length){n=!0;break}for(y=0;y<Z[o].length;++y)if(Z[o][y]!==this.contourLevels[o][y]){n=!0;break e}}this.contourLevels=Z}if(n){b=this._field,s=this.shape;for(var et=[],tt=0;tt<3;++tt){Z=this.contourLevels[tt];var nt=[],rt=[],it=[0,0,0];for(o=0;o<Z.length;++o){var st=S(this._field[tt],Z[o]);nt.push(et.length/5|0),z=0;e:for(y=0;y<st.cells.length;++y){var ot=st.cells[y];for(V=0;V<2;++V){var ut=st.positions[ot[V]],at=ut[0],ft=0|Math.floor(at),lt=at-ft,ct=ut[1],ht=0|Math.floor(ct),pt=ct-ht,dt=!1;t:for(var vt=0;vt<3;++vt){it[vt]=0;var mt=(tt+vt+1)%3;for(W=0;W<2;++W){var gt=W?lt:1-lt;for(J=0|Math.min(Math.max(ft+W,0),s[0]),X=0;X<2;++X){var yt=X?pt:1-pt;if(K=0|Math.min(Math.max(ht+X,0),s[1]),$=vt<2?this._field[mt].get(J,K):(this.intensity.get(J,K)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite($)||isNaN($)){dt=!0;break t}var bt=gt*yt;it[vt]+=bt*$}}}if(dt){if(V>0){for(var wt=0;wt<5;++wt)et.pop();z-=1}continue e}et.push(it[0],it[1],ut[0],ut[1],it[2]),z+=1}}rt.push(z)}this._contourOffsets[tt]=nt,this._contourCounts[tt]=rt}var Et=g.mallocFloat(et.length);for(o=0;o<et.length;++o)Et[o]=et[o];this._contourBuffer.update(Et),g.freeFloat(Et)}e.colormap&&this._colorMap.setPixels(i(e.colormap))},j.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var e=0;e<3;++e)g.freeFloat(this._field[e].data)},j.highlight=function(e){if(!e)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void (this.highlightLevel=[-1,-1,-1]);for(var t=0;t<3;++t)this.enableHighlight[t]?this.highlightLevel[t]=e.level[t]:this.highlightLevel[t]=-1;var n;if(n=this.snapToData?e.dataCoordinate:e.position,this.enableDynamic[0]&&n[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&n[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&n[2]!==this.dynamicLevel[2]){for(var r=0,i=this.shape,s=g.mallocFloat(12*i[0]*i[1]),o=0;o<3;++o)if(this.enableDynamic[o]){this.dynamicLevel[o]=n[o];var u=(o+1)%3,a=(o+2)%3,f=this._field[o],l=this._field[u],c=this._field[a],h=(this.intensity,S(f,n[o])),p=h.cells,d=h.positions;for(this._dynamicOffsets[o]=r,t=0;t<p.length;++t)for(var v=p[t],m=0;m<2;++m){var y=d[v[m]],b=+y[0],w=0|b,E=0|Math.min(w+1,i[0]),x=b-w,T=1-x,N=+y[1],C=0|N,k=0|Math.min(C+1,i[1]),L=N-C,A=1-L,O=T*A,M=T*L,_=x*A,D=x*L,P=O*l.get(w,C)+M*l.get(w,k)+_*l.get(E,C)+D*l.get(E,k),H=O*c.get(w,C)+M*c.get(w,k)+_*c.get(E,C)+D*c.get(E,k);if(isNaN(P)||isNaN(H)){m&&(r-=1);break}s[2*r+0]=P,s[2*r+1]=H,r+=1}this._dynamicCounts[o]=r-this._dynamicOffsets[o]}else this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;this._dynamicBuffer.update(s.subarray(0,2*r)),g.freeFloat(s)}}},{"./lib/shaders":235,"binary-search-bounds":55,"bit-twiddle":56,colormap:82,"gl-buffer":130,"gl-mat4/invert":154,"gl-mat4/multiply":156,"gl-texture2d":237,"gl-vao":241,ndarray:432,"ndarray-gradient":423,"ndarray-ops":426,"ndarray-pack":427,"surface-nets":493,"typedarray-pool":502}],237:[function(e,t,n){"use strict";function r(e){g=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],y=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],b=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}function i(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}function s(e,t,n){var r=e.gl,i=r.getParameter(r.MAX_TEXTURE_SIZE);if(t<0||t>i||n<0||n>i)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,n],e.bind(),r.texImage2D(r.TEXTURE_2D,0,e.format,t,n,0,e.format,e.type,null),e._mipLevels=[0],e}function o(e,t,n,r,i,s){this.gl=e,this.handle=t,this.format=i,this.type=s,this._shape=[n,r],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,u=[this._wrapS,this._wrapT];Object.defineProperties(u,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]),this._wrapVector=u;var a=[this._shape[0],this._shape[1]];Object.defineProperties(a,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]),this._shapeVector=a}function u(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function a(e,t,n,r,i,s,o,a){var f=a.dtype,l=a.shape.slice();if(l.length<2||l.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var c=0,h=0,p=u(l,a.stride.slice());"float32"===f?c=e.FLOAT:"float64"===f?(c=e.FLOAT,p=!1,f="float32"):"uint8"===f?c=e.UNSIGNED_BYTE:(c=e.UNSIGNED_BYTE,p=!1,f="uint8");var g=1;if(2===l.length)h=e.LUMINANCE,l=[l[0],l[1],1],a=d(a.data,l,[a.stride[0],a.stride[1],1],a.offset);else{if(3!==l.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===l[2])h=e.ALPHA;else if(2===l[2])h=e.LUMINANCE_ALPHA;else if(3===l[2])h=e.RGB;else{if(4!==l[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");h=e.RGBA}g=l[2]}if(h!==e.LUMINANCE&&h!==e.ALPHA||i!==e.LUMINANCE&&i!==e.ALPHA||(h=i),h!==i)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var y=a.size,b=o.indexOf(r)<0;if(b&&o.push(r),c===s&&p)0===a.offset&&a.data.length===y?b?e.texImage2D(e.TEXTURE_2D,r,i,l[0],l[1],0,i,s,a.data):e.texSubImage2D(e.TEXTURE_2D,r,t,n,l[0],l[1],i,s,a.data):b?e.texImage2D(e.TEXTURE_2D,r,i,l[0],l[1],0,i,s,a.data.subarray(a.offset,a.offset+y)):e.texSubImage2D(e.TEXTURE_2D,r,t,n,l[0],l[1],i,s,a.data.subarray(a.offset,a.offset+y));else{var E;E=s===e.FLOAT?m.mallocFloat32(y):m.mallocUint8(y);var S=d(E,l,[l[2],l[2]*l[0],1]);c===e.FLOAT&&s===e.UNSIGNED_BYTE?w(S,a):v.assign(S,a),b?e.texImage2D(e.TEXTURE_2D,r,i,l[0],l[1],0,i,s,E.subarray(0,y)):e.texSubImage2D(e.TEXTURE_2D,r,t,n,l[0],l[1],i,s,E.subarray(0,y)),s===e.FLOAT?m.freeFloat32(E):m.freeUint8(E)}}function f(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function l(e,t,n,r,i){var s=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>s||n<0||n>s)throw new Error("gl-texture2d: Invalid texture shape");if(i===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var u=f(e);return e.texImage2D(e.TEXTURE_2D,0,r,t,n,0,r,i,null),new o(e,u,t,n,r,i)}function c(e,t,n,r){var i=f(e);return e.texImage2D(e.TEXTURE_2D,0,n,n,r,t),new o(e,i,0|t.width,0|t.height,n,r)}function h(e,t){var n=t.dtype,r=t.shape.slice(),i=e.getParameter(e.MAX_TEXTURE_SIZE);if(r[0]<0||r[0]>i||r[1]<0||r[1]>i)throw new Error("gl-texture2d: Invalid texture size");var s=u(r,t.stride.slice()),a=0;"float32"===n?a=e.FLOAT:"float64"===n?(a=e.FLOAT,s=!1,n="float32"):"uint8"===n?a=e.UNSIGNED_BYTE:(a=e.UNSIGNED_BYTE,s=!1,n="uint8");var l=0;if(2===r.length)l=e.LUMINANCE,r=[r[0],r[1],1],t=d(t.data,r,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==r.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===r[2])l=e.ALPHA;else if(2===r[2])l=e.LUMINANCE_ALPHA;else if(3===r[2])l=e.RGB;else{if(4!==r[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");l=e.RGBA}}a!==e.FLOAT||e.getExtension("OES_texture_float")||(a=e.UNSIGNED_BYTE,s=!1);var c,h,p=t.size;if(s)c=0===t.offset&&t.data.length===p?t.data:t.data.subarray(t.offset,t.offset+p);else{var g=[r[2],r[2]*r[0],1];h=m.malloc(p,n);var y=d(h,r,g,0);"float32"!==n&&"float64"!==n||a!==e.UNSIGNED_BYTE?v.assign(y,t):w(y,t),c=h.subarray(0,p)}var b=f(e);return e.texImage2D(e.TEXTURE_2D,0,l,r[0],r[1],0,l,a,c),s||m.free(h),new o(e,b,r[0],r[1],l,a)}function p(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(g||r(e),"number"==typeof arguments[1])return l(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return l(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var t=arguments[1];if(i(t))return c(e,t,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return h(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}var d=e("ndarray"),v=e("ndarray-ops"),m=e("typedarray-pool");t.exports=p;var g=null,y=null,b=null,w=function(e,t){v.muls(e,t,255)},E=o.prototype;Object.defineProperties(E,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&g.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),y.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&g.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),y.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var n=this.gl.getExtension("EXT_texture_filter_anisotropic");n&&this.gl.texParameterf(this.gl.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),b.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),b.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;t<2;++t)if(b.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var n=this.gl;return this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this._wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return s(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return e|=0,s(this,e,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e|=0,s(this,this._shape[0],e),e}}}),E.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},E.dispose=function(){this.gl.deleteTexture(this.handle)},E.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},E.setPixels=function(e,t,n,r){var s=this.gl;if(this.bind(),Array.isArray(t)?(r=n,n=0|t[1],t=0|t[0]):(t=t||0,n=n||0),r=r||0,i(e)){var o=this._mipLevels.indexOf(r)<0;o?(s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,this.type,e),this._mipLevels.push(r)):s.texSubImage2D(s.TEXTURE_2D,r,t,n,this.format,this.type,e)}else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>r||n+e.shape[0]>this._shape[0]>>>r||t<0||n<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");a(s,t,n,r,this.format,this.type,this._mipLevels,e)}}},{ndarray:432,"ndarray-ops":426,"typedarray-pool":502}],238:[function(e,t,n){"use strict";function r(e,t,n){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var r=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<n.length;++i){var s=n[i];if(s.buffer){var o=s.buffer,u=s.size||4,a=s.type||e.FLOAT,f=!!s.normalized,l=s.stride||0,c=s.offset||0;o.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,u,a,f,l,c)}else{if("number"==typeof s)e.vertexAttrib1f(i,s);else if(1===s.length)e.vertexAttrib1f(i,s[0]);else if(2===s.length)e.vertexAttrib2f(i,s[0],s[1]);else if(3===s.length)e.vertexAttrib3f(i,s[0],s[1],s[2]);else{if(4!==s.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,s[0],s[1],s[2],s[3])}e.disableVertexAttribArray(i)}}for(;i<r;++i)e.disableVertexAttribArray(i)}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(var i=0;i<r;++i)e.disableVertexAttribArray(i)}}t.exports=r},{}],239:[function(e,t,n){"use strict";function r(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}function i(e){return new r(e)}var s=e("./do-bind.js");r.prototype.bind=function(){s(this.gl,this._elements,this._attributes)},r.prototype.update=function(e,t,n){this._elements=t,this._attributes=e,this._elementsType=n||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._elements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)},t.exports=i},{"./do-bind.js":238}],240:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){this.location=e,this.dimension=t,this.a=n,this.b=r,this.c=i,this.d=s}function i(e,t,n){this.gl=e,this._ext=t,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=e.UNSIGNED_SHORT}function s(e,t){return new i(e,t,t.createVertexArrayOES())}var o=e("./do-bind.js");r.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(e,t,n){if(this.bind(),o(this.gl,t,e),this.unbind(),this._attribs.length=0,e)for(var i=0;i<e.length;++i){var s=e[i];"number"==typeof s?this._attribs.push(new r(i,1,s)):Array.isArray(s)&&this._attribs.push(new r(i,s.length,s[0],s[1],s[2],s[3]))}this._useElements=!!t,this._elementsType=n||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._useElements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)},t.exports=s},{"./do-bind.js":238}],241:[function(e,t,n){"use strict";function r(e){this.bindVertexArrayOES=e.bindVertexArray.bind(e),this.createVertexArrayOES=e.createVertexArray.bind(e),this.deleteVertexArrayOES=e.deleteVertexArray.bind(e)}function i(e,t,n,i){var u,f=e.createVertexArray?new r(e):e.getExtension("OES_vertex_array_object");return u=f?s(e,f):o(e),u.update(t,n,i),u}var s=e("./lib/vao-native.js"),o=e("./lib/vao-emulated.js");t.exports=i},{"./lib/vao-emulated.js":239,"./lib/vao-native.js":240}],242:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2];return e[0]=i*a-s*u,e[1]=s*o-r*a,e[2]=r*u-i*o,e}t.exports=r},{}],243:[function(e,t,n){function r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=r},{}],244:[function(e,t,n){function r(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}t.exports=r},{}],245:[function(e,t,n){function r(e,t,n,r){var i=t[0],s=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e}t.exports=r},{}],246:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}t.exports=r},{}],247:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e}t.exports=r},{}],248:[function(e,t,n){function r(e,t,n,r){return i[0]=r,i[1]=n,i[2]=t,i[3]=e,s[0]}t.exports=r;var i=new Uint8Array(4),s=new Float32Array(i.buffer)},{}],249:[function(e,t,n){function r(e){for(var t=Array.isArray(e)?e:i(e),n=0;n<t.length;n++){var r=t[n];if("preprocessor"===r.type){var o=r.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(o&&o[2]){var u=o[1],f=o[2];return(u?s(f):f).trim()}}}}var i=e("glsl-tokenizer"),s=e("atob-lite");t.exports=r},{"atob-lite":37,"glsl-tokenizer":256}],250:[function(e,t,n){function r(e){function t(e){e.length&&W.push({type:x[U],data:e,position:$,line:X,column:V})}function n(e){q=0,Q+=e,I=Q.length;for(var t;j=Q[q],q<I;){switch(t=q,U){case c:q=L();break;case h:q=k();break;case p:q=C();break;case d:q=A();break;case v:q=P();break;case S:q=D();break;case m:q=H();break;case l:q=B();break;case w:q=N();break;case f:q=T()}if(t!==q)switch(Q[t]){case"\n":V=0,++X;break;default:++V}}return R+=q,Q=Q.slice(q),W}function r(e){return z.length&&t(z.join("")),U=E,t("(eof)"),W}function T(){return z=z.length?[]:z,"/"===F&&"*"===j?($=R+q-1,U=c,F=j,q+1):"/"===F&&"/"===j?($=R+q-1,U=h,F=j,q+1):"#"===j?(U=p,$=R+q,q):/\s/.test(j)?(U=w,$=R+q,q):(J=/\d/.test(j),K=/[^\w_]/.test(j),$=R+q,U=J?v:K?d:l,q)}function N(){return/[^\s]/g.test(j)?(t(z.join("")),U=f,q):(z.push(j),F=j,q+1)}function C(){return"\r"!==j&&"\n"!==j||"\\"===F?(z.push(j),F=j,q+1):(t(z.join("")),U=f,q)}function k(){return C()}function L(){return"/"===j&&"*"===F?(z.push(j),t(z.join("")),U=f,q+1):(z.push(j),F=j,q+1)}function A(){if("."===F&&/\d/.test(j))return U=m,q;if("/"===F&&"*"===j)return U=c,q;if("/"===F&&"/"===j)return U=h,q;if("."===j&&z.length){for(;O(z););return U=m,q}if(";"===j||")"===j||"("===j){if(z.length)for(;O(z););return t(j),U=f,q+1}var e=2===z.length&&"="!==j;if(/[\w_\d\s]/.test(j)||e){for(;O(z););return U=f,q}return z.push(j),F=j,q+1}function O(e){for(var n,r,i=0;;){if(n=s.indexOf(e.slice(0,e.length+i).join("")),r=s[n],n===-1){if(i-- +e.length>0)continue;r=e.slice(0,1).join("")}return t(r),$+=r.length,z=z.slice(r.length),z.length}}function D(){return/[^a-fA-F0-9]/.test(j)?(t(z.join("")),U=f,q):(z.push(j),F=j,q+1)}function P(){return"."===j?(z.push(j),U=m,F=j,q+1):/[eE]/.test(j)?(z.push(j),U=m,F=j,q+1):"x"===j&&1===z.length&&"0"===z[0]?(U=S,z.push(j),F=j,q+1):/[^\d]/.test(j)?(t(z.join("")),U=f,q):(z.push(j),F=j,q+1)}function H(){return"f"===j&&(z.push(j),F=j,q+=1),/[eE]/.test(j)?(z.push(j),F=j,q+1):"-"===j&&/[eE]/.test(F)?(z.push(j),F=j,q+1):/[^\d]/.test(j)?(t(z.join("")),U=f,q):(z.push(j),F=j,q+1)}function B(){if(/[^\d\w_]/.test(j)){var e=z.join("");return U=Y.indexOf(e)>-1?b:G.indexOf(e)>-1?y:g,t(z.join("")),U=f,q}return z.push(j),F=j,q+1}var j,F,I,q=0,R=0,U=f,z=[],W=[],X=1,V=0,$=0,J=!1,K=!1,Q="";e=e||{};var G=o,Y=i;return"300 es"===e.version&&(G=a,Y=u),function(e){return W=[],null!==e?n(e.replace?e.replace(/\r\n/g,"\n"):e):r()}}t.exports=r;var i=e("./lib/literals"),s=e("./lib/operators"),o=e("./lib/builtins"),u=e("./lib/literals-300es"),a=e("./lib/builtins-300es"),f=999,l=9999,c=0,h=1,p=2,d=3,v=4,m=5,g=6,y=7,b=8,w=9,E=10,S=11,x=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":252,"./lib/builtins-300es":251,"./lib/literals":254,"./lib/literals-300es":253,"./lib/operators":255}],251:[function(e,t,n){var r=e("./builtins");r=r.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),t.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":252}],252:[function(e,t,n){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],253:[function(e,t,n){var r=e("./literals");t.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":254}],254:[function(e,t,n){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],255:[function(e,t,n){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],256:[function(e,t,n){function r(e,t){var n=i(t),r=[];return r=r.concat(n(e)),r=r.concat(n(null))}var i=e("./index");t.exports=r},{"./index":250}],257:[function(e,t,n){"use strict";function r(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var s=new Int32Array(this.arrayBuffer);e=s[0],t=s[1],n=s[2],this.d=t+2*n;for(var o=0;o<this.d*this.d;o++){var u=s[i+o],a=s[i+o+1];r.push(u===a?null:s.subarray(u,a))}var f=s[i+r.length],l=s[i+r.length+1];this.keys=s.subarray(f,l),this.bboxes=s.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var h=n/t*e;this.min=-h,this.max=e+h}t.exports=r;var i=3;r.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(e,t,n,r,i,s){this.cells[i].push(s)},r.prototype.query=function(e,t,n,r){var i=this.min,s=this.max;if(e<=i&&t<=i&&s<=n&&s<=r)return Array.prototype.slice.call(this.keys);var o=[],u={};return this._forEachCell(e,t,n,r,this._queryCell,o,u),o},r.prototype._queryCell=function(e,t,n,r,i,s,o){var u=this.cells[i];if(null!==u)for(var a=this.keys,f=this.bboxes,l=0;l<u.length;l++){var c=u[l];if(void 0===o[c]){var h=4*c;e<=f[h+2]&&t<=f[h+3]&&n>=f[h+0]&&r>=f[h+1]?(o[c]=!0,s.push(a[c])):o[c]=!1}}},r.prototype._forEachCell=function(e,t,n,r,i,s,o){for(var u=this._convertToCellCoord(e),a=this._convertToCellCoord(t),f=this._convertToCellCoord(n),l=this._convertToCellCoord(r),c=u;c<=f;c++)for(var h=a;h<=l;h++){var p=this.d*h+c;if(i.call(this,e,t,n,r,p,s,o))return}},r.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=i+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var s=new Int32Array(t+n+this.keys.length+this.bboxes.length);s[0]=this.extent,s[1]=this.n,s[2]=this.padding;for(var o=t,u=0;u<e.length;u++){var a=e[u];s[i+u]=o,s.set(a,o),o+=a.length}return s[i+e.length]=o,s.set(this.keys,o),o+=this.keys.length,s[i+e.length+1]=o,s.set(this.bboxes,o),o+=this.bboxes.length,s.buffer}},{}],258:[function(e,t,n){n.read=function(e,t,n,r,i){var s,o,u=8*i-r-1,a=(1<<u)-1,f=a>>1,l=-7,c=n?i-1:0,h=n?-1:1,p=e[t+c];for(c+=h,s=p&(1<<-l)-1,p>>=-l,l+=u;l>0;s=256*s+e[t+c],c+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+e[t+c],c+=h,l-=8);if(0===s)s=1-f;else{if(s===a)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,r),s-=f}return(p?-1:1)*o*Math.pow(2,s-r)},n.write=function(e,t,n,r,i,s){var o,u,a,f=8*s-i-1,l=(1<<f)-1,c=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-o))<1&&(o--,a*=2),t+=o+c>=1?h/a:h*Math.pow(2,1-c),t*a>=2&&(o++,a/=2),o+c>=l?(u=0,o=l):o+c>=1?(u=(t*a-1)*Math.pow(2,i),o+=c):(u=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&u,p+=d,u/=256,i-=8);for(o=o<<i|u,f+=i;f>0;e[n+p]=255&o,p+=d,o/=256,f-=8);e[n+p-d]|=128*v}},{}],259:[function(e,t,n){"use strict";function r(e,t,n){this.vertices=e,this.adjacent=t,this.boundary=n,this.lastVisited=-1}function i(e,t,n){this.vertices=e,this.cell=t,this.index=n}function s(e,t){return l(e.vertices,t.vertices)}function o(e){for(var t=["function orient(){var tuple=this.tuple;return test("],n=0;n<=e;++n)n>0&&t.push(","),t.push("tuple[",n,"]");t.push(")}return orient");var r=new Function("test",t.join("")),i=f[e+1];return i||(i=f),r(i)}function u(e,t,n){this.dimension=e,this.vertices=t,this.simplices=n,this.interior=n.filter(function(e){return!e.boundary}),this.tuple=new Array(e+1);for(var r=0;r<=e;++r)this.tuple[r]=this.vertices[r];var i=c[e];i||(i=c[e]=o(e)),this.orient=i}function a(e,t){var n=e.length;if(0===n)throw new Error("Must have at least d+1 points");var i=e[0].length;if(n<=i)throw new Error("Must input at least d+1 points");var s=e.slice(0,i+1),o=f.apply(void 0,s);if(0===o)throw new Error("Input not in general position");for(var a=new Array(i+1),l=0;l<=i;++l)a[l]=l;o<0&&(a[0]=1,a[1]=0);for(var c=new r(a,new Array(i+1),!1),h=c.adjacent,p=new Array(i+2),l=0;l<=i;++l){for(var d=a.slice(),v=0;v<=i;++v)v===l&&(d[v]=-1);var m=d[0];d[0]=d[1],d[1]=m;var g=new r(d,new Array(i+1),!0);h[l]=g,p[l]=g}p[i+1]=c;for(var l=0;l<=i;++l)for(var d=h[l].vertices,y=h[l].adjacent,v=0;v<=i;++v){var b=d[v];if(b<0)y[v]=c;else for(var w=0;w<=i;++w)h[w].vertices.indexOf(b)<0&&(y[v]=h[w])}for(var E=new u(i,s,p),S=!!t,l=i+1;l<n;++l)E.insert(e[l],S);return E.boundary()}t.exports=a;var f=e("robust-orientation"),l=e("simplicial-complex").compareCells;r.prototype.flip=function(){var e=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=e;var t=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=t};var c=[],h=u.prototype;h.handleBoundaryDegeneracy=function(e,t){var n=this.dimension,r=this.vertices.length-1,i=this.tuple,s=this.vertices,o=[e];for(e.lastVisited=-r;o.length>0;){e=o.pop();for(var u=(e.vertices,e.adjacent),a=0;a<=n;++a){var f=u[a];if(f.boundary&&!(f.lastVisited<=-r)){for(var l=f.vertices,c=0;c<=n;++c){var h=l[c];h<0?i[c]=t:i[c]=s[h]}var p=this.orient();if(p>0)return f;f.lastVisited=-r,0===p&&o.push(f)}}}return null},h.walk=function(e,t){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,s=this.tuple,o=t?this.interior.length*Math.random()|0:this.interior.length-1,u=this.interior[o];e:for(;!u.boundary;){for(var a=u.vertices,f=u.adjacent,l=0;l<=r;++l)s[l]=i[a[l]];u.lastVisited=n;for(var l=0;l<=r;++l){var c=f[l];if(!(c.lastVisited>=n)){var h=s[l];s[l]=e;var p=this.orient();if(s[l]=h,p<0){u=c;continue e}c.boundary?c.lastVisited=-n:c.lastVisited=n}}return}return u},h.addPeaks=function(e,t){var n=this.vertices.length-1,o=this.dimension,u=this.vertices,a=this.tuple,f=this.interior,l=this.simplices,c=[t];t.lastVisited=n,t.vertices[t.vertices.indexOf(-1)]=n,t.boundary=!1,f.push(t);for(var h=[];c.length>0;){var t=c.pop(),p=t.vertices,d=t.adjacent,v=p.indexOf(n);if(!(v<0))for(var m=0;m<=o;++m)if(m!==v){var g=d[m];if(g.boundary&&!(g.lastVisited>=n)){var y=g.vertices;if(g.lastVisited!==-n){for(var b=0,w=0;w<=o;++w)y[w]<0?(b=w,a[w]=e):a[w]=u[y[w]];var E=this.orient();if(E>0){y[b]=n,g.boundary=!1,f.push(g),c.push(g),g.lastVisited=n;continue}g.lastVisited=-n}var S=g.adjacent,x=p.slice(),T=d.slice(),N=new r(x,T,!0);l.push(N);var C=S.indexOf(t);if(!(C<0)){S[C]=N,T[v]=g,x[m]=-1,T[m]=t,d[m]=N,N.flip();for(var w=0;w<=o;++w){var k=x[w];if(!(k<0||k===n)){for(var L=new Array(o-1),A=0,O=0;O<=o;++O){var M=x[O];M<0||O===w||(L[A++]=M)}h.push(new i(L,N,w))}}}}}}h.sort(s);for(var m=0;m+1<h.length;m+=2){var _=h[m],D=h[m+1],P=_.index,H=D.index;P<0||H<0||(_.cell.adjacent[_.index]=D.cell,D.cell.adjacent[D.index]=_.cell)}},h.insert=function(e,t){var n=this.vertices;n.push(e);var r=this.walk(e,t);if(r){for(var i=this.dimension,s=this.tuple,o=0;o<=i;++o){var u=r.vertices[o];u<0?s[o]=e:s[o]=n[u]}var a=this.orient(s);a<0||(0!==a||(r=this.handleBoundaryDegeneracy(r,e)))&&this.addPeaks(e,r)}},h.boundary=function(){for(var e=this.dimension,t=[],n=this.simplices,r=n.length,i=0;i<r;++i){var s=n[i];if(s.boundary){for(var o=new Array(e),u=s.vertices,a=0,f=0,l=0;l<=e;++l)u[l]>=0?o[a++]=u[l]:f=1&l;if(f===(1&e)){var c=o[0];o[0]=o[1],o[1]=c}t.push(o)}}return t}},{"robust-orientation":471,"simplicial-complex":482}],260:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}function i(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function s(e,t){var n=d(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function o(e,t){var n=e.intervals([]);n.push(t),s(e,n)}function u(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?y:(n.splice(r,1),s(e,n),b)}function a(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function f(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function l(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}function c(e,t){return e-t}function h(e,t){var n=e[0]-t[0];return n?n:e[1]-t[1]}function p(e,t){var n=e[1]-t[1];return n?n:e[0]-t[0]}function d(e){if(0===e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(c);for(var i=t[t.length>>1],s=[],o=[],u=[],n=0;n<e.length;++n){var a=e[n];a[1]<i?s.push(a):i<a[0]?o.push(a):u.push(a)}var f=u,l=u.slice();return f.sort(h),l.sort(p),new r(i,d(s),d(o),f,l)}function v(e){this.root=e}function m(e){return new v(e&&0!==e.length?d(e):null)}var g=e("binary-search-bounds"),y=0,b=1,w=2;t.exports=m;var E=r.prototype;E.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},E.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?o(this,e):this.left.insert(e):this.left=d([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?o(this,e):this.right.insert(e):this.right=d([e]);else{var n=g.ge(this.leftPoints,e,h),r=g.ge(this.rightPoints,e,p);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}},E.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return y;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return u(this,e);var r=this.left.remove(e);return r===w?(this.left=null,this.count-=1,b):(r===b&&(this.count-=1),r)}if(e[0]>this.mid){if(!this.right)return y;var s=this.left?this.left.count:0;if(4*s>3*(t-1))return u(this,e);var r=this.right.remove(e);return r===w?(this.right=null,this.count-=1,b):(r===b&&(this.count-=1),r)}if(1===this.count)return this.leftPoints[0]===e?w:y;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var o=this,a=this.left;a.right;)o=a,a=a.right;if(o===this)a.right=this.right;else{var f=this.left,r=this.right;o.count-=a.count,o.right=a.left,a.left=f,a.right=r}i(this,a),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?i(this,this.left):i(this,this.right);return b}for(var f=g.ge(this.leftPoints,e,h);f<this.leftPoints.length&&this.leftPoints[f][0]===e[0];++f)if(this.leftPoints[f]===e){this.count-=1,this.leftPoints.splice(f,1);for(var r=g.ge(this.rightPoints,e,p);r<this.rightPoints.length&&this.rightPoints[r][1]===e[1];++r)if(this.rightPoints[r]===e)return this.rightPoints.splice(r,1),b}return y},E.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return a(this.leftPoints,e,t)}if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return f(this.rightPoints,e,t)}return l(this.leftPoints,t)},E.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?a(this.leftPoints,t,n):e>this.mid?f(this.rightPoints,e,n):l(this.leftPoints,n)};var S=v.prototype;S.insert=function(e){this.root?this.root.insert(e):this.root=new r(e[0],null,null,[e],[e])},S.remove=function(e){if(this.root){var t=this.root.remove(e);return t===w&&(this.root=null),t!==y}return!1},S.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},S.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(S,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(S,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":55}],261:[function(e,t,n){"use strict";function r(e,t){t=t||new Array(e.length);for(var n=0;n<e.length;++n)t[e[n]]=n;return t}t.exports=r},{}],262:[function(e,t,n){"use strict";function r(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}t.exports=r},{}],263:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}t.exports=function(e){return null!=e&&(r(e)||i(e)||!!e._isBuffer)}},{}],264:[function(e,t,n){"use strict";function r(e,t,n,r,s){return new i(e,t,n,r,s)}function i(e,t,n,r,i){t=t||s,n=n||o,i=i||Array,this.nodeSize=r||64,this.points=e,this.ids=new i(e.length),this.coords=new i(2*e.length);for(var a=0;a<e.length;a++)this.ids[a]=a,this.coords[2*a]=t(e[a]),this.coords[2*a+1]=n(e[a]);u(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function s(e){return e[0]}function o(e){return e[1]}var u=e("./sort"),a=e("./range"),f=e("./within");t.exports=r,i.prototype={range:function(e,t,n,r){return a(this.ids,this.coords,e,t,n,r,this.nodeSize)},within:function(e,t,n){return f(this.ids,this.coords,e,t,n,this.nodeSize)}}},{"./range":265,"./sort":266,"./within":267}],265:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){for(var u,a,f=[0,e.length-1,0],l=[];f.length;){var c=f.pop(),h=f.pop(),p=f.pop();if(h-p<=o)for(var d=p;d<=h;d++)u=t[2*d],a=t[2*d+1],u>=n&&u<=i&&a>=r&&a<=s&&l.push(e[d]);else{var v=Math.floor((p+h)/2);u=t[2*v],a=t[2*v+1],u>=n&&u<=i&&a>=r&&a<=s&&l.push(e[v]);var m=(c+1)%2;(0===c?n<=u:r<=a)&&(f.push(p),f.push(v-1),f.push(m)),(0===c?i>=u:s>=a)&&(f.push(v+1),f.push(h),f.push(m))}}return l}t.exports=r},{}],266:[function(e,t,n){"use strict";function r(e,t,n,s,o,u){if(!(o-s<=n)){var a=Math.floor((s+o)/2);i(e,t,a,s,o,u%2),r(e,t,n,s,a-1,u+1),r(e,t,n,a+1,o,u+1)}}function i(e,t,n,r,o,u){for(;o>r;){if(o-r>600){var f=o-r+1,l=n-r+1,c=Math.log(f),h=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*h*(f-h)/f)*(l-f/2<0?-1:1),d=Math.max(r,Math.floor(n-l*h/f+p)),v=Math.min(o,Math.floor(n+(f-l)*h/f+p));i(e,t,n,d,v,u)}var m=t[2*n+u],g=r,y=o;for(s(e,t,r,n),t[2*o+u]>m&&s(e,t,r,o);g<y;){for(s(e,t,g,y),g++,y--;t[2*g+u]<m;)g++;for(;t[2*y+u]>m;)y--}t[2*r+u]===m?s(e,t,r,y):(y++,s(e,t,y,o)),y<=n&&(r=y+1),n<=y&&(o=y-1)}}function s(e,t,n,r){o(e,n,r),o(t,2*n,2*r),o(t,2*n+1,2*r+1)}function o(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}t.exports=r},{}],267:[function(e,t,n){"use strict";function r(e,t,n,r,s,o){for(var u=[0,e.length-1,0],a=[],f=s*s;u.length;){var l=u.pop(),c=u.pop(),h=u.pop();if(c-h<=o)for(var p=h;p<=c;p++)i(t[2*p],t[2*p+1],n,r)<=f&&a.push(e[p]);else{var d=Math.floor((h+c)/2),v=t[2*d],m=t[2*d+1];i(v,m,n,r)<=f&&a.push(e[d]);var g=(l+1)%2;(0===l?n-s<=v:r-s<=m)&&(u.push(h),u.push(d-1),u.push(g)),(0===l?n+s>=v:r+s>=m)&&(u.push(d+1),u.push(c),u.push(g))}}return a}function i(e,t,n,r){var i=e-n,s=t-r;return i*i+s*s}t.exports=r},{}],268:[function(e,t,n){"use strict";function r(e,t){var n;if(c(e)){var a,f=e.stops&&"object"==typeof e.stops[0][0],l=f||void 0!==e.property,p=f||!l,d=e.type||t||"exponential";if("exponential"===d)a=o;else if("interval"===d)a=s;else if("categorical"===d)a=i;else{if("identity"!==d)throw new Error('Unknown function type "'+d+'"');a=u}if(f){for(var v={},m=[],g=0;g<e.stops.length;g++){var y=e.stops[g];void 0===v[y[0].zoom]&&(v[y[0].zoom]={zoom:y[0].zoom,type:e.type,property:e.property,stops:[]}),v[y[0].zoom].stops.push([y[0].value,y[1]])}for(var b in v)m.push([v[b].zoom,r(v[b])]);n=function(t,n){return o({stops:m,base:e.base},t)(t,n)},n.isFeatureConstant=!1,n.isZoomConstant=!1}else p?(n=function(t){return a(e,t)},n.isFeatureConstant=!0,n.isZoomConstant=!1):(n=function(t,n){return a(e,n[e.property])},n.isFeatureConstant=!1,n.isZoomConstant=!0)}else n=function(){return e},n.isFeatureConstant=!0,n.isZoomConstant=!0;return n}function i(e,t){for(var n=0;n<e.stops.length;n++)if(t===e.stops[n][0])return e.stops[n][1];return e.stops[0][1]}function s(e,t){for(var n=0;n<e.stops.length&&!(t<e.stops[n][0]);n++);return e.stops[Math.max(n-1,0)][1]}function o(e,t){for(var n=void 0!==e.base?e.base:1,r=0;;){if(r>=e.stops.length)break;if(t<=e.stops[r][0])break;r++}return 0===r?e.stops[r][1]:r===e.stops.length?e.stops[r-1][1]:a(t,n,e.stops[r-1][0],e.stops[r][0],e.stops[r-1][1],e.stops[r][1])}function u(e,t){return t}function a(e,t,n,r,i,s){return"function"==typeof i?function(){var o=i.apply(void 0,arguments),u=s.apply(void 0,arguments);return a(e,t,n,r,o,u)}:i.length?l(e,t,n,r,i,s):f(e,t,n,r,i,s)}function f(e,t,n,r,i,s){var o,u=r-n,a=e-n;return o=1===t?a/u:(Math.pow(t,a)-1)/(Math.pow(t,u)-1),i*(1-o)+s*o}function l(e,t,n,r,i,s){for(var o=[],u=0;u<i.length;u++)o[u]=f(e,t,n,r,i[u],s[u]);return o}function c(e){return"object"==typeof e&&(e.stops||"identity"===e.type)}t.exports.isFunctionDefinition=c,t.exports.interpolated=function(e){return r(e,"exponential")},t.exports["piecewise-constant"]=function(e){return r(e,"interval")}},{}],269:[function(e,t,n){e("path"),t.exports={debug:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},circle:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    float t = smoothstep(1.0 - max(blur, v_antialiasblur), 1.0, length(v_extrude));\n    gl_FragColor = color * (1.0 - t) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform vec2 u_extrude_scale;\nuniform float u_devicepixelratio;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    if (u_scale_with_map) {\n        gl_Position.xy += extrude;\n    } else {\n        gl_Position.xy += extrude * gl_Position.w;\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / u_devicepixelratio / radius;\n}\n"},line:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform float u_blur;\n\nvarying vec2 v_linewidth;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform mediump float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\nuniform mediump float u_blur;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},linepattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_blur;\n\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_linewidth.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_linewidth.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    alpha *= u_opacity;\n\n    gl_FragColor = color * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform mediump float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n    v_linesofar = a_linesofar;\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},linesdfpattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\n\nuniform float u_blur;\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},outline:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},outlinepattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    \n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the correct offset needs to be calculated.\n    //\n    // The offset depends on how many pixels are between the world origin and\n    // the edge of the tile:\n    // vec2 offset = mod(pixel_coord, size)\n    //\n    // At high zoom levels there are a ton of pixels between the world origin\n    // and the edge of the tile. The glsl spec only guarantees 16 bits of\n    // precision for highp floats. We need more than that.\n    //\n    // The pixel_coord is passed in as two 16 bit values:\n    // pixel_coord_upper = floor(pixel_coord / 2^16)\n    // pixel_coord_lower = mod(pixel_coord, 2^16)\n    //\n    // The offset is calculated in a series of steps that should preserve this precision:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n    v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},pattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the correct offset needs to be calculated.\n    //\n    // The offset depends on how many pixels are between the world origin and\n    // the edge of the tile:\n    // vec2 offset = mod(pixel_coord, size)\n    //\n    // At high zoom levels there are a ton of pixels between the world origin\n    // and the edge of the tile. The glsl spec only guarantees 16 bits of\n    // precision for highp floats. We need more than that.\n    //\n    // The pixel_coord is passed in as two 16 bit values:\n    // pixel_coord_upper = floor(pixel_coord / 2^16)\n    // pixel_coord_lower = mod(pixel_coord, 2^16)\n    //\n    // The offset is calculated in a series of steps that should preserve this precision:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n    v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n}\n"},raster:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity0;\nuniform float u_opacity1;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = color0 * u_opacity0 + color1 * u_opacity1;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb), color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},icon:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp float u_opacity;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * u_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n    if (u_rotate_with_map) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},sdf:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform lowp float u_buffer;\nuniform lowp float u_gamma;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    lowp float gamma = u_gamma * v_gamma_scale;\n    lowp float alpha = smoothstep(u_buffer - gamma, u_buffer + gamma, dist) * fade_alpha;\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nconst float PI = 3.141592653589793;\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform bool u_pitch_with_map;\nuniform mediump float u_pitch;\nuniform mediump float u_bearing;\nuniform mediump float u_aspect_ratio;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    // pitch-alignment: map\n    // rotation-alignment: map | viewport\n    if (u_pitch_with_map) {\n        lowp float angle = u_rotate_with_map ? (a_data[1] / 256.0 * 2.0 * PI) : u_bearing;\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\n        vec2 offset = RotationMatrix * a_offset;\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: map\n    } else if (u_rotate_with_map) {\n        // foreshortening factor to apply on pitched maps\n        // as a label goes from horizontal <=> vertical in angle\n        // it goes from 0% foreshortening to up to around 70% foreshortening\n        lowp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\n\n        lowp float lineangle = a_data[1] / 256.0 * 2.0 * PI;\n\n        // use the lineangle to position points a,b along the line\n        // project the points and calculate the label angle in projected space\n        // this calculation allows labels to be rendered unskewed on pitched maps\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(lineangle),sin(lineangle)), 0, 1);\n        lowp float angle = atan((b[1]/b[3] - a[1]/a[3])/u_aspect_ratio, b[0]/b[3] - a[0]/a[3]);\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\n\n        vec2 offset = RotationMatrix * (vec2((1.0-pitchfactor)+(pitchfactor*cos(angle*2.0)), 1.0) * a_offset);\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: viewport\n    } else {\n        vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = (gl_Position.w - 0.5);\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},collisionbox:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"}},t.exports.util="float evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n"},{path:440}],270:[function(e,t,n){"use strict";function r(e,t){this.message=(e?e+": ":"")+i.apply(i,Array.prototype.slice.call(arguments,2)),null!==t&&void 0!==t&&t.__line__&&(this.line=t.__line__)}var i=e("util").format;t.exports=r},{util:510}],271:[function(e,t,n){"use strict";t.exports=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}},{}],272:[function(e,t,n){"use strict";t.exports=function(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}},{}],273:[function(e,t,n){"use strict";t.exports=function(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}},{}],274:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),s=e("../util/extend");t.exports=function(t){var n=e("./validate_function"),o=e("./validate_object"),u={"*":function(){return[]},array:e("./validate_array"),"boolean":e("./validate_boolean"),number:e("./validate_number"),color:e("./validate_color"),constants:e("./validate_constants"),"enum":e("./validate_enum"),filter:e("./validate_filter"),"function":e("./validate_function"),layer:e("./validate_layer"),object:e("./validate_object"),source:e("./validate_source"),string:e("./validate_string")},f=t.value,l=t.valueSpec,c=t.key,h=t.styleSpec,p=t.style;if("string"===i(f)&&"@"===f[0]){if(h.$version>7)return[new r(c,f,"constants have been deprecated as of v8")];if(!(f in p.constants))return[new r(c,f,'constant "%s" not found',f)];t=s({},t,{value:p.constants[f]})}return l.function&&"object"===i(f)?n(t):l.type&&u[l.type]?u[l.type](t):o(s({},t,{valueSpec:l.type?h[l.type]:l}))}},{"../error/validation_error":270,"../util/extend":271,"../util/get_type":272,"./validate_array":275,"./validate_boolean":276,"./validate_color":277,"./validate_constants":278,"./validate_enum":279,"./validate_filter":280,"./validate_function":281,"./validate_layer":283,"./validate_number":285,"./validate_object":286,"./validate_source":288,"./validate_string":289}],275:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("./validate"),s=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.valueSpec,o=e.style,u=e.styleSpec,f=e.key,l=e.arrayElementValidator||i;if("array"!==r(t))return[new s(f,t,"array expected, %s found",r(t))];if(n.length&&t.length!==n.length)return[new s(f,t,"array length %d expected, length %d found",n.length,t.length)];if(n["min-length"]&&t.length<n["min-length"])return[new s(f,t,"array length at least %d expected, length %d found",n["min-length"],t.length)];var c={type:n.value};u.$version<7&&(c.function=n.function),"object"===r(n.value)&&(c=n.value);for(var h=[],p=0;p<t.length;p++)h=h.concat(l({array:t,arrayIndex:p,value:t[p],valueSpec:c,style:o,styleSpec:u,key:f+"["+p+"]"}));return h}},{"../error/validation_error":270,"../util/get_type":272,"./validate":274}],276:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,s=r(t);return"boolean"!==s?[new i(n,t,"boolean expected, %s found",s)]:[]}},{"../error/validation_error":270,"../util/get_type":272}],277:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),s=e("csscolorparser").parseCSSColor;t.exports=function(e){var t=e.key,n=e.value,o=i(n);return"string"!==o?[new r(t,n,"color expected, %s found",o)]:null===s(n)?[new r(t,n,'color expected, "%s" found',n)]:[]}},{"../error/validation_error":270,"../util/get_type":272,csscolorparser:91}],278:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type");t.exports=function(e){var t=e.key,n=e.value,s=e.styleSpec;if(s.$version>7)return n?[new r(t,n,"constants have been deprecated as of v8")]:[];var o=i(n);if("object"!==o)return[new r(t,n,"object expected, %s found",o)];var u=[];for(var a in n)"@"!==a[0]&&u.push(new r(t+"."+a,n[a],'constants must start with "@"'));return u}},{"../error/validation_error":270,"../util/get_type":272}],279:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint");t.exports=function(e){var t=e.key,n=e.value,s=e.valueSpec,o=[];return s.values.indexOf(i(n))===-1&&o.push(new r(t,n,"expected one of [%s], %s found",s.values.join(", "),n)),o}},{"../error/validation_error":270,"../util/unbundle_jsonlint":273}],280:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("./validate_enum"),s=e("../util/get_type"),o=e("../util/unbundle_jsonlint");t.exports=function u(e){var t,n=e.value,f=e.key,l=e.styleSpec,c=[];if("array"!==s(n))return[new r(f,n,"array expected, %s found",s(n))];if(n.length<1)return[new r(f,n,"filter array must have at least 1 element")];switch(c=c.concat(i({key:f+"[0]",value:n[0],valueSpec:l.filter_operator,style:e.style,styleSpec:e.styleSpec})),o(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"==n[1]&&c.push(new r(f,n,'"$type" cannot be use with operator "%s"',n[0]));case"==":case"!=":3!=n.length&&c.push(new r(f,n,'filter array for operator "%s" must have 3 elements',n[0]));case"in":case"!in":n.length>=2&&(t=s(n[1]),"string"!==t?c.push(new r(f+"[1]",n[1],"string expected, %s found",t)):"@"===n[1][0]&&c.push(new r(f+"[1]",n[1],"filter key cannot be a constant")));for(var h=2;h<n.length;h++)t=s(n[h]),"$type"==n[1]?c=c.concat(i({key:f+"["+h+"]",value:n[h],valueSpec:l.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"===t&&"@"===n[h][0]?c.push(new r(f+"["+h+"]",n[h],"filter value cannot be a constant")):"string"!==t&&"number"!==t&&"boolean"!==t&&c.push(new r(f+"["+h+"]",n[h],"string, number, or boolean expected, %s found",t));break;case"any":case"all":case"none":for(h=1;h<n.length;h++)c=c.concat(u({key:f+"["+h+"]",value:n[h],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":t=s(n[1]),2!==n.length?c.push(new r(f,n,'filter array for "%s" operator must have 2 elements',n[0])):"string"!==t?c.push(new r(f+"[1]",n[1],"string expected, %s found",t)):"@"===n[1][0]&&c.push(new r(f+"[1]",n[1],"filter key cannot be a constant"))}return c}},{"../error/validation_error":270,"../util/get_type":272,"../util/unbundle_jsonlint":273,"./validate_enum":279}],281:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),s=e("./validate"),o=e("./validate_object"),u=e("./validate_array"),a=e("./validate_number");t.exports=function(e){function t(e){var t=[],s=e.value;return t=t.concat(u({key:e.key,value:s,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:n})),"array"===i(s)&&0===s.length&&t.push(new r(e.key,s,"array must have at least one stop")),t}function n(e){var t=[],n=e.value,u=e.key;if("array"!==i(n))return[new r(u,n,"array expected, %s found",i(n))];if(2!==n.length)return[new r(u,n,"array length %d expected, length %d found",2,n.length)];var p=i(n[0]);if(c||(c=p),p!==c)return[new r(u,n,"%s stop key type must match previous stop key type %s",p,c)];if("object"===p){if(void 0===n[0].zoom)return[new r(u,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new r(u,n,"object stop key must have value")];t=t.concat(o({key:u+"[0]",value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:a,value:f}}))}else t=t.concat((d?a:f)({key:u+"[0]",value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec}));return t=t.concat(s({key:u+"[1]",value:n[1],valueSpec:h,style:e.style,styleSpec:e.styleSpec})),"number"===i(n[0])&&("piecewise-constant"===h.function&&n[0]%1!==0&&t.push(new r(u+"[0]",n[0],"zoom level for piecewise-constant functions must be an integer")),0!==e.arrayIndex&&n[0]<e.array[e.arrayIndex-1][0]&&t.push(new r(u+"[0]",n[0],"array stops must appear in ascending order"))),t}function f(e){var t=[],n=i(e.value);return"number"!==n&&"string"!==n&&"array"!==n&&t.push(new r(e.key,e.value,"property value must be a number, string or array")),t}var c,h=e.valueSpec,p=void 0!==e.value.property||"object"===c,d=void 0===e.value.property||"object"===c,v=o({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:t}});return e.styleSpec.$version>=8&&(p&&!e.valueSpec["property-function"]?v.push(new r(e.key,e.value,"property functions not supported")):d&&!e.valueSpec["zoom-function"]&&v.push(new r(e.key,e.value,"zoom functions not supported"))),v}},{"../error/validation_error":270,"../util/get_type":272,"./validate":274,"./validate_array":275,"./validate_number":285,"./validate_object":286}],282:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("./validate_string");t.exports=function(e){var t=e.value,n=e.key,s=i(e);return s.length?s:(t.indexOf("{fontstack}")===-1&&s.push(new r(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&s.push(new r(n,t,'"glyphs" url must include a "{range}" token')),s)}},{"../error/validation_error":270,"./validate_string":289}],283:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint"),s=e("./validate_object"),o=e("./validate_filter"),u=e("./validate_paint_property"),a=e("./validate_layout_property"),f=e("../util/extend");t.exports=function(e){var t=[],n=e.value,c=e.key,h=e.style,p=e.styleSpec;n.type||n.ref||t.push(new r(c,n,'either "type" or "ref" is required'));var d=i(n.type),v=i(n.ref);if(n.id)for(var m=0;m<e.arrayIndex;m++){var g=h.layers[m];i(g.id)===i(n.id)&&t.push(new r(c,n.id,'duplicate layer id "%s", previously used at line %d',n.id,g.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(e){e in n&&t.push(new r(c,n[e],'"%s" is prohibited for ref layers',e))});var y;h.layers.forEach(function(e){e.id==v&&(y=e)}),y?y.ref?t.push(new r(c,n.ref,"ref cannot reference another ref layer")):d=i(y.type):t.push(new r(c,n.ref,'ref layer "%s" not found',v))}else if("background"!==d)if(n.source){var b=h.sources&&h.sources[n.source];b?"vector"==b.type&&"raster"==d?t.push(new r(c,n.source,'layer "%s" requires a raster source',n.id)):"raster"==b.type&&"raster"!=d?t.push(new r(c,n.source,'layer "%s" requires a vector source',n.id)):"vector"!=b.type||n["source-layer"]||t.push(new r(c,n,'layer "%s" must specify a "source-layer"',n.id)):t.push(new r(c,n.source,'source "%s" not found',n.source))}else t.push(new r(c,n,'missing required property "source"'));return t=t.concat(s({key:c,value:n,valueSpec:p.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{filter:o,layout:function(e){return s({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return a(f({layerType:d},e))}}})},paint:function(e){return s({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return u(f({layerType:d},e))}}})}}}))}},{"../error/validation_error":270,"../util/extend":271,"../util/unbundle_jsonlint":273,"./validate_filter":280,"./validate_layout_property":284,"./validate_object":286,"./validate_paint_property":287}],284:[function(e,t,n){"use strict";var r=e("./validate"),i=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.style,s=e.styleSpec,o=e.value,u=e.objectKey,a=s["layout_"+e.layerType];if(e.valueSpec||a[u]){var f=[];return"symbol"===e.layerType&&("icon-image"===u&&n&&!n.sprite?f.push(new i(t,o,'use of "icon-image" requires a style "sprite" property')):"text-field"===u&&n&&!n.glyphs&&f.push(new i(t,o,'use of "text-field" requires a style "glyphs" property'))),f.concat(r({key:e.key,value:o,valueSpec:e.valueSpec||a[u],style:n,styleSpec:s}))}return[new i(t,o,'unknown property "%s"',u)]}},{"../error/validation_error":270,"./validate":274}],285:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.value,s=e.valueSpec,o=r(n);return"number"!==o?[new i(t,n,"number expected, %s found",o)]:"minimum"in s&&n<s.minimum?[new i(t,n,"%s is less than the minimum value %s",n,s.minimum)]:"maximum"in s&&n>s.maximum?[new i(t,n,"%s is greater than the maximum value %s",n,s.maximum)]:[]}},{"../error/validation_error":270,"../util/get_type":272}],286:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),s=e("./validate");t.exports=function(e){var t=e.key,n=e.value,o=e.valueSpec,u=e.objectElementValidators||{},f=e.style,l=e.styleSpec,c=[],h=i(n);if("object"!==h)return[new r(t,n,"object expected, %s found",h)];for(var p in n){var d=p.split(".")[0],v=o&&(o[d]||o["*"]),m=u[d]||u["*"];v||m?c=c.concat((m||s)({key:(t?t+".":t)+p,value:n[p],valueSpec:v,style:f,styleSpec:l,object:n,objectKey:p})):""!==t&&1!==t.split(".").length&&c.push(new r(t,n[p],'unknown property "%s"',p))}for(d in o)o[d].required&&void 0===o[d].default&&void 0===n[d]&&c.push(new r(t,n,'missing required property "%s"',d));return c}},{"../error/validation_error":270,"../util/get_type":272,"./validate":274}],287:[function(e,t,n){"use strict";var r=e("./validate"),i=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.style,s=e.styleSpec,o=e.value,u=e.objectKey,a=s["paint_"+e.layerType],f=u.match(/^(.*)-transition$/);return f&&a[f[1]]&&a[f[1]].transition?r({key:t,value:o,valueSpec:s.transition,style:n,styleSpec:s}):e.valueSpec||a[u]?r({key:e.key,value:o,valueSpec:e.valueSpec||a[u],style:n,styleSpec:s}):[new i(t,o,'unknown property "%s"',u)]}},{"../error/validation_error":270,"./validate":274}],288:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint"),s=e("./validate_object"),o=e("./validate_enum");t.exports=function(e){var t=e.value,n=e.key,u=e.styleSpec,f=e.style;if(!t.type)return[new r(n,t,'"type" is required')];var l=i(t.type);switch(l){case"vector":case"raster":var c=[];if(c=c.concat(s({key:n,value:t,valueSpec:u.source_tile,style:e.style,styleSpec:u})),"url"in t)for(var h in t)["type","url","tileSize"].indexOf(h)<0&&c.push(new r(n+"."+h,t[h],'a source with a "url" property may not include a "%s" property',h));return c;case"geojson":return s({key:n,value:t,valueSpec:u.source_geojson,style:f,styleSpec:u});case"video":return s({key:n,value:t,valueSpec:u.source_video,style:f,styleSpec:u});case"image":return s({key:n,value:t,valueSpec:u.source_image,style:f,styleSpec:u});default:return o({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","geojson","video","image"]},style:f,styleSpec:u})}}},{"../error/validation_error":270,"../util/unbundle_jsonlint":273,"./validate_enum":279,"./validate_object":286}],289:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,s=r(t);return"string"!==s?[new i(n,t,"string expected, %s found",s)]:[]}},{"../error/validation_error":270,"../util/get_type":272}],290:[function(e,t,n){"use strict";function r(e,t){t=t||a;var n=[];return n=n.concat(u({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:f}})),t.$version>7&&e.constants&&(n=n.concat(o({key:"constants",value:e.constants,style:e,styleSpec:t}))),i(n)}function i(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function s(e){return function(){return i(e.apply(this,arguments))}}var o=e("./validate/validate_constants"),u=e("./validate/validate"),a=e("../reference/latest.min"),f=e("./validate/validate_glyphs_url");r.source=s(e("./validate/validate_source")),r.layer=s(e("./validate/validate_layer")),r.filter=s(e("./validate/validate_filter")),r.paintProperty=s(e("./validate/validate_paint_property")),r.layoutProperty=s(e("./validate/validate_layout_property")),t.exports=r},{"../reference/latest.min":291,"./validate/validate":274,"./validate/validate_constants":278,"./validate/validate_filter":280,"./validate/validate_glyphs_url":282,"./validate/validate_layer":283,"./validate/validate_layout_property":284,"./validate/validate_paint_property":287,"./validate/validate_source":288}],291:[function(e,t,n){t.exports=e("./v8.min.json")},{"./v8.min.json":292}],292:[function(e,t,n){t.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number","default":0,period:360,units:"degrees"},pitch:{type:"number","default":0,units:"degrees"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image"],source_tile:{type:{required:!0,type:"enum",values:["vector","raster"]},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:["geojson"]},data:{type:"*"},maxzoom:{type:"number","default":14},buffer:{type:"number","default":64},tolerance:{type:"number","default":3},cluster:{type:"boolean","default":!1},clusterRadius:{type:"number","default":400},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:["video"]},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:["image"]},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:["fill","line","symbol","circle","raster","background"]},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:22},maxzoom:{type:"number",minimum:0,maximum:22},interactive:{type:"boolean","default":!1},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_fill:{visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_circle:{visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_line:{"line-cap":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2,"function":"interpolated","zoom-function":!0,"property-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number","default":1.05,"function":"interpolated","zoom-function":!0,"property-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_symbol:{"symbol-placement":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["point","line"],"default":"point"},"symbol-spacing":{type:"number","default":250,minimum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1},"icon-allow-overlap":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["icon-image"]},"icon-optional":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"viewport",requires:["icon-image"]},"icon-size":{type:"number","default":1,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!1,values:["none","both","width","height"],"default":"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,"default":[0,0,0,0],units:"pixels","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image","icon-text-fit","text-field"]},"icon-image":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number","default":0,period:360,"function":"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number","default":2,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],requires:["text-field"]},"text-rotation-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"viewport",requires:["text-field"]},"text-field":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":"",tokens:!0},"text-font":{type:"array",value:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number","default":16,minimum:0,units:"pixels","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number","default":10,minimum:0,units:"em","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number","default":1.2,units:"em","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number","default":0,units:"em","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["left","center","right"],"default":"center",requires:["text-field"]},"text-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],"default":"center",requires:["text-field"]},"text-max-angle":{type:"number","default":45,units:"degrees","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number","default":0,period:360,units:"degrees","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number","default":2,minimum:0,units:"pixels","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["none","uppercase","lowercase"],"default":"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems","function":"interpolated","zoom-function":!0,"property-function":!0,length:2,"default":[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["text-field"]},"text-optional":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!1,requires:["text-field","icon-image"]},visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},layout_raster:{visibility:{type:"enum","function":"piecewise-constant","zoom-function":!0,values:["visible","none"],"default":"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:["==","!=",">",">=","<","<=","in","!in","all","any","none","has","!has"]},geometry_type:{type:"enum",values:["Point","LineString","Polygon"]},color_operation:{type:"enum",values:["lighten","saturate","spin","fade","mix"]},"function":{stops:{type:"array",required:!0,value:"function_stop"},base:{type:"number","default":1,minimum:0},property:{type:"string","default":"$zoom"},type:{type:"enum",values:["exponential","interval","categorical"],"default":"exponential"}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},paint:["paint_fill","paint_line","paint_circle","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":!0},"fill-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["fill-translate"]},"fill-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0}},paint_line:{"line-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["line-translate"]},"line-width":{type:"number","default":1,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number","default":0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number","function":"piecewise-constant","zoom-function":!0,"property-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number","default":5,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number","default":0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map"}},paint_symbol:{"icon-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],"default":"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number","default":0,period:360,"function":"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number","function":"interpolated","zoom-function":!0,"default":0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number","function":"interpolated","zoom-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number","default":300,minimum:0,"function":"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number","default":300,minimum:0,units:"milliseconds"},delay:{type:"number","default":0,minimum:0,units:"milliseconds"}}}},{}],293:[function(e,t,n){"use strict";function r(e){return!!(i()&&s()&&o()&&u()&&a()&&f()&&l()&&c(e&&e.failIfMajorPerformanceCaveat))}function i(){return"undefined"!=typeof window&&"undefined"!=typeof document}function s(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function o(){return Function.prototype&&Function.prototype.bind}function u(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function a(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function f(){return"Worker"in window}function l(){return"Uint8ClampedArray"in window}function c(e){return void 0===p[e]&&(p[e]=h(e)),p[e]}function h(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.probablySupportsContext?t.probablySupportsContext("webgl",n)||t.probablySupportsContext("experimental-webgl",n):t.supportsContext?t.supportsContext("webgl",n)||t.supportsContext("experimental-webgl",n):t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}"undefined"!=typeof t&&t.exports?t.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var p={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],294:[function(e,t,n){"use strict";function r(e){var t=e.layoutVertexArrayType;this.layoutVertexArray=new t;var n=e.elementArrayType;n&&(this.elementArray=new n);var r=e.elementArrayType2;r&&(this.elementArray2=new r),this.paintVertexArrays=i.mapObject(e.paintVertexArrayTypes,function(e){return new e})}var i=e("../util/util");t.exports=r,r.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,r.prototype.hasCapacityFor=function(e){return this.layoutVertexArray.length+e<=r.MAX_VERTEX_ARRAY_LENGTH},r.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},r.prototype.trim=function(){this.layoutVertexArray.trim(),this.elementArray&&this.elementArray.trim(),this.elementArray2&&this.elementArray2.trim();for(var e in this.paintVertexArrays)this.paintVertexArrays[e].trim()},r.prototype.serialize=function(){return{layoutVertexArray:this.layoutVertexArray.serialize(),elementArray:this.elementArray&&this.elementArray.serialize(),elementArray2:this.elementArray2&&this.elementArray2.serialize(),paintVertexArrays:i.mapObject(this.paintVertexArrays,function(e){return e.serialize()})}},r.prototype.getTransferables=function(e){e.push(this.layoutVertexArray.arrayBuffer),this.elementArray&&e.push(this.elementArray.arrayBuffer),this.elementArray2&&e.push(this.elementArray2.arrayBuffer);for(var t in this.paintVertexArrays)e.push(this.paintVertexArrays[t].arrayBuffer)}},{"../util/util":408}],295:[function(e,t,n){"use strict";function r(e){if(this.zoom=e.zoom,this.overscaling=e.overscaling,this.layer=e.layer,this.childLayers=e.childLayers,this.type=this.layer.type,this.features=[],this.id=this.layer.id,this.index=e.index,this.sourceLayer=this.layer.sourceLayer,this.sourceLayerIndex=e.sourceLayerIndex,this.minZoom=this.layer.minzoom,this.maxZoom=this.layer.maxzoom,this.paintAttributes=i(this),e.arrays){var t=this.programInterfaces;this.bufferGroups=l.mapObject(e.arrays,function(n,r){var i=t[r],s=e.paintVertexArrayTypes[r];return n.map(function(e){return new f(e,{layoutVertexArrayType:i.layoutVertexArrayType.serialize(),elementArrayType:i.elementArrayType&&i.elementArrayType.serialize(),elementArrayType2:i.elementArrayType2&&i.elementArrayType2.serialize(),paintVertexArrayTypes:s})})})}}function i(e){var t={};for(var n in e.programInterfaces){for(var r=t[n]={},i=0;i<e.childLayers.length;i++){var u=e.childLayers[i];r[u.id]={attributes:[],uniforms:[],defines:[],vertexPragmas:{define:{},initialize:{}},fragmentPragmas:{define:{},initialize:{}}}}var a=e.programInterfaces[n];if(a.paintAttributes)for(var f="{precision}",c="{type}",p=0;p<a.paintAttributes.length;p++){var d=a.paintAttributes[p];d.multiplier=d.multiplier||1;for(var v=0;v<e.childLayers.length;v++){var m=e.childLayers[v],g=r[m.id],y=d.name;h("a_"===d.name.slice(0,2));var b,w=d.name.slice(2);if(g.fragmentPragmas.initialize[w]="",m.isPaintValueFeatureConstant(d.paintProperty))g.uniforms.push(d),g.fragmentPragmas.define[w]=g.vertexPragmas.define[w]=["uniform",f,c,y].join(" ")+";",g.fragmentPragmas.initialize[w]=g.vertexPragmas.initialize[w]=[f,c,w,"=",y].join(" ")+";\n";else if(m.isPaintValueZoomConstant(d.paintProperty)){g.attributes.push(l.extend({},d,{name:y})),b=["varying",f,c,w].join(" ")+";\n";var E=[g.fragmentPragmas.define[w],"attribute",f,c,y].join(" ")+";\n";g.fragmentPragmas.define[w]=b,g.vertexPragmas.define[w]=b+E,g.vertexPragmas.initialize[w]=[w,"=",y,"/",d.multiplier.toFixed(1)].join(" ")+";\n"}else{for(var S="u_"+y.slice(2)+"_t",x=m.getPaintValueStopZoomLevels(d.paintProperty),T=0;T<x.length&&x[T]<e.zoom;)T++;for(var N=Math.max(0,Math.min(x.length-4,T-2)),C=[],k=0;k<4;k++)C.push(x[Math.min(N+k,x.length-1)]);b=["varying",f,c,w].join(" ")+";\n",g.vertexPragmas.define[w]=b+["uniform","lowp","float",S].join(" ")+";\n",g.fragmentPragmas.define[w]=b,g.uniforms.push(l.extend({},d,{name:S,getValue:o(d,N),components:1}));var L=d.components;if(1===L)g.attributes.push(l.extend({},d,{getValue:s(d,C),isFunction:!0,components:4*L})),g.vertexPragmas.define[w]+=["attribute",f,"vec4",y].join(" ")+";\n",g.vertexPragmas.initialize[w]=[w,"=","evaluate_zoom_function_1("+y+", "+S+")","/",d.multiplier.toFixed(1)].join(" ")+";\n";else{for(var A=[],O=0;O<4;O++)A.push(y+O),g.attributes.push(l.extend({},d,{getValue:s(d,[C[O]]),isFunction:!0,name:y+O})),g.vertexPragmas.define[w]+=["attribute",f,c,y+O].join(" ")+";\n";g.vertexPragmas.initialize[w]=[w," = ","evaluate_zoom_function_4("+A.join(", ")+", "+S+")","/",d.multiplier.toFixed(1)].join(" ")+";\n"}}}}}return t}function s(e,t){return function(n,r,i){if(1===t.length)return e.getValue(n,l.extend({},r,{zoom:t[0]}),i);for(var s=[],o=0;o<t.length;o++){var u=t[o];s.push(e.getValue(n,l.extend({},r,{zoom:u}),i)[0])}return s}}function o(e,t){return function(n,r){var i=n.getPaintInterpolationT(e.paintProperty,r.zoom);return[Math.max(0,Math.min(4,i-t))]}}var u=e("feature-filter"),a=e("./array_group"),f=e("./buffer_group"),l=e("../util/util"),c=e("../util/struct_array"),h=e("assert");t.exports=r,r.create=function(t){var n={fill:e("./bucket/fill_bucket"),line:e("./bucket/line_bucket"),circle:e("./bucket/circle_bucket"),symbol:e("./bucket/symbol_bucket")};return new n[t.layer.type](t)},r.EXTENT=8192,r.prototype.populateArrays=function(){this.createArrays(),this.recalculateStyleLayers();for(var e=0;e<this.features.length;e++)this.addFeature(this.features[e]);this.trimArrays()},r.prototype.prepareArrayGroup=function(e,t){var n=this.arrayGroups[e],r=n.length&&n[n.length-1];return r&&r.hasCapacityFor(t)||(r=new a({layoutVertexArrayType:this.programInterfaces[e].layoutVertexArrayType,elementArrayType:this.programInterfaces[e].elementArrayType,elementArrayType2:this.programInterfaces[e].elementArrayType2,paintVertexArrayTypes:this.paintVertexArrayTypes[e]}),r.index=n.length,n.push(r)),r},r.prototype.createArrays=function(){this.arrayGroups={},this.paintVertexArrayTypes={};for(var e in this.programInterfaces){this.arrayGroups[e]=[];var t=this.paintVertexArrayTypes[e]={},n=this.paintAttributes[e];for(var i in n)t[i]=new r.VertexArrayType(n[i].attributes)}},r.prototype.destroy=function(e){for(var t in this.bufferGroups)for(var n=this.bufferGroups[t],r=0;r<n.length;r++)n[r].destroy(e)},r.prototype.trimArrays=function(){for(var e in this.arrayGroups)for(var t=this.arrayGroups[e],n=0;n<t.length;n++)t[n].trim()},r.prototype.isEmpty=function(){for(var e in this.arrayGroups)for(var t=this.arrayGroups[e],n=0;n<t.length;n++)if(!t[n].isEmpty())return!1;return!0},r.prototype.getTransferables=function(e){for(var t in this.arrayGroups)for(var n=this.arrayGroups[t],r=0;r<n.length;r++)n[r].getTransferables(e)},r.prototype.setUniforms=function(e,t,n,r,i){for(var s=this.paintAttributes[t][r.id].uniforms,o=0;o<s.length;o++){var u=s[o],a=n[u.name];e["uniform"+u.components+"fv"](a,u.getValue(r,i))}},r.prototype.serialize=function(){return{layerId:this.layer.id,zoom:this.zoom,arrays:l.mapObject(this.arrayGroups,function(e){return e.map(function(e){return e.serialize()})}),paintVertexArrayTypes:l.mapObject(this.paintVertexArrayTypes,function(e){return l.mapObject(e,function(e){return e.serialize()})}),childLayerIds:this.childLayers.map(function(e){return e.id})}},r.prototype.createFilter=function(){this.filter||(this.filter=u(this.layer.filter))};var p={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};r.prototype.recalculateStyleLayers=function(){for(var e=0;e<this.childLayers.length;e++)this.childLayers[e].recalculate(this.zoom,p)},r.prototype.populatePaintArrays=function(e,t,n,r,i){for(var s=0;s<this.childLayers.length;s++)for(var o=this.childLayers[s],u=this.arrayGroups[e],a=r.index;a<u.length;a++){var f=u[a],l=f.layoutVertexArray.length,c=f.paintVertexArrays[o.id];c.resize(l);for(var h=this.paintAttributes[e][o.id].attributes,p=0;p<h.length;p++)for(var d=h[p],v=d.getValue(o,t,n),m=d.multiplier||1,g=d.components||1,y=a===r.index?i:0,b=y;b<l;b++)for(var w=c.get(b),E=0;E<g;E++){var S=g>1?d.name+E:d.name;w[S]=v[E]*m}}},r.VertexArrayType=function(e){return new c({members:e,alignment:4})},r.ElementArrayType=function(e){return new c({members:[{type:"Uint16",name:"vertices",components:e||3}]})}},{"../util/struct_array":406,"../util/util":408,"./array_group":294,"./bucket/circle_bucket":296,"./bucket/fill_bucket":297,"./bucket/line_bucket":298,"./bucket/symbol_bucket":299,"./buffer_group":301,assert:36,"feature-filter":107}],296:[function(e,t,n){"use strict";function r(){i.apply(this,arguments)}var i=e("../bucket"),s=e("../../util/util"),o=e("../load_geometry"),u=i.EXTENT;t.exports=r,r.prototype=s.inherit(i,{}),r.prototype.addCircleVertex=function(e,t,n,r,i){return e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)},r.prototype.programInterfaces={circle:{layoutVertexArrayType:new i.VertexArrayType([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:new i.ElementArrayType,paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(e,t,n){return e.getPaintValue("circle-color",t,n)},multiplier:255,paintProperty:"circle-color"},{name:"a_radius",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(e,t,n){return[e.getPaintValue("circle-radius",t,n)]},multiplier:10,paintProperty:"circle-radius"},{name:"a_blur",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(e,t,n){return[e.getPaintValue("circle-blur",t,n)]},multiplier:10,paintProperty:"circle-blur"},{name:"a_opacity",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(e,t,n){return[e.getPaintValue("circle-opacity",t,n)]},multiplier:255,paintProperty:"circle-opacity"}]}},r.prototype.addFeature=function(e){for(var t={zoom:this.zoom},n=o(e),r=this.prepareArrayGroup("circle",0),i=r.layoutVertexArray.length,s=0;s<n.length;s++)for(var a=0;a<n[s].length;a++){var f=n[s][a].x,l=n[s][a].y;if(!(f<0||f>=u||l<0||l>=u)){var c=this.prepareArrayGroup("circle",4),h=c.layoutVertexArray,p=this.addCircleVertex(h,f,l,-1,-1);this.addCircleVertex(h,f,l,1,-1),this.addCircleVertex(h,f,l,1,1),this.addCircleVertex(h,f,l,-1,1),c.elementArray.emplaceBack(p,p+1,p+2),c.elementArray.emplaceBack(p,p+3,p+2)}}this.populatePaintArrays("circle",t,e.properties,r,i)}},{"../../util/util":408,"../bucket":295,"../load_geometry":303}],297:[function(e,t,n){"use strict";function r(){i.apply(this,arguments)}var i=e("../bucket"),s=e("../../util/util"),o=e("../load_geometry"),u=e("earcut"),a=e("../../util/classify_rings"),f=500;t.exports=r,r.prototype=s.inherit(i,{}),r.prototype.programInterfaces={fill:{layoutVertexArrayType:new i.VertexArrayType([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:new i.ElementArrayType(1),elementArrayType2:new i.ElementArrayType(2),paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(e,t,n){return e.getPaintValue("fill-color",t,n)},multiplier:255,paintProperty:"fill-color"},{name:"a_outline_color",components:4,type:"Uint8",getValue:function(e,t,n){return e.getPaintValue("fill-outline-color",t,n)},multiplier:255,paintProperty:"fill-outline-color"},{name:"a_opacity",components:1,type:"Uint8",getValue:function(e,t,n){return[e.getPaintValue("fill-opacity",t,n)]},multiplier:255,paintProperty:"fill-opacity"}]}},r.prototype.addFeature=function(e){for(var t=o(e),n=a(t,f),r=this.prepareArrayGroup("fill",0),i=r.layoutVertexArray.length,s=0;s<n.length;s++)this.addPolygon(n[s]);this.populatePaintArrays("fill",{zoom:this.zoom},e.properties,r,i)},r.prototype.addPolygon=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].length;for(var r=this.prepareArrayGroup("fill",t),i=[],s=[],o=r.layoutVertexArray.length,a=0;a<e.length;a++){var f=e[a];a>0&&s.push(i.length/2);for(var l=0;l<f.length;l++){var c=f[l],h=r.layoutVertexArray.emplaceBack(c.x,c.y);l>=1&&r.elementArray2.emplaceBack(h-1,h),i.push(c.x),i.push(c.y)}}for(var p=u(i,s),d=0;d<p.length;d++)r.elementArray.emplaceBack(p[d]+o)}},{"../../util/classify_rings":396,"../../util/util":408,"../bucket":295,"../load_geometry":303,earcut:101}],298:[function(e,t,n){"use strict";function r(){i.apply(this,arguments)}var i=e("../bucket"),s=e("../../util/util"),o=e("../load_geometry"),u=i.EXTENT,a=63,f=Math.cos(37.5*(Math.PI/180)),l=15,c=15,h=.5,p=Math.pow(2,c-1)/h;t.exports=r,r.prototype=s.inherit(i,{}),r.prototype.addLineVertex=function(e,t,n,r,i,s,o){return e.emplaceBack(t.x<<1|r,t.y<<1|i,Math.round(a*n.x)+128,Math.round(a*n.y)+128,(0===s?0:s<0?-1:1)+1|(o*h&63)<<2,o*h>>6)},r.prototype.programInterfaces={line:{layoutVertexArrayType:new i.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}]),elementArrayType:new i.ElementArrayType}},r.prototype.addFeature=function(e){for(var t=o(e,c),n=0;n<t.length;n++)this.addLine(t[n],this.layer.layout["line-join"],this.layer.layout["line-cap"],this.layer.layout["line-miter-limit"],this.layer.layout["line-round-limit"])},r.prototype.addLine=function(e,t,n,r,i){for(var s=e.length;s>2&&e[s-1].equals(e[s-2]);)s--;if(!(e.length<2)){"bevel"===t&&(r=1.05);var o=l*(u/(512*this.overscaling)),a=e[0],c=e[s-1],h=a.equals(c);if(this.prepareArrayGroup("line",10*s),2!==s||!h){this.distance=0;var p,d,v,m,g,y,b,w=n,E=h?"butt":n,S=!0;this.e1=this.e2=this.e3=-1,h&&(p=e[s-2],g=a.sub(p)._unit()._perp());for(var x=0;x<s;x++)if(v=h&&x===s-1?e[1]:e[x+1],!v||!e[x].equals(v)){g&&(m=g),p&&(d=p),p=e[x],g=v?v.sub(p)._unit()._perp():m,m=m||g;var T=m.add(g)._unit(),N=T.x*g.x+T.y*g.y,C=1/N,k=N<f&&d&&v;if(k&&x>0){var L=p.dist(d);if(L>2*o){var A=p.sub(p.sub(d)._mult(o/L)._round());this.distance+=A.dist(d),this.addCurrentVertex(A,this.distance,m.mult(1),0,0,!1),d=A}}var O=d&&v,M=O?t:v?w:E;if(O&&"round"===M&&(C<i?M="miter":C<=2&&(M="fakeround")),"miter"===M&&C>r&&(M="bevel"),"bevel"===M&&(C>2&&(M="flipbevel"),C<r&&(M="miter")),d&&(this.distance+=p.dist(d)),"miter"===M)T._mult(C),this.addCurrentVertex(p,this.distance,T,0,0,!1);else if("flipbevel"===M){if(C>100)T=g.clone();else{var _=m.x*g.y-m.y*g.x>0?-1:1,D=C*m.add(g).mag()/m.sub(g).mag();T._perp()._mult(D*_)}this.addCurrentVertex(p,this.distance,T,0,0,!1),this.addCurrentVertex(p,this.distance,T.mult(-1),0,0,!1)}else if("bevel"===M||"fakeround"===M){var P=m.x*g.y-m.y*g.x>0,H=-Math.sqrt(C*C-1);if(P?(b=0,y=H):(y=0,b=H),S||this.addCurrentVertex(p,this.distance,m,y,b,!1),"fakeround"===M){for(var B,j=Math.floor(8*(.5-(N-.5))),F=0;F<j;F++)B=g.mult((F+1)/(j+1))._add(m)._unit(),this.addPieSliceVertex(p,this.distance,B,P);this.addPieSliceVertex(p,this.distance,T,P);for(var I=j-1;I>=0;I--)B=m.mult((I+1)/(j+1))._add(g)._unit(),this.addPieSliceVertex(p,this.distance,B,P)}v&&this.addCurrentVertex(p,this.distance,g,-y,-b,!1)}else"butt"===M?(S||this.addCurrentVertex(p,this.distance,m,0,0,!1),v&&this.addCurrentVertex(p,this.distance,g,0,0,!1)):"square"===M?(S||(this.addCurrentVertex(p,this.distance,m,1,1,!1),this.e1=this.e2=-1),v&&this.addCurrentVertex(p,this.distance,g,-1,-1,!1)):"round"===M&&(S||(this.addCurrentVertex(p,this.distance,m,0,0,!1),this.addCurrentVertex(p,this.distance,m,1,1,!0),this.e1=this.e2=-1),v&&(this.addCurrentVertex(p,this.distance,g,-1,-1,!0),this.addCurrentVertex(p,this.distance,g,0,0,!1)));if(k&&x<s-1){var q=p.dist(v);if(q>2*o){var R=p.add(v.sub(p)._mult(o/q)._round());this.distance+=R.dist(p),this.addCurrentVertex(R,this.distance,g.mult(1),0,0,!1),p=R}}S=!1}}}},r.prototype.addCurrentVertex=function(e,t,n,r,i,s){var o,u=s?1:0,a=this.arrayGroups.line[this.arrayGroups.line.length-1],f=a.layoutVertexArray,l=a.elementArray;o=n.clone(),r&&o._sub(n.perp()._mult(r)),this.e3=this.addLineVertex(f,e,o,u,0,r,t),this.e1>=0&&this.e2>=0&&l.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,o=n.mult(-1),i&&o._sub(n.perp()._mult(i)),this.e3=this.addLineVertex(f,e,o,u,1,-i,t),this.e1>=0&&this.e2>=0&&l.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,t>p/2&&(this.distance=0,this.addCurrentVertex(e,this.distance,n,r,i,s))},r.prototype.addPieSliceVertex=function(e,t,n,r){var i=r?1:0;n=n.mult(r?-1:1);var s=this.arrayGroups.line[this.arrayGroups.line.length-1],o=s.layoutVertexArray,u=s.elementArray;this.e3=this.addLineVertex(o,e,n,0,i,0,t),this.e1>=0&&this.e2>=0&&u.emplaceBack(this.e1,this.e2,this.e3),r?this.e2=this.e3:this.e1=this.e3}},{"../../util/util":408,"../bucket":295,"../load_geometry":303}],299:[function(e,t,n){"use strict";function r(e){o.apply(this,arguments),this.showCollisionBoxes=e.showCollisionBoxes,this.overscaling=e.overscaling,this.collisionBoxArray=e.collisionBoxArray,this.symbolQuadsArray=e.symbolQuadsArray,this.symbolInstancesArray=e.symbolInstancesArray,this.sdfIcons=e.sdfIcons,this.iconsNeedLinear=e.iconsNeedLinear,this.adjustedTextSize=e.adjustedTextSize,this.adjustedIconSize=e.adjustedIconSize,this.fontstack=e.fontstack}function i(e,t,n,r,i,s,o,u,a,f,l){return e.emplaceBack(t,n,Math.round(64*r),Math.round(64*i),s/4,o/4,10*(f||0),l,10*(u||0),10*Math.min(a||25,25))}var s=e("point-geometry"),o=e("../bucket"),u=e("../../symbol/anchor"),a=e("../../symbol/get_anchors"),f=e("../../util/token"),l=e("../../symbol/quads"),c=e("../../symbol/shaping"),h=e("../../symbol/resolve_text"),p=e("../../symbol/mergelines"),d=e("../../symbol/clip_line"),v=e("../../util/util"),m=e("../load_geometry"),g=e("../../symbol/collision_feature"),y=c.shapeText,b=c.shapeIcon,w=l.getGlyphQuads,E=l.getIconQuads,S=o.EXTENT;t.exports=r,r.MAX_QUADS=65535,r.prototype=v.inherit(o,{}),r.prototype.serialize=function(){var e=o.prototype.serialize.apply(this);return e.sdfIcons=this.sdfIcons,e.iconsNeedLinear=this.iconsNeedLinear,e.adjustedTextSize=this.adjustedTextSize,e.adjustedIconSize=this.adjustedIconSize,e.fontstack=this.fontstack,e};var x=new o.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_offset",components:2,type:"Int16"},{name:"a_texture_pos",components:2,type:"Uint16"},{name:"a_data",components:4,type:"Uint8"}]),T=new o.ElementArrayType;r.prototype.addCollisionBoxVertex=function(e,t,n,r,i){return e.emplaceBack(t.x,t.y,Math.round(n.x),Math.round(n.y),10*r,10*i)},r.prototype.programInterfaces={glyph:{layoutVertexArrayType:x,elementArrayType:T},icon:{layoutVertexArrayType:x,elementArrayType:T},collisionBox:{layoutVertexArrayType:new o.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}])}},r.prototype.populateArrays=function(e,t,n){var r={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};this.adjustedTextMaxSize=this.layer.getLayoutValue("text-size",{zoom:18,zoomHistory:r}),this.adjustedTextSize=this.layer.getLayoutValue("text-size",{zoom:this.zoom+1,zoomHistory:r}),this.adjustedIconMaxSize=this.layer.getLayoutValue("icon-size",{zoom:18,zoomHistory:r}),this.adjustedIconSize=this.layer.getLayoutValue("icon-size",{zoom:this.zoom+1,zoomHistory:r});var i=512*this.overscaling;this.tilePixelRatio=S/i,this.compareText={},this.iconsNeedLinear=!1,this.symbolInstancesStartIndex=this.symbolInstancesArray.length;var s=this.layer.layout,o=this.features,u=this.textFeatures,a=.5,l=.5;switch(s["text-anchor"]){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(s["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}for(var c="right"===s["text-justify"]?1:"left"===s["text-justify"]?0:.5,h=24,d=s["text-line-height"]*h,g="line"!==s["symbol-placement"]?s["text-max-width"]*h:0,w=s["text-letter-spacing"]*h,E=[s["text-offset"][0]*h,s["text-offset"][1]*h],x=this.fontstack=s["text-font"].join(","),T=[],N=0;N<o.length;N++)T.push(m(o[N]));if("line"===s["symbol-placement"]){var C=p(o,u,T);T=C.geometries,o=C.features,u=C.textFeatures}for(var k,L,A=0;A<o.length;A++)if(T[A]){if(k=u[A]?y(u[A],t[x],g,d,a,l,c,w,E):null,s["icon-image"]){var O=f(o[A].properties,s["icon-image"]),M=n[O];L=b(M,s),M&&(void 0===this.sdfIcons?this.sdfIcons=M.sdf:this.sdfIcons!==M.sdf&&v.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==M.pixelRatio?this.iconsNeedLinear=!0:0===s["icon-rotate"]&&this.layer.isLayoutValueFeatureConstant("icon-rotate")||(this.iconsNeedLinear=!0))}else L=null;(k||L)&&this.addFeature(T[A],k,L,o[A])}this.symbolInstancesEndIndex=this.symbolInstancesArray.length,this.placeFeatures(e,this.showCollisionBoxes),this.trimArrays()},r.prototype.addFeature=function(e,t,n,r){var i=this.layer.layout,s=24,o=this.adjustedTextSize/s,f=void 0!==this.adjustedTextMaxSize?this.adjustedTextMaxSize:this.adjustedTextSize,l=this.tilePixelRatio*o,c=this.tilePixelRatio*f/s,h=this.tilePixelRatio*this.adjustedIconSize,p=this.tilePixelRatio*i["symbol-spacing"],v=i["symbol-avoid-edges"],m=i["text-padding"]*this.tilePixelRatio,g=i["icon-padding"]*this.tilePixelRatio,y=i["text-max-angle"]/180*Math.PI,b="map"===i["text-rotation-alignment"]&&"line"===i["symbol-placement"],w="map"===i["icon-rotation-alignment"]&&"line"===i["symbol-placement"],E=i["text-allow-overlap"]||i["icon-allow-overlap"]||i["text-ignore-placement"]||i["icon-ignore-placement"],x="line"===i["symbol-placement"],T=p/2;x&&(e=d(e,0,0,S,S));for(var N=0;N<e.length;N++){var C,k=e[N];C=x?a(k,p,y,t,n,s,c,this.overscaling,S):[new u(k[0].x,k[0].y,0)];for(var L=0,A=C.length;L<A;L++){var O=C[L];if(!(t&&x&&this.anchorIsTooClose(t.text,T,O))){var M=!(O.x<0||O.x>S||O.y<0||O.y>S);if(!v||M){var _=M||E;this.addSymbolInstance(O,k,t,n,this.layer,_,this.symbolInstancesArray.length,this.collisionBoxArray,r.index,this.sourceLayerIndex,this.index,l,m,b,h,g,w,{zoom:this.zoom},r.properties)}}}}},r.prototype.anchorIsTooClose=function(e,t,n){var r=this.compareText;if(e in r){for(var i=r[e],s=i.length-1;s>=0;s--)if(n.dist(i[s])<t)return!0}else r[e]=[];return r[e].push(n),!1},r.prototype.placeFeatures=function(e,t){this.recalculateStyleLayers(),this.createArrays();var n=this.layer.layout,r=e.maxScale,i="map"===n["text-rotation-alignment"]&&"line"===n["symbol-placement"],s="map"===n["icon-rotation-alignment"]&&"line"===n["symbol-placement"],o=n["text-allow-overlap"]||n["icon-allow-overlap"]||n["text-ignore-placement"]||n["icon-ignore-placement"];if(o){var u=this.symbolInstancesArray.toArray(this.symbolInstancesStartIndex,this.symbolInstancesEndIndex),a=e.angle,f=Math.sin(a),l=Math.cos(a);this.sortedSymbolInstances=u.sort(function(e,t){var n=f*e.anchorPointX+l*e.anchorPointY|0,r=f*t.anchorPointX+l*t.anchorPointY|0;return n-r||t.index-e.index})}for(var c=this.symbolInstancesStartIndex;c<this.symbolInstancesEndIndex;c++){var h=this.sortedSymbolInstances?this.sortedSymbolInstances[c-this.symbolInstancesStartIndex]:this.symbolInstancesArray.get(c),p={boxStartIndex:h.textBoxStartIndex,boxEndIndex:h.textBoxEndIndex},d={boxStartIndex:h.iconBoxStartIndex,boxEndIndex:h.iconBoxEndIndex},v=h.textBoxStartIndex!==h.textBoxEndIndex,m=h.iconBoxStartIndex!==h.iconBoxEndIndex,g=n["text-optional"]||!v,y=n["icon-optional"]||!m,b=v?e.placeCollisionFeature(p,n["text-allow-overlap"],n["symbol-avoid-edges"]):e.minScale,w=m?e.placeCollisionFeature(d,n["icon-allow-overlap"],n["symbol-avoid-edges"]):e.minScale;g||y?!y&&b?b=Math.max(w,b):!g&&w&&(w=Math.max(w,b)):w=b=Math.max(w,b),v&&(e.insertCollisionFeature(p,b,n["text-ignore-placement"]),b<=r&&this.addSymbols("glyph",h.glyphQuadStartIndex,h.glyphQuadEndIndex,b,n["text-keep-upright"],i,e.angle)),m&&(e.insertCollisionFeature(d,w,n["icon-ignore-placement"]),w<=r&&this.addSymbols("icon",h.iconQuadStartIndex,h.iconQuadEndIndex,w,n["icon-keep-upright"],s,e.angle))}t&&this.addToDebugBuffers(e)},r.prototype.addSymbols=function(e,t,n,r,s,o,u){for(var a=this.prepareArrayGroup(e,4*(n-t)),f=a.elementArray,l=a.layoutVertexArray,c=this.zoom,h=Math.max(Math.log(r)/Math.LN2+c,0),p=t;p<n;p++){var d=this.symbolQuadsArray.get(p).SymbolQuad,v=(d.anchorAngle+u+Math.PI)%(2*Math.PI);if(!(s&&o&&(v<=Math.PI/2||v>3*Math.PI/2))){var m=d.tl,g=d.tr,y=d.bl,b=d.br,w=d.tex,E=d.anchorPoint,S=Math.max(c+Math.log(d.minScale)/Math.LN2,h),x=Math.min(c+Math.log(d.maxScale)/Math.LN2,25);if(!(x<=S)){S===h&&(S=0);var T=Math.round(d.glyphAngle/(2*Math.PI)*256),N=i(l,E.x,E.y,m.x,m.y,w.x,w.y,S,x,h,T);i(l,E.x,E.y,g.x,g.y,w.x+w.w,w.y,S,x,h,T),i(l,E.x,E.y,y.x,y.y,w.x,w.y+w.h,S,x,h,T),i(l,E.x,E.y,b.x,b.y,w.x+w.w,w.y+w.h,S,x,h,T),f.emplaceBack(N,N+1,N+2),f.emplaceBack(N+1,N+2,N+3)}}}},r.prototype.updateIcons=function(e){this.recalculateStyleLayers();var t=this.layer.layout["icon-image"];if(t)for(var n=0;n<this.features.length;n++){var r=f(this.features[n].properties,t);r&&(e[r]=!0)}},r.prototype.updateFont=function(e){this.recalculateStyleLayers();var t=this.layer.layout["text-font"],n=e[t]=e[t]||{};this.textFeatures=h(this.features,this.layer.layout,n)},r.prototype.addToDebugBuffers=function(e){for(var t=this.prepareArrayGroup("collisionBox",0),n=t.layoutVertexArray,r=-e.angle,i=e.yStretch,o=this.symbolInstancesStartIndex;o<this.symbolInstancesEndIndex;o++){var u=this.symbolInstancesArray.get(o);u.textCollisionFeature={boxStartIndex:u.textBoxStartIndex,boxEndIndex:u.textBoxEndIndex},u.iconCollisionFeature={boxStartIndex:u.iconBoxStartIndex,boxEndIndex:u.iconBoxEndIndex};for(var a=0;a<2;a++){var f=u[0===a?"textCollisionFeature":"iconCollisionFeature"];if(f)for(var l=f.boxStartIndex;l<f.boxEndIndex;l++){var c=this.collisionBoxArray.get(l),h=c.anchorPoint,p=(new s(c.x1,c.y1*i))._rotate(r),d=(new s(c.x2,c.y1*i))._rotate(r),v=(new s(c.x1,c.y2*i))._rotate(r),m=(new s(c.x2,c.y2*i))._rotate(r),g=Math.max(0,Math.min(25,this.zoom+Math.log(c.maxScale)/Math.LN2)),y=Math.max(0,Math.min(25,this.zoom+Math.log(c.placementScale)/Math.LN2));this.addCollisionBoxVertex(n,h,p,g,y),this.addCollisionBoxVertex(n,h,d,g,y),this.addCollisionBoxVertex(n,h,d,g,y),this.addCollisionBoxVertex(n,h,m,g,y),this.addCollisionBoxVertex(n,h,m,g,y),this.addCollisionBoxVertex(n,h,v,g,y),this.addCollisionBoxVertex(n,h,v,g,y),this.addCollisionBoxVertex(n,h,p,g,y)}}}},r.prototype.addSymbolInstance=function(e,t,n,i,s,o,u,a,f,l,c,h,p,d,m,y,b,S,x){var T,N,C,k,L,A,O,M;if(n&&(O=o?w(e,n,h,t,s,d):[],L=new g(a,t,e,f,l,c,n,h,p,d,!1)),T=this.symbolQuadsArray.length,O&&O.length)for(var D=0;D<O.length;D++)this.addSymbolQuad(O[D]);N=this.symbolQuadsArray.length;var P=L?L.boxStartIndex:this.collisionBoxArray.length,H=L?L.boxEndIndex:this.collisionBoxArray.length;i&&(M=o?E(e,i,m,t,s,b,n,S,x):[],A=new g(a,t,e,f,l,c,i,m,y,b,!0)),C=this.symbolQuadsArray.length,M&&1===M.length&&this.addSymbolQuad(M[0]),k=this.symbolQuadsArray.length;var B=A?A.boxStartIndex:this.collisionBoxArray.length,j=A?A.boxEndIndex:this.collisionBoxArray.length;return k>r.MAX_QUADS&&v.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),N>r.MAX_QUADS&&v.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),this.symbolInstancesArray.emplaceBack(P,H,B,j,T,N,C,k,e.x,e.y,u)},r.prototype.addSymbolQuad=function(e){return this.symbolQuadsArray.emplaceBack(e.anchorPoint.x,e.anchorPoint.y,e.tl.x,e.tl.y,e.tr.x,e.tr.y,e.bl.x,e.bl.y,e.br.x,e.br.y,e.tex.h,e.tex.w,e.tex.x,e.tex.y,e.anchorAngle,e.glyphAngle,e.maxScale,e.minScale)}},{"../../symbol/anchor":357,"../../symbol/clip_line":359,"../../symbol/collision_feature":361,"../../symbol/get_anchors":363,"../../symbol/mergelines":366,"../../symbol/quads":367,"../../symbol/resolve_text":368,"../../symbol/shaping":369,"../../util/token":407,"../../util/util":408,"../bucket":295,"../load_geometry":303,"point-geometry":448}],300:[function(e,t,n){"use strict";function r(e,t,n){this.arrayBuffer=e.arrayBuffer,this.length=e.length,this.attributes=t.members,this.itemSize=t.bytesPerElement,this.type=n,this.arrayType=t}t.exports=r,r.prototype.bind=function(e){var t=e[this.type];this.buffer?e.bindBuffer(t,this.buffer):(this.buffer=e.createBuffer(),e.bindBuffer(t,this.buffer),e.bufferData(t,this.arrayBuffer,e.STATIC_DRAW),this.arrayBuffer=null)};var i={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"};r.prototype.setVertexAttribPointers=function(e,t){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],s=t[r.name];void 0!==s&&e.vertexAttribPointer(s,r.components,e[i[r.type]],!1,this.arrayType.bytesPerElement,r.offset)}},r.prototype.destroy=function(e){this.buffer&&e.deleteBuffer(this.buffer)},r.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"}},{}],301:[function(e,t,n){"use strict";function r(e,t){this.layoutVertexBuffer=new s(e.layoutVertexArray,t.layoutVertexArrayType,s.BufferType.VERTEX),e.elementArray&&(this.elementBuffer=new s(e.elementArray,t.elementArrayType,s.BufferType.ELEMENT));var n,r=this.vaos={};e.elementArray2&&(this.elementBuffer2=new s(e.elementArray2,t.elementArrayType2,s.BufferType.ELEMENT),n=this.secondVaos={}),this.paintVertexBuffers=i.mapObject(e.paintVertexArrays,function(i,u){return r[u]=new o,e.elementArray2&&(n[u]=new o),new s(i,t.paintVertexArrayTypes[u],s.BufferType.VERTEX)})}var i=e("../util/util"),s=e("./buffer"),o=e("../render/vertex_array_object");t.exports=r,r.prototype.destroy=function(e){this.layoutVertexBuffer.destroy(e),this.elementBuffer&&this.elementBuffer.destroy(e),this.elementBuffer2&&this.elementBuffer2.destroy(e);for(var t in this.paintVertexBuffers)this.paintVertexBuffers[t].destroy(e);for(var n in this.vaos)this.vaos[n].destroy(e);for(var r in this.secondVaos)this.secondVaos[r].destroy(e)}},{"../render/vertex_array_object":323,"../util/util":408,"./buffer":300}],302:[function(e,t,n){"use strict";function r(e,t,n){if(e.grid){var r=e,i=t;e=r.coord,t=r.overscaling,this.grid=new d(r.grid),this.featureIndexArray=new T(r.featureIndexArray),this.rawTileData=i,this.bucketLayerIDs=r.bucketLayerIDs}else this.grid=new d(c,16,0),this.featureIndexArray=new T;this.coord=e,this.overscaling=t,this.x=e.x,this.y=e.y,this.z=e.z-Math.log(t)/Math.LN2,this.setCollisionTile(n)}function i(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function s(e,t){return t-e}function o(e){return e["line-gap-width"]>0?e["line-gap-width"]+2*e["line-width"]:e["line-width"]}function u(e,t,n,r,i){if(!t[0]&&!t[1])return e;t=f.convert(t),"viewport"===n&&t._rotate(-r);for(var s=[],o=0;o<e.length;o++){for(var u=e[o],a=[],l=0;l<u.length;l++)a.push(u[l].sub(t._mult(i)));s.push(a)}return s}function a(e,t){for(var n=[],r=new f(0,0),i=0;i<e.length;i++){for(var s=e[i],o=[],u=0;u<s.length;u++){var a=s[u-1],l=s[u],c=s[u+1],h=0===u?r:l.sub(a)._unit()._perp(),p=u===s.length-1?r:c.sub(l)._unit()._perp(),d=h._add(p)._unit(),v=d.x*p.x+d.y*p.y;d._mult(1/v),o.push(d._mult(t)._add(l))}n.push(o)}return n}var f=e("point-geometry"),l=e("./load_geometry"),c=e("./bucket").EXTENT,h=e("feature-filter"),p=e("../util/struct_array"),d=e("grid-index"),v=e("../util/dictionary_coder"),m=e("vector-tile"),g=e("pbf"),y=e("../util/vectortile_to_geojson"),b=e("../util/util").arraysIntersect,w=e("../util/intersection_tests"),E=w.multiPolygonIntersectsBufferedMultiPoint,S=w.multiPolygonIntersectsMultiPolygon,x=w.multiPolygonIntersectsBufferedMultiLine,T=new p({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]});t.exports=r,r.prototype.insert=function(e,t,n,r){var i=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(t,n,r);for(var s=l(e),o=0;o<s.length;o++){for(var u=s[o],a=[1/0,1/0,-1/0,-1/0],f=0;f<u.length;f++){var c=u[f];a[0]=Math.min(a[0],c.x),a[1]=Math.min(a[1],c.y),a[2]=Math.max(a[2],c.x),a[3]=Math.max(a[3],c.y)}this.grid.insert(i,a[0],a[1],a[2],a[3])}},r.prototype.setCollisionTile=function(e){this.collisionTile=e},r.prototype.serialize=function(){var e={coord:this.coord,overscaling:this.overscaling,grid:this.grid.toArrayBuffer(),featureIndexArray:this.featureIndexArray.serialize(),bucketLayerIDs:this.bucketLayerIDs};return{data:e,transferables:[e.grid,e.featureIndexArray.arrayBuffer]}},r.prototype.query=function(e,t){this.vtLayers||(this.vtLayers=(new m.VectorTile(new g(new Uint8Array(this.rawTileData)))).layers,this.sourceLayerCoder=new v(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var n={},r=e.params||{},u=c/e.tileSize/e.scale,a=h(r.filter),l=0;for(var p in t){var d=t[p],y=d.paint,b=0;"line"===d.type?b=o(y)/2+Math.abs(y["line-offset"])+i(y["line-translate"]):"fill"===d.type?b=i(y["fill-translate"]):"circle"===d.type&&(b=y["circle-radius"]+i(y["circle-translate"])),l=Math.max(l,b*u)}for(var w=e.queryGeometry.map(function(e){return e.map(function(e){return new f(e.x,e.y)})}),E=1/0,S=1/0,x=-1/0,T=-1/0,N=0;N<w.length;N++)for(var C=w[N],k=0;k<C.length;k++){var L=C[k];E=Math.min(E,L.x),S=Math.min(S,L.y),x=Math.max(x,L.x),T=Math.max(T,L.y)}var A=this.grid.query(E-l,S-l,x+l,T+l);A.sort(s),this.filterMatching(n,A,this.featureIndexArray,w,a,r.layers,t,e.bearing,u);var O=this.collisionTile.queryRenderedSymbols(E,S,x,T,e.scale);return O.sort(),this.filterMatching(n,O,this.collisionTile.collisionBoxArray,w,a,r.layers,t,e.bearing,u),n},r.prototype.filterMatching=function(e,t,n,r,i,s,f,c,h){for(var p,d=0;d<t.length;d++){var v=t[d];if(v!==p){p=v;var m=n.get(v),g=this.bucketLayerIDs[m.bucketIndex];if(!s||b(s,g)){var w=this.sourceLayerCoder.decode(m.sourceLayerIndex),T=this.vtLayers[w],N=T.feature(m.featureIndex);if(i(N))for(var C=null,k=0;k<g.length;k++){var L=g[k];if(!(s&&s.indexOf(L)<0)){var A=f[L];if(A){var O;if("symbol"!==A.type){C||(C=l(N));var D=A.paint;if("line"===A.type){O=u(r,D["line-translate"],D["line-translate-anchor"],c,h);var P=o(D)/2*h;if(D["line-offset"]&&(C=a(C,D["line-offset"]*h)),!x(O,C,P))continue}else if("fill"===A.type){if(O=u(r,D["fill-translate"],D["fill-translate-anchor"],c,h),!S(O,C))continue}else if("circle"===A.type){O=u(r,D["circle-translate"],D["circle-translate-anchor"],c,h);var H=D["circle-radius"]*h;if(!E(O,C,H))continue}}var B=new y(N,this.z,this.x,this.y);B.layer=A.serialize({includeRefProperties:!0});var j=e[L];void 0===j&&(j=e[L]=[]),j.push(B)}}}}}}}},{"../util/dictionary_coder":398,"../util/intersection_tests":403,"../util/struct_array":406,"../util/util":408,"../util/vectortile_to_geojson":409,"./bucket":295,"./load_geometry":303,"feature-filter":107,"grid-index":257,pbf:442,"point-geometry":448,"vector-tile":511}],303:[function(e,t,n){"use strict";function r(e){return{min:-1*Math.pow(2,e-1),max:Math.pow(2,e-1)-1}}var i=e("../util/util"),s=e("./bucket").EXTENT,o=e("assert"),u={15:r(15),16:r(16)};t.exports=function(e,t){var n=u[t||16];o(n);for(var r=s/e.extent,f=e.loadGeometry(),l=0;l<f.length;l++)for(var c=f[l],h=0;h<c.length;h++){var p=c[h];p.x=Math.round(p.x*r),p.y=Math.round(p.y*r),(p.x<n.min||p.x>n.max||p.y<n.min||p.y>n.max)&&i.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return f}},{"../util/util":408,"./bucket":295,assert:36}],304:[function(e,t,n){"use strict";function r(e,t,n){this.column=e,this.row=t,this.zoom=n}t.exports=r,r.prototype={clone:function(){return new r(this.column,this.row,this.zoom)},zoomTo:function(e){return this.clone()._zoomTo(e)},sub:function(e){return this.clone()._sub(e)},_zoomTo:function(e){var t=Math.pow(2,e-this.zoom);return this.column*=t,this.row*=t,this.zoom=e,this},_sub:function(e){return e=e.zoomTo(this.zoom),this.column-=e.column,this.row-=e.row,this}}},{}],305:[function(e,t,n){"use strict";function r(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}t.exports=r;var i=e("../util/util").wrap;r.prototype.wrap=function(){return new r(i(this.lng,-180,180),this.lat)},r.prototype.toArray=function(){return[this.lng,this.lat]},r.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},{"../util/util":408}],306:[function(e,t,n){"use strict";function r(e,t){e&&(t?this.extend(e).extend(t):4===e.length?this.extend([e[0],e[1]]).extend([e[2],e[3]]):this.extend(e[0]).extend(e[1]))}t.exports=r;var i=e("./lng_lat");r.prototype={extend:function(e){var t,n,s=this._sw,o=this._ne;if(e instanceof i)t=e,n=e;else{if(!(e instanceof r))return e?this.extend(i.convert(e)||r.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return s||o?(s.lng=Math.min(t.lng,s.lng),s.lat=Math.min(t.lat,s.lat),o.lng=Math.max(n.lng,o.lng),o.lat=Math.max(n.lat,o.lat)):(this._sw=new i(t.lng,t.lat),this._ne=new i(n.lng,n.lat)),this},getCenter:function(){return new i((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},getSouthWest:function(){return this._sw},getNorthEast:function(){return this._ne},getNorthWest:function(){return new i(this.getWest(),this.getNorth())},getSouthEast:function(){return new i(this.getEast(),this.getSouth())},getWest:function(){return this._sw.lng},getSouth:function(){return this._sw.lat},getEast:function(){return this._ne.lng},getNorth:function(){return this._ne.lat},toArray:function(){return[this._sw.toArray(),this._ne.toArray()]},toString:function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"}},r.convert=function(e){return!e||e instanceof r?e:new r(e)}},{"./lng_lat":305}],307:[function(e,t,n){"use strict";function r(e,t){this.tileSize=512,this._minZoom=e||0,this._maxZoom=t||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new i(0,0),this.zoom=0,this.angle=0,this._altitude=1.5,this._pitch=0,this._unmodified=!0}var i=e("./lng_lat"),s=e("point-geometry"),o=e("./coordinate"),u=e("../util/util").wrap,a=e("../util/interpolate"),f=e("../source/tile_coord"),l=e("../data/bucket").EXTENT,c=e("gl-matrix"),h=c.vec4,p=c.mat4,d=c.mat2;t.exports=r,r.prototype={get minZoom(){return this._minZoom},set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},get maxZoom(){return this._maxZoom},set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},get worldSize(){return this.tileSize*this.scale},get centerPoint(){return this.size._div(2)},get size(){return new s(this.width,this.height)},get bearing(){return-this.angle/Math.PI*180},set bearing(e){var t=-u(e,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=d.create(),d.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},get pitch(){return this._pitch/Math.PI*180},set pitch(e){var t=Math.min(60,e)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())},get altitude(){return this._altitude},set altitude(e){var t=Math.max(.75,e);this._altitude!==t&&(this._unmodified=!1,this._altitude=t,this._calcMatrices())},get zoom(){return this._zoom},set zoom(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._calcMatrices(),this._constrain())},get center(){return this._center},set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._calcMatrices(),this._constrain())},coveringZoomLevel:function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},coveringTiles:function(e){var t=this.coveringZoomLevel(e),n=t;if(t<e.minzoom)return[];t>e.maxzoom&&(t=e.maxzoom);var r=this,i=r.locationCoordinate(r.center)._zoomTo(t),o=new s(i.column-.5,i.row-.5);return f.cover(t,[r.pointCoordinate(new s(0,0))._zoomTo(t),r.pointCoordinate(new s(r.width,0))._zoomTo(t),r.pointCoordinate(new s(r.width,r.height))._zoomTo(t),r.pointCoordinate(new s(0,r.height))._zoomTo(t)],e.reparseOverscaled?n:t).sort(function(e,t){return o.dist(e)-o.dist(t)})},resize:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._calcMatrices(),this._constrain()},get unmodified(){return this._unmodified},zoomScale:function(e){return Math.pow(2,e)},scaleZoom:function(e){return Math.log(e)/Math.LN2},project:function(e,t){return new s(this.lngX(e.lng,t),this.latY(e.lat,t))},unproject:function(e,t){return new i(this.xLng(e.x,t),this.yLat(e.y,t))},get x(){return this.lngX(this.center.lng)},get y(){return this.latY(this.center.lat)},get point(){return new s(this.x,this.y)},lngX:function(e,t){return(180+e)*(t||this.worldSize)/360},latY:function(e,t){var n=180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360));return(180-n)*(t||this.worldSize)/360},xLng:function(e,t){return 360*e/(t||this.worldSize)-180},yLat:function(e,t){var n=180-360*e/(t||this.worldSize);return 360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90},panBy:function(e){var t=this.centerPoint._add(e);this.center=this.pointLocation(t)},setLocationAtPoint:function(e,t){var n=this.locationCoordinate(e),r=this.pointCoordinate(t),i=this.pointCoordinate(this.centerPoint),s=r._sub(n);this._unmodified=!1,this.center=this.coordinateLocation(i._sub(s))},locationPoint:function(e){return this.coordinatePoint(this.locationCoordinate(e))},pointLocation:function(e){return this.coordinateLocation(this.pointCoordinate(e))},locationCoordinate:function(e){var t=this.zoomScale(this.tileZoom)/this.worldSize,n=i.convert(e);return new o(this.lngX(n.lng)*t,this.latY(n.lat)*t,this.tileZoom)},coordinateLocation:function(e){var t=this.zoomScale(e.zoom);return new i(this.xLng(e.column,t),this.yLat(e.row,t))},pointCoordinate:function(e){var t=0,n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];h.transformMat4(n,n,this.pixelMatrixInverse),h.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],s=r[3],u=n[0]/i,f=r[0]/s,l=n[1]/i,c=r[1]/s,p=n[2]/i,d=r[2]/s,v=p===d?0:(t-p)/(d-p),m=this.worldSize/this.zoomScale(this.tileZoom);return new o(a(u,f,v)/m,a(l,c,v)/m,this.tileZoom)},coordinatePoint:function(e){var t=this.worldSize/this.zoomScale(e.zoom),n=[e.column*t,e.row*t,0,1];return h.transformMat4(n,n,this.pixelMatrix),new s(n[0]/n[3],n[1]/n[3])},calculatePosMatrix:function(e,t){void 0===t&&(t=1/0),e instanceof f&&(e=e.toCoordinate(t));var n=Math.min(e.zoom,t),r=this.worldSize/Math.pow(2,n),i=new Float64Array(16);return p.identity(i),p.translate(i,i,[e.column*r,e.row*r,0]),p.scale(i,i,[r/l,r/l,1]),p.multiply(i,this.projMatrix,i),new Float32Array(i)},_constrain:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,t,n,r,i,o,u,a,f=this.size,l=this._unmodified;this.latRange&&(e=this.latY(this.latRange[1]),t=this.latY(this.latRange[0]),i=t-e<f.y?f.y/(t-e):0),this.lngRange&&(n=this.lngX(this.lngRange[0]),r=this.lngX(this.lngRange[1]),o=r-n<f.x?f.x/(r-n):0);var c=Math.max(o||0,i||0);if(c)return this.center=this.unproject(new s(o?(r+n)/2:this.x,i?(t+e)/2:this.y)),this.zoom+=this.scaleZoom(c),this._unmodified=l,void (this._constraining=!1);if(this.latRange){var h=this.y,p=f.y/2;h-p<e&&(a=e+p),h+p>t&&(a=t-p)}if(this.lngRange){var d=this.x,v=f.x/2;d-v<n&&(u=n+v),d+v>r&&(u=r-v)}void 0===u&&void 0===a||(this.center=this.unproject(new s(void 0!==u?u:this.x,void 0!==a?a:this.y))),this._unmodified=l,this._constraining=!1}},_calcMatrices:function(){if(this.height){var e=Math.atan(.5/this.altitude),t=Math.sin(e)*this.altitude/Math.sin(Math.PI/2-this._pitch-e),n=Math.cos(Math.PI/2-this._pitch)*t+this.altitude,r=new Float64Array(16);if(p.perspective(r,2*Math.atan(this.height/2/this.altitude),this.width/this.height,.1,n),p.translate(r,r,[0,0,-this.altitude]),p.scale(r,r,[1,-1,1/this.height]),p.rotateX(r,r,this._pitch),p.rotateZ(r,r,this.angle),p.translate(r,r,[-this.x,-this.y,0]),this.projMatrix=r,r=p.create(),p.scale(r,r,[this.width/2,-this.height/2,1]),p.translate(r,r,[1,-1,0]),this.pixelMatrix=p.multiply(new Float64Array(16),r,this.projMatrix),r=p.invert(new Float64Array(16),this.pixelMatrix),!r)throw new Error("failed to invert matrix");this.pixelMatrixInverse=r}}}},{"../data/bucket":295,"../source/tile_coord":335,"../util/interpolate":402,"../util/util":408,"./coordinate":304,"./lng_lat":305,"gl-matrix":166,"point-geometry":448}],308:[function(e,t,n){"use strict";var r={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};t.exports=function(e,t,n,i){i=i||1;var s,o,u,a,f,l,c,h,p=[];for(s=0,o=e.length;s<o;s++)if(f=r[e[s]]){for(h=null,u=0,a=f[1].length;u<a;u+=2)f[1][u]===-1&&f[1][u+1]===-1?h=null:(l=t+f[1][u]*i,c=n-f[1][u+1]*i,h&&p.push(h.x,h.y,l,c),h={x:l,y:c});t+=f[0]*i}return p}},{}],309:[function(e,t,n){"use strict";var r=t.exports={};r.version=e("../package.json").version,r.Map=e("./ui/map"),r.Control=e("./ui/control/control"),r.Navigation=e("./ui/control/navigation"),r.Geolocate=e("./ui/control/geolocate"),r.Attribution=e("./ui/control/attribution"),r.Popup=e("./ui/popup"),r.Marker=e("./ui/marker"),r.Style=e("./style/style"),r.LngLat=e("./geo/lng_lat"),r.LngLatBounds=e("./geo/lng_lat_bounds"),r.Point=e("point-geometry"),r.Evented=e("./util/evented"),r.util=e("./util/util"),r.supported=e("./util/browser").supported;var i=e("./util/ajax");r.util.getJSON=i.getJSON,r.util.getArrayBuffer=i.getArrayBuffer;var s=e("./util/config");r.config=s,Object.defineProperty(r,"accessToken",{get:function(){return s.ACCESS_TOKEN},set:function(e){s.ACCESS_TOKEN=e}})},{"../package.json":410,"./geo/lng_lat":305,"./geo/lng_lat_bounds":306,"./style/style":344,"./ui/control/attribution":375,"./ui/control/control":376,"./ui/control/geolocate":377,"./ui/control/navigation":378,"./ui/map":387,"./ui/marker":388,"./ui/popup":389,"./util/ajax":391,"./util/browser":392,"./util/config":397,"./util/evented":400,"./util/util":408,"point-geometry":448}],310:[function(e,t,n){"use strict";var r=e("assert");t.exports=function(e){for(var t={define:{},initialize:{}},n=0;n<e.length;n++){var i=e[n];r("u_"===i.name.slice(0,2));var s="{precision} "+(1===i.components?"float":"vec"+i.components);t.define[i.name.slice(2)]="uniform "+s+" "+i.name+";\n",t.initialize[i.name.slice(2)]=s+" "+i.name.slice(2)+" = "+i.name+";\n"}return t}},{assert:36}],311:[function(e,t,n){"use strict";function r(e,t,n){var r,u=e.gl,f=e.transform,l=n.paint["background-color"],c=n.paint["background-pattern"],h=n.paint["background-opacity"],p=c?e.spriteAtlas.getPosition(c.from,!0):null,d=c?e.spriteAtlas.getPosition(c.to,!0):null;if(e.setDepthSublayer(0),p&&d){if(e.isOpaquePass)return;r=e.useProgram("pattern"),u.uniform1i(r.u_image,0),u.uniform2fv(r.u_pattern_tl_a,p.tl),u.uniform2fv(r.u_pattern_br_a,p.br),u.uniform2fv(r.u_pattern_tl_b,d.tl),u.uniform2fv(r.u_pattern_br_b,d.br),u.uniform1f(r.u_opacity,h),u.uniform1f(r.u_mix,c.t),u.uniform2fv(r.u_pattern_size_a,p.size),u.uniform2fv(r.u_pattern_size_b,d.size),u.uniform1f(r.u_scale_a,c.fromScale),u.uniform1f(r.u_scale_b,c.toScale),u.activeTexture(u.TEXTURE0),e.spriteAtlas.bind(u,!0),e.tileExtentPatternVAO.bind(u,r,e.tileExtentBuffer)}else{if(e.isOpaquePass!==(1===l[3]))return;var v=s([{name:"u_color",components:4},{name:"u_opacity",components:1}]);r=e.useProgram("fill",[],v,v),u.uniform4fv(r.u_color,l),u.uniform1f(r.u_opacity,h),e.tileExtentVAO.bind(u,r,e.tileExtentBuffer)}u.disable(u.STENCIL_TEST);for(var m=f.coveringTiles({tileSize:o}),g=0;g<m.length;g++){var y=m[g];if(p&&d){var b={coord:y,tileSize:o};u.uniform1f(r.u_tile_units_to_pixels,1/i(b,1,e.transform.tileZoom));var w=b.tileSize*Math.pow(2,e.transform.tileZoom-b.coord.z),E=w*(b.coord.x+y.w*Math.pow(2,b.coord.z)),S=w*b.coord.y;u.uniform2f(r.u_pixel_coord_upper,E>>16,S>>16),u.uniform2f(r.u_pixel_coord_lower,65535&E,65535&S)}u.uniformMatrix4fv(r.u_matrix,!1,e.transform.calculatePosMatrix(y)),u.drawArrays(u.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}u.stencilMask(0),u.stencilFunc(u.EQUAL,128,128)}var i=e("../source/pixels_to_tile_units"),s=e("./create_uniform_pragmas"),o=512;t.exports=r},{"../source/pixels_to_tile_units":329,"./create_uniform_pragmas":310}],312:[function(e,t,n){"use strict";function r(e,t,n,r){if(!e.isOpaquePass){var s=e.gl;e.setDepthSublayer(0),e.depthMask(!1),s.disable(s.STENCIL_TEST);for(var o=0;o<r.length;o++){var u=r[o],a=t.getTile(u),f=a.getBucket(n);if(f){var l=f.bufferGroups.circle;if(l){var c=f.paintAttributes.circle[n.id],h=e.useProgram("circle",c.defines,c.vertexPragmas,c.fragmentPragmas);"map"===n.paint["circle-pitch-scale"]?(s.uniform1i(h.u_scale_with_map,!0),s.uniform2f(h.u_extrude_scale,e.transform.pixelsToGLUnits[0]*e.transform.altitude,e.transform.pixelsToGLUnits[1]*e.transform.altitude)):(s.uniform1i(h.u_scale_with_map,!1),s.uniform2fv(h.u_extrude_scale,e.transform.pixelsToGLUnits)),s.uniform1f(h.u_devicepixelratio,i.devicePixelRatio),s.uniformMatrix4fv(h.u_matrix,!1,e.translatePosMatrix(u.posMatrix,a,n.paint["circle-translate"],n.paint["circle-translate-anchor"])),f.setUniforms(s,"circle",h,n,{zoom:e.transform.zoom});for(var p=0;p<l.length;p++){var d=l[p];d.vaos[n.id].bind(s,h,d.layoutVertexBuffer,d.elementBuffer,d.paintVertexBuffers[n.id]),s.drawElements(s.TRIANGLES,3*d.elementBuffer.length,s.UNSIGNED_SHORT,0)}}}}}}var i=e("../util/browser");t.exports=r},{"../util/browser":392}],313:[function(e,t,n){"use strict";function r(e,t,n,r){var i=e.gl;i.enable(i.STENCIL_TEST);for(var s=e.useProgram("collisionbox"),o=0;o<r.length;o++){var u=r[o],a=t.getTile(u),f=a.getBucket(n);if(f){var l=f.bufferGroups.collisionBox;if(l&&l.length){var c=l[0];0!==c.layoutVertexBuffer.length&&(i.uniformMatrix4fv(s.u_matrix,!1,u.posMatrix),e.enableTileClippingMask(u),e.lineWidth(1),i.uniform1f(s.u_scale,Math.pow(2,e.transform.zoom-a.coord.z)),i.uniform1f(s.u_zoom,10*e.transform.zoom),i.uniform1f(s.u_maxzoom,10*(a.coord.z+1)),c.vaos[n.id].bind(i,s,c.layoutVertexBuffer),i.drawArrays(i.LINES,0,c.layoutVertexBuffer.length))}}}}t.exports=r},{}],314:[function(e,t,n){"use strict";function r(e,t,n){if(!e.isOpaquePass&&e.options.debug)for(var r=0;r<n.length;r++)i(e,t,n[r])}function i(e,t,n){var r=e.gl;r.disable(r.STENCIL_TEST),e.lineWidth(1*o.devicePixelRatio);var i=n.posMatrix,h=e.useProgram("debug");r.uniformMatrix4fv(h.u_matrix,!1,i),r.uniform4f(h.u_color,1,0,0,1),e.debugVAO.bind(r,h,e.debugBuffer),r.drawArrays(r.LINE_STRIP,0,e.debugBuffer.length);for(var p=s(n.toString(),50,200,5),d=new e.PosArray,v=0;v<p.length;v+=2)d.emplaceBack(p[v],p[v+1]);var m=new f(d.serialize(),e.PosArray.serialize(),f.BufferType.VERTEX),g=new l;g.bind(r,h,m),r.uniform4f(h.u_color,1,1,1,1);for(var y=t.getTile(n).tileSize,b=a/(Math.pow(2,e.transform.zoom-n.z)*y),w=[[-1,-1],[-1,1],[1,-1],[1,1]],E=0;E<w.length;E++){var S=w[E];r.uniformMatrix4fv(h.u_matrix,!1,u.translate([],i,[b*S[0],b*S[1],0])),r.drawArrays(r.LINES,0,m.length)}r.uniform4f(h.u_color,0,0,0,1),r.uniformMatrix4fv(h.u_matrix,!1,i),r.drawArrays(r.LINES,0,m.length)}var s=e("../lib/debugtext"),o=e("../util/browser"),u=e("gl-matrix").mat4,a=e("../data/bucket").EXTENT,f=e("../data/buffer"),l=e("./vertex_array_object");t.exports=r},{"../data/bucket":295,"../data/buffer":300,"../lib/debugtext":308,"../util/browser":392,"./vertex_array_object":323,"gl-matrix":166}],315:[function(e,t,n){"use strict";function r(e,t,n,r){var o=e.gl;o.enable(o.STENCIL_TEST);var u;if(u=!n.paint["fill-pattern"]&&n.isPaintValueFeatureConstant("fill-color")&&n.isPaintValueFeatureConstant("fill-opacity")&&1===n.paint["fill-color"][3]&&1===n.paint["fill-opacity"],e.isOpaquePass===u){e.setDepthSublayer(1);for(var f=0;f<r.length;f++)i(e,t,n,r[f])}if(!e.isOpaquePass&&n.paint["fill-antialias"]){e.lineWidth(2),e.depthMask(!1);var l=n.getPaintProperty("fill-outline-color");(l||!n.paint["fill-pattern"])&&l?e.setDepthSublayer(2):e.setDepthSublayer(0);for(var c=0;c<r.length;c++)s(e,t,n,r[c])}}function i(e,t,n,r){var i=t.getTile(r),s=i.getBucket(n);if(s){var u=s.bufferGroups.fill;if(u){var a,f=e.gl,l=n.paint["fill-pattern"];if(l)a=e.useProgram("pattern"),o(l,n.paint["fill-opacity"],i,r,e,a),f.activeTexture(f.TEXTURE0),e.spriteAtlas.bind(f,!0);else{var c=s.paintAttributes.fill[n.id];a=e.useProgram("fill",c.defines,c.vertexPragmas,c.fragmentPragmas),s.setUniforms(f,"fill",a,n,{zoom:e.transform.zoom})}f.uniformMatrix4fv(a.u_matrix,!1,e.translatePosMatrix(r.posMatrix,i,n.paint["fill-translate"],n.paint["fill-translate-anchor"])),e.enableTileClippingMask(r);for(var h=0;h<u.length;h++){var p=u[h];p.vaos[n.id].bind(f,a,p.layoutVertexBuffer,p.elementBuffer,p.paintVertexBuffers[n.id]),f.drawElements(f.TRIANGLES,p.elementBuffer.length,f.UNSIGNED_SHORT,0)}}}}function s(e,t,n,r){var i=t.getTile(r),s=i.getBucket(n);if(s){var u,a=e.gl,f=s.bufferGroups.fill,l=n.paint["fill-pattern"],c=n.paint["fill-opacity"],h=n.getPaintProperty("fill-outline-color");if(l&&!h)u=e.useProgram("outlinepattern"),a.uniform2f(u.u_world,a.drawingBufferWidth,a.drawingBufferHeight);else{var p=s.paintAttributes.fill[n.id];u=e.useProgram("outline",p.defines,p.vertexPragmas,p.fragmentPragmas),a.uniform2f(u.u_world,a.drawingBufferWidth,a.drawingBufferHeight),a.uniform1f(u.u_opacity,c),s.setUniforms(a,"fill",u,n,{zoom:e.transform.zoom})}a.uniformMatrix4fv(u.u_matrix,!1,e.translatePosMatrix(r.posMatrix,i,n.paint["fill-translate"],n.paint["fill-translate-anchor"])),l&&o(l,c,i,r,e,u),e.enableTileClippingMask(r);for(var d=0;d<f.length;d++){var v=f[d];v.secondVaos[n.id].bind(a,u,v.layoutVertexBuffer,v.elementBuffer2,v.paintVertexBuffers[n.id]),a.drawElements(a.LINES,2*v.elementBuffer2.length,a.UNSIGNED_SHORT,0)}}}function o(e,t,n,r,i,s){var o=i.gl,a=i.spriteAtlas.getPosition(e.from,!0),f=i.spriteAtlas.getPosition(e.to,!0);if(a&&f){o.uniform1i(s.u_image,0),o.uniform2fv(s.u_pattern_tl_a,a.tl),o.uniform2fv(s.u_pattern_br_a,a.br),o.uniform2fv(s.u_pattern_tl_b,f.tl),o.uniform2fv(s.u_pattern_br_b,f.br),o.uniform1f(s.u_opacity,t),o.uniform1f(s.u_mix,e.t),o.uniform1f(s.u_tile_units_to_pixels,1/u(n,1,i.transform.tileZoom)),o.uniform2fv(s.u_pattern_size_a,a.size),o.uniform2fv(s.u_pattern_size_b,f.size),o.uniform1f(s.u_scale_a,e.fromScale),o.uniform1f(s.u_scale_b,e.toScale);var l=n.tileSize*Math.pow(2,i.transform.tileZoom-n.coord.z),c=l*(n.coord.x+r.w*Math.pow(2,n.coord.z)),h=l*n.coord.y;o.uniform2f(s.u_pixel_coord_upper,c>>16,h>>16),o.uniform2f(s.u_pixel_coord_lower,65535&c,65535&h),o.activeTexture(o.TEXTURE0),i.spriteAtlas.bind(o,!0)}}var u=e("../source/pixels_to_tile_units");t.exports=r},{"../source/pixels_to_tile_units":329}],316:[function(e,t,n){"use strict";var r=e("../util/browser"),i=e("gl-matrix").mat2,s=e("../source/pixels_to_tile_units");t.exports=function(e,t,n,o){if(!e.isOpaquePass){e.setDepthSublayer(0),e.depthMask(!1);var u=e.gl;if(u.enable(u.STENCIL_TEST),!(n.paint["line-width"]<=0)){var f=1/r.devicePixelRatio,l=n.paint["line-blur"]+f,c=n.paint["line-color"],h=e.transform,p=i.create();i.scale(p,p,[1,Math.cos(h._pitch)]),i.rotate(p,p,e.transform.angle);var d,v,m,g,y,b=Math.sqrt(h.height*h.height/4*(1+h.altitude*h.altitude)),w=h.height/2*Math.tan(h._pitch),E=(b+w)/b-1,S=n.paint["line-dasharray"],x=n.paint["line-pattern"];if(S)d=e.useProgram("linesdfpattern"),u.uniform1f(d.u_linewidth,n.paint["line-width"]/2),u.uniform1f(d.u_gapwidth,n.paint["line-gap-width"]/2),u.uniform1f(d.u_antialiasing,f/2),u.uniform1f(d.u_blur,l),u.uniform4fv(d.u_color,c),u.uniform1f(d.u_opacity,n.paint["line-opacity"]),v=e.lineAtlas.getDash(S.from,"round"===n.layout["line-cap"]),m=e.lineAtlas.getDash(S.to,"round"===n.layout["line-cap"]),u.uniform1i(d.u_image,0),u.activeTexture(u.TEXTURE0),e.lineAtlas.bind(u),u.uniform1f(d.u_tex_y_a,v.y),u.uniform1f(d.u_tex_y_b,m.y),u.uniform1f(d.u_mix,S.t),u.uniform1f(d.u_extra,E),u.uniform1f(d.u_offset,-n.paint["line-offset"]),u.uniformMatrix2fv(d.u_antialiasingmatrix,!1,p);else if(x){if(g=e.spriteAtlas.getPosition(x.from,!0),y=e.spriteAtlas.getPosition(x.to,!0),!g||!y)return;d=e.useProgram("linepattern"),u.uniform1i(d.u_image,0),u.activeTexture(u.TEXTURE0),e.spriteAtlas.bind(u,!0),u.uniform1f(d.u_linewidth,n.paint["line-width"]/2),u.uniform1f(d.u_gapwidth,n.paint["line-gap-width"]/2),u.uniform1f(d.u_antialiasing,f/2),u.uniform1f(d.u_blur,l),u.uniform2fv(d.u_pattern_tl_a,g.tl),u.uniform2fv(d.u_pattern_br_a,g.br),u.uniform2fv(d.u_pattern_tl_b,y.tl),u.uniform2fv(d.u_pattern_br_b,y.br),u.uniform1f(d.u_fade,x.t),u.uniform1f(d.u_opacity,n.paint["line-opacity"]),u.uniform1f(d.u_extra,E),u.uniform1f(d.u_offset,-n.paint["line-offset"]),u.uniformMatrix2fv(d.u_antialiasingmatrix,!1,p)}else d=e.useProgram("line"),u.uniform1f(d.u_linewidth,n.paint["line-width"]/2),u.uniform1f(d.u_gapwidth,n.paint["line-gap-width"]/2),u.uniform1f(d.u_antialiasing,f/2),u.uniform1f(d.u_blur,l),u.uniform1f(d.u_extra,E),u.uniform1f(d.u_offset,-n.paint["line-offset"]),u.uniformMatrix2fv(d.u_antialiasingmatrix,!1,p),u.uniform4fv(d.u_color,c),u.uniform1f(d.u_opacity,n.paint["line-opacity"]);for(var T=0;T<o.length;T++){var N=o[T],C=t.getTile(N),k=C.getBucket(n);if(k){var L=k.bufferGroups.line;if(L){e.enableTileClippingMask(N);var A=e.translatePosMatrix(N.posMatrix,C,n.paint["line-translate"],n.paint["line-translate-anchor"]);u.uniformMatrix4fv(d.u_matrix,!1,A);var O=1/s(C,1,e.transform.zoom);if(S){var M=v.width*S.fromScale,_=m.width*S.toScale,D=[1/s(C,M,e.transform.tileZoom),-v.height/2],P=[1/s(C,_,e.transform.tileZoom),-m.height/2],H=e.lineAtlas.width/(256*Math.min(M,_)*r.devicePixelRatio)/2;u.uniform1f(d.u_ratio,O),u.uniform2fv(d.u_patternscale_a,D),u.uniform2fv(d.u_patternscale_b,P),u.uniform1f(d.u_sdfgamma,H)}else x?(u.uniform1f(d.u_ratio,O),u.uniform2fv(d.u_pattern_size_a,[s(C,g.size[0]*x.fromScale,e.transform.tileZoom),y.size[1]]),u.uniform2fv(d.u_pattern_size_b,[s(C,y.size[0]*x.toScale,e.transform.tileZoom),y.size[1]])):u.uniform1f(d.u_ratio,O);for(var B=0;B<L.length;B++){var j=L[B];j.vaos[n.id].bind(u,d,j.layoutVertexBuffer,j.elementBuffer),u.drawElements(u.TRIANGLES,3*j.elementBuffer.length,u.UNSIGNED_SHORT,0)}}}}}}}},{"../source/pixels_to_tile_units":329,"../util/browser":392,"gl-matrix":166}],317:[function(e,t,n){"use strict";function r(e,t,n,r){if(!e.isOpaquePass){var s=e.gl;s.enable(s.DEPTH_TEST),e.depthMask(!0),s.depthFunc(s.LESS);for(var o=r.length&&r[0].z,u=0;u<r.length;u++){var a=r[u];e.setDepthSublayer(a.z-o),i(e,t,n,a)}s.depthFunc(s.LEQUAL)}}function i(e,t,n,r){var i=e.gl;i.disable(i.STENCIL_TEST);var f=t.getTile(r),l=e.transform.calculatePosMatrix(r,t.maxzoom),c=e.useProgram("raster");i.uniformMatrix4fv(c.u_matrix,!1,l),i.uniform1f(c.u_brightness_low,n.paint["raster-brightness-min"]),i.uniform1f(c.u_brightness_high,n.paint["raster-brightness-max"]),i.uniform1f(c.u_saturation_factor,u(n.paint["raster-saturation"])),i.uniform1f(c.u_contrast_factor,o(n.paint["raster-contrast"])),i.uniform3fv(c.u_spin_weights,s(n.paint["raster-hue-rotate"]));var h,p,d=f.source&&f.source.findLoadedParent(r,0,{}),v=a(f,d,n,e.transform);i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,f.texture),i.activeTexture(i.TEXTURE1),d?(i.bindTexture(i.TEXTURE_2D,d.texture),h=Math.pow(2,d.coord.z-f.coord.z),p=[f.coord.x*h%1,f.coord.y*h%1]):(i.bindTexture(i.TEXTURE_2D,f.texture),v[1]=0),i.uniform2fv(c.u_tl_parent,p||[0,0]),i.uniform1f(c.u_scale_parent,h||1),i.uniform1f(c.u_buffer_scale,1),i.uniform1f(c.u_opacity0,v[0]),i.uniform1f(c.u_opacity1,v[1]),i.uniform1i(c.u_image0,0),i.uniform1i(c.u_image1,1);var m=f.boundsBuffer||e.rasterBoundsBuffer,g=f.boundsVAO||e.rasterBoundsVAO;g.bind(i,c,m),i.drawArrays(i.TRIANGLE_STRIP,0,m.length)}function s(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}function o(e){return e>0?1/(1-e):1+e}function u(e){return e>0?1-1/(1.001-e):-e}function a(e,t,n,r){var i=[1,0],s=n.paint["raster-fade-duration"];if(e.source&&s>0){var o=(new Date).getTime(),u=(o-e.timeAdded)/s,a=t?(o-t.timeAdded)/s:-1,l=r.coveringZoomLevel(e.source),c=!!t&&Math.abs(t.coord.z-l)>Math.abs(e.coord.z-l);!t||c?(i[0]=f.clamp(u,0,1),i[1]=1-i[0]):(i[0]=f.clamp(1-a,0,1),i[1]=1-i[0])}var h=n.paint["raster-opacity"];return i[0]*=h,i[1]*=h,i}var f=e("../util/util"),l=e("../util/struct_array");t.exports=r,r.RasterBoundsArray=new l({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]})},{"../util/struct_array":406,"../util/util":408}],318:[function(e,t,n){"use strict";function r(e,t,n,r){if(!e.isOpaquePass){var s=!(n.layout["text-allow-overlap"]||n.layout["icon-allow-overlap"]||n.layout["text-ignore-placement"]||n.layout["icon-ignore-placement"]),o=e.gl;s?o.disable(o.STENCIL_TEST):o.enable(o.STENCIL_TEST),e.setDepthSublayer(0),e.depthMask(!1),o.disable(o.DEPTH_TEST),i(e,t,n,r,!1,n.paint["icon-translate"],n.paint["icon-translate-anchor"],n.layout["icon-rotation-alignment"],n.layout["icon-rotation-alignment"],n.layout["icon-size"],n.paint["icon-halo-width"],n.paint["icon-halo-color"],n.paint["icon-halo-blur"],n.paint["icon-opacity"],n.paint["icon-color"]),i(e,t,n,r,!0,n.paint["text-translate"],n.paint["text-translate-anchor"],n.layout["text-rotation-alignment"],n.layout["text-pitch-alignment"],n.layout["text-size"],n.paint["text-halo-width"],n.paint["text-halo-color"],n.paint["text-halo-blur"],n.paint["text-opacity"],n.paint["text-color"]),o.enable(o.DEPTH_TEST),t.map.showCollisionBoxes&&u(e,t,n,r)}}function i(e,t,n,r,i,o,u,a,f,l,c,h,p,d,v){for(var m=0;m<r.length;m++){var g=t.getTile(r[m]),y=g.getBucket(n);if(y){var b=y.bufferGroups,w=i?b.glyph:b.icon;w.length&&(e.enableTileClippingMask(r[m]),s(e,n,r[m].posMatrix,g,y,w,i,i||y.sdfIcons,!i&&y.iconsNeedLinear,i?y.adjustedTextSize:y.adjustedIconSize,y.fontstack,o,u,a,f,l,c,h,p,d,v))}}}function s(e,t,n,r,i,s,u,f,c,h,p,d,v,m,g,y,b,w,E,S,x){var T,N,C,k=e.gl,L=e.transform,A="map"===m,O="map"===g,M=u?24:1,_=y/M;if(O?(N=a(r,1,e.transform.zoom)*_,C=1/Math.cos(L._pitch),T=[N,N]):(N=e.transform.altitude*_,C=1,T=[L.pixelsToGLUnits[0]*N,L.pixelsToGLUnits[1]*N]),u||e.style.sprite.loaded()){var D=e.useProgram(f?"sdf":"icon");if(k.uniformMatrix4fv(D.u_matrix,!1,e.translatePosMatrix(n,r,d,v)),k.uniform1i(D.u_rotate_with_map,A),k.uniform1i(D.u_pitch_with_map,O),k.uniform2fv(D.u_extrude_scale,T),k.activeTexture(k.TEXTURE0),k.uniform1i(D.u_texture,0),u){var P=p&&e.glyphSource.getGlyphAtlas(p);if(!P)return;P.updateTexture(k),k.uniform2f(D.u_texsize,P.width/4,P.height/4)}else{var H=e.options.rotating||e.options.zooming,B=1!==_||o.devicePixelRatio!==e.spriteAtlas.pixelRatio||c,j=O||e.transform.pitch;e.spriteAtlas.bind(k,f||H||B||j),k.uniform2f(D.u_texsize,e.spriteAtlas.width/4,e.spriteAtlas.height/4)}var F=Math.log(y/h)/Math.LN2||0;k.uniform1f(D.u_zoom,10*(e.transform.zoom-F)),k.activeTexture(k.TEXTURE1),e.frameHistory.bind(k),k.uniform1i(D.u_fadetexture,1);var I;if(f){var q=8,R=1.19,U=6,z=.105*M/y/o.devicePixelRatio;if(b){k.uniform1f(D.u_gamma,(E*R/_/q+z)*C),k.uniform4fv(D.u_color,w),k.uniform1f(D.u_opacity,S),k.uniform1f(D.u_buffer,(U-b/_)/q);for(var W=0;W<s.length;W++)I=s[W],I.vaos[t.id].bind(k,D,I.layoutVertexBuffer,I.elementBuffer),k.drawElements(k.TRIANGLES,3*I.elementBuffer.length,k.UNSIGNED_SHORT,0)}k.uniform1f(D.u_gamma,z*C),k.uniform4fv(D.u_color,x),k.uniform1f(D.u_opacity,S),k.uniform1f(D.u_buffer,.75),k.uniform1f(D.u_pitch,L.pitch/360*2*Math.PI),k.uniform1f(D.u_bearing,L.bearing/360*2*Math.PI),k.uniform1f(D.u_aspect_ratio,L.width/L.height);for(var X=0;X<s.length;X++)I=s[X],I.vaos[t.id].bind(k,D,I.layoutVertexBuffer,I.elementBuffer),k.drawElements(k.TRIANGLES,3*I.elementBuffer.length,k.UNSIGNED_SHORT,0)}else{k.uniform1f(D.u_opacity,S);for(var V=0;V<s.length;V++)I=s[V],I.vaos[t.id].bind(k,D,I.layoutVertexBuffer,I.elementBuffer),k.drawElements(k.TRIANGLES,3*I.elementBuffer.length,k.UNSIGNED_SHORT,0)}}}var o=e("../util/browser"),u=e("./draw_collision_debug"),a=e("../source/pixels_to_tile_units");t.exports=r},{"../source/pixels_to_tile_units":329,"../util/browser":392,"./draw_collision_debug":313}],319:[function(e,t,n){"use strict";function r(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.fadeDuration=300,this.previousZoom=0,this.firstFrame=!0}t.exports=r,r.prototype.record=function(e){var t=Date.now();this.firstFrame&&(t=0,this.firstFrame=!1),e=Math.floor(10*e);var n;if(e<this.previousZoom)for(n=e+1;n<=this.previousZoom;n++)this.changeTimes[n]=t,this.changeOpacities[n]=this.opacities[n];else for(n=e;n>this.previousZoom;n--)this.changeTimes[n]=t,this.changeOpacities[n]=this.opacities[n];for(n=0;n<256;n++){var r=t-this.changeTimes[n],i=r/this.fadeDuration*255;n<=e?this.opacities[n]=this.changeOpacities[n]+i:this.opacities[n]=this.changeOpacities[n]-i}this.changed=!0,this.previousZoom=e},r.prototype.bind=function(e){this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.changed&&(e.texSubImage2D(e.TEXTURE_2D,0,0,0,256,1,e.ALPHA,e.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,256,1,0,e.ALPHA,e.UNSIGNED_BYTE,this.array))}},{}],320:[function(e,t,n){"use strict";function r(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}}var i=e("../util/util");t.exports=r,r.prototype.setSprite=function(e){this.sprite=e},r.prototype.getDash=function(e,t){var n=e.join(",")+t;return this.positions[n]||(this.positions[n]=this.addDash(e,t)),this.positions[n]},r.prototype.addDash=function(e,t){var n=t?7:0,r=2*n+1,s=128;if(this.nextRow+r>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var o=0,u=0;u<e.length;u++)o+=e[u];for(var a=this.width/o,f=a/2,l=e.length%2===1,c=-n;c<=n;c++)for(var h=this.nextRow+n+c,p=this.width*h,d=l?-e[e.length-1]:0,v=e[0],m=1,g=0;g<this.width;g++){for(;v<g/a;)d=v,v+=e[m],l&&m===e.length-1&&(v+=e[0]),m++;var y,b=Math.abs(g-d*a),w=Math.abs(g-v*a),E=Math.min(b,w),S=m%2===1;if(t){var x=n?c/n*(f+1):0;if(S){var T=f-Math.abs(x);y=Math.sqrt(E*E+T*T)}else y=f-Math.sqrt(E*E+x*x)}else y=(S?1:-1)*E;this.data[3+4*(p+g)]=Math.max(0,Math.min(255,y+s))}var N={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:o};return this.nextRow+=r,this.dirty=!0,N},r.prototype.bind=function(e){this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))}},{"../util/util":408}],321:[function(e,t,n){"use strict";function r(e,t){this.gl=e,this.transform=t,this.reusableTextures={},this.preFbos={},this.frameHistory=new o,this.setup(),this.numSublayers=u.maxUnderzooming+u.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=e.getParameter(e.ALIASED_LINE_WIDTH_RANGE)}var i=e("../util/browser"),s=e("gl-matrix").mat4,o=e("./frame_history"),u=e("../source/source_cache"),a=e("../data/bucket").EXTENT,f=e("../source/pixels_to_tile_units"),l=e("../util/util"),c=e("../util/struct_array"),h=e("../data/buffer"),p=e("./vertex_array_object"),d=e("./draw_raster").RasterBoundsArray,v=e("./create_uniform_pragmas");t.exports=r,l.extend(r.prototype,e("./painter/use_program")),r.prototype.resize=function(e,t){var n=this.gl;this.width=e*i.devicePixelRatio,this.height=t*i.devicePixelRatio,n.viewport(0,0,this.width,this.height)},r.prototype.setup=function(){var e=this.gl;e.verbose=!0,e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enable(e.STENCIL_TEST),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),this._depthMask=!1,e.depthMask(!1);var t=this.PosArray=new c({members:[{name:"a_pos",type:"Int16",components:2}]}),n=new t;n.emplaceBack(0,0),n.emplaceBack(a,0),n.emplaceBack(0,a),n.emplaceBack(a,a),this.tileExtentBuffer=new h(n.serialize(),t.serialize(),h.BufferType.VERTEX),this.tileExtentVAO=new p,this.tileExtentPatternVAO=new p;var r=new t;r.emplaceBack(0,0),r.emplaceBack(a,0),r.emplaceBack(a,a),r.emplaceBack(0,a),r.emplaceBack(0,0),this.debugBuffer=new h(r.serialize(),t.serialize(),h.BufferType.VERTEX),this.debugVAO=new p;var i=new d;i.emplaceBack(0,0,0,0),i.emplaceBack(a,0,32767,0),i.emplaceBack(0,a,0,32767),i.emplaceBack(a,a,32767,32767),this.rasterBoundsBuffer=new h(i.serialize(),d.serialize(),h.BufferType.VERTEX),this.rasterBoundsVAO=new p},r.prototype.clearColor=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},r.prototype.clearStencil=function(){var e=this.gl;e.clearStencil(0),e.stencilMask(255),e.clear(e.STENCIL_BUFFER_BIT)},r.prototype.clearDepth=function(){var e=this.gl;e.clearDepth(1),this.depthMask(!0),e.clear(e.DEPTH_BUFFER_BIT)},r.prototype._renderTileClippingMasks=function(e){var t=this.gl;t.colorMask(!1,!1,!1,!1),this.depthMask(!1),t.disable(t.DEPTH_TEST),t.enable(t.STENCIL_TEST),t.stencilMask(248),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE);var n=1;this._tileClippingMaskIDs={};for(var r=0;r<e.length;r++){var i=e[r],s=this._tileClippingMaskIDs[i.id]=n++<<3;t.stencilFunc(t.ALWAYS,s,248);var o=v([{name:"u_color",components:4},{name:"u_opacity",components:1}]),u=this.useProgram("fill",[],o,o);t.uniformMatrix4fv(u.u_matrix,!1,i.posMatrix),this.tileExtentVAO.bind(t,u,this.tileExtentBuffer),t.drawArrays(t.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}t.stencilMask(0),t.colorMask(!0,!0,!0,!0),this.depthMask(!0),t.enable(t.DEPTH_TEST)},r.prototype.enableTileClippingMask=function(e){var t=this.gl;t.stencilFunc(t.EQUAL,this._tileClippingMaskIDs[e.id],248)},r.prototype.prepareBuffers=function(){},r.prototype.bindDefaultFramebuffer=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)};var m={symbol:e("./draw_symbol"),circle:e("./draw_circle"),line:e("./draw_line"),fill:e("./draw_fill"),raster:e("./draw_raster"),background:e("./draw_background"),debug:e("./draw_debug")};r.prototype.render=function(e,t){this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.spriteAtlas=e.spriteAtlas,this.spriteAtlas.setSprite(e.sprite),this.glyphSource=e.glyphSource,this.frameHistory.record(this.transform.zoom),this.prepareBuffers(),this.clearColor(),this.clearDepth(),this.showOverdrawInspector(t.showOverdrawInspector),this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass({isOpaquePass:!0}),this.renderPass({isOpaquePass:!1})},r.prototype.renderPass=function(e){var t=this.style._groups,n=e.isOpaquePass;this.currentLayer=n?this.style._order.length:-1;for(var r=0;r<t.length;r++){var i,s=t[n?t.length-1-r:r],o=this.style.sources[s.source],u=[];if(o){for(u=o.getVisibleCoordinates(),i=0;i<u.length;i++)u[i].posMatrix=this.transform.calculatePosMatrix(u[i],o.maxzoom);this.clearStencil(),o.prepare&&o.prepare(),o.isTileClipped&&this._renderTileClippingMasks(u)}for(n?(this._showOverdrawInspector||this.gl.disable(this.gl.BLEND),this.isOpaquePass=!0):(this.gl.enable(this.gl.BLEND),this.isOpaquePass=!1,u.reverse()),i=0;i<s.length;i++){var a=s[n?s.length-1-i:i];this.currentLayer+=n?-1:1,this.renderLayer(this,o,a,u)}o&&m.debug(this,o,u)}},r.prototype.depthMask=function(e){e!==this._depthMask&&(this._depthMask=e,this.gl.depthMask(e))},r.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,m[n.type](e,t,n,r))},r.prototype.setDepthSublayer=function(e){var t=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,n=t-1+this.depthRange;this.gl.depthRange(n,t)},r.prototype.translatePosMatrix=function(e,t,n,r){if(!n[0]&&!n[1])return e;if("viewport"===r){var i=Math.sin(-this.transform.angle),o=Math.cos(-this.transform.angle);n=[n[0]*o-n[1]*i,n[0]*i+n[1]*o]}var u=[f(t,n[0],this.transform.zoom),f(t,n[1],this.transform.zoom),0],a=new Float32Array(16);return s.translate(a,e,u),a},r.prototype.saveTexture=function(e){var t=this.reusableTextures[e.size];t?t.push(e):this.reusableTextures[e.size]=[e]},r.prototype.getTexture=function(e){var t=this.reusableTextures[e];return t&&t.length>0?t.pop():null},r.prototype.lineWidth=function(e){this.gl.lineWidth(l.clamp(e,this.lineWidthRange[0],this.lineWidthRange[1]))},r.prototype.showOverdrawInspector=function(e){if(e||this._showOverdrawInspector){this._showOverdrawInspector=e;var t=this.gl;if(e){t.blendFunc(t.CONSTANT_COLOR,t.ONE);var n=8,r=1/n;t.blendColor(r,r,r,0),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)}else t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}}},{"../data/bucket":295,"../data/buffer":300,"../source/pixels_to_tile_units":329,"../source/source_cache":333,"../util/browser":392,"../util/struct_array":406,"../util/util":408,"./create_uniform_pragmas":310,"./draw_background":311,"./draw_circle":312,"./draw_debug":314,"./draw_fill":315,"./draw_line":316,"./draw_raster":317,"./draw_symbol":318,"./frame_history":319,"./painter/use_program":322,"./vertex_array_object":323,"gl-matrix":166}],322:[function(e,t,n){"use strict";function r(e,t){return e.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(e,n,r,i,s){return t[n][s].replace(/{type}/g,i).replace(/{precision}/g,r)})}var i=e("assert"),s=e("../../util/util"),o=e("mapbox-gl-shaders"),u=o.util;t.exports._createProgram=function(e,t,n,f){for(var l=this.gl,c=l.createProgram(),h=o[e],p="#define MAPBOX_GL_JS;\n",d=0;d<t.length;d++)p+="#define "+t[d]+";\n";var v=l.createShader(l.FRAGMENT_SHADER);l.shaderSource(v,r(p+h.fragmentSource,f)),l.compileShader(v),i(l.getShaderParameter(v,l.COMPILE_STATUS),l.getShaderInfoLog(v)),l.attachShader(c,v);var m=l.createShader(l.VERTEX_SHADER);l.shaderSource(m,r(p+u+h.vertexSource,n)),l.compileShader(m),i(l.getShaderParameter(m,l.COMPILE_STATUS),l.getShaderInfoLog(m)),l.attachShader(c,m),l.linkProgram(c),i(l.getProgramParameter(c,l.LINK_STATUS),l.getProgramInfoLog(c));for(var g={},y=l.getProgramParameter(c,l.ACTIVE_ATTRIBUTES),b=0;b<y;b++){var w=l.getActiveAttrib(c,b);g[w.name]=l.getAttribLocation(c,w.name)}for(var E={},S=l.getProgramParameter(c,l.ACTIVE_UNIFORMS),x=0;x<S;x++){var T=l.getActiveUniform(c,x);E[T.name]=l.getUniformLocation(c,T.name)}return s.extend({program:c,definition:h,attributes:g,numAttributes:y},g,E)},t.exports._createProgramCached=function(e,t,n,r){this.cache=this.cache||{};var i=JSON.stringify({name:e,defines:t,vertexPragmas:n,fragmentPragmas:r});return this.cache[i]||(this.cache[i]=this._createProgram(e,t,n,r)),this.cache[i]},t.exports.useProgram=function(e,t,n,r){var i=this.gl;t=t||[],this._showOverdrawInspector&&(t=t.concat("OVERDRAW_INSPECTOR"));var s=this._createProgramCached(e,t,n,r),o=this.currentProgram;return o!==s&&(i.useProgram(s.program),this.currentProgram=s),s}},{"../../util/util":408,assert:36,"mapbox-gl-shaders":269}],323:[function(e,t,n){"use strict";function r(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundElementBuffer=null,this.vao=null}var i=e("assert");t.exports=r,r.prototype.bind=function(e,t,n,r,i){void 0===e.extVertexArrayObject&&(e.extVertexArrayObject=e.getExtension("OES_vertex_array_object"));var s=!this.vao||this.boundProgram!==t||this.boundVertexBuffer!==n||this.boundVertexBuffer2!==i||this.boundElementBuffer!==r;!e.extVertexArrayObject||s?this.freshBind(e,t,n,r,i):e.extVertexArrayObject.bindVertexArrayOES(this.vao)},r.prototype.freshBind=function(e,t,n,r,s){var o,u=t.numAttributes;if(e.extVertexArrayObject)this.vao&&this.destroy(e),this.vao=e.extVertexArrayObject.createVertexArrayOES(),e.extVertexArrayObject.bindVertexArrayOES(this.vao),o=0,this.boundProgram=t,this.boundVertexBuffer=n,this.boundVertexBuffer2=s,this.boundElementBuffer=r;else{o=e.currentNumAttributes||0;for(var a=u;a<o;a++)i(0!==a),e.disableVertexAttribArray(a)}for(var f=o;f<u;f++)e.enableVertexAttribArray(f);n.bind(e),n.setVertexAttribPointers(e,t),s&&(s.bind(e),s.setVertexAttribPointers(e,t)),r&&r.bind(e),e.currentNumAttributes=u},r.prototype.unbind=function(e){var t=e.extVertexArrayObject;t&&t.bindVertexArrayOES(null)},r.prototype.destroy=function(e){var t=e.extVertexArrayObject;t&&this.vao&&(t.deleteVertexArrayOES(this.vao),this.vao=null)}},{assert:36}],324:[function(e,t,n){"use strict";function r(e,t,n){t=t||{},this.id=e,this.dispatcher=n,this._data=t.data,void 0!==t.maxzoom&&(this.maxzoom=t.maxzoom),t.type&&(this.type=t.type);var r=u/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:t.cluster||!1,geojsonVtOptions:{buffer:(void 0!==t.buffer?t.buffer:128)*r,tolerance:(void 0!==t.tolerance?t.tolerance:.375)*r,extent:u,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:Math.min(t.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:u,radius:(t.clusterRadius||50)*r,log:!1}},t.workerOptions),this._updateWorkerData(function(e){return e?void this.fire("error",{error:e}):void this.fire("load")}.bind(this))}var i=e("../util/evented"),s=e("../util/util"),o=e("resolve-url"),u=e("../data/bucket").EXTENT;t.exports=r,r.prototype=s.inherit(i,{type:"geojson",minzoom:0,maxzoom:18,tileSize:512,isTileClipped:!0,reparseOverscaled:!0,onAdd:function(e){this.map=e},setData:function(e){return this._data=e,this._updateWorkerData(function(e){return e?this.fire("error",{error:e}):void this.fire("change")}.bind(this)),this},_updateWorkerData:function(e){var t=s.extend({},this.workerOptions),n=this._data;"string"==typeof n?t.url="undefined"!=typeof window?o(window.location.href,n):n:t.data=JSON.stringify(n),this.workerID=this.dispatcher.send(this.type+".loadData",t,function(t){this._loaded=!0,e(t)}.bind(this))},loadTile:function(e,t){var n=e.coord.z>this.maxzoom?Math.pow(2,e.coord.z-this.maxzoom):1,r={type:this.type,uid:e.uid,coord:e.coord,zoom:e.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:n,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send("load tile",r,function(n,r){if(e.unloadVectorData(this.map.painter),!e.aborted)return n?t(n):(e.loadVectorData(r,this.map.style),e.redoWhenDone&&(e.redoWhenDone=!1,e.redoPlacement(this)),t(null))}.bind(this),this.workerID)},abortTile:function(e){e.aborted=!0},unloadTile:function(e){e.unloadVectorData(this.map.painter),this.dispatcher.send("remove tile",{uid:e.uid,source:this.id},function(){},e.workerID)},serialize:function(){return{type:this.type,data:this._data}}})},{"../data/bucket":295,"../util/evented":400,"../util/util":408,"resolve-url":464}],325:[function(e,t,n){"use strict";function r(e,t,n){n&&(this.loadGeoJSON=n),c.call(this,e,t)}var i=e("../util/util"),s=e("../util/ajax"),o=e("geojson-rewind"),u=e("./geojson_wrapper"),a=e("vt-pbf"),f=e("supercluster"),l=e("geojson-vt"),c=e("./vector_tile_worker_source");t.exports=r,r.prototype=i.inherit(c,{_geoJSONIndexes:{},loadVectorData:function(e,t){var n=e.source,r=e.coord;if(!this._geoJSONIndexes[n])return t(null,null);var i=this._geoJSONIndexes[n].getTile(Math.min(r.z,e.maxZoom),r.x,r.y);if(!i)return t(null,null);var s=new u(i.features);s.name="_geojsonTileLayer";var o=a({layers:{_geojsonTileLayer:s}});0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{tile:s,rawTileData:o.buffer})},loadData:function(e,t){var n=function(n,r){return n?t(n):"object"!=typeof r?t(new Error("Input data is not a valid GeoJSON object.")):(o(r,!0),void this._indexData(r,e,function(n,r){return n?t(n):(this._geoJSONIndexes[e.source]=r,void t(null))}.bind(this)))}.bind(this);this.loadGeoJSON(e,n)},loadGeoJSON:function(e,t){if(e.url)s.getJSON(e.url,t);else{if("string"!=typeof e.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(e.data))}catch(e){return t(new Error("Input data is not a valid GeoJSON object."))}}},_indexData:function(e,t,n){try{t.cluster?n(null,f(t.superclusterOptions).load(e.features)):n(null,l(e,t.geojsonVtOptions))}catch(e){return n(e)}}})},{"../util/ajax":391,"../util/util":408,"./geojson_wrapper":326,"./vector_tile_worker_source":337,"geojson-rewind":112,"geojson-vt":116,supercluster:491,"vt-pbf":517}],326:[function(e,t,n){"use strict";function r(e){this.features=e,this.length=e.length,this.extent=u}function i(e){if(this.type=e.type,1===e.type){this.rawGeometry=[];for(var t=0;t<e.geometry.length;t++)this.rawGeometry.push([e.geometry[t]])}else this.rawGeometry=e.geometry;this.properties=e.tags,this.extent=u}var s=e("point-geometry"),o=e("vector-tile").VectorTileFeature,u=e("../data/bucket").EXTENT;t.exports=r,r.prototype.feature=function(e){return new i(this.features[e])},i.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new s(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,s=0;s<e.length;s++)for(var o=e[s],u=0;u<o.length;u++){var a=o[u];t=Math.min(t,a.x),n=Math.max(n,a.x),r=Math.min(r,a.y),i=Math.max(i,a.y)}return[t,r,n,i]},i.prototype.toGeoJSON=o.prototype.toGeoJSON},{"../data/bucket":295,"point-geometry":448,"vector-tile":511}],327:[function(e,t,n){"use strict";function r(e,t,n){this.id=e,this.dispatcher=n,this.url=t.url,this.coordinates=t.coordinates,f.getImage(t.url,function(e,n){return e?this.fire("error",{error:e}):(this.image=n,this.image.addEventListener("load",function(){this.map._rerender()}.bind(this)),this._loaded=!0,this.fire("load"),void (this.map&&this.setCoordinates(t.coordinates)))}.bind(this))}var i=e("../util/util"),s=e("./tile_coord"),o=e("../geo/lng_lat"),u=e("point-geometry"),a=e("../util/evented"),f=e("../util/ajax"),l=e("../data/bucket").EXTENT,c=e("../render/draw_raster").RasterBoundsArray,h=e("../data/buffer"),p=e("../render/vertex_array_object");t.exports=r,r.prototype=i.inherit(a,{minzoom:0,maxzoom:22,tileSize:512,onAdd:function(e){this.map=e,this.image&&this.setCoordinates(this.coordinates)},setCoordinates:function(e){this.coordinates=e;var t=this.map,n=e.map(function(e){return t.transform.locationCoordinate(o.convert(e)).zoomTo(0)}),r=this.centerCoord=i.getCoordinatesCenter(n);return r.column=Math.round(r.column),r.row=Math.round(r.row),this.minzoom=this.maxzoom=r.zoom,this._coord=new s(r.zoom,r.column,r.row),this._tileCoords=n.map(function(e){var t=e.zoomTo(r.zoom);return new u(Math.round((t.column-r.column)*l),Math.round((t.row-r.row)*l))}),this.fire("change"),this},_setTile:function(e){this._prepared=!1,this.tile=e;var t=32767,n=new c;n.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),n.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,t,0),n.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,t),n.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,t,t),this.tile.buckets={},this.tile.boundsBuffer=new h(n.serialize(),c.serialize(),h.BufferType.VERTEX),this.tile.boundsVAO=new p,this.tile.state="loaded"},prepare:function(){if(this._loaded&&this.image&&this.image.complete&&this.tile){var e=this.map.painter,t=e.gl;this._prepared?(t.bindTexture(t.TEXTURE_2D,this.tile.texture),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.image)):(this.tile.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.tile.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.image))}},loadTile:function(e,t){this._coord&&this._coord.toString()===e.coord.toString()?(this._setTile(e),t(null)):(e.state="errored",t(null))},serialize:function(){return{type:"image",urls:this.url,coordinates:this.coordinates}}})},{"../data/bucket":295,"../data/buffer":300,"../geo/lng_lat":305,"../render/draw_raster":317,"../render/vertex_array_object":323,"../util/ajax":391,"../util/evented":400,"../util/util":408,"./tile_coord":335,"point-geometry":448}],328:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../util/ajax"),s=e("../util/browser"),o=e("../util/mapbox").normalizeSourceURL;t.exports=function(e,t){var n=function(e,n){if(e)return t(e);var i=r.pick(n,["tiles","minzoom","maxzoom","attribution"]);n.vector_layers&&(i.vectorLayers=n.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(e){return e.id})),t(null,i)};e.url?i.getJSON(o(e.url),n):s.frame(n.bind(null,null,e))}},{"../util/ajax":391,"../util/browser":392,"../util/mapbox":405,"../util/util":408}],329:[function(e,t,n){"use strict";var r=e("../data/bucket");t.exports=function(e,t,n){return t*(r.EXTENT/(e.tileSize*Math.pow(2,n-e.coord.z)))}},{"../data/bucket":295}],330:[function(e,t,n){"use strict";function r(e,t){var n=e.coord,r=t.coord;return n.z-r.z||n.y-r.y||n.w-r.w||n.x-r.x}function i(e){for(var t=e[0]||{},n=1;n<e.length;n++){var r=e[n];for(var i in r){var s=r[i],o=t[i];if(void 0===o)o=t[i]=s;else for(var u=0;u<s.length;u++)o.push(s[u])}}return t}var s=e("./tile_coord");n.rendered=function(e,t,n,s,o,u){var a=e.tilesIn(n);a.sort(r);for(var f=[],l=0;l<a.length;l++){var c=a[l];c.tile.featureIndex&&f.push(c.tile.featureIndex.query({queryGeometry:c.queryGeometry,scale:c.scale,tileSize:c.tile.tileSize,bearing:u,params:s},t))}return i(f)},n.source=function(e,t){for(var n=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],i={},o=0;o<n.length;o++){var u=n[o],f=(new s(Math.min(u.sourceMaxZoom,u.coord.z),u.coord.x,u.coord.y,0)).id;i[f]||(i[f]=!0,u.querySourceFeatures(r,t))}return r}},{"./tile_coord":335}],331:[function(e,t,n){"use strict";function r(e,t,n){this.id=e,this.dispatcher=n,i.extend(this,i.pick(t,["url","scheme","tileSize"])),u(t,function(e,t){return e?this.fire("error",e):(i.extend(this,t),void this.fire("load"))}.bind(this))}var i=e("../util/util"),s=e("../util/ajax"),o=e("../util/evented"),u=e("./load_tilejson"),a=e("../util/mapbox").normalizeTileURL;t.exports=r,r.prototype=i.inherit(o,{minzoom:0,maxzoom:22,roundZoom:!0,scheme:"xyz",tileSize:512,_loaded:!1,onAdd:function(e){this.map=e},serialize:function(){return{type:"raster",url:this.url,tileSize:this.tileSize}},loadTile:function(e,t){function n(n,r){if(delete e.request,!e.aborted){if(n)return t(n);var i=this.map.painter.gl;e.texture=this.map.painter.getTexture(r.width),e.texture?(i.bindTexture(i.TEXTURE_2D,e.texture),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,r)):(e.texture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,e.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,r),e.texture.size=r.width),i.generateMipmap(i.TEXTURE_2D),this.map.animationLoop.set(this.map.style.rasterFadeDuration),e.state="loaded",t(null)}}var r=a(e.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);e.request=s.getImage(r,n.bind(this))},abortTile:function(e){e.request&&(e.request.abort(),delete e.request)},unloadTile:function(e){e.texture&&this.map.painter.saveTexture(e.texture)}})},{"../util/ajax":391,"../util/evented":400,"../util/mapbox":405,"../util/util":408,"./load_tilejson":328}],332:[function(e,t,n){"use strict";var r=e("../util/util"),i={vector:e("../source/vector_tile_source"),raster:e("../source/raster_tile_source"),geojson:e("../source/geojson_source"),video:e("../source/video_source"),image:e("../source/image_source")};n.create=function(e,t,n){if(t=new i[t.type](e,t,n),t.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+t.id);return r.bindAll(["load","abort","unload","serialize","prepare"],t),t},n.getType=function(e){return i[e]},n.setType=function(e,t){i[e]=t}},{"../source/geojson_source":324,"../source/image_source":327,"../source/raster_tile_source":331,"../source/vector_tile_source":336,"../source/video_source":338,"../util/util":408}],333:[function(e,t,n){"use strict";function r(e,t,n){this.id=e,this.dispatcher=n;var r=this._source=o.create(e,t,n).on("load",function(){this.map&&this._source.onAdd&&this._source.onAdd(this.map),this._sourceLoaded=!0,this.tileSize=r.tileSize,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,this.roundZoom=r.roundZoom,this.reparseOverscaled=r.reparseOverscaled,this.isTileClipped=r.isTileClipped,this.attribution=r.attribution,this.vectorLayerIds=r.vectorLayerIds,this.fire("load")}.bind(this)).on("error",function(e){this._sourceErrored=!0,this.fire("error",e)}.bind(this)).on("change",function(){this.reload(),this.transform&&this.update(this.transform,this.map&&this.map.style.rasterFadeDuration),this.fire("change")}.bind(this));this._tiles={},this._cache=new l(0,this.unloadTile.bind(this)),this._isIdRenderable=this._isIdRenderable.bind(this)}function i(e,t,n){var r=n.zoomTo(Math.min(e.z,t));return{x:(r.column-(e.x+e.w*Math.pow(2,e.z)))*p,y:(r.row-e.y)*p}}function s(e,t){return e%32-t%32}var o=e("./source"),u=e("./tile"),a=e("../util/evented"),f=e("./tile_coord"),l=e("../util/lru_cache"),c=e("../geo/coordinate"),h=e("../util/util"),p=e("../data/bucket").EXTENT;t.exports=r,r.maxOverzooming=10,r.maxUnderzooming=3,r.prototype=h.inherit(a,{onAdd:function(e){this.map=e,this._source&&this._source.onAdd&&this._source.onAdd(e)},loaded:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0},getSource:function(){return this._source},loadTile:function(e,t){return this._source.loadTile(e,t)},unloadTile:function(e){if(this._source.unloadTile)return this._source.unloadTile(e)},abortTile:function(e){if(this._source.abortTile)return this._source.abortTile(e)},serialize:function(){return this._source.serialize()},prepare:function(){if(this._sourceLoaded&&this._source.prepare)return this._source.prepare()},getIds:function(){return Object.keys(this._tiles).map(Number).sort(s)},getRenderableIds:function(){return this.getIds().filter(this._isIdRenderable)},_isIdRenderable:function(e){return this._tiles[e].isRenderable()&&!this._coveredTiles[e]},reload:function(){this._cache.reset();for(var e in this._tiles){var t=this._tiles[e];"loading"!==t.state&&(t.state="reloading"),this.loadTile(this._tiles[e],this._tileLoaded.bind(this,this._tiles[e]))}},_tileLoaded:function(e,t){return t?(e.state="errored",this.fire("tile.error",{tile:e,error:t}),void this._source.fire("tile.error",{tile:e,error:t})):(e.source=this,e.timeAdded=(new Date).getTime(),this.fire("tile.load",{tile:e}),void this._source.fire("tile.load",{tile:e}))},getTile:function(e){return this.getTileByID(e.id)},getTileByID:function(e){return this._tiles[e]},getZoom:function(e){return e.zoom+e.scaleZoom(e.tileSize/this.tileSize)},findLoadedChildren:function(e,t,n){var r=!1;for(var i in this._tiles){var s=this._tiles[i];if(!(n[i]||!s.isRenderable()||s.coord.z<=e.z||s.coord.z>t)){var o=Math.pow(2,Math.min(s.coord.z,this.maxzoom)-Math.min(e.z,this.maxzoom));if(Math.floor(s.coord.x/o)===e.x&&Math.floor(s.coord.y/o)===e.y)for(n[i]=!0,r=!0;s&&s.coord.z-1>e.z;){var u=s.coord.parent(this.maxzoom).id;s=this._tiles[u],s&&s.isRenderable()&&(delete n[i],n[u]=!0)}}}return r},findLoadedParent:function(e,t,n){for(var r=e.z-1;r>=t;r--){e=e.parent(this.maxzoom);var i=this._tiles[e.id];if(i&&i.isRenderable())return n[e.id]=!0,i;if(this._cache.has(e.id))return this.addTile(e),n[e.id]=!0,this._tiles[e.id]}},updateCacheSize:function(e){var t=Math.ceil(e.width/e.tileSize)+1,n=Math.ceil(e.height/e.tileSize)+1,r=t*n,i=5;this._cache.setMaxSize(Math.floor(r*i))},update:function(e,t){if(this._sourceLoaded){var n,i,s;this.updateCacheSize(e);var o=(this.roundZoom?Math.round:Math.floor)(this.getZoom(e)),u=Math.max(o-r.maxOverzooming,this.minzoom),a=Math.max(o+r.maxUnderzooming,this.minzoom),l={},c=(new Date).getTime();this._coveredTiles={};var p=this.used?e.coveringTiles(this._source):[];for(n=0;n<p.length;n++)i=p[n],s=this.addTile(i),l[i.id]=!0,s.isRenderable()||this.findLoadedChildren(i,a,l)||this.findLoadedParent(i,u,l);for(var d={},v=Object.keys(l),m=0;m<v.length;m++){var g=v[m];i=f.fromID(g),s=this._tiles[g],s&&s.timeAdded>c-(t||0)&&(this.findLoadedChildren(i,a,l)&&(l[g]=!0),this.findLoadedParent(i,u,d))}var y;for(y in d)l[y]||(this._coveredTiles[y]=!0);for(y in d)l[y]=!0;var b=h.keysDifference(this._tiles,l);for(n=0;n<b.length;n++)this.removeTile(+b[n]);this.transform=e}},addTile:function(e){var t=this._tiles[e.id];if(t)return t;var n=e.wrapped();if(t=this._tiles[n.id],t||(t=this._cache.get(n.id),t&&this._redoPlacement&&this._redoPlacement(t)),!t){var r=e.z,i=r>this.maxzoom?Math.pow(2,r-this.maxzoom):1;t=new u(n,this.tileSize*i,this.maxzoom),this.loadTile(t,this._tileLoaded.bind(this,t))}return t.uses++,this._tiles[e.id]=t,this.fire("tile.add",{tile:t}),this._source.fire("tile.add",{tile:t}),t},removeTile:function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this.fire("tile.remove",{tile:t}),this._source.fire("tile.remove",{tile:t}),t.uses>0||(t.isRenderable()?this._cache.add(t.coord.wrapped().id,t):(t.aborted=!0,this.abortTile(t),this.unloadTile(t))))},clearTiles:function(){for(var e in this._tiles)this.removeTile(e);this._cache.reset()},tilesIn:function(e){for(var t={},n=this.getIds(),r=1/0,s=1/0,o=-1/0,u=-1/0,a=e[0].zoom,l=0;l<e.length;l++){var h=e[l];r=Math.min(r,h.column),s=Math.min(s,h.row),o=Math.max(o,h.column),u=Math.max(u,h.row)}for(var v=0;v<n.length;v++){var m=this._tiles[n[v]],g=f.fromID(n[v]),y=[i(g,m.sourceMaxZoom,new c(r,s,a)),i(g,m.sourceMaxZoom,new c(o,u,a))];if(y[0].x<p&&y[0].y<p&&y[1].x>=0&&y[1].y>=0){for(var b=[],w=0;w<e.length;w++)b.push(i(g,m.sourceMaxZoom,e[w]));var E=t[m.coord.id];void 0===E&&(E=t[m.coord.id]={tile:m,coord:g,queryGeometry:[],scale:Math.pow(2,this.transform.zoom-m.coord.z)}),E.queryGeometry.push(b)}}var S=[];for(var x in t)S.push(t[x]);return S},redoPlacement:function(){for(var e=this.getIds(),t=0;t<e.length;t++){var n=this.getTileByID(e[t]);n.redoPlacement(this)}},getVisibleCoordinates:function(){return this.getRenderableIds().map(f.fromID)}})},{"../data/bucket":295,"../geo/coordinate":304,"../util/evented":400,"../util/lru_cache":404,"../util/util":408,"./source":332,"./tile":334,"./tile_coord":335}],334:[function(e,t,n){"use strict";function r(e,t,n){this.coord=e,this.uid=s.uniqueId(),this.uses=0,this.tileSize=t,this.sourceMaxZoom=n,this.buckets={},this.state="loading"}function i(e,t){if(t){for(var n={},r=0;r<e.length;r++){var i=t.getLayer(e[r].layerId);if(i){var u=o.create(s.extend({layer:i,childLayers:e[r].childLayerIds.map(t.getLayer.bind(t)).filter(function(e){return e})},e[r]));n[u.id]=u}}return n}}var s=e("../util/util"),o=e("../data/bucket"),u=e("../data/feature_index"),a=e("vector-tile"),f=e("pbf"),l=e("../util/vectortile_to_geojson"),c=e("feature-filter"),h=e("../symbol/collision_tile"),p=e("../symbol/collision_box"),d=e("../symbol/symbol_instances"),v=e("../symbol/symbol_quads");t.exports=r,r.prototype={loadVectorData:function(e,t){this.state="loaded",e&&(this.collisionBoxArray=new p(e.collisionBoxArray),this.collisionTile=new h(e.collisionTile,this.collisionBoxArray),this.symbolInstancesArray=new d(e.symbolInstancesArray),this.symbolQuadsArray=new v(e.symbolQuadsArray),this.featureIndex=new u(e.featureIndex,e.rawTileData,this.collisionTile),this.rawTileData=e.rawTileData,this.buckets=i(e.buckets,t))},reloadSymbolData:function(e,t,n){if("unloaded"!==this.state){this.collisionTile=new h(e.collisionTile,this.collisionBoxArray),this.featureIndex.setCollisionTile(this.collisionTile);for(var r in this.buckets){var o=this.buckets[r];"symbol"===o.type&&(o.destroy(t.gl),delete this.buckets[r])}s.extend(this.buckets,i(e.buckets,n))}},unloadVectorData:function(e){for(var t in this.buckets){var n=this.buckets[t];n.destroy(e.gl)}this.collisionBoxArray=null,this.symbolQuadsArray=null,this.symbolInstancesArray=null,this.collisionTile=null,this.featureIndex=null,this.rawTileData=null,this.buckets=null,this.state="unloaded"},redoPlacement:function(e){function t(t,n){this.reloadSymbolData(n,e.map.painter,e.map.style),e.fire("tile.load",{tile:this}),this.state="loaded",this.redoWhenDone&&(this.redoPlacement(e),this.redoWhenDone=!1)}return"loaded"!==this.state||"reloading"===this.state?void (this.redoWhenDone=!0):(this.state="reloading",void e.dispatcher.send("redo placement",{uid:this.uid,source:e.id,angle:e.map.transform.angle,pitch:e.map.transform.pitch,showCollisionBoxes:e.map.showCollisionBoxes},t.bind(this),this.workerID))},getBucket:function(e){return this.buckets&&this.buckets[e.ref||e.id]},querySourceFeatures:function(e,t){if(this.rawTileData){this.vtLayers||(this.vtLayers=(new a.VectorTile(new f(new Uint8Array(this.rawTileData)))).layers);var n=this.vtLayers._geojsonTileLayer||this.vtLayers[t.sourceLayer];if(n)for(var r=c(t.filter),i={z:this.coord.z,x:this.coord.x,y:this.coord.y},s=0;s<n.length;s++){var o=n.feature(s);if(r(o)){var u=new l(o,this.coord.z,this.coord.x,this.coord.y);u.tile=i,e.push(u)}}}},isRenderable:function(){return"loaded"===this.state||"reloading"===this.state}}},{"../data/bucket":295,"../data/feature_index":302,"../symbol/collision_box":360,"../symbol/collision_tile":362,"../symbol/symbol_instances":371,"../symbol/symbol_quads":372,"../util/util":408,"../util/vectortile_to_geojson":409,"feature-filter":107,pbf:442,"vector-tile":511}],335:[function(e,t,n){"use strict";function r(e,t,n,r){a(!isNaN(e)&&e>=0&&e%1===0),a(!isNaN(t)&&t>=0&&t%1===0),a(!isNaN(n)&&n>=0&&n%1===0),isNaN(r)&&(r=0),this.z=+e,this.x=+t,this.y=+n,this.w=+r,r*=2,r<0&&(r=r*-1-1);var i=1<<this.z;this.id=32*(i*i*r+i*this.y+this.x)+this.z,this.posMatrix=null}function i(e,t,n){for(var r,i="",s=e;s>0;s--)r=1<<s-1,i+=(t&r?1:0)+(n&r?2:0);return i}function s(e,t){if(e.row>t.row){var n=e;e=t,t=n}return{x0:e.column,y0:e.row,x1:t.column,y1:t.row,dx:t.column-e.column,dy:t.row-e.row}}function o(e,t,n,r,i){var s=Math.max(n,Math.floor(t.y0)),o=Math.min(r,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var u=e;e=t,t=u}for(var a=e.dx/e.dy,f=t.dx/t.dy,l=e.dx>0,c=t.dx<0,h=s;h<o;h++){var p=a*Math.max(0,Math.min(e.dy,h+l-e.y0))+e.x0,d=f*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0;i(Math.floor(d),Math.ceil(p),h)}}function u(e,t,n,r,i,u){var a,f=s(e,t),l=s(t,n),c=s(n,e);f.dy>l.dy&&(a=f,f=l,l=a),f.dy>c.dy&&(a=f,f=c,c=a),l.dy>c.dy&&(a=l,l=c,c=a),f.dy&&o(c,f,r,i,u),l.dy&&o(c,l,r,i,u)}var a=e("assert"),f=e("whoots-js"),l=e("../geo/coordinate");t.exports=r,r.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},r.prototype.toCoordinate=function(e){var t=Math.min(this.z,e),n=Math.pow(2,t),r=this.y,i=this.x+n*this.w;return new l(i,r,t)},r.fromID=function(e){var t=e%32,n=1<<t,i=(e-t)/32,s=i%n,o=(i-s)/n%n,u=Math.floor(i/(n*n));return u%2!==0&&(u=u*-1-1),u/=2,new r(t,s,o,u)},r.prototype.url=function(e,t,n){var r=f.getTileBBox(this.x,this.y,this.z),s=i(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,t||this.z)).replace("{x}",this.x).replace("{y}","tms"===n?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",s).replace("{bbox-epsg-3857}",r)},r.prototype.parent=function(e){return 0===this.z?null:this.z>e?new r(this.z-1,this.x,this.y,this.w):new r(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},r.prototype.wrapped=function(){return new r(this.z,this.x,this.y,0)},r.prototype.children=function(e){if(this.z>=e)return[new r(this.z+1,this.x,this.y,this.w)];var t=this.z+1,n=2*this.x,i=2*this.y;return[new r(t,n,i,this.w),new r(t,n+1,i,this.w),new r(t,n,i+1,this.w),new r(t,n+1,i+1,this.w)]},r.cover=function(e,t,n){function i(e,t,i){var u,a,f;if(i>=0&&i<=s)for(u=e;u<t;u++)a=(u%s+s)%s,f=new r(n,a,i,Math.floor(u/s)),o[f.id]=f}var s=1<<e,o={};return u(t[0],t[1],t[2],0,s,i),u(t[2],t[3],t[0],0,s,i),Object.keys(o).map(function(e){return o[e]})}},{"../geo/coordinate":304,assert:36,"whoots-js":527}],336:[function(e,t,n){"use strict";function r(e,t,n){if(this.id=e,this.dispatcher=n,s.extend(this,s.pick(t,["url","scheme","tileSize"])),this._options=s.extend({type:"vector"},t),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");o(t,function(e,t){return e?void this.fire("error",e):(s.extend(this,t),void this.fire("load"))}.bind(this))}var i=e("../util/evented"),s=e("../util/util"),o=e("./load_tilejson"),u=e("../util/mapbox").normalizeTileURL;t.exports=r,r.prototype=s.inherit(i,{minzoom:0,maxzoom:22,scheme:"xyz",tileSize:512,reparseOverscaled:!0,isTileClipped:!0,onAdd:function(e){this.map=e},serialize:function(){return s.extend({},this._options)},loadTile:function(e,t){function n(n,r){if(!e.aborted){if(n)return t(n);e.loadVectorData(r,this.map.style),e.redoWhenDone&&(e.redoWhenDone=!1,e.redoPlacement(this)),t(null),e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)}}var r=e.coord.z>this.maxzoom?Math.pow(2,e.coord.z-this.maxzoom):1,i={url:u(e.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:e.uid,coord:e.coord,zoom:e.coord.z,tileSize:this.tileSize*r,source:this.id,overscaling:r,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID?"loading"===e.state?e.reloadCallback=t:(i.rawTileData=e.rawTileData,this.dispatcher.send("reload tile",i,n.bind(this),e.workerID)):e.workerID=this.dispatcher.send("load tile",i,n.bind(this))},abortTile:function(e){this.dispatcher.send("abort tile",{uid:e.uid,source:this.id},null,e.workerID)},unloadTile:function(e){e.unloadVectorData(this.map.painter),this.dispatcher.send("remove tile",{uid:e.uid,source:this.id},null,e.workerID)}})},{"../util/evented":400,"../util/mapbox":405,"../util/util":408,"./load_tilejson":328}],337:[function(e,t,n){"use strict";function r(e,t,n){this.actor=e,this.styleLayers=t,n&&(this.loadVectorData=n),this.loading={},this.loaded={}}var i=e("../util/ajax"),s=e("vector-tile"),o=e("pbf"),u=e("./worker_tile");t.exports=r,r.prototype={loadTile:function(e,t){function n(e,n){return delete this.loading[r][i],e?t(e):n?(s.data=n.tile,s.parse(s.data,this.styleLayers.getLayerFamilies(),this.actor,n.rawTileData,t),this.loaded[r]=this.loaded[r]||{},void (this.loaded[r][i]=s)):t(null,null)}var r=e.source,i=e.uid;this.loading[r]||(this.loading[r]={});var s=this.loading[r][i]=new u(e);s.abort=this.loadVectorData(e,n.bind(this))},reloadTile:function(e,t){var n=this.loaded[e.source],r=e.uid;if(n&&n[r]){var i=n[r];i.parse(i.data,this.styleLayers.getLayerFamilies(),this.actor,e.rawTileData,t)}},abortTile:function(e){var t=this.loading[e.source],n=e.uid;t&&t[n]&&t[n].abort&&(t[n].abort(),delete t[n])},removeTile:function(e){var t=this.loaded[e.source],n=e.uid;t&&t[n]&&delete t[n]},loadVectorData:function(e,t){function n(e,n){if(e)return t(e);var r=new s.VectorTile(new o(new Uint8Array(n)));t(e,{tile:r,rawTileData:n})}var r=i.getArrayBuffer(e.url,n.bind(this));return function(){r.abort()}},redoPlacement:function(e,t){var n=this.loaded[e.source],r=this.loading[e.source],i=e.uid;if(n&&n[i]){var s=n[i],o=s.redoPlacement(e.angle,e.pitch,e.showCollisionBoxes);o.result&&t(null,o.result,o.transferables)}else r&&r[i]&&(r[i].angle=e.angle)}}},{"../util/ajax":391,"./worker_tile":340,pbf:442,"vector-tile":511}],338:[function(e,t,n){"use strict";function r(e,t){this.id=e,this.urls=t.urls,this.coordinates=t.coordinates,f.getVideo(t.urls,function(e,n){if(e)return this.fire("error",{error:e});this.video=n,this.video.loop=!0;var r;this.video.addEventListener("playing",function(){r=this.map.style.animationLoop.set(1/0),this.map._rerender()}.bind(this)),this.video.addEventListener("pause",function(){this.map.style.animationLoop.cancel(r)}.bind(this)),this.map&&(this.video.play(),this.setCoordinates(t.coordinates)),this.fire("load")}.bind(this))}var i=e("../util/util"),s=e("./tile_coord"),o=e("../geo/lng_lat"),u=e("point-geometry"),a=e("../util/evented"),f=e("../util/ajax"),l=e("../data/bucket").EXTENT,c=e("../render/draw_raster").RasterBoundsArray,h=e("../data/buffer"),p=e("../render/vertex_array_object");t.exports=r,r.prototype=i.inherit(a,{minzoom:0,maxzoom:22,tileSize:512,roundZoom:!0,getVideo:function(){return this.video},onAdd:function(e){this.map||(this.map=e,this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},setCoordinates:function(e){this.coordinates=e;var t=this.map,n=e.map(function(e){return t.transform.locationCoordinate(o.convert(e)).zoomTo(0)}),r=this.centerCoord=i.getCoordinatesCenter(n);return r.column=Math.round(r.column),r.row=Math.round(r.row),this.minzoom=this.maxzoom=r.zoom,this._coord=new s(r.zoom,r.column,r.row),this._tileCoords=n.map(function(e){var t=e.zoomTo(r.zoom);return new u(Math.round((t.column-r.column)*l),Math.round((t.row-r.row)*l))}),this.fire("change"),this},_setTile:function(e){this._prepared=!1,this.tile=e;var t=32767,n=new c;n.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),n.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,t,0),n.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,t),n.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,t,t),this.tile.buckets={},this.tile.boundsBuffer=new h(n.serialize(),c.serialize(),h.BufferType.VERTEX),this.tile.boundsVAO=new p,this.tile.state="loaded"},prepare:function(){if(!(this.video.readyState<2)&&this.tile){var e=this.map.painter.gl;this._prepared?(e.bindTexture(e.TEXTURE_2D,this.tile.texture),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this.video)):(this._prepared=!0,this.tile.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.tile.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.video)),this._currentTime=this.video.currentTime}},loadTile:function(e,t){this._coord&&this._coord.toString()===e.coord.toString()?(this._setTile(e),t(null)):(e.state="errored",t(null))},serialize:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}})},{"../data/bucket":295,"../data/buffer":300,"../geo/lng_lat":305,"../render/draw_raster":317,"../render/vertex_array_object":323,"../util/ajax":391,"../util/evented":400,"../util/util":408,"./tile_coord":335,"point-geometry":448}],339:[function(e,t,n){"use strict";function r(e){this.self=e,this.actor=new s(e,this);var t={getLayers:function(){return this.layers}.bind(this),getLayerFamilies:function(){return this.layerFamilies}.bind(this)};this.workerSources={vector:new a(this.actor,t),geojson:new f(this.actor,t)},this.self.registerWorkerSource=function(e,n){if(this.workerSources[e])throw new Error('Worker source with name "'+e+'" already registered.');this.workerSources[e]=new n(this.actor,t)}.bind(this)}function i(e){var t={};for(var n in e){var r=e[n],i=r.ref||r.id,s=e[i];s.layout&&"none"===s.layout.visibility||(t[i]=t[i]||[],n===i?t[i].unshift(r):t[i].push(r))}return t}var s=e("../util/actor"),o=e("../style/style_layer"),u=e("../util/util"),a=e("./vector_tile_worker_source"),f=e("./geojson_worker_source");t.exports=function(e){return new r(e)},u.extend(r.prototype,{"set layers":function(e){function t(e){var t=o.create(e,e.ref&&n.layers[e.ref]);t.updatePaintTransitions({},{transition:!1}),n.layers[t.id]=t}this.layers={};for(var n=this,r=[],s=0;s<e.length;s++){var u=e[s];"fill"!==u.type&&"line"!==u.type&&"circle"!==u.type&&"symbol"!==u.type||(u.ref?r.push(s):t(u))}for(var a=0;a<r.length;a++)t(e[r[a]]);this.layerFamilies=i(this.layers)},"update layers":function(e){function t(e){var t=s.layers[e.ref];s.layers[e.id]?s.layers[e.id].set(e,t):s.layers[e.id]=o.create(e,t),s.layers[e.id].updatePaintTransitions({},{transition:!1})}var n,r,s=this;for(n in e)r=e[n],r.ref&&t(r);for(n in e)r=e[n],r.ref||t(r);this.layerFamilies=i(this.layers)},"load tile":function(e,t){var n=e.type||"vector";this.workerSources[n].loadTile(e,t)},"reload tile":function(e,t){var n=e.type||"vector";this.workerSources[n].reloadTile(e,t)},"abort tile":function(e){var t=e.type||"vector";this.workerSources[t].abortTile(e)},"remove tile":function(e){var t=e.type||"vector";this.workerSources[t].removeTile(e)},"redo placement":function(e,t){var n=e.type||"vector";this.workerSources[n].redoPlacement(e,t)},"load worker source":function(e,t){try{this.self.importScripts(e.url),t()}catch(e){t(e)}}})},{"../style/style_layer":347,"../util/actor":390,"../util/util":408,"./geojson_worker_source":325,"./vector_tile_worker_source":337}],340:[function(e,t,n){"use strict";function r(e){this.coord=e.coord,this.uid=e.uid,this.zoom=e.zoom,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=e.overscaling,this.angle=e.angle,this.pitch=e.pitch,this.showCollisionBoxes=e.showCollisionBoxes}function i(e){return!e.isEmpty()}function s(e){return e.serialize()}function o(e){var t=[];for(var n in e)e[n].getTransferables(t);return t}function u(e){return e.id}var a=e("../data/feature_index"),f=e("../symbol/collision_tile"),l=e("../data/bucket"),c=e("../symbol/collision_box"),h=e("../util/dictionary_coder"),p=e("../util/util"),d=e("../symbol/symbol_instances"),v=e("../symbol/symbol_quads");t.exports=r,r.prototype.parse=function(e,t,n,r,g){function y(e,t){for(var n=0;n<e.length;n++){var r=e.feature(n);r.index=n;for(var i in t)t[i].filter(r)&&t[i].features.push(r)}}function b(e){if(e)return g(e);if(q++,2===q){for(var t=H.length-1;t>=0;t--)w(A,H[t]);E()}}function w(e,t){if(t.populateArrays(C,I,F),"symbol"!==t.type)for(var n=0;n<t.features.length;n++){var r=t.features[n];k.insert(r,r.index,t.sourceLayerIndex,t.index)}t.features=null}function E(){A.status="done",A.redoPlacementAfterDone&&(A.redoPlacement(A.angle,A.pitch,null),A.redoPlacementAfterDone=!1);var e=k.serialize(),t=C.serialize(),n=A.collisionBoxArray.serialize(),u=A.symbolInstancesArray.serialize(),a=A.symbolQuadsArray.serialize(),f=[r].concat(e.transferables).concat(t.transferables),l=P.filter(i);g(null,{buckets:l.map(s),featureIndex:e.data,collisionTile:t.data,collisionBoxArray:n,symbolInstancesArray:u,symbolQuadsArray:a,rawTileData:r},o(l).concat(f))}this.status="parsing",this.data=e,this.collisionBoxArray=new c,this.symbolInstancesArray=new d,this.symbolQuadsArray=new v;var S,x,T,N,C=new f(this.angle,this.pitch,this.collisionBoxArray),k=new a(this.coord,this.overscaling,C,e.layers),L=new h(e.layers?Object.keys(e.layers).sort():["_geojsonTileLayer"]),A=this,O={},M={},_=0;for(var D in t)x=t[D][0],x.source===this.source&&(x.ref||x.minzoom&&this.zoom<x.minzoom||x.maxzoom&&this.zoom>=x.maxzoom||x.layout&&"none"===x.layout.visibility||e.layers&&!e.layers[x.sourceLayer]||(N=l.create({layer:x,index:_++,childLayers:t[D],zoom:this.zoom,overscaling:this.overscaling,showCollisionBoxes:this.showCollisionBoxes,collisionBoxArray:this.collisionBoxArray,symbolQuadsArray:this.symbolQuadsArray,symbolInstancesArray:this.symbolInstancesArray,sourceLayerIndex:L.encode(x.sourceLayer||"_geojsonTileLayer")}),N.createFilter(),O[x.id]=N,e.layers&&(T=x.sourceLayer,M[T]=M[T]||{},M[T][x.id]=N)));if(e.layers)for(T in M)1===x.version&&p.warnOnce('Vector tile source "'+this.source+'" layer "'+T+'" does not use vector tile spec v2 and therefore may have some rendering errors.'),x=e.layers[T],x&&y(x,M[T]);else y(e,O);var P=[],H=this.symbolBuckets=[],B=[];k.bucketLayerIDs={};for(var j in O)N=O[j],0!==N.features.length&&(k.bucketLayerIDs[N.index]=N.childLayers.map(u),P.push(N),"symbol"===N.type?H.push(N):B.push(N));var F={},I={},q=0;if(H.length>0){for(S=H.length-1;S>=0;S--)H[S].updateIcons(F),H[S].updateFont(I);for(var R in I)I[R]=Object.keys(I[R]).map(Number);F=Object.keys(F),n.send("get glyphs",{uid:this.uid,stacks:I},function(e,t){I=t,b(e)}),F.length?n.send("get icons",{icons:F},function(e,t){F=t,b(e)}):b()}for(S=B.length-1;S>=0;S--)w(this,B[S]);if(0===H.length)return E()},r.prototype.redoPlacement=function(e,t,n){if("done"!==this.status)return this.redoPlacementAfterDone=!0,this.angle=e,{};for(var r=new f(e,t,this.collisionBoxArray),u=this.symbolBuckets,a=u.length-1;a>=0;a--)u[a].placeFeatures(r,n);var l=r.serialize(),c=u.filter(i);return{result:{buckets:c.map(s),collisionTile:l.data},transferables:o(c).concat(l.transferables)}}},{"../data/bucket":295,"../data/feature_index":302,"../symbol/collision_box":360,"../symbol/collision_tile":362,"../symbol/symbol_instances":371,"../symbol/symbol_quads":372,"../util/dictionary_coder":398,"../util/util":408}],341:[function(e,t,n){"use strict";function r(){this.n=0,this.times=[]}t.exports=r,r.prototype.stopped=function(){return this.times=this.times.filter(function(e){return e.time>=(new Date).getTime()}),!this.times.length},r.prototype.set=function(e){return this.times.push({id:this.n,time:e+(new Date).getTime()}),this.n++},r.prototype.cancel=function(e){this.times=this.times.filter(function(t){return t.id!==e})}},{}],342:[function(e,t,n){"use strict";function r(e){this.base=e,this.retina=u.devicePixelRatio>1;var t=this.retina?"@2x":"";o.getJSON(a(e,t,".json"),function(e,t){return e?void this.fire("error",{error:e}):(this.data=t,void (this.img&&this.fire("load")))}.bind(this)),o.getImage(a(e,t,".png"),function(e,t){if(e)return void this.fire("error",{error:e});for(var n=t.getData(),r=t.data=new Uint8Array(n.length),i=0;i<n.length;i+=4){var s=n[i+3]/255;r[i+0]=n[i+0]*s,r[i+1]=n[i+1]*s,r[i+2]=n[i+2]*s,r[i+3]=n[i+3]}this.img=t,this.data&&this.fire("load")}.bind(this))}function i(){}var s=e("../util/evented"),o=e("../util/ajax"),u=e("../util/browser"),a=e("../util/mapbox").normalizeSpriteURL;t.exports=r,r.prototype=Object.create(s),r.prototype.toJSON=function(){return this.base},r.prototype.loaded=function(){return!!this.data&&!!this.img},r.prototype.resize=function(){if(u.devicePixelRatio>1!==this.retina){var e=new r(this.base);e.on("load",function(){this.img=e.img,this.data=e.data,this.retina=e.retina}.bind(this))}},i.prototype={x:0,y:0,width:0,height:0,pixelRatio:1,sdf:!1},r.prototype.getSpritePosition=function(e){if(!this.loaded())return new i;var t=this.data&&this.data[e];return t&&this.img?t:new i}},{"../util/ajax":391,"../util/browser":392,"../util/evented":400,"../util/mapbox":405}],343:[function(e,t,n){"use strict";var r=e("csscolorparser").parseCSSColor,i=e("../util/util"),s=e("./style_function"),o={};t.exports=function u(e){if(s.isFunctionDefinition(e))return i.extend({},e,{stops:e.stops.map(function(e){return[e[0],u(e[1])]})});if("string"==typeof e){if(!o[e]){var t=r(e);if(!t)throw new Error("Invalid color "+e);o[e]=[t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]]}return o[e]}throw new Error("Invalid color "+e)}},{"../util/util":408,"./style_function":346,csscolorparser:91}],344:[function(e,t,n){"use strict";function r(e,t,n){this.animationLoop=t||new v,this.dispatcher=new d(n||1,this),this.spriteAtlas=new a(1024,1024),this.lineAtlas=new f(256,512),this._layers={},this._order=[],this._groups=[],this.sources={},this.zoomHistory={},l.bindAll(["_forwardSourceEvent","_forwardTileEvent","_forwardLayerEvent","_redoPlacement"],this),this._resetUpdates();var r=function(e,t){if(e)return void this.fire("error",{error:e});if(!m.emitErrors(this,m(t))){this._loaded=!0,this.stylesheet=t,this.updateClasses();var n=t.sources;for(var r in n)this.addSource(r,n[r]);t.sprite&&(this.sprite=new o(t.sprite),this.sprite.on("load",this.fire.bind(this,"change"))),this.glyphSource=new u(t.glyphs),this._resolve(),this.fire("load")}}.bind(this);"string"==typeof e?c.getJSON(h(e),r):p.frame(r.bind(this,null,e)),this.on("source.load",function(e){var t=e.source;if(t&&t.vectorLayerIds)for(var n in this._layers){var r=this._layers[n];r.source===t.id&&this._validateLayer(r)}})}var i=e("../util/evented"),s=e("./style_layer"),o=e("./image_sprite"),u=e("../symbol/glyph_source"),a=e("../symbol/sprite_atlas"),f=e("../render/line_atlas"),l=e("../util/util"),c=e("../util/ajax"),h=e("../util/mapbox").normalizeStyleURL,p=e("../util/browser"),d=e("../util/dispatcher"),v=e("./animation_loop"),m=e("./validate_style"),g=e("../source/source"),y=e("../source/query_features"),b=e("../source/source_cache"),w=e("./style_spec"),E=e("./style_function");t.exports=r,r.prototype=l.inherit(i,{_loaded:!1,_validateLayer:function(e){var t=this.sources[e.source];e.sourceLayer&&t&&t.vectorLayerIds&&t.vectorLayerIds.indexOf(e.sourceLayer)===-1&&this.fire("error",{error:new Error('Source layer "'+e.sourceLayer+'" does not exist on source "'+t.id+'" as specified by style layer "'+e.id+'"')})},loaded:function(){if(!this._loaded)return!1;if(Object.keys(this._updates.sources).length)return!1;for(var e in this.sources)if(!this.sources[e].loaded())return!1;return!this.sprite||!!this.sprite.loaded()},_resolve:function(){var e,t;this._layers={},this._order=this.stylesheet.layers.map(function(e){return e.id});for(var n=0;n<this.stylesheet.layers.length;n++)t=this.stylesheet.layers[n],t.ref||(e=s.create(t),this._layers[e.id]=e,e.on("error",this._forwardLayerEvent));for(var r=0;r<this.stylesheet.layers.length;r++)if(t=this.stylesheet.layers[r],t.ref){var i=this.getLayer(t.ref);e=s.create(t,i),this._layers[e.id]=e,e.on("error",this._forwardLayerEvent)}this._groupLayers(),this._updateWorkerLayers()},_groupLayers:function(){var e;this._groups=[];for(var t=0;t<this._order.length;++t){var n=this._layers[this._order[t]];e&&n.source===e.source||(e=[],e.source=n.source,this._groups.push(e)),e.push(n)}},_updateWorkerLayers:function(e){this.dispatcher.broadcast(e?"update layers":"set layers",this._serializeLayers(e))},_serializeLayers:function(e){e=e||this._order;for(var t=[],n={includeRefProperties:!0},r=0;r<e.length;r++)t.push(this._layers[e[r]].serialize(n));return t},_applyClasses:function(e,t){if(this._loaded){e=e||[],t=t||{transition:!0};var n=this.stylesheet.transition||{},r=this._updates.allPaintProps?this._layers:this._updates.paintProps;for(var i in r){var s=this._layers[i],o=this._updates.paintProps[i];if(this._updates.allPaintProps||o.all)s.updatePaintTransitions(e,t,n,this.animationLoop);else for(var u in o)this._layers[i].updatePaintTransition(u,e,t,n,this.animationLoop)}}},_recalculate:function(e){for(var t in this.sources)this.sources[t].used=!1;this._updateZoomHistory(e),this.rasterFadeDuration=300;for(var n in this._layers){var r=this._layers[n];r.recalculate(e,this.zoomHistory),!r.isHidden(e)&&r.source&&(this.sources[r.source].used=!0)}var i=300;Math.floor(this.z)!==Math.floor(e)&&this.animationLoop.set(i),this.z=e,this.fire("zoom")},_updateZoomHistory:function(e){var t=this.zoomHistory;void 0===t.lastIntegerZoom&&(t.lastIntegerZoom=Math.floor(e),t.lastIntegerZoomTime=0,t.lastZoom=e),Math.floor(t.lastZoom)<Math.floor(e)?(t.lastIntegerZoom=Math.floor(e),t.lastIntegerZoomTime=Date.now()):Math.floor(t.lastZoom)>Math.floor(e)&&(t.lastIntegerZoom=Math.floor(e+1),t.lastIntegerZoomTime=Date.now()),t.lastZoom=e},_checkLoaded:function(){if(!this._loaded)throw new Error("Style is not done loading")},update:function(e,t){if(!this._updates.changed)return this;if(this._updates.allLayers)this._groupLayers(),this._updateWorkerLayers();else{var n=Object.keys(this._updates.layers);n.length&&this._updateWorkerLayers(n)}var r,i=Object.keys(this._updates.sources);for(r=0;r<i.length;r++)this._reloadSource(i[r]);for(r=0;r<this._updates.events.length;r++){var s=this._updates.events[r];this.fire(s[0],s[1])}return this._applyClasses(e,t),this._updates.changed&&this.fire("change"),this._resetUpdates(),this},_resetUpdates:function(){this._updates={events:[],layers:{},sources:{},paintProps:{}}},addSource:function(e,t){if(this._checkLoaded(),void 0!==this.sources[e])throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(t)+".");var n=["vector","raster","geojson","video","image"],r=n.indexOf(t.type)>=0;return r&&this._handleErrors(m.source,"sources."+e,t)?this:(t=new b(e,t,this.dispatcher),this.sources[e]=t,t.style=this,t.on("load",this._forwardSourceEvent).on("error",this._forwardSourceEvent).on("change",this._forwardSourceEvent).on("tile.add",this._forwardTileEvent).on("tile.load",this._forwardTileEvent).on("tile.error",this._forwardTileEvent).on("tile.remove",this._forwardTileEvent).on("tile.stats",this._forwardTileEvent),this._updates.events.push(["source.add",{source:t}]),this._updates.changed=!0,this)},removeSource:function(e){if(this._checkLoaded(),void 0===this.sources[e])throw new Error("There is no source with this ID");var t=this.sources[e];return delete this.sources[e],delete this._updates.sources[e],t.off("load",this._forwardSourceEvent).off("error",this._forwardSourceEvent).off("change",this._forwardSourceEvent).off("tile.add",this._forwardTileEvent).off("tile.load",this._forwardTileEvent).off("tile.error",this._forwardTileEvent).off("tile.remove",this._forwardTileEvent).off("tile.stats",this._forwardTileEvent),this._updates.events.push(["source.remove",{source:t}]),this._updates.changed=!0,this},getSource:function(e){return this.sources[e]&&this.sources[e].getSource()},addLayer:function(e,t){if(this._checkLoaded(),!(e instanceof s)){if(this._handleErrors(m.layer,"layers."+e.id,e,!1,{arrayIndex:-1}))return this;var n=e.ref&&this.getLayer(e.ref);e=s.create(e,n)}return this._validateLayer(e),e.on("error",this._forwardLayerEvent),this._layers[e.id]=e,this._order.splice(t?this._order.indexOf(t):1/0,0,e.id),this._updates.allLayers=!0,e.source&&(this._updates.sources[e.source]=!0),this._updates.events.push(["layer.add",{layer:e}]),this.updateClasses(e.id)},removeLayer:function(e){this._checkLoaded();var t=this._layers[e];if(void 0===t)throw new Error("There is no layer with this ID");for(var n in this._layers)this._layers[n].ref===e&&this.removeLayer(n);return t.off("error",this._forwardLayerEvent),delete this._layers[e],delete this._updates.layers[e],delete this._updates.paintProps[e],this._order.splice(this._order.indexOf(e),1),this._updates.allLayers=!0,this._updates.events.push(["layer.remove",{layer:t}]),this._updates.changed=!0,this},getLayer:function(e){return this._layers[e]},getReferentLayer:function(e){var t=this.getLayer(e);return t.ref&&(t=this.getLayer(t.ref)),t},setLayerZoomRange:function(e,t,n){this._checkLoaded();var r=this.getReferentLayer(e);return r.minzoom===t&&r.maxzoom===n?this:(null!=t&&(r.minzoom=t),null!=n&&(r.maxzoom=n),this._updateLayer(r))},setFilter:function(e,t){this._checkLoaded();var n=this.getReferentLayer(e);return null!==t&&this._handleErrors(m.filter,"layers."+n.id+".filter",t)?this:l.deepEqual(n.filter,t)?this:(n.filter=l.clone(t),this._updateLayer(n))},getFilter:function(e){return this.getReferentLayer(e).filter},setLayoutProperty:function(e,t,n){this._checkLoaded();var r=this.getReferentLayer(e);return l.deepEqual(r.getLayoutProperty(t),n)?this:(r.setLayoutProperty(t,n),this._updateLayer(r))},getLayoutProperty:function(e,t){return this.getReferentLayer(e).getLayoutProperty(t)},setPaintProperty:function(e,t,n,r){this._checkLoaded();var i=this.getLayer(e);if(l.deepEqual(i.getPaintProperty(t,r),n))return this;var s=i.isPaintValueFeatureConstant(t);i.setPaintProperty(t,n,r);var o=!n||!E.isFunctionDefinition(n)||"$zoom"===n.property||void 0===n.property;return o&&s||(this._updates.layers[e]=!0,i.source&&(this._updates.sources[i.source]=!0)),this.updateClasses(e,t)},getPaintProperty:function(e,t,n){return this.getLayer(e).getPaintProperty(t,n)},updateClasses:function(e,t){if(this._updates.changed=!0,e){var n=this._updates.paintProps;n[e]||(n[e]={}),n[e][t||"all"]=!0}else this._updates.allPaintProps=!0;return this},serialize:function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sources,function(e){return e.serialize()}),layers:this._order.map(function(e){return this._layers[e].serialize()},this)},function(e){return void 0!==e})},_updateLayer:function(e){return this._updates.layers[e.id]=!0,e.source&&(this._updates.sources[e.source]=!0),this._updates.changed=!0,this},_flattenRenderedFeatures:function(e){for(var t=[],n=this._order.length-1;n>=0;n--)for(var r=this._order[n],i=0;i<e.length;i++){var s=e[i][r];if(s)for(var o=0;o<s.length;o++)t.push(s[o])}return t},queryRenderedFeatures:function(e,t,n,r){t&&t.filter&&this._handleErrors(m.filter,"queryRenderedFeatures.filter",t.filter,!0);var i={};if(t&&t.layers)for(var s=0;s<t.layers.length;s++){var o=t.layers[s];i[this._layers[o].source]=!0}var u=[];for(var a in this.sources)if(!t.layers||i[a]){var f=this.sources[a],l=y.rendered(f,this._layers,e,t,n,r);u.push(l)}return this._flattenRenderedFeatures(u)},querySourceFeatures:function(e,t){t&&t.filter&&this._handleErrors(m.filter,"querySourceFeatures.filter",t.filter,!0);var n=this.sources[e];return n?y.source(n,t):[]},addSourceType:function(e,t,n){return g.getType(e)?n(new Error('A source type called "'+e+'" already exists.')):(g.setType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("load worker source",{name:e,url:t.workerSourceURL},n):n(null,null))},_handleErrors:function(e,t,n,r,i){var s=r?m.throwErrors:m.emitErrors,o=e.call(m,l.extend({key:t,style:this.serialize(),value:n,styleSpec:w},i));return s.call(m,this,o)},_remove:function(){this.dispatcher.remove()},_reloadSource:function(e){this.sources[e].reload()},_updateSources:function(e){for(var t in this.sources)this.sources[t].update(e)},_redoPlacement:function(){for(var e in this.sources)this.sources[e].redoPlacement&&this.sources[e].redoPlacement()},_forwardSourceEvent:function(e){this.fire("source."+e.type,l.extend({source:e.target.getSource()},e))},_forwardTileEvent:function(e){this.fire(e.type,l.extend({source:e.target},e))},_forwardLayerEvent:function(e){this.fire("layer."+e.type,l.extend({layer:{id:e.target.id}},e))},"get sprite json":function(e,t){var n=this.sprite;n.loaded()?t(null,{sprite:n.data,retina:n.retina}):n.on("load",function(){t(null,{sprite:n.data,retina:n.retina})})},"get icons":function(e,t){var n=this.sprite,r=this.spriteAtlas;n.loaded()?(r.setSprite(n),r.addIcons(e.icons,t)):n.on("load",function(){r.setSprite(n),r.addIcons(e.icons,t)})},"get glyphs":function(e,t){function n(e,n,r){e&&console.error(e),s[r]=n,i--,0===i&&t(null,s)}var r=e.stacks,i=Object.keys(r).length,s={};for(var o in r)this.glyphSource.getSimpleGlyphs(o,r[o],e.uid,n)}})},{"../render/line_atlas":320,"../source/query_features":330,"../source/source":332,"../source/source_cache":333,"../symbol/glyph_source":365,"../symbol/sprite_atlas":370,"../util/ajax":391,"../util/browser":392,"../util/dispatcher":399,"../util/evented":400,"../util/mapbox":405,"../util/util":408,"./animation_loop":341,"./image_sprite":342,"./style_function":346,"./style_layer":347,"./style_spec":354,"./validate_style":356}],345:[function(e,t,n){"use strict";function r(e,t){this.value=u.clone(t),this.isFunction=s.isFunctionDefinition(t),this.json=JSON.stringify(this.value);var n="color"===e.type&&this.value?o(this.value):t;if(this.calculate=s[e.function||"piecewise-constant"](n),this.isFeatureConstant=this.calculate.isFeatureConstant,this.isZoomConstant=this.calculate.isZoomConstant,"piecewise-constant"===e.function&&e.transition&&(this.calculate=i(this.calculate)),!this.isFeatureConstant&&!this.isZoomConstant){this.stopZoomLevels=[];for(var r=[],f=this.value.stops,l=0;l<this.value.stops.length;l++){var c=f[l][0].zoom;this.stopZoomLevels.indexOf(c)<0&&(this.stopZoomLevels.push(c),r.push([c,r.length]))}this.calculateInterpolationT=s.interpolated({stops:r,base:t.base})}}function i(e){return function(t,n){var r,i,s,o=t.zoom,u=t.zoomHistory,a=t.duration,f=o%1,l=Math.min((Date.now()-u.lastIntegerZoomTime)/a,1),c=1,h=1;return o>u.lastIntegerZoom?(r=f+(1-f)*l,c*=2,i=e({zoom:o-1},n),s=e({zoom:o},n)):(r=1-(1-l)*f,s=e({zoom:o},n),i=e({zoom:o+1},n),c/=2),void 0===i||void 0===s?void 0:{from:i,fromScale:c,to:s,toScale:h,t:r}}}var s=e("./style_function"),o=e("./parse_color"),u=e("../util/util");t.exports=r},{"../util/util":408,"./parse_color":343,"./style_function":346}],346:[function(e,t,n){"use strict";var r=e("mapbox-gl-function");n.interpolated=function(e){var t=r.interpolated(e),n=function(e,n){return t(e&&e.zoom,n||{})};return n.isFeatureConstant=t.isFeatureConstant,n.isZoomConstant=t.isZoomConstant,n},n["piecewise-constant"]=function(e){var t=r["piecewise-constant"](e),n=function(e,n){return t(e&&e.zoom,n||{})};return n.isFeatureConstant=t.isFeatureConstant,n.isZoomConstant=t.isZoomConstant,n},n.isFunctionDefinition=r.isFunctionDefinition},{"mapbox-gl-function":268}],347:[function(e,t,n){"use strict";function r(e,t){this.set(e,t)}function i(e){return e.value}var s=e("../util/util"),o=e("./style_transition"),u=e("./style_declaration"),a=e("./style_spec"),f=e("./validate_style"),l=e("./parse_color"),c=e("../util/evented");t.exports=r;var h="-transition";r.create=function(t,n){var r={background:e("./style_layer/background_style_layer"),circle:e("./style_layer/circle_style_layer"),fill:e("./style_layer/fill_style_layer"),line:e("./style_layer/line_style_layer"),raster:e("./style_layer/raster_style_layer"),symbol:e("./style_layer/symbol_style_layer")};return new r[(n||t).type](t,n)},r.prototype=s.inherit(c,{set:function(e,t){this.id=e.id,this.ref=e.ref,this.metadata=e.metadata,this.type=(t||e).type,this.source=(t||e).source,this.sourceLayer=(t||e)["source-layer"],this.minzoom=(t||e).minzoom,this.maxzoom=(t||e).maxzoom,this.filter=(t||e).filter,this.paint={},this.layout={},this._paintSpecifications=a["paint_"+this.type],this._layoutSpecifications=a["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var n,r;for(var i in e){var s=i.match(/^paint(?:\.(.*))?$/);if(s){var o=s[1]||"";for(n in e[i])this.setPaintProperty(n,e[i][n],o)}}if(this.ref)this._layoutDeclarations=t._layoutDeclarations;else for(r in e.layout)this.setLayoutProperty(r,e.layout[r]);for(n in this._paintSpecifications)this.paint[n]=this.getPaintValue(n);for(r in this._layoutSpecifications)this._updateLayoutValue(r)},setLayoutProperty:function(e,t){if(null==t)delete this._layoutDeclarations[e];else{var n="layers."+this.id+".layout."+e;if(this._handleErrors(f.layoutProperty,n,e,t))return;this._layoutDeclarations[e]=new u(this._layoutSpecifications[e],t)}this._updateLayoutValue(e)},getLayoutProperty:function(e){return this._layoutDeclarations[e]&&this._layoutDeclarations[e].value},getLayoutValue:function(e,t,n){var r=this._layoutSpecifications[e],i=this._layoutDeclarations[e];return i?i.calculate(t,n):r.default},setPaintProperty:function(e,t,n){var r="layers."+this.id+(n?'["paint.'+n+'"].':".paint.")+e;if(s.endsWith(e,h))if(this._paintTransitionOptions[n||""]||(this._paintTransitionOptions[n||""]={}),null===t||void 0===t)delete this._paintTransitionOptions[n||""][e];else{if(this._handleErrors(f.paintProperty,r,e,t))return;this._paintTransitionOptions[n||""][e]=t}else if(this._paintDeclarations[n||""]||(this._paintDeclarations[n||""]={}),null===t||void 0===t)delete this._paintDeclarations[n||""][e];else{if(this._handleErrors(f.paintProperty,r,e,t))return;this._paintDeclarations[n||""][e]=new u(this._paintSpecifications[e],t)}},getPaintProperty:function(e,t){return t=t||"",s.endsWith(e,h)?this._paintTransitionOptions[t]&&this._paintTransitionOptions[t][e]:this._paintDeclarations[t]&&this._paintDeclarations[t][e]&&this._paintDeclarations[t][e].value},getPaintValue:function(e,t,n){var r=this._paintSpecifications[e],i=this._paintTransitions[e];return i?i.calculate(t,n):"color"===r.type&&r.default?l(r.default):r.default},getPaintValueStopZoomLevels:function(e){var t=this._paintTransitions[e];return t?t.declaration.stopZoomLevels:[]},getPaintInterpolationT:function(e,t){var n=this._paintTransitions[e];return n.declaration.calculateInterpolationT({zoom:t})},isPaintValueFeatureConstant:function(e){var t=this._paintTransitions[e];return!t||t.declaration.isFeatureConstant},isLayoutValueFeatureConstant:function(e){var t=this._layoutDeclarations[e];return!t||t.isFeatureConstant},isPaintValueZoomConstant:function(e){var t=this._paintTransitions[e];return!t||t.declaration.isZoomConstant},isHidden:function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.layout.visibility||0===this.paint[this.type+"-opacity"]},updatePaintTransitions:function(e,t,n,r){for(var i=s.extend({},this._paintDeclarations[""]),o=0;o<e.length;o++)s.extend(i,this._paintDeclarations[e[o]]);var u;for(u in i)this._applyPaintDeclaration(u,i[u],t,n,r);for(u in this._paintTransitions)u in i||this._applyPaintDeclaration(u,null,t,n,r)},updatePaintTransition:function(e,t,n,r,i){for(var s=this._paintDeclarations[""][e],o=0;o<t.length;o++){var u=this._paintDeclarations[t[o]];u&&u[e]&&(s=u[e])}this._applyPaintDeclaration(e,s,n,r,i)},recalculate:function(e,t){for(var n in this._paintTransitions)this.paint[n]=this.getPaintValue(n,{zoom:e,zoomHistory:t});for(var r in this._layoutFunctions)this.layout[r]=this.getLayoutValue(r,{zoom:e,zoomHistory:t})},serialize:function(e){var t={id:this.id,ref:this.ref,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom};for(var n in this._paintDeclarations){var r=""===n?"paint":"paint."+n;t[r]=s.mapObject(this._paintDeclarations[n],i)}return(!this.ref||e&&e.includeRefProperties)&&s.extend(t,{type:this.type,source:this.source,"source-layer":this.sourceLayer,filter:this.filter,layout:s.mapObject(this._layoutDeclarations,i)}),s.filterObject(t,function(e,t){return void 0!==e&&("layout"!==t||!!Object.keys(e).length)})},_applyPaintDeclaration:function(e,t,n,r,i){var a=n.transition?this._paintTransitions[e]:void 0,f=this._paintSpecifications[e];if(null!==t&&void 0!==t||(t=new u(f,f.default)),!a||a.declaration.json!==t.json){var l=s.extend({duration:300,delay:0},r,this.getPaintProperty(e+h)),c=this._paintTransitions[e]=new o(f,t,a,l);c.instant()||(c.loopID=i.set(c.endTime-Date.now())),a&&i.cancel(a.loopID)}},_updateLayoutValue:function(e){var t=this._layoutDeclarations[e];t&&t.isFunction?this._layoutFunctions[e]=!0:(delete this._layoutFunctions[e],this.layout[e]=this.getLayoutValue(e))},_handleErrors:function(e,t,n,r){return f.emitErrors(this,e.call(f,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:a,style:{glyphs:!0,sprite:!0}}))}})},{"../util/evented":400,"../util/util":408,"./parse_color":343,"./style_declaration":345,"./style_layer/background_style_layer":348,"./style_layer/circle_style_layer":349,"./style_layer/fill_style_layer":350,"./style_layer/line_style_layer":351,"./style_layer/raster_style_layer":352,"./style_layer/symbol_style_layer":353,"./style_spec":354,"./style_transition":355,"./validate_style":356}],348:[function(e,t,n){"use strict";function r(){s.apply(this,arguments)}var i=e("../../util/util"),s=e("../style_layer");t.exports=r,r.prototype=i.inherit(s,{})},{"../../util/util":408,"../style_layer":347}],349:[function(e,t,n){"use strict";function r(){s.apply(this,arguments)}var i=e("../../util/util"),s=e("../style_layer");t.exports=r,r.prototype=i.inherit(s,{})},{"../../util/util":408,"../style_layer":347}],350:[function(e,t,n){"use strict";function r(){s.apply(this,arguments)}var i=e("../../util/util"),s=e("../style_layer");r.prototype=i.inherit(s,{getPaintValue:function(e,t,n){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?s.prototype.getPaintValue.call(this,"fill-color",t,n):s.prototype.getPaintValue.call(this,e,t,n)},getPaintValueStopZoomLevels:function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?s.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):s.prototype.getPaintValueStopZoomLevels.call(this,arguments)},getPaintInterpolationT:function(e,t){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?s.prototype.getPaintInterpolationT.call(this,"fill-color",t):s.prototype.getPaintInterpolationT.call(this,e,t)},isPaintValueFeatureConstant:function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?s.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):s.prototype.isPaintValueFeatureConstant.call(this,e)},isPaintValueZoomConstant:function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?s.prototype.isPaintValueZoomConstant.call(this,"fill-color"):s.prototype.isPaintValueZoomConstant.call(this,e)}}),t.exports=r},{"../../util/util":408,"../style_layer":347}],351:[function(e,t,n){"use strict";function r(){s.apply(this,arguments)}var i=e("../../util/util"),s=e("../style_layer");t.exports=r,r.prototype=i.inherit(s,{getPaintValue:function(e,t,n){var r=s.prototype.getPaintValue.apply(this,arguments);if(r&&"line-dasharray"===e){var i=Math.floor(t.zoom);this._flooredZoom!==i&&(this._flooredZoom=i,this._flooredLineWidth=this.getPaintValue("line-width",t,n)),r.fromScale*=this._flooredLineWidth,r.toScale*=this._flooredLineWidth}return r}})},{"../../util/util":408,"../style_layer":347}],352:[function(e,t,n){"use strict";function r(){s.apply(this,arguments)}var i=e("../../util/util"),s=e("../style_layer");t.exports=r,r.prototype=i.inherit(s,{})},{"../../util/util":408,"../style_layer":347}],353:[function(e,t,n){"use strict";function r(){s.apply(this,arguments)}var i=e("../../util/util"),s=e("../style_layer");t.exports=r,r.prototype=i.inherit(s,{isHidden:function(){if(s.prototype.isHidden.apply(this,arguments))return!0;var e=0===this.paint["text-opacity"]||!this.layout["text-field"],t=0===this.paint["icon-opacity"]||!this.layout["icon-image"];return!!e&&!!t},getLayoutValue:function(e,t,n){return"text-rotation-alignment"===e&&"line"===this.getLayoutValue("symbol-placement",t,n)&&!this.getLayoutProperty("text-rotation-alignment")||"icon-rotation-alignment"===e&&"line"===this.getLayoutValue("symbol-placement",t,n)&&!this.getLayoutProperty("icon-rotation-alignment")?"map":"text-pitch-alignment"!==e||this.getLayoutProperty("text-pitch-alignment")?s.prototype.getLayoutValue.apply(this,arguments):this.getLayoutValue("text-rotation-alignment")}})},{"../../util/util":408,"../style_layer":347}],354:[function(e,t,n){"use strict";t.exports=e("mapbox-gl-style-spec/reference/latest.min")},{"mapbox-gl-style-spec/reference/latest.min":291}],355:[function(e,t,n){"use strict";function r(e,t,n,r){this.declaration=t,this.startTime=this.endTime=(new Date).getTime(),"piecewise-constant"===e.function&&e.transition?this.interp=i:this.interp=o[e.type],this.oldTransition=n,this.duration=r.duration||0,this.delay=r.delay||0,this.instant()||(this.endTime=this.startTime+this.duration+this.delay,this.ease=s.easeCubicInOut),n&&n.endTime<=this.startTime&&delete n.oldTransition}function i(e,t,n){return void 0===(e&&e.to)||void 0===(t&&t.to)?void 0:{from:e.to,fromScale:e.toScale,to:t.to,toScale:t.toScale,t:n}}var s=e("../util/util"),o=e("../util/interpolate");t.exports=r,r.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},r.prototype.calculate=function(e,t){var n=this.declaration.calculate(s.extend({},e,{duration:this.duration}),t);if(this.instant())return n;var r=e.time||Date.now();if(r<this.endTime){var i=this.oldTransition.calculate(s.extend({},e,{time:this.startTime}),t),o=this.ease((r-this.startTime-this.delay)/this.duration);n=this.interp(i,n,o)}return n}},{"../util/interpolate":402,"../util/util":408}],356:[function(e,t,n){"use strict";t.exports=e("mapbox-gl-style-spec/lib/validate_style.min"),t.exports.emitErrors=function(e,t){if(t&&t.length){for(var n=0;n<t.length;n++)e.fire("error",{error:new Error(t[n].message)});return!0}return!1},t.exports.throwErrors=function(e,t){if(t)for(var n=0;n<t.length;n++)throw new Error(t[n].message)}},{"mapbox-gl-style-spec/lib/validate_style.min":290}],357:[function(e,t,n){"use strict";function r(e,t,n,r){this.x=e,this.y=t,this.angle=n,void 0!==r&&(this.segment=r)}var i=e("point-geometry");t.exports=r,r.prototype=Object.create(i.prototype),r.prototype.clone=function(){return new r(this.x,this.y,this.angle,this.segment)}},{"point-geometry":448}],358:[function(e,t,n){"use strict";function r(e,t,n,r,i){if(void 0===t.segment)return!0;for(var s=t,o=t.segment+1,u=0;u>-n/2;){if(o--,o<0)return!1;u-=e[o].dist(s),s=e[o]}u+=e[o].dist(e[o+1]),o++;for(var a=[],f=0;u<n/2;){var l=e[o-1],c=e[o],h=e[o+1];if(!h)return!1;var p=l.angleTo(c)-c.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),a.push({distance:u,angleDelta:p}),f+=p;u-a[0].distance>r;)f-=a.shift().angleDelta;if(f>i)return!1;o++,u+=c.dist(h)}return!0}t.exports=r},{}],359:[function(e,t,n){"use strict";function r(e,t,n,r,s){for(var o=[],u=0;u<e.length;u++)for(var a,f=e[u],l=0;l<f.length-1;l++){var c=f[l],h=f[l+1];c.x<t&&h.x<t||(c.x<t?c=(new i(t,c.y+(h.y-c.y)*((t-c.x)/(h.x-c.x))))._round():h.x<t&&(h=(new i(t,c.y+(h.y-c.y)*((t-c.x)/(h.x-c.x))))._round()),c.y<n&&h.y<n||(c.y<n?c=(new i(c.x+(h.x-c.x)*((n-c.y)/(h.y-c.y)),n))._round():h.y<n&&(h=(new i(c.x+(h.x-c.x)*((n-c.y)/(h.y-c.y)),n))._round()),c.x>=r&&h.x>=r||(c.x>=r?c=(new i(r,c.y+(h.y-c.y)*((r-c.x)/(h.x-c.x))))._round():h.x>=r&&(h=(new i(r,c.y+(h.y-c.y)*((r-c.x)/(h.x-c.x))))._round()),c.y>=s&&h.y>=s||(c.y>=s?c=(new i(c.x+(h.x-c.x)*((s-c.y)/(h.y-c.y)),s))._round():h.y>=s&&(h=(new i(c.x+(h.x-c.x)*((s-c.y)/(h.y-c.y)),s))._round()),a&&c.equals(a[a.length-1])||(a=[c],o.push(a)),a.push(h)))))}return o}var i=e("point-geometry");t.exports=r},{"point-geometry":448}],360:[function(e,t,n){"use strict";var r=e("../util/struct_array"),i=e("../util/util"),s=e("point-geometry"),o=t.exports=new r({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});i.extendAll(o.prototype.StructType.prototype,{get anchorPoint(){return new s(this.anchorPointX,this.anchorPointY)}})},{"../util/struct_array":406,"../util/util":408,"point-geometry":448}],361:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o,u,a,f,l){var c=o.top*u-a,h=o.bottom*u+a,p=o.left*u-a,d=o.right*u+a;if(this.boxStartIndex=e.length,f){var v=h-c,m=d-p;if(v>0)if(v=Math.max(10*u,v),l){var g=t[n.segment+1].sub(t[n.segment])._unit()._mult(m),y=[n.sub(g),n.add(g)];this._addLineCollisionBoxes(e,y,n,0,m,v,r,i,s)}else this._addLineCollisionBoxes(e,t,n,n.segment,m,v,r,i,s)}else e.emplaceBack(n.x,n.y,p,c,d,h,1/0,r,i,s,0,0,0,0,0);this.boxEndIndex=e.length}t.exports=r,r.prototype._addLineCollisionBoxes=function(e,t,n,r,i,s,o,u,a){var f=s/2,l=Math.floor(i/f),c=-s/2,h=this.boxes,p=n,d=r+1,v=c;do{if(d--,d<0)return h;v-=t[d].dist(p),p=t[d]}while(v>-i/2);for(var m=t[d].dist(t[d+1]),g=0;g<l;g++){for(var y=-i/2+g*f;v+m<y;){if(v+=m,d++,d+1>=t.length)return h;m=t[d].dist(t[d+1])}var b=y-v,w=t[d],E=t[d+1],S=E.sub(w)._unit()._mult(b)._add(w)._round(),x=Math.max(Math.abs(y-c)-f/2,0),T=i/2/x;e.emplaceBack(S.x,S.y,-s/2,-s/2,s/2,s/2,T,o,u,a,0,0,0,0,0)}return h}},{}],362:[function(e,t,n){"use strict";function r(e,t,n){if("object"==typeof e){var r=e;n=t,e=r.angle,t=r.pitch,this.grid=new o(r.grid),this.ignoredGrid=new o(r.ignoredGrid)}else this.grid=new o(s,12,6),this.ignoredGrid=new o(s,12,0);this.angle=e,this.pitch=t;var i=Math.sin(e),u=Math.cos(e);if(this.rotationMatrix=[u,-i,i,u],this.reverseRotationMatrix=[u,i,-i,u],this.yStretch=1/Math.cos(t/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),this.collisionBoxArray=n,0===n.length){n.emplaceBack();var f=32767;n.emplaceBack(0,0,0,-f,0,f,f,0,0,0,0,0,0,0,0,0),n.emplaceBack(s,0,0,-f,0,f,f,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,0,-f,0,f,0,f,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,s,-f,0,f,0,f,0,0,0,0,0,0,0,0,0)}this.tempCollisionBox=n.get(0),this.edges=[n.get(1),n.get(2),n.get(3),n.get(4)]}var i=e("point-geometry"),s=e("../data/bucket").EXTENT,o=e("grid-index");t.exports=r,r.prototype.serialize=function(){var e={angle:this.angle,pitch:this.pitch,grid:this.grid.toArrayBuffer(),ignoredGrid:this.ignoredGrid.toArrayBuffer()};return{data:e,transferables:[e.grid,e.ignoredGrid]}},r.prototype.minScale=.25,r.prototype.maxScale=2,r.prototype.placeCollisionFeature=function(e,t,n){for(var r=this.collisionBoxArray,s=this.minScale,o=this.rotationMatrix,u=this.yStretch,a=e.boxStartIndex;a<e.boxEndIndex;a++){var f=r.get(a),l=f.anchorPoint._matMult(o),c=l.x,h=l.y,p=c+f.x1,d=h+f.y1*u,v=c+f.x2,m=h+f.y2*u;if(f.bbox0=p,f.bbox1=d,f.bbox2=v,f.bbox3=m,!t)for(var g=this.grid.query(p,d,v,m),y=0;y<g.length;y++){var b=r.get(g[y]),w=b.anchorPoint._matMult(o);if(s=this.getPlacementScale(s,l,f,w,b),s>=this.maxScale)return s}if(n){var E;if(this.angle){var S=this.reverseRotationMatrix,x=(new i(f.x1,f.y1)).matMult(S),T=(new i(f.x2,f.y1)).matMult(S),N=(new i(f.x1,f.y2)).matMult(S),C=(new i(f.x2,f.y2)).matMult(S);E=this.tempCollisionBox,E.anchorPointX=f.anchorPoint.x,E.anchorPointY=f.anchorPoint.y,E.x1=Math.min(x.x,T.x,N.x,C.x),E.y1=Math.min(x.y,T.x,N.x,C.x),E.x2=Math.max(x.x,T.x,N.x,C.x),E.y2=Math.max(x.y,T.x,N.x,C.x),E.maxScale=f.maxScale}else E=f;for(var k=0;k<this.edges.length;k++){var L=this.edges[k];if(s=this.getPlacementScale(s,f.anchorPoint,E,L.anchorPoint,L),s>=this.maxScale)return s}}}return s},r.prototype.queryRenderedSymbols=function(e,t,n,r,s){var o={},u=[],a=this.collisionBoxArray,f=this.rotationMatrix,l=(new i(e,t))._matMult(f),c=this.tempCollisionBox;c.anchorX=l.x,c.anchorY=l.y,c.x1=0,c.y1=0,c.x2=n-e,c.y2=r-t,c.maxScale=s,s=c.maxScale;for(var h=[l.x+c.x1/s,l.y+c.y1/s*this.yStretch,l.x+c.x2/s,l.y+c.y2/s*this.yStretch],p=this.grid.query(h[0],h[1],h[2],h[3]),d=this.ignoredGrid.query(h[0],h[1],h[2],h[3]),v=0;v<d.length;v++)p.push(d[v]);for(var m=0;m<p.length;m++){var g=a.get(p[m]),y=g.sourceLayerIndex,b=g.featureIndex;if(void 0===o[y]&&(o[y]={}),!o[y][b]){var w=g.anchorPoint.matMult(f),E=this.getPlacementScale(this.minScale,l,c,w,g);E>=s&&(o[y][b]=!0,u.push(p[m]))}}return u},r.prototype.getPlacementScale=function(e,t,n,r,i){var s=t.x-r.x,o=t.y-r.y,u=(i.x1-n.x2)/s,a=(i.x2-n.x1)/s,f=(i.y1-n.y2)*this.yStretch/o,l=(i.y2-n.y1)*this.yStretch/o;(isNaN(u)||isNaN(a))&&(u=a=1),(isNaN(f)||isNaN(l))&&(f=l=1);var c=Math.min(Math.max(u,a),Math.max(f,l)),h=i.maxScale,p=n.maxScale;return c>h&&(c=h),c>p&&(c=p),c>e&&c>=i.placementScale&&(e=c),e},r.prototype.insertCollisionFeature=function(e,t,n){for(var r=n?this.ignoredGrid:this.grid,i=this.collisionBoxArray,s=e.boxStartIndex;s<e.boxEndIndex;s++){var o=i.get(s);o.placementScale=t,t<this.maxScale&&r.insert(s,o.bbox0,o.bbox1,o.bbox2,o.bbox3)}}},{"../data/bucket":295,"grid-index":257,"point-geometry":448}],363:[function(e,t,n){"use strict";function r(e,t,n,r,s,o,u,a,f){var l=r?.6*o*u:0,c=Math.max(r?r.right-r.left:0,s?s.right-s.left:0),h=0===e[0].x||e[0].x===f||0===e[0].y||e[0].y===f;t-c*u<t/4&&(t=c*u+t/4);var p=2*o,d=h?t/2*a%t:(c/2+p)*u*a%t;return i(e,d,t,l,n,c*u,h,!1,f)}function i(e,t,n,r,f,l,c,h,p){for(var d=l/2,v=0,m=0;m<e.length-1;m++)v+=e[m].dist(e[m+1]);for(var g=0,y=t-n,b=[],w=0;w<e.length-1;w++){for(var E=e[w],S=e[w+1],x=E.dist(S),T=S.angleTo(E);y+n<g+x;){y+=n;var N=(y-g)/x,C=s(E.x,S.x,N),k=s(E.y,S.y,N);if(C>=0&&C<p&&k>=0&&k<p&&y-d>=0&&y+d<=v){var L=(new o(C,k,T,w))._round();r&&!u(e,L,l,r,f)||b.push(L)}}g+=x}return h||b.length||c||(b=i(e,g/2,n,r,f,l,c,!0,p)),b}var s=e("../util/interpolate"),o=e("../symbol/anchor"),u=e("./check_max_angle");t.exports=r},{"../symbol/anchor":357,"../util/interpolate":402,"./check_max_angle":358}],364:[function(e,t,n){"use strict";function r(){this.width=u,this.height=u,this.bin=new i(this.width,this.height),this.index={},this.ids={},this.data=new Uint8Array(this.width*this.height)}var i=e("shelf-pack"),s=e("../util/util"),o=4,u=128,a=2048;t.exports=r,r.prototype.getGlyphs=function(){var e,t,n,r={};for(var i in this.ids)e=i.split("#"),t=e[0],n=e[1],r[t]||(r[t]=[]),r[t].push(n);return r},r.prototype.getRects=function(){var e,t,n,r={};for(var i in this.ids)e=i.split("#"),t=e[0],n=e[1],r[t]||(r[t]={}),r[t][n]=this.index[i];return r},r.prototype.addGlyph=function(e,t,n,r){if(!n)return null;var i=t+"#"+n.id;if(this.index[i])return this.ids[i].indexOf(e)<0&&this.ids[i].push(e),this.index[i];if(!n.bitmap)return null;var o=n.width+2*r,u=n.height+2*r,a=1,f=o+2*a,l=u+2*a;f+=4-f%4,l+=4-l%4;var c=this.bin.packOne(f,l);if(c||(this.resize(),c=this.bin.packOne(f,l)),!c)return s.warnOnce("glyph bitmap overflow"),null;this.index[i]=c,this.ids[i]=[e];for(var h=this.data,p=n.bitmap,d=0;d<u;d++)for(var v=this.width*(c.y+d+a)+c.x+a,m=o*d,g=0;g<o;g++)h[v+g]=p[m+g];return this.dirty=!0,c},r.prototype.resize=function(){var e=this.width,t=this.height;if(!(e>=a||t>=a)){this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null),this.width*=o,this.height*=o,this.bin.resize(this.width,this.height);for(var n=new ArrayBuffer(this.width*this.height),r=0;r<t;r++){var i=new Uint8Array(this.data.buffer,t*r,e),s=new Uint8Array(n,t*r*o,e);s.set(i)}this.data=new Uint8Array(n)}},r.prototype.bind=function(e){this.gl=e,this.texture?e.bindTexture(e.TEXTURE_2D,this.texture):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,null))},r.prototype.updateTexture=function(e){this.bind(e),this.dirty&&(e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data),this.dirty=!1)}},{"../util/util":408,"shelf-pack":477}],365:[function(e,t,n){"use strict";function r(e){this.url=e&&o(e),this.atlases={},this.stacks={},this.loading={}}function i(e,t,n){var r=1;this.advance=e.advance,this.left=e.left-n-r,this.top=e.top+n+r,this.rect=t}function s(e,t,n,r){return r=r||"abc",n.replace("{s}",r[e.length%r.length]).replace("{fontstack}",e).replace("{range}",t)}var o=e("../util/mapbox").normalizeGlyphsURL,u=e("../util/ajax").getArrayBuffer,a=e("../util/glyphs"),f=e("../symbol/glyph_atlas"),l=e("pbf");t.exports=r,r.prototype.getSimpleGlyphs=function(e,t,n,r){void 0===this.stacks[e]&&(this.stacks[e]={}),void 0===this.atlases[e]&&(this.atlases[e]=new f);for(var s,o={},u=this.stacks[e],a=this.atlases[e],l=3,c={},h=0,p=0;p<t.length;p++){var d=t[p];if(s=Math.floor(d/256),u[s]){var v=u[s].glyphs[d],m=a.addGlyph(n,e,v,l);v&&(o[d]=new i(v,m,l))}else void 0===c[s]&&(c[s]=[],h++),c[s].push(d)}h||r(void 0,o,e);var g=function(t,s,u){if(!t)for(var f=this.stacks[e][s]=u.stacks[0],p=0;p<c[s].length;p++){var d=c[s][p],v=f.glyphs[d],m=a.addGlyph(n,e,v,l);v&&(o[d]=new i(v,m,l))}h--,h||r(void 0,o,e)}.bind(this);for(var y in c)this.loadRange(e,y,g)},r.prototype.loadRange=function(e,t,n){if(256*t>65535)return n("glyphs > 65535 not supported");void 0===this.loading[e]&&(this.loading[e]={});var r=this.loading[e];if(r[t])r[t].push(n);else{r[t]=[n];var i=256*t+"-"+(256*t+255),o=s(e,i,this.url);u(o,function(e,n){for(var i=!e&&new a(new l(new Uint8Array(n))),s=0;s<r[t].length;s++)r[t][s](e,t,i);delete r[t]})}},r.prototype.getGlyphAtlas=function(e){return this.atlases[e]}},{"../symbol/glyph_atlas":364,"../util/ajax":391,"../util/glyphs":401,"../util/mapbox":405,pbf:442}],366:[function(e,t,n){"use strict";t.exports=function(e,t,n){function r(r){l.push(e[r]),c.push(n[r]),h.push(t[r]),p++}function i(e,t,n){var r=f[e];return delete f[e],f[t]=r,c[r][0].pop(),c[r][0]=c[r][0].concat(n[0]),r}function s(e,t,n){var r=a[t];return delete a[t],a[e]=r,c[r][0].shift(),c[r][0]=n[0].concat(c[r][0]),r}function o(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}var u,a={},f={},l=[],c=[],h=[],p=0;for(u=0;u<e.length;u++){var d=n[u],v=t[u];if(v){var m=o(v,d),g=o(v,d,!0);if(m in f&&g in a&&f[m]!==a[g]){var y=s(m,g,d),b=i(m,g,c[y]);delete a[m],delete f[g],f[o(v,c[b],!0)]=b,c[y]=null}else m in f?i(m,g,d):g in a?s(m,g,d):(r(u),a[m]=p-1,f[g]=p-1)}else r(u)}return{features:l,textFeatures:h,geometries:c}}},{}],367:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o,u,a,f){this.anchorPoint=e,this.tl=t,this.tr=n,this.bl=r,this.br=i,this.tex=s,this.anchorAngle=o,this.glyphAngle=u,this.minScale=a,this.maxScale=f}function i(e,t,n,i,s,o,f,c,h){var p,d,v,m,g=t.image.rect,y=s.layout,b=1,w=t.left-b,E=w+g.w/t.image.pixelRatio,S=t.top-b,x=S+g.h/t.image.pixelRatio;if("none"!==y["icon-text-fit"]&&f){var T=E-w,N=x-S,C=y["text-size"]/24,k=f.left*C,L=f.right*C,A=f.top*C,O=f.bottom*C,M=L-k,_=O-A,D=y["icon-text-fit-padding"][0],P=y["icon-text-fit-padding"][1],H=y["icon-text-fit-padding"][2],B=y["icon-text-fit-padding"][3],j="width"===y["icon-text-fit"]?.5*(_-N):0,F="height"===y["icon-text-fit"]?.5*(M-T):0,I="width"===y["icon-text-fit"]||"both"===y["icon-text-fit"]?M:T,q="height"===y["icon-text-fit"]||"both"===y["icon-text-fit"]?_:N;p=new u(k+F-B,A+j-D),d=new u(k+F+P+I,A+j-D),v=new u(k+F+P+I,A+j+H+q),m=new u(k+F-B,A+j+H+q)}else p=new u(w,S),d=new u(E,S),v=new u(E,x),m=new u(w,x);var R=s.getLayoutValue("icon-rotate",c,h)*Math.PI/180;if(o){var U=i[e.segment];if(e.y===U.y&&e.x===U.x&&e.segment+1<i.length){var z=i[e.segment+1];R+=Math.atan2(e.y-z.y,e.x-z.x)+Math.PI}else R+=Math.atan2(e.y-U.y,e.x-U.x)}if(R){var W=Math.sin(R),X=Math.cos(R),V=[X,-W,W,X];p=p.matMult(V),d=d.matMult(V),m=m.matMult(V),v=v.matMult(V)}return[new r(new u(e.x,e.y),p,d,m,v,t.image.rect,0,0,a,1/0)]}function s(e,t,n,i,s,f){for(var c=s.layout["text-rotate"]*Math.PI/180,h=s.layout["text-keep-upright"],p=t.positionedGlyphs,d=[],v=0;v<p.length;v++){var m=p[v],g=m.glyph,y=g.rect;if(y){var b,w=(m.x+g.advance/2)*n,E=a;f?(b=[],E=o(b,e,w,i,e.segment,!0),h&&(E=Math.min(E,o(b,e,w,i,e.segment,!1)))):b=[{anchorPoint:new u(e.x,e.y),offset:0,angle:0,maxScale:1/0,minScale:a}];for(var S=m.x+g.left,x=m.y-g.top,T=S+y.w,N=x+y.h,C=new u(S,x),k=new u(T,x),L=new u(S,N),A=new u(T,N),O=0;O<b.length;O++){var M=b[O],_=C,D=k,P=L,H=A;if(c){var B=Math.sin(c),j=Math.cos(c),F=[j,-B,B,j];_=_.matMult(F),D=D.matMult(F),P=P.matMult(F),H=H.matMult(F)}var I=Math.max(M.minScale,E),q=(e.angle+M.offset+2*Math.PI)%(2*Math.PI),R=(M.angle+M.offset+2*Math.PI)%(2*Math.PI);d.push(new r(M.anchorPoint,_,D,P,H,y,q,R,I,M.maxScale))}}}return d}function o(e,t,n,r,i,s){var o=!s;n<0&&(s=!s),s&&i++;var f=new u(t.x,t.y),c=r[i],h=1/0;n=Math.abs(n);for(var p=a;;){var d=f.dist(c),v=n/d,m=Math.atan2(c.y-f.y,c.x-f.x);if(s||(m+=Math.PI),e.push({anchorPoint:f,offset:o?Math.PI:0,minScale:v,maxScale:h,angle:(m+2*Math.PI)%(2*Math.PI)}),v<=p)break;for(f=c;f.equals(c);)if(i+=s?1:-1,c=r[i],!c)return v;var g=c.sub(f)._unit();f=f.sub(g._mult(d)),h=v}return p}var u=e("point-geometry");t.exports={getIconQuads:i,getGlyphQuads:s,SymbolQuad:r};var a=.5},{"point-geometry":448}],368:[function(e,t,n){"use strict";function r(e,t,n){for(var r=[],s=0,o=e.length;s<o;s++){var u=i(e[s].properties,t["text-field"]);if(u){u=u.toString();var a=t["text-transform"];"uppercase"===a?u=u.toLocaleUpperCase():"lowercase"===a&&(u=u.toLocaleLowerCase());for(var f=0;f<u.length;f++)n[u.charCodeAt(f)]=!0;r[s]=u}else r[s]=null}return r}var i=e("../util/token");t.exports=r},{"../util/token":407}],369:[function(e,t,n){"use strict";function r(e,t,n,r){this.codePoint=e,this.x=t,this.y=n,this.glyph=r}function i(e,t,n,r,i,s){this.positionedGlyphs=e,this.text=t,this.top=n,this.bottom=r,this.left=i,this.right=s}function s(e,t,n,s,u,a,f,l,c){for(var h=[],p=new i(h,e,c[1],c[1],c[0],c[0]),d=-17,v=0,m=d,g=0;g<e.length;g++){var y=e.charCodeAt(g),b=t[y];b&&(h.push(new r(y,v,m,b)),v+=b.advance+l)}return!!h.length&&(o(p,t,s,n,u,a,f,c),p)}function o(e,t,n,r,i,s,o,f){var l=null,p=0,d=0,v=0,m=0,g=e.positionedGlyphs;if(r)for(var y=0;y<g.length;y++){var b=g[y];if(b.x-=p,b.y+=n*v,b.x>r&&null!==l){var w=g[l+1].x;m=Math.max(w,m);for(var E=l+1;E<=y;E++)g[E].y+=n,g[E].x-=w;if(o){var S=l;c[g[l].codePoint]&&S--,u(g,t,d,S,o)}d=l+1,l=null,p+=w,v++}h[b.codePoint]&&(l=y)}var x=g[g.length-1],T=x.x+t[x.codePoint].advance;m=Math.max(m,T);var N=(v+1)*n;u(g,t,d,g.length-1,o),a(g,o,i,s,m,n,v,f),e.top+=-s*N,e.bottom=e.top+N,e.left+=-i*m,e.right=e.left+m}function u(e,t,n,r,i){for(var s=t[e[r].codePoint].advance,o=(e[r].x+s)*i,u=n;u<=r;u++)e[u].x-=o}function a(e,t,n,r,i,s,o,u){for(var a=(t-n)*i+u[0],f=(-r*(o+1)+.5)*s+u[1],l=0;l<e.length;l++)e[l].x+=a,e[l].y+=f}function f(e,t){if(!e||!e.rect)return null;var n=t["icon-offset"][0],r=t["icon-offset"][1],i=n-e.width/2,s=i+e.width,o=r-e.height/2,u=o+e.height;return new l(e,o,u,i,s)}function l(e,t,n,r,i){this.image=e,this.top=t,this.bottom=n,this.left=r,this.right=i}t.exports={shapeText:s,shapeIcon:f};var c={32:!0,8203:!0},h={32:!0,38:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0}},{}],370:[function(e,t,n){"use strict";function r(e,t){this.width=e,this.height=t,this.bin=new o(e,t),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=1,this.dirty=!0}function i(e,t,n,r,i,s,o,u,a,f,l){var c,h,p=r*t+n,d=u*s+o;if(l)for(d-=s,h=-1;h<=f;h++,p=((h+f)%f+r)*t+n,d+=s)for(c=-1;c<=a;c++)i[d+c]=e[p+(c+a)%a];else for(h=0;h<f;h++,p+=t,d+=s)for(c=0;c<a;c++)i[d+c]=e[p+c]}function s(e,t,n,r,i){this.rect=e,this.width=t,this.height=n,this.sdf=r,this.pixelRatio=i}var o=e("shelf-pack"),u=e("../util/browser"),a=e("../util/util");t.exports=r,r.prototype.allocateImage=function(e,t){e/=this.pixelRatio,t/=this.pixelRatio;var n=2,r=e+n+(4-(e+n)%4),i=t+n+(4-(t+n)%4),s=this.bin.packOne(r,i);return s?s:(a.warnOnce("SpriteAtlas out of space."),null)},r.prototype.getImage=function(e,t){if(this.images[e])return this.images[e];if(!this.sprite)return null;var n=this.sprite.getSpritePosition(e);if(!n.width||!n.height)return null;var r=this.allocateImage(n.width,n.height);if(!r)return null;var i=new s(r,n.width/n.pixelRatio,n.height/n.pixelRatio,n.sdf,n.pixelRatio/this.pixelRatio);return this.images[e]=i,this.copy(r,n,t),i},r.prototype.getPosition=function(e,t){var n=this.getImage(e,t),r=n&&n.rect;if(!r)return null;var i=n.width*n.pixelRatio,s=n.height*n.pixelRatio,o=1;return{size:[n.width,n.height],tl:[(r.x+o)/this.width,(r.y+o)/this.height],br:[(r.x+o+i)/this.width,(r.y+o+s)/this.height]}},r.prototype.allocate=function(){if(!this.data){var e=Math.floor(this.width*this.pixelRatio),t=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(e*t);for(var n=0;n<this.data.length;n++)this.data[n]=0}},r.prototype.copy=function(e,t,n){if(this.sprite.img.data){var r=new Uint32Array(this.sprite.img.data.buffer);this.allocate();var s=this.data,o=1;i(r,this.sprite.img.width,t.x,t.y,s,this.width*this.pixelRatio,(e.x+o)*this.pixelRatio,(e.y+o)*this.pixelRatio,t.width,t.height,n),this.dirty=!0}},r.prototype.setSprite=function(e){e&&(this.pixelRatio=u.devicePixelRatio>1?2:1,this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio)),this.sprite=e},r.prototype.addIcons=function(e,t){for(var n=0;n<e.length;n++)this.getImage(e[n]);t(null,this.images)},r.prototype.bind=function(e,t){var n=!1;this.texture?e.bindTexture(e.TEXTURE_2D,this.texture):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n=!0);var r=t?e.LINEAR:e.NEAREST;r!==this.filter&&(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),this.filter=r),this.dirty&&(this.allocate(),n?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1)}},{"../util/browser":392,"../util/util":408,"shelf-pack":477}],371:[function(e,t,n){"use strict";var r=e("../util/struct_array"),i=e("../util/util"),s=e("point-geometry"),o=t.exports=new r({members:[{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"glyphQuadStartIndex"},{type:"Uint16",name:"glyphQuadEndIndex"},{type:"Uint16",name:"iconQuadStartIndex"},{type:"Uint16",name:"iconQuadEndIndex"},{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int8",name:"index"}]});i.extendAll(o.prototype.StructType.prototype,{get anchorPoint(){return new s(this.anchorPointX,this.anchorPointY)}})},{"../util/struct_array":406,"../util/util":408,"point-geometry":448}],372:[function(e,t,n){"use strict";var r=e("../util/struct_array"),i=e("../util/util"),s=e("point-geometry"),o=e("./quads").SymbolQuad,u=t.exports=new r({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"tlX"},{type:"Float32",name:"tlY"},{type:"Float32",name:"trX"},{type:"Float32",name:"trY"},{type:"Float32",name:"blX"},{type:"Float32",name:"blY"},{type:"Float32",name:"brX"},{type:"Float32",name:"brY"},{type:"Int16",name:"texH"},{type:"Int16",name:"texW"},{type:"Int16",name:"texX"},{type:"Int16",name:"texY"},{type:"Float32",name:"anchorAngle"},{type:"Float32",name:"glyphAngle"},{type:"Float32",name:"maxScale"},{type:"Float32",name:"minScale"}]});i.extendAll(u.prototype.StructType.prototype,{get anchorPoint(){return new s(this.anchorPointX,this.anchorPointY)},get SymbolQuad(){return new o(this.anchorPoint,new s(this.tlX,this.tlY),new s(this.trX,this.trY),new s(this.blX,this.blY),new s(this.brX,this.brY),{x:this.texX,y:this.texY,h:this.texH,w:this.texW,height:this.texH,width:this.texW},this.anchorAngle,this.glyphAngle,this.minScale,this.maxScale)}})},{"../util/struct_array":406,"../util/util":408,"./quads":367,"point-geometry":448}],373:[function(e,t,n){"use strict";var r=e("../util/dom"),i=e("point-geometry"),s={scrollZoom:e("./handler/scroll_zoom"),boxZoom:e("./handler/box_zoom"),dragRotate:e("./handler/drag_rotate"),dragPan:e("./handler/drag_pan"),keyboard:e("./handler/keyboard"),doubleClickZoom:e("./handler/dblclick_zoom"),touchZoomRotate:e("./handler/touch_zoom_rotate")};t.exports=function(e,t){function n(e){y("mouseout",e)}function o(t){e.stop(),S=r.mousePos(w,t),y("mousedown",t)}function u(t){var n=e.dragRotate&&e.dragRotate.isActive();E&&!n&&y("contextmenu",E),E=null,y("mouseup",t)}function f(t){if(!(e.dragPan&&e.dragPan.isActive()||e.dragRotate&&e.dragRotate.isActive())){for(var n=t.toElement||t.target;n&&n!==w;)n=n.parentNode;n===w&&y("mousemove",t)}}function l(t){e.stop(),b("touchstart",t),!t.touches||t.touches.length>1||(x?(clearTimeout(x),x=null,y("dblclick",t)):x=setTimeout(d,300))}function c(e){b("touchmove",e)}function h(e){b("touchend",e)}function p(e){b("touchcancel",e)}function d(){x=null}function v(e){var t=r.mousePos(w,e);t.equals(S)&&y("click",e)}function m(e){y("dblclick",e),e.preventDefault()}function g(e){E=e,e.preventDefault()}function y(t,n){var i=r.mousePos(w,n);return e.fire(t,{lngLat:e.unproject(i),point:i,originalEvent:n})}function b(t,n){var s=r.touchPos(w,n),o=s.reduce(function(e,t,n,r){return e.add(t.div(r.length))},new i(0,0));return e.fire(t,{lngLat:e.unproject(o),point:o,lngLats:s.map(function(t){return e.unproject(t)},this),points:s,originalEvent:n})}var w=e.getCanvasContainer(),E=null,S=null,x=null;for(var T in s)e[T]=new s[T](e,t),t.interactive&&t[T]&&e[T].enable();w.addEventListener("mouseout",n,!1),w.addEventListener("mousedown",o,!1),w.addEventListener("mouseup",u,!1),w.addEventListener("mousemove",f,!1),w.addEventListener("touchstart",l,!1),w.addEventListener("touchend",h,!1),w.addEventListener("touchmove",c,!1),w.addEventListener("touchcancel",p,!1),w.addEventListener("click",v,!1),w.addEventListener("dblclick",m,!1),w.addEventListener("contextmenu",g,!1)}},{"../util/dom":394,"./handler/box_zoom":379,"./handler/dblclick_zoom":380,"./handler/drag_pan":381,"./handler/drag_rotate":382,"./handler/keyboard":383,"./handler/scroll_zoom":384,"./handler/touch_zoom_rotate":385,"point-geometry":448}],374:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../util/interpolate"),s=e("../util/browser"),o=e("../geo/lng_lat"),u=e("../geo/lng_lat_bounds"),a=e("point-geometry"),f=t.exports=function(){};r.extend(f.prototype,{getCenter:function(){return this.transform.center},setCenter:function(e,t){return this.jumpTo({center:e},t),this},panBy:function(e,t,n){return this.panTo(this.transform.center,r.extend({offset:a.convert(e).mult(-1)},t),n),this},panTo:function(e,t,n){return this.easeTo(r.extend({center:e},t),n)},getZoom:function(){return this.transform.zoom},setZoom:function(e,t){return this.jumpTo({zoom:e},t),this},zoomTo:function(e,t,n){return this.easeTo(r.extend({zoom:e},t),n)},zoomIn:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},zoomOut:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},getBearing:function(){return this.transform.bearing},setBearing:function(e,t){return this.jumpTo({bearing:e},t),this},rotateTo:function(e,t,n){return this.easeTo(r.extend({bearing:e},t),n)},resetNorth:function(e,t){return this.rotateTo(0,r.extend({duration:1e3},e),t),this},snapToNorth:function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},getPitch:function(){return this.transform.pitch},setPitch:function(e,t){return this.jumpTo({pitch:e},t),this},fitBounds:function(e,t,n){t=r.extend({padding:0,offset:[0,0],maxZoom:1/0},t),e=u.convert(e);var i=a.convert(t.offset),s=this.transform,o=s.project(e.getNorthWest()),f=s.project(e.getSouthEast()),c=f.sub(o),h=(s.width-2*t.padding-2*Math.abs(i.x))/c.x,p=(s.height-2*t.padding-2*Math.abs(i.y))/c.y;return t.center=s.unproject(o.add(f).div(2)),t.zoom=Math.min(s.scaleZoom(s.scale*Math.min(h,p)),t.maxZoom),t.bearing=0,t.linear?this.easeTo(t,n):this.flyTo(t,n)},jumpTo:function(e,t){this.stop();var n=this.transform,r=!1,i=!1,s=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),"center"in e&&(n.center=o.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(i=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(s=!0,n.pitch=+e.pitch),this.fire("movestart",t).fire("move",t),r&&this.fire("zoomstart",t).fire("zoom",t).fire("zoomend",t),i&&this.fire("rotate",t),s&&this.fire("pitch",t),this.fire("moveend",t)},easeTo:function(e,t){this.stop(),e=r.extend({offset:[0,0],duration:500,easing:r.ease},e);var n,s,u=this.transform,f=a.convert(e.offset),c=this.getZoom(),h=this.getBearing(),p=this.getPitch(),d="zoom"in e?+e.zoom:c,v="bearing"in e?this._normalizeBearing(e.bearing,h):h,m="pitch"in e?+e.pitch:p;"center"in e?(n=o.convert(e.center),s=u.centerPoint.add(f)):"around"in e?(n=o.convert(e.around),s=u.locationPoint(n)):(s=u.centerPoint.add(f),n=u.pointLocation(s));var g=u.locationPoint(n);return e.animate===!1&&(e.duration=0),this.zooming=d!==c,this.rotating=h!==v,this.pitching=m!==p,e.noMoveStart||this.fire("movestart",t),this.zooming&&this.fire("zoomstart",t),clearTimeout(this._onEaseEnd),this._ease(function(e){this.zooming&&(u.zoom=i(c,d,e)),this.rotating&&(u.bearing=i(h,v,e)),this.pitching&&(u.pitch=i(p,m,e)),u.setLocationAtPoint(n,g.add(s.sub(g)._mult(e))),this.fire("move",t),this.zooming&&this.fire("zoom",t),this.rotating&&this.fire("rotate",t),this.pitching&&this.fire("pitch",t)},function(){e.delayEndEvents?this._onEaseEnd=setTimeout(this._easeToEnd.bind(this,t),e.delayEndEvents):this._easeToEnd(t)}.bind(this),e),this},_easeToEnd:function(e){var t=this.zooming;this.zooming=!1,this.rotating=!1,this.pitching=!1,t&&this.fire("zoomend",e),this.fire("moveend",e)},flyTo:function(e,t){function n(e){var t=(C*C-N*N+(e?-1:1)*O*O*k*k)/(2*(e?C:N)*O*k);return Math.log(Math.sqrt(t*t+1)-t)}function s(e){return(Math.exp(e)-Math.exp(-e))/2}function u(e){return(Math.exp(e)+Math.exp(-e))/2}function f(e){return s(e)/u(e)}this.stop(),e=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},e);var c=this.transform,h=a.convert(e.offset),p=this.getZoom(),d=this.getBearing(),v=this.getPitch(),m="center"in e?o.convert(e.center):this.getCenter(),g="zoom"in e?+e.zoom:p,y="bearing"in e?this._normalizeBearing(e.bearing,d):d,b="pitch"in e?+e.pitch:v;Math.abs(c.center.lng)+Math.abs(m.lng)>180&&(c.center.lng>0&&m.lng<0?m.lng+=360:c.center.lng<0&&m.lng>0&&(m.lng-=360));var w=c.zoomScale(g-p),E=c.point,S="center"in e?c.project(m).sub(h.div(w)):E,x=c.worldSize,T=e.curve,N=Math.max(c.width,c.height),C=N/w,k=S.sub(E).mag();if("minZoom"in e){var L=r.clamp(Math.min(e.minZoom,p,g),c.minZoom,c.maxZoom),A=N/c.zoomScale(L-p);T=Math.sqrt(A/k*2)}var O=T*T,M=n(0),_=function(e){return u(M)/u(M+T*e)},D=function(e){return N*((u(M)*f(M+T*e)-s(M))/O)/k},P=(n(1)-M)/T;if(Math.abs(k)<1e-6){if(Math.abs(N-C)<1e-6)return this.easeTo(e);var H=C<N?-1:1;P=Math.abs(Math.log(C/N))/T,D=function(){return 0},_=function(e){return Math.exp(H*T*e)}}if("duration"in e)e.duration=+e.duration;else{var B="screenSpeed"in e?+e.screenSpeed/T:+e.speed;e.duration=1e3*P/B}return this.zooming=!0,d!==y&&(this.rotating=!0),v!==b&&(this.pitching=!0),this.fire("movestart",t),this.fire("zoomstart",t),this._ease(function(e){var n=e*P,r=D(n);c.zoom=p+c.scaleZoom(1/_(n)),c.center=c.unproject(E.add(S.sub(E).mult(r)),x),this.rotating&&(c.bearing=i(d,y,e)),this.pitching&&(c.pitch=i(v,b,e)),this.fire("move",t),this.fire("zoom",t),this.rotating&&this.fire("rotate",t),this.pitching&&this.fire("pitch",t)},function(){this.zooming=!1,this.rotating=!1,this.pitching=!1,this.fire("zoomend",t),this.fire("moveend",t)},e),this},isEasing:function(){return!!this._abortFn},stop:function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},_ease:function(e,t,n){this._finishFn=t,this._abortFn=s.timed(function(t){e.call(this,n.easing(t)),1===t&&this._finishEase()},n.animate===!1?0:n.duration,this)},_finishEase:function(){delete this._abortFn;var e=this._finishFn;delete this._finishFn,e.call(this)},_normalizeBearing:function(e,t){e=r.wrap(e,-180,180);var n=Math.abs(e-t);return Math.abs(e-360-t)<n&&(e-=360),Math.abs(e+360-t)<n&&(e+=360),e},_updateEasing:function(e,t,n){var i;if(this.ease){var s=this.ease,o=(Date.now()-s.start)/s.duration,u=s.easing(o+.01)-s.easing(o),a=.27/Math.sqrt(u*u+1e-4)*.01,f=Math.sqrt(.0729-a*a);i=r.bezier(a,f,.25,1)}else i=n?r.bezier.apply(r,n):r.ease;return this.ease={start:(new Date).getTime(),to:Math.pow(2,t),duration:e,easing:i},i}})},{"../geo/lng_lat":305,"../geo/lng_lat_bounds":306,"../util/browser":392,"../util/interpolate":402,"../util/util":408,"point-geometry":448}],375:[function(e,t,n){"use strict";function r(e){o.setOptions(this,e)}var i=e("./control"),s=e("../../util/dom"),o=e("../../util/util");t.exports=r,r.createAttributionString=function(e){var t=[];for(var n in e){var r=e[n];r.attribution&&t.indexOf(r.attribution)<0&&t.push(r.attribution)}return t.sort(function(e,t){return e.length-t.length}),t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}),t.join(" | ")},r.prototype=o.inherit(i,{options:{position:"bottom-right"},onAdd:function(e){var t="mapboxgl-ctrl-attrib",n=this._container=s.create("div",t,e.getContainer());return this._update(),e.on("source.load",this._update.bind(this)),e.on("source.change",this._update.bind(this)),e.on("source.remove",this._update.bind(this)),e.on("moveend",this._updateEditLink.bind(this)),n},_update:function(){this._map.style&&(this._container.innerHTML=r.createAttributionString(this._map.style.sources)),this._editLink=this._container.getElementsByClassName("mapbox-improve-map")[0],this._updateEditLink()},_updateEditLink:function(){if(this._editLink){var e=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+e.lng+"/"+e.lat+"/"+Math.round(this._map.getZoom()+1)}}})},{"../../util/dom":394,"../../util/util":408,"./control":376}],376:[function(e,t,n){"use strict";function r(){}var i=e("../../util/util"),s=e("../../util/evented");t.exports=r,r.prototype={addTo:function(e){this._map=e;var t=this._container=this.onAdd(e);if(this.options&&this.options.position){var n=this.options.position,r=e._controlCorners[n];t.className+=" mapboxgl-ctrl",n.indexOf("bottom")!==-1?r.insertBefore(t,r.firstChild):r.appendChild(t)}return this},remove:function(){return this._container.parentNode.removeChild(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this}},i.extend(r.prototype,s)},{"../../util/evented":400,"../../util/util":408}],377:[function(e,t,n){"use strict";function r(e){u.setOptions(this,e)}var i=e("./control"),s=e("../../util/browser"),o=e("../../util/dom"),u=e("../../util/util");t.exports=r;var a={enableHighAccuracy:!1,timeout:6e3};r.prototype=u.inherit(i,{options:{position:"top-right"},onAdd:function(e){var t="mapboxgl-ctrl",n=this._container=o.create("div",t+"-group",e.getContainer());return s.supportsGeolocation?(this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._geolocateButton=o.create("button",t+"-icon "+t+"-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),n):n},_onContextMenu:function(e){e.preventDefault()},_onClickGeolocate:function(){navigator.geolocation.getCurrentPosition(this._success.bind(this),this._error.bind(this),a),this._timeoutId=setTimeout(this._finish.bind(this),1e4)},_success:function(e){this._map.jumpTo({center:[e.coords.longitude,e.coords.latitude],zoom:17,bearing:0,pitch:0}),this.fire("geolocate",e),this._finish()},_error:function(e){this.fire("error",e),this._finish()},_finish:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}})},{"../../util/browser":392,"../../util/dom":394,"../../util/util":408,"./control":376}],378:[function(e,t,n){"use strict";function r(e){u.setOptions(this,e)}function i(e){return new MouseEvent(e.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:e.detail,view:e.view,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,movementX:e.movementX,movementY:e.movementY,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey})}var s=e("./control"),o=e("../../util/dom"),u=e("../../util/util");t.exports=r,r.prototype=u.inherit(s,{options:{position:"top-right"},onAdd:function(e){var t="mapboxgl-ctrl",n=this._container=o.create("div",t+"-group",e.getContainer());return this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton(t+"-icon "+t+"-zoom-in",e.zoomIn.bind(e)),this._zoomOutButton=this._createButton(t+"-icon "+t+"-zoom-out",e.zoomOut.bind(e)),this._compass=this._createButton(t+"-icon "+t+"-compass",e.resetNorth.bind(e)),this._compassArrow=o.create("div","arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),e.on("rotate",this._rotateCompassArrow.bind(this)),this._rotateCompassArrow(),this._el=e.getCanvasContainer(),n},_onContextMenu:function(e){e.preventDefault()},_onCompassDown:function(e){0===e.button&&(o.disableDrag(),document.addEventListener("mousemove",this._onCompassMove),document.addEventListener("mouseup",this._onCompassUp),this._el.dispatchEvent(i(e)),e.stopPropagation())},_onCompassMove:function(e){0===e.button&&(this._el.dispatchEvent(i(e)),e.stopPropagation())},_onCompassUp:function(e){0===e.button&&(document.removeEventListener("mousemove",this._onCompassMove),document.removeEventListener("mouseup",this._onCompassUp),o.enableDrag(),this._el.dispatchEvent(i(e)),e.stopPropagation())},_createButton:function(e,t){var n=o.create("button",e,this._container);return n.type="button",n.addEventListener("click",function(){t()}),n},_rotateCompassArrow:function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e}})},{"../../util/dom":394,"../../util/util":408,"./control":376}],379:[function(e,t,n){"use strict";function r(e){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),o.bindHandlers(this)}var i=e("../../util/dom"),s=e("../../geo/lng_lat_bounds"),o=e("../../util/util");t.exports=r,r.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onMouseDown,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},_onMouseDown:function(e){e.shiftKey&&0===e.button&&(document.addEventListener("mousemove",this._onMouseMove,!1),document.addEventListener("keydown",this._onKeyDown,!1),document.addEventListener("mouseup",this._onMouseUp,!1),i.disableDrag(),this._startPos=i.mousePos(this._el,e),this._active=!0)},_onMouseMove:function(e){var t=this._startPos,n=i.mousePos(this._el,e);this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var r=Math.min(t.x,n.x),s=Math.max(t.x,n.x),o=Math.min(t.y,n.y),u=Math.max(t.y,n.y);i.setTransform(this._box,"translate("+r+"px,"+o+"px)"),this._box.style.width=s-r+"px",this._box.style.height=u-o+"px"},_onMouseUp:function(e){if(0===e.button){var t=this._startPos,n=i.mousePos(this._el,e),r=new s(this._map.unproject(t),this._map.unproject(n));this._finish(),t.x===n.x&&t.y===n.y?this._fireEvent("boxzoomcancel",e):this._map.fitBounds(r,{linear:!0}).fire("boxzoomend",{originalEvent:e,boxZoomBounds:r})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},_finish:function(){this._active=!1,document.removeEventListener("mousemove",this._onMouseMove,!1),document.removeEventListener("keydown",this._onKeyDown,!1),document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.parentNode.removeChild(this._box),this._box=null),i.enableDrag()},_fireEvent:function(e,t){return this._map.fire(e,{originalEvent:t})}}},{"../../geo/lng_lat_bounds":306,"../../util/dom":394,"../../util/util":408}],380:[function(e,t,n){"use strict";function r(e){this._map=e,this._onDblClick=this._onDblClick.bind(this)}t.exports=r,r.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},_onDblClick:function(e){this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)}}},{}],381:[function(e,t,n){"use strict";function r(e){this._map=e,this._el=e.getCanvasContainer(),s.bindHandlers(this)}var i=e("../../util/dom"),s=e("../../util/util");t.exports=r;var o=.3,u=s.bezier(0,0,o,1),a=1400,f=2500;r.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},_onDown:function(e){this._ignoreEvent(e)||this.isActive()||(e.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp)),this._active=!1,this._startPos=this._pos=i.mousePos(this._el,e),this._inertia=[[Date.now(),this._pos]])},_onMove:function(e){if(!this._ignoreEvent(e)){this.isActive()||(this._active=!0,this._fireEvent("dragstart",e),this._fireEvent("movestart",e));var t=i.mousePos(this._el,e),n=this._map;n.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),t]),n.transform.setLocationAtPoint(n.transform.pointLocation(this._pos),t),this._fireEvent("drag",e),this._fireEvent("move",e),this._pos=t,e.preventDefault()}},_onUp:function(e){if(this.isActive()){this._active=!1,this._fireEvent("dragend",e),this._drainInertiaBuffer();var t=function(){this._fireEvent("moveend",e)}.bind(this),n=this._inertia;if(n.length<2)return void t();var r=n[n.length-1],i=n[0],s=r[1].sub(i[1]),c=(r[0]-i[0])/1e3;if(0===c||r[1].equals(i[1]))return void t();var h=s.mult(o/c),p=h.mag();p>a&&(p=a,h._unit()._mult(p));var d=p/(f*o),v=h.mult(-d/2);this._map.panBy(v,{duration:1e3*d,easing:u,noMoveStart:!0},{originalEvent:e})}},_onMouseUp:function(e){this._ignoreEvent(e)||(this._onUp(e),document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp))},_onTouchEnd:function(e){this._ignoreEvent(e)||(this._onUp(e),document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd))},_fireEvent:function(e,t){return this._map.fire(e,{originalEvent:t})},_ignoreEvent:function(e){var t=this._map;if(t.boxZoom&&t.boxZoom.isActive())return!0;if(t.dragRotate&&t.dragRotate.isActive())return!0;if(e.touches)return e.touches.length>1;if(e.ctrlKey)return!0;var n=1,r=0;return"mousemove"===e.type?e.buttons&0===n:e.button!==r},_drainInertiaBuffer:function(){for(var e=this._inertia,t=Date.now(),n=160;e.length>0&&t-e[0][0]>n;)e.shift()}}},{"../../util/dom":394,"../../util/util":408}],382:[function(e,t,n){"use strict";function r(e,t){this._map=e,this._el=e.getCanvasContainer(),this._bearingSnap=t.bearingSnap,o.bindHandlers(this)}var i=e("../../util/dom"),s=e("point-geometry"),o=e("../../util/util");t.exports=r;var u=.25,a=o.bezier(0,0,u,1),f=180,l=720;r.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},_onDown:function(e){if(!this._ignoreEvent(e)&&!this.isActive()){document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=i.mousePos(this._el,e),this._center=this._map.transform.centerPoint;var t=this._startPos.sub(this._center),n=t.mag();n<200&&(this._center=this._startPos.add((new s(-200,0))._rotate(t.angle()))),e.preventDefault()}},_onMove:function(e){if(!this._ignoreEvent(e)){this.isActive()||(this._active=!0,this._fireEvent("rotatestart",e),this._fireEvent("movestart",e));var t=this._map;t.stop();var n=this._pos,r=i.mousePos(this._el,e),s=this._center,o=n.sub(s).angleWith(r.sub(s))/Math.PI*180,u=t.getBearing()-o,a=this._inertia,f=a[a.length-1];this._drainInertiaBuffer(),a.push([Date.now(),t._normalizeBearing(u,f[1])]),t.transform.bearing=u,this._fireEvent("rotate",e),this._fireEvent("move",e),this._pos=r}},_onUp:function(e){if(!this._ignoreEvent(e)&&(document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onUp),this.isActive())){this._active=!1,this._fireEvent("rotateend",e),this._drainInertiaBuffer();var t=this._map,n=t.getBearing(),r=this._inertia,i=function(){Math.abs(n)<this._bearingSnap?t.resetNorth({noMoveStart:!0},{originalEvent:e}):this._fireEvent("moveend",e)}.bind(this);if(r.length<2)return void i();var s=r[0],o=r[r.length-1],h=r[r.length-2],p=t._normalizeBearing(n,h[1]),d=o[1]-s[1],v=d<0?-1:1,m=(o[0]-s[0])/1e3;if(0===d||0===m)return void i();var g=Math.abs(d*(u/m));g>f&&(g=f);var y=g/(l*u),b=v*g*(y/2);p+=b,Math.abs(t._normalizeBearing(p,0))<this._bearingSnap&&(p=t._normalizeBearing(0,p)),t.rotateTo(p,{duration:1e3*y,easing:a,noMoveStart:!0},{originalEvent:e})}},_fireEvent:function(e,t){return this._map.fire(e,{originalEvent:t})},_ignoreEvent:function(e){var t=this._map;if(t.boxZoom&&t.boxZoom.isActive())return!0;if(t.dragPan&&t.dragPan.isActive())return!0;if(e.touches)return e.touches.length>1;var n=e.ctrlKey?1:2,r=e.ctrlKey?0:2;return"mousemove"===e.type?e.buttons&0===n:e.button!==r},_drainInertiaBuffer:function(){for(var e=this._inertia,t=Date.now(),n=160;e.length>0&&t-e[0][0]>n;)e.shift()}}},{"../../util/dom":394,"../../util/util":408,"point-geometry":448}],383:[function(e,t,n){"use strict";function r(e){this._map=e,this._el=e.getCanvasContainer(),this._onKeyDown=this._onKeyDown.bind(this)}t.exports=r;var i=80,s=2,o=5;r.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=this._map,n={originalEvent:e};if(!t.isEasing())switch(e.keyCode){case 61:case 107:case 171:case 187:t.zoomTo(Math.round(t.getZoom())+(e.shiftKey?2:1),n);break;case 189:case 109:case 173:t.zoomTo(Math.round(t.getZoom())-(e.shiftKey?2:1),n);break;case 37:e.shiftKey?t.easeTo({bearing:t.getBearing()-s},n):(e.preventDefault(),t.panBy([-i,0],n));break;case 39:e.shiftKey?t.easeTo({bearing:t.getBearing()+s},n):(e.preventDefault(),t.panBy([i,0],n));break;case 38:e.shiftKey?t.easeTo({pitch:t.getPitch()+o},n):(e.preventDefault(),t.panBy([0,-i],n));break;case 40:e.shiftKey?t.easeTo({pitch:Math.max(t.getPitch()-o,0)},n):(e.preventDefault(),t.panBy([0,i],n))}}}}},{}],384:[function(e,t,n){"use strict";function r(e){this._map=e,this._el=e.getCanvasContainer(),o.bindHandlers(this)}var i=e("../../util/dom"),s=e("../../util/browser"),o=e("../../util/util");t.exports=r;var u="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",a=u.indexOf("firefox")!==-1,f=u.indexOf("safari")!==-1&&u.indexOf("chrom")===-1;r.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},_onWheel:function(e){var t;"wheel"===e.type?(t=e.deltaY,a&&e.deltaMode===window.WheelEvent.DOM_DELTA_PIXEL&&(t/=s.devicePixelRatio),e.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(t*=40)):"mousewheel"===e.type&&(t=-e.wheelDeltaY,f&&(t/=3));var n=s.now(),r=n-(this._time||0);this._pos=i.mousePos(this._el,e),this._time=n,0!==t&&t%4.000244140625===0?(this._type="wheel",t=Math.floor(t/4)):0!==t&&Math.abs(t)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(r*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&this._zoom(-t,e),e.preventDefault()},_onTimeout:function(){this._type="wheel",this._zoom(-this._lastValue)},_zoom:function(e,t){if(0!==e){var n=this._map,r=2/(1+Math.exp(-Math.abs(e/100)));e<0&&0!==r&&(r=1/r);var i=n.ease?n.ease.to:n.transform.scale,s=n.transform.scaleZoom(i*r);n.zoomTo(s,{duration:0,around:n.unproject(this._pos),delayEndEvents:200},{originalEvent:t})}}}},{"../../util/browser":392,"../../util/dom":394,"../../util/util":408}],385:[function(e,t,n){"use strict";function r(e){this._map=e,this._el=e.getCanvasContainer(),s.bindHandlers(this)}var i=e("../../util/dom"),s=e("../../util/util");t.exports=r;var o=.15,u=s.bezier(0,0,o,1),a=12,f=2.5,l=.15,c=4;r.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},disableRotation:function(){this._rotationDisabled=!0},enableRotation:function(){this._rotationDisabled=!1},_onStart:function(e){if(2===e.touches.length){var t=i.mousePos(this._el,e.touches[0]),n=i.mousePos(this._el,e.touches[1]);this._startVec=t.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],document.addEventListener("touchmove",this._onMove,!1),document.addEventListener("touchend",this._onEnd,!1)}},_onMove:function(e){if(2===e.touches.length){var t=i.mousePos(this._el,e.touches[0]),n=i.mousePos(this._el,e.touches[1]),r=t.add(n).div(2),s=t.sub(n),o=s.mag()/this._startVec.mag(),u=this._rotationDisabled?0:180*s.angleWith(this._startVec)/Math.PI,a=this._map;if(this._gestureIntent){var f={duration:0,around:a.unproject(r)};"rotate"===this._gestureIntent&&(f.bearing=this._startBearing+u),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(f.zoom=a.transform.scaleZoom(this._startScale*o)),a.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),o,r]),a.easeTo(f,{originalEvent:e})}else{var p=Math.abs(1-o)>l,d=Math.abs(u)>c;d?this._gestureIntent="rotate":p&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=s,this._startScale=a.transform.scale,this._startBearing=a.transform.bearing)}e.preventDefault()}},_onEnd:function(e){document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var t=this._inertia,n=this._map;if(t.length<2)return void n.snapToNorth({},{originalEvent:e});var r=t[t.length-1],i=t[0],s=n.transform.scaleZoom(this._startScale*r[1]),l=n.transform.scaleZoom(this._startScale*i[1]),c=s-l,h=(r[0]-i[0])/1e3,p=r[2];if(0===h||s===l)return void n.snapToNorth({},{originalEvent:e});var d=c*o/h;Math.abs(d)>f&&(d=d>0?f:-f);var v=1e3*Math.abs(d/(a*o)),m=s+d*v/2e3;m<0&&(m=0),n.easeTo({zoom:m,duration:v,easing:u,around:n.unproject(p)},{originalEvent:e})},_drainInertiaBuffer:function(){for(var e=this._inertia,t=Date.now(),n=160;e.length>2&&t-e[0][0]>n;)e.shift()}}},{"../../util/dom":394,"../../util/util":408}],386:[function(e,t,n){"use strict";function r(){i.bindAll(["_onHashChange","_updateHash"],this)}t.exports=r;var i=e("../util/util");r.prototype={addTo:function(e){return this._map=e,window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},remove:function(){return window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},_onHashChange:function(){var e=location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0)}),!0)},_updateHash:function(){var e=this._map.getCenter(),t=this._map.getZoom(),n=this._map.getBearing(),r=Math.max(0,Math.ceil(Math.log(t)/Math.LN2)),i="#"+Math.round(100*t)/100+"/"+e.lat.toFixed(r)+"/"+e.lng.toFixed(r)+(n?"/"+Math.round(10*n)/10:"");window.history.replaceState("","",i)}}},{"../util/util":408}],387:[function(e,t,n){"use strict";function r(e){e.parentNode&&e.parentNode.removeChild(e)}var i=e("../util/canvas"),s=e("../util/util"),o=e("../util/browser"),u=e("../util/browser").window,a=e("../util/evented"),f=e("../util/dom"),l=e("../style/style"),c=e("../style/animation_loop"),h=e("../render/painter"),p=e("../geo/transform"),d=e("./hash"),v=e("./bind_handlers"),m=e("./camera"),g=e("../geo/lng_lat"),y=e("../geo/lng_lat_bounds"),b=e("point-geometry"),w=e("./control/attribution"),E=0,S=20,x={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:E,maxZoom:S,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,workerCount:Math.max(o.hardwareConcurrency-1,1)},T=t.exports=function(e){if(e=s.extend({},x,e),e.workerCount<1)throw new Error("workerCount must an integer greater than or equal to 1.");this._interactive=e.interactive,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._workerCount=e.workerCount,this._bearingSnap=e.bearingSnap,"string"==typeof e.container?this._container=document.getElementById(e.container):this._container=e.container,this.animationLoop=new c,this.transform=new p(e.minZoom,e.maxZoom),e.maxBounds&&this.setMaxBounds(e.maxBounds),s.bindAll(["_forwardStyleEvent","_forwardSourceEvent","_forwardLayerEvent","_forwardTileEvent","_onStyleLoad","_onStyleChange","_onSourceAdd","_onSourceRemove","_onSourceUpdate","_onWindowOnline","_onWindowResize","_update","_render"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){this.animationLoop.set(300),this._rerender()}.bind(this)),"undefined"!=typeof u&&(u.addEventListener("online",this._onWindowOnline,!1),u.addEventListener("resize",this._onWindowResize,!1)),v(this,e),this._hash=e.hash&&(new d).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this.stacks={},this._classes=[],this.resize(),e.classes&&this.setClasses(e.classes),e.style&&this.setStyle(e.style),e.attributionControl&&this.addControl(new w(e.attributionControl));var t=this.fire.bind(this,"error");this.on("style.error",t),this.on("source.error",t),this.on("tile.error",t),this.on("layer.error",t)};s.extend(T.prototype,a),s.extend(T.prototype,m.prototype),s.extend(T.prototype,{addControl:function(e){return e.addTo(this),this},addClass:function(e,t){return this._classes.indexOf(e)>=0||""===e?this:(this._classes.push(e),this._classOptions=t,this.style&&this.style.updateClasses(),this._update(!0))},removeClass:function(e,t){var n=this._classes.indexOf(e);return n<0||""===e?this:(this._classes.splice(n,1),this._classOptions=t,this.style&&this.style.updateClasses(),this._update(!0))},setClasses:function(e,t){for(var n={},r=0;r<e.length;r++)""!==e[r]&&(n[e[r]]=!0);return this._classes=Object.keys(n),this._classOptions=t,this.style&&this.style.updateClasses(),this._update(!0)},hasClass:function(e){return this._classes.indexOf(e)>=0},getClasses:function(){return this._classes},resize:function(){var e=0,t=0;return this._container&&(e=this._container.offsetWidth||400,t=this._container.offsetHeight||300),this._canvas.resize(e,t),this.transform.resize(e,t),this.painter.resize(e,t),this.fire("movestart").fire("move").fire("resize").fire("moveend")},getBounds:function(){var e=new y(this.transform.pointLocation(new b(0,0)),this.transform.pointLocation(this.transform.size));return(this.transform.angle||this.transform.pitch)&&(e.extend(this.transform.pointLocation(new b(this.transform.size.x,0))),e.extend(this.transform.pointLocation(new b(0,this.transform.size.y)))),e},setMaxBounds:function(e){if(e){var t=y.convert(e);this.transform.lngRange=[t.getWest(),t.getEast()],this.transform.latRange=[t.getSouth(),t.getNorth()],this.transform._constrain(),this._update()}else null!==e&&void 0!==e||(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},setMinZoom:function(e){if(e=null===e||void 0===e?E:e,e>=E&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between "+E+" and the current maxZoom, inclusive")},setMaxZoom:function(e){if(e=null===e||void 0===e?S:e,e>=this.transform.minZoom&&e<=S)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be between the current minZoom and "+S+", inclusive")},project:function(e){return this.transform.locationPoint(g.convert(e))},unproject:function(e){return this.transform.pointLocation(b.convert(e))},queryRenderedFeatures:function(){function e(e){return e instanceof b||Array.isArray(e)}var t,n={};return 2===arguments.length?(t=arguments[0],n=arguments[1]):1===arguments.length&&e(arguments[0])?t=arguments[0]:1===arguments.length&&(n=arguments[0]),this.style.queryRenderedFeatures(this._makeQueryGeometry(t),n,this.transform.zoom,this.transform.angle)},_makeQueryGeometry:function(e){void 0===e&&(e=[b.convert([0,0]),b.convert([this.transform.width,this.transform.height])]);var t,n=e instanceof b||"number"==typeof e[0];if(n){var r=b.convert(e);t=[r]}else{var i=[b.convert(e[0]),b.convert(e[1])];t=[i[0],new b(i[1].x,i[0].y),i[1],new b(i[0].x,i[1].y),i[0]]}return t=t.map(function(e){return this.transform.pointCoordinate(e)}.bind(this))},querySourceFeatures:function(e,t){return this.style.querySourceFeatures(e,t)},setStyle:function(e){return this.style&&(this.style.off("load",this._onStyleLoad).off("error",this._forwardStyleEvent).off("change",this._onStyleChange).off("source.add",this._onSourceAdd).off("source.remove",this._onSourceRemove).off("source.load",this._onSourceUpdate).off("source.error",this._forwardSourceEvent).off("source.change",this._onSourceUpdate).off("layer.add",this._forwardLayerEvent).off("layer.remove",this._forwardLayerEvent).off("layer.error",this._forwardLayerEvent).off("tile.add",this._forwardTileEvent).off("tile.remove",this._forwardTileEvent).off("tile.load",this._update).off("tile.error",this._forwardTileEvent).off("tile.stats",this._forwardTileEvent)._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),e?(e instanceof l?this.style=e:this.style=new l(e,this.animationLoop,this._workerCount),this.style.on("load",this._onStyleLoad).on("error",this._forwardStyleEvent).on("change",this._onStyleChange).on("source.add",this._onSourceAdd).on("source.remove",this._onSourceRemove).on("source.load",this._onSourceUpdate).on("source.error",this._forwardSourceEvent).on("source.change",this._onSourceUpdate).on("layer.add",this._forwardLayerEvent).on("layer.remove",this._forwardLayerEvent).on("layer.error",this._forwardLayerEvent).on("tile.add",this._forwardTileEvent).on("tile.remove",this._forwardTileEvent).on("tile.load",this._update).on("tile.error",this._forwardTileEvent).on("tile.stats",this._forwardTileEvent),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},getStyle:function(){if(this.style)return this.style.serialize()},addSource:function(e,t){return this.style.addSource(e,t),this._update(!0),this},addSourceType:function(e,t,n){return this.style.addSourceType(e,t,n)},removeSource:function(e){return this.style.removeSource(e),this._update(!0),this},getSource:function(e){return this.style.getSource(e)},addLayer:function(e,t){return this.style.addLayer(e,t),this._update(!0),this},removeLayer:function(e){return this.style.removeLayer(e),this._update(!0),this},getLayer:function(e){return this.style.getLayer(e)},setFilter:function(e,t){return this.style.setFilter(e,t),this._update(!0),this},setLayerZoomRange:function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0),this},getFilter:function(e){return this.style.getFilter(e)},setPaintProperty:function(e,t,n,r){return this.style.setPaintProperty(e,t,n,r),this._update(!0),this},getPaintProperty:function(e,t,n){return this.style.getPaintProperty(e,t,n)},setLayoutProperty:function(e,t,n){return this.style.setLayoutProperty(e,t,n),this._update(!0),this},getLayoutProperty:function(e,t){return this.style.getLayoutProperty(e,t)},getContainer:function(){return this._container},getCanvasContainer:function(){return this._canvasContainer},getCanvas:function(){return this._canvas.getElement()},_setupContainer:function(){var e=this._container;e.classList.add("mapboxgl-map");var t=this._canvasContainer=f.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=new i(this,t);var n=this._controlContainer=f.create("div","mapboxgl-control-container",e),r=this._controlCorners={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){r[e]=f.create("div","mapboxgl-ctrl-"+e,n)})},_setupPainter:function(){var e=this._canvas.getWebGLContext({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer});return e?void (this.painter=new h(e,this.transform)):void this.fire("error",{error:new Error("Failed to initialize WebGL")})},_contextLost:function(e){e.preventDefault(),this._frameId&&o.cancelFrame(this._frameId),this.fire("webglcontextlost",{originalEvent:e})},_contextRestored:function(e){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:e})},loaded:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&!!this.style.loaded()},_update:function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this._rerender(),this):this},_render:function(){try{this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{debug:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,vertices:this.vertices,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender()}catch(e){this.fire("error",{error:e})}return this},remove:function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this.setStyle(null),"undefined"!=typeof u&&u.removeEventListener("resize",this._onWindowResize,!1);var e=this.painter.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),r(this._canvasContainer),r(this._controlContainer),this._container.classList.remove("mapboxgl-map")},_rerender:function(){this.style&&!this._frameId&&(this._frameId=o.frame(this._render))},_forwardStyleEvent:function(e){this.fire("style."+e.type,s.extend({style:e.target},e))},_forwardSourceEvent:function(e){this.fire(e.type,s.extend({style:e.target},e))},_forwardLayerEvent:function(e){this.fire(e.type,s.extend({style:e.target},e))},_forwardTileEvent:function(e){this.fire(e.type,s.extend({style:e.target},e))},_onStyleLoad:function(e){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1}),this._forwardStyleEvent(e)},_onStyleChange:function(e){this._update(!0),this._forwardStyleEvent(e)},_onSourceAdd:function(e){var t=e.source;t.onAdd&&t.onAdd(this),this._forwardSourceEvent(e)},_onSourceRemove:function(e){var t=e.source;t.onRemove&&t.onRemove(this),this._forwardSourceEvent(e)},_onSourceUpdate:function(e){this._update(),this._forwardSourceEvent(e)},_onWindowOnline:function(){this._update()},_onWindowResize:function(){this._trackResize&&this.stop().resize()._update()}}),s.extendAll(T.prototype,{_showTileBoundaries:!1,get showTileBoundaries(){return this._showTileBoundaries},set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},_showCollisionBoxes:!1,get showCollisionBoxes(){return this._showCollisionBoxes},set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,this.style._redoPlacement())},_showOverdrawInspector:!1,get showOverdrawInspector(){return this._showOverdrawInspector},set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},_repaint:!1,get repaint(){return this._repaint},set repaint(e){this._repaint=e,this._update()},_vertices:!1,get vertices(){return this._vertices},set vertices(e){this._vertices=e,this._update()}})},{"../geo/lng_lat":305,"../geo/lng_lat_bounds":306,"../geo/transform":307,"../render/painter":321,"../style/animation_loop":341,"../style/style":344,"../util/browser":392,"../util/canvas":393,"../util/dom":394,"../util/evented":400,"../util/util":408,"./bind_handlers":373,"./camera":374,"./control/attribution":375,"./hash":386,"point-geometry":448}],388:[function(e,t,n){"use strict";function r(e,t){e||(e=i.create("div")),e.classList.add("mapboxgl-marker"),this._el=e,this._offset=o.convert(t&&t.offset||[0,0]),this._update=this._update.bind(this)}t.exports=r;var i=e("../util/dom"),s=e("../geo/lng_lat"),o=e("point-geometry");r.prototype={addTo:function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._el),e.on("move",this._update),this._update(),this},remove:function(){this._map&&(this._map.off("move",this._update),this._map=null);var e=this._el.parentNode;return e&&e.removeChild(this._el),this},getLngLat:function(){return this._lngLat},setLngLat:function(e){return this._lngLat=s.convert(e),this._update(),this},getElement:function(){return this._el},_update:function(){if(this._map){var e=this._map.project(this._lngLat)._add(this._offset);i.setTransform(this._el,"translate("+e.x+"px,"+e.y+"px)")}}}},{"../geo/lng_lat":305,"../util/dom":394,"point-geometry":448}],389:[function(e,t,n){"use strict";function r(e){i.setOptions(this,e),i.bindAll(["_update","_onClickClose"],this)}t.exports=r;var i=e("../util/util"),s=e("../util/evented"),o=e("../util/dom"),u=e("../geo/lng_lat");r.prototype=i.inherit(s,{options:{closeButton:!0,closeOnClick:!0},addTo:function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},remove:function(){return this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},getLngLat:function(){return this._lngLat},setLngLat:function(e){return this._lngLat=u.convert(e),this._update(),this},setText:function(e){return this.setDOMContent(document.createTextNode(e))},setHTML:function(e){var t,n=document.createDocumentFragment(),r=document.createElement("body");for(r.innerHTML=e;;){if(t=r.firstChild,!t)break;n.appendChild(t)}return this.setDOMContent(n)},setDOMContent:function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},_createContent:function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._content=o.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},_update:function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content));var e=this._map.project(this._lngLat).round(),t=this.options.anchor;if(!t){var n=this._container.offsetWidth,r=this._container.offsetHeight;t=e.y<r?["top"]:e.y>this._map.transform.height-r?["bottom"]:[],e.x<n/2?t.push("left"):e.x>this._map.transform.width-n/2&&t.push("right"),t=0===t.length?"bottom":t.join("-")}var i={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},s=this._container.classList;for(var u in i)s.remove("mapboxgl-popup-anchor-"+u);s.add("mapboxgl-popup-anchor-"+t),o.setTransform(this._container,i[t]+" translate("+e.x+"px,"+e.y+"px)")}},_onClickClose:function(){this.remove()}})},{"../geo/lng_lat":305,"../util/dom":394,"../util/evented":400,"../util/util":408}],390:[function(e,t,n){"use strict";function r(e,t){this.target=e,this.parent=t,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener("message",this.receive,!1)}t.exports=r,r.prototype.receive=function(e){function t(e,t,n){this.postMessage({type:"<response>",id:String(i),error:e?String(e):null,data:t},n)}var n,r=e.data,i=r.id;if("<response>"===r.type)n=this.callbacks[r.id],delete this.callbacks[r.id],n&&n(r.error||null,r.data);else if("undefined"!=typeof r.id&&this.parent[r.type])this.parent[r.type](r.data,t.bind(this));else if("undefined"!=typeof r.id&&this.parent.workerSources){var s=r.type.split(".");this.parent.workerSources[s[0]][s[1]](r.data,t.bind(this))}else this.parent[r.type](r.data)},r.prototype.send=function(e,t,n,r){var i=null;n&&(this.callbacks[i=this.callbackID++]=n),this.postMessage({type:e,id:String(i),data:t},r)},r.prototype.postMessage=function(e,t){this.target.postMessage(e,t)}},{}],391:[function(e,t,n){"use strict";function r(e){var t=document.createElement("a");return t.href=e,t.protocol===document.location.protocol&&t.host===document.location.host}n.getJSON=function(e,t){var n=new XMLHttpRequest;return n.open("GET",e,!0),n.setRequestHeader("Accept","application/json"),n.onerror=function(e){t(e)},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var e;try{e=JSON.parse(n.response)}catch(e){return t(e)}t(null,e)}else t(new Error(n.statusText))},n.send(),n},n.getArrayBuffer=function(e,t){var n=new XMLHttpRequest;return n.open("GET",e,!0),n.responseType="arraybuffer",n.onerror=function(e){t(e)},n.onload=function(){n.status>=200&&n.status<300&&n.response?t(null,n.response):t(new Error(n.statusText))},n.send(),n},n.getImage=function(e,t){return n.getArrayBuffer(e,function(e,n){if(e)return t(e);var r=new Image;r.onload=function(){t(null,r),(window.URL||window.webkitURL).revokeObjectURL(r.src)};var i=new Blob([new Uint8Array(n)],{type:"image/png"});return r.src=(window.URL||window.webkitURL).createObjectURL(i),r.getData=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=r.width,e.height=r.height,t.drawImage(r,0,0),t.getImageData(0,0,r.width,r.height).data},r})},n.getVideo=function(e,t){var n=document.createElement("video");n.onloadstart=function(){t(null,n)};for(var i=0;i<e.length;i++){var s=document.createElement("source");r(e[i])||(n.crossOrigin="Anonymous"),s.src=e[i],n.appendChild(s)}return n.getData=function(){return n},n}},{}],392:[function(e,t,n){"use strict";n.window=window,t.exports.now=function(){return window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date)}();var r=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;n.frame=function(e){return r(e)};var i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;n.cancelFrame=function(e){i(e)},n.timed=function(e,r,i){function s(f){o||(f=t.exports.now(),f>=u+r?e.call(i,1):(e.call(i,(f-u)/r),n.frame(s)))}if(!r)return e.call(i,1),null;var o=!1,u=t.exports.now();return n.frame(s),function(){o=!0}},n.supported=e("mapbox-gl-supported"),n.hardwareConcurrency=navigator.hardwareConcurrency||4,Object.defineProperty(n,"devicePixelRatio",{get:function(){return window.devicePixelRatio}}),n.supportsWebp=!1;var s=document.createElement("img");s.onload=function(){n.supportsWebp=!0},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=",n.supportsGeolocation=!!navigator.geolocation},{"mapbox-gl-supported":293}],393:[function(e,t,n){"use strict";function r(e,t){this.canvas=document.createElement("canvas"),e&&t&&(this.canvas.style.position="absolute",this.canvas.classList.add("mapboxgl-canvas"),this.canvas.addEventListener("webglcontextlost",e._contextLost.bind(e),!1),this.canvas.addEventListener("webglcontextrestored",e._contextRestored.bind(e),!1),this.canvas.setAttribute("tabindex",0),t.appendChild(this.canvas))}var i=e("../util"),s=e("mapbox-gl-supported");t.exports=r,r.prototype.resize=function(e,t){var n=window.devicePixelRatio||1;this.canvas.width=n*e,this.canvas.height=n*t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px"},r.prototype.getWebGLContext=function(e){return e=i.extend({},e,s.webGLContextAttributes),this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e)},r.prototype.getElement=function(){return this.canvas}},{"../util":408,"mapbox-gl-supported":293}],394:[function(e,t,n){"use strict";function r(e){for(var t=0;t<e.length;t++)if(e[t]in u)return e[t]}function i(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",i,!0)}var s=e("point-geometry");n.create=function(e,t,n){var r=document.createElement(e);return t&&(r.className=t),n&&n.appendChild(r),r};var o,u=document.documentElement.style,a=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){a&&(o=u[a],u[a]="none")},n.enableDrag=function(){a&&(u[a]=o)};var f=r(["transform","WebkitTransform"]);n.setTransform=function(e,t){e.style[f]=t},n.suppressClick=function(){window.addEventListener("click",i,!0),window.setTimeout(function(){window.removeEventListener("click",i,!0)},0)},n.mousePos=function(e,t){var n=e.getBoundingClientRect();return t=t.touches?t.touches[0]:t,new s(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},n.touchPos=function(e,t){for(var n=e.getBoundingClientRect(),r=[],i=0;i<t.touches.length;i++)r.push(new s(t.touches[i].clientX-n.left-e.clientLeft,t.touches[i].clientY-n.top-e.clientTop));return r}},{"point-geometry":448}],395:[function(e,t,n){"use strict";var r=e("webworkify");t.exports=function(){return new r(e("../../source/worker"))}},{"../../source/worker":339,webworkify:525}],396:[function(e,t,n){"use strict";function r(e,t){return t.area-e.area}function i(e){for(var t,n,r=0,i=0,s=e.length,o=s-1;i<s;o=i++)t=e[i],n=e[o],r+=(n.x-t.x)*(t.y+n.y);return r}var s=e("quickselect");t.exports=function(e,t){var n=e.length;if(n<=1)return[e];for(var o,u,f=[],l=0;l<n;l++){var c=i(e[l]);0!==c&&(e[l].area=Math.abs(c),void 0===u&&(u=c<0),u===c<0?(o&&f.push(o),o=[e[l]]):o.push(e[l]))}if(o&&f.push(o),t>1)for(var h=0;h<f.length;h++)f[h].length<=t||(s(f[h],t,1,f[h].length-1,r),f[h]=f[h].slice(0,t));return f}},{quickselect:457}],397:[function(e,t,n){"use strict";t.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0}},{}],398:[function(e,t,n){"use strict";function r(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}var i=e("assert");t.exports=r,r.prototype.encode=function(e){return i(e in this._stringToNumber),this._stringToNumber[e]},r.prototype.decode=function(e){return i(e<this._numberToString.length),this._numberToString[e]}},{assert:36}],399:[function(e,t,n){"use strict";function r(e,t){this.actors=[],this.currentActor=0;for(var n=0;n<e;n++){var r=new o,i=new s(r,t);i.name="Worker "+n,this.actors.push(i)}}var i=e("./util"),s=e("./actor"),o=e("./web_worker");t.exports=r,r.prototype={broadcast:function(e,t,n){n=n||function(){},i.asyncAll(this.actors,function(n,r){n.send(e,t,r)},n)},send:function(e,t,n,r,i){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(e,t,n,i),r},remove:function(){for(var e=0;e<this.actors.length;e++)this.actors[e].target.terminate();this.actors=[]}}},{"./actor":390,"./util":408,"./web_worker":395}],400:[function(e,t,n){"use strict";var r=e("./util"),i={on:function(e,t){return this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t),this},off:function(e,t){if(!e)return delete this._events,this;if(!this.listens(e))return this;if(t){var n=this._events[e].indexOf(t);n>=0&&this._events[e].splice(n,1),this._events[e].length||delete this._events[e]}else delete this._events[e];return this},once:function(e,t){var n=function(r){this.off(e,n),t.call(this,r)}.bind(this);return this.on(e,n),this},fire:function(e,t){if(!this.listens(e))return r.endsWith(e,"error")&&console.error(t&&t.error||t||"Empty error event"),this;t=r.extend({},t),r.extend(t,{type:e,target:this});for(var n=this._events[e].slice(),i=0;i<n.length;i++)n[i].call(this,t);return this},listens:function(e){return!!this._events&&!!this._events[e]}};t.exports=i},{"./util":408}],401:[function(e,t,n){"use strict";function r(e,t){this.stacks=e.readFields(i,[],t)}function i(e,t,n){if(1===e){var r=n.readMessage(s,{glyphs:{}});t.push(r)}}function s(e,t,n){if(1===e)t.name=n.readString();else if(2===e)t.range=n.readString();else if(3===e){var r=n.readMessage(o,{});t.glyphs[r.id]=r}}function o(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}t.exports=r},{}],402:[function(e,t,n){"use strict";function r(e,t,n){return e*(1-n)+t*n}t.exports=r,r.number=r,r.vec2=function(e,t,n){return[r(e[0],t[0],n),r(e[1],t[1],n)]},r.color=function(e,t,n){return[r(e[0],t[0],n),r(e[1],t[1],n),r(e[2],t[2],n),r(e[3],t[3],n)]},r.array=function(e,t,n){return e.map(function(e,i){return r(e,t[i],n)})}},{}],403:[function(e,t,n){"use strict";function r(e,t,n){for(var r=0;r<e.length;r++)for(var i=e[r],s=0;s<t.length;s++)for(var o=t[s],u=0;u<o.length;u++){var a=o[u];if(p(i,a))return!0;if(l(a,i,n))return!0}return!1}function i(e,t){if(1===e.length&&1===e[0].length)return h(t,e[0][0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(h(e,r[i]))return!0;for(var s=0;s<e.length;s++){for(var o=e[s],a=0;a<o.length;a++)if(h(t,o[a]))return!0;for(var f=0;f<t.length;f++)if(u(o,t[f]))return!0}return!1}function s(e,t,n){for(var r=0;r<t.length;r++)for(var i=t[r],s=0;s<e.length;s++){var u=e[s];if(u.length>=3)for(var a=0;a<i.length;a++)if(p(u,i[a]))return!0;if(o(u,i,n))return!0}return!1}function o(e,t,n){if(e.length>1){if(u(e,t))return!0;for(var r=0;r<t.length;r++)if(l(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(l(e[i],t,n))return!0;return!1}function u(e,t){for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],s=0;s<t.length-1;s++){var o=t[s],u=t[s+1];if(f(r,i,o,u))return!0}return!1}function a(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function f(e,t,n,r){return a(e,n,r)!==a(t,n,r)&&a(e,t,n)!==a(e,t,r)}function l(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++){var s=t[i-1],o=t[i];if(c(e,s,o)<r)return!0}return!1}function c(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return i<0?e.distSqr(t):i>1?e.distSqr(n):e.distSqr(n.sub(t)._mult(i)._add(t))}function h(e,t){for(var n,r,i,s=!1,o=0;o<e.length;o++){n=e[o];for(var u=0,a=n.length-1;u<n.length;a=u++)r=n[u],i=n[a],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(s=!s)}return s}function p(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var s=e[r],o=e[i];s.y>t.y!=o.y>t.y&&t.x<(o.x-s.x)*(t.y-s.y)/(o.y-s.y)+s.x&&(n=!n)}return n}t.exports={multiPolygonIntersectsBufferedMultiPoint:r,multiPolygonIntersectsMultiPolygon:i,multiPolygonIntersectsBufferedMultiLine:s}},{}],404:[function(e,t,n){"use strict";function r(e,t){this.max=e,this.onRemove=t,this.reset()}t.exports=r,r.prototype.reset=function(){for(var e in this.data)this.onRemove(this.data[e]);return this.data={},this.order=[],this},r.prototype.add=function(e,t){if(this.has(e))this.order.splice(this.order.indexOf(e),1),this.data[e]=t,this.order.push(e);else if(this.data[e]=t,this.order.push(e),this.order.length>this.max){var n=this.get(this.order[0]);n&&this.onRemove(n)}return this},r.prototype.has=function(e){return e in this.data},r.prototype.keys=function(){return this.order},r.prototype.get=function(e){if(!this.has(e))return null;var t=this.data[e];return delete this.data[e],this.order.splice(this.order.indexOf(e),1),t},r.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this.get(this.order[0]);t&&this.onRemove(t)}return this}},{}],405:[function(e,t,n){"use strict";function r(e,t,n){if(n=n||o.ACCESS_TOKEN,!n&&o.REQUIRE_ACCESS_TOKEN)throw new Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/developers/api/#access-tokens");if(e=e.replace(/^mapbox:\/\//,o.API_URL+t),e+=e.indexOf("?")!==-1?"&access_token=":"?access_token=",o.REQUIRE_ACCESS_TOKEN){if("s"===n[0])throw new Error("Use a public access token (pk.*) with Mapbox GL JS, not a secret access token (sk.*). See https://www.mapbox.com/developers/api/#access-tokens");e+=n}return e}function i(e){return e?"?"+e:""}function s(e){return e.access_token&&"tk."===e.access_token.slice(0,3)?f.extend({},e,{access_token:o.ACCESS_TOKEN}):e}var o=e("./config"),u=e("./browser"),a=e("url"),f=e("./util");t.exports.normalizeStyleURL=function(e,t){var n=a.parse(e);return"mapbox:"!==n.protocol?e:r("mapbox:/"+n.pathname+i(n.query),"/styles/v1/",t)},t.exports.normalizeSourceURL=function(e,t){var n=a.parse(e);return"mapbox:"!==n.protocol?e:r(e+".json","/v4/",t)+"&secure"},t.exports.normalizeGlyphsURL=function(e,t){var n=a.parse(e);if("mapbox:"!==n.protocol)return e;var s=n.pathname.split("/")[1];return r("mapbox://"+s+"/{fontstack}/{range}.pbf"+i(n.query),"/fonts/v1/",t)},t.exports.normalizeSpriteURL=function(e,t,n,s){var o=a.parse(e);return"mapbox:"!==o.protocol?(o.pathname+=t+n,a.format(o)):r("mapbox:/"+o.pathname+"/sprite"+t+n+i(o.query),"/styles/v1/",s)},t.exports.normalizeTileURL=function(e,t,n){var r=a.parse(e,!0);if(!t)return e;var i=a.parse(t);if("mapbox:"!==i.protocol)return e;var o=u.supportsWebp?".webp":"$1",f=u.devicePixelRatio>=2||512===n?"@2x":"";return a.format({protocol:r.protocol,hostname:r.hostname,pathname:r.pathname.replace(/(\.(?:png|jpg)\d*)/,f+o),query:s(r.query)})}},{"./browser":392,"./config":397,"./util":408,url:506}],406:[function(e,t,n){"use strict";function r(e){function t(){h.apply(this,arguments)}function n(){p.apply(this,arguments),this.members=t.prototype.members}var r=JSON.stringify(e);if(m[r])return m[r];void 0===e.alignment&&(e.alignment=1),t.prototype=Object.create(h.prototype);var u=0,f=0,y=["Uint8"];return t.prototype.members=e.members.map(function(n){n={name:n.name,type:n.type,components:n.components||1},d(n.name.length),d(n.type in v),y.indexOf(n.type)<0&&y.push(n.type);var r=o(n.type);f=Math.max(f,r),n.offset=u=s(u,Math.max(e.alignment,r));for(var i=0;i<n.components;i++)Object.defineProperty(t.prototype,n.name+(1===n.components?"":i),{get:l(n,i),set:c(n,i)});return u+=r*n.components,n}),t.prototype.alignment=e.alignment,t.prototype.size=s(u,Math.max(f,e.alignment)),n.serialize=i,n.prototype=Object.create(p.prototype),n.prototype.StructType=t,n.prototype.bytesPerElement=t.prototype.size,n.prototype.emplaceBack=a(t.prototype.members,t.prototype.size),n.prototype._usedTypes=y,m[r]=n,n}function i(){return{members:this.prototype.StructType.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}}function s(e,t){return Math.ceil(e/t)*t}function o(e){return v[e].BYTES_PER_ELEMENT}function u(e){return e.toLowerCase()}function a(e,t){for(var n=[],r=[],i="var i = this.length;\nthis.resize(this.length + 1);\n",s=0;s<e.length;s++){var a=e[s],f=o(a.type);n.indexOf(f)<0&&(n.push(f),i+="var o"+f.toFixed(0)+" = i * "+(t/f).toFixed(0)+";\n");for(var l=0;l<a.components;l++){var c="v"+r.length,h="o"+f.toFixed(0)+" + "+(a.offset/f+l).toFixed(0);i+="this."+u(a.type)+"["+h+"] = "+c+";\n",r.push(c)}}return i+="return i;",new Function(r,i)}function f(e,t){var n="this._pos"+o(e.type).toFixed(0),r=(e.offset/o(e.type)+t).toFixed(0),i=n+" + "+r;return"this._structArray."+u(e.type)+"["+i+"]"}function l(e,t){return new Function([],"return "+f(e,t)+";")}function c(e,t){return new Function(["x"],f(e,t)+" = x;")}function h(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}function p(e){void 0!==e?(this.arrayBuffer=e.arrayBuffer,this.length=e.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))}var d=e("assert");t.exports=r;var v={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},m={};p.prototype.DEFAULT_CAPACITY=128,p.prototype.RESIZE_MULTIPLIER=5,p.prototype.serialize=function(){return this.trim(),{length:this.length,arrayBuffer:this.arrayBuffer}},p.prototype.get=function(e){return new this.StructType(this,e)},p.prototype.trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},p.prototype.resize=function(e){if(this.length=e,e>this.capacity){this.capacity=Math.max(e,Math.floor(this.capacity*this.RESIZE_MULTIPLIER),this.DEFAULT_CAPACITY),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},p.prototype._refreshViews=function(){for(var e=0;e<this._usedTypes.length;e++){var t=this._usedTypes[e];this[u(t)]=new v[t](this.arrayBuffer)}},p.prototype.toArray=function(e,t){for(var n=[],r=e;r<t;r++){var i=this.get(r);n.push(i)}return n}},{assert:36}],407:[function(e,t,n){"use strict";function r(e,t){return t.replace(/{([^{}]+)}/g,function(t,n){return n in e?e[n]:""})}t.exports=r},{}],408:[function(e,t,n){"use strict";var r=e("unitbezier"),i=e("../geo/coordinate");n.easeCubicInOut=function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},n.bezier=function(e,t,n,i){var s=new r(e,t,n,i);return function(e){return s.solve(e)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(e,t,n){return Math.min(n,Math.max(t,e))},n.wrap=function(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i},n.coalesce=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if(null!==t&&void 0!==t)return t}},n.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),s=null;e.forEach(function(e,o){t(e,function(e,t){e&&(s=e),i[o]=t,0===--r&&n(s,i)})})},n.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},n.extend=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e},n.extendAll=function(e,t){for(var n in t)Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n));return e},n.inherit=function(e,t){var r="function"==typeof e?e.prototype:e,i=Object.create(r);return n.extendAll(i,t),i},n.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n};var s=1;n.uniqueId=function(){return s++},n.debounce=function(e,t){var n,r;return function(){r=arguments,clearTimeout(n),n=setTimeout(function(){e.apply(null,r)},t)}},n.bindAll=function(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})},n.bindHandlers=function(e){for(var t in e)"function"==typeof e[t]&&0===t.indexOf("_on")&&(e[t]=e[t].bind(e))},n.setOptions=function(e,t){e.hasOwnProperty("options")||(e.options=e.options?Object.create(e.options):{});for(var n in t)e.options[n]=t[n];return e.options},n.getCoordinatesCenter=function(e){for(var t=1/0,n=1/0,r=-1/0,s=-1/0,o=0;o<e.length;o++)t=Math.min(t,e[o].column),n=Math.min(n,e[o].row),r=Math.max(r,e[o].column),s=Math.max(s,e[o].row);var u=r-t,a=s-n,f=Math.max(u,a);return(new i((t+r)/2,(n+s)/2,0)).zoomTo(Math.floor(-Math.log(f)/Math.LN2))},n.endsWith=function(e,t){return e.indexOf(t,e.length-t.length)!==-1},n.startsWith=function(e,t){return 0===e.indexOf(t)},n.mapObject=function(e,t,n){var r={};for(var i in e)r[i]=t.call(n||this,e[i],i,e);return r},n.filterObject=function(e,t,n){var r={};for(var i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r},n.deepEqual=function u(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!u(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;var r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(var i in e)if(!u(e[i],t[i]))return!1;return!0}return e===t},n.clone=function(e){return Array.isArray(e)?e.map(n.clone):"object"==typeof e?n.mapObject(e,n.clone):e},n.arraysIntersect=function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1};var o={};n.warnOnce=function(e){o[e]||("undefined"!=typeof console&&console.warn(e),o[e]=!0)}},{"../geo/coordinate":304,unitbezier:505}],409:[function(e,t,n){"use strict";function r(e,t,n,r){this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,null!=e.id&&(this.id=e.id)}t.exports=r,r.prototype={type:"Feature",get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set geometry(e){this._geometry=e},toJSON:function(){var e={};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&"toJSON"!==t&&(e[t]=this[t]);return e}}},{}],410:[function(e,t,n){t.exports={_args:[[{raw:"mapbox-gl@^0.22.0",scope:null,escapedName:"mapbox-gl",name:"mapbox-gl",rawSpec:"^0.22.0",spec:">=0.22.0 <0.23.0",type:"range"},"/home/etienne/Documents/plotly/plotly.js"]],_from:"mapbox-gl@>=0.22.0 <0.23.0",_id:"mapbox-gl@0.22.1",_inCache:!0,_location:"/mapbox-gl",_nodeVersion:"4.4.5",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/mapbox-gl-0.22.1.tgz_1471549891670_0.8762630566488951"},_npmUser:{name:"lucaswoj",email:"lucas@lucaswoj.com"},_npmVersion:"2.15.5",_phantomChildren:{},_requested:{raw:"mapbox-gl@^0.22.0",scope:null,escapedName:"mapbox-gl",name:"mapbox-gl",rawSpec:"^0.22.0",spec:">=0.22.0 <0.23.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/mapbox-gl/-/mapbox-gl-0.22.1.tgz",_shasum:"92a965547d4c2f24c22cbc487eeda48694cb627a",_shrinkwrap:null,_spec:"mapbox-gl@^0.22.0",_where:"/home/etienne/Documents/plotly/plotly.js",browser:{"./js/util/ajax.js":"./js/util/browser/ajax.js","./js/util/browser.js":"./js/util/browser/browser.js","./js/util/canvas.js":"./js/util/browser/canvas.js","./js/util/dom.js":"./js/util/browser/dom.js","./js/util/web_worker.js":"./js/util/browser/web_worker.js"},bugs:{url:"https://github.com/mapbox/mapbox-gl-js/issues"},dependencies:{csscolorparser:"^1.0.2",earcut:"^2.0.3","feature-filter":"^2.2.0","geojson-rewind":"^0.1.0","geojson-vt":"^2.4.0","gl-matrix":"^2.3.1","grid-index":"^1.0.0","mapbox-gl-function":"^1.2.1","mapbox-gl-shaders":"github:mapbox/mapbox-gl-shaders#de2ab007455aa2587c552694c68583f94c9f2747","mapbox-gl-style-spec":"github:mapbox/mapbox-gl-style-spec#83b1a3e5837d785af582efd5ed1a212f2df6a4ae","mapbox-gl-supported":"^1.2.0",pbf:"^1.3.2",pngjs:"^2.2.0","point-geometry":"^0.0.0",quickselect:"^1.0.0",request:"^2.39.0","resolve-url":"^0.2.1","shelf-pack":"^1.0.0",supercluster:"^2.0.1",unassertify:"^2.0.0",unitbezier:"^0.0.0","vector-tile":"^1.3.0","vt-pbf":"^2.0.2",webworkify:"^1.3.0","whoots-js":"^2.0.0"},description:"A WebGL interactive maps library",devDependencies:{"babel-preset-react":"^6.11.1",babelify:"^7.3.0",benchmark:"~2.1.0",browserify:"^13.0.0",clipboard:"^1.5.12","concat-stream":"1.5.1",coveralls:"^2.11.8",doctrine:"^1.2.1",documentation:"https://github.com/documentationjs/documentation/archive/bb41619c734e59ef3fbc3648610032efcfdaaace.tar.gz","documentation-theme-utils":"3.0.0",envify:"^3.4.0",eslint:"^2.5.3","eslint-config-mourner":"^2.0.0","eslint-plugin-html":"^1.5.1",gl:"^4.0.1",handlebars:"4.0.5","highlight.js":"9.3.0",istanbul:"^0.4.2","json-loader":"^0.5.4",lodash:"^4.13.1","mapbox-gl-test-suite":"github:mapbox/mapbox-gl-test-suite#7babab52fb02788ebbc38384139bf350e8e38552","memory-fs":"^0.3.0",minifyify:"^7.0.1","npm-run-all":"^3.0.0",nyc:"6.4.0",proxyquire:"^1.7.9",remark:"4.2.2","remark-html":"3.0.0",sinon:"^1.15.4",st:"^1.2.0",tap:"^5.7.0","transform-loader":"^0.2.3","unist-util-visit":"1.1.0",vinyl:"1.1.1","vinyl-fs":"2.4.3",watchify:"^3.7.0",webpack:"^1.13.1","webworkify-webpack":"^1.1.3"},directories:{},dist:{shasum:"92a965547d4c2f24c22cbc487eeda48694cb627a",tarball:"https://registry.npmjs.org/mapbox-gl/-/mapbox-gl-0.22.1.tgz"},engines:{node:">=4.0.0"},gitHead:"13a9015341f0602ccb55c98c53079838ad4b70b5",homepage:"https://github.com/mapbox/mapbox-gl-js#readme",license:"BSD-3-Clause",main:"js/mapbox-gl.js",maintainers:[{name:"aaronlidman",email:"aaronlidman@gmail.com"},{name:"ajashton",email:"aj.ashton@gmail.com"},{name:"ansis",email:"ansis.brammanis@gmail.com"},{name:"bergwerkgis",email:"wb@bergwerk-gis.at"},{name:"bhousel",email:"bryan@mapbox.com"},{name:"bsudekum",email:"bobby@mapbox.com"},{name:"camilleanne",email:"camille@mapbox.com"},{name:"dnomadb",email:"damon@mapbox.com"},{name:"dthompson",email:"dthompson@gmail.com"},{name:"emilymcafee",email:"emily@mapbox.com"},{name:"flippmoke",email:"flippmoke@gmail.com"},{name:"freenerd",email:"spam@freenerd.de"},{name:"gretacb",email:"carol@mapbox.com"},{name:"ian29",email:"ian.villeda@gmail.com"},{name:"ianshward",email:"ian@mapbox.com"},{name:"ingalls",email:"nicholas.ingalls@gmail.com"},{name:"jfirebaugh",email:"john.firebaugh@gmail.com"},{name:"jrpruit1",email:"jake@jakepruitt.com"},{name:"karenzshea",email:"karen@mapbox.com"},{name:"kkaefer",email:"kkaefer@gmail.com"},{name:"lbud",email:"lauren@mapbox.com"},{name:"lucaswoj",email:"lucas@lucaswoj.com"},{name:"lxbarth",email:"alex@mapbox.com"},{name:"lyzidiamond",email:"lyzi@mapbox.com"},{name:"mapbox-admin",email:"accounts@mapbox.com"},{name:"mateov",email:"matt@mapbox.com"},{name:"mcwhittemore",email:"mcwhittemore@gmail.com"},{name:"miccolis",email:"jeff@miccolis.net"},{name:"mikemorris",email:"michael.patrick.morris@gmail.com"},{name:"morganherlocker",email:"morgan.herlocker@gmail.com"},{name:"mourner",email:"agafonkin@gmail.com"},{name:"nickidlugash",email:"nicki@mapbox.com"},{name:"rclark",email:"ryan.clark.j@gmail.com"},{name:"samanbb",email:"saman@mapbox.com"},{name:"sbma44",email:"tlee@mapbox.com"},{name:"scothis",email:"scothis@gmail.com"},{name:"sgillies",email:"sean@mapbox.com"},{name:"springmeyer",email:"dane@mapbox.com"},{name:"themarex",email:"patrick@mapbox.com"},{name:"tmcw",email:"tom@macwright.org"},{name:"tristen",email:"tristen.brown@gmail.com"},{name:"willwhite",email:"will@mapbox.com"},{name:"yhahn",email:"young@mapbox.com"}],name:"mapbox-gl",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git://github.com/mapbox/mapbox-gl-js.git"},scripts:{build:"npm run build-docs # invoked by publisher when publishing docs on the mb-pages branch","build-dev":"browserify js/mapbox-gl.js --debug --standalone mapboxgl > dist/mapbox-gl-dev.js && tap --no-coverage test/build/dev.test.js","build-docs":"documentation build --github --format html -c documentation.yml --theme ./docs/_theme --output docs/api/","build-min":"browserify js/mapbox-gl.js --debug -t unassertify --plugin [minifyify --map mapbox-gl.js.map --output dist/mapbox-gl.js.map] --standalone mapboxgl > dist/mapbox-gl.js && tap --no-coverage test/build/min.test.js","build-token":"browserify debug/access-token-src.js --debug -t envify > debug/access-token.js",lint:"eslint  --ignore-path .gitignore js test bench docs/_posts/examples/*.html","open-changed-examples":"git diff --name-only mb-pages HEAD -- docs/_posts/examples/*.html | awk '{print \"http://127.0.0.1:4000/mapbox-gl-js/example/\" substr($0,33,length($0)-37)}' | xargs open",start:"run-p build-token watch-dev watch-bench start-server","start-bench":"run-p build-token watch-bench start-server","start-debug":"run-p build-token watch-dev start-server","start-docs":"npm run build-min && npm run build-docs && jekyll serve -w","start-server":"st --no-cache --localhost --port 9966 --index index.html .",test:"npm run lint && tap --reporter dot test/js/*/*.js test/build/webpack.test.js","test-suite":"node test/render.test.js && node test/query.test.js","watch-bench":"node bench/download-data.js && watchify bench/index.js --plugin [minifyify --no-map] -t [babelify --presets react] -t unassertify -t envify -o bench/bench.js -v","watch-dev":"watchify js/mapbox-gl.js --debug --standalone mapboxgl -o dist/mapbox-gl-dev.js -v"},version:"0.22.1"}},{}],411:[function(e,t,n){"use strict";function r(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=0,i===t&&(r[i]+=.5),i===n&&(r[i]+=.5);return r}function i(e,t){if(0===t||t===(1<<e+1)-1)return[];for(var n=[],i=[],s=0;s<=e;++s)if(t&1<<s){n.push(r(e,s-1,s-1)),i.push(null);for(var u=0;u<=e;++u)~t&1<<u&&(n.push(r(e,s-1,u-1)),i.push([s,u]))}var a=o(n),f=[];e:for(var s=0;s<a.length;++s){for(var l=a[s],c=[],u=0;u<l.length;++u){if(!i[l[u]])continue e;c.push(i[l[u]].slice())}f.push(c)}return f}function s(e){for(var t=1<<e+1,n=new Array(t),r=0;r<t;++r)n[r]=i(e,r);return n}t.exports=s;var o=e("convex-hull")},{"convex-hull":86}],412:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e}function i(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function s(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}var o=e("./normalize"),u=e("gl-mat4/create"),a=e("gl-mat4/clone"),f=e("gl-mat4/determinant"),l=e("gl-mat4/invert"),c=e("gl-mat4/transpose"),h={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},p=u(),d=u(),v=[0,0,0,0],m=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];t.exports=function(e,t,n,u,y,b){if(t||(t=[0,0,0]),n||(n=[0,0,0]),u||(u=[0,0,0]),y||(y=[0,0,0,1]),b||(b=[0,0,0,1]),!o(p,e))return!1;if(a(d,p),d[3]=0,d[7]=0,d[11]=0,d[15]=1,Math.abs(f(d)<1e-8))return!1;var w=p[3],E=p[7],S=p[11],x=p[12],T=p[13],N=p[14],C=p[15];if(0!==w||0!==E||0!==S){v[0]=w,v[1]=E,v[2]=S,v[3]=C;var k=l(d,d);if(!k)return!1;c(d,d),r(y,v,d)}else y[0]=y[1]=y[2]=0,y[3]=1;if(t[0]=x,t[1]=T,t[2]=N,i(m,p),n[0]=h.length(m[0]),h.normalize(m[0],m[0]),u[0]=h.dot(m[0],m[1]),s(m[1],m[1],m[0],1,-u[0]),n[1]=h.length(m[1]),h.normalize(m[1],m[1]),u[0]/=n[1],u[1]=h.dot(m[0],m[2]),s(m[2],m[2],m[0],1,-u[1]),u[2]=h.dot(m[1],m[2]),s(m[2],m[2],m[1],1,-u[2]),n[2]=h.length(m[2]),h.normalize(m[2],m[2]),u[1]/=n[2],u[2]/=n[2],h.cross(g,m[1],m[2]),h.dot(m[0],g)<0)for(var L=0;L<3;L++)n[L]*=-1,m[L][0]*=-1,m[L][1]*=-1,m[L][2]*=-1;return b[0]=.5*Math.sqrt(Math.max(1+m[0][0]-m[1][1]-m[2][2],0)),b[1]=.5*Math.sqrt(Math.max(1-m[0][0]+m[1][1]-m[2][2],0)),b[2]=.5*Math.sqrt(Math.max(1-m[0][0]-m[1][1]+m[2][2],0)),b[3]=.5*Math.sqrt(Math.max(1+m[0][0]+m[1][1]+m[2][2],0)),m[2][1]>m[1][2]&&(b[0]=-b[0]),m[0][2]>m[2][0]&&(b[1]=-b[1]),m[1][0]>m[0][1]&&(b[2]=-b[2]),!0}},{"./normalize":413,"gl-mat4/clone":148,"gl-mat4/create":149,"gl-mat4/determinant":150,"gl-mat4/invert":154,"gl-mat4/transpose":164,"gl-vec3/cross":242,"gl-vec3/dot":243,"gl-vec3/length":244,"gl-vec3/normalize":246}],413:[function(e,t,n){t.exports=function(e,t){var n=t[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0}},{}],414:[function(e,t,n){function r(e,t,n,r){if(0===l(t)||0===l(n))return!1;var i=f(t,h.translate,h.scale,h.skew,h.perspective,h.quaternion),s=f(n,p.translate,p.scale,p.skew,p.perspective,p.quaternion);return!!i&&!!s&&(u(d.translate,h.translate,p.translate,r),u(d.skew,h.skew,p.skew,r),u(d.scale,h.scale,p.scale,r),u(d.perspective,h.perspective,p.perspective,r),c(d.quaternion,h.quaternion,p.quaternion,r),a(e,d.translate,d.scale,d.skew,d.perspective,d.quaternion),!0)}function i(){return{translate:s(),scale:s(1),skew:s(),perspective:o(),quaternion:o()}}function s(e){return[e||0,e||0,e||0]}function o(){return[0,0,0,1]}var u=e("gl-vec3/lerp"),a=e("mat4-recompose"),f=e("mat4-decompose"),l=e("gl-mat4/determinant"),c=e("quat-slerp"),h=i(),p=i(),d=i();t.exports=r},{"gl-mat4/determinant":150,"gl-vec3/lerp":245,"mat4-decompose":412,"mat4-recompose":415,"quat-slerp":453}],415:[function(e,t,n){var r={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")},i=(r.create(),r.create());t.exports=function(e,t,n,s,o,u){return r.identity(e),r.fromRotationTranslation(e,u,t),e[3]=o[0],e[7]=o[1],e[11]=o[2],e[15]=o[3],r.identity(i),0!==s[2]&&(i[9]=s[2],r.multiply(e,e,i)),0!==s[1]&&(i[9]=0,i[8]=s[1],r.multiply(e,e,i)),0!==s[0]&&(i[8]=0,i[4]=s[0],r.multiply(e,e,i)),r.scale(e,e,n),e}},{"gl-mat4/create":149,"gl-mat4/fromRotationTranslation":152,"gl-mat4/identity":153,"gl-mat4/multiply":156,"gl-mat4/scale":162,"gl-mat4/translate":163}],416:[function(e,t,n){"use strict";function r(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}function i(e){e=e||{};var t=e.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new r(t)}var s=e("binary-search-bounds"),o=e("mat4-interpolate"),u=e("gl-mat4/invert"),a=e("gl-mat4/rotateX"),f=e("gl-mat4/rotateY"),l=e("gl-mat4/rotateZ"),c=e("gl-mat4/lookAt"),h=e("gl-mat4/translate"),p=(e("gl-mat4/scale"),e("gl-vec3/normalize")),d=[0,0,0];t.exports=i;var v=r.prototype;v.recalcMatrix=function(e){var t=this._time,n=s.le(t,e),r=this.computedMatrix;if(!(n<0)){var i=this._components;if(n===t.length-1)for(var a=16*n,f=0;f<16;++f)r[f]=i[a++];else{for(var l=t[n+1]-t[n],a=16*n,c=this.prevMatrix,h=!0,f=0;f<16;++f)c[f]=i[a++];for(var d=this.nextMatrix,f=0;f<16;++f)d[f]=i[a++],h=h&&c[f]===d[f];if(l<1e-6||h)for(var f=0;f<16;++f)r[f]=c[f];else o(r,c,d,(e-t[n])/l)}var v=this.computedUp;v[0]=r[1],v[1]=r[5],v[2]=r[6],p(v,v);var m=this.computedInverse;u(m,r);var g=this.computedEye,y=m[15];g[0]=m[12]/y,g[1]=m[13]/y,g[2]=m[14]/y;for(var b=this.computedCenter,w=Math.exp(this.computedRadius[0]),f=0;f<3;++f)b[f]=g[f]-r[2+4*f]*w}},v.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,n=t.length-16,r=0;r<16;++r)t.push(t[n++]);this._time.push(e)}},v.flush=function(e){var t=s.gt(this._time,e)-2;t<0||(this._time.slice(0,t),this._components.slice(0,16*t))},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(e,t,n,r){this.recalcMatrix(e),t=t||this.computedEye,n=n||d,r=r||this.computedUp,this.setMatrix(e,c(this.computedMatrix,t,n,r));for(var i=0,s=0;s<3;++s)i+=Math.pow(n[s]-t[s],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},v.rotate=function(e,t,n,r){this.recalcMatrix(e);var i=this.computedInverse;t&&f(i,i,t),n&&a(i,i,n),r&&l(i,i,r),this.setMatrix(e,u(this.computedMatrix,i))};var m=[0,0,0];v.pan=function(e,t,n,r){m[0]=-(t||0),m[1]=-(n||0),m[2]=-(r||0),this.recalcMatrix(e);var i=this.computedInverse;h(i,i,m),this.setMatrix(e,u(i,i))},v.translate=function(e,t,n,r){m[0]=t||0,m[1]=n||0,m[2]=r||0,this.recalcMatrix(e);var i=this.computedMatrix;h(i,i,m),this.setMatrix(e,i)},v.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var n=0;n<16;++n)this._components.push(t[n])}},v.setDistance=function(e,t){this.computedRadius[0]=t},v.setDistanceLimits=function(e,t){var n=this._limits;n[0]=e,n[1]=t},v.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},{"binary-search-bounds":55,"gl-mat4/invert":154,"gl-mat4/lookAt":155,"gl-mat4/rotateX":159,"gl-mat4/rotateY":160,"gl-mat4/rotateZ":161,"gl-mat4/scale":162,"gl-mat4/translate":163,"gl-vec3/normalize":246,"mat4-interpolate":414}],417:[function(e,t,n){"use strict";function r(e){var t=e.length;if(t<3){for(var n=new Array(t),r=0;r<t;++r)n[r]=r;return 2===t&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:n}for(var s=new Array(t),r=0;r<t;++r)s[r]=r;s.sort(function(t,n){var r=e[t][0]-e[n][0];return r?r:e[t][1]-e[n][1]});for(var o=[s[0],s[1]],u=[s[0],s[1]],r=2;r<t;++r){for(var a=s[r],f=e[a],l=o.length;l>1&&i(e[o[l-2]],e[o[l-1]],f)<=0;)l-=1,o.pop();for(o.push(a),l=u.length;l>1&&i(e[u[l-2]],e[u[l-1]],f)>=0;)l-=1,u.pop();u.push(a)}for(var n=new Array(u.length+o.length-2),c=0,r=0,h=o.length;r<h;++r)n[c++]=o[r];for(var p=u.length-2;p>0;--p)n[c++]=u[p];return n}t.exports=r;var i=e("robust-orientation")[3]},{"robust-orientation":471}],418:[function(e,t,n){"use strict";function r(e,t){function n(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==v.alt,v.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==v.shift,v.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==v.control,v.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==v.meta,v.meta=!!e.metaKey),t}function r(e,r){var s=i.x(r),o=i.y(r);"buttons"in r&&(e=0|r.buttons),(e!==h||s!==p||o!==d||n(r))&&(h=0|e,p=s||0,d=o||0,t&&t(h,p,d,v))}function s(e){r(0,e)}function o(){(h||p||d||v.shift||v.alt||v.meta||v.control)&&(p=d=0,h=0,v.shift=v.alt=v.control=v.meta=!1,t&&t(0,0,0,v))}function u(e){n(e)&&t&&t(h,p,d,v)}function a(e){0===i.buttons(e)?r(0,e):r(h,e)}function f(e){r(h|i.buttons(e),e)}function l(e){r(h&~i.buttons(e),e)}function c(){m||(m=!0,e.addEventListener("mousemove",a),e.addEventListener("mousedown",f),e.addEventListener("mouseup",l),e.addEventListener("mouseleave",s),e.addEventListener("mouseenter",s),e.addEventListener("mouseout",s),e.addEventListener("mouseover",s),e.addEventListener("blur",o),e.addEventListener("keyup",u),e.addEventListener("keydown",u),e.addEventListener("keypress",u),e!==window&&(window.addEventListener("blur",o),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}t||(t=e,e=window);var h=0,p=0,d=0,v={shift:!1,alt:!1,control:!1,meta:!1},m=!1;c();var g={element:e};return Object.defineProperties(g,{enabled:{get:function(){return m},set:function(e){e&&c()},enumerable:!0},buttons:{get:function(){return h},enumerable:!0},x:{get:function(){return p},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return v},enumerable:!0}}),g}t.exports=r;var i=e("mouse-event")},{"mouse-event":419}],419:[function(e,t,n){"use strict";function r(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(2===t)return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(1===t)return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0}function i(e){return e.target||e.srcElement||window}function s(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=i(e),n=t.getBoundingClientRect();return e.clientX-n.left}return 0}function o(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=i(e),n=t.getBoundingClientRect();return e.clientY-n.top}return 0}n.buttons=r,n.element=i,n.x=s,n.y=o},{}],420:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var r=i("ex",e),s=function(e){n&&e.preventDefault();var i=e.deltaX||0,s=e.deltaY||0,o=e.deltaZ||0,u=e.deltaMode,a=1;switch(u){case 1:a=r;break;case 2:a=window.innerHeight}if(i*=a,s*=a,o*=a,i||s||o)return t(i,s,o,e)};return e.addEventListener("wheel",s),s}var i=e("to-px");t.exports=r},{"to-px":496}],421:[function(e,t,n){"use strict";function r(e){return"a"+e}function i(e){return"d"+e}function s(e,t){return"c"+e+"_"+t}function o(e){return"s"+e}function u(e,t){return"t"+e+"_"+t}function a(e){return"o"+e}function f(e){return"x"+e}function l(e){return"p"+e}function c(e,t){return"d"+e+"_"+t}function h(e){return"i"+e}function p(e,t){return"u"+e+"_"+t}function d(e){return"b"+e}function v(e){return"y"+e}function m(e){return"e"+e}function g(e){return"v"+e}function y(e,t,n){for(var r=0,i=0;i<e;++i)t&1<<i&&(r|=1<<n[i]);return r}function b(e,t,n,b,w,L){function O(e,t){R.push("for(",h(w[e]),"=",t,";",h(w[e]),"<",o(w[e]),";","++",h(w[e]),"){")}function D(e){for(var t=0;t<F;++t)R.push(l(t),"+=",p(t,w[e]),";");R.push("}")}function P(e){for(var t=e-1;t>=0;--t)O(t,0);for(var n=[],t=0;t<F;++t)L[t]?n.push(i(t)+".get("+l(t)+")"):n.push(i(t)+"["+l(t)+"]");for(var t=0;t<b;++t)n.push(f(t));R.push(x,"[",C,"++]=phase(",n.join(),");");for(var t=0;t<e;++t)D(t);for(var r=0;r<F;++r)R.push(l(r),"+=",p(r,w[e]),";")}function H(e){for(var t=0;t<F;++t)L[t]?R.push(s(t,0),"=",i(t),".get(",l(t),");"):R.push(s(t,0),"=",i(t),"[",l(t),"];");for(var n=[],t=0;t<F;++t)n.push(s(t,0));for(var t=0;t<b;++t)n.push(f(t));R.push(d(0),"=",x,"[",C,"]=phase(",n.join(),");");for(var r=1;r<1<<I;++r)R.push(d(r),"=",x,"[",C,"+",m(r),"];");for(var o=[],r=1;r<1<<I;++r)o.push("("+d(0)+"!=="+d(r)+")");R.push("if(",o.join("||"),"){");for(var u=[],t=0;t<I;++t)u.push(h(t));for(var t=0;t<F;++t){u.push(s(t,0));for(var r=1;r<1<<I;++r)L[t]?R.push(s(t,r),"=",i(t),".get(",l(t),"+",c(t,r),");"):R.push(s(t,r),"=",i(t),"[",l(t),"+",c(t,r),"];"),u.push(s(t,r))}for(var t=0;t<1<<I;++t)u.push(d(t));for(var t=0;t<b;++t)u.push(f(t));R.push("vertex(",u.join(),");",g(0),"=",S,"[",C,"]=",T,"++;");for(var a=(1<<I)-1,p=d(a),r=0;r<I;++r)if(0===(e&~(1<<r))){for(var v=a^1<<r,y=d(v),w=[],E=v;E>0;E=E-1&v)w.push(S+"["+C+"+"+m(E)+"]");w.push(g(0));for(var E=0;E<F;++E)1&r?w.push(s(E,a),s(E,v)):w.push(s(E,v),s(E,a));1&r?w.push(p,y):w.push(y,p);for(var E=0;E<b;++E)w.push(f(E));R.push("if(",p,"!==",y,"){","face(",w.join(),")}")}R.push("}",C,"+=1;")}function B(){for(var e=1;e<1<<I;++e)R.push(k,"=",m(e),";",m(e),"=",v(e),";",v(e),"=",k,";")}function j(e,t){if(e<0)return void H(t);P(e),R.push("if(",o(w[e]),">0){",h(w[e]),"=1;"),j(e-1,t|1<<w[e]);for(var n=0;n<F;++n)R.push(l(n),"+=",p(n,w[e]),";");e===I-1&&(R.push(C,"=0;"),B()),O(e,2),j(e-1,t),e===I-1&&(R.push("if(",h(w[I-1]),"&1){",C,"=0;}"),B()),D(e),R.push("}")}var F=L.length,I=w.length;if(I<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var q="extractContour"+w.join("_"),R=[],U=[],z=[],W=0;W<F;++W)z.push(r(W));for(var W=0;W<b;++W)z.push(f(W));for(var W=0;W<I;++W)U.push(o(W)+"="+r(0)+".shape["+W+"]|0");for(var W=0;W<F;++W){U.push(i(W)+"="+r(W)+".data",a(W)+"="+r(W)+".offset|0");for(var X=0;X<I;++X)U.push(u(W,X)+"="+r(W)+".stride["+X+"]|0")}for(var W=0;W<F;++W){U.push(l(W)+"="+a(W)),U.push(s(W,0));for(var X=1;X<1<<I;++X){for(var V=[],$=0;$<I;++$)X&1<<$&&V.push("-"+u(W,$));U.push(c(W,X)+"=("+V.join("")+")|0"),U.push(s(W,X)+"=0")}}for(var W=0;W<F;++W)for(var X=0;X<I;++X){var J=[u(W,w[X])];X>0&&J.push(u(W,w[X-1])+"*"+o(w[X-1])),U.push(p(W,w[X])+"=("+J.join("-")+")|0")}for(var W=0;W<I;++W)U.push(h(W)+"=0");U.push(T+"=0");for(var K=["2"],W=I-2;W>=0;--W)K.push(o(w[W]));U.push(N+"=("+K.join("*")+")|0",x+"=mallocUint32("+N+")",S+"=mallocUint32("+N+")",C+"=0"),U.push(d(0)+"=0");for(var X=1;X<1<<I;++X){for(var Q=[],G=[],$=0;$<I;++$)X&1<<$&&(0===G.length?Q.push("1"):Q.unshift(G.join("*"))),G.push(o(w[$]));var Y="";Q[0].indexOf(o(w[I-2]))<0&&(Y="-");var Z=y(I,X,w);U.push(m(Z)+"=(-"+Q.join("-")+")|0",v(Z)+"=("+Y+Q.join("-")+")|0",d(Z)+"=0")}U.push(g(0)+"=0",k+"=0"),j(I-1,0),R.push("freeUint32(",S,");freeUint32(",x,");");var et=["'use strict';","function ",q,"(",z.join(),"){","var ",U.join(),";",R.join(""),"}","return ",q].join(""),tt=new Function("vertex","face","phase","mallocUint32","freeUint32",et);return tt(e,t,n,E.mallocUint32,E.freeUint32)}function w(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}"object"!=typeof e&&t("Must specify arguments");var n=e.order;Array.isArray(n)||t("Must specify order");var r=e.arrayArguments||1;r<1&&t("Must have at least one array argument");var i=e.scalarArguments||0;i<0&&t("Scalar arg count must be > 0"),"function"!=typeof e.vertex&&t("Must specify vertex creation function"),"function"!=typeof e.cell&&t("Must specify cell creation function"),"function"!=typeof e.phase&&t("Must specify phase function");for(var s=e.getters||[],o=new Array(r),u=0;u<r;++u)s.indexOf(u)>=0?o[u]=!0:o[u]=!1;return b(e.vertex,e.cell,e.phase,i,n,o)}var E=e("typedarray-pool");t.exports=w;var S="V",x="P",T="N",N="Q",C="X",k="T"},{"typedarray-pool":502}],422:[function(e,t,n){"use strict";var r=e("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_1_arg1_=_inline_1_arg2_.apply(void 0,_inline_1_arg0_)}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});t.exports=function(e,t){return r(e,t),e}},{"cwise/lib/wrapper":96}],423:[function(e,t,n){"use strict";function r(e){if(e in a)return a[e];for(var t=[],n=0;n<e;++n)t.push("out",n,"s=0.5*(inp",n,"l-inp",n,"r);");for(var r=["array"],i=["junk"],n=0;n<e;++n){r.push("array"),i.push("out"+n+"s");var s=o(e);s[n]=-1,r.push({array:0,offset:s.slice()}),s[n]=1,r.push({array:0,offset:s.slice()}),i.push("inp"+n+"l","inp"+n+"r")}return a[e]=u({args:r,pre:l,post:l,body:{body:t.join(""),args:i.map(function(e){return{name:e,lvalue:0===e.indexOf("out"),rvalue:0===e.indexOf("inp"),count:"junk"!==e|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+e})}function i(e){function t(t){for(var n=s-t.length,r=[],i=[],u=[],a=0;a<s;++a)t.indexOf(a+1)>=0?u.push("0"):t.indexOf(-(a+1))>=0?u.push("s["+a+"]-1"):(u.push("-1"),r.push("1"),i.push("s["+a+"]-2"));var f=".lo("+r.join()+").hi("+i.join()+")";if(0===r.length&&(f=""),n>0){o.push("if(1");for(var a=0;a<s;++a)t.indexOf(a+1)>=0||t.indexOf(-(a+1))>=0||o.push("&&s[",a,"]>2");o.push("){grad",n,"(src.pick(",u.join(),")",f);for(var a=0;a<s;++a)t.indexOf(a+1)>=0||t.indexOf(-(a+1))>=0||o.push(",dst.pick(",u.join(),",",a,")",f);o.push(");")}for(var a=0;a<t.length;++a){var l=Math.abs(t[a])-1,c="dst.pick("+u.join()+","+l+")"+f;switch(e[l]){case"clamp":var h=u.slice(),p=u.slice();t[a]<0?h[l]="s["+l+"]-2":p[l]="1",0===n?o.push("if(s[",l,"]>1){dst.set(",u.join(),",",l,",0.5*(src.get(",h.join(),")-src.get(",p.join(),")))}else{dst.set(",u.join(),",",l,",0)};"):o.push("if(s[",l,"]>1){diff(",c,",src.pick(",h.join(),")",f,",src.pick(",p.join(),")",f,");}else{zero(",c,");};");break;case"mirror":0===n?o.push("dst.set(",u.join(),",",l,",0);"):o.push("zero(",c,");");break;case"wrap":var d=u.slice(),v=u.slice();t[a]<0?(d[l]="s["+l+"]-2",v[l]="0"):(d[l]="s["+l+"]-1",v[l]="1"),0===n?o.push("if(s[",l,"]>2){dst.set(",u.join(),",",l,",0.5*(src.get(",d.join(),")-src.get(",v.join(),")))}else{dst.set(",u.join(),",",l,",0)};"):o.push("if(s[",l,"]>2){diff(",c,",src.pick(",d.join(),")",f,",src.pick(",v.join(),")",f,");}else{zero(",c,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}n>0&&o.push("};")}var n=e.join(),i=f[n];if(i)return i;for(var s=e.length,o=["function gradient(dst,src){var s=src.shape.slice();"],u=0;u<1<<s;++u){for(var l=[],p=0;p<s;++p)u&1<<p&&l.push(p+1);for(var d=0;d<1<<l.length;++d){for(var v=l.slice(),p=0;p<l.length;++p)d&1<<p&&(v[p]=-v[p]);t(v)}}o.push("return dst;};return gradient");for(var m=["diff","zero"],g=[c,h],u=1;u<=s;++u)m.push("grad"+u),g.push(r(u));m.push(o.join(""));var y=Function.apply(void 0,m),i=y.apply(void 0,g);return a[n]=i,i}function s(e,t,n){if(Array.isArray(n)){if(n.length!==t.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else n="string"==typeof n?o(t.dimension,n):o(t.dimension,"clamp");if(e.dimension!==t.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(e.shape[t.dimension]!==t.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var r=0;r<t.dimension;++r)if(e.shape[r]!==t.shape[r])throw new Error("ndarray-gradient: shape mismatch");if(0===t.size)return e;if(t.dimension<=0)return e.set(0),e;var s=i(n);return s(e,t)}t.exports=s;var o=e("dup"),u=e("cwise-compiler"),a={},f={},l={body:"",args:[],thisVars:[],localVars:[]},c=u({args:["array","array","array"],pre:l,post:l,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),h=u({args:["array"],pre:l,post:l,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":93,dup:100}],424:[function(e,t,n){"use strict";function r(e,t,n){var r=t.dimension,o=s([],n);return i(e,t,function(e,t){for(var n=0;n<r;++n){e[n]=o[(r+1)*r+n];for(var i=0;i<r;++i)e[n]+=o[(r+1)*i+n]*t[i]}for(var s=o[(r+1)*(r+1)-1],i=0;i<r;++i)s+=o[(r+1)*i+r]*t[i];for(var u=1/s,n=0;n<r;++n)e[n]*=u;return e}),e}var i=e("ndarray-warp"),s=e("gl-matrix-invert");t.exports=r},{"gl-matrix-invert":165,"ndarray-warp":431}],425:[function(e,t,n){"use strict";function r(e,t){var n=Math.floor(t),r=t-n,i=0<=n&&n<e.shape[0],s=0<=n+1&&n+1<e.shape[0],o=i?+e.get(n):0,u=s?+e.get(n+1):0;return(1-r)*o+r*u}function i(e,t,n){var r=Math.floor(t),i=t-r,s=0<=r&&r<e.shape[0],o=0<=r+1&&r+1<e.shape[0],u=Math.floor(n),a=n-u,f=0<=u&&u<e.shape[1],l=0<=u+1&&u+1<e.shape[1],c=s&&f?e.get(r,u):0,h=s&&l?e.get(r,u+1):0,p=o&&f?e.get(r+1,u):0,d=o&&l?e.get(r+1,u+1):0;return(1-a)*((1-i)*c+i*p)+a*((1-i)*h+i*d)}function s(e,t,n,r){var i=Math.floor(t),s=t-i,o=0<=i&&i<e.shape[0],u=0<=i+1&&i+1<e.shape[0],a=Math.floor(n),f=n-a,l=0<=a&&a<e.shape[1],c=0<=a+1&&a+1<e.shape[1],h=Math.floor(r),p=r-h,d=0<=h&&h<e.shape[2],v=0<=h+1&&h+1<e.shape[2],m=o&&l&&d?e.get(i,a,h):0,g=o&&c&&d?e.get(i,a+1,h):0,y=u&&l&&d?e.get(i+1,a,h):0,b=u&&c&&d?e.get(i+1,a+1,h):0,w=o&&l&&v?e.get(i,a,h+1):0,E=o&&c&&v?e.get(i,a+1,h+1):0,S=u&&l&&v?e.get(i+1,a,h+1):0,x=u&&c&&v?e.get(i+1,a+1,h+1):0;return(1-p)*((1-f)*((1-s)*m+s*y)+f*((1-s)*g+s*b))+p*((1-f)*((1-s)*w+s*S)+f*((1-s)*E+s*x))}function o(e){var t,n,r=0|e.shape.length,i=new Array(r),s=new Array(r),o=new Array(r),u=new Array(r);for(t=0;t<r;++t)n=+arguments[t+1],i[t]=Math.floor(n),s[t]=n-i[t],o[t]=0<=i[t]&&i[t]<e.shape[t],u[t]=0<=i[t]+1&&i[t]+1<e.shape[t];var a,f,l,c=0;e:for(t=0;t<1<<r;++t){for(f=1,l=e.offset,a=0;a<r;++a)if(t&1<<a){if(!u[a])continue e;f*=s[a],l+=e.stride[a]*(i[a]+1)}else{if(!o[a])continue e;f*=1-s[a],l+=e.stride[a]*i[a]}c+=f*e.data[l]}return c}function u(e,t,n,u){switch(e.shape.length){case 0:return 0;case 1:return r(e,t);case 2:return i(e,t,n);case 3:return s(e,t,n,u);default:return o.apply(void 0,arguments)}}t.exports=u,t.exports.d1=r,t.exports.d2=i,t.exports.d3=s},{}],426:[function(e,t,n){"use strict";function r(e){if(!e)return u;for(var t=0;t<e.args.length;++t){var n=e.args[t];0===t?e.args[t]={name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function i(e){return o({args:e.args,pre:r(e.pre),body:r(e.body),post:r(e.proc),funcName:e.funcName})}function s(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);var r=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return r(i(e))}var o=e("cwise-compiler"),u={body:"",args:[],thisVars:[],localVars:[]},a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in a){var t=a[e];n[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),n[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var f={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in f){var t=f[e];n[e]=s({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),n[e+"eq"]=s({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in l){var t=l[e];n[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var t=c[e];n[t]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),n[t+"eq"]=s({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var e=0;e<h.length;++e){var t=h[e];n[t]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),n[t+"s"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),n[t+"eq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var p=["atan2","pow"];!function(){for(var e=0;e<p.length;++e){var t=p[e];n[t+"op"]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),n[t+"ops"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),n[t+"opeq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),n[t+"opseq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),n.any=o({args:["array"],pre:u,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=o({args:["array"],pre:u,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=o({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=o({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=o({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=o({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=s({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=s({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=s({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=o({args:["array","array"],pre:u,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":93}],427:[function(e,t,n){"use strict";var r=e("ndarray"),i=e("./doConvert.js");t.exports=function(e,t){for(var n=[],s=e,o=1;Array.isArray(s);)n.push(s.length),o*=s.length,s=s[0];return 0===n.length?r():(t||(t=r(new Float64Array(o),n)),i(t,e),t)}},{"./doConvert.js":428,ndarray:432}],428:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":93}],429:[function(e,t,n){"use strict";function r(e){switch(e){case"uint8":return[a.mallocUint8,a.freeUint8];case"uint16":return[a.mallocUint16,a.freeUint16];case"uint32":return[a.mallocUint32,a.freeUint32];case"int8":return[a.mallocInt8,a.freeInt8];case"int16":return[a.mallocInt16,a.freeInt16];case"int32":return[a.mallocInt32,a.freeInt32];case"float32":return[a.mallocFloat,a.freeFloat];case"float64":return[a.mallocDouble,a.freeDouble];default:return null}}function i(e){for(var t=[],n=0;n<e;++n)t.push("s"+n);for(var n=0;n<e;++n)t.push("n"+n);for(var n=1;n<e;++n)t.push("d"+n);for(var n=1;n<e;++n)t.push("e"+n);for(var n=1;n<e;++n)t.push("f"+n);return t}function s(e,t){function n(e){return"generic"===t?["data.get(",e,")"].join(""):["data[",e,"]"].join("")}function s(e,n){return"generic"===t?["data.set(",e,",",n,")"].join(""):["data[",e,"]=",n].join("")}var o=["'use strict'"],u=["ndarrayInsertionSort",e.join("d"),t].join(""),a=["left","right","data","offset"].concat(i(e.length)),f=r(t),l=["i,j,cptr,ptr=left*s0+offset"];if(e.length>1){for(var c=[],h=1;h<e.length;++h)l.push("i"+h),c.push("n"+h);f?l.push("scratch=malloc("+c.join("*")+")"):l.push("scratch=new Array("+c.join("*")+")"),l.push("dptr","sptr","a","b")}else l.push("scratch");if(o.push(["function ",u,"(",a.join(","),"){var ",l.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),e.length>1){o.push("dptr=0;sptr=ptr");for(var h=e.length-1;h>=0;--h){var p=e[h];0!==p&&o.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""))}o.push("scratch[dptr++]=",n("sptr"));for(var h=0;h<e.length;++h){var p=e[h];0!==p&&o.push("sptr+=d"+p,"}")}o.push("__g:while(j-->left){","dptr=0","sptr=cptr-s0");for(var h=1;h<e.length;++h)1===h&&o.push("__l:"),o.push(["for(i",h,"=0;i",h,"<n",h,";++i",h,"){"].join(""));o.push(["a=",n("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));for(var h=e.length-1;h>=1;--h)o.push("sptr+=e"+h,"dptr+=f"+h,"}");o.push("dptr=cptr;sptr=cptr-s0");for(var h=e.length-1;h>=0;--h){var p=e[h];0!==p&&o.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""))}o.push(s("dptr",n("sptr")));for(var h=0;h<e.length;++h){var p=e[h];0!==p&&o.push(["dptr+=d",p,";sptr+=d",p].join(""),"}")}o.push("cptr-=s0\n}"),o.push("dptr=cptr;sptr=0");for(var h=e.length-1;h>=0;--h){var p=e[h];0!==p&&o.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""))}o.push(s("dptr","scratch[sptr++]"));for(var h=0;h<e.length;++h){var p=e[h];0!==p&&o.push("dptr+=d"+p,"}")}}else o.push("scratch="+n("ptr"),"while((j-->left)&&("+n("cptr-s0")+">scratch)){",s("cptr",n("cptr-s0")),"cptr-=s0","}",s("cptr","scratch"));if(o.push("}"),e.length>1&&f&&o.push("free(scratch)"),o.push("} return "+u),f){var d=new Function("malloc","free",o.join("\n"));return d(f[0],f[1])}var d=new Function(o.join("\n"));return d()}function o(e,t,n){function s(e){return["(offset+",e,"*s0)"].join("")}function o(e){return"generic"===t?["data.get(",e,")"].join(""):["data[",e,"]"].join("")}function u(e,n){return"generic"===t?["data.set(",e,",",n,")"].join(""):["data[",e,"]=",n].join("")}function a(t,n,r){if(1===t.length)E.push("ptr0="+s(t[0]));else for(var i=0;i<t.length;++i)E.push(["b_ptr",i,"=s0*",t[i]].join(""));n&&E.push("pivot_ptr=0"),E.push("ptr_shift=offset");for(var i=e.length-1;i>=0;--i){var o=e[i];0!==o&&E.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""))}if(t.length>1)for(var i=0;i<t.length;++i)E.push(["ptr",i,"=b_ptr",i,"+ptr_shift"].join(""));E.push(r),n&&E.push("++pivot_ptr");for(var i=0;i<e.length;++i){var o=e[i];0!==o&&(t.length>1?E.push("ptr_shift+=d"+o):E.push("ptr0+=d"+o),E.push("}"))}}function l(t,n,r,i){if(1===n.length)E.push("ptr0="+s(n[0]));else{for(var o=0;o<n.length;++o)E.push(["b_ptr",o,"=s0*",n[o]].join(""));E.push("ptr_shift=offset")}r&&E.push("pivot_ptr=0"),t&&E.push(t+":");for(var o=1;o<e.length;++o)E.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""));if(n.length>1)for(var o=0;o<n.length;++o)E.push(["ptr",o,"=b_ptr",o,"+ptr_shift"].join(""));E.push(i);for(var o=e.length-1;o>=1;--o)r&&E.push("pivot_ptr+=f"+o),n.length>1?E.push("ptr_shift+=e"+o):E.push("ptr0+=e"+o),E.push("}")}function c(){e.length>1&&T&&E.push("free(pivot1)","free(pivot2)")}function h(t,n){var r="el"+t,i="el"+n;if(e.length>1){var u="__l"+ ++N;l(u,[r,i],!1,["comp=",o("ptr0"),"-",o("ptr1"),"\n","if(comp>0){tmp0=",r,";",r,"=",i,";",i,"=tmp0;break ",u,"}\n","if(comp<0){break ",u,"}"].join(""))}else E.push(["if(",o(s(r)),">",o(s(i)),"){tmp0=",r,";",r,"=",i,";",i,"=tmp0}"].join(""))}function p(t,n){e.length>1?a([t,n],!1,u("ptr0",o("ptr1"))):E.push(u(s(t),o(s(n))))}function d(t,n,r){if(e.length>1){var i="__l"+ ++N;l(i,[n],!0,[t,"=",o("ptr0"),"-pivot",r,"[pivot_ptr]\n","if(",t,"!==0){break ",i,"}"].join(""))}else E.push([t,"=",o(s(n)),"-pivot",r].join(""))}function v(t,n){e.length>1?a([t,n],!1,["tmp=",o("ptr0"),"\n",u("ptr0",o("ptr1")),"\n",u("ptr1","tmp")].join("")):E.push(["ptr0=",s(t),"\n","ptr1=",s(n),"\n","tmp=",o("ptr0"),"\n",u("ptr0",o("ptr1")),"\n",u("ptr1","tmp")].join(""))}function m(t,n,r){e.length>1?(a([t,n,r],!1,["tmp=",o("ptr0"),"\n",u("ptr0",o("ptr1")),"\n",u("ptr1",o("ptr2")),"\n",u("ptr2","tmp")].join("")),E.push("++"+n,"--"+r)):E.push(["ptr0=",s(t),"\n","ptr1=",s(n),"\n","ptr2=",s(r),"\n","++",n,"\n","--",r,"\n","tmp=",o("ptr0"),"\n",u("ptr0",o("ptr1")),"\n",u("ptr1",o("ptr2")),"\n",u("ptr2","tmp")].join(""))}function g(e,t){v(e,t),E.push("--"+t)}function y(t,n,r){e.length>1?a([t,n],!0,[u("ptr0",o("ptr1")),"\n",u("ptr1",["pivot",r,"[pivot_ptr]"].join(""))].join("")):E.push(u(s(t),o(s(n))),u(s(n),"pivot"+r))}function b(t,n){E.push(["if((",n,"-",t,")<=",f,"){\n","insertionSort(",t,",",n,",data,offset,",i(e.length).join(","),")\n","}else{\n",S,"(",t,",",n,",data,offset,",i(e.length).join(","),")\n","}"].join(""))}function w(t,n,r){e.length>1?(E.push(["__l",++N,":while(true){"].join("")),a([t],!0,["if(",o("ptr0"),"!==pivot",n,"[pivot_ptr]){break __l",N,"}"].join("")),E.push(r,"}")):E.push(["while(",o(s(t)),"===pivot",n,"){",r,"}"].join(""))}var E=["'use strict'"],S=["ndarrayQuickSort",e.join("d"),t].join(""),x=["left","right","data","offset"].concat(i(e.length)),T=r(t),N=0;E.push(["function ",S,"(",x.join(","),"){"].join(""));var C=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(e.length>1){for(var k=[],L=1;L<e.length;++L)k.push("n"+L),C.push("i"+L);for(var L=0;L<8;++L)C.push("b_ptr"+L);C.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+k.join("*")),T?C.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):C.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else C.push("pivot1","pivot2");if(E.push("var "+C.join(",")),h(1,2),h(4,5),h(1,3),h(2,3),h(1,4),h(3,4),h(2,5),h(2,3),h(4,5),e.length>1?a(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",o("ptr1"),"\n","pivot2[pivot_ptr]=",o("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",o("ptr0"),"\n","y=",o("ptr2"),"\n","z=",o("ptr4"),"\n",u("ptr5","x"),"\n",u("ptr6","y"),"\n",u("ptr7","z")].join("")):E.push(["pivot1=",o(s("el2")),"\n","pivot2=",o(s("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",o(s("el1")),"\n","y=",o(s("el3")),"\n","z=",o(s("el5")),"\n",u(s("index1"),"x"),"\n",u(s("index3"),"y"),"\n",u(s("index5"),"z")].join("")),p("index2","left"),p("index4","right"),E.push("if(pivots_are_equal){"),E.push("for(k=less;k<=great;++k){"),d("comp","k",1),E.push("if(comp===0){continue}"),E.push("if(comp<0){"),E.push("if(k!==less){"),v("k","less"),E.push("}"),E.push("++less"),E.push("}else{"),E.push("while(true){"),d("comp","great",1),E.push("if(comp>0){"),E.push("great--"),E.push("}else if(comp<0){"),m("k","less","great"),E.push("break"),E.push("}else{"),g("k","great"),E.push("break"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),E.push("}else{"),E.push("for(k=less;k<=great;++k){"),d("comp_pivot1","k",1),E.push("if(comp_pivot1<0){"),E.push("if(k!==less){"),v("k","less"),E.push("}"),E.push("++less"),E.push("}else{"),d("comp_pivot2","k",2),E.push("if(comp_pivot2>0){"),E.push("while(true){"),d("comp","great",2),E.push("if(comp>0){"),E.push("if(--great<k){break}"),E.push("continue"),E.push("}else{"),d("comp","great",1),E.push("if(comp<0){"),m("k","less","great"),E.push("}else{"),g("k","great"),E.push("}"),E.push("break"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),y("left","(less-1)",1),y("right","(great+1)",2),b("left","(less-2)"),b("(great+2)","right"),E.push("if(pivots_are_equal){"),c(),E.push("return"),E.push("}"),E.push("if(less<index1&&great>index5){"),w("less",1,"++less"),w("great",2,"--great"),E.push("for(k=less;k<=great;++k){"),d("comp_pivot1","k",1),E.push("if(comp_pivot1===0){"),E.push("if(k!==less){"),v("k","less"),E.push("}"),E.push("++less"),E.push("}else{"),d("comp_pivot2","k",2),E.push("if(comp_pivot2===0){"),E.push("while(true){"),d("comp","great",2),E.push("if(comp===0){"),E.push("if(--great<k){break}"),E.push("continue"),E.push("}else{"),d("comp","great",1),E.push("if(comp<0){"),m("k","less","great"),E.push("}else{"),g("k","great"),E.push("}"),E.push("break"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),E.push("}"),c(),b("less","great"),E.push("}return "+S),e.length>1&&T){var A=new Function("insertionSort","malloc","free",E.join("\n"));return A(n,T[0],T[1])}var A=new Function("insertionSort",E.join("\n"));return A(n)}function u(e,t){var n=["'use strict'"],r=["ndarraySortWrapper",e.join("d"),t].join(""),u=["array"];n.push(["function ",r,"(",u.join(","),"){"].join(""));for(var a=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],l=0;l<e.length;++l)a.push(["s",l,"=stride[",l,"]|0,n",l,"=shape[",l,"]|0"].join(""));for(var c=new Array(e.length),h=[],l=0;l<e.length;++l){var p=e[l];0!==p&&(0===h.length?c[p]="1":c[p]=h.join("*"),h.push("n"+p))}for(var d=-1,v=-1,l=0;l<e.length;++l){var m=e[l];0!==m&&(d>0?a.push(["d",m,"=s",m,"-d",d,"*n",d].join("")):a.push(["d",m,"=s",m].join("")),d=m);var p=e.length-1-l;0!==p&&(v>0?a.push(["e",p,"=s",p,"-e",v,"*n",v,",f",p,"=",c[p],"-f",v,"*n",v].join("")):a.push(["e",p,"=s",p,",f",p,"=",c[p]].join("")),v=p)}n.push("var "+a.join(","));var g=["0","n0-1","data","offset"].concat(i(e.length));n.push(["if(n0<=",f,"){","insertionSort(",g.join(","),")}else{","quickSort(",g.join(","),")}"].join("")),n.push("}return "+r);var y=new Function("insertionSort","quickSort",n.join("\n")),b=s(e,t),w=o(e,t,b);return y(b,w)}var a=e("typedarray-pool"),f=32;t.exports=u},{"typedarray-pool":502}],430:[function(e,t,n){"use strict";function r(e){var t=e.order,n=e.dtype,r=[t,n],o=r.join(":"),u=s[o];return u||(s[o]=u=i(t,n)),u(e),e}var i=e("./lib/compile_sort.js"),s={};t.exports=r},{"./lib/compile_sort.js":429}],431:[function(e,t,n){"use strict";var r=e("ndarray-linear-interpolate"),i=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=new Array(_inline_9_arg4_)}",args:[{name:"_inline_9_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_9_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_9_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_9_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_9_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_10_arg2_(this_warped,_inline_10_arg0_),_inline_10_arg1_=_inline_10_arg3_.apply(void 0,this_warped)}",args:[{name:"_inline_10_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_10_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg4_",lvalue:!1,rvalue:!1,count:0}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),s=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_13_arg2_(this_warped,_inline_13_arg0_),_inline_13_arg1_=_inline_13_arg3_(_inline_13_arg4_,this_warped[0])}",args:[{name:"_inline_13_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_13_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),o=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_16_arg2_(this_warped,_inline_16_arg0_),_inline_16_arg1_=_inline_16_arg3_(_inline_16_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_16_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_16_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),u=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_19_arg2_(this_warped,_inline_19_arg0_),_inline_19_arg1_=_inline_19_arg3_(_inline_19_arg4_,this_warped[0],this_warped[1],this_warped[2])}",args:[{name:"_inline_19_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_19_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64});t.exports=function(e,t,n){switch(t.shape.length){case 1:s(e,n,r.d1,t);break;case 2:o(e,n,r.d2,t);break;case 3:u(e,n,r.d3,t);break;default:i(e,n,r.bind(void 0,t),t.shape.length)}return e}},{"cwise/lib/wrapper":96,"ndarray-linear-interpolate":425}],432:[function(e,t,n){function r(e,t){return e[0]-t[0]}function i(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(r);var i=new Array(n.length);for(e=0;e<i.length;++e)i[e]=n[e][1];return i}function s(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var r="generic"===e;if(t===-1){var s="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",o=new Function(s);return o()}if(0===t){var s="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",o=new Function("TrivialArray",s);return o(c[e][0])}var s=["'use strict'"],u=a(t),f=u.map(function(e){return"i"+e}),l="this.offset+"+u.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),p=u.map(function(e){return"b"+e}).join(","),d=u.map(function(e){return"c"+e}).join(",");s.push("function "+n+"(a,"+p+","+d+",d){this.data=a","this.shape=["+p+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),s.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+u.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),t<4?(s.push("function "+n+"_order(){"),2===t?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+n+"_set("+f.join(",")+",v){"),r?s.push("return this.data.set("+l+",v)}"):s.push("return this.data["+l+"]=v}"),s.push("proto.get=function "+n+"_get("+f.join(",")+"){"),r?s.push("return this.data.get("+l+")}"):s.push("return this.data["+l+"]}"),s.push("proto.index=function "+n+"_index(",f.join(),"){return "+l+"}"),s.push("proto.hi=function "+n+"_hi("+f.join(",")+"){return new "+n+"(this.data,"+u.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+u.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var v=u.map(function(e){return"a"+e+"=this.shape["+e+"]"}),m=u.map(function(e){return"c"+e+"=this.stride["+e+"]"});s.push("proto.lo=function "+n+"_lo("+f.join(",")+"){var b=this.offset,d=0,"+v.join(",")+","+m.join(","));for(var g=0;g<t;++g)s.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");s.push("return new "+n+"(this.data,"+u.map(function(e){return"a"+e}).join(",")+","+u.map(function(e){return"c"+e}).join(",")+",b)}"),s.push("proto.step=function "+n+"_step("+f.join(",")+"){var "+u.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+u.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var g=0;g<t;++g)s.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");s.push("return new "+n+"(this.data,"+u.map(function(e){return"a"+e}).join(",")+","+u.map(function(e){return"b"+e}).join(",")+",c)}");for(var y=new Array(t),b=new Array(t),g=0;g<t;++g)y[g]="a[i"+g+"]",b[g]="b[i"+g+"]";s.push("proto.transpose=function "+n+"_transpose("+f+"){"+f.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+y.join(",")+","+b.join(",")+",this.offset)}"),s.push("proto.pick=function "+n+"_pick("+f+"){var a=[],b=[],c=this.offset");for(var g=0;g<t;++g)s.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+u.map(function(e){return"shape["+e+"]"}).join(",")+","+u.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var o=new Function("CTOR_LIST","ORDER",s.join("\n"));return o(c[e],i)}function o(e){if(f(e))return"buffer";if(l)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function u(e,t,n,r){if(void 0===e){var i=c.array[0];return i([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var u=t.length;if(void 0===n){n=new Array(u);for(var a=u-1,f=1;a>=0;--a)n[a]=f,f*=t[a]}if(void 0===r){r=0;for(var a=0;a<u;++a)n[a]<0&&(r-=(t[a]-1)*n[a])}for(var l=o(e),p=c[l];p.length<=u+1;)p.push(s(l,p.length-1));var i=p[u+1];return i(e,t,n,r)}var a=e("iota-array"),f=e("is-buffer"),l="undefined"!=typeof Float64Array,c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=u},{"iota-array":262,"is-buffer":263}],433:[function(e,t,n){"use strict";function r(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(0===e)return t<0?-s:s;var n=i.hi(e),r=i.lo(e);return t>e==e>0?r===o?(n+=1,r=0):r+=1:0===r?(r=o,n-=1):r-=1,i.pack(r,n)}var i=e("double-bits"),s=Math.pow(2,-1074),o=-1>>>0;t.exports=r},{"double-bits":99}],434:[function(e,t,n){var r=1e-6,i=1e-6;n.vertexNormals=function(e,t,n){for(var i=t.length,s=new Array(i),o=void 0===n?r:n,u=0;u<i;++u)s[u]=[0,0,0];for(var u=0;u<e.length;++u)for(var a=e[u],f=0,l=a[a.length-1],c=a[0],h=0;h<a.length;++h){f=l,l=c,c=a[(h+1)%a.length];for(var p=t[f],d=t[l],v=t[c],m=new Array(3),g=0,y=new Array(3),b=0,w=0;w<3;++w)m[w]=p[w]-d[w],g+=m[w]*m[w],y[w]=v[w]-d[w],b+=y[w]*y[w];if(g*b>o)for(var E=s[l],S=1/Math.sqrt(g*b),w=0;w<3;++w){var x=(w+1)%3,T=(w+2)%3;E[w]+=S*(y[x]*m[T]-y[T]*m[x])}}for(var u=0;u<i;++u){for(var E=s[u],N=0,w=0;w<3;++w)N+=E[w]*E[w];if(N>o)for(var S=1/Math.sqrt(N),w=0;w<3;++w)E[w]*=S;else for(var w=0;w<3;++w)E[w]=0}return s},n.faceNormals=function(e,t,n){for(var r=e.length,s=new Array(r),o=void 0===n?i:n,u=0;u<r;++u){for(var a=e[u],f=new Array(3),l=0;l<3;++l)f[l]=t[a[l]];for(var c=new Array(3),h=new Array(3),l=0;l<3;++l)c[l]=f[1][l]-f[0][l],h[l]=f[2][l]-f[0][l];for(var p=new Array(3),d=0,l=0;l<3;++l){var v=(l+1)%3,m=(l+2)%3;p[l]=c[v]*h[m]-c[m]*h[v],d+=p[l]*p[l]}d=d>o?1/Math.sqrt(d):0;for(var l=0;l<3;++l)p[l]*=d;s[u]=p}return s}},{}],435:[function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function i(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}var s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=i()?Object.assign:function(e,t){for(var n,i,u=r(e),f=1;f<arguments.length;f++){n=Object(arguments[f]);for(var l in n)s.call(n,l)&&(u[l]=n[l]);if(Object.getOwnPropertySymbols){i=Object.getOwnPropertySymbols(n);for(var c=0;c<i.length;c++)o.call(n,i[c])&&(u[i[c]]=n[i[c]])}}return u}},{}],436:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o,u,a,f){var l=t+s+f;if(c>0){var c=Math.sqrt(l+1);e[0]=.5*(o-a)/c,e[1]=.5*(u-r)/c,e[2]=.5*(n-s)/c,e[3]=.5*c}else{var h=Math.max(t,s,f),c=Math.sqrt(2*h-l+1);t>=h?(e[0]=.5*c,e[1]=.5*(i+n)/c,e[2]=.5*(u+r)/c,e[3]=.5*(o-a)/c):s>=h?(e[0]=.5*(n+i)/c,e[1]=.5*c,e[2]=.5*(a+o)/c,e[3]=.5*(u-r)/c):(e[0]=.5*(r+u)/c,e[1]=.5*(o+a)/c,e[2]=.5*c,e[3]=.5*(n-i)/c)}return e}t.exports=r},{}],437:[function(e,t,n){"use strict";function r(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function i(e,t,n,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2)+Math.pow(r,2))}function s(e,t){var n=t[0],r=t[1],s=t[2],o=t[3],u=i(n,r,s,o);u>1e-6?(e[0]=n/u,e[1]=r/u,e[2]=s/u,e[3]=o/u):(e[0]=e[1]=e[2]=0,e[3]=1)}function o(e,t,n){this.radius=a([n]),this.center=a(t),this.rotation=a(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}function u(e){e=e||{};var t=e.center||[0,0,0],n=e.rotation||[0,0,0,1],r=e.radius||1;t=[].slice.call(t,0,3),n=[].slice.call(n,0,4),s(n,n);var i=new o(n,t,Math.log(r));return i.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&i.lookAt(0,e.eye,e.center,e.up),i}t.exports=u;var a=e("filtered-vector"),f=e("gl-mat4/lookAt"),l=e("gl-mat4/fromQuat"),c=e("gl-mat4/invert"),h=e("./lib/quatFromFrame"),p=o.prototype;p.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},p.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;s(t,t);var n=this.computedMatrix;l(n,t);var r=this.computedCenter,i=this.computedEye,o=this.computedUp,u=Math.exp(this.computedRadius[0]);i[0]=r[0]+u*n[2],i[1]=r[1]+u*n[6],i[2]=r[2]+u*n[10],o[0]=n[1],o[1]=n[5],o[2]=n[9];for(var a=0;a<3;++a){for(var f=0,c=0;c<3;++c)f+=n[a+4*c]*i[c];n[12+a]=-f}},p.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=n[r];return t}return n},p.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},p.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},p.pan=function(e,t,n,i){t=t||0,n=n||0,i=i||0,this.recalcMatrix(e);var s=this.computedMatrix,o=s[1],u=s[5],a=s[9],f=r(o,u,a);o/=f,u/=f,a/=f;var l=s[0],c=s[4],h=s[8],p=l*o+c*u+h*a;l-=o*p,c-=u*p,h-=a*p;var d=r(l,c,h);l/=d,c/=d,h/=d;var v=s[2],m=s[6],g=s[10],y=v*o+m*u+g*a,b=v*l+m*c+g*h;v-=y*o+b*l,m-=y*u+b*c,g-=y*a+b*h;var w=r(v,m,g);v/=w,m/=w,g/=w;var E=l*t+o*n,S=c*t+u*n,x=h*t+a*n;this.center.move(e,E,S,x);var T=Math.exp(this.computedRadius[0]);T=Math.max(1e-4,T+i),this.radius.set(e,Math.log(T))},p.rotate=function(e,t,n,s){this.recalcMatrix(e),t=t||0,n=n||0;var o=this.computedMatrix,u=o[0],a=o[4],f=o[8],l=o[1],c=o[5],h=o[9],p=o[2],d=o[6],v=o[10],m=t*u+n*l,g=t*a+n*c,y=t*f+n*h,b=-(d*y-v*g),w=-(v*m-p*y),E=-(p*g-d*m),S=Math.sqrt(Math.max(0,1-Math.pow(b,2)-Math.pow(w,2)-Math.pow(E,2))),x=i(b,w,E,S);x>1e-6?(b/=x,w/=x,E/=x,S/=x):(b=w=E=0,S=1);var T=this.computedRotation,N=T[0],C=T[1],k=T[2],L=T[3],A=N*S+L*b+C*E-k*w,O=C*S+L*w+k*b-N*E,M=k*S+L*E+N*w-C*b,_=L*S-N*b-C*w-k*E;if(s){b=p,w=d,E=v;var D=Math.sin(s)/r(b,w,E);b*=D,w*=D,E*=D,S=Math.cos(t),A=A*S+_*b+O*E-M*w,O=O*S+_*w+M*b-A*E,M=M*S+_*E+A*w-O*b,_=_*S-A*b-O*w-M*E}var P=i(A,O,M,_);P>1e-6?(A/=P,O/=P,M/=P,_/=P):(A=O=M=0,_=1),this.rotation.set(e,A,O,M,_)},p.lookAt=function(e,t,n,r){this.recalcMatrix(e),n=n||this.computedCenter,t=t||this.computedEye,r=r||this.computedUp;var i=this.computedMatrix;f(i,t,n,r);var o=this.computedRotation;h(o,i[0],i[1],i[2],i[4],i[5],i[6],i[8],i[9],i[10]),s(o,o),this.rotation.set(e,o[0],o[1],o[2],o[3]);for(var u=0,a=0;a<3;++a)u+=Math.pow(n[a]-t[a],2);this.radius.set(e,.5*Math.log(Math.max(u,1e-6))),this.center.set(e,n[0],n[1],n[2])},p.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},p.setMatrix=function(e,t){var n=this.computedRotation;h(n,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),s(n,n),this.rotation.set(e,n[0],n[1],n[2],n[3]);var r=this.computedMatrix;c(r,t);var i=r[15];if(Math.abs(i)>1e-6){var o=r[12]/i,u=r[13]/i,a=r[14]/i;this.recalcMatrix(e);var f=Math.exp(this.computedRadius[0]);this.center.set(e,o-r[2]*f,u-r[6]*f,a-r[10]*f),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},p.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},p.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},p.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},p.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},p.fromJSON=function(e){var t=this.lastT(),n=e.center;n&&this.center.set(t,n[0],n[1],n[2]);var r=e.rotation;r&&this.rotation.set(t,r[0],r[1],r[2],r[3]);var i=e.distance;i&&i>0&&this.radius.set(t,Math.log(i)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},{"./lib/quatFromFrame":436,"filtered-vector":108,"gl-mat4/fromQuat":151,"gl-mat4/invert":154,"gl-mat4/lookAt":155}],438:[function(e,t,n){"use strict";var r=e("repeat-string");t.exports=function(e,t,n){return n="undefined"!=typeof n?n+"":" ",r(n,t)+e}},{"repeat-string":463}],439:[function(e,t,n){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],440:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return s.exec(e).slice(1)};n.resolve=function(){for(var n="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var o=s>=0?arguments[s]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(n=o+"/"+n,r="/"===o.charAt(0))}return n=t(i(n.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+n||"."},n.normalize=function(e){var s=n.isAbsolute(e),o="/"===u(e,-1);return e=t(i(e.split("/"),function(e){return!!e}),!s).join("/"),e||s||(e="."),e&&o&&(e+="/"),(s?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(i(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var s=i(e.split("/")),o=i(t.split("/")),u=Math.min(s.length,o.length),a=u,f=0;f<u;f++)if(s[f]!==o[f]){a=f;break}for(var l=[],f=a;f<s.length;f++)l.push("..");return l=l.concat(o.slice(a)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var u="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:451}],441:[function(e,t,n){"use strict";function r(e){var t;e&&e.length&&(t=e,e=t.length);var n=new Uint8Array(e||0);return t&&n.set(t),n.readUInt32LE=s.readUInt32LE,n.writeUInt32LE=s.writeUInt32LE,n.readInt32LE=s.readInt32LE,n.writeInt32LE=s.writeInt32LE,n.readFloatLE=s.readFloatLE,n.writeFloatLE=s.writeFloatLE,n.readDoubleLE=s.readDoubleLE,n.writeDoubleLE=s.writeDoubleLE,n.toString=s.toString,n.write=s.write,n.slice=s.slice,n.copy=s.copy,n._isBuffer=!0,n}function i(e){for(var t,n,r=e.length,i=[],s=0;s<r;s++){if(t=e.charCodeAt(s),t>55295&&t<57344){if(!n){t>56319||s+1===r?i.push(239,191,189):n=t;continue}if(t<56320){i.push(239,191,189),n=t;continue}t=n-55296<<10|t-56320|65536,n=null}else n&&(i.push(239,191,189),n=null);t<128?i.push(t):t<2048?i.push(t>>6|192,63&t|128):t<65536?i.push(t>>12|224,t>>6&63|128,63&t|128):i.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}return i}t.exports=r;var s,o,u,a=e("ieee754");s={readUInt32LE:function(e){return(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},writeUInt32LE:function(e,t){this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24},readInt32LE:function(e){return(this[e]|this[e+1]<<8|this[e+2]<<16)+(this[e+3]<<24)},readFloatLE:function(e){return a.read(this,e,!0,23,4)},readDoubleLE:function(e){return a.read(this,e,!0,52,8)},writeFloatLE:function(e,t){return a.write(this,e,t,!0,23,4)},writeDoubleLE:function(e,t){return a.write(this,e,t,!0,52,8)},toString:function(e,t,n){var r="",i="";t=t||0,n=Math.min(this.length,n||this.length);for(var s=t;s<n;s++){var o=this[s];o<=127?(r+=decodeURIComponent(i)+String.fromCharCode(o),i=""):i+="%"+o.toString(16)}return r+=decodeURIComponent(i)},write:function(e,t){for(var n=e===o?u:i(e),r=0;r<n.length;r++)this[t+r]=n[r]},slice:function(e,t){return this.subarray(e,t)},copy:function(e,t){t=t||0;for(var n=0;n<this.length;n++)e[t+n]=this[n]}},s.writeInt32LE=s.writeUInt32LE,r.byteLength=function(e){return o=e,u=i(e),u.length},r.isBuffer=function(e){return!!e&&!!e._isBuffer}},{ieee754:258}],442:[function(e,t,n){(function(n){"use strict";function r(e){this.buf=m.isBuffer(e)?e:new m(e||0),this.pos=0,this.length=this.buf.length}function i(e,t){var n,r=t.buf;if(n=r[t.pos++],e+=268435456*(127&n),n<128)return e;if(n=r[t.pos++],e+=34359738368*(127&n),n<128)return e;if(n=r[t.pos++],e+=4398046511104*(127&n),n<128)return e;if(n=r[t.pos++],e+=562949953421312*(127&n),n<128)return e;if(n=r[t.pos++],e+=72057594037927940*(127&n),n<128)return e;if(n=r[t.pos++],e+=0x8000000000000000*(127&n),n<128)return e;throw new Error("Expected varint not more than 10 bytes")}function s(e,t){t.realloc(10);for(var n=t.pos+10;e>=1;){if(t.pos>=n)throw new Error("Given varint doesn't fit into 10 bytes");var r=255&e;t.buf[t.pos++]=r|(e>=128?128:0),e/=128}}function o(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function u(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function a(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function f(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function l(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function c(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function p(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function d(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function v(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}t.exports=r;var m=n.Buffer||e("./buffer");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var g=4294967296,y=1/g,b=Math.pow(2,63);r.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,s=this.pos;e(i,t,this),this.pos===s&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=this.buf.readUInt32LE(this.pos);return this.pos+=4,e},readSFixed32:function(){var e=this.buf.readInt32LE(this.pos);return this.pos+=4,e},readFixed64:function(){var e=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*g;return this.pos+=8,e},readSFixed64:function(){var e=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*g;return this.pos+=8,e},readFloat:function(){var e=this.buf.readFloatLE(this.pos);return this.pos+=4,e},readDouble:function(){var e=this.buf.readDoubleLE(this.pos);return this.pos+=8,e},readVarint:function(){var e,t,n=this.buf;return t=n[this.pos++],e=127&t,t<128?e:(t=n[this.pos++],e|=(127&t)<<7,t<128?e:(t=n[this.pos++],e|=(127&t)<<14,t<128?e:(t=n[this.pos++],e|=(127&t)<<21,t<128?e:i(e,this))))},readVarint64:function(){var e=this.pos,t=this.readVarint();if(t<b)return t;for(var n=this.pos-2;255===this.buf[n];)n--;n<e&&(n=e),t=0;for(var r=0;r<n-e+1;r++){var i=127&~this.buf[e+r];t+=r<4?i<<7*r:i*Math.pow(2,7*r)}return-t-1},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.buf.toString("utf8",this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.slice(this.pos,e);return this.pos=e,t},readPackedVarint:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readVarint());return t},readPackedSVarint:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(e){var t=7&e;if(t===r.Varint)for(;this.buf[this.pos++]>127;);else if(t===r.Bytes)this.pos=this.readVarint()+this.pos;else if(t===r.Fixed32)this.pos+=4;else{if(t!==r.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new m(t);this.buf.copy(n),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(e){this.realloc(4),this.buf.writeUInt32LE(e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),this.buf.writeInt32LE(e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),this.buf.writeInt32LE(e&-1,this.pos),this.buf.writeUInt32LE(Math.floor(e*y),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),this.buf.writeInt32LE(e&-1,this.pos),this.buf.writeInt32LE(Math.floor(e*y),this.pos+4),this.pos+=8},writeVarint:function(e){return e=+e,e>268435455?void s(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),void (e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127)))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e);var t=m.byteLength(e);this.writeVarint(t),this.realloc(t),this.buf.write(e,this.pos),this.pos+=t},writeFloat:function(e){this.realloc(4),this.buf.writeFloatLE(e,this.pos),this.pos+=4},writeDouble:function(e){this.realloc(8),this.buf.writeDoubleLE(e,this.pos),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&o(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,r.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,u,t)},writePackedSVarint:function(e,t){this.writeMessage(e,a,t)},writePackedBoolean:function(e,t){this.writeMessage(e,c,t)},writePackedFloat:function(e,t){this.writeMessage(e,f,t)},writePackedDouble:function(e,t){this.writeMessage(e,l,t)},writePackedFixed32:function(e,t){this.writeMessage(e,h,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,p,t)},writePackedFixed64:function(e,t){this.writeMessage(e,d,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,v,t)},writeBytesField:function(e,t){this.writeTag(e,r.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,r.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,r.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,r.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":441}],443:[function(e,t,n){"use strict";function r(e){var t=e.length;if(t<i){for(var n=1,r=0;r<t;++r)for(var o=0;o<r;++o)if(e[r]<e[o])n=-n;else if(e[r]===e[o])return 0;return n}for(var u=s.mallocUint8(t),r=0;r<t;++r)u[r]=0;for(var n=1,r=0;r<t;++r)if(!u[r]){var f=1;u[r]=1;for(var o=e[r];o!==r;o=e[o]){if(u[o])return s.freeUint8(u),0;f+=1,u[o]=1}1&f||(n=-n)}return s.freeUint8(u),n}t.exports=r;var i=32,s=e("typedarray-pool")},{"typedarray-pool":502}],444:[function(e,t,n){"use strict";function r(e){var t=e.length;switch(t){case 0:case 1:return 0;case 2:return e[1]}var n,r,i,u=s.mallocUint32(t),f=s.mallocUint32(t),l=0;for(o(e,f),i=0;i<t;++i)u[i]=e[i];for(i=t-1;i>0;--i)r=f[i],n=u[i],u[i]=u[r],u[r]=n,f[i]=f[n],f[n]=r,l=(l+n)*i;return s.freeUint32(f),s.freeUint32(u),l}function i(e,t,n){switch(e){case 0:return n?n:[];case 1:return n?(n[0]=0,n):[0];case 2:return n?(t?(n[0]=0,n[1]=1):(n[0]=1,n[1]=0),n):t?[0,1]:[1,0]}n=n||new Array(e);var r,i,s,o=1;for(n[0]=0,s=1;s<e;++s)n[s]=s,o=o*s|0;for(s=e-1;s>0;--s)r=t/o|0,t=t-r*o|0,o=o/s|0,i=0|n[s],n[s]=0|n[r],n[r]=0|i;return n}var s=e("typedarray-pool"),o=e("invert-permutation");n.rank=r,n.unrank=i},{"invert-permutation":261,"typedarray-pool":502}],445:[function(e,t,n){"use strict";function r(e,t){function n(e,t){var n=f[t][e[t]];n.splice(n.indexOf(e),1)}function r(e,r,s){for(var o,u,a,l=0;l<2;++l)if(f[l][r].length>0){o=f[l][r][0],a=l;break}u=o[1^a];for(var c=0;c<2;++c)for(var h=f[c][r],p=0;p<h.length;++p){var d=h[p],v=d[1^c],m=i(t[e],t[r],t[u],t[v]);m>0&&(o=d,u=v,a=c)}return s?u:(o&&n(o,a),u)}function s(e,s){var o=f[s][e][0],u=[e];n(o,s);for(var a=o[1^s];;){for(;a!==e;)u.push(a),a=r(u[u.length-2],a,!1);if(f[0][e].length+f[1][e].length===0)break;var l=u[u.length-1],c=e,h=u[1],p=r(l,c,!0);if(i(t[l],t[c],t[h],t[p])<0)break;u.push(e),a=r(l,c)}return u}function o(e,t){return t[1]===t[t.length-1]}for(var u=0|t.length,a=e.length,f=[new Array(u),new Array(u)],l=0;l<u;++l)f[0][l]=[],f[1][l]=[];for(var l=0;l<a;++l){var c=e[l];f[0][c[0]].push(c),f[1][c[1]].push(c)}for(var h=[],l=0;l<u;++l)f[0][l].length+f[1][l].length===0&&h.push([l]);for(var l=0;l<u;++l)for(var p=0;p<2;++p){for(var d=[];f[p][l].length>0;){var v=(f[0][l].length,s(l,p));o(d,v)?d.push.apply(d,v):(d.length>0&&h.push(d),d=v)}d.length>0&&h.push(d)}return h}t.exports=r;var i=e("compare-angle")},{"compare-angle":83}],446:[function(e,t,n){"use strict";function r(e,t){for(var n=i(e,t.length),r=new Array(t.length),s=new Array(t.length),o=[],u=0;u<t.length;++u){var a=n[u].length;s[u]=a,r[u]=!0,a<=1&&o.push(u)}for(;o.length>0;){var f=o.pop();r[f]=!1;for(var l=n[f],u=0;u<l.length;++u){var c=l[u];0===--s[c]&&o.push(c)}}for(var h=new Array(t.length),p=[],u=0;u<t.length;++u)if(r[u]){var f=p.length;h[u]=f,p.push(t[u])}else h[u]=-1;for(var d=[],u=0;u<e.length;++u){var v=e[u];r[v[0]]&&r[v[1]]&&d.push([h[v[0]],h[v[1]]])}return[d,p]}t.exports=r;var i=e("edges-to-adjacency-list")},{"edges-to-adjacency-list":102}],447:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}function i(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=[];return t}function s(e,t){function n(e){for(var n=e.length,r=[0],i=0;i<n;++i){var s=t[e[i]],o=t[e[(i+1)%n]],u=f(-s[0],s[1]),a=f(-s[0],o[1]),c=f(o[0],s[1]),h=f(o[0],o[1]);r=l(r,l(l(u,a),l(c,h)))}return r[r.length-1]>0}function s(e){for(var t=e.length,n=0;n<t;++n)if(!P[e[n]])return!1;return!0}var p=h(e,t);e=p[0],t=p[1];for(var d=t.length,v=(e.length,o(e,t.length)),m=0;m<d;++m)if(v[m].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var g=u(e,t);g=g.filter(n);for(var y=g.length,b=new Array(y),w=new Array(y),m=0;m<y;++m){b[m]=m;var E=new Array(y),S=g[m].map(function(e){return t[e]}),x=a([S]),T=0;e:for(var N=0;N<y;++N)if(E[N]=0,m!==N){for(var C=g[N],k=C.length,L=0;L<k;++L){var A=x(t[C[L]]);if(0!==A){A<0&&(E[N]=1,T+=1);continue e}}E[N]=1,T+=1}w[m]=[T,m,E]}w.sort(function(e,t){return t[0]-e[0]});for(var m=0;m<y;++m)for(var E=w[m],O=E[1],M=E[2],N=0;N<y;++N)M[N]&&(b[N]=O);for(var _=i(y),m=0;m<y;++m)_[m].push(b[m]),_[b[m]].push(m);for(var D={},P=r(d,!1),m=0;m<y;++m)for(var C=g[m],k=C.length,N=0;N<k;++N){var H=C[N],B=C[(N+1)%k],j=Math.min(H,B)+":"+Math.max(H,B);if(j in D){var F=D[j];_[F].push(m),_[m].push(F),P[H]=P[B]=!0}else D[j]=m}for(var I=[],q=r(y,-1),m=0;m<y;++m)b[m]!==m||s(g[m])?q[m]=-1:(I.push(m),q[m]=0);for(var p=[];I.length>0;){var R=I.pop(),U=_[R];c(U,function(e,t){return e-t});var z,W=U.length,X=q[R];if(0===X){var C=g[R];z=[C]}for(var m=0;m<W;++m){var V=U[m];if(!(q[V]>=0)&&(q[V]=1^X,I.push(V),0===X)){var C=g[V];s(C)||(C.reverse(),z.push(C))}}0===X&&p.push(z)}return p}t.exports=s;var o=e("edges-to-adjacency-list"),u=e("planar-dual"),a=e("point-in-big-polygon"),f=e("two-product"),l=e("robust-sum"),c=e("uniq"),h=e("./lib/trim-leaves")},{"./lib/trim-leaves":446,"edges-to-adjacency-list":102,"planar-dual":445,"point-in-big-polygon":449,"robust-sum":476,"two-product":500,uniq:504}],448:[function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},{}],449:[function(e,t,n){function r(){return!0}function i(e){return function(t,n){var i=e[t];return!!i&&!!i.queryPoint(n,r)}}function s(e){for(var t={},n=0;n<e.length;++n){var r=e[n],s=r[0][0],o=r[0][1],u=r[1][1],a=[Math.min(o,u),Math.max(o,u)];s in t?t[s].push(a):t[s]=[a]}for(var f={},l=Object.keys(t),n=0;n<l.length;++n){var c=t[l[n]];f[l[n]]=p(c)}return i(f)}function o(e,t){return function(n){var r=d.le(t,n[0]);if(r<0)return 1;var i=e[r];if(!i){if(!(r>0&&t[r]===n[0]))return 1;i=e[r-1]}for(var s=1;i;){var o=i.key,u=c(n,o[0],o[1]);if(o[0][0]<o[1][0])if(u<0)i=i.left;else{if(!(u>0))return 0;s=-1,i=i.right}else if(u>0)i=i.left;else{if(!(u<0))return 0;s=1,i=i.right}}return s}}function u(e){return 1}function a(e){return function(t){return e(t[0],t[1])?0:1}}function f(e,t){return function(n){return e(n[0],n[1])?0:t(n)}}function l(e){for(var t=e.length,n=[],r=[],i=0;i<t;++i)for(var l=e[i],c=l.length,p=c-1,d=0;d<c;p=d++){var v=l[p],m=l[d];v[0]===m[0]?r.push([v,m]):n.push([v,m])}if(0===n.length)return 0===r.length?u:a(s(r));var g=h(n),y=o(g.slabs,g.coordinates);return 0===r.length?y:f(s(r),y)}t.exports=l;var c=e("robust-orientation")[3],h=e("slab-decomposition"),p=e("interval-tree-1d"),d=e("binary-search-bounds")},{"binary-search-bounds":55,"interval-tree-1d":260,"robust-orientation":471,"slab-decomposition":488}],450:[function(e,t,n){"use strict";function r(e,t,n,r,u){i.length<r.length&&(i=new Float64Array(r.length),s=new Float64Array(r.length),o=new Float64Array(r.length));for(var f=0;f<r.length;++f)i[f]=e[f]-r[f],s[f]=t[f]-e[f],o[f]=n[f]-e[f];for(var l=0,c=0,h=0,p=0,d=0,v=0,f=0;f<r.length;++f){var m=s[f],g=o[f],y=i[f];l+=m*m,c+=m*g,h+=g*g,p+=y*m,d+=y*g,v+=y*y}var b,w=Math.abs(l*h-c*c),E=c*d-h*p,S=c*p-l*d;if(E+S<=w)if(E<0)S<0&&p<0?(S=0,-p>=l?(E=1,b=l+2*p+v):(E=-p/l,b=p*E+v)):(E=0,d>=0?(S=0,b=v):-d>=h?(S=1,b=h+2*d+v):(S=-d/h,b=d*S+v));else if(S<0)S=0,p>=0?(E=0,b=v):-p>=l?(E=1,b=l+2*p+v):(E=-p/l,b=p*E+v);else{var x=1/w;E*=x,S*=x,b=E*(l*E+c*S+2*p)+S*(c*E+h*S+2*d)+v}else{var T,N,C,k;E<0?(T=c+p,N=h+d,N>T?(C=N-T,k=l-2*c+h,C>=k?(E=1,S=0,b=l+2*p+v):(E=C/k,S=1-E,b=E*(l*E+c*S+2*p)+S*(c*E+h*S+2*d)+v)):(E=0,N<=0?(S=1,b=h+2*d+v):d>=0?(S=0,b=v):(S=-d/h,b=d*S+v))):S<0?(T=c+d,N=l+p,N>T?(C=N-T,k=l-2*c+h,C>=k?(S=1,E=0,b=h+2*d+v):(S=C/k,E=1-S,b=E*(l*E+c*S+2*p)+S*(c*E+h*S+2*d)+v)):(S=0,N<=0?(E=1,b=l+2*p+v):p>=0?(E=0,b=v):(E=-p/l,b=p*E+v))):(C=h+d-c-p,C<=0?(E=0,S=1,b=h+2*d+v):(k=l-2*c+h,C>=k?(E=1,S=0,b=l+2*p+v):(E=C/k,S=1-E,b=E*(l*E+c*S+2*p)+S*(c*E+h*S+2*d)+v)))}for(var L=1-E-S,f=0;f<r.length;++f)u[f]=L*e[f]+E*t[f]+S*n[f];return b<0?0:b}var i=new Float64Array(4),s=new Float64Array(4),o=new Float64Array(4);t.exports=r},{}],451:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function u(){m&&d&&(m=!1,d.length?v=d.concat(v):g=-1,v.length&&a())}function a(){if(!m){var e=s(u);m=!0;for(var t=v.length;t;){for(d=v,v=[];++g<t;)d&&d[g].run();g=-1,t=v.length}d=null,m=!1,o(e)}}function f(e,t){this.fun=e,this.array=t}function l(){}var c,h,p=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var d,v=[],m=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new f(e,t)),1!==v.length||m||s(a)},f.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],452:[function(n,r,i){(function(n){!function(s){function o(e){throw new RangeError(H[e])}function u(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function a(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(P,".");var i=e.split("."),s=u(i,t).join(".");return r+s}function f(e){for(var t,n,r=[],i=0,s=e.length;i<s;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<s?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function l(e){return u(e,function(e){var t="";return e>65535&&(e-=65536,t+=F(e>>>10&1023|55296),e=56320|1023&e),t+=F(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:T}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,n){var r=0;for(e=n?j(e/L):e>>1,e+=j(e/t);e>B*C>>1;r+=T)e=j(e/B);return j(r+(B+1)*e/(e+k))}function d(e){var t,n,r,i,s,u,a,f,h,d,v=[],m=e.length,g=0,y=O,b=A;for(n=e.lastIndexOf(M),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&o("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(s=g,u=1,a=T;i>=m&&o("invalid-input"),f=c(e.charCodeAt(i++)),(f>=T||f>j((x-g)/u))&&o("overflow"),g+=f*u,h=a<=b?N:a>=b+C?C:a-b,!(f<h);a+=T)d=T-h,u>j(x/d)&&o("overflow"),u*=d;t=v.length+1,b=p(g-s,t,0==s),j(g/t)>x-y&&o("overflow"),y+=j(g/t),g%=t,v.splice(g++,0,y)}return l(v)}function v(e){var t,n,r,i,s,u,a,l,c,d,v,m,g,y,b,w=[];for(e=f(e),m=e.length,t=O,n=0,s=A,u=0;u<m;++u)v=e[u],v<128&&w.push(F(v));for(r=i=w.length,i&&w.push(M);r<m;){for(a=x,u=0;u<m;++u)v=e[u],v>=t&&v<a&&(a=v);for(g=r+1,a-t>j((x-n)/g)&&o("overflow"),n+=(a-t)*g,t=a,u=0;u<m;++u)if(v=e[u],v<t&&++n>x&&o("overflow"),v==t){for(l=n,c=T;d=c<=s?N:c>=s+C?C:c-s,!(l<d);c+=T)b=l-d,y=T-d,w.push(F(h(d+b%y,0))),l=j(b/y);w.push(F(h(l,0))),s=p(n,g,r==i),n=0,++r}++n,++t}return w.join("")}function m(e){return a(e,function(e){return _.test(e)?d(e.slice(4).toLowerCase()):e})}function g(e){return a(e,function(e){return D.test(e)?"xn--"+v(e):e})}var y="object"==typeof i&&i&&!i.nodeType&&i,b="object"==typeof r&&r&&!r.nodeType&&r,w="object"==typeof n&&n;w.global!==w&&w.window!==w&&w.self!==w||(s=w);var E,S,x=2147483647,T=36,N=1,C=26,k=38,L=700,A=72,O=128,M="-",_=/^xn--/,D=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=T-N,j=Math.floor,F=String.fromCharCode;if(E={version:"1.4.1",ucs2:{decode:f,encode:l},decode:d,encode:v,toASCII:g,toUnicode:m},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return E});else if(y&&b)if(r.exports==y)b.exports=E;else for(S in E)E.hasOwnProperty(S)&&(y[S]=E[S]);else s.punycode=E}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],453:[function(e,t,n){t.exports=e("gl-quat/slerp")},{"gl-quat/slerp":204}],454:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,s){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var u=/\+/g;e=e.split(t);var a=1e3;s&&"number"==typeof s.maxKeys&&(a=s.maxKeys);var f=e.length;a>0&&f>a&&(f=a);for(var l=0;l<f;++l){var c,h,p,d,v=e[l].replace(u,"%20"),m=v.indexOf(n);m>=0?(c=v.substr(0,m),h=v.substr(m+1)):(c=v,h=""),p=decodeURIComponent(c),d=decodeURIComponent(h),r(o,p)?i(o[p])?o[p].push(d):o[p]=[o[p],d]:o[p]=d}return o};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],455:[function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,u){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(o(e),function(o){var u=encodeURIComponent(i(o))+n;return s(e[o])?r(e[o],function(e){return u+encodeURIComponent(i(e))}).join(t):u+encodeURIComponent(i(e[o]))}).join(t):u?encodeURIComponent(i(u))+n+encodeURIComponent(i(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],456:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":454,"./encode":455}],457:[function(e,t,n){"use strict";function r(e,t,n,o,u){for(n=n||0,o=o||e.length-1,u=u||s;o>n;){if(o-n>600){var f=o-n+1,l=t-n+1,c=Math.log(f),h=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*h*(f-h)/f)*(l-f/2<0?-1:1),d=Math.max(n,Math.floor(t-l*h/f+p)),v=Math.min(o,Math.floor(t+(f-l)*h/f+p));r(e,t,d,v,u)}var m=e[t],g=n,y=o;for(i(e,n,t),u(e[o],m)>0&&i(e,n,o);g<y;){for(i(e,g,y),g++,y--;u(e[g],m)<0;)g++;for(;u(e[y],m)>0;)y--}0===u(e[n],m)?i(e,n,y):(y++,i(e,y,o)),y<=t&&(n=y+1),t<=y&&(o=y-1)}}function i(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function s(e,t){return e<t?-1:e>t?1:0}t.exports=r},{}],458:[function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=new Array(n),s=0;s<n;++s)r[s]=i(e[s],t[s]);return r}var i=e("big-rat/add");t.exports=r},{"big-rat/add":39}],459:[function(e,t,n){"use strict";function r(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=i(e[n]);return t}t.exports=r;var i=e("big-rat")},{"big-rat":42}],460:[function(e,t,n){"use strict";function r(e,t){for(var n=i(t),r=e.length,o=new Array(r),u=0;u<r;++u)o[u]=s(e[u],n);return o}var i=e("big-rat"),s=e("big-rat/mul");t.exports=r},{"big-rat":42,"big-rat/mul":51}],461:[function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=new Array(n),s=0;s<n;++s)r[s]=i(e[s],t[s]);return r}var i=e("big-rat/sub");t.exports=r},{"big-rat/sub":53}],462:[function(e,t,n){"use strict";function r(e){e.sort(s);for(var t=e.length,n=0,r=0;r<t;++r){var u=e[r],f=o(u);if(0!==f){if(n>0){var l=e[n-1];if(0===i(u,l)&&o(l)!==f){n-=1;continue}}e[n++]=u}}return e.length=n,e}var i=e("compare-cell"),s=e("compare-oriented-cell"),o=e("cell-orientation");t.exports=r},{"cell-orientation":75,"compare-cell":84,"compare-oriented-cell":85}],463:[function(e,t,n){"use strict";function r(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(i!==e||"undefined"==typeof i)i=e,s="";else if(s.length>=n)return s.substr(0,n);for(;n>s.length&&t>1;)1&t&&(s+=e),t>>=1,e+=e;return s+=e,s=s.substr(0,n)}var i,s="";t.exports=r},{}],464:[function(n,r,i){void function(n,s){"function"==typeof e&&e.amd?e(s):"object"==typeof i?r.exports=s():n.resolveUrl=s()}(this,function(){function e(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var t=document.createElement("base");if(t.href=arguments[0],1===e)return t.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(t,n.firstChild);for(var r,i=document.createElement("a"),s=1;s<e;s++)i.href=arguments[s],r=i.href,t.href=r;return n.removeChild(t),r}return e})},{}],465:[function(e,t,n){(function(e){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+(new Date)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],466:[function(e,t,n){"use strict";function r(e){for(var t=e.length,n=e[e.length-1],r=t,i=t-2;i>=0;--i){var s=n,o=e[i];n=s+o;var u=n-s,a=o-u;a&&(e[--r]=n,n=a)}for(var f=0,i=r;i<t;++i){var s=e[i],o=n;n=s+o;var u=n-s,a=o-u;a&&(e[f++]=a)}return e[f++]=n,e.length=f,e}t.exports=r},{}],467:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),s=0,o=0;s<e.length;++s)s!==t&&(i[o++]=e[r][s]);return n}function i(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m[",n,"][",r,"]"].join("")}return t}function s(e){return 1&e?"-":""}function o(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",o(e.slice(0,t)),",",o(e.slice(t)),")"].join("")}function u(e){if(2===e.length)return["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("");for(var t=[],n=0;n<e.length;++n)t.push(["scale(",u(r(e,n)),",",s(n),e[0][n],")"].join(""));return o(t)}function a(e){var t=new Function("sum","scale","prod","compress",["function robustDeterminant",e,"(m){return compress(",u(i(e)),")};return robustDeterminant",e].join(""));return t(c,h,l,p)}function f(){for(;v.length<d;)v.push(a(v.length));for(var e=[],n=["function robustDeterminant(m){switch(m.length){"],r=0;r<d;++r)e.push("det"+r),n.push("case ",r,":return det",r,"(m);");n.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),e.push("CACHE","gen",n.join(""));var i=Function.apply(void 0,e);t.exports=i.apply(void 0,v.concat([v,a]));for(var r=0;r<v.length;++r)t.exports[r]=v[r]}var l=e("two-product"),c=e("robust-sum"),h=e("robust-scale"),p=e("robust-compress"),d=6,v=[function(){return[0]},function(e){return[e[0][0]]}];f()},{"robust-compress":466,"robust-scale":473,"robust-sum":476,"two-product":500}],468:[function(e,t,n){"use strict";function r(e,t){for(var n=i(e[0],t[0]),r=1;r<e.length;++r)n=s(n,i(e[r],t[r]));return n}var i=e("two-product"),s=e("robust-sum");t.exports=r},{"robust-sum":476,"two-product":500}],469:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),s=0,o=0;s<e.length;++s)s!==t&&(i[o++]=e[r][s]);return n}function i(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-2,"]"].join("")}return t}function s(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",s(e.slice(0,t)),",",s(e.slice(t)),")"].join("")}function o(e,t){if("m"===e.charAt(0)){if("w"===t.charAt(0)){var n=e.split("[");return["w",t.substr(1),"m",n[0].substr(1)].join("")}return["prod(",e,",",t,")"].join("")}return o(t,e)}function u(e){return e&!0?"-":""}function a(e){if(2===e.length)return[["diff(",o(e[0][0],e[1][1]),",",o(e[1][0],e[0][1]),")"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",s(a(r(e,n))),",",u(n),e[0][n],")"].join(""));return t}function f(e,t){for(var n=[],r=0;r<t-2;++r)n.push(["prod(m",e,"[",r,"],m",e,"[",r,"])"].join(""));return s(n)}function l(e){for(var t=[],n=[],o=i(e),u=0;u<e;++u)o[0][u]="1",o[e-1][u]="w"+u;for(var u=0;u<e;++u)0===(1&u)?t.push.apply(t,a(r(o,u))):n.push.apply(n,a(r(o,u)));for(var l=s(t),c=s(n),h="exactInSphere"+e,p=[],u=0;u<e;++u)p.push("m"+u);for(var d=["function ",h,"(",p.join(),"){"],u=0;u<e;++u){d.push("var w",u,"=",f(u,e),";");for(var v=0;v<e;++v)v!==u&&d.push("var w",u,"m",v,"=scale(w",u,",m",v,"[0]);")}d.push("var p=",l,",n=",c,",d=diff(p,n);return d[d.length-1];}return ",h);var w=new Function("sum","diff","prod","scale",d.join(""));return w(g,y,m,b)}function c(){return 0}function h(){return 0}function p(){return 0}function d(e){var t=E[e.length];return t||(t=E[e.length]=l(e.length)),t.apply(void 0,e)}function v(){for(;E.length<=w;)E.push(l(E.length));for(var e=[],n=["slow"],r=0;r<=w;++r)e.push("a"+r),n.push("o"+r);for(var i=["function testInSphere(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],r=2;r<=w;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),n.push(i.join(""));var s=Function.apply(void 0,n);t.exports=s.apply(void 0,[d].concat(E));for(var r=0;r<=w;++r)t.exports[r]=E[r]}var m=e("two-product"),g=e("robust-sum"),y=e("robust-subtract"),b=e("robust-scale"),w=6,E=[c,h,p];v()},{"robust-scale":473,"robust-subtract":475,"robust-sum":476,"two-product":500}],470:[function(e,t,n){"use strict";function r(e){for(var t="robustLinearSolve"+e+"d",n=["function ",t,"(A,b){return ["],r=0;r<e;++r){n.push("det([");for(var i=0;i<e;++i){i>0&&n.push(","),n.push("[");for(var s=0;s<e;++s)s>0&&n.push(","),s===r?n.push("+b[",i,"]"):n.push("+A[",i,"][",s,"]");n.push("]")}n.push("]),")}n.push("det(A)]}return ",t);var o=new Function("det",n.join(""));return o(e<6?u[e]:u)}function i(){return[0]}function s(e,t){return[[t[0]],[e[0][0]]]}function o(){for(;f.length<a;)f.push(r(f.length));for(var e=[],n=["function dispatchLinearSolve(A,b){switch(A.length){"],i=0;i<a;++i)e.push("s"+i),n.push("case ",i,":return s",i,"(A,b);");n.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),e.push("CACHE","g",n.join(""));var s=Function.apply(void 0,e);t.exports=s.apply(void 0,f.concat([f,r]));for(var i=0;i<a;++i)t.exports[i]=f[i]}var u=e("robust-determinant"),a=6,f=[i,s];o()},{"robust-determinant":467}],471:[function(e,t,n){"use strict";function r(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),s=0,o=0;s<e.length;++s)s!==t&&(i[o++]=e[r][s]);return n}function i(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-1,"]"].join("")}return t}function s(e){return 1&e?"-":""}function o(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",o(e.slice(0,t)),",",o(e.slice(t)),")"].join("")}function u(e){if(2===e.length)return[["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",o(u(r(e,n))),",",s(n),e[0][n],")"].join(""));return t}function a(e){for(var t=[],n=[],s=i(e),a=[],f=0;f<e;++f)0===(1&f)?t.push.apply(t,u(r(s,f))):n.push.apply(n,u(r(s,f))),a.push("m"+f);var l=o(t),v=o(n),m="orientation"+e+"Exact",g=["function ",m,"(",a.join(),"){var p=",l,",n=",v,",d=sub(p,n);return d[d.length-1];};return ",m].join(""),y=new Function("sum","prod","scale","sub",g);return y(h,c,p,d)}function f(e){var t=E[e.length];return t||(t=E[e.length]=a(e.length)),t.apply(void 0,e)}function l(){for(;E.length<=v;)E.push(a(E.length));for(var e=[],n=["slow"],r=0;r<=v;++r)e.push("a"+r),n.push("o"+r);for(var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],r=2;r<=v;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var s=Function.apply(void 0,n);t.exports=s.apply(void 0,[f].concat(E));for(var r=0;r<=v;++r)t.exports[r]=E[r]}var c=e("two-product"),h=e("robust-sum"),p=e("robust-scale"),d=e("robust-subtract"),v=5,m=1.1102230246251565e-16,g=(3+16*m)*m,y=(7+56*m)*m,b=a(3),w=a(4),E=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var r,i=(e[1]-n[1])*(t[0]-n[0]),s=(e[0]-n[0])*(t[1]-n[1]),o=i-s;if(i>0){if(s<=0)return o;r=i+s}else{if(!(i<0))return o;if(s>=0)return o;r=-(i+s)}var u=g*r;return o>=u||o<=-u?o:b(e,t,n)},function(e,t,n,r){var i=e[0]-r[0],s=t[0]-r[0],o=n[0]-r[0],u=e[1]-r[1],a=t[1]-r[1],f=n[1]-r[1],l=e[2]-r[2],c=t[2]-r[2],h=n[2]-r[2],p=s*f,d=o*a,v=o*u,m=i*f,g=i*a,b=s*u,E=l*(p-d)+c*(v-m)+h*(g-b),S=(Math.abs(p)+Math.abs(d))*Math.abs(l)+(Math.abs(v)+Math.abs(m))*Math.abs(c)+(Math.abs(g)+Math.abs(b))*Math.abs(h),x=y*S;return E>x||-E>x?E:w(e,t,n,r)}];l()},{"robust-scale":473,"robust-subtract":475,"robust-sum":476,"two-product":500}],472:[function(e,t,n){"use strict";function r(e,t){if(1===e.length)return s(t,e[0]);if(1===t.length)return s(e,t[0]);if(0===e.length||0===t.length)return[0];var n=[0];if(e.length<t.length)for(var r=0;r<e.length;++r)n=i(n,s(t,e[r]));else for(var r=0;r<t.length;++r)n=i(n,s(e,t[r]));return n}var i=e("robust-sum"),s=e("robust-scale");t.exports=r},{"robust-scale":473,"robust-sum":476}],473:[function(e,t,n){"use strict";function r(e,t){var n=e.length;if(1===n){var r=i(e[0],t);return r[0]?r:[r[1]]}var o=new Array(2*n),u=[.1,.1],f=[.1,.1],l=0;i(e[0],t,u),u[0]&&(o[l++]=u[0]);for(var c=1;c<n;++c){i(e[c],t,f);var h=u[1];s(h,f[0],u),u[0]&&(o[l++]=u[0]);var p=f[1],d=u[1],v=p+d,m=v-p,g=d-m;u[1]=v,g&&(o[l++]=g)}return u[1]&&(o[l++]=u[1]),0===l&&(o[l++]=0),o.length=l,o}var i=e("two-product"),s=e("two-sum");t.exports=r},{"two-product":500,"two-sum":501}],474:[function(e,t,n){"use strict";function r(e,t,n,r){for(var i=0;i<2;++i){var s=e[i],o=t[i],u=Math.min(s,o),a=Math.max(s,o),f=n[i],l=r[i],c=Math.min(f,l),h=Math.max(f,l);if(h<u||a<c)return!1}return!0}function i(e,t,n,i){var o=s(e,n,i),u=s(t,n,i);if(o>0&&u>0||o<0&&u<0)return!1;var f=s(n,e,t),l=s(i,e,t);return!(f>0&&l>0||f<0&&l<0)&&(0!==o||0!==u||0!==f||0!==l||r(e,t,n,i))}t.exports=i;var s=e("robust-orientation")[3]},{"robust-orientation":471}],475:[function(e,t,n){"use strict";function r(e,t){var n=e+t,r=n-e,i=n-r,s=t-r,o=e-i,u=o+s;return u?[u,n]:[n]}function i(e,t){var n=0|e.length,i=0|t.length;if(1===n&&1===i)return r(e[0],-t[0]);var s,o,u=n+i,a=new Array(u),f=0,l=0,c=0,h=Math.abs,p=e[l],d=h(p),v=-t[c],m=h(v);d<m?(o=p,l+=1,l<n&&(p=e[l],d=h(p))):(o=v,c+=1,c<i&&(v=-t[c],m=h(v))),l<n&&d<m||c>=i?(s=p,l+=1,l<n&&(p=e[l],d=h(p))):(s=v,c+=1,c<i&&(v=-t[c],m=h(v)));for(var g,y,b,w,E,S=s+o,x=S-s,T=o-x,N=T,C=S;l<n&&c<i;)d<m?(s=p,l+=1,l<n&&(p=e[l],d=h(p))):(s=v,c+=1,c<i&&(v=-t[c],m=h(v))),o=N,S=s+o,x=S-s,T=o-x,T&&(a[f++]=T),g=C+S,y=g-C,b=g-y,w=S-y,E=C-b,N=E+w,C=g;for(;l<n;)s=p,o=N,S=s+o,x=S-s,T=o-x,T&&(a[f++]=T),g=C+S,y=g-C,b=g-y,w=S-y,E=C-b,N=E+w,C=g,l+=1,l<n&&(p=e[l]);for(;c<i;)s=v,o=N,S=s+o,x=S-s,T=o-x,T&&(a[f++]=T),g=C+S,y=g-C,b=g-y,w=S-y,E=C-b,N=E+w,C=g,c+=1,c<i&&(v=-t[c]);return N&&(a[f++]=N),C&&(a[f++]=C),f||(a[f++]=0),a.length=f,a}t.exports=i},{}],476:[function(e,t,n){"use strict";function r(e,t){var n=e+t,r=n-e,i=n-r,s=t-r,o=e-i,u=o+s;return u?[u,n]:[n]}function i(e,t){var n=0|e.length,i=0|t.length;if(1===n&&1===i)return r(e[0],t[0]);var s,o,u=n+i,a=new Array(u),f=0,l=0,c=0,h=Math.abs,p=e[l],d=h(p),v=t[c],m=h(v);d<m?(o=p,l+=1,l<n&&(p=e[l],d=h(p))):(o=v,c+=1,c<i&&(v=t[c],m=h(v))),l<n&&d<m||c>=i?(s=p,l+=1,l<n&&(p=e[l],d=h(p))):(s=v,c+=1,c<i&&(v=t[c],m=h(v)));for(var g,y,b,w,E,S=s+o,x=S-s,T=o-x,N=T,C=S;l<n&&c<i;)d<m?(s=p,l+=1,l<n&&(p=e[l],d=h(p))):(s=v,c+=1,c<i&&(v=t[c],m=h(v))),o=N,S=s+o,x=S-s,T=o-x,T&&(a[f++]=T),g=C+S,y=g-C,b=g-y,w=S-y,E=C-b,N=E+w,C=g;for(;l<n;)s=p,o=N,S=s+o,x=S-s,T=o-x,T&&(a[f++]=T),g=C+S,y=g-C,b=g-y,w=S-y,E=C-b,N=E+w,C=g,l+=1,l<n&&(p=e[l]);for(;c<i;)s=v,o=N,S=s+o,x=S-s,T=o-x,T&&(a[f++]=T),g=C+S,y=g-C,b=g-y,w=S-y,E=C-b,N=E+w,C=g,c+=1,c<i&&(v=t[c]);return N&&(a[f++]=N),C&&(a[f++]=C),f||(a[f++]=0),a.length=f,a}t.exports=i},{}],477:[function(n,r,i){!function(n,s){"object"==typeof i&&"undefined"!=typeof r?r.exports=s():"function"==typeof e&&e.amd?e(s):n.ShelfPack=s()}(this,function(){function e(e,t,n){n=n||{},this.w=e||64,this.h=t||64,this.autoResize=!!n.autoResize,this.shelves=[],this.stats={},this.count=function(e){this.stats[e]=(0|this.stats[e])+1}}function t(e,t,n){this.x=0,this.y=e,this.w=this.free=t,this.h=n}return e.prototype.pack=function(e,t){e=[].concat(e),t=t||{};for(var n,r,i,s=[],o=0;o<e.length;o++)if(n=e[o].w||e[o].width,r=e[o].h||e[o].height,n&&r){if(i=this.packOne(n,r),!i)continue;t.inPlace&&(e[o].x=i.x,e[o].y=i.y),s.push(i)}if(this.shelves.length>0){for(var u=0,a=0,f=0;f<this.shelves.length;f++){var l=this.shelves[f];a+=l.h,u=Math.max(l.w-l.free,u)}this.resize(u,a)}return s},e.prototype.packOne=function(e,n){for(var r,i,s=0,o={shelf:-1,waste:1/0},u=0;u<this.shelves.length;u++){if(r=this.shelves[u],s+=r.h,n===r.h&&e<=r.free)return this.count(n),r.alloc(e,n);n>r.h||e>r.free||n<r.h&&e<=r.free&&(i=r.h-n,i<o.waste&&(o.waste=i,o.shelf=u))}if(o.shelf!==-1)return r=this.shelves[o.shelf],this.count(n),r.alloc(e,n);if(n<=this.h-s&&e<=this.w)return r=new t(s,this.w,n),this.shelves.push(r),this.count(n),r.alloc(e,n);if(this.autoResize){var a,f,l,c;return a=f=this.h,l=c=this.w,(l<=a||e>l)&&(c=2*Math.max(e,l)),(a<l||n>a)&&(f=2*Math.max(n,a)),this.resize(c,f),this.packOne(e,n)}return null},e.prototype.clear=function(){this.shelves=[],this.stats={}},e.prototype.resize=function(e,t){this.w=e,this.h=t;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(e);return!0},t.prototype.alloc=function(e,t){if(e>this.free||t>this.h)return null;var n=this.x;return this.x+=e,this.free-=e,{x:n,y:this.y,w:e,h:t,width:e,height:t}},t.prototype.resize=function(e){return this.free+=e-this.w,this.w=e,!0},e})},{}],478:[function(e,t,n){"use strict";t.exports=function(e){return e<0?-1:e>0?1:0}},{}],479:[function(e,t,n){"use strict";function r(e){return s(i(e))}t.exports=r;var i=e("boundary-cells"),s=e("reduce-simplicial-complex")},{"boundary-cells":58,"reduce-simplicial-complex":462}],480:[function(e,t,n){"use strict";function r(e){for(var t=e.length,n=0,r=0;r<t;++r)n=0|Math.max(n,e[r].length);return n-1}function i(e,t){for(var n=e.length,r=c.mallocUint8(n),i=0;i<n;++i)r[i]=e[i]<t|0;return r}function s(e,t){for(var n=e.length,r=t*(t+1)/2*n|0,i=c.mallocUint32(2*r),s=0,o=0;o<n;++o)for(var u=e[o],t=u.length,a=0;a<t;++a)for(var f=0;f<a;++f){var p=u[f],d=u[a];i[s++]=0|Math.min(p,d),i[s++]=0|Math.max(p,d)}var v=s/2|0;h(l(i,[v,2]));for(var m=2,o=2;o<s;o+=2)i[o-2]===i[o]&&i[o-1]===i[o+1]||(i[m++]=i[o],i[m++]=i[o+1]);return l(i,[m/2|0,2])}function o(e,t,n,r){for(var i=e.data,s=e.shape[0],o=c.mallocDouble(s),u=0,a=0;a<s;++a){var f=i[2*a],h=i[2*a+1];if(n[f]!==n[h]){var p=t[f],d=t[h];i[2*u]=f,i[2*u+1]=h,o[u++]=(d-r)/(d-p)}}return e.shape[0]=u,l(o,[u])}function u(e,t){var n=c.mallocInt32(2*t),r=e.shape[0],i=e.data;n[0]=0;for(var s=0,o=0;o<r;++o){var u=i[2*o];if(u!==s){for(n[2*s+1]=o;++s<u;)n[2*s]=o,n[2*s+1]=o;n[2*s]=o}}for(n[2*s+1]=r;++s<t;)n[2*s]=n[2*s+1]=r;return n}function a(e){for(var t=0|e.shape[0],n=e.data,r=new Array(t),i=0;i<t;++i)r[i]=[n[2*i],n[2*i+1]];return r}function f(e,t,n,f){n=n||0,"undefined"==typeof f&&(f=r(e));var l=e.length;if(0===l||f<1)return{cells:[],vertexIds:[],vertexWeights:[]};var h=i(t,+n),v=s(e,f),m=o(v,t,h,+n),g=u(v,0|t.length),y=p(f)(e,v.data,g,h),b=a(v),w=[].slice.call(m.data,0,m.shape[0]);return c.free(h),c.free(v.data),c.free(m.data),c.free(g),{cells:y,vertexIds:b,vertexWeights:w}}t.exports=f;var l=e("ndarray"),c=e("typedarray-pool"),h=e("ndarray-sort"),p=e("./lib/codegen")},{"./lib/codegen":481,ndarray:432,"ndarray-sort":430,"typedarray-pool":502}],481:[function(e,t,n){"use strict";function r(e){function t(e){if(!(e.length<=0)){l.push("R.push(");for(var t=0;t<e.length;++t){var n=e[t];t>0&&l.push(","),l.push("[");for(var r=0;r<n.length;++r){var i=n[r];r>0&&l.push(","),l.push("B(C,E,c[",i[0],"],c[",i[1],"])")}l.push("]")}l.push(");")}}var n=0,r=new Array(e+1);r[0]=[[]];for(var i=1;i<=e;++i)for(var u=r[i]=o(i),f=0;f<u.length;++f)n=Math.max(n,u[i].length);for(var l=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",e,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"],i=e+1;i>1;--i){i<e+1&&l.push("else "),l.push("if(l===",i,"){");for(var c=[],f=0;f<i;++f)c.push("(S[c["+f+"]]<<"+f+")");l.push("var M=",c.join("+"),";if(M===0||M===",(1<<i)-1,"){continue}switch(M){");for(var u=r[i-1],f=0;f<u.length;++f)l.push("case ",f,":"),t(u[f]),l.push("break;");l.push("}}")}l.push("}return R;};return getContour",e,"d");var h=new Function("pool",l.join(""));return h(s)}function i(e){var t=u[e];return t||(t=u[e]=r(e)),t}t.exports=i;var s=e("typedarray-pool"),o=e("marching-simplex-table"),u={}},{"marching-simplex-table":411,"typedarray-pool":502}],482:[function(e,t,n){"use strict";"use restrict";function r(e){for(var t=0,n=Math.max,r=0,i=e.length;r<i;++r)t=n(t,e[r].length);return t-1}function i(e){for(var t=-1,n=Math.max,r=0,i=e.length;r<i;++r)for(var s=e[r],o=0,u=s.length;o<u;++o)t=n(t,s[o]);return t+1}function s(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;++n)t[n]=e[n].slice(0);return t}function o(e,t){var n=e.length,r=e.length-t.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:var s=e[0]+e[1]-t[0]-t[1];return s?s:i(e[0],e[1])-i(t[0],t[1]);case 3:var o=e[0]+e[1],u=t[0]+t[1];if(s=o+e[2]-(u+t[2]))return s;var a=i(e[0],e[1]),f=i(t[0],t[1]),s=i(a,e[2])-i(f,t[2]);return s?s:i(a+e[2],o)-i(f+t[2],u);default:var l=e.slice(0);l.sort();var c=t.slice(0);c.sort();for(var h=0;h<n;++h)if(r=l[h]-c[h])return r;return 0}}function u(e,t){return o(e[0],t[0])}function a(e,t){if(t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=[e[i],t[i]];r.sort(u);for(var i=0;i<n;++i)e[i]=r[i][0],t[i]=r[i][1];return e}return e.sort(o),e}function f(e){if(0===e.length)return[];for(var t=1,n=e.length,r=1;r<n;++r){var i=e[r];if(o(i,e[r-1])){if(r===t){t++;continue}e[t++]=i}}return e.length=t,e}function l(e,t){for(var n=0,r=e.length-1,i=-1;n<=r;){var s=n+r>>1,u=o(e[s],t);u<=0?(0===u&&(i=s),n=s+1):u>0&&(r=s-1)}return i}function c(e,t){for(var n=new Array(e.length),r=0,i=n.length;r<i;++r)n[r]=[];for(var s=[],r=0,u=t.length;r<u;++r)for(var a=t[r],f=a.length,c=1,h=1<<f;c<h;++c){s.length=b.popCount(c);for(var p=0,d=0;d<f;++d)c&1<<d&&(s[p++]=a[d]);var v=l(e,s);if(!(v<0))for(;;)if(n[v++].push(r),v>=e.length||0!==o(e[v],s))break}return n}function h(e,t){if(!t)return c(f(d(e,0)),e,0);for(var n=new Array(t),r=0;r<t;++r)n[r]=[];for(var r=0,i=e.length;r<i;++r)for(var s=e[r],o=0,u=s.length;o<u;++o)n[s[o]].push(r);return n}function p(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],s=0|i.length,o=1,u=1<<s;o<u;++o){for(var f=[],l=0;l<s;++l)o>>>l&1&&f.push(i[l]);t.push(f)}return a(t)}function d(e,t){if(t<0)return[];for(var n=[],r=(1<<t+1)-1,i=0;i<e.length;++i)for(var s=e[i],o=r;o<1<<s.length;o=b.nextCombination(o)){for(var u=new Array(t+1),f=0,l=0;l<s.length;++l)o&1<<l&&(u[f++]=s[l]);n.push(u)}return a(n)}function v(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length;s<o;++s){for(var u=new Array(i.length-1),f=0,l=0;f<o;++f)f!==s&&(u[l++]=i[f]);t.push(u)}return a(t)}function m(e,t){for(var n=new w(t),r=0;r<e.length;++r)for(var i=e[r],s=0;s<i.length;++s)for(var o=s+1;o<i.length;++o)n.link(i[s],i[o]);for(var u=[],a=n.ranks,r=0;r<a.length;++r)a[r]=-1;for(var r=0;r<e.length;++r){var f=n.find(e[r][0]);a[f]<0?(a[f]=u.length,u.push([e[r].slice(0)])):u[a[f]].push(e[r].slice(0))}return u}function g(e){for(var t=f(a(d(e,0))),n=new w(t.length),r=0;r<e.length;++r)for(var i=e[r],s=0;s<i.length;++s)for(var o=l(t,[i[s]]),u=s+1;u<i.length;++u)n.link(o,l(t,[i[u]]));for(var c=[],h=n.ranks,r=0;r<h.length;++r)h[r]=-1;for(var r=0;r<e.length;++r){var p=n.find(l(t,[e[r][0]]));h[p]<0?(h[p]=c.length,c.push([e[r].slice(0)])):c[h[p]].push(e[r].slice(0))}return c}function y(e,t){return t?m(e,t):g(e)}var b=e("bit-twiddle"),w=e("union-find");n.dimension=r,n.countVertices=i,n.cloneCells=s,n.compareCells=o,n.normalize=a,n.unique=f,n.findCell=l,n.incidence=c,n.dual=h,n.explode=p,n.skeleton=d,n.boundary=v,n.connectedComponents=y},{"bit-twiddle":56,"union-find":503}],483:[function(e,t,n){arguments[4][56][0].apply(n,arguments)},{dup:56}],484:[function(e,t,n){arguments[4][482][0].apply(n,arguments)},{"bit-twiddle":483,dup:482,"union-find":485}],485:[function(e,t,n){"use strict";"use restrict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=r,r.prototype.length=function(){return this.roots.length},r.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},r.prototype.find=function(e){for(var t=this.roots;t[e]!==e;){var n=t[e];t[e]=t[n],e=n}return e},r.prototype.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var i=this.ranks,s=this.roots,o=i[n],u=i[r];o<u?s[n]=r:u<o?s[r]=n:(s[r]=n,++i[n])}}},{}],486:[function(e,t,n){"use strict";function r(e,t,n){var r=Math.abs(s(e,t,n)),i=Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2));return r/i}function i(e,t,n){function i(e){if(w[e])return 1/0;var n=g[e],i=y[e];return n<0||i<0?1/0:r(t[e],t[n],t[i])}function s(e,t){var n=N[e],r=N[t];N[e]=r,N[t]=n,C[n]=t,C[r]=e}function u(e){return b[N[e]]}function a(e){return 1&e?e-1>>1:(e>>1)-1}function f(e){for(var t=u(e);;){var n=t,r=2*e+1,i=2*(e+1),o=e;if(r<L){var a=u(r);a<n&&(o=r,n=a)}if(i<L){var f=u(i);f<n&&(o=i)}if(o===e)return e;s(e,o),e=o}}function l(e){for(var t=u(e);e>0;){var n=a(e);if(n>=0){var r=u(n);if(t<r){s(e,n),e=n;continue}}return e}}function c(){if(L>0){var e=N[0];return s(0,L-1),L-=1,f(0),e}return-1}function h(e,t){var n=N[e];return b[n]===t?e:(b[n]=-1/0,l(e),c(),b[n]=t,L+=1,l(L-1))}function p(e){if(!w[e]){w[e]=!0;var t=g[e],n=y[e];g[n]>=0&&(g[n]=t),y[t]>=0&&(y[t]=n),C[t]>=0&&h(C[t],i(t)),C[n]>=0&&h(C[n],i(n))}}function d(e,t){if(e[t]<0)return t;var n=t,r=t;do{var i=e[r];if(!w[r]||i<0||i===r)break;if(r=i,i=e[r],!w[r]||i<0||i===r)break;r=i,n=e[n]}while(n!==r);for(var s=t;s!==r;s=e[s])e[s]=r;return r}for(var v=t.length,m=e.length,g=new Array(v),y=new Array(v),b=new Array(v),w=new Array(v),E=0;E<v;++E)g[E]=y[E]=-1,b[E]=1/0,w[E]=!1;for(var E=0;E<m;++E){var S=e[E];if(2!==S.length)throw new Error("Input must be a graph");var x=S[1],T=S[0];y[T]!==-1?y[T]=-2:y[T]=x,g[x]!==-1?g[x]=-2:g[x]=T}for(var N=[],C=new Array(v),E=0;E<v;++E){var k=b[E]=i(E);k<1/0?(C[E]=N.length,N.push(E)):C[E]=-1}for(var L=N.length,E=L>>1;E>=0;--E)f(E);for(;;){var A=c();if(A<0||b[A]>n)break;p(A)}for(var O=[],E=0;E<v;++E)w[E]||(C[E]=O.length,O.push(t[E].slice()));var M=(O.length,[]);return e.forEach(function(e){var t=d(g,e[0]),n=d(y,e[1]);if(t>=0&&n>=0&&t!==n){var r=C[t],i=C[n];r!==i&&M.push([r,i])}}),o.unique(o.normalize(M)),{positions:O,edges:M}}t.exports=i;var s=e("robust-orientation"),o=e("simplicial-complex")},{"robust-orientation":471,"simplicial-complex":484}],487:[function(e,t,n){"use strict";function r(e,t){var n,r;if(t[0][0]<t[1][0])n=t[0],r=t[1];else{if(!(t[0][0]>t[1][0])){var i=Math.min(e[0][1],e[1][1]),o=Math.max(e[0][1],e[1][1]),u=Math.min(t[0][1],t[1][1]),f=Math.max(t[0][1],t[1][1]);return o<u?o-u:i>f?i-f:o-f}n=t[1],r=t[0]}var l,c;e[0][1]<e[1][1]?(l=e[0],c=e[1]):(l=e[1],c=e[0]);var h=s(r,n,l);return h?h:(h=s(r,n,c),h?h:c-r)}function i(e,t){var n,i;if(t[0][0]<t[1][0])n=t[0],i=t[1];else{if(!(t[0][0]>t[1][0]))return r(t,e);n=t[1],i=t[0]}var o,u;if(e[0][0]<e[1][0])o=e[0],u=e[1];else{if(!(e[0][0]>e[1][0]))return-r(e,t);o=e[1],u=e[0]}var f=s(n,i,u),l=s(n,i,o);if(f<0){if(l<=0)return f}else if(f>0){if(l>=0)return f}else if(l)return l;if(f=s(u,o,i),l=s(u,o,n),f<0){if(l<=0)return f}else if(f>0){if(l>=0)return f}else if(l)return l;return i[0]-u[0]}t.exports=i;var s=e("robust-orientation")},{"robust-orientation":471}],488:[function(e,t,n){"use strict";function r(e,t,n){this.slabs=e,this.coordinates=t,this.horizontal=n}function i(e,t){return e.y-t}function s(e,t){for(var n=null;e;){var r,i,o=e.key;o[0][0]<o[1][0]?(r=o[0],i=o[1]):(r=o[1],i=o[0]);var u=c(r,i,t);if(u<0)e=e.left;else if(u>0)if(t[0]!==o[1][0])n=e,e=e.right;else{var a=s(e.right,t);if(a)return a;e=e.left}else{if(t[0]!==o[1][0])return e;var a=s(e.right,t);if(a)return a;e=e.left}}return n}function o(e,t,n,r){this.y=e,this.index=t,this.start=n,this.closed=r}function u(e,t,n,r){this.x=e,this.segment=t,this.create=n,this.index=r}function a(e){for(var t=e.length,n=2*t,i=new Array(n),s=0;s<t;++s){var a=e[s],f=a[0][0]<a[1][0];i[2*s]=new u(a[0][0],a,f,s),i[2*s+1]=new u(a[1][0],a,!f,s)}i.sort(function(e,t){var n=e.x-t.x;return n?n:(n=e.create-t.create,n?n:Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1]))});for(var c=l(h),p=[],d=[],v=[],s=0;s<n;){for(var m=i[s].x,g=[];s<n;){var y=i[s];if(y.x!==m)break;s+=1,y.segment[0][0]===y.x&&y.segment[1][0]===y.x?y.create&&(y.segment[0][1]<y.segment[1][1]?(g.push(new o(y.segment[0][1],y.index,!0,!0)),g.push(new o(y.segment[1][1],y.index,!1,!1))):(g.push(new o(y.segment[1][1],y.index,!0,!1)),g.push(new o(y.segment[0][1],y.index,!1,!0)))):c=y.create?c.insert(y.segment,y.index):c.remove(y.segment)}p.push(c.root),d.push(m),v.push(g)}return new r(p,d,v)}t.exports=a;var f=e("binary-search-bounds"),l=e("functional-red-black-tree"),c=e("robust-orientation"),h=e("./lib/order-segments"),p=r.prototype;p.castUp=function(e){var t=f.le(this.coordinates,e[0]);if(t<0)return-1;var n=(this.slabs[t],s(this.slabs[t],e)),r=-1;if(n&&(r=n.value),this.coordinates[t]===e[0]){var o=null;if(n&&(o=n.key),t>0){var u=s(this.slabs[t-1],e);u&&(o?h(u.key,o)>0&&(o=u.key,r=u.value):(r=u.value,o=u.key))}var a=this.horizontal[t];if(a.length>0){var l=f.ge(a,e[1],i);if(l<a.length){var p=a[l];if(e[1]===p.y){if(p.closed)return p.index;for(;l<a.length-1&&a[l+1].y===e[1];)if(l+=1,p=a[l],p.closed)return p.index;if(p.y===e[1]&&!p.start){if(l+=1,l>=a.length)return r;p=a[l]}}if(p.start)if(o){var d=c(o[0],o[1],[e[0],p.y]);o[0][0]>o[1][0]&&(d=-d),d>0&&(r=p.index)}else r=p.index;else p.y!==e[1]&&(r=p.index)}}}return r}},{"./lib/order-segments":487,"binary-search-bounds":55,"functional-red-black-tree":109,"robust-orientation":471}],489:[function(e,t,n){"use strict";function r(e,t){var n=f(a(e,t),[t[t.length-1]]);return n[n.length-1]}function i(e,t,n,r){var i=r-t,s=-t/i;s<0?s=0:s>1&&(s=1);for(var o=1-s,u=e.length,a=new Array(u),f=0;f<u;++f)a[f]=s*e[f]+o*n[f];return a}function s(e,t){for(var n=[],s=[],o=r(e[e.length-1],t),u=e[e.length-1],a=e[0],f=0;f<e.length;++f,u=a){a=e[f];var l=r(a,t);if(o<0&&l>0||o>0&&l<0){var c=i(u,l,a,o);n.push(c),s.push(c.slice())}l<0?s.push(a.slice()):l>0?n.push(a.slice()):(n.push(a.slice()),s.push(a.slice())),o=l}return{positive:n,negative:s}}function o(e,t){for(var n=[],s=r(e[e.length-1],t),o=e[e.length-1],u=e[0],a=0;a<e.length;++a,o=u){u=e[a];var f=r(u,t);(s<0&&f>0||s>0&&f<0)&&n.push(i(o,f,u,s)),f>=0&&n.push(u.slice()),s=f}return n}function u(e,t){for(var n=[],s=r(e[e.length-1],t),o=e[e.length-1],u=e[0],a=0;a<e.length;++a,o=u){u=e[a];var f=r(u,t);(s<0&&f>0||s>0&&f<0)&&n.push(i(o,f,u,s)),f<=0&&n.push(u.slice()),s=f}return n}var a=e("robust-dot-product"),f=e("robust-sum");t.exports=s,t.exports.positive=o,t.exports.negative=u},{"robust-dot-product":468,"robust-sum":476}],490:[function(n,r,i){!function(n){function r(){var e=arguments[0],t=r.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=r.parse(e)),r.format.call(null,t[e],arguments)}function s(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function o(e,t){return Array(t+1).join(e)}var u={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};r.format=function(e,t){var n,i,a,f,l,c,h,p=1,d=e.length,v="",m=[],g=!0,y="";for(i=0;i<d;i++)if(v=s(e[i]),"string"===v)m[m.length]=e[i];else if("array"===v){if(f=e[i],f[2])for(n=t[p],a=0;a<f[2].length;a++){if(!n.hasOwnProperty(f[2][a]))throw new Error(r("[sprintf] property '%s' does not exist",f[2][a]));n=n[f[2][a]]}else n=f[1]?t[f[1]]:t[p++];if("function"==s(n)&&(n=n()),u.not_string.test(f[8])&&u.not_json.test(f[8])&&"number"!=s(n)&&isNaN(n))throw new TypeError(r("[sprintf] expecting number but found %s",s(n)));switch(u.number.test(f[8])&&(g=n>=0),f[8]){case"b":n=n.toString(2);break;case"c":n=String.fromCharCode(n);break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,f[6]?parseInt(f[6]):0);break;case"e":n=f[7]?n.toExponential(f[7]):n.toExponential();break;case"f":n=f[7]?parseFloat(n).toFixed(f[7]):parseFloat(n);break;case"g":n=f[7]?parseFloat(n).toPrecision(f[7]):parseFloat(n);break;case"o":n=n.toString(8);break;case"s":n=(n=String(n))&&f[7]?n.substring(0,f[7]):n;break;case"u":n>>>=0;break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase()}u.json.test(f[8])?m[m.length]=n:(!u.number.test(f[8])||g&&!f[3]?y="":(y=g?"+":"-",n=n.toString().replace(u.sign,"")),c=f[4]?"0"===f[4]?"0":f[4].charAt(1):" ",h=f[6]-(y+n).length,l=f[6]&&h>0?o(c,h):"",m[m.length]=f[5]?y+n+l:"0"===c?y+l+n:l+y+n)}return m.join("")},r.cache={},r.parse=function(e){for(var t=e,n=[],r=[],i=0;t;){if(null!==(n=u.text.exec(t)))r[r.length]=n[0];else if(null!==(n=u.modulo.exec(t)))r[r.length]="%";else{if(null===(n=u.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){i|=1;var s=[],o=n[2],a=[];if(null===(a=u.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s[s.length]=a[1];""!==(o=o.substring(a[0].length));)if(null!==(a=u.key_access.exec(o)))s[s.length]=a[1];else{if(null===(a=u.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");s[s.length]=a[1]}n[2]=s}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r[r.length]=n}t=t.substring(n[0].length)}return r};var a=function(e,t,n){return n=(t||[]).slice(0),n.splice(0,0,e),r.apply(null,n)};"undefined"!=typeof i?(i.sprintf=r,i.vsprintf=a):(n.sprintf=r,n.vsprintf=a,"function"==typeof e&&e.amd&&e(function(){return{sprintf:r,vsprintf:a}}))}("undefined"==typeof window?this:window)},{}],491:[function(e,t,n){"use strict";function r(e){return new i(e)}function i(e){this.options=p(Object.create(this.options),e),this.trees=new Array(this.options.maxZoom+1)}function s(e,t,n,r){return{x:e,y:t,zoom:1/0,id:r,numPoints:n}}function o(e,t){var n=e.geometry.coordinates;return s(f(n[0]),l(n[1]),1,t)}function u(e){return{type:"Feature",properties:a(e),geometry:{type:"Point",coordinates:[c(e.x),h(e.y)]}}}function a(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return{cluster:!0,point_count:t,point_count_abbreviated:n}}function f(e){return e/360+.5}function l(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function c(e){return 360*(e-.5)}function h(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function p(e,t){for(var n in t)e[n]=t[n];return e}function d(e){return e.x}function v(e){return e.y}var m=e("kdbush");t.exports=r,i.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1},load:function(e){var t=this.options.log;t&&console.time("total time");var n="prepare "+e.length+" points";t&&console.time(n),this.points=e;var r=e.map(o);t&&console.timeEnd(n);for(var i=this.options.maxZoom;i>=this.options.minZoom;i--){var s=+Date.now();this.trees[i+1]=m(r,d,v,this.options.nodeSize,Float32Array),r=this._cluster(r,i),t&&console.log("z%d: %d clusters in %dms",i,r.length,+Date.now()-s)}return this.trees[this.options.minZoom]=m(r,d,v,this.options.nodeSize,Float32Array),t&&console.timeEnd("total time"),this},getClusters:function(e,t){for(var n=this.trees[this._limitZoom(t)],r=n.range(f(e[0]),l(e[3]),f(e[2]),l(e[1])),i=[],s=0;s<r.length;s++){var o=n.points[r[s]];i.push(o.id!==-1?this.points[o.id]:u(o))}return i},getTile:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),s=this.options.extent,o=this.options.radius,u=o/s,a=(n-u)/i,f=(n+1+u)/i,l={features:[]};return this._addTileFeatures(r.range((t-u)/i,a,(t+1+u)/i,f),r.points,t,n,i,l),0===t&&this._addTileFeatures(r.range(1-u/i,a,1,f),r.points,i,n,i,l),t===i-1&&this._addTileFeatures(r.range(0,a,u/i,f),r.points,-1,n,i,l),l.features.length?l:null},_addTileFeatures:function(e,t,n,r,i,s){for(var o=0;o<e.length;o++){var u=t[e[o]];s.features.push({type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:u.id!==-1?this.points[u.id].properties:a(u)})}},_limitZoom:function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},_cluster:function(e,t){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,t)),i=0;i<e.length;i++){var o=e[i];if(!(o.zoom<=t)){o.zoom=t;for(var u=this.trees[t+1],a=u.within(o.x,o.y,r),f=!1,l=o.numPoints,c=o.x*l,h=o.y*l,p=0;p<a.length;p++){var d=u.points[a[p]];t<d.zoom&&(f=!0,d.zoom=t,c+=d.x*d.numPoints,h+=d.y*d.numPoints,l+=d.numPoints)}n.push(f?s(c/l,h/l,l,-1):o)}}return n}}},{kdbush:264}],492:[function(e,t,n){"use strict";function r(e){return e.split("").map(function(e){return e in i?i[e]:""}).join("")}t.exports=r;var i={" ":" ",0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"","+":"","-":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:""}},{}],493:[function(e,t,n){"use strict";function r(e,t){var n=e.length,r=["'use strict';"],i="surfaceNets"+e.join("_")+"d"+t;r.push("var contour=genContour({","order:[",e.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===t&&r.push("getters:[0],");for(var s=[],a=[],f=0;f<n;++f)s.push("d"+f),a.push("d"+f);for(var f=0;f<1<<n;++f)s.push("v"+f),a.push("v"+f);for(var f=0;f<1<<n;++f)s.push("p"+f),a.push("p"+f);s.push("a","b","c"),a.push("a","c"),r.push("vertex:function vertexFunc(",s.join(),"){");for(var l=[],f=0;f<1<<n;++f)l.push("(p"+f+"<<"+f+")");r.push("var m=(",l.join("+"),")|0;if(m===0||m===",(1<<(1<<n))-1,"){return}");var c=[],h=[];1<<(1<<n)<=128?(r.push("switch(m){"),h=r):r.push("switch(m>>>7){");for(var f=0;f<1<<(1<<n);++f){if(1<<(1<<n)>128&&f%128===0){c.length>0&&h.push("}}");var p="vExtra"+c.length;r.push("case ",f>>>7,":",p,"(m&0x7f,",a.join(),");break;"),h=["function ",p,"(m,",a.join(),"){switch(m){"],c.push(h)}h.push("case ",127&f,":");for(var d=new Array(n),v=new Array(n),m=new Array(n),g=new Array(n),y=0,b=0;b<n;++b)d[b]=[],v[b]=[],m[b]=0,g[b]=0;for(var b=0;b<1<<n;++b)for(var w=0;w<n;++w){var E=b^1<<w;if(!(E>b)&&!(f&1<<E)!=!(f&1<<b)){var S=1;f&1<<E?v[w].push("v"+E+"-v"+b):(v[w].push("v"+b+"-v"+E),S=-S),S<0?(d[w].push("-v"+b+"-v"+E),m[w]+=2):(d[w].push("v"+b+"+v"+E),m[w]-=2),y+=1;for(var x=0;x<n;++x)x!==w&&(E&1<<x?g[x]+=1:g[x]-=1)}}for(var T=[],w=0;w<n;++w)if(0===d[w].length)T.push("d"+w+"-0.5");else{var N="";m[w]<0?N=m[w]+"*c":m[w]>0&&(N="+"+m[w]+"*c");var C=.5*(d[w].length/y),k=.5+.5*(g[w]/y);T.push("d"+w+"-"+k+"-"+C+"*("+d[w].join("+")+N+")/("+v[w].join("+")+")")}h.push("a.push([",T.join(),"]);","break;")}r.push("}},"),c.length>0&&h.push("}}");for(var L=[],f=0;f<1<<n-1;++f)L.push("v"+f);L.push("c0","c1","p0","p1","a","b","c"),r.push("cell:function cellFunc(",L.join(),"){");var A=u(n-1);r.push("if(p0){b.push(",A.map(function(e){return"["+e.map(function(e){return"v"+e})+"]"}).join(),")}else{b.push(",A.map(function(e){var t=e.slice();return t.reverse(),"["+t.map(function(e){return"v"+e})+"]"}).join(),")}}});function ",i,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",i,";");for(var f=0;f<c.length;++f)r.push(c[f].join(""));var O=new Function("genContour",r.join(""));return O(o)}function i(e,t){for(var n=a(e,t),r=n.length,i=new Array(r),s=new Array(r),o=0;o<r;++o)i[o]=[n[o]],s[o]=[o];return{positions:i,cells:s}}function s(e,t){if(e.dimension<=0)return{positions:[],cells:[]};if(1===e.dimension)return i(e,t);var n=e.order.join()+"-"+e.dtype,s=f[n],t=+t||0;return s||(s=f[n]=r(e.order,e.dtype)),s(e,t)}t.exports=s;var o=e("ndarray-extract-contour"),u=e("triangulate-hypercube"),a=e("zero-crossings"),f={}},{"ndarray-extract-contour":421,"triangulate-hypercube":498,"zero-crossings":545}],494:[function(e,t,n){(function(n){"use strict";function r(e){for(var t=e.cells,n=e.positions,r=new Float32Array(6*t.length),i=0,s=0,o=0;o<t.length;++o)for(var u=t[o],a=0;a<3;++a){var f=n[u[a]];r[i++]=f[0],r[i++]=f[1]+1.4,s=Math.max(f[0],s)}return{data:r,shape:s}}function i(e,t,n){var n=n||{},o=u[e];o||(o=u[e]={" ":{data:new Float32Array(0),shape:.2}});var f=o[t];if(!f)if(t.length<=1||!/\d/.test(t))f=o[t]=r(s(t,{triangles:!0,font:e,textAlign:n.textAlign||"left",textBaseline:"alphabetic"}));else{for(var l=t.split(/(\d|\s)/),c=new Array(l.length),h=0,p=0,d=0;d<l.length;++d)c[d]=i(e,l[d]),h+=c[d].data.length,p+=c[d].shape,d>0&&(p+=.02);for(var v=new Float32Array(h),m=0,g=-0.5*p,d=0;d<c.length;++d){for(var y=c[d].data,b=0;b<y.length;b+=2)v[m++]=y[b]+g,v[m++]=y[b+1];g+=c[d].shape+.02}f=o[t]={data:v,shape:p}}return f}t.exports=i;var s=e("vectorize-text"),o=window||n.global||{},u=o.__TEXT_CACHE||{};o.__TEXT_CACHE={}}).call(this,e("_process"))},{_process:451,"vectorize-text":515}],495:[function(n,r,i){!function(n){function i(e,t){if(e=e?e:"",t=t||{},e instanceof i)return e;if(!(this instanceof i))return new i(e,t);var n=s(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=W(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=W(this._r)),this._g<1&&(this._g=W(this._g)),this._b<1&&(this._b=W(this._b)),this._ok=n.ok,this._tc_id=z++}function s(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,s=null,u=!1,f=!1;return"string"==typeof e&&(e=I(e)),"object"==typeof e&&(F(e.r)&&F(e.g)&&F(e.b)?(t=o(e.r,e.g,e.b),u=!0,f="%"===String(e.r).substr(-1)?"prgb":"rgb"):F(e.h)&&F(e.s)&&F(e.v)?(r=H(e.s),i=H(e.v),t=l(e.h,r,i),u=!0,f="hsv"):F(e.h)&&F(e.s)&&F(e.l)&&(r=H(e.s),s=H(e.l),t=a(e.h,r,s),u=!0,f="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=L(n),{ok:u,format:e.format||f,r:X(255,V(t.r,0)),g:X(255,V(t.g,0)),b:X(255,V(t.b,0)),a:n}}function o(e,t,n){return{r:255*A(e,255),g:255*A(t,255),b:255*A(n,255)}}function u(e,t,n){e=A(e,255),t=A(t,255),n=A(n,255);var r,i,s=V(e,t,n),o=X(e,t,n),u=(s+o)/2;if(s==o)r=i=0;else{var a=s-o;switch(i=u>.5?a/(2-s-o):a/(s+o),s){case e:r=(t-n)/a+(t<n?6:0);break;case t:r=(n-e)/a+2;break;case n:r=(e-t)/a+4}r/=6}return{h:r,s:i,l:u}}function a(e,t,n){function r(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var i,s,o;if(e=A(e,360),t=A(t,100),n=A(n,100),0===t)i=s=o=n;else{var u=n<.5?n*(1+t):n+t-n*t,a=2*n-u;i=r(a,u,e+1/3),s=r(a,u,e),o=r(a,u,e-1/3)}return{r:255*i,g:255*s,b:255*o}}function f(e,t,n){e=A(e,255),t=A(t,255),n=A(n,255);var r,i,s=V(e,t,n),o=X(e,t,n),u=s,a=s-o;if(i=0===s?0:a/s,s==o)r=0;else{switch(s){case e:r=(t-n)/a+(t<n?6:0);break;case t:r=(n-e)/a+2;break;case n:r=(e-t)/a+4}r/=6}return{h:r,s:i,v:u}}function l(e,t,r){e=6*A(e,360),t=A(t,100),r=A(r,100);var i=n.floor(e),s=e-i,o=r*(1-t),u=r*(1-s*t),a=r*(1-(1-s)*t),f=i%6,l=[r,u,o,o,a,r][f],c=[a,r,r,u,o,o][f],h=[o,o,a,r,r,u][f];return{r:255*l,g:255*c,b:255*h}}function c(e,t,n,r){var i=[P(W(e).toString(16)),P(W(t).toString(16)),P(W(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function h(e,t,n,r,i){var s=[P(W(e).toString(16)),P(W(t).toString(16)),P(W(n).toString(16)),P(B(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function p(e,t,n,r){var i=[P(B(r)),P(W(e).toString(16)),P(W(t).toString(16)),P(W(n).toString(16))];return i.join("")}function d(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.s-=t/100,n.s=O(n.s),i(n)}function v(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.s+=t/100,n.s=O(n.s),i(n)}function m(e){return i(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.l+=t/100,n.l=O(n.l),i(n)}function y(e,t){t=0===t?0:t||10;var n=i(e).toRgb();return n.r=V(0,X(255,n.r-W(255*-(t/100)))),n.g=V(0,X(255,n.g-W(255*-(t/100)))),n.b=V(0,X(255,n.b-W(255*-(t/100)))),i(n)}function b(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.l-=t/100,n.l=O(n.l),i(n)}function w(e,t){var n=i(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,i(n)}function E(e){var t=i(e).toHsl();return t.h=(t.h+180)%360,i(t)}function S(e){var t=i(e).toHsl(),n=t.h;return[i(e),i({h:(n+120)%360,s:t.s,l:t.l}),i({h:(n+240)%360,s:t.s,l:t.l})]}function x(e){var t=i(e).toHsl(),n=t.h;return[i(e),i({h:(n+90)%360,s:t.s,l:t.l}),i({h:(n+180)%360,s:t.s,l:t.l}),i({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=i(e).toHsl(),n=t.h;return[i(e),i({h:(n+72)%360,s:t.s,l:t.l}),i({h:(n+216)%360,s:t.s,l:t.l})]}function N(e,t,n){t=t||6,n=n||30;var r=i(e).toHsl(),s=360/n,o=[i(e)];for(r.h=(r.h-(s*t>>1)+720)%360;--t;)r.h=(r.h+s)%360,o.push(i(r));return o}function C(e,t){t=t||6;for(var n=i(e).toHsv(),r=n.h,s=n.s,o=n.v,u=[],a=1/t;t--;)u.push(i({h:r,s:s,v:o})),o=(o+a)%1;return u}function k(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function L(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function A(e,t){_(e)&&(e="100%");var r=D(e);return e=X(t,V(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),n.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function O(e){return X(1,V(0,e))}function M(e){return parseInt(e,16)}function _(e){return"string"==typeof e&&e.indexOf(".")!=-1&&1===parseFloat(e)}function D(e){return"string"==typeof e&&e.indexOf("%")!=-1}function P(e){return 1==e.length?"0"+e:""+e}function H(e){return e<=1&&(e=100*e+"%"),e}function B(e){return n.round(255*parseFloat(e)).toString(16)}function j(e){return M(e)/255}function F(e){return!!Q.CSS_UNIT.exec(e)}function I(e){e=e.replace(R,"").replace(U,"").toLowerCase();var t=!1;if(J[e])e=J[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Q.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=Q.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Q.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=Q.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Q.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=Q.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Q.hex8.exec(e))?{r:M(n[1]),g:M(n[2]),b:M(n[3]),a:j(n[4]),format:t?"name":"hex8"}:(n=Q.hex6.exec(e))?{r:M(n[1]),g:M(n[2]),b:M(n[3]),format:t?"name":"hex"}:(n=Q.hex4.exec(e))?{r:M(n[1]+""+n[1]),g:M(n[2]+""+n[2]),b:M(n[3]+""+n[3]),a:j(n[4]+""+n[4]),format:t?"name":"hex8"}:!!(n=Q.hex3.exec(e))&&{r:M(n[1]+""+n[1]),g:M(n[2]+""+n[2]),b:M(n[3]+""+n[3]),format:t?"name":"hex"}}function q(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}var R=/^\s+/,U=/\s+$/,z=0,W=n.round,X=n.min,V=n.max,$=n.random;i.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,r,i,s,o,u=this.toRgb();return e=u.r/255,t=u.g/255,r=u.b/255,i=e<=.03928?e/12.92:n.pow((e+.055)/1.055,2.4),s=t<=.03928?t/12.92:n.pow((t+.055)/1.055,2.4),o=r<=.03928?r/12.92:n.pow((r+.055)/1.055,2.4),.2126*i+.7152*s+.0722*o},setAlpha:function(e){return this._a=L(e),this._roundA=W(100*this._a)/100,this},toHsv:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=f(this._r,this._g,this._b),t=W(360*e.h),n=W(100*e.s),r=W(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=u(this._r,this._g,this._b),t=W(360*e.h),n=W(100*e.s),r=W(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return c(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return h(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:W(this._r),g:W(this._g),b:W(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+W(this._r)+", "+W(this._g)+", "+W(this._b)+")":"rgba("+W(this._r)+", "+W(this._g)+", "+W(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:W(100*A(this._r,255))+"%",g:W(100*A(this._g,255))+"%",b:W(100*A(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+W(100*A(this._r,255))+"%, "+W(100*A(this._g,255))+"%, "+W(100*A(this._b,255))+"%)":"rgba("+W(100*A(this._r,255))+"%, "+W(100*A(this._g,255))+"%, "+W(100*A(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(K[c(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+p(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var s=i(e);n="#"+p(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!t&&r&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);return i?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return i(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(w,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(N,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}},i.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&("a"===r?n[r]=e[r]:n[r]=H(e[r]));e=n}return i(e,t)},i.equals=function(e,t){return!!e&&!!t&&i(e).toRgbString()==i(t).toRgbString()},i.random=function(){return i.fromRatio({r:$(),g:$(),b:$()})},i.mix=function(e,t,n){n=0===n?0:n||50;var r=i(e).toRgb(),s=i(t).toRgb(),o=n/100,u={r:(s.r-r.r)*o+r.r,g:(s.g-r.g)*o+r.g,b:(s.b-r.b)*o+r.b,a:(s.a-r.a)*o+r.a};return i(u)},i.readability=function(e,t){var r=i(e),s=i(t);return(n.max(r.getLuminance(),s.getLuminance())+.05)/(n.min(r.getLuminance(),s.getLuminance())+.05)},i.isReadable=function(e,t,n){var r,s,o=i.readability(e,t);switch(s=!1,r=q(n),r.level+r.size){case"AAsmall":case"AAAlarge":s=o>=4.5;break;case"AAlarge":s=o>=3;break;case"AAAsmall":s=o>=7}return s},i.mostReadable=function(e,t,n){var r,s,o,u,a=null,f=0;n=n||{},s=n.includeFallbackColors,o=n.level,u=n.size;for(var l=0;l<t.length;l++)r=i.readability(e,t[l]),r>f&&(f=r,a=i(t[l]));return i.isReadable(e,a,{level:o,size:u})||!s?a:(n.includeFallbackColors=!1,i.mostReadable(e,["#fff","#000"],n))};var J=i.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},K=i.hexNames=k(J),Q=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof r&&r.exports?r.exports=i:"function"==typeof e&&e.amd?e(function(){return i}):window.tinycolor=i}(Math)},{}],496:[function(e,t,n){"use strict";function r(e,t){var n=o(getComputedStyle(e).getPropertyValue(t));return n[0]*s(n[1],e)}function i(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var i=r(n,"font-size")/128;return t.removeChild(n),i}function s(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return i(e,t);case"em":return r(t,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return u;case"cm":return u/2.54;case"mm":return u/25.4;case"pt":return u/72;case"pc":return u/6}return 1}var o=e("parse-unit");t.exports=s;var u=96},{"parse-unit":439}],497:[function(n,r,i){!function(n,s){"object"==typeof i&&"undefined"!=typeof r?s(i):"function"==typeof e&&e.amd?e(["exports"],s):s(n.topojson=n.topojson||{})}(this,function(e){"use strict";function t(e,t){var r=t.id,i=t.bbox,s=null==t.properties?{}:t.properties,o=n(e,t);return null==r&&null==i?{type:"Feature",properties:s,geometry:o}:null==i?{type:"Feature",id:r,properties:s,geometry:o}:{type:"Feature",id:r,bbox:i,properties:s,geometry:o}}function n(e,t){function n(e,t){t.length&&t.pop();for(var n=c[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(f(n[r].slice(),r));e<0&&l(t,i)}function r(e){return f(e.slice())}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return t.length<2&&t.push(t[0].slice()),t}function s(e){for(var t=i(e);t.length<4;)t.push(t[0].slice());return t}function o(e){return e.map(s)}function u(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(u)};case"Point":t=r(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(r);break;case"LineString":t=i(e.arcs);break;case"MultiLineString":t=e.arcs.map(i);break;case"Polygon":t=o(e.arcs);break;case"MultiPolygon":t=e.arcs.map(o);break;default:return null}return{type:n,coordinates:t}}var f=a(e),c=e.arcs;return u(t)}function r(e,t,n){var r,s,o;if(arguments.length>1)r=i(e,t,n);else for(s=0,r=new Array(o=e.arcs.length);s<o;++s)r[s]=s;return{type:"MultiLineString",arcs:h(e,r)}}function i(e,t,n){function r(e){var t=e<0?~e:e;(l[t]||(l[t]=[])).push({i:e,g:a})}function i(e){e.forEach(r)}function s(e){e.forEach(i)}function o(e){e.forEach(s)}function u(e){switch(a=e,e.type){case"GeometryCollection":e.geometries.forEach(u);break;case"LineString":i(e.arcs);break;case"MultiLineString":case"Polygon":s(e.arcs);break;case"MultiPolygon":o(e.arcs)}}var a,f=[],l=[];return u(t),l.forEach(null==n?function(e){f.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&f.push(e[0].i)}),f}function s(e){for(var t,n=-1,r=e.length,i=e[r-1],s=0;++n<r;)t=i,i=e[n],s+=t[0]*i[1]-t[1]*i[0];return Math.abs(s)}function o(e,t){function r(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(r);break;case"Polygon":i(e.arcs);break;case"MultiPolygon":e.arcs.forEach(i)}}function i(e){e.forEach(function(t){t.forEach(function(t){(u[t=t<0?~t:t]||(u[t]=[])).push(e)})}),a.push(e)}function o(t){return s(n(e,{type:"Polygon",arcs:[t]}).coordinates[0])}var u={},a=[],f=[];return t.forEach(r),a.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,f.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){u[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),a.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:f.map(function(t){var n,r=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){u[e<0?~e:e].length<2&&r.push(e)})})}),r=h(e,r),(n=r.length)>1)for(var i,s,a=1,f=o(r[0]);a<n;++a)(i=o(r[a]))>f&&(s=r[0],r[0]=r[a],r[a]=s,f=i);return r})}}var u=function(e){return e},a=function(e){if(null==(t=e.transform))return u;var t,n,r,i=t.scale[0],s=t.scale[1],o=t.translate[0],a=t.translate[1];return function(e,t){return t||(n=r=0),e[0]=(n+=e[0])*i+o,e[1]=(r+=e[1])*s+a,e}},f=function(e){function t(e){u[0]=e[0],u[1]=e[1],o(u),u[0]<f&&(f=u[0]),u[0]>c&&(c=u[0]),u[1]<l&&(l=u[1]),u[1]>h&&(h=u[1])}function n(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(n);break;case"Point":t(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(t)}}var r=e.bbox;if(!r){var i,s,o=a(e),u=new Array(2),f=1/0,l=f,c=-f,h=-f;e.arcs.forEach(function(e){for(var t=-1,n=e.length;++t<n;)i=e[t],u[0]=i[0],u[1]=i[1],o(u,t),u[0]<f&&(f=u[0]),u[0]>c&&(c=u[0]),u[1]<l&&(l=u[1]),u[1]>h&&(h=u[1])});for(s in e.objects)n(e.objects[s]);r=e.bbox=[f,l,c,h]}return r},l=function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n},c=function(e,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return t(e,n)})}:t(e,n)},h=function(e,t){function n(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[e<0?~e:e]=1}),u.push(r)}}var i={},s={},o={},u=[],a=-1;return t.forEach(function(n,r){var i,s=e.arcs[n<0?~n:n];s.length<3&&!s[1][0]&&!s[1][1]&&(i=t[++a],t[a]=n,t[r]=i)}),t.forEach(function(e){var t,r,i=n(e),u=i[0],a=i[1];if(t=o[u])if(delete o[t.end],t.push(e),t.end=a,r=s[a]){delete s[r.start];var f=r===t?t:t.concat(r);s[f.start=t.start]=o[f.end=r.end]=f}else s[t.start]=o[t.end]=t;else if(t=s[a])if(delete s[t.start],t.unshift(e),t.start=u,r=o[u]){delete o[r.end];var l=r===t?t:r.concat(t);s[l.start=r.start]=o[l.end=t.end]=l}else s[t.start]=o[t.end]=t;else t=[e],s[t.start=u]=o[t.end=a]=t}),r(o,s),r(s,o),t.forEach(function(e){i[e<0?~e:e]||u.push([e])}),u},p=function(e){return n(e,r.apply(this,arguments))},d=function(e){return n(e,o.apply(this,arguments))},v=function(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n},m=function(e){function t(e,t){e.forEach(function(e){e<0&&(e=~e);var n=i[e];n?n.push(t):i[e]=[t]})}function n(e,n){e.forEach(function(e){t(e,n)})}function r(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){r(e,t)}):e.type in o&&o[e.type](e.arcs,t)}var i={},s=e.map(function(){return[]}),o={LineString:t,MultiLineString:n,Polygon:n,MultiPolygon:function(e,t){e.forEach(function(e){n(e,t)})}};e.forEach(r);for(var u in i)for(var a=i[u],f=a.length,l=0;l<f;++l)for(var c=l+1;c<f;++c){var h,p=a[l],d=a[c];(h=s[p])[u=v(h,d)]!==d&&h.splice(u,0,d),(h=s[d])[u=v(h,p)]!==p&&h.splice(u,0,p)}return s},g=function(e,t){function n(e){e[0]=Math.round((e[0]-o)/u),e[1]=Math.round((e[1]-a)/l)}function r(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(r);break;case"Point":n(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(n)}}if((t=Math.floor(t))>=2){if(e.transform)throw new Error("already quantized");var i,s=f(e),o=s[0],u=(s[2]-o)/(t-1)||1,a=s[1],l=(s[3]-a)/(t-1)||1;e.arcs.forEach(function(e){for(var t,n,r,i=1,s=1,f=e.length,c=e[0],h=c[0]=Math.round((c[0]-o)/u),p=c[1]=Math.round((c[1]-a)/l);i<f;++i)c=e[i],n=Math.round((c[0]-o)/u),r=Math.round((c[1]-a)/l),n===h&&r===p||(t=e[s++],t[0]=n-h,h=n,t[1]=r-p,p=r);s<2&&(t=e[s++],t[0]=0,t[1]=0),e.length=s});for(i in e.objects)r(e.objects[i]);return e.transform={scale:[u,l],translate:[o,a]},e}throw new Error("n must be 2")},y=function(e){if(null==(t=e.transform))return u;var t,n,r,i=t.scale[0],s=t.scale[1],o=t.translate[0],a=t.translate[1];return function(e,t){t||(n=r=0);var u=Math.round((e[0]-o)/i),f=Math.round((e[1]-a)/s);return e[0]=u-n,n=u,e[1]=f-r,r=f,e}};e.bbox=f,e.feature=c,e.mesh=p,e.meshArcs=r,e.merge=d,e.mergeArcs=o,e.neighbors=m,e.quantize=g,e.transform=a,e.untransform=y,Object.defineProperty(e,"__esModule",{value:!0})})},{}],498:[function(e,t,n){"use strict";function r(e){if(e<0)return[];if(0===e)return[[0]];for(var t=0|Math.round(o(e+1)),n=[],r=0;r<t;++r){for(var u=i.unrank(e,r),f=[0],l=0,c=0;c<u.length;++c)l+=1<<u[c],f.push(l);s(u)<1&&(f[0]=l,f[e]=0),n.push(f)}return n}t.exports=r;var i=e("permutation-rank"),s=e("permutation-parity"),o=e("gamma")},{gamma:110,"permutation-parity":443,"permutation-rank":444}],499:[function(e,t,n){"use strict";function r(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function i(e){return Math.min(1,Math.max(-1,e))}function s(e){var t=Math.abs(e[0]),n=Math.abs(e[1]),r=Math.abs(e[2]),i=[0,0,0];t>Math.max(n,r)?i[2]=1:n>Math.max(t,r)?i[0]=1:i[1]=1;for(var s=0,o=0,u=0;u<3;++u)s+=e[u]*e[u],o+=i[u]*e[u];for(var u=0;u<3;++u)i[u]-=o/s*e[u];return h(i,i),i}function o(e,t,n,r,i,s,o,u){this.center=a(n),this.up=a(r),this.right=a(i),this.radius=a([s]),this.angle=a([o,u]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var f=0;f<16;++f)this.computedMatrix[f]=.5;this.recalcMatrix(0)}function u(e){e=e||{};var t=e.center||[0,0,0],n=e.up||[0,1,0],i=e.right||s(n),u=e.radius||1,a=e.theta||0,f=e.phi||0;if(t=[].slice.call(t,0,3),n=[].slice.call(n,0,3),h(n,n),i=[].slice.call(i,0,3),h(i,i),"eye"in e){var l=e.eye,d=[l[0]-t[0],l[1]-t[1],l[2]-t[2]];c(i,d,n),r(i[0],i[1],i[2])<1e-6?i=s(n):h(i,i),u=r(d[0],d[1],d[2]);var v=p(n,d)/u,m=p(i,d)/u;f=Math.acos(v),a=Math.acos(m)}return u=Math.log(u),new o(e.zoomMin,e.zoomMax,t,n,i,u,a,f)}t.exports=u;var a=e("filtered-vector"),f=e("gl-mat4/invert"),l=e("gl-mat4/rotate"),c=e("gl-vec3/cross"),h=e("gl-vec3/normalize"),p=e("gl-vec3/dot"),d=o.prototype;d.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},d.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},d.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var t=this.computedUp,n=this.computedRight,i=0,s=0,o=0;o<3;++o)s+=t[o]*n[o],i+=t[o]*t[o];for(var u=Math.sqrt(i),a=0,o=0;o<3;++o)n[o]-=t[o]*s/i,a+=n[o]*n[o],t[o]/=u;for(var f=Math.sqrt(a),o=0;o<3;++o)n[o]/=f;var l=this.computedToward;c(l,t,n),h(l,l);for(var p=Math.exp(this.computedRadius[0]),d=this.computedAngle[0],v=this.computedAngle[1],m=Math.cos(d),g=Math.sin(d),y=Math.cos(v),b=Math.sin(v),w=this.computedCenter,E=m*y,S=g*y,x=b,T=-m*b,N=-g*b,C=y,k=this.computedEye,L=this.computedMatrix,o=0;o<3;++o){var A=E*n[o]+S*l[o]+x*t[o];L[4*o+1]=T*n[o]+N*l[o]+C*t[o],L[4*o+2]=A,L[4*o+3]=0}var O=L[1],M=L[5],_=L[9],D=L[2],P=L[6],H=L[10],B=M*H-_*P,j=_*D-O*H,F=O*P-M*D,I=r(B,j,F);B/=I,j/=I,F/=I,L[0]=B,L[4]=j,L[8]=F;for(var o=0;o<3;++o)k[o]=w[o]+L[2+4*o]*p;for(var o=0;o<3;++o){for(var a=0,q=0;q<3;++q)a+=L[o+4*q]*k[q];L[12+o]=-a}L[15]=1},d.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=n[r];return t}return n};var v=[0,0,0];d.rotate=function(e,t,n,r){if(this.angle.move(e,t,n),r){this.recalcMatrix(e);var i=this.computedMatrix;v[0]=i[2],v[1]=i[6],v[2]=i[10];for(var s=this.computedUp,o=this.computedRight,u=this.computedToward,a=0;a<3;++a)i[4*a]=s[a],i[4*a+1]=o[a],i[4*a+2]=u[a];l(i,i,r,v);for(var a=0;a<3;++a)s[a]=i[4*a],o[a]=i[4*a+1];this.up.set(e,s[0],s[1],s[2]),this.right.set(e,o[0],o[1],o[2])}},d.pan=function(e,t,n,i){t=t||0,n=n||0,i=i||0,this.recalcMatrix(e);var s=this.computedMatrix,o=(Math.exp(this.computedRadius[0]),s[1]),u=s[5],a=s[9],f=r(o,u,a);o/=f,u/=f,a/=f;var l=s[0],c=s[4],h=s[8],p=l*o+c*u+h*a;l-=o*p,c-=u*p,h-=a*p;var d=r(l,c,h);l/=d,c/=d,h/=d;var v=l*t+o*n,m=c*t+u*n,g=h*t+a*n;this.center.move(e,v,m,g);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+i),this.radius.set(e,Math.log(y))},d.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},d.setMatrix=function(e,t,n,s){var o=1;"number"==typeof n&&(o=0|n),(o<0||o>3)&&(o=1);var u=(o+2)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var a=t[o],l=t[o+4],c=t[o+8];if(s){var h=Math.abs(a),p=Math.abs(l),d=Math.abs(c),v=Math.max(h,p,d);h===v?(a=a<0?-1:1,l=c=0):d===v?(c=c<0?-1:1,a=l=0):(l=l<0?-1:1,a=c=0)}else{var m=r(a,l,c);a/=m,l/=m,c/=m}var g=t[u],y=t[u+4],b=t[u+8],w=g*a+y*l+b*c;g-=a*w,y-=l*w,b-=c*w;var E=r(g,y,b);g/=E,y/=E,b/=E;var S=l*b-c*y,x=c*g-a*b,T=a*y-l*g,N=r(S,x,T);S/=N,x/=N,T/=N,this.center.jump(e,W,X,V),this.radius.idle(e),this.up.jump(e,a,l,c),this.right.jump(e,g,y,b);var C,k;if(2===o){var L=t[1],A=t[5],O=t[9],M=L*g+A*y+O*b,_=L*S+A*x+O*T;C=B<0?-Math.PI/2:Math.PI/2,k=Math.atan2(_,M)}else{var D=t[2],P=t[6],H=t[10],B=D*a+P*l+H*c,j=D*g+P*y+H*b,F=D*S+P*x+H*T;C=Math.asin(i(B)),k=Math.atan2(F,j)}this.angle.jump(e,k,C),this.recalcMatrix(e);var I=t[2],q=t[6],R=t[10],U=this.computedMatrix;f(U,t);var z=U[15],W=U[12]/z,X=U[13]/z,V=U[14]/z,$=Math.exp(this.computedRadius[0]);this.center.jump(e,W-I*$,X-q*$,V-R*$)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},d.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},d.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},d.lookAt=function(e,t,n,s){this.recalcMatrix(e),t=t||this.computedEye,n=n||this.computedCenter,s=s||this.computedUp;var o=s[0],u=s[1],a=s[2],f=r(o,u,a);if(!(f<1e-6)){o/=f,u/=f,a/=f;var l=t[0]-n[0],c=t[1]-n[1],h=t[2]-n[2],p=r(l,c,h);if(!(p<1e-6)){l/=p,c/=p,h/=p;var d=this.computedRight,v=d[0],m=d[1],g=d[2],y=o*v+u*m+a*g;v-=y*o,m-=y*u,g-=y*a;var b=r(v,m,g);if(!(b<.01&&(v=u*h-a*c,m=a*l-o*h,g=o*c-u*l,b=r(v,m,g),b<1e-6))){v/=b,m/=b,g/=b,this.up.set(e,o,u,a),this.right.set(e,v,m,g),this.center.set(e,n[0],n[1],n[2]),this.radius.set(e,Math.log(p));var w=u*g-a*m,E=a*v-o*g,S=o*m-u*v,x=r(w,E,S);w/=x,E/=x,S/=x;var T=o*l+u*c+a*h,N=v*l+m*c+g*h,C=w*l+E*c+S*h,k=Math.asin(i(T)),L=Math.atan2(C,N),A=this.angle._state,O=A[A.length-1],M=A[A.length-2];O%=2*Math.PI;var _=Math.abs(O+2*Math.PI-L),D=Math.abs(O-L),P=Math.abs(O-2*Math.PI-L);_<D&&(O+=2*Math.PI),P<D&&(O-=2*Math.PI),this.angle.jump(this.angle.lastT(),O,M),this.angle.set(e,L,k)}}}}},{"filtered-vector":108,"gl-mat4/invert":154,"gl-mat4/rotate":158,"gl-vec3/cross":242,"gl-vec3/dot":243,"gl-vec3/normalize":246}],500:[function(e,t,n){"use strict";function r(e,t,n){var r=e*t,s=i*e,o=s-e,u=s-o,a=e-u,f=i*t,l=f-t,c=f-l,h=t-c,p=r-u*c,d=p-a*c,v=d-u*h,m=a*h-v;return n?(n[0]=m,n[1]=r,n):[m,r]}t.exports=r;var i=+(Math.pow(2,27)+1)},{}],501:[function(e,t,n){"use strict";function r(e,t,n){var r=e+t,i=r-e,s=r-i,o=t-i,u=e-s;return n?(n[0]=u+o,n[1]=r,n):[u+o,r]}t.exports=r},{}],502:[function(e,t,n){(function(t,i){"use strict";function s(e){if(e){var t=e.length||e.byteLength,n=b.log2(t);x[n].push(e)}}function o(e){s(e.buffer)}function u(e){var e=b.nextPow2(e),t=b.log2(e),n=x[t];return n.length>0?n.pop():new ArrayBuffer(e)}function a(e){return new Uint8Array(u(e),0,e)}function f(e){return new Uint16Array(u(2*e),0,e)}function l(e){return new Uint32Array(u(4*e),0,e)}function c(e){return new Int8Array(u(e),0,e)}function h(e){return new Int16Array(u(2*e),0,e)}function p(e){return new Int32Array(u(4*e),0,e)}function d(e){return new Float32Array(u(4*e),0,e)}function v(e){return new Float64Array(u(8*e),0,e)}function m(e){return E?new Uint8ClampedArray(u(e),0,e):a(e)}function g(e){return new DataView(u(e),0,e)}function y(e){e=b.nextPow2(e);var t=b.log2(e),n=T[t];return n.length>0?n.pop():new i(e)}var b=e("bit-twiddle"),w=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:w([32,0]),UINT16:w([32,0]),UINT32:w([32,0]),INT8:w([32,0]),INT16:w([32,0]),INT32:w([32,0]),FLOAT:w([32,0]),DOUBLE:w([32,0]),DATA:w([32,0]),UINT8C:w([32,0]),BUFFER:w([32,0])});var E="undefined"!=typeof Uint8ClampedArray,S=t.__TYPEDARRAY_POOL;S.UINT8C||(S.UINT8C=w([32,0])),S.BUFFER||(S.BUFFER=w([32,0]));var x=S.DATA,T=S.BUFFER;n.free=function(e){if(i.isBuffer(e))T[b.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|b.log2(t);x[n].push(e)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=o,n.freeArrayBuffer=s,n.freeBuffer=function(e){T[b.log2(e.length)].push(e)},n.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return u(e);switch(t){case"uint8":return a(e);case"uint16":return f(e);case"uint32":return l(e);case"int8":return c(e);case"int16":return h(e);case"int32":return p(e);case"float":case"float32":return d(e);case"double":case"float64":return v(e);case"uint8_clamped":return m(e);case"buffer":return y(e);case"data":case"dataview":return g(e);default:return null}return null},n.mallocArrayBuffer=u,n.mallocUint8=a,n.mallocUint16=f,n.mallocUint32=l,n.mallocInt8=c,n.mallocInt16=h,n.mallocInt32=p,n.mallocFloat32=n.mallocFloat=d,n.mallocFloat64=n.mallocDouble=v,n.mallocUint8Clamped=m,n.mallocDataView=g,n.mallocBuffer=y,n.clearCache=function(){for(var e=0;e<32;++e)S.UINT8[e].length=0,S.UINT16[e].length=0,S.UINT32[e].length=0,S.INT8[e].length=0,S.INT16[e].length=0,S.INT32[e].length=0,S.FLOAT[e].length=0,S.DOUBLE[e].length=0,S.UINT8C[e].length=0,x[e].length=0,T[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":56,buffer:66,dup:100}],503:[function(e,t,n){"use strict";"use restrict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=r;var i=r.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},i.find=function(e){for(var t=e,n=this.roots;n[e]!==e;)e=n[e];for(;n[t]!==e;){var r=n[t];n[t]=e,t=r}return e},i.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var i=this.ranks,s=this.roots,o=i[n],u=i[r];o<u?s[n]=r:u<o?s[r]=n:(s[r]=n,++i[n])}}},{}],504:[function(e,t,n){"use strict";function r(e,t){for(var n=1,r=e.length,i=e[0],s=e[0],o=1;o<r;++o)if(s=i,i=e[o],t(i,s)){if(o===n){n++;continue}e[n++]=i}return e.length=n,e}function i(e){for(var t=1,n=e.length,r=e[0],i=e[0],s=1;s<n;++s,i=r)if(i=r,r=e[s],r!==i){if(s===t){t++;continue}e[t++]=r}return e.length=t,e}function s(e,t,n){return 0===e.length?e:t?(n||e.sort(t),r(e,t)):(n||e.sort(),i(e))}t.exports=s},{}],505:[function(e,t,n){function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}t.exports=r,r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){"undefined"==typeof t&&(t=1e-6);var n,r,i,s,o;for(i=e,o=0;o<8;o++){if(s=this.sampleCurveX(i)-e,Math.abs(s)<t)return i;var u=this.sampleCurveDerivativeX(i);if(Math.abs(u)<1e-6)break;i-=s/u}if(n=0,r=1,i=e,i<n)return n;if(i>r)return r;for(;n<r;){if(s=this.sampleCurveX(i),Math.abs(s-e)<t)return i;e>s?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},{}],506:[function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&f.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function s(e){return f.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function o(e,t){return i(e,!1,!0).resolve(t)}function u(e,t){return e?i(e,!1,!0).resolveObject(t):t}var a=e("punycode"),f=e("./util");n.parse=i,n.resolve=o,n.resolveObject=u,n.format=s,n.Url=r;var l=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","	"],d=["{","}","|","\\","^","`"].concat(p),v=["'"].concat(d),m=["%","/","?",";","#"].concat(v),g=["/","?","#"],y=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=e("querystring");r.prototype.parse=function(e,t,n){if(!f.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=r!==-1&&r<e.indexOf("#")?"?":"#",s=e.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),e=s.join(i);var u=e;if(u=u.trim(),!n&&1===e.split("#").length){var c=h.exec(u);if(c)return this.path=u,this.href=u,this.pathname=c[1],c[2]?(this.search=c[2],t?this.query=T.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=l.exec(u);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,u=u.substr(p.length)}if(n||p||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var N="//"===u.substr(0,2);!N||p&&S[p]||(u=u.substr(2),this.slashes=!0)}if(!S[p]&&(N||p&&!x[p])){for(var C=-1,k=0;k<g.length;k++){var L=u.indexOf(g[k]);L!==-1&&(C===-1||L<C)&&(C=L)}var O,D;D=C===-1?u.lastIndexOf("@"):u.lastIndexOf("@",C),D!==-1&&(O=u.slice(0,D),u=u.slice(D+1),this.auth=decodeURIComponent(O)),C=-1;for(var k=0;k<m.length;k++){var L=u.indexOf(m[k]);L!==-1&&(C===-1||L<C)&&(C=L)}C===-1&&(C=u.length),this.host=u.slice(0,C),u=u.slice(C),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var H=this.hostname.split(/\./),k=0,B=H.length;k<B;k++){var j=H[k];if(j&&!j.match(b)){for(var F="",I=0,q=j.length;I<q;I++)F+=j.charCodeAt(I)>127?"x":j[I];if(!F.match(b)){var R=H.slice(0,k),U=H.slice(k+1),z=j.match(w);z&&(R.push(z[1]),U.unshift(z[2])),U.length&&(u="/"+U.join(".")+u),this.hostname=R.join(".");break}}}this.hostname.length>y?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=a.toASCII(this.hostname));var W=this.port?":"+this.port:"",X=this.hostname||"";this.host=X+W,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!E[d])for(var k=0,B=v.length;k<B;k++){var V=v[k];if(u.indexOf(V)!==-1){var $=encodeURIComponent(V);$===V&&($=escape(V)),u=u.split(V).join($)}}var J=u.indexOf("#");J!==-1&&(this.hash=u.substr(J),u=u.slice(0,J));var K=u.indexOf("?");if(K!==-1?(this.search=u.substr(K),this.query=u.substr(K+1),t&&(this.query=T.parse(this.query)),u=u.slice(0,K)):t&&(this.search="",this.query={}),u&&(this.pathname=u),x[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var W=this.pathname||"",Q=this.search||"";this.path=W+Q}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&f.isObject(this.query)&&Object.keys(this.query).length&&(s=T.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||x[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+i+n+o+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(f.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),s=0;s<i.length;s++){var o=i[s];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),a=0;a<u.length;a++){var l=u[a];"protocol"!==l&&(n[l]=e[l])}return x[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!x[e.protocol]){for(var c=Object.keys(e),h=0;h<c.length;h++){var p=c[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||S[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",m=n.search||"";n.path=v+m}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=y||g||n.host&&e.pathname,w=b,E=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],T=n.protocol&&!x[n.protocol];if(T&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),b=b&&(""===d[0]||""===E[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),n.search=e.search,n.query=e.query;else if(!f.isNullOrUndefined(e.search)){if(T){n.hostname=n.host=E.shift();var N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");N&&(n.auth=N.shift(),n.host=n.hostname=N.shift())}return n.search=e.search,n.query=e.query,f.isNull(n.pathname)&&f.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=E.slice(-1)[0],k=(n.host||e.host||E.length>1)&&("."===C||".."===C)||""===C,L=0,A=E.length;A>=0;A--)C=E[A],"."===C?E.splice(A,1):".."===C?(E.splice(A,1),L++):L&&(E.splice(A,1),L--);if(!b&&!w)for(;L--;L)E.unshift("..");!b||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),k&&"/"!==E.join("/").substr(-1)&&E.push("");var O=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(T){n.hostname=n.host=O?"":E.length?E.shift():"";var N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");N&&(n.auth=N.shift(),n.host=n.hostname=N.shift())}return b=b||n.host&&E.length,b&&!O&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),f.isNull(n.pathname)&&f.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=c.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":507,punycode:452,querystring:456}],507:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],508:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],509:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],510:[function(e,t,n){(function(t,i){function s(e,t){var i={seen:[],stylize:u};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(t)?i.showHidden=t:t&&n._extend(i,t),S(i.showHidden)&&(i.showHidden=!1),S(i.depth)&&(i.depth=2),S(i.colors)&&(i.colors=!1),S(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),f(i,e,i.depth)}function o(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function f(e,t,i){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var s=t.inspect(i,e);return w(s)||(s=f(e,s,i)),s}var o=l(e,t);if(o)return o;var u=Object.keys(t),m=a(u);if(e.showHidden&&(u=Object.getOwnPropertyNames(t)),C(t)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return c(t);if(0===u.length){if(k(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(N(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return c(t)}var y="",b=!1,E=["{","}"];if(v(t)&&(b=!0,E=["[","]"]),k(t)){var S=t.name?": "+t.name:"";y=" [Function"+S+"]"}if(x(t)&&(y=" "+RegExp.prototype.toString.call(t)),N(t)&&(y=" "+Date.prototype.toUTCString.call(t)),C(t)&&(y=" "+c(t)),0!==u.length||!!b&&0!=t.length){if(i<0)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var T;return T=b?h(e,t,i,m,u):u.map(function(n){return p(e,t,i,m,n,b)}),e.seen.pop(),d(T,y,E)}return E[0]+y+E[1]}function l(e,t){if(S(t))return e.stylize("undefined","undefined");if(w(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i){for(var s=[],o=0,u=t.length;o<u;++o)_(t,String(o))?s.push(p(e,t,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(p(e,t,n,r,i,!0))}),s}function p(e,t,n,r,i,s){var o,u,a;if(a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},a.get?u=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),_(r,i)||(o="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(u=g(n)?f(e,a.value,null):f(e,a.value,n-1),u.indexOf("\n")>-1&&(u=s?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),S(o)){if(s&&i.match(/^\d+$/))return u;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function d(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function v(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return null==e}function b(e){return"number"==typeof e}function w(e){return"string"==typeof e}function E(e){return"symbol"==typeof e}function S(e){return void 0===e}function x(e){return T(e)&&"[object RegExp]"===A(e)}function T(e){return"object"==typeof e&&null!==e}function N(e){return T(e)&&"[object Date]"===A(e)}function C(e){return T(e)&&("[object Error]"===A(e)||e instanceof Error)}function k(e){return"function"==typeof e}function L(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function A(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}function M(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),B[e.getMonth()],t].join(" ")}function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=/%[sdj%]/g;n.format=function(e){if(!w(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,o=String(e).replace(D,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"};default:return e}}),u=r[n];n<i;u=r[++n])o+=g(u)||!T(u)?" "+u:" "+s(u);return o},n.deprecate=function(e,s){function o(){if(!u){if(t.throwDeprecation)throw new Error(s);t.traceDeprecation?console.trace(s):console.error(s),u=!0}return e.apply(this,arguments)}if(S(i.process))return function(){return n.deprecate(e,s).apply(this,arguments)};if(t.noDeprecation===!0)return e;var u=!1;return o};var P,H={};n.debuglog=function(e){if(S(P)&&(P=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!H[e])if((new RegExp("\\b"+e+"\\b","i")).test(P)){var i=t.pid;H[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,i,t)}}else H[e]=function(){};return H[e]},n.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow","boolean":"yellow","undefined":"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=v,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=y,n.isNumber=b,n.isString=w,n.isSymbol=E,n.isUndefined=S,n.isRegExp=x,n.isObject=T,n.isDate=N,n.isError=C,n.isFunction=k,n.isPrimitive=L,n.isBuffer=e("./support/isBuffer");var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",M(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!T(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":509,_process:451,inherits:508}],511:[function(e,t,n){t.exports.VectorTile=e("./lib/vectortile.js"),t.exports.VectorTileFeature=e("./lib/vectortilefeature.js"),t.exports.VectorTileLayer=e("./lib/vectortilelayer.js")},{"./lib/vectortile.js":512,"./lib/vectortilefeature.js":513,"./lib/vectortilelayer.js":514}],512:[function(e,t,n){"use strict";function r(e,t){this.layers=e.readFields(i,{},t)}function i(e,t,n){if(3===e){var r=new s(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var s=e("./vectortilelayer");t.exports=r},{"./vectortilelayer":514}],513:[function(e,t,n){"use strict";function r(e,t,n,r,s){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=s,e.readFields(i,this,t)}function i(e,t,n){1==e?t.id=n.readVarint():2==e?s(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function s(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}function o(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],s=0;s<t;s++){var o=u(e[s]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&i.push(n),n=[e[s]]):n.push(e[s]))}return n&&i.push(n),i}function u(e){for(var t,n,r=0,i=0,s=e.length,o=s-1;i<s;o=i++)t=e[i],n=e[o],r+=(n.x-t.x)*(t.y+n.y);return r}var a=e("point-geometry");t.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,s=0,o=0,u=[];e.pos<n;){if(!i){var f=e.readVarint();r=7&f,i=f>>3}if(i--,1===r||2===r)s+=e.readSVarint(),o+=e.readSVarint(),1===r&&(t&&u.push(t),t=[]),t.push(new a(s,o));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&u.push(t),u},r.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,s=0,o=1/0,u=-1/0,a=1/0,f=-1/0;e.pos<t;){if(!r){var l=e.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)i+=e.readSVarint(),s+=e.readSVarint(),i<o&&(o=i),i>u&&(u=i),s<a&&(a=s),s>f&&(f=s);else if(7!==n)throw new Error("unknown command "+n)}return[o,a,u,f]},r.prototype.toGeoJSON=function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+l)/a;e[t]=[360*(n.x+f)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var s,u,a=this.extent*Math.pow(2,n),f=this.extent*e,l=this.extent*t,c=this.loadGeometry(),h=r.types[this.type];switch(this.type){case 1:var p=[];for(s=0;s<c.length;s++)p[s]=c[s][0];c=p,i(c);break;case 2:for(s=0;s<c.length;s++)i(c[s]);break;case 3:for(c=o(c),s=0;s<c.length;s++)for(u=0;u<c[s].length;u++)i(c[s][u])}1===c.length?c=c[0]:h="Multi"+h;var d={type:"Feature",geometry:{type:h,coordinates:c},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"point-geometry":448}],514:[function(e,t,n){"use strict";function r(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(i,this,t),this.length=this._features.length}function i(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(s(n))}function s(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}var o=e("./vectortilefeature.js");t.exports=r,r.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new o(this._pbf,t,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":513}],515:[function(e,t,n){"use strict";function r(e,t){return"object"==typeof t&&null!==t||(t={}),i(e,t.canvas||s,t.context||o,t)}t.exports=r;var i=e("./lib/vtext"),s=null,o=null;"undefined"!=typeof document&&(s=document.createElement("canvas"),s.width=8192,s.height=1024,o=s.getContext("2d"))},{"./lib/vtext":516}],516:[function(e,t,n){"use strict";function r(e,t,n){for(var r=t.textAlign||"start",i=t.textBaseline||"alphabetic",s=[1<<30,1<<30],o=[0,0],u=e.length,a=0;a<u;++a)for(var f=e[a],l=0;l<2;++l)s[l]=0|Math.min(s[l],f[l]),o[l]=0|Math.max(o[l],f[l]);var c=0;switch(r){case"center":c=-0.5*(s[0]+o[0]);break;case"right":case"end":c=-o[0];break;case"left":case"start":c=-s[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+r+"'")}var h=0;switch(i){case"hanging":case"top":h=-s[1];break;case"middle":h=-0.5*(s[1]+o[1]);break;case"alphabetic":case"ideographic":h=-3*n;break;case"bottom":h=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var p=1/n;return"lineHeight"in t?p*=+t.lineHeight:"width"in t?p=t.width/(o[0]-s[0]):"height"in t&&(p=t.height/(o[1]-s[1])),e.map(function(e){return[p*(e[0]+c),p*(e[1]+h)]})}function i(e,t,n,r){var i=0|Math.ceil(t.measureText(n).width+2*r);if(i>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var s=3*r;e.height<s&&(e.height=s),t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff",t.fillText(n,r,2*r);var o=t.getImageData(0,0,i,s),u=l(o.data,[s,i,4]);return u.pick(-1,-1,0).transpose(1,0)}function s(e,t){var n=f(e,128);return t?c(n.cells,n.positions,.25):{edges:n.cells,positions:n.positions}}function o(e,t,n,i){var o=s(e,i),u=r(o.positions,t,n),a=o.edges,f="ccw"===t.orientation;if(h(u,a),t.polygons||t.polygon||t.polyline){for(var l=d(a,u),c=new Array(l.length),v=0;v<l.length;++v){for(var m=l[v],g=new Array(m.length),y=0;y<m.length;++y){for(var b=m[y],w=new Array(b.length),E=0;E<b.length;++E)w[E]=u[b[E]].slice();f&&w.reverse(),g[y]=w}c[v]=g}return c}return t.triangles||t.triangulate||t.triangle?{cells:p(u,a,{delaunay:!1,exterior:!1,interior:!0}),positions:u}:{edges:a,positions:u}}function u(e,t,n){try{return o(e,t,n,!0)}catch(e){}try{return o(e,t,n,!1)}catch(e){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function a(e,t,n,r){var s=r.size||64,o=r.font||"normal";n.font=s+"px "+o,n.textAlign="start",n.textBaseline="alphabetic",n.direction="ltr";var a=i(t,n,e,s);return u(a,r,s)}t.exports=a,t.exports.processPixels=u;var f=e("surface-nets"),l=e("ndarray"),c=e("simplify-planar-graph"),h=e("clean-pslg"),p=e("cdt2d"),d=e("planar-graph-to-polyline")},{cdt2d:69,"clean-pslg":78,ndarray:432,"planar-graph-to-polyline":447,"simplify-planar-graph":486,"surface-nets":493}],517:[function(e,t,n){function r(e){var t=[];for(var n in e.layers)t.push(s(e.layers[n]));var r=new l;return c.tile.write({layers:t},r),r.finish()}function i(e){var t={};for(var n in e)t[n]=new h(e[n].features),t[n].name=n;return r({layers:t})}function s(e){for(var t={name:e.name||"",version:e.version||1,extent:e.extent||4096,keys:[],values:[],features:[]},n={},r={},i=0;i<e.length;i++){var s=e.feature(i);s.geometry=a(s.loadGeometry());var o=[];for(var u in s.properties){var l=n[u];"undefined"==typeof l&&(t.keys.push(u),l=t.keys.length-1,n[u]=l);var c=f(s.properties[u]),h=r[c.key];"undefined"==typeof h&&(t.values.push(c),h=t.values.length-1,r[c.key]=h),o.push(l),o.push(h)}s.tags=o,t.features.push(s)}return t}function o(e,t){return(t<<3)+(7&e)}function u(e){return e<<1^e>>31}function a(e){for(var t=[],n=0,r=0,i=e.length,s=0;s<i;s++){var a=e[s];t.push(o(1,1));for(var f=0;f<a.length;f++){1===f&&t.push(o(2,a.length-1));var l=a[f].x-n,c=a[f].y-r;t.push(u(l),u(c)),n+=l,r+=c}}return t}function f(e){var t,n=typeof e;return"string"===n?t={string_value:e}:"boolean"===n?t={bool_value:e}:"number"===n?t=e%1!==0?{double_value:e}:e<0?{sint_value:e}:{uint_value:e}:(e=JSON.stringify(e),t={string_value:e}),t.key=n+":"+e,t}var l=e("pbf"),c=e("./vector-tile-pb"),h=e("./lib/geojson_wrapper");t.exports=r,t.exports.fromVectorTileJs=r,t.exports.fromGeojsonVt=i,t.exports.GeoJSONWrapper=h},{"./lib/geojson_wrapper":518,"./vector-tile-pb":519,pbf:442}],518:[function(e,t,n){"use strict";function r(e){this.features=e,this.length=e.length}function i(e){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=4096}var s=e("point-geometry"),o=e("vector-tile").VectorTileFeature;t.exports=r,r.prototype.feature=function(e){return new i(this.features[e])},i.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new s(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,s=0;s<e.length;s++)for(var o=e[s],u=0;u<o.length;u++){var a=o[u];t=Math.min(t,a.x),n=Math.max(n,a.x),r=Math.min(r,a.y),i=Math.max(i,a.y)}return[t,r,n,i]},i.prototype.toGeoJSON=o.prototype.toGeoJSON},{"point-geometry":448,"vector-tile":511}],519:[function(e,t,n){"use strict";function r(e,t){return e.readFields(i,{layers:[]},t)}function i(e,t,n){3===e&&t.layers.push(h(n,n.readVarint()+n.pos))}function s(e,t){var n;if(void 0!==e.layers)for(n=0;n<e.layers.length;n++)t.writeMessage(3,d,e.layers[n])}function o(e,t){return e.readFields(u,{},t)}function u(e,t,n){1===e?t.string_value=n.readString():2===e?t.float_value=n.readFloat():3===e?t.double_value=n.readDouble():4===e?t.int_value=n.readVarint():5===e?t.uint_value=n.readVarint():6===e?t.sint_value=n.readSVarint():7===e&&(t.bool_value=n.readBoolean())}function a(e,t){void 0!==e.string_value&&t.writeStringField(1,e.string_value),void 0!==e.float_value&&t.writeFloatField(2,e.float_value),void 0!==e.double_value&&t.writeDoubleField(3,e.double_value),void 0!==e.int_value&&t.writeVarintField(4,e.int_value),void 0!==e.uint_value&&t.writeVarintField(5,e.uint_value),void 0!==e.sint_value&&t.writeSVarintField(6,e.sint_value),void 0!==e.bool_value&&t.writeBooleanField(7,e.bool_value)}function f(e,t){var n=e.readFields(l,{},t);return void 0===n.type&&(n.type="Unknown"),n}function l(e,t,n){1===e?t.id=n.readVarint():2===e?t.tags=n.readPackedVarint():3===e?t.type=n.readVarint():4===e&&(t.geometry=n.readPackedVarint())}function c(e,t){void 0!==e.id&&t.writeVarintField(1,e.id),void 0!==e.tags&&t.writePackedVarint(2,e.tags),void 0!==e.type&&t.writeVarintField(3,e.type),void 0!==e.geometry&&t.writePackedVarint(4,e.geometry)}function h(e,t){return e.readFields(p,{features:[],keys:[],values:[]},t)}function p(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():2===e?t.features.push(f(n,n.readVarint()+n.pos)):3===e?t.keys.push(n.readString()):4===e?t.values.push(o(n,n.readVarint()+n.pos)):5===e&&(t.extent=n.readVarint())}function d(e,t){void 0!==e.version&&t.writeVarintField(15,e.version),void 0!==e.name&&t.writeStringField(1,e.name);var n;if(void 0!==e.features)for(n=0;n<e.features.length;n++)t.writeMessage(2,c,e.features[n]);if(void 0!==e.keys)for(n=0;n<e.keys.length;n++)t.writeStringField(3,e.keys[n]);if(void 0!==e.values)for(n=0;n<e.values.length;n++)t.writeMessage(4,a,e.values[n]);void 0!==e.extent&&t.writeVarintField(5,e.extent)}var v=n.tile={read:r,write:s};v.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3},v.value={read:o,write:a},v.feature={read:f,write:c},v.layer={read:h,write:d}},{}],520:[function(e,t,n){!function(){"use strict";function e(t){t.permitHostObjects___&&t.permitHostObjects___(e)}function n(e){return e.substr(0,p.length)!=p||"___"!==e.substr(e.length-3)}function r(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[d];if(t&&t.key===e)return t;if(h(e)){t={key:e};try{return c(e,d,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(e){return}}}function i(e){return e.prototype=null,Object.freeze(e)}function s(){y||"undefined"==typeof console||(y=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=e);var o=!1;if("function"==typeof WeakMap){var u=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var a=new u,f=Object.freeze({});if(a.set(f,1),1===a.get(f))return void (t.exports=WeakMap);o=!0}}var l=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),c=Object.defineProperty,h=Object.isExtensible,p="weakmap:",d=p+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var v=new ArrayBuffer(25),m=new Uint8Array(v);crypto.getRandomValues(m),d=p+"rand:"+Array.prototype.map.call(m,function(e){return(e%36).toString(36)}).join("")+"___"}if(c(Object,"getOwnPropertyNames",{value:function(e){return l(e).filter(n)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;c(Object,"getPropertyNames",{value:function(e){return g(e).filter(n)}})}!function(){var e=Object.freeze;c(Object,"freeze",{value:function(t){return r(t),e(t)}});var t=Object.seal;c(Object,"seal",{value:function(e){return r(e),t(e)}});var n=Object.preventExtensions;c(Object,"preventExtensions",{value:function(e){return r(e),n(e)}})}();var y=!1,b=0,w=function(){function e(e,t){var n,i=r(e);return i?f in i?i[f]:t:(n=u.indexOf(e),n>=0?a[n]:t)}function t(e){var t=r(e);return t?f in t:u.indexOf(e)>=0}function n(e,t){var n,i=r(e);return i?i[f]=t:(n=u.indexOf(e),n>=0?a[n]=t:(n=u.length,a[n]=t,u[n]=e)),this}function o(e){var t,n,i=r(e);return i?f in i&&delete i[f]:(t=u.indexOf(e),!(t<0)&&(n=u.length-1,u[t]=void 0,a[t]=a[n],u[t]=u[n],u.length=n,a.length=n,!0))}this instanceof w||s();var u=[],a=[],f=b++;return Object.create(w.prototype,{get___:{value:i(e)},has___:{value:i(t)},set___:{value:i(n)},delete___:{value:i(o)}})};w.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},"delete":{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof u?!function(){function n(){function t(e,t){return l?f.has(e)?f.get(e):l.get___(e,t):f.get(e,t)}function n(e){return f.has(e)||!!l&&l.has___(e)}function r(e){var t=!!f.delete(e);return l?l.delete___(e)||t:t}this instanceof w||s();var a,f=new u,l=void 0,c=!1;return a=o?function(e,t){return f.set(e,t),f.has(e)||(l||(l=new w),l.set(e,t)),this}:function(e,t){if(c)try{f.set(e,t)}catch(n){l||(l=new w),l.set___(e,t)}else f.set(e,t);return this},Object.create(w.prototype,{get___:{value:i(t)},has___:{value:i(n)},set___:{value:i(a)},delete___:{value:i(r)},permitHostObjects___:{value:i(function(t){if(t!==e)throw new Error("bogus call to permitHostObjects___");c=!0})}})}o&&"undefined"!=typeof Proxy&&(Proxy=void 0),n.prototype=w.prototype,t.exports=n,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.exports=w)}}()},{}],521:[function(e,t,n){function r(){var e={};return function(t){if("object"==typeof t&&null!==t||"function"==typeof t){var n=t.valueOf(e);return n&&n.identity===e?n:i(t,e)}throw new Error("Weakmap-shim: Key must be object")}}var i=e("./hidden-store.js");t.exports=r},{"./hidden-store.js":522}],522:[function(e,t,n){function r(e,t){var n={identity:t},r=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?r.apply(this,arguments):n},writable:!0}),n}t.exports=r},{}],523:[function(e,t,n){function r(){var e=i();return{get:function(t,n){var r=e(t);return r.hasOwnProperty("value")?r.value:n},set:function(t,n){e(t).value=n},has:function(t){return"value"in e(t)},"delete":function(t){return delete e(t).value}}}var i=e("./create-store.js");t.exports=r},{"./create-store.js":521}],524:[function(e,t,n){var r=e("get-canvas-context");t.exports=function(e){return r("webgl",e)}},{"get-canvas-context":121}],525:[function(e,t,n){var r=arguments[3],i=arguments[4],s=arguments[5],o=JSON.stringify;t.exports=function(e,t){function n(e){g[e]=!0;for(var t in i[e][1]){var r=i[e][1][t];g[r]||n(r)}}for(var u,f=Object.keys(s),l=0,c=f.length;l<c;l++){var h=f[l],p=s[h].exports;if(p===e||p&&p.default===e){u=h;break}}if(!u){u=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var d={},l=0,c=f.length;l<c;l++){var h=f[l];d[h]=h}i[u]=[Function(["require","module","exports"],"("+e+")(self)"),d]}var v=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[u]=u,i[v]=[Function(["require"],"var f = require("+o(u)+");(f.default ? f.default : f)(self);"),m];var g={};n(v);var y="("+r+")({"+Object.keys(g).map(function(e){return o(e)+":["+i[e][0]+","+o(i[e][1])+"]"}).join(",")+"},{},["+o(v)+"])",b=window.URL||window.webkitURL||window.mozURL||window.msURL,w=new Blob([y],{type:"text/javascript"});if(t&&t.bare)return w;var E=b.createObjectURL(w),S=new Worker(E);return S.objectURL=E,S}},{}],526:[function(e,t,n){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},{}],527:[function(n,r,i){!function(n,s){"object"==typeof i&&"undefined"!=typeof r?s(i):"function"==typeof e&&e.amd?e(["exports"],s):s(n.WhooTS=n.WhooTS||{})}(this,function(e){function t(e,t,r,i,s,o){o=o||{};var u=e+"?"+["bbox="+n(r,i,s),"format="+(o.format||"image/png"),"service="+(o.service||"WMS"),"version="+(o.version||"1.1.1"),"request="+(o.request||"GetMap"),"srs="+(o.srs||"EPSG:3857"),"width="+(o.width||256),"height="+(o.height||256),"layers="+t].join("&");return u}function n(e,t,n){t=Math.pow(2,n)-t-1;var i=r(256*e,256*t,n),s=r(256*(e+1),256*(t+1),n);return i[0]+","+i[1]+","+s[0]+","+s[1]}function r(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n),i=e*r-2*Math.PI*6378137/2,s=t*r-2*Math.PI*6378137/2;return[i,s]}e.getURL=t,e.getTileBBox=n,e.getMercCoords=r,Object.defineProperty(e,"__esModule",{value:!0})})},{}],528:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t,n,r){var i,s;if("object"==typeof e)i=e,s=t||{};else{var o="number"==typeof e&&e>=1888&&e<=2111;if(!o)throw new Error("Solar year outside range 1888-2111");var u="number"==typeof t&&t>=1&&t<=12;if(!u)throw new Error("Solar month outside range 1 - 12");var a="number"==typeof n&&n>=1&&n<=31;if(!a)throw new Error("Solar day outside range 1 - 31");i={year:e,month:t,day:n},s=r||{}}var f=d[i.year-d[0]],l=i.year<<9|i.month<<5|i.day;s.year=l>=f?i.year:i.year-1,f=d[s.year-d[0]];var c,h=f>>9&4095,v=f>>5&15,m=31&f,g=new Date(h,v-1,m),y=new Date(i.year,i.month-1,i.day);c=Math.round((y-g)/864e5);var b,w=p[s.year-p[0]];for(b=0;b<13;b++){var E=w&1<<12-b?30:29;if(c<E)break;c-=E}var S=w>>13;return!S||b<S?(s.isIntercalary=!1,s.month=1+b):b===S?(s.isIntercalary=!0,s.month=b):(s.isIntercalary=!1,s.month=b),s.day=1+c,s}function s(e,t,n,r,i){var s,o;if("object"==typeof e)o=e,s=t||{};else{var u="number"==typeof e&&e>=1888&&e<=2111;if(!u)throw new Error("Lunar year outside range 1888-2111");var a="number"==typeof t&&t>=1&&t<=12;if(!a)throw new Error("Lunar month outside range 1 - 12");var f="number"==typeof n&&n>=1&&n<=30;if(!f)throw new Error("Lunar day outside range 1 - 30");var l;"object"==typeof r?(l=!1,s=r):(l=!!r,s=i||{}),o={year:e,month:t,day:n,isIntercalary:l}}var c;c=o.day-1;var h,v=p[o.year-p[0]],m=v>>13;h=m?o.month>m?o.month:o.isIntercalary?o.month:o.month-1:o.month-1;for(var g=0;g<h;g++){var y=v&1<<12-g?30:29;c+=y}var b=d[o.year-d[0]],w=b>>9&4095,E=b>>5&15,S=31&b,x=new Date(w,E-1,S+c);return s.year=x.getFullYear(),s.month=1+x.getMonth(),s.day=x.getDate(),s}var o=e("../main"),u=e("object-assign"),a=o.instance();r.prototype=new o.baseCalendar,u(r.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if("string"==typeof e){var n=e.match(l);return n?n[0]:""}var r=this._validateYear(e),i=e.month(),s=""+this.toChineseMonth(r,i);return t&&s.length<2&&(s="0"+s),this.isIntercalaryMonth(r,i)&&(s+="i"),s},monthNames:function(e){if("string"==typeof e){var t=e.match(c);return t?t[0]:""}var n=this._validateYear(e),r=e.month(),i=this.toChineseMonth(n,r),s=["","","","","","","","","","","",""][i-1];return this.isIntercalaryMonth(n,r)&&(s=""+s),s},monthNamesShort:function(e){if("string"==typeof e){var t=e.match(h);return t?t[0]:""}var n=this._validateYear(e),r=e.month(),i=this.toChineseMonth(n,r),s=["","","","","","","","","","","",""][i-1];return this.isIntercalaryMonth(n,r)&&(s=""+s),s},parseMonth:function(e,t){e=this._validateYear(e);var n,r=parseInt(t);if(isNaN(r))""===t[0]&&(n=!0,t=t.substring(1)),""===t[t.length-1]&&(t=t.substring(0,t.length-1)),r=1+["","","","","","","","","","","",""].indexOf(t);else{var i=t[t.length-1];n="i"===i||"I"===i}var s=this.toMonthIndex(e,r,n);return s},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if(e.year&&(e=e.year()),"number"!=typeof e||e<1888||e>2111)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,n){var r=this.intercalaryMonth(e),i=n&&t!==r;if(i||t<1||t>12)throw o.local.invalidMonth.replace(/\{0\}/,this.local.name);var s;return s=r?!n&&t<=r?t-1:t:t-1},toChineseMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var n=this.intercalaryMonth(e),r=n?12:11;if(t<0||t>r)throw o.local.invalidMonth.replace(/\{0\}/,this.local.name);var i;return i=n?t<n?t+1:t:t+1},intercalaryMonth:function(e){e=this._validateYear(e);var t=p[e-p[0]],n=t>>13;return n},isIntercalaryMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var n=this.intercalaryMonth(e);return!!n&&n===t},leapYear:function(e){return 0!==this.intercalaryMonth(e)},weekOfYear:function(e,t,n){var r,i=this._validateYear(e,o.local.invalidyear),s=d[i-d[0]],u=s>>9&4095,f=s>>5&15,l=31&s;r=a.newDate(u,f,l),r.add(4-(r.dayOfWeek()||7),"d");var c=this.toJD(e,t,n)-r.toJD();return 1+Math.floor(c/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);var n=p[e-p[0]],r=n>>13,i=r?12:11;if(t>i)throw o.local.invalidMonth.replace(/\{0\}/,this.local.name);var s=n&1<<12-t?30:29;return s},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,u,n,o.local.invalidDate);e=this._validateYear(r.year()),t=r.month(),n=r.day();var i=this.isIntercalaryMonth(e,t),u=this.toChineseMonth(e,t),f=s(e,u,n,i);return a.toJD(f.year,f.month,f.day)},fromJD:function(e){var t=a.fromJD(e),n=i(t.year(),t.month(),t.day()),r=this.toMonthIndex(n.year,n.month,n.isIntercalary);return this.newDate(n.year,r,n.day)},fromString:function(e){var t=e.match(f),n=this._validateYear(+t[1]),r=+t[2],i=!!t[3],s=this.toMonthIndex(n,r,i),o=+t[4];return this.newDate(n,s,o)},add:function(e,t,n){var i=e.year(),s=e.month(),o=this.isIntercalaryMonth(i,s),u=this.toChineseMonth(i,s),a=Object.getPrototypeOf(r.prototype).add.call(this,e,t,n);if("y"===n){var f=a.year(),l=a.month(),c=this.isIntercalaryMonth(f,u),h=o&&c?this.toMonthIndex(f,u,!0):this.toMonthIndex(f,u,!1);h!==l&&a.month(h)}return a}});var f=/^\s*(-?\d\d\d\d|\d\d)[-\/](\d?\d)([iI]?)[-\/](\d?\d)/m,l=/^\d?\d[iI]?/m,c=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,h=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;o.calendars.chinese=r;var p=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],d=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":542,"object-assign":435}],529:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var i=e("../main"),s=e("object-assign");r.prototype=new i.baseCalendar,s(r.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return e=r.year(),e<0&&e++,r.day()+30*(r.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((t+366)/1461))/365)+1;n<=0&&n--,t=Math.floor(e)+.5-this.newDate(n,1,1).toJD();var r=Math.floor(t/30)+1,i=t-30*(r-1)+1;return this.newDate(n,r,i)}}),i.calendars.coptic=r},{"../main":542,"object-assign":435}],530:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var i=e("../main"),s=e("object-assign");r.prototype=new i.baseCalendar,s(r.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),400},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return(r.day()+1)%8},weekDay:function(e,t,n){var r=this.dayOfWeek(e,t,n);return r>=2&&r<=6},extraInfo:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return{century:o[Math.floor((r.year()-1)/100)+1]||""}},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return e=r.year()+(r.year()<0?1:0),t=r.month(),n=r.day(),n+(t>1?16:0)+(t>2?32*(t-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=400*(t-1),e+=e>15?16:0;var n=Math.floor(e/32)+1,r=e-32*(n-1)+1;return this.newDate(t<=0?t-1:t,n,r)}});var o={20:"Fruitbat",21:"Anchovy"};i.calendars.discworld=r},{"../main":542,"object-assign":435}],531:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var i=e("../main"),s=e("object-assign");r.prototype=new i.baseCalendar,s(r.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return e=r.year(),e<0&&e++,r.day()+30*(r.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((t+366)/1461))/365)+1;n<=0&&n--,t=Math.floor(e)+.5-this.newDate(n,1,1).toJD();var r=Math.floor(t/30)+1,i=t-30*(r-1)+1;return this.newDate(n,r,i)}}),i.calendars.ethiopian=r},{"../main":542,"object-assign":435}],532:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}var s=e("../main"),o=e("object-assign");r.prototype=new s.baseCalendar,o(r.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return e=e<0?e+1:e,i(7*e+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return e=t.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,s.local.invalidMonth),12===t&&this.leapYear(e)?30:8===t&&5===i(this.daysInYear(e),10)?30:9===t&&3===i(this.daysInYear(e),10)?29:this.daysPerMonth[t-1]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},extraInfo:function(e,t,n){var r=this._validate(e,t,n,s.local.invalidDate);return{yearType:(this.leapYear(r)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(r)%10-3]}},toJD:function(e,t,n){var r=this._validate(e,t,n,s.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var i=e<=0?e+1:e,o=this.jdEpoch+this._delay1(i)+this._delay2(i)+n+1;if(t<7){for(var u=7;u<=this.monthsInYear(e);u++)o+=this.daysInMonth(e,u);for(var u=1;u<t;u++)o+=this.daysInMonth(e,u)}else for(var u=7;u<t;u++)o+=this.daysInMonth(e,u);return o},_delay1:function(e){var t=Math.floor((235*e-234)/19),n=12084+13753*t,r=29*t+Math.floor(n/25920);return i(3*(r+1),7)<3&&r++,r},_delay2:function(e){var t=this._delay1(e-1),n=this._delay1(e),r=this._delay1(e+1);return r-n===356?2:n-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(t===-1?1:t+1,7,1);)t++;for(var n=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,n,this.daysInMonth(t,n));)n++;var r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),s.calendars.hebrew=r},{"../main":542,"object-assign":435}],533:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var i=e("../main"),s=e("object-assign");r.prototype=new i.baseCalendar,s(r.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear);return(11*t.year()+14)%30<11},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return e=r.year(),t=r.month(),n=r.day(),e=e<=0?e+1:e,n+Math.ceil(29.5*(t-1))+354*(e-1)+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var n=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),i.calendars.islamic=r},{"../main":542,"object-assign":435}],534:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var i=e("../main"),s=e("object-assign");r.prototype=new i.baseCalendar,s(r.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=t.year()<0?t.year()+1:t.year();return e%4===0},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);return e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n-1524.5},fromJD:function(e){var t=Math.floor(e+.5),n=t+1524,r=Math.floor((n-122.1)/365.25),i=Math.floor(365.25*r),s=Math.floor((n-i)/30.6001),o=s-Math.floor(s<14?1:13),u=r-Math.floor(o>2?4716:4715),a=n-i-Math.floor(30.6001*s);return u<=0&&u--,this.newDate(u,o,a)}}),i.calendars.julian=r},{"../main":542,"object-assign":435}],535:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}function s(e,t){return i(e-1,t)+1}var o=e("../main"),u=e("object-assign");r.prototype=new o.baseCalendar,u(r.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear),!1},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);e=t.year();var n=Math.floor(e/400);e%=400,e+=e<0?400:0;var r=Math.floor(e/20);return n+"."+r+"."+e%20},forYear:function(e){if(e=e.split("."),e.length<3)throw"Invalid Mayan year";for(var t=0,n=0;n<e.length;n++){var r=parseInt(e[n],10);if(Math.abs(r)>19||n>0&&r<0)throw"Invalid Mayan year";t=20*t+r}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear),18},weekOfYear:function(e,t,n){return this._validate(e,t,n,o.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,o.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,n){var r=this._validate(e,t,n,o.local.invalidDate);return r.day()},weekDay:function(e,t,n){return this._validate(e,t,n,o.local.invalidDate),!0},extraInfo:function(e,t,n){var r=this._validate(e,t,n,o.local.invalidDate),i=r.toJD(),s=this._toHaab(i),u=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[u[0]-1],tzolkinDay:u[0],tzolkinTrecena:u[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=i(e+8+340,365);return[Math.floor(t/20)+1,i(t,20)]},_toTzolkin:function(e){return e-=this.jdEpoch,[s(e+20,20),s(e+4,13)]},toJD:function(e,t,n){var r=this._validate(e,t,n,o.local.invalidDate);return r.day()+20*r.month()+360*r.year()+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e%=360,e+=e<0?360:0;var n=Math.floor(e/20),r=e%20;return this.newDate(t,n,r)}}),o.calendars.mayan=r},{"../main":542,"object-assign":435}],536:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var i=e("../main"),s=e("object-assign");r.prototype=new i.baseCalendar;var o=i.instance("gregorian");s(r.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return o.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidMonth),e=r.year();e<0&&e++;for(var s=r.day(),u=1;u<r.month();u++)s+=this.daysPerMonth[u-1];return s+o.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var n=e-Math.floor(this.toJD(t,1,1)+.5)+1,r=1;n>this.daysInMonth(t,r);)n-=this.daysInMonth(t,r),r++;return this.newDate(t,r,n)}}),i.calendars.nanakshahi=r},{"../main":542,"object-assign":435}],537:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var i=e("../main"),s=e("object-assign");r.prototype=new i.baseCalendar,s(r.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear);if(e=t.year(),"undefined"==typeof this.NEPALI_CALENDAR_DATA[e])return this.daysPerYear;for(var n=0,r=this.minMonth;r<=12;r++)n+=this.NEPALI_CALENDAR_DATA[e][r];return n},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,i.local.invalidMonth),"undefined"==typeof this.NEPALI_CALENDAR_DATA[e]?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var s=i.instance(),o=0,u=t,a=e;this._createMissingCalendarData(e);var f=e-(u>9||9===u&&n>=this.NEPALI_CALENDAR_DATA[a][0]?56:57);for(9!==t&&(o=n,u--);9!==u;)u<=0&&(u=12,a--),o+=this.NEPALI_CALENDAR_DATA[a][u],u--;return 9===t?(o+=n-this.NEPALI_CALENDAR_DATA[a][0],o<0&&(o+=s.daysInYear(f))):o+=this.NEPALI_CALENDAR_DATA[a][9]-this.NEPALI_CALENDAR_DATA[a][0],s.newDate(f,1,1).add(o,"d").toJD()},fromJD:function(e){var t=i.instance(),n=t.fromJD(e),r=n.year(),s=n.dayOfYear(),o=r+56;this._createMissingCalendarData(o);for(var u=9,a=this.NEPALI_CALENDAR_DATA[o][0],f=this.NEPALI_CALENDAR_DATA[o][u]-a+1;s>f;)u++,u>12&&(u=1,o++),f+=this.NEPALI_CALENDAR_DATA[o][u];var l=this.NEPALI_CALENDAR_DATA[o][u]-(f-s);return this.newDate(o,u,l)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var n=e-1;n<e+2;n++)"undefined"==typeof this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),i.calendars.nepali=r},{"../main":542,"object-assign":435}],538:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}var s=e("../main"),o=e("object-assign");r.prototype=new s.baseCalendar,o(r.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return 682*((t.year()-(t.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-((r.dayOfWeek()+1)%7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,s.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var o=e-(e>=0?474:473),u=474+i(o,2820);return n+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*u-110)/2816)+365*(u-1)+1029983*Math.floor(o/2820)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1),n=Math.floor(t/1029983),r=i(t,1029983),s=2820;if(1029982!==r){var o=Math.floor(r/366),u=i(r,366);s=Math.floor((2134*o+2816*u+2815)/1028522)+o+1}var a=s+2820*n+474;a=a<=0?a-1:a;var f=e-this.toJD(a,1,1)+1,l=f<=186?Math.ceil(f/31):Math.ceil((f-6)/30),c=e-this.toJD(a,l,1)+1;return this.newDate(a,l,c)}}),s.calendars.persian=r,s.calendars.jalali=r},{"../main":542,"object-assign":435}],539:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var i=e("../main"),s=e("object-assign"),o=i.instance();r.prototype=new i.baseCalendar,s(r.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=this._t2gYear(t.year());return o.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=this._t2gYear(r.year());return o.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate),e=this._t2gYear(r.year());return o.toJD(e,r.month(),r.day())},fromJD:function(e){var t=o.fromJD(e),n=this._g2tYear(t.year());return this.newDate(n,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),i.calendars.taiwan=r},{"../main":542,"object-assign":435}],540:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var i=e("../main"),s=e("object-assign"),o=i.instance();r.prototype=new i.baseCalendar,s(r.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=this._t2gYear(t.year());return o.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear),e=this._t2gYear(r.year());return o.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,i.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate),e=this._t2gYear(r.year());return o.toJD(e,r.month(),r.day())},fromJD:function(e){var t=o.fromJD(e),n=this._g2tYear(t.year());return this.newDate(n,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),i.calendars.thai=r},{"../main":542,"object-assign":435}],541:[function(e,t,n){function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var i=e("../main"),s=e("object-assign");r.prototype=new i.baseCalendar,s(r.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear);return 355===this.daysInYear(t.year())},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,n=1;n<=12;n++)t+=this.daysInMonth(e,n);return t},daysInMonth:function(e,t){for(var n=this._validate(e,t,this.minDay,i.local.invalidMonth),r=n.toJD()-24e5+.5,s=0,u=0;u<o.length;u++){if(o[u]>r)return o[s]-o[s-1];s++}return 30},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,i.local.invalidDate),s=12*(r.year()-1)+r.month()-15292,u=r.day()+o[s-1]-1;return u+24e5-.5},fromJD:function(e){for(var t=e-24e5+.5,n=0,r=0;r<o.length&&!(o[r]>t);r++)n++;var i=n+15292,s=Math.floor((i-1)/12),u=s+1,a=i-12*s,f=t-o[n-1]+1;return this.newDate(u,a,f)},isValid:function(e,t,n){var r=i.baseCalendar.prototype.isValid.apply(this,arguments);return r&&(e=null!=e.year?e.year:e,r=e>=1276&&e<=1500),r},_validate:function(e,t,n,r){var s=i.baseCalendar.prototype._validate.apply(this,arguments);if(s.year<1276||s.year>1500)throw r.replace(/\{0\}/,this.local.name);return s}}),i.calendars.ummalqura=r;var o=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":542,"object-assign":435}],542:[function(e,t,n){function r(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function i(e,t,n,r){if(this._calendar=e,this._year=t,this._month=n,this._day=r,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(f.local.invalidDate||f.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function s(e,t){return e=""+e,"000000".substring(0,t-e.length)+e}function o(){this.shortYearCutoff="+10"}function u(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}var a=e("object-assign");a(r.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase(),t=t||"";var n=this._localCals[e+"-"+t];if(!n&&this.calendars[e]&&(n=new this.calendars[e](t),this._localCals[e+"-"+t]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return n},newDate:function(e,t,n,r,i){return r=(null!=e&&e.year?e.calendar():"string"==typeof r?this.instance(r,i):r)||this.instance(),r.newDate(e,t,n)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,function(t){return e[t]})}},substituteChineseDigits:function(e,t){return function(n){for(var r="",i=0;n>0;){var s=n%10;r=(0===s?"":e[s]+t[i])+r,i++,n=Math.floor(n/10)}return 0===r.indexOf(e[1]+t[1])&&(r=r.substr(1)),r||e[0]}}}),a(i.prototype,{newDate:function(e,t,n){return this._calendar.newDate(null==e?this:e,t,n)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===arguments.length?this._day:this.set(e,"d")},date:function(e,t,n){if(!this._calendar.isValid(e,t,n))throw(f.local.invalidDate||f.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(f.local.differentCalendars||f.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0===t?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+s(Math.abs(this.year()),4)+"-"+s(this.month(),2)+"-"+s(this.day(),2)}}),a(o.prototype,{_validateLevel:0,newDate:function(e,t,n){return null==e?this.today():(e.year&&(this._validate(e,t,n,f.local.invalidDate||f.regionalOptions[""].invalidDate),n=e.day(),t=e.month(),e=e.year()),new i(this,e,t,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+s(Math.abs(t.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){var n=this._validate(e,t,this.minDay,f.local.invalidMonth||f.regionalOptions[""].invalidMonth);return(n.month()+this.monthsInYear(n)-this.firstMonth)%this.monthsInYear(n)+this.minMonth},fromMonthOfYear:function(e,t){var n=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,n,this.minDay,f.local.invalidMonth||f.regionalOptions[""].invalidMonth),n},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,n){var r=this._validate(e,t,n,f.local.invalidDate||f.regionalOptions[""].invalidDate);return r.toJD()-this.newDate(r.year(),this.fromMonthOfYear(r.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,n){var r=this._validate(e,t,n,f.local.invalidDate||f.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(r))+2)%this.daysInWeek()},extraInfo:function(e,t,n){return this._validate(e,t,n,f.local.invalidDate||f.regionalOptions[""].invalidDate),{}},add:function(e,t,n){return this._validate(e,this.minMonth,this.minDay,f.local.invalidDate||f.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,n),t,n)},_add:function(e,t,n){if(this._validateLevel++,"d"===n||"w"===n){var r=e.toJD()+t*("w"===n?this.daysInWeek():1),i=e.calendar().fromJD(r);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var s=e.year()+("y"===n?t:0),o=e.monthOfYear()+("m"===n?t:0),i=e.day(),u=function(e){for(;o<e.minMonth;)s--,o+=e.monthsInYear(s);for(var t=e.monthsInYear(s);o>t-1+e.minMonth;)s++,o-=t,t=e.monthsInYear(s)};"y"===n?(e.month()!==this.fromMonthOfYear(s,o)&&(o=this.newDate(s,e.month(),this.minDay).monthOfYear()),o=Math.min(o,this.monthsInYear(s)),i=Math.min(i,this.daysInMonth(s,this.fromMonthOfYear(s,o)))):"m"===n&&(u(this),i=Math.min(i,this.daysInMonth(s,this.fromMonthOfYear(s,o))));var a=[s,this.fromMonthOfYear(s,o),i];return this._validateLevel--,a}catch(e){throw this._validateLevel--,e}},_correctAdd:function(e,t,n,r){if(!(this.hasYearZero||"y"!==r&&"m"!==r||0!==t[0]&&e.year()>0==t[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],s=n<0?-1:1;t=this._add(e,n*i[0]+s*i[1],i[2])}return e.date(t[0],t[1],t[2])},set:function(e,t,n){this._validate(e,this.minMonth,this.minDay,f.local.invalidDate||f.regionalOptions[""].invalidDate);var r="y"===n?t:e.year(),i="m"===n?t:e.month(),s="d"===n?t:e.day();return"y"!==n&&"m"!==n||(s=Math.min(s,this.daysInMonth(r,i))),e.date(r,i,s)},isValid:function(e,t,n){this._validateLevel++;var r=this.hasYearZero||0!==e;if(r){var i=this.newDate(e,t,this.minDay);r=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(i)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(i)}return this._validateLevel--,r},toJSDate:function(e,t,n){var r=this._validate(e,t,n,f.local.invalidDate||f.regionalOptions[""].invalidDate);return f.instance().fromJD(this.toJD(r)).toJSDate()},fromJSDate:function(e){return this.fromJD(f.instance().fromJSDate(e).toJD())},_validate:function(e,t,n,r){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(f.local.differentCalendars||f.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(e,t,n))throw r.replace(/\{0\}/,this.local.name);var i=this.newDate(e,t,n);return this._validateLevel--,i}catch(e){throw this._validateLevel--,e}}}),u.prototype=new o,a(u.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear),e=t.year()+(t.year()<0?1:0);return e%4===0&&(e%100!==0||e%400===0)},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,f.local.invalidMonth||f.regionalOptions[""].invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,f.local.invalidDate||f.regionalOptions[""].invalidDate);e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<3&&(t+=12,e--);var i=Math.floor(e/100),s=2-i+Math.floor(i/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+s-1524.5},fromJD:function(e){var t=Math.floor(e+.5),n=Math.floor((t-1867216.25)/36524.25);n=t+1+n-Math.floor(n/4);var r=n+1524,i=Math.floor((r-122.1)/365.25),s=Math.floor(365.25*i),o=Math.floor((r-s)/30.6001),u=r-s-Math.floor(30.6001*o),a=o-(o>13.5?13:1),f=i-(a>2.5?4716:4715);return f<=0&&f--,this.newDate(f,a,u)},toJSDate:function(e,t,n){var r=this._validate(e,t,n,f.local.invalidDate||f.regionalOptions[""].invalidDate),i=new Date(r.year(),r.month()-1,r.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var f=t.exports=new r;f.cdate=i,f.baseCalendar=o,f.calendars.gregorian=u},{"object-assign":435}],543:[function(e,t,n){var r=e("object-assign"),i=e("./main");r(i.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),i.local=i.regionalOptions[""],r(i.cdate.prototype,{formatDate:function(e,t){return"string"!=typeof e&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}}),r(i.baseCalendar.prototype,{UNIX_EPOCH:i.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:i.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,n){if("string"!=typeof e&&(n=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw i.local.invalidFormat||i.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat,n=n||{};for(var r=n.dayNamesShort||this.local.dayNamesShort,s=n.dayNames||this.local.dayNames,o=n.monthNumbers||this.local.monthNumbers,u=n.monthNamesShort||this.local.monthNamesShort,a=n.monthNames||this.local.monthNames,f=(n.calculateWeek||this.local.calculateWeek,function(t,n){for(var r=1;b+r<e.length&&e.charAt(b+r)===t;)r++;return b+=r-1,Math.floor(r/(n||1))>1}),l=function(e,t,n,r){var i=""+t;if(f(e,r))for(;i.length<n;)i="0"+i;return i},c=function(e,t,n,r){return f(e)?r[t]:n[t]},h=this,p=function(e){return"function"==typeof o?o.call(h,e,f("m")):m(l("m",e.month(),2))},d=function(e,t){return t?"function"==typeof a?a.call(h,e):a[e.month()-h.minMonth]:"function"==typeof u?u.call(h,e):u[e.month()-h.minMonth]},v=this.local.digits,m=function(e){return n.localNumbers&&v?v(e):e},g="",y=!1,b=0;b<e.length;b++)if(y)"'"!==e.charAt(b)||f("'")?g+=e.charAt(b):y=!1;else switch(e.charAt(b)){case"d":g+=m(l("d",t.day(),2));break;case"D":g+=c("D",t.dayOfWeek(),r,s);break;case"o":g+=l("o",t.dayOfYear(),3);break;case"w":g+=l("w",t.weekOfYear(),2);break;case"m":g+=p(t);break;case"M":g+=d(t,f("M"));break;case"y":g+=f("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":f("Y",2),g+=t.formatYear();break;case"J":g+=t.toJD();break;case"@":g+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":g+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":f("'")?g+="'":y=!0;break;default:g+=e.charAt(b)}return g},parseDate:function(e,t,n){if(null==t)throw i.local.invalidArguments||i.regionalOptions[""].invalidArguments;if(t="object"==typeof t?t.toString():t+"",""===t)return null;e=e||this.local.dateFormat,n=n||{};var r=n.shortYearCutoff||this.shortYearCutoff;r="string"!=typeof r?r:this.today().year()%100+parseInt(r,10);for(var s=n.dayNamesShort||this.local.dayNamesShort,o=n.dayNames||this.local.dayNames,u=n.parseMonth||this.local.parseMonth,a=n.monthNumbers||this.local.monthNumbers,f=n.monthNamesShort||this.local.monthNamesShort,l=n.monthNames||this.local.monthNames,c=-1,h=-1,p=-1,d=-1,v=-1,m=!1,g=!1,y=function(t,n){for(var r=1;C+r<e.length&&e.charAt(C+r)===t;)r++;return C+=r-1,Math.floor(r/(n||1))>1},b=function(e,n){var r=y(e,n),s=[2,3,r?4:2,r?4:2,10,11,20]["oyYJ@!".indexOf(e)+1],o=new RegExp("^-?\\d{1,"+s+"}"),u=t.substring(N).match(o);if(!u)throw(i.local.missingNumberAt||i.regionalOptions[""].missingNumberAt).replace(/\{0\}/,N);return N+=u[0].length,parseInt(u[0],10)},w=this,E=function(){if("function"==typeof a){y("m");var e=a.call(w,t.substring(N));return N+=e.length,e}return b("m")},S=function(e,n,r,s){for(var o=y(e,s)?r:n,u=0;u<o.length;u++)if(t.substr(N,o[u].length).toLowerCase()===o[u].toLowerCase())return N+=o[u].length,u+w.minMonth;throw(i.local.unknownNameAt||i.regionalOptions[""].unknownNameAt).replace(/\{0\}/,N)},x=function(){if("function"==typeof l){var e=y("M")?l.call(w,t.substring(N)):f.call(w,t.substring(N));return N+=e.length,e}return S("M",f,l)},T=function(){if(t.charAt(N)!==e.charAt(C))throw(i.local.unexpectedLiteralAt||i.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,N);N++},N=0,C=0;C<e.length;C++)if(g)"'"!==e.charAt(C)||y("'")?T():g=!1;else switch(e.charAt(C)){case"d":d=b("d");break;case"D":S("D",s,o);break;case"o":v=b("o");break;case"w":b("w");break;case"m":p=E();break;case"M":p=x();break;case"y":var k=C;m=!y("y",2),C=k,h=b("y",2);break;case"Y":h=b("Y",2);break;case"J":c=b("J")+.5,"."===t.charAt(N)&&(N++,b("J"));break;case"@":c=b("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=b("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":N=t.length;break;case"'":y("'")?T():g=!0;break;default:T()}if(N<t.length)throw i.local.unexpectedText||i.regionalOptions[""].unexpectedText;if(h===-1?h=this.today().year():h<100&&m&&(h+=r===-1?1900:this.today().year()-this.today().year()%100-(h<=r?0:100)),"string"==typeof p&&(p=u.call(this,h,p)),v>-1){p=1,d=v;for(var L=this.daysInMonth(h,p);d>L;L=this.daysInMonth(h,p))p++,d-=L}return c>-1?this.fromJD(c):this.newDate(h,p,d)},determineDate:function(e,t,n,r,i){n&&"object"!=typeof n&&(i=r,r=n,n=null),"string"!=typeof r&&(i=r,r="");var s=this,o=function(e){try{return s.parseDate(r,e,i)}catch(e){}e=e.toLowerCase();for(var t=(e.match(/^c/)&&n?n.newDate():null)||s.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,u=o.exec(e);u;)t.add(parseInt(u[1],10),u[2]||"d"),u=o.exec(e);return t};return t=t?t.newDate():null,e=null==e?t:"string"==typeof e?o(e):"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?t:s.today().add(e,"d"):s.newDate(e)}})},{"./main":542,"object-assign":435}],544:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":93}],545:[function(e,t,n){"use strict";function r(e,t){var n=[];return t=+t||0,i(e.hi(e.shape[0]-1),n,t),n}t.exports=r;var i=e("./lib/zc-core")},{"./lib/zc-core":544}],546:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../color"),s=e("../../plots/cartesian/axes"),o=e("./attributes");t.exports=function(e,t,n,u,f){function l(n,i){return r.coerce(e,t,o,n,i)}u=u||{},f=f||{};var c=l("visible",!f.itemIsNotPlainObject);if(!c)return t;l("opacity"),l("align"),l("bgcolor");var h=l("bordercolor"),p=i.opacity(h);l("borderpad");var d=l("borderwidth"),v=l("showarrow");l("text",v?" ":"new text"),l("textangle"),r.coerceFont(l,"font",n.font);for(var m=["x","y"],g=[-10,-30],y={_fullLayout:n},b=0;b<2;b++){var w=m[b],E=s.coerceRef(e,t,y,w,"","paper");if(s.coercePosition(t,y,l,E,w,.5),v){var S="a"+w,x=s.coerceRef(e,t,y,S,"pixel");"pixel"!==x&&x!==E&&(x=t[S]="pixel");var T="pixel"===x?g[b]:.4;s.coercePosition(t,y,l,x,S,T)}else l(w+"anchor")}return r.noneOrAll(e,t,["x","y"]),v&&(l("arrowcolor",p?t.bordercolor:i.defaultLine),l("arrowhead"),l("arrowsize"),l("arrowwidth",2*(p&&d||1)),r.noneOrAll(e,t,["ax","ay"])),t}},{"../../lib":657,"../../plots/cartesian/axes":689,"../color":557,"./attributes":548}],547:[function(e,t,n){"use strict";t.exports=["",{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0},{path:"M2,2V-2H-2V2Z",backoff:0}]},{}],548:[function(e,t,n){"use strict";var r=e("./arrow_paths"),i=e("../../plots/font_attributes"),s=e("../../plots/cartesian/constants"),o=e("../../lib/extend").extendFlat;t.exports={_isLinkedToArray:"annotation",visible:{valType:"boolean",dflt:!0},text:{valType:"string"},textangle:{valType:"angle",dflt:0},font:o({},i,{}),opacity:{valType:"number",min:0,max:1,dflt:1},align:{valType:"enumerated",values:["left","center","right"],dflt:"center"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)"},borderpad:{valType:"number",min:0,dflt:1},borderwidth:{valType:"number",min:0,dflt:1},showarrow:{valType:"boolean",dflt:!0},arrowcolor:{valType:"color"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1},arrowsize:{valType:"number",min:.3,dflt:1},arrowwidth:{valType:"number",min:.1},ax:{valType:"any"},ay:{valType:"any"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",s.idRegex.x.toString()]},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",s.idRegex.y.toString()]},xref:{valType:"enumerated",values:["paper",s.idRegex.x.toString()]},x:{valType:"any"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yref:{valType:"enumerated",values:["paper",s.idRegex.y.toString()]},y:{valType:"any"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto"},_deprecated:{ref:{valType:"string"}}}},{"../../lib/extend":650,"../../plots/cartesian/constants":694,"../../plots/font_attributes":709,"./arrow_paths":547}],549:[function(e,t,n){"use strict";function r(e){var t=e._fullLayout;t.annotations.forEach(function(t){var n=s.getFromId(e,t.xref),r=s.getFromId(e,t.yref);if(n||r){var i=(t._xsize||0)/2,o=t._xshift||0,u=(t._ysize||0)/2,f=t._yshift||0,l=i-o,c=i+o,h=u-f,p=u+f;if(t.showarrow){var d=3*t.arrowsize*t.arrowwidth;l=Math.max(l,d),c=Math.max(c,d),h=Math.max(h,d),p=Math.max(p,d)}n&&n.autorange&&s.expand(n,[n.r2c(t.x)],{ppadplus:c,ppadminus:l}),r&&r.autorange&&s.expand(r,[r.r2c(t.y)],{ppadplus:p,ppadminus:h})}})}var i=e("../../lib"),s=e("../../plots/cartesian/axes"),o=e("./draw").draw;t.exports=function(e){var t=e._fullLayout,n=i.filterVisible(t.annotations);if(n.length&&e._fullData.length){var u={};n.forEach(function(e){u[e.xref]=!0,u[e.yref]=!0});var f=s.list(e).filter(function(e){return e.autorange&&u[e._id]});if(f.length)return i.syncOrAsync([o,r],e)}}},{"../../lib":657,"../../plots/cartesian/axes":689,"./draw":551}],550:[function(e,t,n){"use strict";var r=e("../../plots/array_container_defaults"),i=e("./annotation_defaults");t.exports=function(e,t){var n={name:"annotations",handleItemDefaults:i};r(e,t,n)}},{"../../plots/array_container_defaults":686,"./annotation_defaults":546}],551:[function(e,t,n){"use strict";function r(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&i(e,n);return f.previousPromises(e)}function i(e,t,n,f){function w(e){return e.call(p.font,rt).attr({"text-anchor":{left:"start",right:"end"}[X.align]||"middle"}),d.convertToTspans(e,E),e}function E(){function n(e,t){return"auto"===t&&(t=e<1/3?"left":e>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-0.5,right:-0.5,top:.5}[t]}it.selectAll("tspan.line").attr({y:0,x:0});var r=Y.select(".annotation-math-group"),i=!r.empty(),u=p.bBox((i?r:it).node()),f=u.width,d=u.height,g=Math.round(f+2*tt),y=Math.round(d+2*tt);X._w=f,X._h=d;var w=!1;if(["x","y"].forEach(function(t){var r,i=X[t+"ref"]||t,s=c.getFromId(e,i),o=(K+("x"===t?0:90))*Math.PI/180,u=g*Math.abs(Math.cos(o))+y*Math.abs(Math.sin(o)),a=X[t+"anchor"];if(s){var f=s.r2fraction(X[t]);if(!s.autorange&&(f<0||f>1)&&(X["a"+t+"ref"]===i?(f=s.r2fraction(X["a"+t]),(f<0||f>1)&&(w=!0)):w=!0,w))return;J[t]=s._offset+s.r2p(X[t]),r=.5}else r=X[t],"y"===t&&(r=1-r),J[t]="x"===t?_.l+_.w*r:_.t+_.h*r;var l=0;X["a"+t+"ref"]===i?J["aa"+t]=s._offset+s.r2p(X["a"+t]):(l=X.showarrow?X["a"+t]:u*n(r,a),J[t]+=l),X["_"+t+"type"]=s&&s.type,X["_"+t+"size"]=u,X["_"+t+"shift"]=l}),w)return void Y.remove();var E,S;X.showarrow&&(E=X.axref===X.xref?J.x:l.constrain(J.x-X.ax,1,N.width-1),S=X.ayref===X.yref?J.y:l.constrain(J.y-X.ay,1,N.height-1)),J.x=l.constrain(J.x,1,N.width-1),J.y=l.constrain(J.y,1,N.height-1);var T=tt-u.top,C=tt-u.left;i?r.select("svg").attr({x:tt-1,y:tt}):(it.attr({x:C,y:T}),it.selectAll("tspan.line").attr({y:T,x:C})),nt.call(p.setRect,Z/2,Z/2,g-Z,y-Z);var k=0,L=0;k=X.axref===X.xref?Math.round(J.aax-g/2):Math.round(J.x-g/2),L=X.ayref===X.yref?Math.round(J.aay-y/2):Math.round(J.y-y/2),Y.call(l.setTranslate,k,L);var A="annotations["+t+"]",O=function(n,r){o.select(e).selectAll('.annotation-arrow-g[data-index="'+t+'"]').remove();var i,u;i=X.axref===X.xref?J.aax+n:J.x+n,u=X.ayref===X.yref?J.aay+r:J.y+r;var f=l.rotationXYMatrix(K,i,u),c=l.apply2DTransform(f),p=l.apply2DTransform2(f),d=nt.attr("width")/2,v=nt.attr("height")/2,g=[[i-d,u-v,i-d,u+v],[i-d,u+v,i+d,u+v],[i+d,u+v,i+d,u-v],[i+d,u-v,i-d,u-v]].map(p);if(!g.reduce(function(e,t){return e^!!s(E,S,E+1e6,S+1e6,t[0],t[1],t[2],t[3])},!1)){g.forEach(function(e){var t=s(i,u,E,S,e[0],e[1],e[2],e[3]);t&&(i=t.x,u=t.y)});var y=X.arrowwidth,w=X.arrowcolor,T=Q.append("g").style({opacity:h.opacity(w)}).classed("annotation-arrow-g",!0).attr("data-index",String(t)),N=T.append("path").attr("d","M"+i+","+u+"L"+E+","+S).style("stroke-width",y+"px").call(h.stroke,h.rgb(w));b(N,X.arrowhead,"end",X.arrowsize);var C=T.append("path").classed("annotation",!0).classed("anndrag",!0).attr({"data-index":String(t),d:"M3,3H-3V-3H3ZM0,0L"+(i-E)+","+(u-S),transform:"translate("+E+","+S+")"}).style("stroke-width",y+6+"px").call(h.stroke,"rgba(0,0,0,0)").call(h.fill,"rgba(0,0,0,0)");if(e._context.editable){var k,L,O;m.init({element:C.node(),prepFn:function(){var e=l.getTranslate(Y);L=e.x,O=e.y,k={},V&&V.autorange&&(k[V._name+".autorange"]=!0),$&&$.autorange&&(k[$._name+".autorange"]=!0)},moveFn:function(e,t){T.attr("transform","translate("+e+","+t+")");var n=c(L,O),r=n[0]+e,i=n[1]+t;Y.call(l.setTranslate,r,i),k[A+".x"]=V?V.p2r(V.r2p(X.x)+e):(E+e-_.l)/_.w,k[A+".y"]=$?$.p2r($.r2p(X.y)+t):1-(S+t-_.t)/_.h,X.axref===X.xref&&(k[A+".ax"]=V?V.p2r(V.r2p(X.ax)+e):(E+e-_.l)/_.w),X.ayref===X.yref&&(k[A+".ay"]=$?$.p2r($.r2p(X.ay)+t):1-(S+t-_.t)/_.h),G.attr({transform:"rotate("+K+","+r+","+i+")"})},doneFn:function(t){if(t){a.relayout(e,k);var n=document.querySelector(".js-notes-box-panel");n&&n.redraw(n.selectedObj)}}})}}};X.showarrow&&O(0,0);var M=l.rotationXYMatrix(K,J.x,J.y),D=l.apply2DTransform(M);if(e._context.editable){var P,H,B;m.init({element:Y.node(),prepFn:function(){var e=l.getTranslate(Y);P=e.x,H=e.y,B={}},moveFn:function(e,t){Y.call(l.setTranslate,P+e,H+t);var n="pointer";if(X.showarrow)X.axref===X.xref?B[A+".ax"]=V.p2r(V.r2p(X.ax)+e):B[A+".ax"]=X.ax+e,X.ayref===X.yref?B[A+".ay"]=$.p2r($.r2p(X.ay)+t):B[A+".ay"]=X.ay+t,O(e,t);else{if(V)B[A+".x"]=X.x+e/V._m;else{var r=X._xsize/_.w,i=X.x+X._xshift/_.w-r/2;B[A+".x"]=m.align(i+e/_.w,r,0,1,X.xanchor)}if($)B[A+".y"]=X.y+t/$._m;else{var s=X._ysize/_.h,o=X.y-X._yshift/_.h-s/2;B[A+".y"]=m.align(o-t/_.h,s,0,1,X.yanchor)}V&&$||(n=m.getCursor(V?.5:B[A+".x"],$?.5:B[A+".y"],X.xanchor,X.yanchor))}var u=D(P,H),a=u[0]+e,f=u[1]+t;Y.call(l.setTranslate,P+e,H+t),G.attr({transform:"rotate("+K+","+a+","+f+")"}),v(Y,n)},doneFn:function(t){if(v(Y),t){a.relayout(e,B);var n=document.querySelector(".js-notes-box-panel");n&&n.redraw(n.selectedObj)}}})}}var S,T=e.layout,N=e._fullLayout;if(!u(t)||t===-1){if(!t&&Array.isArray(f))return T.annotations=f,y(T,N),void r(e);if("remove"===f)return delete T.annotations,N.annotations=[],void r(e);if(n&&"add"!==f){for(S=0;S<N.annotations.length;S++)i(e,S,n,f);return}t=N.annotations.length,N.annotations.push({})}if(!n&&f){if("remove"===f){for(N._infolayer.selectAll('.annotation[data-index="'+t+'"]').remove(),N.annotations.splice(t,1),T.annotations.splice(t,1),S=t;S<N.annotations.length;S++)N._infolayer.selectAll('.annotation[data-index="'+(S+1)+'"]').attr("data-index",String(S)),i(e,S);return}if("add"===f||l.isPlainObject(f)){N.annotations.splice(t,0,{});var C=l.isPlainObject(f)?l.extendFlat({},f):{text:"New text"};for(T.annotations?T.annotations.splice(t,0,C):T.annotations=[C],S=N.annotations.length-1;S>t;S--)N._infolayer.selectAll('.annotation[data-index="'+(S-1)+'"]').attr("data-index",String(S)),i(e,S)}}N._infolayer.selectAll('.annotation[data-index="'+t+'"]').remove();var k=T.annotations[t],L=N.annotations[t];if(k){var A={};"string"==typeof n&&n?A[n]=f:l.isPlainObject(n)&&(A=n);var O=Object.keys(A);for(S=0;S<O.length;S++){var M=O[S];l.nestedProperty(k,M).set(A[M])}if(k.visible!==!1){var _=N._size,D={xref:k.xref,yref:k.yref},P=["x","y"];for(S=0;S<2;S++){var H=P[S];if(void 0===A[H]&&void 0!==k[H]){var B=c.getFromId(e,c.coerceRef(D,{},e,H,"","paper")),j=c.getFromId(e,c.coerceRef(k,{},e,H,"","paper")),F=k[H],I=L["_"+H+"type"];if(void 0!==A[H+"ref"]){var q="auto"===k[H+"anchor"],R="x"===H?_.w:_.h,U=(L["_"+H+"size"]||0)/(2*R);if(B&&j)F=j.fraction2r(B.r2fraction(F));else if(B){if(F=B.r2fraction(F),F=B.domain[0]+F*(B.domain[1]-B.domain[0]),q){var z=F+U,W=F-U;F+W<2/3?F=W:F+z>4/3&&(F=z)}}else j&&(q&&(F<1/3?F+=U:F>2/3&&(F-=U)),F=(F-j.domain[0])/(j.domain[1]-j.domain[0]),F=j.fraction2r(F))}j&&j===B&&I&&("log"===I&&"log"!==j.type?F=Math.pow(10,F):"log"!==I&&"log"===j.type&&(F=F>0?Math.log(F)/Math.LN10:void 0)),k[H]=F}}var X={};g(k,X,N),N.annotations[t]=X;var V=c.getFromId(e,X.xref),$=c.getFromId(e,X.yref),J={x:0,y:0},K=+X.textangle||0,Q=N._infolayer.append("g").classed("annotation",!0).attr("data-index",String(t)).style("opacity",X.opacity).on("click",function(){e._dragging=!1,e.emit("plotly_clickannotation",{index:t,annotation:k,fullAnnotation:X})}),G=Q.append("g").classed("annotation-text-g",!0).attr("data-index",String(t)),Y=G.append("g"),Z=X.borderwidth,et=X.borderpad,tt=Z+et,nt=Y.append("rect").attr("class","bg").style("stroke-width",Z+"px").call(h.stroke,X.bordercolor).call(h.fill,X.bgcolor),rt=X.font,it=Y.append("text").classed("annotation",!0).attr("data-unformatted",X.text).text(X.text);e._context.editable?it.call(d.makeEditable,Y).call(w).on("edit",function(n){X.text=n,this.attr({"data-unformatted":X.text}),this.call(w);var r={};r["annotations["+t+"].text"]=X.text,V&&V.autorange&&(r[V._name+".autorange"]=!0),$&&$.autorange&&(r[$._name+".autorange"]=!0),a.relayout(e,r)}):it.call(w),G.attr({transform:"rotate("+K+","+J.x+","+J.y+")"}).call(p.setPosition,J.x,J.y)}}}function s(e,t,n,r,i,s,o,u){var a=n-e,f=i-e,l=o-i,c=r-t,h=s-t,p=u-s,d=a*p-l*c;if(0===d)return null;var v=(f*p-l*h)/d,m=(f*c-a*h)/d;return m<0||m>1||v<0||v>1?null:{x:e+a*v,y:t+c*v}}var o=e("d3"),u=e("fast-isnumeric"),a=e("../../plotly"),f=e("../../plots/plots"),l=e("../../lib"),c=e("../../plots/cartesian/axes"),h=e("../color"),p=e("../drawing"),d=e("../../lib/svg_text_utils"),v=e("../../lib/setcursor"),m=e("../dragelement"),g=e("./annotation_defaults"),y=e("./defaults"),b=e("./draw_arrow_head");t.exports={draw:r,drawOne:i}},{"../../lib":657,"../../lib/setcursor":668,"../../lib/svg_text_utils":672,"../../plotly":684,"../../plots/cartesian/axes":689,"../../plots/plots":749,"../color":557,"../dragelement":578,"../drawing":580,"./annotation_defaults":546,"./defaults":550,"./draw_arrow_head":552,d3:97,"fast-isnumeric":106}],552:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),s=e("../color"),o=e("../drawing"),u=e("./arrow_paths");t.exports=function(e,t,n,f){i(f)||(f=1);var l=e.node(),c=u[t||0];if(c){"string"==typeof n&&n||(n="end");var h,p,d,v,m=(o.getPx(e,"stroke-width")||1)*f,g=e.style("stroke")||s.defaultLine,y=e.style("stroke-opacity")||1,b=n.indexOf("start")>=0,w=n.indexOf("end")>=0,E=c.backoff*m;if("line"===l.nodeName){if(h={x:+e.attr("x1"),y:+e.attr("y1")},p={x:+e.attr("x2"),y:+e.attr("y2")},d=Math.atan2(h.y-p.y,h.x-p.x),v=d+Math.PI,E){var S=E*Math.cos(d),x=E*Math.sin(d);b&&(h.x-=S,h.y-=x,e.attr({x1:h.x,y1:h.y})),w&&(p.x+=S,p.y+=x,e.attr({x2:p.x,y2:p.y}))}}else if("path"===l.nodeName){var T=l.getTotalLength(),N="";if(b){var C=l.getPointAtLength(0),k=l.getPointAtLength(.1);d=Math.atan2(C.y-k.y,C.x-k.x),h=l.getPointAtLength(Math.min(E,T)),E&&(N="0px,"+E+"px,")}if(w){var L=l.getPointAtLength(T),A=l.getPointAtLength(T-.1);if(v=Math.atan2(L.y-A.y,L.x-A.x),p=l.getPointAtLength(Math.max(0,T-E)),E){var O=N?2*E:E;N+=T-O+"px,"+T+"px"}}else N&&(N+=T+"px");N&&e.style("stroke-dasharray",N)}var M=function(n,i){t>5&&(i=0),r.select(l.parentElement).append("path").attr({"class":e.attr("class"),d:c.path,transform:"translate("+n.x+","+n.y+")rotate("+180*i/Math.PI+")scale("+m+")"}).style({fill:g,opacity:y,"stroke-width":0})};b&&M(h,d),w&&M(p,v)}}},{"../color":557,"../drawing":580,"./arrow_paths":547,d3:97,"fast-isnumeric":106}],553:[function(e,t,n){"use strict";var r=e("./draw");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"./attributes":548,"./calc_autorange":549,"./defaults":550,"./draw":551}],554:[function(e,t,n){"use strict";t.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":528,"world-calendars/dist/calendars/coptic":529,"world-calendars/dist/calendars/discworld":530,"world-calendars/dist/calendars/ethiopian":531,"world-calendars/dist/calendars/hebrew":532,"world-calendars/dist/calendars/islamic":533,"world-calendars/dist/calendars/julian":534,"world-calendars/dist/calendars/mayan":535,"world-calendars/dist/calendars/nanakshahi":536,"world-calendars/dist/calendars/nepali":537,"world-calendars/dist/calendars/persian":538,"world-calendars/dist/calendars/taiwan":539,"world-calendars/dist/calendars/thai":540,"world-calendars/dist/calendars/ummalqura":541,"world-calendars/dist/main":542,"world-calendars/dist/plus":543}],555:[function(e,t,n){"use strict";function r(e,t,n){for(var r,s,o,u,a,f=Math.floor((t+.05)/c)+l,h=i(n).fromJD(f),p=0;(p=e.indexOf("%",p))!==-1;)r=e.charAt(p+1),"0"===r||"-"===r||"_"===r?(o=3,s=e.charAt(p+2),"_"===r&&(r="-")):(s=r,r="0",o=2),u=b[s],u?(a=u===y?y:h.formatDate(u[r]),e=e.substr(0,p)+a+e.substr(p+o),p+=a.length):p+=o;return e}function i(e){var t=w[e];return t?t:t=w[e]=u.instance(e)}function s(e){return a.extendFlat({},h,{description:e})}function o(e){return"Sets the calendar system to use with `"+e+"` date data."}var u=e("./calendars"),a=e("../../lib"),f=e("../../constants/numerical"),l=f.EPOCHJD,c=f.ONEDAY,h={valType:"enumerated",values:Object.keys(u.calendars),dflt:"gregorian"},p=function(e,t,n,r){var i={};return i[n]=h,a.coerce(e,t,i,n,r)},d=function(e,t,n,r){for(var i=0;i<n.length;i++)p(e,t,n[i]+"calendar",r.calendar)},v={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},m={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},g={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},y="##",b={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:y,w:y,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},w={},E={xcalendar:s(o("x"))},S=a.extendFlat({},E,{ycalendar:s(o("y"))}),x=a.extendFlat({},S,{zcalendar:s(o("z"))}),T=s(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));t.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:S,bar:S,heatmap:S,contour:S,histogram:S,histogram2d:S,histogram2dcontour:S,scatter3d:x,surface:x,mesh3d:x,scattergl:S,ohlc:E,candlestick:E},layout:{calendar:s(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" ")),"xaxis.calendar":T,"yaxis.calendar":T,"scene.xaxis.calendar":T,"scene.yaxis.calendar":T,"scene.zaxis.calendar":T},transforms:{filter:{valuecalendar:s(["Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:s(["Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:h,handleDefaults:p,handleTraceDefaults:d,CANONICAL_SUNDAY:m,CANONICAL_TICK:v,DFLTRANGE:g,getCal:i,worldCalFmt:r}},{"../../constants/numerical":640,"../../lib":657,"./calendars":554}],556:[function(e,t,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],557:[function(e,t,n){"use strict";function r(e){if(s(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),i="a"===t.charAt(3)&&4===r.length;if(!i&&3!==r.length)return e;for(var o=0;o<r.length;o++){if(!r[o].length)return e;if(r[o]=Number(r[o]),!(r[o]>=0))return e;if(3===o)r[o]>1&&(r[o]=1);else if(r[o]>=1)return e}var u=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return i?"rgba("+u+", "+r[3]+")":"rgb("+u+")"}var i=e("tinycolor2"),s=e("fast-isnumeric"),o=t.exports={},u=e("./attributes");o.defaults=u.defaults,o.defaultLine=u.defaultLine,o.lightLine=u.lightLine,o.background=u.background,o.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},o.rgb=function(e){return o.tinyRGB(i(e))},o.opacity=function(e){return e?i(e).getAlpha():0},o.addOpacity=function(e,t){var n=i(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+t+")"},o.combine=function(e,t){var n=i(e).toRgb();if(1===n.a)return i(e).toRgbString();var r=i(t||o.background).toRgb(),s=1===r.a?r:{r:255*(1-r.a)+r.r*r.a,g:255*(1-r.a)+r.g*r.a,b:255*(1-r.a)+r.b*r.a},u={r:s.r*(1-n.a)+n.r*n.a,g:s.g*(1-n.a)+n.g*n.a,b:s.b*(1-n.a)+n.b*n.a};return i(u).toRgbString()},o.contrast=function(e,t,n){var r=i(e),s=r.isLight()?r.darken(n):r.lighten(t);return s.toString()},o.stroke=function(e,t){var n=i(t);e.style({stroke:o.tinyRGB(n),"stroke-opacity":n.getAlpha()})},o.fill=function(e,t){var n=i(t);e.style({fill:o.tinyRGB(n),"fill-opacity":n.getAlpha()})},o.clean=function(e){if(e&&"object"==typeof e){var t,n,i,s,u=Object.keys(e);for(t=0;t<u.length;t++)if(i=u[t],s=e[i],"color"===i.substr(i.length-5))if(Array.isArray(s))for(n=0;n<s.length;n++)s[n]=r(s[n]);else e[i]=r(s);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(s))for(n=0;n<s.length;n++)Array.isArray(s[n])&&(s[n][1]=r(s[n][1]));else if(Array.isArray(s)){var a=s[0];if(!Array.isArray(a)&&a&&"object"==typeof a)for(n=0;n<s.length;n++)o.clean(s[n])}else s&&"object"==typeof s&&o.clean(s)}}},{"./attributes":556,"fast-isnumeric":106,tinycolor2:495}],558:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/layout_attributes"),i=e("../../plots/font_attributes"),s=e("../../lib/extend").extendFlat;t.exports={thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:s({},r.ticks,{dflt:""}),ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:r.tickfont,tickangle:r.tickangle,tickformat:r.tickformat,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,showexponent:r.showexponent,title:{valType:"string",dflt:"Click to enter colorscale title"},titlefont:s({},i,{}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},{"../../lib/extend":650,"../../plots/cartesian/layout_attributes":698,"../../plots/font_attributes":709}],559:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/tick_value_defaults"),s=e("../../plots/cartesian/tick_mark_defaults"),o=e("../../plots/cartesian/tick_label_defaults"),u=e("./attributes");t.exports=function(e,t,n){function f(e,t){return r.coerce(c,l,u,e,t)}var l=t.colorbar={},c=e.colorbar||{},h=f("thicknessmode");f("thickness","fraction"===h?30/(n.width-n.margin.l-n.margin.r):30);var p=f("lenmode");f("len","fraction"===p?1:n.height-n.margin.t-n.margin.b),f("x"),f("xanchor"),f("xpad"),f("y"),f("yanchor"),f("ypad"),r.noneOrAll(c,l,["x","y"]),f("outlinecolor"),f("outlinewidth"),f("bordercolor"),f("borderwidth"),f("bgcolor"),i(c,l,f,"linear"),o(c,l,f,"linear",{outerTicks:!1,font:n.font,noHover:!0}),s(c,l,f,"linear",{outerTicks:!1,font:n.font,noHover:!0}),f("title"),r.coerceFont(f,"titlefont",n.font),f("titleside")}},{"../../lib":657,"../../plots/cartesian/tick_label_defaults":704,"../../plots/cartesian/tick_mark_defaults":705,"../../plots/cartesian/tick_value_defaults":706,"./attributes":558}],560:[function(e,t,n){"use strict";var r=e("d3"),i=e("tinycolor2"),s=e("../../plotly"),o=e("../../plots/plots"),u=e("../../registry"),a=e("../../plots/cartesian/axes"),f=e("../dragelement"),l=e("../../lib"),c=e("../../lib/extend").extendFlat,h=e("../../lib/setcursor"),p=e("../drawing"),d=e("../color"),v=e("../titles"),m=e("../../plots/cartesian/axis_defaults"),g=e("../../plots/cartesian/position_defaults"),y=e("../../plots/cartesian/layout_attributes"),b=e("./attributes");t.exports=function(e,t){function n(){function b(e,t){return l.coerce(Z,et,y,e,t)}function S(){if(["top","bottom"].indexOf(E.titleside)!==-1){var t=ot.select(".cbtitle"),n=t.select("text"),s=[-E.outlinewidth/2,E.outlinewidth/2],o=t.select(".h"+et._id+"title-math-group").node(),u=15.6;if(n.node()&&(u=1.3*parseInt(n.style("font-size"),10)),o?(at=p.bBox(o).height,at>u&&(s[1]-=(at-u)/2)):n.node()&&!n.classed("js-placeholder")&&(at=p.bBox(t.node()).height),at){if(at+=5,"top"===E.titleside)et.domain[1]-=at/C.h,s[1]*=-1;else{et.domain[0]+=at/C.h;var f=Math.max(1,n.selectAll("tspan.line").size());s[1]+=(1-f)*u}t.attr("transform","translate("+s+")"),et.setScale()}}ot.selectAll(".cbfills,.cblines,.cbaxis").attr("transform","translate(0,"+Math.round(C.h*(1-et.domain[1]))+")");var c=ot.select(".cbfills").selectAll("rect.cbfill").data(O);c.enter().append("rect").classed("cbfill",!0).style("stroke","none"),c.exit().remove(),c.each(function(e,t){var n=[0===t?L[0]:(O[t]+O[t-1])/2,t===O.length-1?L[1]:(O[t]+O[t+1])/2].map(et.c2p).map(Math.round);t!==O.length-1&&(n[1]+=n[1]>n[0]?1:-1);var s=D(e).replace("e-",""),o=i(s).toHexString();r.select(this).attr({x:J,width:Math.max(R,2),y:r.min(n),height:Math.max(r.max(n)-r.min(n),2),fill:o})});var h=ot.select(".cblines").selectAll("path.cbline").data(E.line.color&&E.line.width?A:[]);return h.enter().append("path").classed("cbline",!0),h.exit().remove(),h.each(function(e){r.select(this).attr("d","M"+J+","+(Math.round(et.c2p(e))+E.line.width/2%1)+"h"+R).call(p.lineGroupStyle,E.line.width,M(e),E.line.dash)}),et._axislayer.selectAll("g."+et._id+"tick,path").remove(),et._pos=J+R+(E.outlinewidth||0)/2-("outside"===E.ticks?1:0),et.side="right",l.syncOrAsync([function(){return a.doTicks(e,et,!0)},function(){if(["top","bottom"].indexOf(E.titleside)===-1){var t=et.titlefont.size,n=et._offset+et._length/2,i=C.l+(et.position||0)*C.w+("right"===et.side?10+t*(et.showticklabels?1:.5):-10-t*(et.showticklabels?.5:0));x("h"+et._id+"title",{avoid:{selection:r.select(e).selectAll("g."+et._id+"tick"),side:E.titleside,offsetLeft:C.l,offsetTop:C.t,maxShift:N.width},attributes:{x:i,y:n,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])}function x(t,n){var r,i=w();r=u.traceIs(i,"markerColorscale")?"marker.colorbar.title":"colorbar.title";var s={propContainer:et,propName:r,traceIndex:i.index,dfltName:"colorscale",containerGroup:ot.select(".cbtitle")},o="h"===t.charAt(0)?t.substr(1):"h"+t;ot.selectAll("."+o+",."+o+"-math-group").remove(),v.draw(e,t,c(s,n||{}))}function T(){var n=R+E.outlinewidth/2+p.bBox(et._axislayer.node()).width;if(F=ut.select("text"),F.node()&&!F.classed("js-placeholder")){var r,i=ut.select(".h"+et._id+"title-math-group").node();r=i&&["top","bottom"].indexOf(E.titleside)!==-1?p.bBox(i).width:p.bBox(ut.node()).right-J-C.l,n=Math.max(n,r)}var s=2*E.xpad+n+E.borderwidth+E.outlinewidth/2,u=G-Y;ot.select(".cbbg").attr({x:J-E.xpad-(E.borderwidth+E.outlinewidth)/2,y:Y-V,width:Math.max(s,2),height:Math.max(u+2*V,2)}).call(d.fill,E.bgcolor).call(d.stroke,E.bordercolor).style({"stroke-width":E.borderwidth}),ot.selectAll(".cboutline").attr({x:J,y:Y+E.ypad+("top"===E.titleside?at:0),width:Math.max(R,2),height:Math.max(u-2*E.ypad-at,2)}).call(d.stroke,E.outlinecolor).style({fill:"None","stroke-width":E.outlinewidth});var a=({center:.5,right:1}[E.xanchor]||0)*s;ot.attr("transform","translate("+(C.l-a)+","+C.t+")"),o.autoMargin(e,t,{x:E.x,y:E.y,l:s*({right:1,center:.5}[E.xanchor]||0),r:s*({left:1,center:.5}[E.xanchor]||0),t:u*({bottom:1,middle:.5}[E.yanchor]||0),b:u*({top:1,middle:.5}[E.yanchor]||0)})}var N=e._fullLayout,C=N._size;if("function"!=typeof E.fillcolor&&"function"!=typeof E.line.color)return void N._infolayer.selectAll("g."+t).remove();var k,L=r.extent(("function"==typeof E.fillcolor?E.fillcolor:E.line.color).domain()),A=[],O=[],M="function"==typeof E.line.color?E.line.color:function(){return E.line.color},D="function"==typeof E.fillcolor?E.fillcolor:function(){return E.fillcolor},P=E.levels.end+E.levels.size/100,H=E.levels.size,B=1.001*L[0]-.001*L[1],j=1.001*L[1]-.001*L[0];for(k=E.levels.start;(k-P)*H<0;k+=H)k>B&&k<j&&A.push(k);if("function"==typeof E.fillcolor)if(E.filllevels)for(P=E.filllevels.end+E.filllevels.size/100,H=E.filllevels.size,k=E.filllevels.start;(k-P)*H<0;k+=H)k>L[0]&&k<L[1]&&O.push(k);else O=A.map(function(e){return e-E.levels.size/2}),O.push(O[O.length-1]+E.levels.size);else E.fillcolor&&"string"==typeof E.fillcolor&&(O=[0]);E.levels.size<0&&(A.reverse(),O.reverse());var F,I=N.height-N.margin.t-N.margin.b,q=N.width-N.margin.l-N.margin.r,R=Math.round(E.thickness*("fraction"===E.thicknessmode?q:1)),U=R/C.w,z=Math.round(E.len*("fraction"===E.lenmode?I:1)),W=z/C.h,X=E.xpad/C.w,V=(E.borderwidth+E.outlinewidth)/2,$=E.ypad/C.h,J=Math.round(E.x*C.w+E.xpad),K=E.x-U*({middle:.5,right:1}[E.xanchor]||0),Q=E.y+W*(({top:-0.5,bottom:.5}[E.yanchor]||0)-.5),G=Math.round(C.h*(1-Q)),Y=G-z,Z={type:"linear",range:L,tickmode:E.tickmode,nticks:E.nticks,tick0:E.tick0,dtick:E.dtick,tickvals:E.tickvals,ticktext:E.ticktext,ticks:E.ticks,ticklen:E.ticklen,tickwidth:E.tickwidth,tickcolor:E.tickcolor,showticklabels:E.showticklabels,tickfont:E.tickfont,tickangle:E.tickangle,tickformat:E.tickformat,exponentformat:E.exponentformat,separatethousands:E.separatethousands,showexponent:E.showexponent,showtickprefix:E.showtickprefix,tickprefix:E.tickprefix,showticksuffix:E.showticksuffix,ticksuffix:E.ticksuffix,title:E.title,titlefont:E.titlefont,anchor:"free",position:1},et={},tt={letter:"y",font:N.font,noHover:!0,calendar:N.calendar};if(m(Z,et,b,tt),g(Z,et,b,tt),et._id="y"+t,et._gd=e,et.position=E.x+X+U,n.axis=et,["top","bottom"].indexOf(E.titleside)!==-1&&(et.titleside=E.titleside,et.titlex=E.x+X,et.titley=Q+("top"===E.titleside?W-$:$)),E.line.color&&"auto"===E.tickmode){et.tickmode="linear",et.tick0=E.levels.start;var nt=E.levels.size,rt=l.constrain((G-Y)/50,4,15)+1,it=(L[1]-L[0])/((E.nticks||rt)*nt);if(it>1){var st=Math.pow(10,Math.floor(Math.log(it)/Math.LN10));nt*=st*l.roundUp(it/st,[2,5,10]),(Math.abs(E.levels.start)/E.levels.size+1e-6)%1<2e-6&&(et.tick0=0)}et.dtick=nt}et.domain=[Q+$,Q+W-$],et.setScale();var ot=N._infolayer.selectAll("g."+t).data([0]);ot.enter().append("g").classed(t,!0).each(function(){var e=r.select(this);e.append("rect").classed("cbbg",!0),e.append("g").classed("cbfills",!0),e.append("g").classed("cblines",!0),e.append("g").classed("cbaxis",!0).classed("crisp",!0),e.append("g").classed("cbtitleunshift",!0).append("g").classed("cbtitle",!0),e.append("rect").classed("cboutline",!0),e.select(".cbtitle").datum(0)}),ot.attr("transform","translate("+Math.round(C.l)+","+Math.round(C.t)+")");var ut=ot.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(C.l)+",-"+Math.round(C.t)+")");et._axislayer=ot.select(".cbaxis");var at=0;if(["top","bottom"].indexOf(E.titleside)!==-1){var ft,lt=C.l+(E.x+X)*C.w,ct=et.titlefont.size;ft="top"===E.titleside?(1-(Q+W-$))*C.h+C.t+3+.75*ct:(1-(Q+$))*C.h+C.t-3-.25*ct,x(et._id+"title",{attributes:{x:lt,y:ft,"text-anchor":"start"}})}var ht=l.syncOrAsync([o.previousPromises,S,o.previousPromises,T],e);if(ht&&ht.then&&(e._promises||[]).push(ht),e._context.editable){var pt,dt,vt;f.init({element:ot.node(),prepFn:function(){pt=ot.attr("transform"),h(ot)},moveFn:function(e,t){ot.attr("transform",pt+" translate("+e+","+t+")"),dt=f.align(K+e/C.w,U,0,1,E.xanchor),vt=f.align(Q-t/C.h,W,0,1,E.yanchor);var n=f.getCursor(dt,vt,E.xanchor,E.yanchor);h(ot,n)},doneFn:function(t){h(ot),t&&void 0!==dt&&void 0!==vt&&s.restyle(e,{"colorbar.x":dt,"colorbar.y":vt},w().index)}})}return ht}function w(){var n,r,i=t.substr(2);for(n=0;n<e._fullData.length;n++)if(r=e._fullData[n],r.uid===i)return r}var E={};return Object.keys(b).forEach(function(e){E[e]=null}),E.fillcolor=null,E.line={color:null,width:null,dash:null},E.levels={start:null,end:null,size:null},E.filllevels=null,Object.keys(E).forEach(function(e){n[e]=function(t){return arguments.length?(E[e]=l.isPlainObject(E[e])?l.extendFlat(E[e],t):t,n):E[e]}}),n.options=function(e){return Object.keys(e).forEach(function(t){"function"==typeof n[t]&&n[t](e[t])}),n},n._opts=E,n}},{"../../lib":657,"../../lib/extend":650,"../../lib/setcursor":668,"../../plotly":684,"../../plots/cartesian/axes":689,"../../plots/cartesian/axis_defaults":691,"../../plots/cartesian/layout_attributes":698,"../../plots/cartesian/position_defaults":701,"../../plots/plots":749,"../../registry":764,"../color":557,"../dragelement":578,"../drawing":580,"../titles":631,"./attributes":558,d3:97,tinycolor2:495}],561:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e){return r.isPlainObject(e.colorbar)}},{"../../lib":657}],562:[function(e,t,n){"use strict";t.exports={zauto:{valType:"boolean",dflt:!0},zmin:{valType:"number",dflt:null},zmax:{valType:"number",dflt:null},colorscale:{valType:"colorscale"},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1},showscale:{valType:"boolean",dflt:!0}}},{}],563:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./scales"),s=e("./flip_scale");t.exports=function(e,t,n,o){var u,f;n?(u=r.nestedProperty(e,n).get(),f=r.nestedProperty(e._input,n).get()):(u=e,f=e._input);var l=u[o+"auto"],c=u[o+"min"],h=u[o+"max"],p=u.colorscale;l===!1&&void 0!==c||(c=r.aggNums(Math.min,null,t)),l===!1&&void 0!==h||(h=r.aggNums(Math.max,null,t)),c===h&&(c-=.5,h+=.5),u[o+"min"]=c,u[o+"max"]=h,f[o+"min"]=c,f[o+"max"]=h,u.autocolorscale&&(p=c*h<0?i.RdBu:c>=0?i.Reds:i.Blues,f.colorscale=p,u.reversescale&&(p=s(p)),u.colorscale=p)}},{"../../lib":657,"./flip_scale":568,"./scales":575}],564:[function(e,t,n){"use strict";var r=e("./attributes"),i=e("../../lib/extend").extendDeep;e("./scales.js"),t.exports=function(e){return{color:{valType:"color",arrayOk:!0},colorscale:i({},r.colorscale,{}),cauto:i({},r.zauto,{}),cmax:i({},r.zmax,{}),cmin:i({},r.zmin,{}),autocolorscale:i({},r.autocolorscale,{}),reversescale:i({},r.reversescale,{})}}},{"../../lib/extend":650,"./attributes":562,"./scales.js":575}],565:[function(e,t,n){"use strict";var r=e("./scales");t.exports=r.RdBu},{"./scales":575}],566:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("../colorbar/has_colorbar"),o=e("../colorbar/defaults"),u=e("./is_valid_scale"),a=e("./flip_scale");t.exports=function(e,t,n,f,c){var h=c.prefix,p=c.cLetter,d=h.slice(0,h.length-1),v=h?i.nestedProperty(e,d).get()||{}:e,m=h?i.nestedProperty(t,d).get()||{}:t,g=v[p+"min"],y=v[p+"max"],b=v.colorscale,w=r(g)&&r(y)&&g<y;f(h+p+"auto",!w),f(h+p+"min"),f(h+p+"max");var E;void 0!==b&&(E=!u(b)),f(h+"autocolorscale",E);var S=f(h+"colorscale"),x=f(h+"reversescale");if(x&&(m.colorscale=a(S)),"marker.line."!==h){var T;h&&(T=s(v));var N=f(h+"showscale",T);N&&o(v,m,n)}}},{"../../lib":657,"../colorbar/defaults":559,"../colorbar/has_colorbar":561,"./flip_scale":568,"./is_valid_scale":572,"fast-isnumeric":106}],567:[function(e,t,n){"use strict";t.exports=function(e,t,n){for(var r=e.length,i=new Array(r),s=new Array(r),o=0;o<r;o++){var u=e[o];i[o]=t+u[0]*(n-t),s[o]=u[1]}return{domain:i,range:s}}},{}],568:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=new Array(n),i=n-1,s=0;i>=0;i--,s++)t=e[i],r[s]=[1-t[0],t[1]];return r}},{}],569:[function(e,t,n){"use strict";var r=e("./scales"),i=e("./default_scale"),s=e("./is_valid_scale_array");t.exports=function(e,t){function n(){try{e=r[e]||JSON.parse(e)}catch(n){e=t}}return t||(t=i),e?("string"==typeof e&&(n(),"string"==typeof e&&n()),s(e)?e:t):t}},{"./default_scale":565,"./is_valid_scale_array":573,"./scales":575}],570:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("./is_valid_scale");t.exports=function(e,t){var n=t?i.nestedProperty(e,t).get()||{}:e,o=n.color,u=!1;if(Array.isArray(o))for(var f=0;f<o.length;f++)if(r(o[f])){u=!0;break}return i.isPlainObject(n)&&(u||n.showscale===!0||r(n.cmin)&&r(n.cmax)||s(n.colorscale)||i.isPlainObject(n.colorbar))}},{"../../lib":657,"./is_valid_scale":572,"fast-isnumeric":106}],571:[function(e,t,n){"use strict";n.scales=e("./scales"),n.defaultScale=e("./default_scale"),n.attributes=e("./attributes"),n.handleDefaults=e("./defaults"),n.calc=e("./calc"),n.hasColorscale=e("./has_colorscale"),n.isValidScale=e("./is_valid_scale"),n.getScale=e("./get_scale"),n.flipScale=e("./flip_scale"),n.extractScale=e("./extract_scale"),n.makeColorScaleFunc=e("./make_color_scale_func")},{"./attributes":562,"./calc":563,"./default_scale":565,"./defaults":566,"./extract_scale":567,"./flip_scale":568,"./get_scale":569,"./has_colorscale":570,"./is_valid_scale":572,"./make_color_scale_func":574,"./scales":575}],572:[function(e,t,n){"use strict";var r=e("./scales"),i=e("./is_valid_scale_array");t.exports=function(e){return void 0!==r[e]||i(e)}},{"./is_valid_scale_array":573,"./scales":575}],573:[function(e,t,n){"use strict";var r=e("tinycolor2");t.exports=function(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!==+e[0][0]||1!==+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var i=e[n];if(2!==i.length||+i[0]<t||!r(i[1]).isValid())return!1;t=+i[0]}return!0}},{tinycolor2:495}],574:[function(e,t,n){"use strict";function r(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return s(t).toRgbString()}var i=e("d3"),s=e("tinycolor2"),o=e("fast-isnumeric"),u=e("../color");t.exports=function(e,t){t=t||{};for(var n=e.domain,f=e.range,l=f.length,c=new Array(l),h=0;h<l;h++){var p=s(f[h]).toRgb();c[h]=[p.r,p.g,p.b,p.a]}var d,v=i.scale.linear().domain(n).range(c).clamp(!0),m=t.noNumericCheck,g=t.returnArray;return d=m&&g?v:m?function(e){return r(v(e))}:g?function(e){return o(e)?v(e):s(e).isValid()?e:u.defaultLine}:function(e){return o(e)?r(v(e)):s(e).isValid()?e:u.defaultLine},d.domain=v.domain,d.range=function(){return f},d}},{"../color":557,d3:97,"fast-isnumeric":106,tinycolor2:495}],575:[function(e,t,n){"use strict";t.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]]}},{}],576:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){var s=(e-n)/(r-n),o=s+t/(r-n),u=(s+o)/2;return"left"===i||"bottom"===i?s:"center"===i||"middle"===i?u:"right"===i||"top"===i?o:s<2/3-u?s:o>4/3-u?o:u}},{}],577:[function(e,t,n){"use strict";var r=e("../../lib"),i=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function(e,t,n,s){return e="left"===n?0:"center"===n?1:"right"===n?2:r.constrain(Math.floor(3*e),0,2),t="bottom"===s?0:"middle"===s?1:"top"===s?2:r.constrain(Math.floor(3*t),0,2),i[t][e]}},{"../../lib":657}],578:[function(e,t,n){"use strict";function r(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function i(e){e._dragging=!1,e._replotPending&&s.plot(e)}var s=e("../../plotly"),o=e("../../lib"),u=e("../../plots/cartesian/constants"),a=t.exports={};a.align=e("./align"),a.getCursor=e("./cursor");var f=e("./unhover");a.unhover=f.wrapped,a.unhoverRaw=f.raw,a.init=function(e){function t(t){return e.element.onmousemove=v,m._dragged=!1,m._dragging=!0,f=t.clientX,c=t.clientY,d=t.target,h=(new Date).getTime(),h-m._mouseDownTime<y?g+=1:(g=1,m._mouseDownTime=h),e.prepFn&&e.prepFn(t,f,c),p=r(),p.onmousemove=n,p.onmouseup=s,p.onmouseout=s,p.style.cursor=window.getComputedStyle(e.element).cursor,o.pauseEvent(t)}function n(t){var n=t.clientX-f,r=t.clientY-c,i=e.minDrag||u.MINDRAG;return Math.abs(n)<i&&(n=0),Math.abs(r)<i&&(r=0),(n||r)&&(m._dragged=!0,a.unhover(m)),e.moveFn&&e.moveFn(n,r,m._dragged),o.pauseEvent(t)}function s(t){if(v=e.element.onmousemove,e.setCursor&&(e.element.onmousemove=e.setCursor),p.onmousemove=null,p.onmouseup=null,p.onmouseout=null,o.removeElement(p),!m._dragging)return void (m._dragged=!1);if(m._dragging=!1,(new Date).getTime()-m._mouseDownTime>y&&(g=Math.max(g-1,1)),e.doneFn&&e.doneFn(m._dragged,g),!m._dragged){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),d.dispatchEvent(n)}return i(m),m._dragged=!1,o.pauseEvent(t)}var f,c,h,p,d,v,m=o.getPlotDiv(e.element)||{},g=1,y=u.DBLCLICKDELAY;m._mouseDownTime||(m._mouseDownTime=0),v=e.element.onmousemove,e.setCursor&&(e.element.onmousemove=e.setCursor),e.element.onmousedown=t,e.element.style.pointerEvents="all"},a.coverSlip=r},{"../../lib":657,"../../plotly":684,"../../plots/cartesian/constants":694,"./align":576,"./cursor":577,"./unhover":579}],579:[function(e,t,n){"use strict";var r=e("../../lib/events"),i=t.exports={};i.wrapped=function(e,t,n){"string"==typeof e&&(e=document.getElementById(e)),e._hoverTimer&&(clearTimeout(e._hoverTimer),e._hoverTimer=void 0),i.raw(e,t,n)},i.raw=function(e,t){var n=e._fullLayout;t||(t={}),t.target&&r.triggerHandler(e,"plotly_beforehover",t)===!1||(n._hoverlayer.selectAll("g").remove(),t.target&&e._hoverdata&&e.emit("plotly_unhover",{points:e._hoverdata}),e._hoverdata=void 0)}},{"../../lib/events":649}],580:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){if(u.traceIs(n,"symbols")){var f=d(n);t.attr("d",function(e){var t;t="various"===e.ms||"various"===s.size?3:p.isBubble(n)?f(e.ms):(s.size||6)/2,e.mrc=t;var r=v.symbolNumber(e.mx||s.symbol)||0,i=r%100;return e.om=r%200>=100,v.symbolFuncs[i](t)+(r>=200?y:"")}).style("opacity",function(e){return(e.mo+1||s.opacity+1)-1})}var l,c,h;e.so?(h=o.outlierwidth,c=o.outliercolor,l=s.outliercolor):(h=(e.mlw+1||o.width+1||(e.trace?e.trace.marker.line.width:0)+1)-1,c="mlc"in e?e.mlcc=i(e.mlc):Array.isArray(o.color)?a.defaultLine:o.color,l="mc"in e?e.mcc=r(e.mc):Array.isArray(s.color)?a.defaultLine:s.color||"rgba(0,0,0,0)"),e.om?t.call(a.stroke,l).style({"stroke-width":(h||1)+"px",fill:"none"}):(t.style("stroke-width",h+"px").call(a.fill,l),h&&t.call(a.stroke,c))}function i(e,t,n,r){var i=e[0]-t[0],o=e[1]-t[1],u=n[0]-t[0],a=n[1]-t[1],f=Math.pow(i*i+o*o,E/2),l=Math.pow(u*u+a*a,E/2),c=(l*l*i-f*f*u)*r,h=(l*l*o-f*f*a)*r,p=3*l*(f+l),d=3*f*(f+l);return[[s.round(t[0]+(p&&c/p),2),s.round(t[1]+(p&&h/p),2)],[s.round(t[0]-(d&&c/d),2),s.round(t[1]-(d&&h/d),2)]]}var s=e("d3"),o=e("fast-isnumeric"),u=e("../../registry"),a=e("../color"),f=e("../colorscale"),l=e("../../lib"),c=e("../../lib/svg_text_utils"),h=e("../../constants/xmlns_namespaces"),p=e("../../traces/scatter/subtypes"),d=e("../../traces/scatter/make_bubble_size_func"),v=t.exports={};v.font=function(e,t,n,r){t&&t.family&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(a.fill,r)},v.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},v.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},v.setRect=function(e,t,n,r,i){e.call(v.setPosition,t,n).call(v.setSize,r,i)},v.translatePoint=function(e,t,n,r){var i=e.xp||n.c2p(e.x),s=e.yp||r.c2p(e.y);o(i)&&o(s)?"text"===t.node().nodeName?t.attr("x",i).attr("y",s):t.attr("transform","translate("+i+","+s+")"):t.remove()},v.translatePoints=function(e,t,n,r){e.each(function(e){var i=s.select(this);v.translatePoint(e,i,t,n,r)})},v.getPx=function(e,t){return Number(e.style(t).replace(/px$/,""))},v.crispRound=function(e,t,n){return t&&o(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},v.singleLineStyle=function(e,t,n,r,i){t.style("fill","none");var s=(((e||[])[0]||{}).trace||{}).line||{},o=n||s.width||0,u=i||s.dash||"";a.stroke(t,r||s.color),v.dashLine(t,u,o)},v.lineGroupStyle=function(e,t,n,r){e.style("fill","none").each(function(e){var i=(((e||[])[0]||{}).trace||{}).line||{},o=t||i.width||0,u=r||i.dash||"";s.select(this).call(a.stroke,n||i.color).call(v.dashLine,u,o)})},v.dashLine=function(e,t,n){var r=Math.max(n,3);"solid"===t?t="":"dot"===t?t=r+"px,"+r+"px":"dash"===t?t=3*r+"px,"+3*r+"px":"longdash"===t?t=5*r+"px,"+5*r+"px":"dashdot"===t?t=3*r+"px,"+r+"px,"+r+"px,"+r+"px":"longdashdot"===t&&(t=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},v.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(t){var n=s.select(this);try{n.call(a.fill,t[0].trace.fillcolor)}catch(t){l.error(t,e),n.remove()}})};var m=e("./symbol_defs");v.symbolNames=[],v.symbolFuncs=[],v.symbolNeedLines={},v.symbolNoDot={},v.symbolList=[],Object.keys(m).forEach(function(e){var t=m[e];v.symbolList=v.symbolList.concat([t.n,e,t.n+100,e+"-open"]),v.symbolNames[t.n]=e,v.symbolFuncs[t.n]=t.f,t.needLine&&(v.symbolNeedLines[t.n]=!0),t.noDot?v.symbolNoDot[t.n]=!0:v.symbolList=v.symbolList.concat([t.n+200,e+"-dot",t.n+300,e+"-open-dot"])});var g=v.symbolNames.length,y="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";v.symbolNumber=function(e){if("string"==typeof e){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),e=v.symbolNames.indexOf(e),e>=0&&(e+=t)}return e%100>=g||e>=400?0:Math.floor(Math.max(e,0))},v.singlePointStyle=function(e,t,n){var i=n.marker,s=i.line,o=v.tryColorscale(i,""),u=v.tryColorscale(i,"line");r(e,t,n,o,u,i,s)},v.pointStyle=function(e,t){if(e.size()){var n=t.marker,r=v.tryColorscale(n,""),i=v.tryColorscale(n,"line");e.each(function(e){v.singlePointStyle(e,s.select(this),t,r,i)})}},v.tryColorscale=function(e,t){var n=t?l.nestedProperty(e,t).get():e,r=n.colorscale,i=n.color;return r&&Array.isArray(i)?f.makeColorScaleFunc(f.extractScale(r,n.cmin,n.cmax)):l.identity};var b={start:1,end:-1,middle:0,bottom:1,top:-1},w=1.3;v.textPointStyle=function(e,t){e.each(function(e){var n=s.select(this),r=e.tx||t.text;if(!r||Array.isArray(r))return void n.remove();var i=e.tp||t.textposition,u=i.indexOf("top")!==-1?"top":i.indexOf("bottom")!==-1?"bottom":"middle",a=i.indexOf("left")!==-1?"end":i.indexOf("right")!==-1?"start":"middle",f=e.ts||t.textfont.size,l=e.mrc?e.mrc/.8+1:0;f=o(f)&&f>0?f:0,n.call(v.font,e.tf||t.textfont.family,f,e.tc||t.textfont.color).attr("text-anchor",a).text(r).call(c.convertToTspans);var h=s.select(this.parentNode),p=n.selectAll("tspan.line"),d=((p[0].length||1)-1)*w+1,m=b[a]*l,g=.75*f+b[u]*l+(b[u]-1)*d*f/2;h.attr("transform","translate("+m+","+g+")"),d>1&&p.attr({x:n.attr("x"),y:n.attr("y")})})};var E=.5;v.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var n,r="M"+e[0],s=[];for(n=1;n<e.length-1;n++)s.push(i(e[n-1],e[n],e[n+1],t));for(r+="Q"+s[0][0]+" "+e[1],n=2;n<e.length-1;n++)r+="C"+s[n-2][1]+" "+s[n-1][0]+" "+e[n];return r+="Q"+s[e.length-3][1]+" "+e[e.length-1]},v.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var n,r="M"+e[0],s=e.length-1,o=[i(e[s],e[0],e[1],t)];for(n=1;n<s;n++)o.push(i(e[n-1],e[n],e[n+1],t));for(o.push(i(e[s-1],e[s],e[0],t)),n=1;n<=s;n++)r+="C"+o[n-1][1]+" "+o[n][0]+" "+e[n];return r+="C"+o[s][1]+" "+o[0][0]+" "+e[0]+"Z"};var S={hv:function(e,t){return"H"+s.round(t[0],2)+"V"+s.round(t[1],2)},vh:function(e,t){return"V"+s.round(t[1],2)+"H"+s.round(t[0],2)},hvh:function(e,t){return"H"+s.round((e[0]+t[0])/2,2)+"V"+s.round(t[1],2)+"H"+s.round(t[0],2)},vhv:function(e,t){return"V"+s.round((e[1]+t[1])/2,2)+"H"+s.round(t[0],2)+"V"+s.round(t[1],2)}},x=function(e,t){return"L"+s.round(t[0],2)+","+s.round(t[1],2)};v.steps=function(e){var t=S[e]||x;return function(e){for(var n="M"+s.round(e[0][0],2)+","+s.round(e[0][1],2),r=1;r<e.length;r++)n+=t(e[r-1],e[r]);return n}},v.makeTester=function(e){var t=s.select("body").selectAll("#js-plotly-tester").data([0]);t.enter().append("svg").attr("id","js-plotly-tester").attr(h.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"});var n=t.selectAll(".js-reference-point").data([0]);n.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"}),t.node()._cache||(t.node()._cache={}),e._tester=t,e._testref=n};var T=[],N=1e4;v.bBox=function(e){var t=e.attributes["data-bb"];if(t&&t.value)return l.extendFlat({},T[t.value]);var n=s.select("#js-plotly-tester"),r=n.node(),i=e.cloneNode(!0);r.appendChild(i),s.select(i).attr({x:0,y:0,transform:""});var o=i.getBoundingClientRect(),u=n.select(".js-reference-point").node().getBoundingClientRect();r.removeChild(i);var a={height:o.height,width:o.width,left:o.left-u.left,top:o.top-u.top,right:o.right-u.left,bottom:o.bottom-u.top};return T.length>=N&&(s.selectAll("[data-bb]").attr("data-bb",null),T=[]),e.setAttribute("data-bb",T.length),T.push(a),l.extendFlat({},a)},v.setClipUrl=function(e,t){if(!t)return void e.attr("clip-path",null);var n="#"+t,r=s.select("base");r.size()&&r.attr("href")&&(n=window.location.href.split("#")[0]+n),e.attr("clip-path","url("+n+")")}},{"../../constants/xmlns_namespaces":642,"../../lib":657,"../../lib/svg_text_utils":672,"../../registry":764,"../../traces/scatter/make_bubble_size_func":896,"../../traces/scatter/subtypes":901,"../color":557,"../colorscale":571,"./symbol_defs":581,d3:97,"fast-isnumeric":106}],581:[function(e,t,n){"use strict";var r=e("d3");t.exports={circle:{n:0,f:function(e){var t=r.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=r.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=r.round(.4*e,2),n=r.round(1.2*e,2);return"M"+n+","+t+"H"+t+"V"+n+"H-"+t+"V"+t+"H-"+n+"V-"+t+"H-"+t+"V-"+n+"H"+t+"V-"+t+"H"+n+"Z"}},x:{n:4,f:function(e){var t=r.round(.8*e/Math.sqrt(2),2),n="l"+t+","+t,i="l"+t+",-"+t,s="l-"+t+",-"+t,o="l-"+t+","+t;return"M0,"+t+n+i+s+i+s+o+s+o+n+o+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=r.round(2*e/Math.sqrt(3),2),n=r.round(e/2,2),i=r.round(e,2);return"M-"+t+","+n+"H"+t+"L0,-"+i+"Z"}},"triangle-down":{n:6,f:function(e){var t=r.round(2*e/Math.sqrt(3),2),n=r.round(e/2,2),i=r.round(e,2);return"M-"+t+",-"+n+"H"+t+"L0,"+i+"Z"}},"triangle-left":{n:7,f:function(e){var t=r.round(2*e/Math.sqrt(3),2),n=r.round(e/2,2),i=r.round(e,2);return"M"+n+",-"+t+"V"+t+"L-"+i+",0Z"}},"triangle-right":{n:8,f:function(e){var t=r.round(2*e/Math.sqrt(3),2),n=r.round(e/2,2),i=r.round(e,2);return"M-"+n+",-"+t+"V"+t+"L"+i+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M-"+n+",-"+t+"H"+t+"V"+n+"Z"}},"triangle-se":{n:10,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M"+t+",-"+n+"V"+t+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M"+n+","+t+"H-"+t+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M-"+t+","+n+"V-"+t+"H"+n+"Z"}},pentagon:{n:13,f:function(e){var t=r.round(.951*e,2),n=r.round(.588*e,2),i=r.round(-e,2),s=r.round(e*-0.309,2),o=r.round(.809*e,2);return"M"+t+","+s+"L"+n+","+o+"H-"+n+"L-"+t+","+s+"L0,"+i+"Z"}},hexagon:{n:14,f:function(e){var t=r.round(e,2),n=r.round(e/2,2),i=r.round(e*Math.sqrt(3)/2,2);return"M"+i+",-"+n+"V"+n+"L0,"+t+"L-"+i+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=r.round(e,2),n=r.round(e/2,2),i=r.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+i+"H"+n+"L"+t+",0L"+n+",-"+i+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=r.round(.924*e,2),n=r.round(.383*e,2);return"M-"+n+",-"+t+"H"+n+"L"+t+",-"+n+"V"+n+"L"+n+","+t+"H-"+n+"L-"+t+","+n+"V-"+n+"Z"}},star:{n:17,f:function(e){var t=1.4*e,n=r.round(.225*t,2),i=r.round(.951*t,2),s=r.round(.363*t,2),o=r.round(.588*t,2),u=r.round(-t,2),a=r.round(t*-0.309,2),f=r.round(.118*t,2),l=r.round(.809*t,2),c=r.round(.382*t,2);return"M"+n+","+a+"H"+i+"L"+s+","+f+"L"+o+","+l+"L0,"+c+"L-"+o+","+l+"L-"+s+","+f+"L-"+i+","+a+"H-"+n+"L0,"+u+"Z"}},hexagram:{n:18,f:function(e){var t=r.round(.66*e,2),n=r.round(.38*e,2),i=r.round(.76*e,2);return"M-"+i+",0l-"+n+",-"+t+"h"+i+"l"+n+",-"+t+"l"+n+","+t+"h"+i+"l-"+n+","+t+"l"+n+","+t+"h-"+i+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+i+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=r.round(e*Math.sqrt(3)*.8,2),n=r.round(.8*e,2),i=r.round(1.6*e,2),s=r.round(4*e,2),o="A "+s+","+s+" 0 0 1 ";return"M-"+t+","+n+o+t+","+n+o+"0,-"+i+o+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=r.round(e*Math.sqrt(3)*.8,2),n=r.round(.8*e,2),i=r.round(1.6*e,2),s=r.round(4*e,2),o="A "+s+","+s+" 0 0 1 ";return"M"+t+",-"+n+o+"-"+t+",-"+n+o+"0,"+i+o+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=r.round(1.1*e,2),n=r.round(2*e,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+t+",-"+t+i+"-"+t+","+t+i+t+","+t+i+t+",-"+t+i+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=r.round(1.4*e,2),n=r.round(1.9*e,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+t+",0"+i+"0,"+t+i+t+",0"+i+"0,-"+t+i+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=r.round(.7*e,2),n=r.round(1.4*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=r.round(1.4*e,2),n=r.round(.7*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:!0},bowtie:{n:26,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){var t=r.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=r.round(e,2),n=r.round(e/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){var t=r.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){var t=r.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=r.round(1.3*e,2),n=r.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){var t=r.round(1.4*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:!0,noDot:!0},"x-thin":{n:34,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0},asterisk:{n:35,f:function(e){var t=r.round(1.2*e,2),n=r.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0},hash:{n:36,f:function(e){var t=r.round(e/2,2),n=r.round(e,2);return"M"+t+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+t+"H-"+n+"m0,-"+n+"H"+n},needLine:!0},"y-up":{n:37,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),i=r.round(.8*e,2);return"M-"+t+","+i+"L0,0M"+t+","+i+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0},"y-down":{n:38,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),i=r.round(.8*e,2);return"M-"+t+",-"+i+"L0,0M"+t+",-"+i+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0},"y-left":{n:39,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),i=r.round(.8*e,2);return"M"+i+","+t+"L0,0M"+i+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0},"y-right":{n:40,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),i=r.round(.8*e,2);return"M-"+i+","+t+"L0,0M-"+i+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0},"line-ew":{n:41,f:function(e){var t=r.round(1.4*e,2);return"M"+t+",0H-"+t},needLine:!0,noDot:!0},"line-ns":{n:42,f:function(e){var t=r.round(1.4*e,2);return"M0,"+t+"V-"+t},needLine:!0,noDot:!0},"line-ne":{n:43,f:function(e){var t=r.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0},"line-nw":{n:44,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:!0,noDot:!0}}},{d3:97}],582:[function(e,t,n){"use strict";t.exports={visible:{valType:"boolean"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"]},symmetric:{valType:"boolean"},array:{valType:"data_array"},arrayminus:{valType:"data_array"},value:{valType:"number",min:0,dflt:10},valueminus:{valType:"number",min:0,dflt:10},traceref:{valType:"integer",min:0,dflt:0},tracerefminus:{valType:"integer",min:0,dflt:0},copy_ystyle:{valType:"boolean"},copy_zstyle:{valType:"boolean"},color:{valType:"color"},thickness:{valType:"number",min:0,dflt:2},width:{valType:"number",min:0},_deprecated:{opacity:{valType:"number"}}}},{}],583:[function(e,t,n){"use strict";function r(e,t,n,r){var s=t["error_"+r]||{},a=s.visible&&["linear","log"].indexOf(n.type)!==-1,f=[];if(a){for(var l=u(s),c=0;c<e.length;c++){var h=e[c],p=h[r];if(i(n.c2l(p))){var d=l(p,c);if(i(d[0])&&i(d[1])){var v=h[r+"s"]=p-d[0],m=h[r+"h"]=p+d[1];f.push(v,m)}}}o.expand(n,f,{padded:!0})}}var i=e("fast-isnumeric"),s=e("../../registry"),o=e("../../plots/cartesian/axes"),u=e("./compute_error");t.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var i=t[n],u=i[0].trace;if(s.traceIs(u,"errorBarsOK")){var f=o.getFromId(e,u.xaxis),l=o.getFromId(e,u.yaxis);r(i,u,f,"x"),r(i,u,l,"y")}}}},{"../../plots/cartesian/axes":689,"../../registry":764,"./compute_error":584,"fast-isnumeric":106}],584:[function(e,t,n){"use strict";function r(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}t.exports=function(e){var t=e.type,n=e.symmetric;if("data"===t){var i=e.array,s=e.arrayminus;return n||void 0===s?function(e,t){var n=+i[t];return[n,n]}:function(e,t){return[+s[t],+i[t]]}}var o=r(t,e.value),u=r(t,e.valueminus);return n||void 0===e.valueminus?function(e){var t=o(e);return[t,t]}:function(e){return[u(e),o(e)]}}},{}],585:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../registry"),s=e("../../lib"),o=e("./attributes");t.exports=function(e,t,n,u){function f(e,t){return s.coerce(h,c,o,e,t)}var l="error_"+u.axis,c=t[l]={},h=e[l]||{},p=void 0!==h.array||void 0!==h.value||"sqrt"===h.type,d=f("visible",p);if(d!==!1){var v=f("type","array"in h?"data":"percent"),m=!0;if("sqrt"!==v&&(m=f("symmetric",!(("data"===v?"arrayminus":"valueminus")in h))),"data"===v){var g=f("array");if(g||(c.array=[]),f("traceref"),!m){var y=f("arrayminus");y||(c.arrayminus=[]),f("tracerefminus")}}else"percent"!==v&&"constant"!==v||(f("value"),m||f("valueminus"));var b="copy_"+u.inherit+"style";if(u.inherit){var w=t["error_"+u.inherit];(w||{}).visible&&f(b,!(h.color||r(h.thickness)||r(h.width)))}u.inherit&&c[b]||(f("color",n),f("thickness"),f("width",i.traceIs(t,"gl3d")?0:4))}}},{"../../lib":657,"../../registry":764,"./attributes":582,"fast-isnumeric":106}],586:[function(e,t,n){"use strict";var r=t.exports={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.calcFromTrace=function(e,t){for(var n=e.x||[],i=e.y,s=n.length||i.length,o=new Array(s),u=0;u<s;u++)o[u]={x:n[u],y:i[u]};return o[0].trace=e,r.calc({calcdata:[o],_fullLayout:t}),o},r.plot=e("./plot"),r.style=e("./style"),r.hoverInfo=function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}},{"./attributes":582,"./calc":583,"./defaults":585,"./plot":587,"./style":588}],587:[function(e,t,n){"use strict";function r(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};return void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),s(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0))),void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),s(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0))),r}var i=e("d3"),s=e("fast-isnumeric"),o=e("../../traces/scatter/subtypes");t.exports=function(e,t,n){var u,f=t.xaxis,l=t.yaxis,c=n&&n.duration>0;e.each(function(e){var t,h=e[0].trace,p=h.error_x||{},d=h.error_y||{};h.ids&&(t=function(e){return e.id});var v=o.hasMarkers(h)&&h.marker.maxdisplayed>0;if(d.visible||p.visible){var m=i.select(this).selectAll("g.errorbar").data(e,t);m.exit().remove(),m.style("opacity",1);var g=m.enter().append("g").classed("errorbar",!0);c&&g.style("opacity",0).transition().duration(n.duration).style("opacity",1),m.each(function(e){var t=i.select(this),o=r(e,f,l);if(!v||e.vis){var h;if(d.visible&&s(o.x)&&s(o.yh)&&s(o.ys)){var m=d.width;h="M"+(o.x-m)+","+o.yh+"h"+2*m+"m-"+m+",0V"+o.ys,o.noYS||(h+="m-"+m+",0h"+2*m);var g=t.select("path.yerror");u=!g.size(),u?g=t.append("path").classed("yerror",!0):c&&(g=g.transition().duration(n.duration).ease(n.easing)),g.attr("d",h)}if(p.visible&&s(o.y)&&s(o.xh)&&s(o.xs)){var y=(p.copy_ystyle?d:p).width;h="M"+o.xh+","+(o.y-y)+"v"+2*y+"m0,-"+y+"H"+o.xs,o.noXS||(h+="m0,-"+y+"v"+2*y);var b=t.select("path.xerror");u=!b.size(),u?b=t.append("path").classed("xerror",!0):c&&(b=b.transition().duration(n.duration).ease(n.easing)),b.attr("d",h)}}})}})}},{"../../traces/scatter/subtypes":901,d3:97,"fast-isnumeric":106}],588:[function(e,t,n){"use strict";var r=e("d3"),i=e("../color");t.exports=function(e){e.each(function(e){var t=e[0].trace,n=t.error_y||{},s=t.error_x||{},o=r.select(this);o.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),s.copy_ystyle&&(s=n),o.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(i.stroke,s.color)})}},{"../color":557,d3:97}],589:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/constants");t.exports={_isLinkedToArray:"image",visible:{valType:"boolean",dflt:!0},source:{valType:"string"},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},sizex:{valType:"number",dflt:0},sizey:{valType:"number",dflt:0},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain"},opacity:{valType:"number",min:0,max:1,dflt:1},x:{valType:"any",dflt:0},y:{valType:"any",dflt:0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper"}}},{"../../plots/cartesian/constants":694}],590:[function(e,t,n){"use strict";function r(e,t,n){function r(n,r){return i.coerce(e,t,u,n,r)}var o=r("source"),a=r("visible",!!o);if(!a)return t;r("layer"),r("x"),r("y"),r("xanchor"),r("yanchor"),r("sizex"),r("sizey"),r("sizing"),r("opacity");for(var f={_fullLayout:n},l=["x","y"],c=0;c<2;c++)s.coerceRef(e,t,f,l[c],"paper");return t}var i=e("../../lib"),s=e("../../plots/cartesian/axes"),o=e("../../plots/array_container_defaults"),u=e("./attributes"),a="images";t.exports=function(e,t){var n={name:a,handleItemDefaults:r};o(e,t,n)}},{"../../lib":657,"../../plots/array_container_defaults":686,"../../plots/cartesian/axes":689,"./attributes":589}],591:[function(e,t,n){"use strict";var r=e("d3"),i=e("../drawing"),s=e("../../plots/cartesian/axes"),o=e("../../constants/xmlns_namespaces");t.exports=function(e){function t(t){var n=r.select(this);if(!this.img||this.img.src!==t.source){n.attr("xmlns",o.svg);var i=new Promise(function(e){function r(){n.remove(),e()}var i=new Image;this.img=i,i.setAttribute("crossOrigin","anonymous"),i.onerror=r,i.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height;var t=e.getContext("2d");t.drawImage(this,0,0);var r=e.toDataURL("image/png");n.attr("xlink:href",r)},n.on("error",r),n.on("load",e),i.src=t.source}.bind(this));e._promises.push(i)}}function n(t){var n=r.select(this),o=s.getFromId(e,t.xref),f=s.getFromId(e,t.yref),l=u._size,c=o?Math.abs(o.l2p(t.sizex)-o.l2p(0)):t.sizex*l.w,h=f?Math.abs(f.l2p(t.sizey)-f.l2p(0)):t.sizey*l.h,p=c*d.x[t.xanchor].offset,v=h*d.y[t.yanchor].offset,m=d.x[t.xanchor].sizing+d.y[t.yanchor].sizing,g=(o?o.r2p(t.x)+o._offset:t.x*l.w+l.l)+p,y=(f?f.r2p(t.y)+f._offset:l.h-t.y*l.h+l.t)+v;switch(t.sizing){case"fill":m+=" slice";break;case"stretch":m="none"}n.attr({x:g,y:y,width:c,height:h,preserveAspectRatio:m,opacity:t.opacity});var b=o?o._id:"",w=f?f._id:"",E=b+w;E&&n.call(i.setClipUrl,"clip"+u._uid+E)}for(var u=e._fullLayout,f=[],l=[],c=[],h=0;h<u.images.length;h++){var p=u.images[h];p.visible&&("below"===p.layer&&"paper"!==p.xref&&"paper"!==p.yref?l.push(p):"above"===p.layer?f.push(p):c.push(p))}var d={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-0.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-0.5},bottom:{sizing:"YMax",offset:-1}}},v=u._imageLowerLayer.selectAll("image").data(c),m=u._imageSubplotLayer.selectAll("image").data(l),g=u._imageUpperLayer.selectAll("image").data(f);v.enter().append("image"),m.enter().append("image"),g.enter().append("image"),v.exit().remove(),m.exit().remove(),g.exit().remove(),v.each(function(e){t.bind(this)(e),n.bind(this)(e)}),m.each(function(e){t.bind(this)(e),n.bind(this)(e)}),g.each(function(e){t.bind(this)(e),n.bind(this)(e)})}},{"../../constants/xmlns_namespaces":642,"../../plots/cartesian/axes":689,"../drawing":580,d3:97}],592:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":589,"./defaults":590,"./draw":591}],593:[function(e,t,n){"use strict";n.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},n.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},n.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3},n.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3}},{}],594:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),s=e("../../lib/extend").extendFlat;t.exports={bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.defaultLine},borderwidth:{valType:"number",min:0,dflt:0},font:s({},r,{}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"]},tracegroupgap:{valType:"number",min:0,dflt:10},x:{valType:"number",min:-2,max:3,dflt:1.02},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto"}}},{"../../lib/extend":650,"../../plots/font_attributes":709,"../color/attributes":556}],595:[function(e,t,n){"use strict";t.exports={scrollBarWidth:4,scrollBarHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4}},{}],596:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../lib"),s=e("./attributes"),o=e("../../plots/layout_attributes"),u=e("./helpers");t.exports=function(e,t,n){function f(e,t){return i.coerce(d,v,s,e,t)}for(var l,c,h,p,d=e.legend||{},v=t.legend={},m=0,g="normal",y=0;y<n.length;y++){var b=n[y];u.legendGetsTrace(b)&&(m++,r.traceIs(b,"pie")&&m++),(r.traceIs(b,"bar")&&"stack"===t.barmode||["tonextx","tonexty"].indexOf(b.fill)!==-1)&&(g=u.isGrouped({traceorder:g})?"grouped+reversed":"reversed"),void 0!==b.legendgroup&&""!==b.legendgroup&&(g=u.isReversed({traceorder:g})?"reversed+grouped":"grouped")}var w=i.coerce(e,t,o,"showlegend",m>1);if(w!==!1){if(f("bgcolor",t.paper_bgcolor),f("bordercolor"),f("borderwidth"),i.coerceFont(f,"font",t.font),f("orientation"),"h"===v.orientation){var E=e.xaxis;E&&E.rangeslider&&E.rangeslider.visible?(l=0,h="left",c=1.1,p="bottom"):(l=0,h="left",c=-0.1,p="top")}f("traceorder",g),u.isGrouped(t.legend)&&f("tracegroupgap"),f("x",l),f("xanchor",h),f("y",c),f("yanchor",p),i.noneOrAll(d,v,["x","y"])}}},{"../../lib":657,"../../plots/layout_attributes":740,"../../registry":764,"./attributes":594,"./helpers":599}],597:[function(e,t,n){"use strict";function r(e,t){function n(n){g.convertToTspans(n,function(){n.selectAll("tspan.line").attr({x:n.attr("x")}),e.call(s,t)})}var r=e.data()[0][0],i=t._fullLayout,o=r.trace,u=p.traceIs(o,"pie"),a=o.index,f=u?r.label:o.name,c=e.selectAll("text.legendtext").data([0]);c.enter().append("text").classed("legendtext",!0),c.attr({x:40,y:0,"data-unformatted":f}).style("text-anchor","start").classed("user-select-none",!0).call(v.font,i.legend.font).text(f),t._context.editable&&!u?c.call(g.makeEditable).call(n).on("edit",function(e){this.attr({"data-unformatted":e}),this.text(e).call(n),this.text()||(e="    ");var i,s=r.trace._fullInput||{};if(["ohlc","candlestick"].indexOf(s.type)!==-1){var o=r.trace.transforms,u=o[o.length-1].direction;i=u+".legenditem.name"}else i="name";l.restyle(t,i,e,a)}):c.call(n)}function i(e,t){var n=t._fullLayout.hiddenlabels?t._fullLayout.hiddenlabels.slice():[],r=e.selectAll("rect").data([0]);r.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(m.fill,"rgba(0,0,0,0)"),r.on("click",function(){if(!t._dragged){var r,i,s=e.data()[0][0],o=t._fullData,u=s.trace,a=u.legendgroup,f=[];if(p.traceIs(u,"pie")){var c=s.label,h=n.indexOf(c);h===-1?n.push(c):n.splice(h,1),l.relayout(t,"hiddenlabels",n)}else{if(""===a)f=[u.index];else for(var d=0;d<o.length;d++)r=o[d],r.legendgroup===a&&f.push(r.index);i=u.visible!==!0||"legendonly",l.restyle(t,"visible",i,f)}}})}function s(e,t){var n,r,i=e.data()[0][0],s=e.select("g[class*=math-group]"),o=t._fullLayout.legend,u=1.3*o.font.size;if(!i.trace.showlegend)return void e.remove();if(s.node()){var a=v.bBox(s.node());n=a.height,r=a.width,c.setTranslate(s,0,n/4)}else{var f=e.selectAll(".legendtext"),l=e.selectAll(".legendtext>tspan"),h=l[0].length||1;n=u*h,r=f.node()&&v.bBox(f.node()).width;var p=u*(.3+(1-h)/2);f.attr("y",p),l.attr("y",p)}n=Math.max(n,16)+3,i.height=n,i.width=r}function o(e,t,n){var r=e._fullLayout,i=r.legend,s=i.borderwidth,o=E.isGrouped(i);if(E.isVertical(i))o&&t.each(function(e,t){c.setTranslate(this,0,t*i.tracegroupgap)}),i.width=0,i.height=0,n.each(function(e){var t=e[0],n=t.height,r=t.width;c.setTranslate(this,s,5+s+i.height+n/2),i.height+=n,i.width=Math.max(i.width,r)}),i.width+=45+2*s,i.height+=10+2*s,o&&(i.height+=(i._lgroupsLength-1)*i.tracegroupgap),i.width=Math.ceil(i.width),i.height=Math.ceil(i.height),n.each(function(t){var n=t[0],r=f.select(this).select(".legendtoggle");r.call(v.setRect,0,-n.height/2,(e._context.editable?0:i.width)+40,n.height)});else if(o){i.width=0,i.height=0;for(var u=[i.width],a=t.data(),l=0,h=a.length;l<h;l++){var p=a[l].map(function(e){return e[0].width}),d=40+Math.max.apply(null,p);i.width+=i.tracegroupgap+d,u.push(i.width)}t.each(function(e,t){c.setTranslate(this,u[t],0)}),t.each(function(){var e=f.select(this),t=e.selectAll("g.traces"),n=0;t.each(function(e){var t=e[0],r=t.height;c.setTranslate(this,0,5+s+n+r/2),n+=r}),i.height=Math.max(i.height,n)}),i.height+=10+2*s,i.width+=2*s,i.width=Math.ceil(i.width),i.height=Math.ceil(i.height),n.each(function(t){var n=t[0],r=f.select(this).select(".legendtoggle");r.call(v.setRect,0,-n.height/2,e._context.editable?0:i.width,n.height)})}else{i.width=0,i.height=0;var m=0,g=0,y=0,b=0;n.each(function(e){y=Math.max(40+e[0].width,y)}),n.each(function(e){var t=e[0],n=y,o=i.tracegroupgap||5;s+b+o+n>r.width-(r.margin.r+r.margin.l)&&(b=0,m+=g,i.height=i.height+g,g=0),c.setTranslate(this,s+b,5+s+t.height/2+m),i.width+=o+n,i.height=Math.max(i.height,t.height),b+=o+n,g=Math.max(t.height,g)}),i.width+=2*s,i.height+=10+2*s,i.width=Math.ceil(i.width),i.height=Math.ceil(i.height),n.each(function(t){var n=t[0],r=f.select(this).select(".legendtoggle");r.call(v.setRect,0,-n.height/2,e._context.editable?0:i.width,n.height)})}}function u(e){var t=e._fullLayout,n=t.legend,r="left";S.isRightAnchor(n)?r="right":S.isCenterAnchor(n)&&(r="center");var i="top";S.isBottomAnchor(n)?i="bottom":S.isMiddleAnchor(n)&&(i="middle"),h.autoMargin(e,"legend",{x:n.x,y:n.y,l:n.width*({right:1,center:.5}[r]||0),r:n.width*({left:1,center:.5}[r]||0),b:n.height*({top:1,middle:.5}[i]||0),t:n.height*({bottom:1,middle:.5}[i]||0)})}function a(e){var t=e._fullLayout,n=t.legend,r="left";S.isRightAnchor(n)?r="right":S.isCenterAnchor(n)&&(r="center"),h.autoMargin(e,"legend",{x:n.x,y:.5,l:n.width*({right:1,center:.5}[r]||0),r:n.width*({left:1,center:.5}[r]||0),b:0,t:0})}var f=e("d3"),l=e("../../plotly"),c=e("../../lib"),h=e("../../plots/plots"),p=e("../../registry"),d=e("../dragelement"),v=e("../drawing"),m=e("../color"),g=e("../../lib/svg_text_utils"),y=e("./constants"),b=e("./get_legend_data"),w=e("./style"),E=e("./helpers"),S=e("./anchor_utils");t.exports=function(e){function t(e,t){L.attr("data-scroll",t).call(c.setTranslate,0,t),A.call(v.setRect,q,e,y.scrollBarWidth,y.scrollBarHeight),C.select("rect").attr({y:g.borderwidth-t})}var n=e._fullLayout,s="legend"+n._uid;if(n._infolayer&&e.calcdata){var g=n.legend,E=n.showlegend&&b(e.calcdata,g),T=n.hiddenlabels||[];if(!n.showlegend||!E.length)return n._infolayer.selectAll(".legend").remove(),n._topdefs.select("#"+s).remove(),void h.autoMargin(e,"legend");var N=n._infolayer.selectAll("g.legend").data([0]);N.enter().append("g").attr({"class":"legend","pointer-events":"all"});var C=n._topdefs.selectAll("#"+s).data([0]);C.enter().append("clipPath").attr("id",s).append("rect");var k=N.selectAll("rect.bg").data([0]);k.enter().append("rect").attr({"class":"bg","shape-rendering":"crispEdges"}),k.call(m.stroke,g.bordercolor),k.call(m.fill,g.bgcolor),k.style("stroke-width",g.borderwidth+"px");var L=N.selectAll("g.scrollbox").data([0]);L.enter().append("g").attr("class","scrollbox");var A=N.selectAll("rect.scrollbar").data([0]);A.enter().append("rect").attr({"class":"scrollbar",rx:20,ry:2,width:0,height:0}).call(m.fill,"#808BA4");var O=L.selectAll("g.groups").data(E);O.enter().append("g").attr("class","groups"),O.exit().remove();var M=O.selectAll("g.traces").data(c.identity);M.enter().append("g").attr("class","traces"),M.exit().remove(),M.call(w).style("opacity",function(e){var t=e[0].trace;return p.traceIs(t,"pie")?T.indexOf(e[0].label)!==-1?.5:1:"legendonly"===t.visible?.5:1}).each(function(){f.select(this).call(r,e).call(i,e)});var _=0!==N.enter().size();_&&(o(e,O,M),u(e));var D=0,P=n.width,H=0,B=n.height;o(e,O,M),g.height>B?a(e):u(e);var j=n._size,F=j.l+j.w*g.x,I=j.t+j.h*(1-g.y);S.isRightAnchor(g)?F-=g.width:S.isCenterAnchor(g)&&(F-=g.width/2),S.isBottomAnchor(g)?I-=g.height:S.isMiddleAnchor(g)&&(I-=g.height/2);var q=g.width,R=j.w;q>R?(F=j.l,q=R):(F+q>P&&(F=P-q),F<D&&(F=D),q=Math.min(P-F,g.width));var U=g.height,z=j.h;U>z?(I=j.t,U=z):(I+U>B&&(I=B-U),I<H&&(I=H),U=Math.min(B-I,g.height)),c.setTranslate(N,F,I);var W,X,V=U-y.scrollBarHeight-2*y.scrollBarMargin,$=g.height-U;if(g.height<=U||e._context.staticPlot)k.attr({width:q-g.borderwidth,height:U-g.borderwidth,x:g.borderwidth/2,y:g.borderwidth/2}),c.setTranslate(L,0,0),C.select("rect").attr({width:q-2*g.borderwidth,height:U-2*g.borderwidth,x:g.borderwidth,y:g.borderwidth}),L.call(v.setClipUrl,s);else{W=y.scrollBarMargin,X=L.attr("data-scroll")||0,k.attr({width:q-2*g.borderwidth+y.scrollBarWidth+y.scrollBarMargin,height:U-g.borderwidth,x:g.borderwidth/2,y:g.borderwidth/2}),C.select("rect").attr({width:q-2*g.borderwidth+y.scrollBarWidth+y.scrollBarMargin,height:U-2*g.borderwidth,x:g.borderwidth,y:g.borderwidth-X}),L.call(v.setClipUrl,s),_&&t(W,X),N.on("wheel",null),N.on("wheel",function(){X=c.constrain(L.attr("data-scroll")-f.event.deltaY/V*$,-$,0),W=y.scrollBarMargin-X/$*V,t(W,X),f.event.preventDefault()}),A.on(".drag",null),L.on(".drag",null);var J=f.behavior.drag().on("drag",function(){W=c.constrain(f.event.y-y.scrollBarHeight/2,y.scrollBarMargin,y.scrollBarMargin+V),X=-(W-y.scrollBarMargin)/V*$,t(W,X)});A.call(J),L.call(J)}if(e._context.editable){var K,Q,G,Y;N.classed("cursor-move",!0),d.init({element:N.node(),prepFn:function(){var e=c.getTranslate(N);G=e.x,Y=e.y},moveFn:function(e,t){var n=G+e,r=Y+t;c.setTranslate(N,n,r),K=d.align(n,0,j.l,j.l+j.w,g.xanchor),Q=d.align(r,0,j.t+j.h,j.t,g.yanchor)},doneFn:function(t){t&&void 0!==K&&void 0!==Q&&l.relayout(e,{"legend.x":K,"legend.y":Q})}})}}}},{"../../lib":657,"../../lib/svg_text_utils":672,"../../plotly":684,"../../plots/plots":749,"../../registry":764,"../color":557,"../dragelement":578,"../drawing":580,"./anchor_utils":593,"./constants":595,"./get_legend_data":598,"./helpers":599,"./style":601,d3:97}],598:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("./helpers");t.exports=function(e,t){function n(e,n){if(""!==e&&i.isGrouped(t))a.indexOf(e)===-1?(a.push(e),f=!0,u[e]=[[n]]):u[e].push([n]);else{var r="~~i"+c;a.push(r),u[r]=[[n]],c++}}var s,o,u={},a=[],f=!1,l={},c=0;for(s=0;s<e.length;s++){var h=e[s],p=h[0],d=p.trace,v=d.legendgroup;if(i.legendGetsTrace(d)&&d.showlegend)if(r.traceIs(d,"pie"))for(l[v]||(l[v]={}),o=0;o<h.length;o++){var m=h[o].label;l[v][m]||(n(v,{label:m,color:h[o].color,i:h[o].i,trace:d}),l[v][m]=!0)}else n(v,p)}if(!a.length)return[];var g,y,b=a.length;if(f&&i.isGrouped(t))for(y=new Array(b),s=0;s<b;s++)g=u[a[s]],y[s]=i.isReversed(t)?g.reverse():g;else{for(y=[new Array(b)],s=0;s<b;s++)g=u[a[s]][0],y[0][i.isReversed(t)?b-s-1:s]=g;b=1}return t._lgroupsLength=b,y}},{"../../registry":764,"./helpers":599}],599:[function(e,t,n){"use strict";var r=e("../../registry");n.legendGetsTrace=function(e){return e.visible&&r.traceIs(e,"showLegend")},n.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},n.isVertical=function(e){return"h"!==e.orientation},n.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},{"../../registry":764}],600:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":594,"./defaults":596,"./draw":597,"./style":601}],601:[function(e,t,n){"use strict";function r(e){var t=e[0].trace,n=t.visible&&t.fill&&"none"!==t.fill,r=p.hasLines(t),i=a.select(this).select(".legendfill").selectAll("path").data(n?[e]:[]);i.enter().append("path").classed("js-fill",!0),i.exit().remove(),i.attr("d","M5,0h30v6h-30z").call(c.fillGroupStyle);var s=a.select(this).select(".legendlines").selectAll("path").data(r?[e]:[]);s.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),s.exit().remove(),s.call(c.lineGroupStyle)}function i(e){function t(e,t,n){var r=l.nestedProperty(o,e).get(),i=Array.isArray(r)&&t?t(r):r;if(n){if(i<n[0])return n[0];if(i>n[1])return n[1]}return i}function n(e){return e[0]}var r,i,s=e[0],o=s.trace,u=p.hasMarkers(o),f=p.hasText(o),h=p.hasLines(o);if(u||f||h){var d={},v={};u&&(d.mc=t("marker.color",n),d.mo=t("marker.opacity",l.mean,[.2,1]),d.ms=t("marker.size",l.mean,[2,16]),d.mlc=t("marker.line.color",n),d.mlw=t("marker.line.width",l.mean,[0,5]),v.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),h&&(v.line={width:t("line.width",n,[0,10])}),f&&(d.tx="Aa",d.tp=t("textposition",n),d.ts=10,d.tc=t("textfont.color",n),d.tf=t("textfont.family",n)),r=[l.minExtend(s,d)],i=l.minExtend(o,v)}var m=a.select(this).select("g.legendpoints"),g=m.selectAll("path.scatterpts").data(u?r:[]);g.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),g.exit().remove(),g.call(c.pointStyle,i),u&&(r[0].mrc=3);var y=m.selectAll("g.pointtext").data(f?r:[]);y.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),y.exit().remove(),y.selectAll("text").call(c.textPointStyle,i)}function s(e){var t=e[0].trace,n=t.marker||{},r=n.line||{},i=a.select(this).select("g.legendpoints").selectAll("path.legendbar").data(f.traceIs(t,"bar")?[e]:[]);i.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),i.exit().remove(),i.each(function(e){var t=(e.mlw+1||r.width+1)-1,i=a.select(this);i.style("stroke-width",t+"px").call(h.fill,e.mc||n.color),t&&i.call(h.stroke,e.mlc||r.color)})}function o(e){var t=e[0].trace,n=a.select(this).select("g.legendpoints").selectAll("path.legendbox").data(f.traceIs(t,"box")&&t.visible?[e]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.each(function(e){var n=(e.lw+1||t.line.width+1)-1,r=a.select(this);r.style("stroke-width",n+"px").call(h.fill,e.fc||t.fillcolor),n&&r.call(h.stroke,e.lc||t.line.color)})}function u(e){var t=e[0].trace,n=a.select(this).select("g.legendpoints").selectAll("path.legendpie").data(f.traceIs(t,"pie")&&t.visible?[e]:[]);n.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.size()&&n.call(d,e[0],t)}var a=e("d3"),f=e("../../registry"),l=e("../../lib"),c=e("../drawing"),h=e("../color"),p=e("../../traces/scatter/subtypes"),d=e("../../traces/pie/style_one");t.exports=function(e){e.each(function(e){var t=a.select(this),n=t.selectAll("g.legendfill").data([e]);n.enter().append("g").classed("legendfill",!0);var r=t.selectAll("g.legendlines").data([e]);r.enter().append("g").classed("legendlines",!0);var i=t.selectAll("g.legendsymbols").data([e]);i.enter().append("g").classed("legendsymbols",!0),i.style("opacity",e[0].trace.opacity),i.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(s).each(o).each(u).each(r).each(i)}},{"../../lib":657,"../../registry":764,"../../traces/pie/style_one":875,"../../traces/scatter/subtypes":901,"../color":557,"../drawing":580,d3:97}],602:[function(e,t,n){"use strict";function r(e,t){var n=t.currentTarget,r=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,s=e._fullLayout,o={};if("zoom"===r){for(var u,a,l="in"===i?.5:2,h=(1+l)/2,p=(1-l)/2,d=c.list(e,null,!0),v=0;v<d.length;v++)if(u=d[v],!u.fixedrange)if(a=u._name,"auto"===i)o[a+".autorange"]=!0;else if("reset"===i)if(void 0===u._rangeInitial)o[a+".autorange"]=!0;else{var m=u._rangeInitial.slice();o[a+".range[0]"]=m[0],o[a+".range[1]"]=m[1]}else{var g=[u.r2l(u.range[0]),u.r2l(u.range[1])],y=[h*g[0]+p*g[1],h*g[1]+p*g[0]];o[a+".range[0]"]=u.l2r(y[0]),o[a+".range[1]"]=u.l2r(y[1])}}else"hovermode"!==r||"x"!==i&&"y"!==i||(i=s._isHoriz?"y":"x",n.setAttribute("data-val",i)),o[r]=i;f.relayout(e,o)}function i(e,t){for(var n=t.currentTarget,r=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,s=e._fullLayout,o=l.getSubplotIds(s,"gl3d"),u={},a=r.split("."),c=0;c<o.length;c++)u[o[c]+"."+a[1]]=i;f.relayout(e,u)}function s(e,t){for(var n=t.currentTarget,r=n.getAttribute("data-attr"),i=e._fullLayout,s=l.getSubplotIds(i,"gl3d"),o=0;o<s.length;o++){var u=s[o],a=i[u],f=a._scene;"resetDefault"===r?f.setCameraToDefault():"resetLastSave"===r&&f.setCamera(a.camera)}}function o(e,t){var n=t.currentTarget,r=n._previousVal||!1,i=e.layout,s=e._fullLayout,o=l.getSubplotIds(s,"gl3d"),u=["xaxis","yaxis","zaxis"],a=["showspikes","spikesides","spikethickness","spikecolor"],c={},p={},d={};if(r)d=h.extendDeep(i,r),n._previousVal=null;else{d={"allaxes.showspikes":!1};for(var v=0;v<o.length;v++){var m=o[v],g=s[m],y=c[m]={};y.hovermode=g.hovermode,d[m+".hovermode"]=!1;for(var b=0;b<3;b++){var w=u[b];p=y[w]={};for(var E=0;E<a.length;E++){var S=a[E];p[S]=g[w][S]}}}n._previousVal=h.extendDeep({},c)}f.relayout(e,d)}function u(e,t){for(var n=t.currentTarget,r=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,s=e._fullLayout,o=l.getSubplotIds(s,"geo"),u=0;u<o.length;u++){var a=s[o[u]]._subplot;if("zoom"===r){var f=a.projection.scale(),c="in"===i?2*f:.5*f;a.projection.scale(c),a.zoom.scale(c),a.render()}else"reset"===r&&a.zoomReset()}}function a(e){var t,n=e._fullLayout;t=n._has("cartesian")?n._isHoriz?"y":"x":"closest";var r=!e._fullLayout.hovermode&&t;f.relayout(e,"hovermode",r)}var f=e("../../plotly"),l=e("../../plots/plots"),c=e("../../plots/cartesian/axes"),h=e("../../lib"),p=e("../../snapshot/download"),d=e("../../../build/ploticon"),v=t.exports={};v.toImage={name:"toImage",title:"Download plot as a png",icon:d.camera,click:function(e){var t="png";h.notifier("Taking snapshot - this may take a few seconds","long"),h.isIE()&&(h.notifier("IE only supports svg.  Changing format to svg.","long"),t="svg"),p(e,{format:t}).then(function(e){h.notifier("Snapshot succeeded - "+e,"long")}).catch(function(){h.notifier("Sorry there was a problem downloading your snapshot!","long")})}},v.sendDataToCloud={name:"sendDataToCloud",title:"Save and edit plot in cloud",icon:d.disk,click:function(e){l.sendDataToCloud(e)}},v.zoom2d={name:"zoom2d",title:"Zoom",attr:"dragmode",val:"zoom",icon:d.zoombox,click:r},v.pan2d={name:"pan2d",title:"Pan",attr:"dragmode",val:"pan",icon:d.pan,click:r},v.select2d={name:"select2d",title:"Box Select",attr:"dragmode",val:"select",icon:d.selectbox,click:r},v.lasso2d={name:"lasso2d",title:"Lasso Select",attr:"dragmode",val:"lasso",icon:d.lasso,click:r},v.zoomIn2d={name:"zoomIn2d",title:"Zoom in",attr:"zoom",val:"in",icon:d.zoom_plus,click:r},v.zoomOut2d={name:"zoomOut2d",title:"Zoom out",attr:"zoom",val:"out",icon:d.zoom_minus,click:r},v.autoScale2d={name:"autoScale2d",title:"Autoscale",attr:"zoom",val:"auto",icon:d.autoscale,click:r},v.resetScale2d={name:"resetScale2d",title:"Reset axes",attr:"zoom",val:"reset",icon:d.home,click:r},v.hoverClosestCartesian={name:"hoverClosestCartesian",title:"Show closest data on hover",attr:"hovermode",val:"closest",icon:d.tooltip_basic,gravity:"ne",click:r},v.hoverCompareCartesian={name:"hoverCompareCartesian",title:"Compare data on hover",attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:d.tooltip_compare,gravity:"ne",click:r},v.zoom3d={name:"zoom3d",title:"Zoom",attr:"scene.dragmode",val:"zoom",icon:d.zoombox,click:i},v.pan3d={name:"pan3d",title:"Pan",attr:"scene.dragmode",val:"pan",icon:d.pan,click:i},v.orbitRotation={name:"orbitRotation",title:"orbital rotation",attr:"scene.dragmode",val:"orbit",icon:d["3d_rotate"],click:i},v.tableRotation={name:"tableRotation",title:"turntable rotation",attr:"scene.dragmode",val:"turntable",icon:d["z-axis"],click:i},v.resetCameraDefault3d={name:"resetCameraDefault3d",title:"Reset camera to default",attr:"resetDefault",icon:d.home,click:s},v.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:"Reset camera to last save",attr:"resetLastSave",icon:d.movie,click:s},v.hoverClosest3d={name:"hoverClosest3d",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:d.tooltip_basic,gravity:"ne",click:o},v.zoomInGeo={name:"zoomInGeo",title:"Zoom in",attr:"zoom",val:"in",icon:d.zoom_plus,click:u},v.zoomOutGeo={name:"zoomOutGeo",title:"Zoom out",attr:"zoom",val:"out",icon:d.zoom_minus,click:u},v.resetGeo={name:"resetGeo",title:"Reset",attr:"reset",val:null,icon:d.autoscale,click:u},v.hoverClosestGeo={name:"hoverClosestGeo",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:d.tooltip_basic,gravity:"ne",click:a},v.hoverClosestGl2d={name:"hoverClosestGl2d",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:d.tooltip_basic,gravity:"ne",click:a},v.hoverClosestPie={name:"hoverClosestPie",title:"Toggle show closest data on hover",attr:"hovermode",val:"closest",icon:d.tooltip_basic,gravity:"ne",click:a},v.toggleHover={name:"toggleHover",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:d.tooltip_basic,gravity:"ne",click:function(e,t){a(e),o(e,t)}},v.resetViews={name:"resetViews",title:"Reset views",icon:d.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),r(e,t),n.setAttribute("data-attr","resetLastSave"),s(e,t)}}},{"../../../build/ploticon":2,"../../lib":657,"../../plotly":684,"../../plots/cartesian/axes":689,"../../plots/plots":749,"../../snapshot/download":766}],603:[function(e,t,n){"use strict";n.manage=e("./manage")},{"./manage":604}],604:[function(e,t,n){"use strict";function r(e,t,n){function r(e){for(var n=[],r=0;r<e.length;r++){var i=e[r];t.indexOf(i)===-1&&n.push(c[i])}g.push(n)}var u=e._fullLayout,a=e._fullData,f=u._has("cartesian"),l=u._has("gl3d"),p=u._has("geo"),d=u._has("pie"),v=u._has("gl2d"),m=u._has("ternary"),g=[];if(r(["toImage","sendDataToCloud"]),(f||v||d||m)+p+l>1)return r(["resetViews","toggleHover"]),o(g,n);l&&(r(["zoom3d","pan3d","orbitRotation","tableRotation"]),r(["resetCameraDefault3d","resetCameraLastSave3d"]),r(["hoverClosest3d"])),p&&(r(["zoomInGeo","zoomOutGeo","resetGeo"]),r(["hoverClosestGeo"]));var y=i(u),b=[];return((f||v)&&!y||m)&&(b=["zoom2d","pan2d"]),(f||m)&&s(a)&&(b.push("select2d"),b.push("lasso2d")),b.length&&r(b),!f&&!v||y||m||r(["zoomIn2d","zoomOut2d","autoScale2d","resetScale2d"]),f&&d?r(["toggleHover"]):v?r(["hoverClosestGl2d"]):f?r(["hoverClosestCartesian","hoverCompareCartesian"]):d&&r(["hoverClosestPie"]),o(g,n)}function i(e){for(var t=a.list({_fullLayout:e},null,!0),n=!0,r=0;r<t.length;r++)if(!t[r].fixedrange){n=!1;break}return n}function s(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&("scatter"===r.type||"scatterternary"===r.type?(f.hasMarkers(r)||f.hasText(r))&&(t=!0):t=!0)}return t}function o(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}function u(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.length;r++){var i=n[r];if("string"==typeof i){if(void 0===c[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][r]=c[i]}}return e}var a=e("../../plots/cartesian/axes"),f=e("../../traces/scatter/subtypes"),l=e("./modebar"),c=e("./buttons");t.exports=function(e){var t=e._fullLayout,n=e._context,i=t._modeBar;if(!n.displayModeBar)return void (i&&(i.destroy(),delete t._modeBar));if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var s,o=n.modeBarButtons;s=Array.isArray(o)&&o.length?u(o):r(e,n.modeBarButtonsToRemove,n.modeBarButtonsToAdd),i?i.update(e,s):t._modeBar=l(e,s)}},{"../../plots/cartesian/axes":689,"../../traces/scatter/subtypes":901,"./buttons":602,"./modebar":605}],605:[function(e,t,n){"use strict";function r(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}function i(e,t){var n=e._fullLayout,i=new r({graphInfo:e,container:n._paperdiv.node(),buttons:t});return n._privateplot&&s.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}var s=e("d3"),o=e("../../lib"),u=e("../../../build/ploticon"),a=r.prototype;a.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context;"hover"===n.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar";var r=!this.hasButtons(t),i=this.hasLogo!==n.displaylogo;(r||i)&&(this.removeAllButtons(),this.updateButtons(t),n.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},a.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var n=t.createGroup();e.forEach(function(e){var r=e.name;if(!r)throw new Error("must provide button 'name' in button config");if(t.buttonsNames.indexOf(r)!==-1)throw new Error("button name '"+r+"' is taken");t.buttonsNames.push(r);var i=t.createButton(e);t.buttonElements.push(i),n.appendChild(i)}),t.element.appendChild(n)})},a.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},a.createButton=function(e){var t=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var r=e.title;void 0===r&&(r=e.name),(r||0===r)&&n.setAttribute("data-title",r),void 0!==e.attr&&n.setAttribute("data-attr",e.attr);var i=e.val;void 0!==i&&("function"==typeof i&&(i=i(this.graphInfo)),n.setAttribute("data-val",i));var s=e.click;if("function"!=typeof s)throw new Error("must provide button 'click' function in button config");return n.addEventListener("click",function(n){e.click(t.graphInfo,n),t.updateActiveButton(n.currentTarget)}),n.setAttribute("data-toggle",e.toggle||!1),e.toggle&&n.classList.add("active"),n.appendChild(this.createIcon(e.icon||u.question)),n.setAttribute("data-gravity",e.gravity||"n"),n},a.createIcon=function(e){var t=e.ascent-e.descent,n="http://www.w3.org/2000/svg",r=document.createElementNS(n,"svg"),i=document.createElementNS(n,"path");return r.setAttribute("height","1em"),r.setAttribute("width",e.width/t+"em"),r.setAttribute("viewBox",[0,0,e.width,t].join(" ")),i.setAttribute("d",e.path),i.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),r.appendChild(i),r},a.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,n=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var r=e.getAttribute("data-val")||!0,i=e.getAttribute("data-attr"),u="true"===e.getAttribute("data-toggle"),a=s.select(e);if(u)i===n&&a.classed("active",!a.classed("active"));else{var f=null===i?i:o.nestedProperty(t,i).get();a.classed("active",f===r)}})},a.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},a.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plot.ly/",t.target="_blank",t.setAttribute("data-title","Produced with Plotly"),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(u.plotlylogo)),e.appendChild(t),e},a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},a.destroy=function(){o.removeElement(this.container.querySelector(".modebar"))},t.exports=i},{"../../../build/ploticon":2,"../../lib":657,d3:97}],606:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),s=e("../../lib/extend").extendFlat,o=e("./button_attributes");o=s(o,{_isLinkedToArray:"button"}),t.exports={visible:{valType:"boolean"},buttons:o,x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom"},font:s({},r,{}),bgcolor:{valType:"color",dflt:i.lightLine},activecolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.defaultLine},borderwidth:{valType:"number",min:0,dflt:0}}},{"../../lib/extend":650,"../../plots/font_attributes":709,"../color/attributes":556,"./button_attributes":607}],607:[function(e,t,n){"use strict";t.exports={step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward"},count:{valType:"number",min:0,dflt:1},label:{valType:"string"}}},{}],608:[function(e,t,n){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],609:[function(e,t,n){"use strict";function r(e,t,n){function r(e,t){return s.coerce(i,o,a,e,t)}for(var i,o,u=e.buttons||[],f=t.buttons=[],c=0;c<u.length;c++)if(i=u[c],o={},s.isPlainObject(i)){var h=r("step");"all"!==h&&(!n||"gregorian"===n||"month"!==h&&"year"!==h?r("stepmode"):o.stepmode="backward",r("count")),r("label"),o._index=c,f.push(o)}return f}function i(e,t,n){for(var r=n.filter(function(n){return t[n].anchor===e._id}),i=0,s=0;s<r.length;s++){var o=t[r[s]].domain;o&&(i=Math.max(o[1],i))}return[e.domain[0],i+f.yPad]}var s=e("../../lib"),o=e("../color"),u=e("./attributes"),a=e("./button_attributes"),f=e("./constants");t.exports=function(e,t,n,a,l){function c(e,t){return s.coerce(h,p,u,e,t)}var h=e.rangeselector||{},p=t.rangeselector={},d=r(h,p,l),v=c("visible",d.length>0);if(v){var m=i(t,n,a);c("x",m[0]),c("y",m[1]),s.noneOrAll(e,t,["x","y"]),c("xanchor"),c("yanchor"),s.coerceFont(c,"font",n.font);var g=c("bgcolor");c("activecolor",o.contrast(g,f.lightAmount,f.darkAmount)),c("bordercolor"),c("borderwidth")}}},{"../../lib":657,"../color":557,"./attributes":606,"./button_attributes":607,"./constants":608}],610:[function(e,t,n){"use strict";function r(e){for(var t=g.list(e,"x",!0),n=[],r=0;r<t.length;r++){var i=t[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}function i(e){return e._id}function s(e,t,n){if("all"===t.step)return e.autorange===!0;var r=Object.keys(n);return e.range[0]===n[r[0]]&&e.range[1]===n[r[1]]}function o(e,t,n){var r=e.selectAll("rect").data([0]);r.enter().append("rect").classed("selector-rect",!0),r.attr("shape-rendering","crispEdges"),r.attr({rx:b.rx,ry:b.ry}),r.call(d.stroke,t.bordercolor).call(d.fill,u(t,n)).style("stroke-width",t.borderwidth+"px")}function u(e,t){return t.isActive||t.isHovered?e.activecolor:e.bgcolor}function a(e,t,n){function r(e){m.convertToTspans(e)}var i=e.selectAll("text").data([0]);i.enter().append("text").classed("selector-text",!0).classed("user-select-none",!0),i.attr("text-anchor","middle"),i.call(v.font,t.font).text(f(n)).call(r)}function f(e){return e.label?e.label:"all"===e.step?"all":e.count+e.step.charAt(0)}function l(e,t,n,r){n.width=0,n.height=0;var i=n.borderwidth;t.each(function(){var e=c.select(this),t=e.select(".selector-text"),r=t.selectAll("tspan"),i=1.3*n.font.size,s=r[0].length||1,o=Math.max(i*s,16)+3;n.height=Math.max(n.height,o)}),t.each(function(){var e=c.select(this),t=e.select(".selector-rect"),r=e.select(".selector-text"),s=r.selectAll("tspan"),o=r.node()&&v.bBox(r.node()).width,u=1.3*n.font.size,a=s[0].length||1,f=Math.max(o+10,b.minButtonWidth);e.attr("transform","translate("+(i+n.width)+","+i+")"),t.attr({x:0,y:0,width:f,height:n.height});var l={x:f/2,y:n.height/2-(a-1)*u/2+3};r.attr(l),s.attr(l),n.width+=f+5}),t.selectAll("rect").attr("height",n.height);var s=e._fullLayout._size;n.lx=s.l+s.w*n.x,n.ly=s.t+s.h*(1-n.y);var o="left";y.isRightAnchor(n)&&(n.lx-=n.width,o="right"),y.isCenterAnchor(n)&&(n.lx-=n.width/2,o="center");var u="top";y.isBottomAnchor(n)&&(n.ly-=n.height,u="bottom"),y.isMiddleAnchor(n)&&(n.ly-=n.height/2,u="middle"),n.width=Math.ceil(n.width),n.height=Math.ceil(n.height),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),p.autoMargin(e,r+"-range-selector",{x:n.x,y:n.y,l:n.width*({right:1,center:.5}[o]||0),r:n.width*({left:1,center:.5}[o]||0),b:n.height*({top:1,middle:.5}[u]||0),t:n.height*({bottom:1,middle:.5}[u]||0)})}var c=e("d3"),h=e("../../plotly"),p=e("../../plots/plots"),d=e("../color"),v=e("../drawing"),m=e("../../lib/svg_text_utils"),g=e("../../plots/cartesian/axis_ids"),y=e("../legend/anchor_utils"),b=e("./constants"),w=e("./get_update_object");t.exports=function(e){var t=e._fullLayout,n=t._infolayer.selectAll(".rangeselector").data(r(e),i);n.enter().append("g").classed("rangeselector",!0),n.exit().remove(),n.style({cursor:"pointer","pointer-events":"all"}),n.each(function(t){var n=c.select(this),r=t,i=r.rangeselector,u=n.selectAll("g.button").data(i.buttons);u.enter().append("g").classed("button",!0),u.exit().remove(),u.each(function(t){var n=c.select(this),u=w(r,t);t.isActive=s(r,t,u),n.call(o,i,t),n.call(a,i,t),n.on("click",function(){e._dragged||h.relayout(e,u)}),n.on("mouseover",function(){t.isHovered=!0,n.call(o,i,t)}),n.on("mouseout",function(){t.isHovered=!1,n.call(o,i,t)})}),l(e,u,i,r._name),n.attr("transform","translate("+i.lx+","+i.ly+")")})}},{"../../lib/svg_text_utils":672,"../../plotly":684,"../../plots/cartesian/axis_ids":692,"../../plots/plots":749,"../color":557,"../drawing":580,"../legend/anchor_utils":593,"./constants":608,"./get_update_object":611,d3:97}],611:[function(e,t,n){"use strict";function r(e,t){var n,r=e.range,s=new Date(e.r2l(r[1])),o=t.step,u=t.count;switch(t.stepmode){case"backward":n=e.l2r(+i.time[o].utc.offset(s,-u));break;case"todate":var a=i.time[o].utc.offset(s,-u);n=e.l2r(+i.time[o].utc.ceil(a))}var f=r[1];return[n,f]}var i=e("d3");t.exports=function(e,t){var n=e._name,i={};if("all"===t.step)i[n+".autorange"]=!0;else{var s=r(e,t);i[n+".range[0]"]=s[0],i[n+".range[1]"]=s[1]}return i}},{d3:97}],612:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{layout:{"xaxis.rangeselector":e("./attributes")}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":606,"./defaults":609,"./draw":610}],613:[function(e,t,n){"use strict";var r=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:r.background},bordercolor:{valType:"color",dflt:r.defaultLine},borderwidth:{valType:"integer",dflt:0,min:0},range:{valType:"info_array",items:[{valType:"any"},{valType:"any"}]},thickness:{valType:"number",dflt:.15,min:0,max:1},visible:{valType:"boolean",dflt:!0}}},{"../color/attributes":556}],614:[function(e,t,n){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskColor:"rgba(0,0,0,0.4)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,grabAreaMinOffset:-6,grabAreaMaxOffset:-2,handleWidth:2,handleRadius:1,handleFill:"#fff",handleStroke:"#666"}},{}],615:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes");t.exports=function(e,t,n,s){function o(e,t){return r.coerce(u,f,i,e,t)}if(e[n].rangeslider){r.isPlainObject(e[n].rangeslider)||(e[n].rangeslider={});var u=e[n].rangeslider,a=t[n],f=a.rangeslider={};if(o("bgcolor",t.plot_bgcolor),o("bordercolor"),o("borderwidth"),o("thickness"),o("visible"),o("range"),f.range&&!a.autorange){var l=f.range,c=a.range;l[0]=a.l2r(Math.min(a.r2l(l[0]),a.r2l(c[0]))),l[1]=a.l2r(Math.max(a.r2l(l[1]),a.r2l(c[1])))}else a._needsExpand=!0;f.visible&&s.forEach(function(e){var n=t[e]||{};n.fixedrange=!0,t[e]=n}),f._input=u}}},{"../../lib":657,"./attributes":613}],616:[function(e,t,n){"use strict";function r(e){return e.xaxis&&e.xaxis[N.name]&&e.xaxis[N.name].visible?e._has("gl2d")?[]:[e.xaxis]:[]}function i(e,t,n,r){var i=e.select("rect."+N.slideBoxClassName).node(),o=e.select("rect."+N.grabAreaMinClassName).node(),u=e.select("rect."+N.grabAreaMaxClassName).node();e.on("mousedown",function(){function a(a){var f,l,y,b=+a.clientX-h;switch(c){case i:y="ew-resize",f=d+b,l=m+b;break;case o:y="col-resize",f=d+b,l=m;break;case u:y="col-resize",f=d,l=m+b;break;default:y="ew-resize",f=p,l=p+b}if(l<f){var w=l;l=f,f=w}r._pixelMin=f,r._pixelMax=l,T(v.select(g),y),s(e,t,n,r)}function f(){g.removeEventListener("mousemove",a),g.removeEventListener("mouseup",f),y.removeElement(g)}var l=v.event,c=l.target,h=l.clientX,p=h-e.node().getBoundingClientRect().left,d=r.d2p(n._rl[0]),m=r.d2p(n._rl[1]),g=x.coverSlip();g.addEventListener("mousemove",a),g.addEventListener("mouseup",f)})}function s(e,t,n,r){function i(e){return n.l2r(y.constrain(e,r._rl[0],r._rl[1]))}var s=i(r.p2d(r._pixelMin)),o=i(r.p2d(r._pixelMax));window.requestAnimationFrame(function(){m.relayout(t,"xaxis.range",[s,o])})}function o(e,t,n,r){function i(e){return y.constrain(e,0,r._width)}var s=i(r.d2p(n._rl[0])),o=i(r.d2p(n._rl[1]));e.select("rect."+N.slideBoxClassName).attr("x",s).attr("width",o-s),e.select("rect."+N.maskMinClassName).attr("width",s),e.select("rect."+N.maskMaxClassName).attr("x",o).attr("width",r._width-o),e.select("g."+N.grabberMinClassName).attr("transform","translate("+(s-N.handleWidth-1)+",0)"),e.select("g."+N.grabberMaxClassName).attr("transform","translate("+o+",0)")}function u(e,t,n,r){var i=e.selectAll("rect."+N.bgClassName).data([0]);i.enter().append("rect").classed(N.bgClassName,!0).attr({x:0,y:0,"shape-rendering":"crispEdges"});var s=r.borderwidth%2===0?r.borderwidth:r.borderwidth-1,o=-r._offsetShift;i.attr({width:r._width+s,height:r._height+s,transform:"translate("+o+","+o+")",fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":r.borderwidth})}function a(e,t,n,r){var i=t._fullLayout,s=i._topdefs.selectAll("#"+r._clipId).data([0]);s.enter().append("clipPath").attr("id",r._clipId).append("rect").attr({x:0,y:0}),s.select("rect").attr({width:r._width,height:r._height})}function f(e,t,n,r){var i=S.getSubplots(t,n),s=t.calcdata,o=e.selectAll("g."+N.rangePlotClassName).data(i,y.identity);o.enter().append("g").attr("class",function(e){return N.rangePlotClassName+" "+e}).call(b.setClipUrl,r._clipId),o.order(),o.exit().remove();var u;o.each(function(e,i){var o=v.select(this),a=0===i,f=S.getFromId(t,e,"y"),c=f._name,h={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:r.range.slice(),calendar:n.calendar},width:r._width,height:r._height,margin:{t:0,b:0,l:0,r:0}}};h.layout[c]={domain:[0,1],range:f.range.slice(),calendar:f.calendar},g.supplyDefaults(h);var p=h._fullLayout.xaxis,d=h._fullLayout[c],m={id:e,plotgroup:o,xaxis:p,yaxis:d};a?u=m:(m.mainplot="xy",m.mainplotinfo=u),E.rangePlot(t,m,l(s,e)),a&&m.bg.call(w.fill,r.bgcolor)})}function l(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],s=i[0].trace;s.xaxis+s.yaxis===t&&n.push(i)}return n}function c(e,t,n,r){var i=e.selectAll("rect."+N.maskMinClassName).data([0]);i.enter().append("rect").classed(N.maskMinClassName,!0).attr({x:0,y:0}),i.attr({height:r._height,fill:N.maskColor});var s=e.selectAll("rect."+N.maskMaxClassName).data([0]);s.enter().append("rect").classed(N.maskMaxClassName,!0).attr("y",0),s.attr({height:r._height,fill:N.maskColor})}function h(e,t,n,r){var i=e.selectAll("rect."+N.slideBoxClassName).data([0]);i.enter().append("rect").classed(N.slideBoxClassName,!0).attr("y",0).attr("cursor",N.slideBoxCursor),i.attr({height:r._height,fill:N.slideBoxFill})}function p(e,t,n,r){var i=e.selectAll("g."+N.grabberMinClassName).data([0]);i.enter().append("g").classed(N.grabberMinClassName,!0);var s=e.selectAll("g."+N.grabberMaxClassName).data([0]);s.enter().append("g").classed(N.grabberMaxClassName,!0);var o={x:0,width:N.handleWidth,rx:N.handleRadius,fill:N.handleFill,stroke:N.handleStroke,"shape-rendering":"crispEdges"},u={y:r._height/4,height:r._height/2},a=i.selectAll("rect."+N.handleMinClassName).data([0]);a.enter().append("rect").classed(N.handleMinClassName,!0).attr(o),a.attr(u);var f=s.selectAll("rect."+N.handleMaxClassName).data([0]);f.enter().append("rect").classed(N.handleMaxClassName,!0).attr(o),f.attr(u);var l={width:N.grabAreaWidth,y:0,fill:N.grabAreaFill,cursor:N.grabAreaCursor},c=i.selectAll("rect."+N.grabAreaMinClassName).data([0]);c.enter().append("rect").classed(N.grabAreaMinClassName,!0).attr(l),c.attr({x:N.grabAreaMinOffset,height:r._height});var h=s.selectAll("rect."+N.grabAreaMaxClassName).data([0]);h.enter().append("rect").classed(N.grabAreaMaxClassName,!0).attr(l),h.attr({x:N.grabAreaMaxOffset,height:r._height})}function d(e){for(var t=e._fullLayout._pushmargin||{},n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];i.indexOf(N.name)!==-1&&g.autoMargin(e,i)}}var v=e("d3"),m=e("../../plotly"),g=e("../../plots/plots"),y=e("../../lib"),b=e("../drawing"),w=e("../color"),E=e("../../plots/cartesian"),S=e("../../plots/cartesian/axes"),x=e("../dragelement"),T=e("../../lib/setcursor"),N=e("./constants");t.exports=function(e){function t(e){return e._name}var n=e._fullLayout,s=r(n),l=n._infolayer.selectAll("g."+N.containerClassName).data(s,t);l.enter().append("g").classed(N.containerClassName,!0).attr("pointer-events","all"),l.exit().each(function(e){var t=v.select(this),r=e[N.name];t.remove(),n._topdefs.select("#"+r._clipId).remove()}),l.exit().size()&&d(e),0!==s.length&&l.each(function(t){var r=v.select(this),s=t[N.name];s.range||(s._input.range=s.range=S.getAutoRange(t));var l=n.margin,d=n._size,m=t.domain;s._id=N.name+t._id,s._clipId=s._id+"-"+n._uid,s._width=d.w*(m[1]-m[0]),s._height=(n.height-l.b-l.t)*s.thickness,s._offsetShift=Math.floor(s.borderwidth/2);var y=l.l+d.w*m[0],b=n.height-s._height-l.b;r.attr("transform","translate("+y+","+b+")");var w=t.r2l(s.range[0]),E=t.r2l(s.range[1]),x=E-w;s.p2d=function(e){return e/s._width*x+w},s.d2p=function(e){return(e-w)/x*s._width},s._rl=[w,E],r.call(u,e,t,s).call(a,e,t,s).call(f,e,t,s).call(c,e,t,s).call(h,e,t,s).call(p,e,t,s),i(r,e,t,s),o(r,e,t,s);var T=t._boundingBox?t._boundingBox.height:0;g.autoMargin(e,s._id,{x:0,y:0,l:0,r:0,t:0,b:s._height+n.margin.b+T,pad:15+2*s._offsetShift})})}},{"../../lib":657,"../../lib/setcursor":668,"../../plotly":684,"../../plots/cartesian":697,"../../plots/cartesian/axes":689,"../../plots/plots":749,"../color":557,"../dragelement":578,"../drawing":580,"./constants":614,d3:97}],617:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"rangeslider",schema:{layout:{"xaxis.rangeslider":e("./attributes")}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":613,"./defaults":615,"./draw":616}],618:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),i=e("../../traces/scatter/attributes"),s=e("../../lib/extend").extendFlat,o=i.line;t.exports={_isLinkedToArray:"shape",visible:{valType:"boolean",dflt:!0},type:{valType:"enumerated",values:["circle","rect","path","line"]},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},xref:s({},r.xref,{}),x0:{valType:"any"},x1:{valType:"any"},yref:s({},r.yref,{}),y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string"},opacity:{valType:"number",min:0,max:1,dflt:1},line:{color:o.color,width:o.width,dash:o.dash},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"}}},{"../../lib/extend":650,"../../traces/scatter/attributes":881,"../annotations/attributes":548}],619:[function(e,t,n){"use strict";function r(e,t,n,r,i){var s="category"===e.type?Number:e.d2c;if(void 0!==t)return[s(t),s(n)];if(r){var a,f,l,c,h,p=1/0,d=-1/0,v=r.match(o.segmentRE);for("date"===e.type&&(s=u.decodeDate(s)),a=0;a<v.length;a++)f=v[a],l=i[f.charAt(0)].drawn,void 0!==l&&(c=v[a].substr(1).match(o.paramRE),!c||c.length<l||(h=s(c[l]),h<p&&(p=h),h>d&&(d=h)));return d>=p?[p,d]:void 0}}var i=e("../../lib"),s=e("../../plots/cartesian/axes"),o=e("./constants"),u=e("./helpers");t.exports=function(e){var t=e._fullLayout,n=i.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var u=0;u<n.length;u++){var f,l,c=n[u],h=c.line.width/2;"paper"!==c.xref&&(f=s.getFromId(e,c.xref),l=r(f,c.x0,c.x1,c.path,o.paramIsX),l&&s.expand(f,l,{ppad:h})),"paper"!==c.yref&&(f=s.getFromId(e,c.yref),l=r(f,c.y0,c.y1,c.path,o.paramIsY),l&&s.expand(f,l,{ppad:h}))}}},{"../../lib":657,"../../plots/cartesian/axes":689,"./constants":620,"./helpers":623}],620:[function(e,t,n){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],621:[function(e,t,n){"use strict";var r=e("../../plots/array_container_defaults"),i=e("./shape_defaults");t.exports=function(e,t){var n={name:"shapes",handleItemDefaults:i};r(e,t,n)}},{"../../plots/array_container_defaults":686,"./shape_defaults":625}],622:[function(e,t,n){"use strict";function r(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeSubplotLayer.selectAll("path").remove();for(var n=0;n<t.shapes.length;n++)t.shapes[n].visible&&i(e,n)}function i(e,t,n,r){if(!g(t)||t===-1){if(!t&&Array.isArray(r))return void s(e,r);if("remove"===r)return void o(e);if(n&&"add"!==r)return void u(e,n,r);t=e._fullLayout.shapes.length,e._fullLayout.shapes.push({})}if(!n&&r){if("remove"===r)return void a(e,t);("add"===r||b.isPlainObject(r))&&f(e,t,r)}l(e,t,n,r)}function s(e,t){e.layout.shapes=t,L(e.layout,e._fullLayout),r(e)}function o(e){delete e.layout.shapes,e._fullLayout.shapes=[],r(e)}function u(e,t,n){for(var r=0;r<e._fullLayout.shapes.length;r++)i(e,r,t,n)}function a(e,t){h(e,t).selectAll('[data-index="'+t+'"]').remove(),e._fullLayout.shapes.splice(t,1),e.layout.shapes.splice(t,1);for(var n=t;n<e._fullLayout.shapes.length;n++)h(e,n).selectAll('[data-index="'+(n+1)+'"]').attr("data-index",n),i(e,n)}function f(e,t,n){e._fullLayout.shapes.splice(t,0,{});var r=b.isPlainObject(n)?b.extendFlat({},n):{text:"New text"};e.layout.shapes?e.layout.shapes.splice(t,0,r):e.layout.shapes=[r];for(var s=e._fullLayout.shapes.length-1;s>t;s--)h(e,s).selectAll('[data-index="'+(s-1)+'"]').attr("data-index",s),i(e,s)}function l(e,t,n,r){function i(n){var r={"data-index":t,"fill-rule":"evenodd",d:d(e,A)},i=A.line.width?A.line.color:"rgba(0,0,0,0)",s=n.append("path").attr(r).style("opacity",A.opacity).call(E.stroke,i).call(E.fill,A.fillcolor).call(S.dashLine,A.line.dash,A.line.width);O&&s.call(S.setClipUrl,"clip"+e._fullLayout._uid+O),e._context.editable&&c(e,s,A,t)}var s,o;h(e,t).selectAll('[data-index="'+t+'"]').remove();var u=e.layout.shapes[t];if(u){var a={};"string"==typeof n&&n?a[n]=r:b.isPlainObject(n)&&(a=n);var f=Object.keys(a);for(s=0;s<f.length;s++){var l=f[s];b.nestedProperty(u,l).set(a[l])}if(u.visible!==!1){var v={xref:u.xref,yref:u.yref},m=["x0","x1","y0","y1"];for(s=0;s<4;s++){var g=m[s];if(void 0===a[g]&&void 0!==u[g]){var y,x=g.charAt(0),T=w.getFromId(e,w.coerceRef(v,{},e,x,"","paper")),N=w.getFromId(e,w.coerceRef(u,{},e,x,"","paper")),L=u[g];void 0!==a[x+"ref"]&&(T?(y=C.shapePositionToRange(T)(L),L=T.r2fraction(y)):L=(L-N.domain[0])/(N.domain[1]-N.domain[0]),N?(y=N.fraction2r(L),L=C.rangeToShapePosition(N)(y)):L=T.domain[0]+L*(T.domain[1]-T.domain[0])),u[g]=L}}var A={};k(u,A,e._fullLayout),e._fullLayout.shapes[t]=A;var O;if("below"!==A.layer)O=(A.xref+A.yref).replace(/paper/g,""),i(e._fullLayout._shapeUpperLayer);else if("paper"===A.xref&&"paper"===A.yref)O="",i(e._fullLayout._shapeLowerLayer);else{var M,D=e._fullLayout._plots||{},P=Object.keys(D);for(s=0,o=P.length;s<o;s++)M=D[P[s]],O=P[s],p(e,A,M)&&i(M.shapelayer)}}}}function c(e,t,n,r){function i(e){var n=G.right-G.left,r=G.bottom-G.top,i=e.clientX-G.left,s=e.clientY-G.top,o=n>J&&r>K&&!e.shiftKey?x.getCursor(i/n,1-s/r):"move";T(t,o),$=o.split("-")[0]}function s(t){R=w.getFromId(e,n.xref),U=w.getFromId(e,n.yref),z=C.getDataToPixel(e,R),W=C.getDataToPixel(e,U,!0),X=C.getPixelToData(e,R),V=C.getPixelToData(e,U,!0);var s="shapes["+r+"]";"path"===n.type?(I=n.path,q=s+".path"):(l=z(n.x0),c=W(n.y0),h=z(n.x1),p=W(n.y1),v=s+".x0",g=s+".y0",b=s+".x1",E=s+".y1"),l<h?(k=l,D=s+".x0",j="x0",L=h,P=s+".x1",F="x1"):(k=h,D=s+".x1",j="x1",L=l,P=s+".x0",F="x0"),c<p?(S=c,O=s+".y0",H="y0",N=p,_=s+".y1",B="y1"):(S=p,O=s+".y1",H="y1",N=c,_=s+".y0",B="y0"),f={},i(t),Q.moveFn="move"===$?u:a}function o(n){T(t),n&&y.relayout(e,f)}function u(r,i){if("path"===n.type){var s=function(e){return X(z(e)+r)};R&&"date"===R.type&&(s=C.encodeDate(s));var o=function(e){return V(W(e)+i)};U&&"date"===U.type&&(o=C.encodeDate(o)),n.path=m(I,s,o),f[q]=n.path}else f[v]=n.x0=X(l+r),f[g]=n.y0=V(c+i),f[b]=n.x1=X(h+r),f[E]=n.y1=V(p+i);t.attr("d",d(e,n))}function a(r,i){if("path"===n.type){var s=function(e){return X(z(e)+r)};R&&"date"===R.type&&(s=C.encodeDate(s));var o=function(e){return V(W(e)+i)};U&&"date"===U.type&&(o=C.encodeDate(o)),n.path=m(I,s,o),f[q]=n.path}else{var u=~$.indexOf("n")?S+i:S,a=~$.indexOf("s")?N+i:N,l=~$.indexOf("w")?k+r:k,c=~$.indexOf("e")?L+r:L;a-u>K&&(f[O]=n[H]=V(u),f[_]=n[B]=V(a)),c-l>J&&(f[D]=n[j]=X(l),f[P]=n[F]=X(c))}t.attr("d",d(e,n))}var f,l,c,h,p,v,g,b,E,S,N,k,L,O,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J=10,K=10,Q={setCursor:i,element:t.node(),prepFn:s,doneFn:o},G=Q.element.getBoundingClientRect();x.init(Q)}function h(e,t){var n=e._fullLayout.shapes[t],r=e._fullLayout._shapeUpperLayer;return n?"below"===n.layer&&(r="paper"===n.xref&&"paper"===n.yref?e._fullLayout._shapeLowerLayer:e._fullLayout._shapeSubplotLayer):b.log("getShapeLayer: undefined shape: index",t),r}function p(e,t,n){var r=w.getFromId(e,n.id,"x")._id,i=w.getFromId(e,n.id,"y")._id,s="below"===t.layer,o=r===t.xref||i===t.yref,u=!!n.shapelayer;return s&&o&&u}function d(e,t){var n,r,i,s,o=t.type,u=w.getFromId(e,t.xref),a=w.getFromId(e,t.yref),f=e._fullLayout._size;if(u?(n=C.shapePositionToRange(u),r=function(e){return u._offset+u.r2p(n(e,!0))}):r=function(e){return f.l+f.w*e},a?(i=C.shapePositionToRange(a),s=function(e){return a._offset+a.r2p(i(e,!0))}):s=function(e){return f.t+f.h*(1-e)},"path"===o)return u&&"date"===u.type&&(r=C.decodeDate(r)),a&&"date"===a.type&&(s=C.decodeDate(s)),v(t.path,r,s);var l=r(t.x0),c=r(t.x1),h=s(t.y0),p=s(t.y1);if("line"===o)return"M"+l+","+h+"L"+c+","+p;if("rect"===o)return"M"+l+","+h+"H"+c+"V"+p+"H"+l+"Z";var d=(l+c)/2,m=(h+p)/2,g=Math.abs(d-l),y=Math.abs(m-h),b="A"+g+","+y,E=d+g+","+m,S=d+","+(m-y);return"M"+E+b+" 0 1,1 "+S+b+" 0 0,1 "+E+"Z"}function v(e,t,n){return e.replace(N.segmentRE,function(e){var r=0,i=e.charAt(0),s=N.paramIsX[i],o=N.paramIsY[i],u=N.numParams[i],a=e.substr(1).replace(N.paramRE,function(e){return s[r]?e=t(e):o[r]&&(e=n(e)),r++,r>u&&(e="X"),e});return r>u&&(a=a.replace(/[\s,]*X.*/,""),b.log("Ignoring extra params in segment "+e)),i+a})}function m(e,t,n){return e.replace(N.segmentRE,function(e){var r=0,i=e.charAt(0),s=N.paramIsX[i],o=N.paramIsY[i],u=N.numParams[i],a=e.substr(1).replace(N.paramRE,function(e){return r>=u?e:(s[r]?e=t(e):o[r]&&(e=n(e)),r++,e)});return i+a})}var g=e("fast-isnumeric"),y=e("../../plotly"),b=e("../../lib"),w=e("../../plots/cartesian/axes"),E=e("../color"),S=e("../drawing"),x=e("../dragelement"),T=e("../../lib/setcursor"),N=e("./constants"),C=e("./helpers"),k=e("./shape_defaults"),L=e("./defaults");t.exports={draw:r,drawOne:i}},{"../../lib":657,"../../lib/setcursor":668,"../../plotly":684,"../../plots/cartesian/axes":689,"../color":557,"../dragelement":578,"../drawing":580,"./constants":620,"./defaults":621,"./helpers":623,"./shape_defaults":625,"fast-isnumeric":106}],623:[function(e,t,n){"use strict";n.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},n.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},n.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}},n.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}},n.getDataToPixel=function(e,t,i){var s,o=e._fullLayout._size;if(t){var u=n.shapePositionToRange(t);s=function(e){return t._offset+t.r2p(u(e,!0))},"date"===t.type&&(s=n.decodeDate(s))}else s=i?function(e){return o.t+o.h*(1-e)}:function(e){return o.l+o.w*e};return s},n.getPixelToData=function(e,t,i){var s,o=e._fullLayout._size;if(t){var u=n.rangeToShapePosition(t);s=function(e){return u(t.p2r(e-t._offset))}}else s=i?function(e){return 1-(e-o.t)/o.h}:function(e){return(e-o.l)/o.w};return s}},{}],624:[function(e,t,n){"use strict";var r=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"./attributes":618,"./calc_autorange":619,"./defaults":621,"./draw":622}],625:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/axes"),s=e("./attributes"),o=e("./helpers");t.exports=function(e,t,n,u,f){function l(n,i){return r.coerce(e,t,s,n,i)}u=u||{},f=f||{};var c=l("visible",!f.itemIsNotPlainObject);if(!c)return t;l("layer"),l("opacity"),l("fillcolor"),l("line.color"),l("line.width"),l("line.dash");for(var h=e.path?"path":"rect",p=l("type",h),d=["x","y"],v=0;v<2;v++){var m=d[v],g={_fullLayout:n},y=i.coerceRef(e,t,g,m,"","paper");if("path"!==p){var b,w,E,S=.25,x=.75;"paper"!==y?(b=i.getFromId(g,y),E=o.rangeToShapePosition(b),w=o.shapePositionToRange(b)):w=E=r.identity;var T=m+"0",N=m+"1",C=e[T],k=e[N];e[T]=w(e[T],!0),e[N]=w(e[N],!0),i.coercePosition(t,g,l,y,T,S),i.coercePosition(t,g,l,y,N,x),t[T]=E(t[T]),t[N]=E(t[N]),e[T]=C,e[N]=k}}return"path"===p?l("path"):r.noneOrAll(e,t,["x0","x1","y0","y1"]),t}},{"../../lib":657,"../../plots/cartesian/axes":689,"./attributes":618,"./helpers":623}],626:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../../plots/pad_attributes"),s=e("../../lib/extend").extendFlat,o=e("../../lib/extend").extendDeep,u=e("../../plots/animation_attributes"),a=e("./constants"),f={_isLinkedToArray:"step",method:{valType:"enumerated",values:["restyle","relayout","animate","update"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"}};t.exports={_isLinkedToArray:"slider",visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:f,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o({},i,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:u.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:s({},r,{})},font:s({},r,{}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}},{"../../lib/extend":650,"../../plots/animation_attributes":685,"../../plots/font_attributes":709,"../../plots/pad_attributes":748,"./constants":627}],627:[function(e,t,n){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,fontSizeToHeight:1.3,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],628:[function(e,t,n){"use strict";function r(e,t,n){function r(n,r){return s.coerce(e,t,u,n,r)}var o=i(e,t),a=r("visible",o.length>0);if(a){r("active"),r("x"),r("y"),s.noneOrAll(e,t,["x","y"]),r("xanchor"),r("yanchor"),r("len"),r("lenmode"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),s.coerceFont(r,"font",n.font);var f=r("currentvalue.visible");f&&(r("currentvalue.xanchor"),r("currentvalue.prefix"),r("currentvalue.suffix"),r("currentvalue.offset"),s.coerceFont(r,"currentvalue.font",t.font)),r("transition.duration"),r("transition.easing"),r("bgcolor"),r("activebgcolor"),r("bordercolor"),r("borderwidth"),r("ticklen"),r("tickwidth"),r("tickcolor"),r("minorticklen")}}function i(e,t){function n(e,t){return s.coerce(r,i,l,e,t)}for(var r,i,o=e.steps||[],u=t.steps=[],a=0;a<o.length;a++)r=o[a],i={},s.isPlainObject(r)&&Array.isArray(r.args)&&(n("method"),n("args"),n("label","step-"+a),n("value",i.label),u.push(i));return u}var s=e("../../lib"),o=e("../../plots/array_container_defaults"),u=e("./attributes"),a=e("./constants"),f=a.name,l=u.steps;t.exports=function(e,t){var n={name:f,handleItemDefaults:r};o(e,t,n)}},{"../../lib":657,"../../plots/array_container_defaults":686,"./attributes":626,"./constants":627}],629:[function(e,t,n){"use strict";function r(e){for(var t=e[A.name],n=[],r=0;r<t.length;r++){var i=t[r];i.visible&&i.steps.length&&n.push(i)}return n}function i(e){return e._index}function s(e,t){var n=e._tester.selectAll("g."+A.labelGroupClass).data(t.steps);n.enter().append("g").classed(A.labelGroupClass,!0);var r=0,i=0;if(n.each(function(e){var n=S.select(this),s=f(n,{step:e},t),o=s.node()&&C.bBox(s.node()).width||0;i=s.node()&&C.bBox(s.node()).height||0,r=Math.max(r,o)}),n.remove(),t.inputAreaWidth=Math.max(A.railWidth,A.gripHeight),t.currentValueMaxWidth=0,t.currentValueHeight=0,t.currentValueTotalHeight=0,t.currentvalue.visible){var s=e._tester.append("g");n.each(function(e){var n=u(s,t,e.label),r=n.node()&&C.bBox(n.node())||{width:0,height:0};t.currentValueMaxWidth=Math.max(t.currentValueMaxWidth,Math.ceil(r.width)),t.currentValueHeight=Math.max(t.currentValueHeight,Math.ceil(r.height))}),t.currentValueTotalHeight=t.currentValueHeight+t.currentvalue.offset,s.remove()}var o=e._fullLayout._size;t.lx=o.l+o.w*t.x,t.ly=o.t+o.h*(1-t.y),"fraction"===t.lenmode?t.outerLength=Math.round(o.w*t.len):t.outerLength=t.len,t.lenPad=Math.round(.5*A.gripWidth),t.inputAreaStart=0,t.inputAreaLength=Math.round(t.outerLength-t.pad.l-t.pad.r);var a=t.inputAreaLength-2*A.stepInset,l=a/(t.steps.length-1),c=r+A.labelPadding;t.labelStride=Math.max(1,Math.ceil(c/l)),t.labelHeight=i,t.height=t.currentValueTotalHeight+A.tickOffset+t.ticklen+A.labelOffset+t.labelHeight+t.pad.t+t.pad.b;var h="left";L.isRightAnchor(t)&&(t.lx-=t.outerLength,h="right"),L.isCenterAnchor(t)&&(t.lx-=t.outerLength/2,h="center");var p="top";L.isBottomAnchor(t)&&(t.ly-=t.height,p="bottom"),L.isMiddleAnchor(t)&&(t.ly-=t.height/2,p="middle"),t.outerLength=Math.ceil(t.outerLength),t.height=Math.ceil(t.height),t.lx=Math.round(t.lx),t.ly=Math.round(t.ly),x.autoMargin(e,A.autoMarginIdRoot+t._index,{x:t.x,y:t.y,l:t.outerLength*({right:1,center:.5}[h]||0),r:t.outerLength*({left:1,center:.5}[h]||0),b:t.height*({top:1,middle:.5}[p]||0),t:t.height*({bottom:1,middle:.5}[p]||0)})}function o(e,t,n){n.active>=n.steps.length&&(n.active=0),t.call(u,n).call(w,n).call(l,n).call(d,n).call(b,e,n).call(a,e,n),T.setTranslate(t,n.lx+n.pad.l,n.ly+n.pad.t),t.call(m,n,n.active/(n.steps.length-1),!1),t.call(u,n)}function u(e,t,n){if(t.currentvalue.visible){var r,i,s=e.selectAll("text").data([0]);switch(t.currentvalue.xanchor){case"right":r=t.inputAreaLength-A.currentValueInset-t.currentValueMaxWidth,i="left";break;case"center":r=.5*t.inputAreaLength,i="middle";break;default:r=A.currentValueInset,i="left"}s.enter().append("text").classed(A.labelClass,!0).classed("user-select-none",!0).attr("text-anchor",i);var o=t.currentvalue.prefix?t.currentvalue.prefix:"";if("string"==typeof n)o+=n;else{var u=t.steps[t.active].label;o+=u}return t.currentvalue.suffix&&(o+=t.currentvalue.suffix),s.call(C.font,t.currentvalue.font).text(o).call(k.convertToTspans),T.setTranslate(s,r,t.currentValueHeight),s}}function a(e,t,n){var r=e.selectAll("rect."+A.gripRectClass).data([0]);r.enter().append("rect").classed(A.gripRectClass,!0).call(p,t,e,n).style("pointer-events","all"),r.attr({width:A.gripWidth,height:A.gripHeight,rx:A.gripRadius,ry:A.gripRadius}).call(N.stroke,n.bordercolor).call(N.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function f(e,t,n){var r=e.selectAll("text").data([0]);return r.enter().append("text").classed(A.labelClass,!0).classed("user-select-none",!0).attr("text-anchor","middle"),r.call(C.font,n.font).text(t.step.label).call(k.convertToTspans),r}function l(e,t){var n=e.selectAll("g."+A.labelsClass).data([0]);n.enter().append("g").classed(A.labelsClass,!0);var r=n.selectAll("g."+A.labelGroupClass).data(t.labelSteps);r.enter().append("g").classed(A.labelGroupClass,!0),r.exit().remove(),r.each(function(e){var n=S.select(this);n.call(f,e,t),T.setTranslate(n,g(t,e.fraction),A.tickOffset+t.ticklen+t.labelHeight+A.labelOffset+t.currentValueTotalHeight)})}function c(e,t,n,r,i){var s=Math.round(r*(n.steps.length-1));s!==n.active&&h(e,t,n,s,!0,i)}function h(e,t,n,r,i,s){var o=n.active;n._input.active=n.active=r;var a=n.steps[n.active];t.call(m,n,n.active/(n.steps.length-1),s),t.call(u,n),e.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:i,previousActive:o}),a&&a.method&&i&&(t._nextMethod?(t._nextMethod.step=a,t._nextMethod.doCallback=i,t._nextMethod.doTransition=s):(t._nextMethod={step:a,doCallback:i,doTransition:s},t._nextMethodRaf=window.requestAnimationFrame(function(){var n=t._nextMethod.step;n.method&&(x.executeAPICommand(e,n.method,n.args),t._nextMethod=null,t._nextMethodRaf=null)})))}function p(e,t,n){function r(){return n.data()[0]}var i=n.node(),s=S.select(t);e.on("mousedown",function(){var e=r();t.emit("plotly_sliderstart",{slider:e});var o=n.select("."+A.gripRectClass);S.event.stopPropagation(),S.event.preventDefault(),o.call(N.fill,e.activebgcolor);var u=y(e,S.mouse(i)[0]);c(t,n,e,u,!0),e._dragging=!0,s.on("mousemove",function(){var e=r(),s=y(e,S.mouse(i)[0]);c(t,n,e,s,!1)}),s.on("mouseup",function(){var e=r();e._dragging=!1,o.call(N.fill,e.bgcolor),s.on("mouseup",null),s.on("mousemove",null),t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function d(e,t){var n=e.selectAll("rect."+A.tickRectClass).data(t.steps);n.enter().append("rect").classed(A.tickRectClass,!0),n.exit().remove(),n.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),n.each(function(e,n){var r=n%t.labelStride===0,i=S.select(this);i.attr({height:r?t.ticklen:t.minorticklen}).call(N.fill,r?t.tickcolor:t.tickcolor),T.setTranslate(i,g(t,n/(t.steps.length-1))-.5*t.tickwidth,(r?A.tickOffset:A.minorTickOffset)+t.currentValueTotalHeight)})}function v(e){e.labelSteps=[];for(var t=0,n=e.steps.length,r=t;r<n;r+=e.labelStride)e.labelSteps.push({fraction:r/(n-1),step:e.steps[r]})}function m(e,t,n,r){var i=e.select("rect."+A.gripRectClass),s=g(t,n);if(!t._invokingCommand){var o=i;r&&t.transition.duration>0&&(o=o.transition().duration(t.transition.duration).ease(t.transition.easing)),o.attr("transform","translate("+(s-.5*A.gripWidth)+","+t.currentValueTotalHeight+")")}}function g(e,t){return e.inputAreaStart+A.stepInset+(e.inputAreaLength-2*A.stepInset)*Math.min(1,Math.max(0,t))}function y(e,t){return Math.min(1,Math.max(0,(t-A.stepInset-e.inputAreaStart)/(e.inputAreaLength-2*A.stepInset-2*e.inputAreaStart)))}function b(e,t,n){var r=e.selectAll("rect."+A.railTouchRectClass).data([0]);r.enter().append("rect").classed(A.railTouchRectClass,!0).call(p,t,e,n).style("pointer-events","all"),r.attr({width:n.inputAreaLength,height:Math.max(n.inputAreaWidth,A.tickOffset+n.ticklen+n.labelHeight)}).call(N.fill,n.bgcolor).attr("opacity",0),T.setTranslate(r,0,n.currentValueTotalHeight)}function w(e,t){var n=e.selectAll("rect."+A.railRectClass).data([0]);n.enter().append("rect").classed(A.railRectClass,!0);var r=t.inputAreaLength-2*A.railInset;n.attr({width:r,height:A.railWidth,rx:A.railRadius,ry:A.railRadius,"shape-rendering":"crispEdges"}).call(N.stroke,t.bordercolor).call(N.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),T.setTranslate(n,A.railInset,.5*(t.inputAreaWidth-A.railWidth)+t.currentValueTotalHeight)}function E(e){for(var t=e._fullLayout._pushmargin||{},n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];i.indexOf(A.autoMarginIdRoot)!==-1&&x.autoMargin(e,i)}}var S=e("d3"),x=e("../../plots/plots"),T=e("../../lib"),N=e("../color"),C=e("../drawing"),k=e("../../lib/svg_text_utils"),L=e("../legend/anchor_utils"),A=e("./constants");t.exports=function(e){var t=e._fullLayout,n=r(t),u=t._infolayer.selectAll("g."+A.containerClassName).data(n.length>0?[0]:[]);if(u.enter().append("g").classed(A.containerClassName,!0).style("cursor","ew-resize"),u.exit().remove(),u.exit().size()&&E(e),0!==n.length){var a=u.selectAll("g."+A.groupClassName).data(n,i);a.enter().append("g").classed(A.groupClassName,!0),a.exit().each(function(t){S.select(this).remove(),t._commandObserver.remove(),delete t._commandObserver,x.autoMargin(e,A.autoMarginIdRoot+t._index)});for(var f=0;f<n.length;f++){var l=n[f];s(e,l)}a.each(function(t){if(!(t.steps.length<2)){var n=S.select(this);v(t),x.manageCommandObserver(e,t,t.steps,function(t){var r=n.data()[0];r.active!==t.index&&(r._dragging||h(e,n,r,t.index,!1,!0))}),o(e,S.select(this),t)}})}}},{"../../lib":657,"../../lib/svg_text_utils":672,"../../plots/plots":749,"../color":557,"../drawing":580,"../legend/anchor_utils":593,"./constants":627,d3:97}],630:[function(e,t,n){"use strict";var r=e("./constants");t.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":626,"./constants":627,"./defaults":628,"./draw":629}],631:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),s=e("../../plotly"),o=e("../../plots/plots"),u=e("../../lib"),a=e("../drawing"),f=e("../color"),l=e("../../lib/svg_text_utils"),c=t.exports={};c.draw=function(e,t,n){function c(e){u.syncOrAsync([h,p],e)}function h(t){return t.attr("transform",E?"rotate("+[E.rotate,w.x,w.y]+") translate(0, "+E.offset+")":null),t.style({"font-family":T,"font-size":r.round(N,2)+"px",fill:f.rgb(C),opacity:k*f.opacity(C),"font-weight":o.fontWeight}).attr(w).call(l.convertToTspans).attr(w),t.selectAll("tspan.line").attr(w),o.previousPromises(e)}function p(e){var t=r.select(e.node().parentNode);if(b&&b.selection&&b.side&&A){t.attr("transform",null);var n=0,s={left:"right",right:"left",top:"bottom",bottom:"top"}[b.side],o=["left","top"].indexOf(b.side)!==-1?-1:1,f=i(b.pad)?b.pad:2,l=a.bBox(t.node()),c={left:0,top:0,right:x.width,bottom:x.height},h=b.maxShift||(c[b.side]-l[b.side])*("left"===b.side||"top"===b.side?-1:1);if(h<0?n=h:(l.left-=b.offsetLeft,l.right-=b.offsetLeft,l.top-=b.offsetTop,l.bottom-=b.offsetTop,b.selection.each(function(){var e=a.bBox(this);u.bBoxIntersect(l,e,f)&&(n=Math.max(n,o*(e[b.side]-l[s])+f))}),n=Math.min(h,n)),n>0||h<0){var p={left:[-n,0],right:[n,0],top:[0,-n],bottom:[0,n]}[b.side];t.attr("transform","translate("+p+")")}}}function d(){k=0,L=!0,A=M,x._infolayer.select("."+t).attr({"data-unformatted":A}).text(A).on("mouseover.opacity",function(){r.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(1e3).style("opacity",0)})}var v=n.propContainer,m=n.propName,g=n.traceIndex,y=n.dfltName,b=n.avoid||{},w=n.attributes,E=n.transform,S=n.containerGroup,x=e._fullLayout,T=v.titlefont.family,N=v.titlefont.size,C=v.titlefont.color,k=1,L=!1,A=v.title.trim();""===A&&(k=0),A.match(/Click to enter .+ title/)&&(k=.2,L=!0),S||(S=x._infolayer.selectAll(".g-"+t).data([0]),S.enter().append("g").classed("g-"+t,!0));var O=S.selectAll("text").data([0]);O.enter().append("text"),O.text(A).attr("class",t),O.attr({"data-unformatted":A}).call(c);var M="Click to enter "+y+" title";e._context.editable?(A||d(),O.call(l.makeEditable).on("edit",function(t){void 0!==g?s.restyle(e,m,t,g):s.relayout(e,m,t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(c)}).on("input",function(e){this.text(e||" ").attr(w).selectAll("tspan.line").attr(w)})):A&&!A.match(/Click to enter .+ title/)||O.remove(),O.classed("js-placeholder",L)}},{"../../lib":657,"../../lib/svg_text_utils":672,"../../plotly":684,"../../plots/plots":749,"../color":557,"../drawing":580,d3:97,"fast-isnumeric":106}],632:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),s=e("../../lib/extend").extendFlat,o=e("../../plots/pad_attributes"),u={_isLinkedToArray:"button",method:{valType:"enumerated",values:["restyle","relayout","animate","update"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""}};t.exports={_isLinkedToArray:"updatemenu",visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:u,x:{valType:"number",min:-2,max:3,dflt:-0.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:s({},o,{}),font:s({},r,{}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.borderLine},borderwidth:{valType:"number",min:0,dflt:1}}},{"../../lib/extend":650,"../../plots/font_attributes":709,"../../plots/pad_attributes":748,"../color/attributes":556}],633:[function(e,t,n){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,fontSizeToHeight:1.3,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF"}},{}],634:[function(e,t,n){"use strict";function r(e,t,n){function r(n,r){return s.coerce(e,t,u,n,r)}var o=i(e,t),a=r("visible",o.length>0);a&&(r("active"),r("direction"),r("type"),r("showactive"),r("x"),r("y"),s.noneOrAll(e,t,["x","y"]),r("xanchor"),r("yanchor"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),s.coerceFont(r,"font",n.font),r("bgcolor",n.paper_bgcolor),r("bordercolor"),r("borderwidth"))}function i(e,t){function n(e,t){return s.coerce(r,i,l,e,t)}for(var r,i,o=e.buttons||[],u=t.buttons=[],a=0;a<o.length;a++)r=o[a],i={},s.isPlainObject(r)&&Array.isArray(r.args)&&(n("method"),n("args"),n("label"),i._index=a,u.push(i));return u}var s=e("../../lib"),o=e("../../plots/array_container_defaults"),u=e("./attributes"),a=e("./constants"),f=a.name,l=u.buttons;t.exports=function(e,t){var n={name:f,handleItemDefaults:r};o(e,t,n)}},{"../../lib":657,"../../plots/array_container_defaults":686,"./attributes":632,"./constants":633}],635:[function(e,t,n){"use strict";function r(e){for(var t=e[C.name],n=[],r=0;r<t.length;r++){var i=t[r];i.visible&&n.push(i)}return n}function i(e){return e._index}function s(e,t){var n=+e.attr(C.menuIndexAttrName);return n===t._index}function o(e,t,n,r){var i=t.selectAll("g."+C.headerClassName).data([0]);i.enter().append("g").classed(C.headerClassName,!0).style("pointer-events","all");var o=r.active,a=r.buttons[o]||C.blankHeaderOpts,l={y:r.pad.t,yPad:0,x:r.pad.l,xPad:0,index:0},c={width:r.headerWidth,height:r.headerHeight};i.call(f,r,a).call(m,r,l,c);var h=t.selectAll("text."+C.headerArrowClassName).data([0]);h.enter().append("text").classed(C.headerArrowClassName,!0).classed("user-select-none",!0).attr("text-anchor","end").call(x.font,r.font).text(""),h.attr({x:r.headerWidth-C.arrowOffsetX+r.pad.l,y:r.headerHeight/2+C.textOffsetY+r.pad.t}),i.on("click",function(){n.call(g),n.attr(C.menuIndexAttrName,s(n,r)?"-1":String(r._index)),u(e,t,n,r)}),i.on("mouseover",function(){i.call(p)}),i.on("mouseout",function(){i.call(d,r)}),E.setTranslate(t,r.lx,r.ly)}function u(e,t,n,r){n||(n=t,n.attr("pointer-events","all"));var i="-1"!==n.attr(C.menuIndexAttrName)||"buttons"===r.type?r.buttons:[],s="dropdown"===r.type?C.dropdownButtonClassName:C.buttonClassName,o=n.selectAll("g."+s).data(i),u=o.enter().append("g").classed(s,!0),l=o.exit();"dropdown"===r.type?(u.attr("opacity","0").transition().attr("opacity","1"),l.transition().attr("opacity","0").remove()):l.remove();var c=0,v=0,g=["up","down"].indexOf(r.direction)!==-1;"dropdown"===r.type&&(g?v=r.headerHeight+C.gapButtonHeader:c=r.headerWidth+C.gapButtonHeader),"dropdown"===r.type&&"up"===r.direction&&(v=-C.gapButtonHeader+C.gapButton-r.openHeight),"dropdown"===r.type&&"left"===r.direction&&(c=-C.gapButtonHeader+C.gapButton-r.openWidth);var y={x:c+r.pad.l,y:v+r.pad.t,yPad:C.gapButton,xPad:C.gapButton,index:0};o.each(function(i,s){var u=b.select(this);u.call(f,r,i).call(m,r,y),u.on("click",function(){a(e,r,i,t,n,s),w.executeAPICommand(e,i.method,i.args),e.emit("plotly_buttonclicked",{menu:r,button:i,active:r.active})}),u.on("mouseover",function(){u.call(p)}),u.on("mouseout",function(){u.call(d,r),o.call(h,r)})}),o.call(h,r),E.setTranslate(n,r.lx,r.ly)}function a(e,t,n,r,i,s,a){t._input.active=t.active=s,"dropdown"===t.type&&(i.attr(C.menuIndexAttrName,"-1"),o(e,r,i,t)),a&&"buttons"!==t.type||u(e,r,i,t)}function f(e,t,n){e.call(l,t).call(c,t,n)}function l(e,t){var n=e.selectAll("rect").data([0]);n.enter().append("rect").classed(C.itemRectClassName,!0).attr({rx:C.rx,ry:C.ry,"shape-rendering":"crispEdges"}),n.call(S.stroke,t.bordercolor).call(S.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function c(e,t,n){var r=e.selectAll("text").data([0]);r.enter().append("text").classed(C.itemTextClassName,!0).classed("user-select-none",!0).attr("text-anchor","start"),r.call(x.font,t.font).text(n.label).call(T.convertToTspans)}function h(e,t){var n=t.active;e.each(function(e,r){var i=b.select(this);r===n&&t.showactive&&i.select("rect."+C.itemRectClassName).call(S.fill,C.activeColor)})}function p(e){e.select("rect."+C.itemRectClassName).call(S.fill,C.hoverColor)}function d(e,t){e.select("rect."+C.itemRectClassName).call(S.fill,t.bgcolor)}function v(e,t){t.width1=0,t.height1=0,t.heights=[],t.widths=[],t.totalWidth=0,t.totalHeight=0,t.openWidth=0,t.openHeight=0,t.lx=0,t.ly=0;var n=e._tester.selectAll("g."+C.dropdownButtonClassName).data(t.buttons);n.enter().append("g").classed(C.dropdownButtonClassName,!0);var r=["up","down"].indexOf(t.direction)!==-1;n.each(function(e,n){var i=b.select(this);i.call(f,t,e);var s=i.select("."+C.itemTextClassName),o=s.selectAll("tspan"),u=s.node()&&x.bBox(s.node()).width,a=Math.max(u+C.textPadX,C.minWidth),l=t.font.size*C.fontSizeToHeight,c=o[0].length||1,h=Math.max(l*c,C.minHeight)+C.textOffsetY;h=Math.ceil(h),a=Math.ceil(a),t.widths[n]=a,t.heights[n]=h,t.height1=Math.max(t.height1,h),t.width1=Math.max(t.width1,a),r?(t.totalWidth=Math.max(t.totalWidth,a),t.openWidth=t.totalWidth,t.totalHeight+=h+C.gapButton,t.openHeight+=h+C.gapButton):(t.totalWidth+=a+C.gapButton,t.openWidth+=a+C.gapButton,t.totalHeight=Math.max(t.totalHeight,h),t.openHeight=t.totalHeight)}),r?t.totalHeight-=C.gapButton:t.totalWidth-=C.gapButton,t.headerWidth=t.width1+C.arrowPadX,t.headerHeight=t.height1,"dropdown"===t.type&&(r?(t.width1+=C.arrowPadX,t.totalHeight=t.height1):t.totalWidth=t.width1,t.totalWidth+=C.arrowPadX),n.remove();var i=t.totalWidth+t.pad.l+t.pad.r,s=t.totalHeight+t.pad.t+t.pad.b,o=e._fullLayout._size;t.lx=o.l+o.w*t.x,t.ly=o.t+o.h*(1-t.y);var u="left";N.isRightAnchor(t)&&(t.lx-=i,u="right"),N.isCenterAnchor(t)&&(t.lx-=i/2,u="center");var a="top";N.isBottomAnchor(t)&&(t.ly-=s,a="bottom"),N.isMiddleAnchor(t)&&(t.ly-=s/2,a="middle"),t.totalWidth=Math.ceil(t.totalWidth),t.totalHeight=Math.ceil(t.totalHeight),t.lx=Math.round(t.lx),t.ly=Math.round(t.ly),w.autoMargin(e,C.autoMarginIdRoot+t._index,{x:t.x,y:t.y,l:i*({right:1,center:.5}[u]||0),r:i*({left:1,center:.5}[u]||0),b:s*({top:1,middle:.5}[a]||0),t:s*({bottom:1,middle:.5}[a]||0)})}function m(e,t,n,r){r=r||{};var i=e.select("."+C.itemRectClassName),s=e.select("."+C.itemTextClassName),o=s.selectAll("tspan"),u=t.borderwidth,a=n.index;E.setTranslate(e,u+n.x,u+n.y);var f=["up","down"].indexOf(t.direction)!==-1;i.attr({x:0,y:0,width:r.width||(f?t.width1:t.widths[a]),height:r.height||(f?t.heights[a]:t.height1)});var l=t.font.size*C.fontSizeToHeight,c=o[0].length||1,h=(c-1)*l/4,p={x:C.textOffsetX,y:t.heights[a]/2-h+C.textOffsetY};s.attr(p),o.attr(p),f?n.y+=t.heights[a]+n.yPad:n.x+=t.widths[a]+n.xPad,n.index++}function g(e){e.selectAll("g."+C.dropdownButtonClassName).remove()}function y(e){for(var t=e._fullLayout._pushmargin||{},n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];i.indexOf(C.autoMarginIdRoot)!==-1&&w.autoMargin(e,i)}}var b=e("d3"),w=e("../../plots/plots"),E=e("../../lib"),S=e("../color"),x=e("../drawing"),T=e("../../lib/svg_text_utils"),N=e("../legend/anchor_utils"),C=e("./constants");t.exports=function(e){var t=e._fullLayout,n=r(t),f=t._infolayer.selectAll("g."+C.containerClassName).data(n.length>0?[0]:[]);if(f.enter().append("g").classed(C.containerClassName,!0).style("cursor","pointer"),f.exit().remove(),f.exit().size()&&y(e),0!==n.length){var l=f.selectAll("g."+C.headerGroupClassName).data(n,i);l.enter().append("g").classed(C.headerGroupClassName,!0);var c=f.selectAll("g."+C.dropdownButtonGroupClassName).data([0]);c.enter().append("g").classed(C.dropdownButtonGroupClassName,!0).style("pointer-events","all"),l.enter().size()&&c.call(g).attr(C.menuIndexAttrName,"-1"),l.exit().each(function(t){b.select(this).remove(),c.call(g).attr(C.menuIndexAttrName,"-1"),w.autoMargin(e,C.autoMarginIdRoot+t._index)});for(var h=0;h<n.length;h++){var p=n[h];v(e,p)}l.each(function(t){var n=b.select(this),r="dropdown"===t.type?c:null;w.manageCommandObserver(e,t,t.buttons,function(i){a(e,t,t.buttons[i.index],n,r,i.index,!0)}),"dropdown"===t.type?(o(e,n,c,t),s(c,t)&&u(e,n,c,t)):u(e,n,null,t)})}}},{"../../lib":657,"../../lib/svg_text_utils":672,"../../plots/plots":749,"../color":557,"../drawing":580,"../legend/anchor_utils":593,"./constants":633,d3:97}],636:[function(e,t,n){arguments[4][630][0].apply(n,arguments)},{"./attributes":632,"./constants":633,"./defaults":634,"./draw":635,dup:630}],637:[function(e,t,n){"use strict";t.exports={solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}},{}],638:[function(e,t,n){"use strict";t.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],639:[function(e,t,n){"use strict";t.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},{}],640:[function(e,t,n){"use strict";t.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5}},{}],641:[function(e,t,n){"use strict";t.exports={entityToUnicode:{mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},unicodeToEntity:{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#x27","/":"#x2F"}}},{}],642:[function(e,t,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],643:[function(e,t,n){"use strict";var r=e("./plotly");n.version="1.21.3",e("es6-promise").polyfill(),e("../build/plotcss"),e("./fonts/mathjax_config"),n.plot=r.plot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.setPlotConfig=e("./plot_api/set_plot_config"),n.register=e("./plot_api/register"),n.toImage=e("./plot_api/to_image"),n.downloadImage=e("./snapshot/download"),n.validate=e("./plot_api/validate"),n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.register(e("./traces/scatter")),n.register([e("./components/legend"),e("./components/annotations"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector")]),n.Icons=e("../build/ploticon"),n.Plots=r.Plots,n.Fx=r.Fx,n.Snapshot=e("./snapshot"),n.PlotSchema=e("./plot_api/plot_schema"),n.Queue=e("./lib/queue"),n.d3=e("d3")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":553,"./components/images":592,"./components/legend":600,"./components/rangeselector":612,"./components/rangeslider":617,"./components/shapes":624,"./components/sliders":630,"./components/updatemenus":636,"./fonts/mathjax_config":644,"./lib/queue":666,"./plot_api/plot_schema":678,"./plot_api/register":679,"./plot_api/set_plot_config":680,"./plot_api/to_image":682,"./plot_api/validate":683,"./plotly":684,"./snapshot":769,"./snapshot/download":766,"./traces/scatter":891,d3:97,"es6-promise":103}],644:[function(e,t,n){"use strict";"undefined"!=typeof MathJax?(n.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):n.MathJax=!1},{}],645:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){Array.isArray(e)&&(t[n]=e[r])}},{}],646:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../constants/numerical").BADNUM,s=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function(e){return"string"==typeof e&&(e=e.replace(s,"")),r(e)?Number(e):i}},{"../constants/numerical":640,"fast-isnumeric":106}],647:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("tinycolor2"),s=e("../components/colorscale/get_scale"),o=(Object.keys(e("../components/colorscale/scales")),e("./nested_property")),u=/^([2-9]|[1-9][0-9]+)$/;n.valObjects={data_array:{coerceFunction:function(e,t,n){Array.isArray(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),r.values.indexOf(e)===-1?t.set(n):t.set(e)}},"boolean":{coerceFunction:function(e,t,n){e===!0||e===!1?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,i){!r(e)||void 0!==i.min&&e<i.min||void 0!==i.max&&e>i.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,i){e%1||!r(e)||void 0!==i.min&&e<i.min||void 0!==i.max&&e>i.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){if("string"!=typeof e){var i="number"==typeof e;r.strict!==!0&&i?t.set(String(e)):t.set(n)}else r.noBlank&&!e?t.set(n):t.set(e)}},color:{coerceFunction:function(e,t,n){i(e).isValid()?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(s(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):r(e)?(Math.abs(e)>180&&(e-=360*Math.round(e/360)),t.set(+e)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n){var r=n.length;return"string"==typeof e&&e.substr(0,r)===n&&u.test(e.substr(r))?void t.set(e):void t.set(n)},validateFunction:function(e,t){var n=t.dflt,r=n.length;return e===n||"string"==typeof e&&e.substr(0,r)===n&&!!u.test(e.substr(r))}},flaglist:{coerceFunction:function(e,t,n,r){if("string"!=typeof e)return void t.set(n);if((r.extras||[]).indexOf(e)!==-1)return void t.set(e);for(var i=e.split("+"),s=0;s<i.length;){var o=i[s];r.flags.indexOf(o)===-1||i.indexOf(o)<s?i.splice(s,1):s++}i.length?t.set(i.join("+")):t.set(n)}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,t,r,i){if(!Array.isArray(e))return void t.set(r);var s=i.items,o=[];r=Array.isArray(r)?r:[];for(var u=0;u<s.length;u++)n.coerce(e,o,s,"["+u+"]",r[u]);t.set(o)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var r=t.items;if(!t.freeLength&&e.length!==r.length)return!1;for(var i=0;i<e.length;i++){var s=n.validate(e[i],t.items[i]);if(!s)return!1}return!0}}},n.coerce=function(e,t,r,i,s){var u=o(r,i).get(),a=o(e,i),f=o(t,i),l=a.get();return void 0===s&&(s=u.dflt),u.arrayOk&&Array.isArray(l)?(f.set(l),l):(n.valObjects[u.valType].coerceFunction(l,f,s,u),f.get())},n.coerce2=function(e,t,r,i,s){var u=o(e,i),a=n.coerce(e,t,r,i,s),f=u.get();return void 0!==f&&null!==f&&a},n.coerceFont=function(e,t,n){var r={};return n=n||{},r.family=e(t+".family",n.family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r},n.validate=function(e,t){var r=n.valObjects[t.valType];if(t.arrayOk&&Array.isArray(e))return!0;if(r.validateFunction)return r.validateFunction(e,t);var i={},s=i,o={set:function(e){s=e}};return r.coerceFunction(e,o,i,t),s!==i}},{"../components/colorscale/get_scale":569,"../components/colorscale/scales":575,"./nested_property":663,"fast-isnumeric":106,tinycolor2:495}],648:[function(e,t,n){"use strict";function r(e){return e&&x.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function i(e,t){return String(e+Math.pow(10,t)).substr(1)}function s(e,t,n,r,s){if((t||n||r||s)&&(e+=" "+i(t,2)+":"+i(n,2),(r||s)&&(e+=":"+i(r,2),s))){for(var o=4;s%10===0;)o-=1,s/=10;e+="."+i(s,o)}return e}function o(e,t,n){e=e.replace(D,function(e){var n=Math.min(+e.charAt(1)||6,6),r=(t/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0";return r});var i=new Date(Math.floor(t+.05));if(r(n))try{e=x.getComponentMethod("calendars","worldCalFmt")(e,t,n)}catch(e){return"Invalid"}return T(e)(i)}function u(e,t){var n=v(e+.05,y),r=i(Math.floor(n/b),2)+":"+i(v(Math.floor(n/w),60),2);if("M"!==t){p(t)||(t=0);var s=Math.min(v(e/E,60),P[t]),o=(100+s).toFixed(t).substr(1);t>0&&(o=o.replace(/0+$/,"").replace(/[\.]$/,"")),r+=":"+o}return r}function a(e){return e.formatDate("yyyy")}function f(e){return e.formatDate("M yyyy")}function l(e){return e.formatDate("M d")}function c(e){return e.formatDate("M d, yyyy")}var h=e("d3"),p=e("fast-isnumeric"),d=e("./loggers").error,v=e("./mod"),m=e("../constants/numerical"),g=m.BADNUM,y=m.ONEDAY,b=m.ONEHOUR,w=m.ONEMIN,E=m.ONESEC,S=m.EPOCHJD,x=e("../registry"),T=h.time.format.utc,N=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,C=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,k=(new Date).getFullYear()-70;n.dateTick0=function(e,t){return r(e)?t?x.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:x.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"},n.dfltRange=function(e){return r(e)?x.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},n.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime};var L,A;n.dateTime2ms=function(e,t){if(n.isJSDate(e))return e=Number(e)-e.getTimezoneOffset()*w,e>=L&&e<=A?e:g;if("string"!=typeof e&&"number"!=typeof e)return g;e=String(e);var i=r(t),s=e.charAt(0);!i||"G"!==s&&"g"!==s||(e=e.substr(1),t="");var o=i&&"chinese"===t.substr(0,7),u=e.match(o?C:N);if(!u)return g;var a=u[1],f=u[3]||"1",l=Number(u[5]||1),c=Number(u[7]||0),h=Number(u[9]||0),p=Number(u[11]||0);if(i){if(2===a.length)return g;a=Number(a);var d;try{var v=x.getComponentMethod("calendars","getCal")(t);if(o){var m="i"===f.charAt(f.length-1);f=parseInt(f,10),d=v.newDate(a,v.toMonthIndex(a,f,m),l)}else d=v.newDate(a,Number(f),l)}catch(e){return g}return d?(d.toJD()-S)*y+c*b+h*w+p*E:g}a=2===a.length?(Number(a)+2e3-k)%100+k:Number(a),f-=1;var T=new Date(Date.UTC(2e3,f,l,c,h));return T.setUTCFullYear(a),T.getUTCMonth()!==f?g:T.getUTCDate()!==l?g:T.getTime()+p*E},L=n.MIN_MS=n.dateTime2ms("-9999"),A=n.MAX_MS=n.dateTime2ms("9999-12-31 23:59:59.9999"),n.isDateTime=function(e,t){return n.dateTime2ms(e,t)!==g};var O=90*y,M=3*b,_=5*w;n.ms2DateTime=function(e,t,n){if("number"==typeof e&&e>=L&&e<=A){t||(t=0);var i,o,u,a,f,l,c=Math.floor(10*v(e+.05,1)),h=Math.round(e-c/10);if(r(n)){var p=Math.floor(h/y)+S,d=Math.floor(v(e,y));try{i=x.getComponentMethod("calendars","getCal")(n).fromJD(p).formatDate("yyyy-mm-dd")}catch(e){i=T("G%Y-%m-%d")(new Date(h))}if("-"===i.charAt(0))for(;i.length<11;)i="-0"+i.substr(1);else for(;i.length<10;)i="0"+i;o=t<O?Math.floor(d/b):0,u=t<O?Math.floor(d%b/w):0,a=t<M?Math.floor(d%w/E):0,f=t<_?d%E*10+c:0}else l=new Date(h),i=T("%Y-%m-%d")(l),o=t<O?l.getUTCHours():0,u=t<O?l.getUTCMinutes():0,a=t<M?l.getUTCSeconds():0,f=t<_?10*l.getUTCMilliseconds()+c:0;return s(i,o,u,a,f)}return g},n.ms2DateTimeLocal=function(e){if(e>=L+y&&e<=A-y){var t=Math.floor(10*v(e+.05,1)),n=new Date(Math.round(e-t/10)),r=h.time.format("%Y-%m-%d")(n),i=n.getHours(),o=n.getMinutes(),u=n.getSeconds(),a=10*n.getUTCMilliseconds()+t;return s(r,i,o,u,a)}return g},n.cleanDate=function(e,t,i){if(n.isJSDate(e)||"number"==typeof e){if(r(i))return d("JS Dates and milliseconds are incompatible with world calendars",e),t;if(e=n.ms2DateTimeLocal(+e),!e&&void 0!==t)return t}else if(!n.isDateTime(e,i))return d("unrecognized date",e),t;return e};var D=/%\d?f/g,P=[59,59.9,59.99,59.999,59.9999],H=T("%Y"),B=T("%b %Y"),j=T("%b %-d"),F=T("%b %-d, %Y");n.formatDate=function(e,t,n,i){var s,h;if(i=r(i)&&i,t)return o(t,e,i);if(i)try{var p=Math.floor((e+.05)/y)+S,d=x.getComponentMethod("calendars","getCal")(i).fromJD(p);"y"===n?h=a(d):"m"===n?h=f(d):"d"===n?(s=a(d),h=l(d)):(s=c(d),h=u(e,n))}catch(e){return"Invalid"}else{var v=new Date(Math.floor(e+.05));"y"===n?h=H(v):"m"===n?h=B(v):"d"===n?(s=H(v),h=j(v)):(s=F(v),h=u(e,n))}return h+(s?"\n"+s:"")};var I=3*y;n.incrementMonth=function(e,t,n){n=r(n)&&n;var i=v(e,y);if(e=Math.round(e-i),n)try{var s=Math.round(e/y)+S,o=x.getComponentMethod("calendars","getCal")(n),u=o.fromJD(s);return t%12?o.add(u,t,"m"):o.add(u,t/12,"y"),(u.toJD()-S)*y+i}catch(t){d("invalid ms "+e+" in calendar "+n)}var a=new Date(e+I);return a.setUTCMonth(a.getUTCMonth()+t)+i-I},n.findExactDates=function(e,t){for(var n,i,s=0,o=0,u=0,a=0,f=r(t)&&x.getComponentMethod("calendars","getCal")(t),l=0;l<e.length;l++)if(i=e[l],p(i)){if(!(i%y))if(f)try{n=f.fromJD(i/y+S),1===n.day()?1===n.month()?s++:o++:u++}catch(e){}else n=new Date(i),1===n.getUTCDate()?0===n.getUTCMonth()?s++:o++:u++}else a++;o+=s,u+=o;var c=e.length-a;return{exactYears:s/c,exactMonths:o/c,exactDays:u/c}}},{"../constants/numerical":640,"../registry":764,"./loggers":660,"./mod":662,d3:97,"fast-isnumeric":106}],649:[function(e,t,n){"use strict";var r=e("events").EventEmitter,i={init:function(e){if(e._ev instanceof r)return e;var t=new r,n=new r;return e._ev=t,e._internalEv=n,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=n.on.bind(n),e._internalOnce=n.once.bind(n),e._removeInternalListener=n.removeListener.bind(n),e._removeAllInternalListeners=n.removeAllListeners.bind(n),e.emit=function(r,i){"undefined"!=typeof jQuery&&jQuery(e).trigger(r,i),t.emit(r,i),n.emit(r,i)},e},triggerHandler:function(e,t,n){var r,i;"undefined"!=typeof jQuery&&(r=jQuery(e).triggerHandler(t,n));var s=e._ev;if(!s)return r;var o=s._events[t];if(!o)return r;"function"==typeof o&&(o=[o]);for(var u=o.pop(),a=0;a<o.length;a++)o[a](n);return i=u(n),void 0!==r?r:i},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};t.exports=i},{events:104}],650:[function(e,t,n){"use strict";function r(e,t){var n,r;for(n=0;n<e.length;n++){if(r=e[n],null!==r&&"object"==typeof r)return!1;void 0!==r&&(t[n]=r)}return!0}function i(e,t,n,u){var f,l,c,h,p,d,v,m=e[0],g=e.length;if(2===g&&o(m)&&o(e[1])&&0===m.length){if(v=r(e[1],m))return m;m.splice(0,m.length)}for(var y=1;y<g;y++){f=e[y];for(l in f)c=m[l],h=f[l],u&&o(h)?m[l]=h:t&&h&&(s(h)||(p=o(h)))?(p?(p=!1,d=c&&o(c)?c:[]):d=c&&s(c)?c:{},m[l]=i([d,h],t,n,u)):("undefined"!=typeof h||n)&&(m[l]=h)}return m}var s=e("./is_plain_object.js"),o=Array.isArray;n.extendFlat=function(){return i(arguments,!1,!1,!1)},n.extendDeep=function(){return i(arguments,!0,!1,!1)},n.extendDeepAll=function(){return i(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return i(arguments,!0,!1,!0)}},{"./is_plain_object.js":659}],651:[function(e,t,n){"use strict";t.exports=function(e){for(var t={},n=[],r=0,i=0;i<e.length;i++){var s=e[i];1!==t[s]&&(t[s]=1,n[r++]=s)}return n}},{}],652:[function(e,t,n){"use strict";t.exports=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.visible===!0&&t.push(r)}return t}},{}],653:[function(e,t,n){"use strict";function r(e,t){var n=a[e];return n(t)}function i(e){for(var t=0;t<u.length;t++){var n=u[t],r=new RegExp(s[n]);if(r.test(e.toLowerCase()))return n}return o.warn("Unrecognized country name: "+e+"."),!1}var s=e("country-regex"),o=e("../lib"),u=Object.keys(s),a={"ISO-3":o.identity,"USA-states":o.identity,"country names":i};n.locationToFeature=function(e,t,n){var i=r(e,t);if(i){for(var s=0;s<n.length;s++){var u=n[s];if(u.id===i)return u}o.warn(["Location with id",i,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}},{"../lib":657,"country-regex":90}],654:[function(e,t,n){"use strict";n.calcTraceToLineCoords=function(e){for(var t=e[0].trace,n=t.connectgaps,r=[],i=[],s=0;s<e.length;s++){var o=e[s];i.push(o.lonlat),!n&&o.gapAfter&&i.length>0&&(r.push(i),i=[])}return r.push(i),r},n.makeLine=function(e,t){var n={};return n=1===e.length?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e},t&&(n.trace=t),n},n.makePolygon=function(e,t){var n={};if(1===e.length)n={type:"Polygon",coordinates:e};else{for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=[e[i]];n={type:"MultiPolygon",coordinates:r}}return t&&(n.trace=t),n},n.makeBlank=function(){return{type:"Point",coordinates:[]}}},{}],655:[function(e,t,n){"use strict";function r(e,t){var n=c(e);return n[3]*=t,n}function i(e){return u(e).isValid()?e:l}function s(e){return a(e)?e:h}function o(e,t,n){var o,u,a,c,p,d=e.color,v=Array.isArray(d),m=Array.isArray(t),g=[];if(o=void 0!==e.colorscale?f.makeColorScaleFunc(f.extractScale(e.colorscale,e.cmin,e.cmax)):i,u=v?function(e,t){return void 0===e[t]?l:o(e[t])}:i,a=m?function(e,t){return void 0===e[t]?h:s(e[t])}:s,v||m)for(var y=0;y<n;y++)c=u(d,y),p=a(t,y),g[y]=r(c,p);else g=r(d,t);return g}var u=e("tinycolor2"),a=e("fast-isnumeric"),f=e("../components/colorscale"),l=e("../components/color/attributes").defaultLine,c=e("./str2rgbarray"),h=1;t.exports=o},{"../components/color/attributes":556,"../components/colorscale":571,"./str2rgbarray":671,"fast-isnumeric":106,tinycolor2:495}],656:[function(e,t,n){"use strict";function r(e){for(var t=0;(t=e.indexOf("<sup>",t))>=0;){var n=e.indexOf("</sup>",t);if(n<t)break;e=e.slice(0,t)+a(e.slice(t+5,n))+e.slice(n+6)}return e}function i(e){return e.replace(/\<br\>/g,"\n")}function s(e){return e.replace(/\<.*\>/g,"")}function o(e){for(var t=f.entityToUnicode,n=0;(n=e.indexOf("&",n))>=0;){var r=e.indexOf(";",n);if(r<n)n+=1;else{var i=t[e.slice(n+1,r)];e=i?e.slice(0,n)+i+e.slice(r+1):e.slice(0,n)+e.slice(r+1)}}return e}function u(e){return""+o(s(r(i(e))))}var a=e("superscript-text"),f=e("../constants/string_mappings");t.exports=u},{"../constants/string_mappings":641,"superscript-text":492}],657:[function(e,t,n){"use strict";var r=e("d3"),i=t.exports={};i.nestedProperty=e("./nested_property"),i.isPlainObject=e("./is_plain_object"),i.isArray=e("./is_array"),i.mod=e("./mod");var s=e("./coerce");i.valObjects=s.valObjects,i.coerce=s.coerce,i.coerce2=s.coerce2,i.coerceFont=s.coerceFont,i.validate=s.validate;var o=e("./dates");i.dateTime2ms=o.dateTime2ms,i.isDateTime=o.isDateTime,i.ms2DateTime=o.ms2DateTime,i.ms2DateTimeLocal=o.ms2DateTimeLocal,i.cleanDate=o.cleanDate,i.isJSDate=o.isJSDate,i.formatDate=o.formatDate,i.incrementMonth=o.incrementMonth,i.dateTick0=o.dateTick0,i.dfltRange=o.dfltRange,i.findExactDates=o.findExactDates,i.MIN_MS=o.MIN_MS,i.MAX_MS=o.MAX_MS;var u=e("./search");i.findBin=u.findBin,i.sorterAsc=u.sorterAsc,i.sorterDes=u.sorterDes,i.distinctVals=u.distinctVals,i.roundUp=u.roundUp;var a=e("./stats");i.aggNums=a.aggNums,i.len=a.len,i.mean=a.mean,i.variance=a.variance,i.stdev=a.stdev,i.interp=a.interp;var f=e("./matrix");i.init2dArray=f.init2dArray,i.transposeRagged=f.transposeRagged,i.dot=f.dot,i.translationMatrix=f.translationMatrix,i.rotationMatrix=f.rotationMatrix,i.rotationXYMatrix=f.rotationXYMatrix,i.apply2DTransform=f.apply2DTransform,i.apply2DTransform2=f.apply2DTransform2;var l=e("./extend");i.extendFlat=l.extendFlat,i.extendDeep=l.extendDeep,i.extendDeepAll=l.extendDeepAll,i.extendDeepNoArrays=l.extendDeepNoArrays;var c=e("./loggers");i.log=c.log,i.warn=c.warn,i.error=c.error,i.notifier=e("./notifier"),i.filterUnique=e("./filter_unique"),i.filterVisible=e("./filter_visible"),i.cleanNumber=e("./clean_number"),i.swapAttrs=function(e,t,n,r){n||(n="x"),r||(r="y");for(var s=0;s<t.length;s++){var o=t[s],u=i.nestedProperty(e,o.replace("?",n)),a=i.nestedProperty(e,o.replace("?",r)),f=u.get();u.set(a.get()),a.set(f)}},i.pauseEvent=function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,!1},i.constrain=function(e,t,n){return t>n?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},i.bBoxIntersect=function(e,t,n){return n=n||0,e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},i.identity=function(e){return e},i.noop=function(){},i.simpleMap=function(e,t,n,r){for(var i=e.length,s=new Array(i),o=0;o<i;o++)s[o]=t(e[o],n,r);return s},i.randstr=function d(e,t,n){if(n||(n=16),void 0===t&&(t=24),t<=0)return"0";var r,i,s,o=Math.log(Math.pow(2,t))/Math.log(n),u="";for(r=2;o===1/0;r*=2)o=Math.log(Math.pow(2,t/r))/Math.log(n)*r;var a=o-Math.floor(o);for(r=0;r<Math.floor(o);r++)s=Math.floor(Math.random()*n).toString(n),u=s+u;a&&(i=Math.pow(n,a),s=Math.floor(Math.random()*i).toString(n),u=s+u);var f=parseInt(u,n);return e&&e.indexOf(u)>-1||f!==1/0&&f>=Math.pow(2,t)?d(e,t,n):u},i.OptionControl=function(e,t){e||(e={}),t||(t="opt");var n={};return n.optionList=[],n._newoption=function(r){r[t]=e,n[r.name]=r,n.optionList.push(r)},n["_"+t]=e,n},i.smooth=function(e,t){if(t=Math.round(t)||0,t<2)return e;var n,r,i,s,o=e.length,u=2*o,a=2*t-1,f=new Array(a),l=new Array(o);for(n=0;n<a;n++)f[n]=(1-Math.cos(Math.PI*(n+1)/t))/(2*t);for(n=0;n<o;n++){for(s=0,r=0;r<a;r++)i=n+r+1-t,i<-o?i-=u*Math.round(i/u):i>=u&&(i-=u*Math.floor(i/u)),i<0?i=-1-i:i>=o&&(i=u-1-i),s+=e[i]*f[r];l[n]=s}return l},i.syncOrAsync=function(e,t,n){function r(){return i.syncOrAsync(e,t,n)}for(var s,o;e.length;)if(o=e.splice(0,1)[0],s=o(t),s&&s.then)return s.then(r).then(void 0,i.promiseError);return n&&n(t)},i.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},i.noneOrAll=function(e,t,n){if(e){var r,i,s=!1,o=!0;for(r=0;r<n.length;r++)i=e[n[r]],void 0!==i&&null!==i?s=!0:o=!1;if(s&&!o)for(r=0;r<n.length;r++)e[n[r]]=t[n[r]]}},i.pushUnique=function(e,t){return t&&e.indexOf(t)===-1&&e.push(t),e},i.mergeArray=function(e,t,n){if(Array.isArray(e))for(var r=Math.min(e.length,t.length),i=0;i<r;i++)t[i][n]=e[i]},i.minExtend=function(e,t){var n={};"object"!=typeof t&&(t={});var r,s,o,u=3,a=Object.keys(e);for(r=0;r<a.length;r++)s=a[r],o=e[s],"_"!==s.charAt(0)&&"function"!=typeof o&&("module"===s?n[s]=o:Array.isArray(o)?n[s]=o.slice(0,u):o&&"object"==typeof o?n[s]=i.minExtend(e[s],t[s]):n[s]=o);for(a=Object.keys(t),r=0;r<a.length;r++)s=a[r],o=t[s],"object"==typeof o&&s in n&&"object"==typeof n[s]||(n[s]=o);return n},i.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},i.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])!==-1)return!0;return!1},i.getPlotDiv=function(e){for(;e&&e.removeAttribute;e=e.parentNode)if(i.isPlotDiv(e))return e},i.isPlotDiv=function(e){var t=r.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")},i.removeElement=function(e){var t=e&&e.parentNode;t&&t.removeChild(e)},i.addStyleRule=function(e,t){if(!i.styleSheet){var n=document.createElement("style");n.appendChild(document.createTextNode("")),document.head.appendChild(n),i.styleSheet=n.sheet}var r=i.styleSheet;r.insertRule?r.insertRule(e+"{"+t+"}",0):r.addRule?r.addRule(e,t,0):i.warn("addStyleRule failed")},i.getTranslate=function(e){var t=/.*\btranslate\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,n=e.attr?"attr":"getAttribute",r=e[n]("transform")||"",i=r.replace(t,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+i[0]||0,y:+i[1]||0}},i.setTranslate=function(e,t,n){var r=/(\btranslate\(.*?\);?)/,i=e.attr?"attr":"getAttribute",s=e.attr?"attr":"setAttribute",o=e[i]("transform")||"";return t=t||0,n=n||0,o=o.replace(r,"").trim(),o+=" translate("+t+", "+n+")",o=o.trim(),e[s]("transform",o),o},i.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,n=e.attr?"attr":"getAttribute",r=e[n]("transform")||"",i=r.replace(t,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+i[0]||1,y:+i[1]||1}},i.setScale=function(e,t,n){var r=/(\bscale\(.*?\);?)/,i=e.attr?"attr":"getAttribute",s=e.attr?"attr":"setAttribute",o=e[i]("transform")||"";return t=t||1,n=n||1,o=o.replace(r,"").trim(),o+=" scale("+t+", "+n+")",o=o.trim(),e[s]("transform",o),o},i.setPointGroupScale=function(e,t,n){var r,i,s;return t=t||1,n=n||1,i=1===t&&1===n?"":" scale("+t+","+n+")",s=/\s*sc.*/,e.each(function(){r=(this.getAttribute("transform")||"").replace(s,""),r+=i,r=r.trim(),this.setAttribute("transform",r)}),i},i.isIE=function(){return"undefined"!=typeof window.navigator.msSaveBlob},i.objectFromPath=function(e,t){for(var n,r=e.split("."),i=n={},s=0;s<r.length;s++){var o=r[s],u=null,a=r[s].match(/(.*)\[([0-9]+)\]/);a?(o=a[1],u=a[2],n=n[o]=[],s===r.length-1?n[u]=t:n[u]={},n=n[u]):(s===r.length-1?n[o]=t:n[o]={},n=n[o])}return i};var h=/^([^\[\.]+)\.(.+)?/,p=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;i.expandObjectPaths=function(e){var t,n,r,s,o,u,a;if("object"==typeof e&&!Array.isArray(e))for(n in e)e.hasOwnProperty(n)&&((t=n.match(h))?(s=e[n],r=t[1],delete e[n],e[r]=i.extendDeepNoArrays(e[r]||{},i.objectFromPath(n,i.expandObjectPaths(s))[r])):(t=n.match(p))?(s=e[n],r=t[1],o=parseInt(t[2]),delete e[n],e[r]=e[r]||[],"."===t[3]?(a=t[4],u=e[r][o]=e[r][o]||{},i.extendDeepNoArrays(u,i.objectFromPath(a,i.expandObjectPaths(s)))):e[r][o]=i.expandObjectPaths(s)):e[n]=i.expandObjectPaths(e[n]));return e},i.numSeparate=function(e,t,n){if(n||(n=!1),"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,i=t.charAt(0),s=t.charAt(1),o=e.split("."),u=o[0],a=o.length>1?i+o[1]:"";if(s&&(o.length>1||u.length>4||n))for(;r.test(u);)u=u.replace(r,"$1"+s+"$2");return u+a}},{"./clean_number":646,"./coerce":647,"./dates":648,"./extend":650,"./filter_unique":651,"./filter_visible":652,"./is_array":658,"./is_plain_object":659,"./loggers":660,"./matrix":661,"./mod":662,"./nested_property":663,"./notifier":664,"./search":667,"./stats":670,d3:97}],658:[function(e,t,n){"use strict";t.exports=function(e){return Array.isArray(e)||ArrayBuffer.isView(e)}},{}],659:[function(e,t,n){"use strict";t.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e)===Object.prototype}},{}],660:[function(e,t,n){"use strict";var r=e("../plot_api/plot_config"),i=t.exports={};i.log=function(){if(r.logging>1){for(var e=["LOG:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace?console.trace.apply(console,e):console.log.apply(console,e)}},i.warn=function(){if(r.logging>0){for(var e=["WARN:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace?console.trace.apply(console,e):console.log.apply(console,e)}},i.error=function(){if(r.logging>0){for(var e=["ERROR:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.error.apply(console,arguments)}}},{"../plot_api/plot_config":677}],661:[function(e,t,n){"use strict";n.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},n.transposeRagged=function(e){var t,n,r=0,i=e.length;for(t=0;t<i;t++)r=Math.max(r,e[t].length);var s=new Array(r);for(t=0;t<r;t++)for(s[t]=new Array(i),n=0;n<i;n++)s[t][n]=e[n][t];return s},n.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var i,s,o=e.length;if(e[0].length)for(i=new Array(o),s=0;s<o;s++)i[s]=n.dot(e[s],t);else if(t[0].length){var u=n.transposeRagged(t);for(i=new Array(u.length),s=0;s<u.length;s++)i[s]=n.dot(e,u[s])}else for(i=0,s=0;s<o;s++)i+=e[s]*t[s];return i},n.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},n.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},n.rotationXYMatrix=function(e,t,i){return n.dot(n.dot(n.translationMatrix(t,i),n.rotationMatrix(e)),n.translationMatrix(-t,-i))},n.apply2DTransform=function(e){return function(){var t=arguments;3===t.length&&(t=t[0]);var i=1===arguments.length?t[0]:[t[0],t[1]];return n.dot(e,[i[0],i[1],1]).slice(0,2)}},n.apply2DTransform2=function(e){var t=n.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}}},{}],662:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e%t;return n<0?n+t:n}},{}],663:[function(e,t,n){"use strict";function r(e,t){return function(){var n,i,s,o,u,a=e;for(o=0;o<t.length-1;o++){if(n=t[o],n===-1){for(i=!0,s=[],u=0;u<a.length;u++)s[u]=r(a[u],t.slice(o+1))(),s[u]!==s[0]&&(i=!1);return i?s[0]:s}if("number"==typeof n&&!h(a))return;if(a=a[n],"object"!=typeof a||null===a)return}if("object"==typeof a&&null!==a&&(s=a[t[o]],null!==s))return s}}function i(e,t){var n=["annotations","shapes","range","domain","buttons"],r=n.indexOf(t)===-1;return h(e)&&r}function s(e,t){return function(n){var r,s,l=e,c=[e],p=f(n)&&!i(n,t[t.length-1]);for(s=0;s<t.length-1;s++){if(r=t[s],"number"==typeof r&&!h(l))throw"array index but container is not an array";if(r===-1){if(p=!o(l,t.slice(s+1),n))break;return}if(!u(l,r,t[s+1],p))break;if(l=l[r],"object"!=typeof l||null===l)throw"container is not an object";c.push(l)}p?(s===t.length-1&&delete l[t[s]],a(c)):l[t[s]]=n}}function o(e,t,n){var r,i=h(n),o=!0,a=n,l=!i&&f(n),c=t[0];for(r=0;r<e.length;r++)i&&(a=n[r%n.length],l=f(a)),l&&(o=!1),u(e,r,c,l)&&s(e[r],t)(a);return o}function u(e,t,n,r){if(void 0===e[t]){if(r)return!1;"number"==typeof n?e[t]=[]:e[t]={}}return!0}function a(e){var t,n,r,s,o;for(t=e.length-1;t>=0;t--){if(r=e[t],o=!1,h(r))for(n=r.length-1;n>=0;n--)f(r[n])?o?r[n]=void 0:r.pop():o=!0;else if("object"==typeof r&&null!==r)for(s=Object.keys(r),o=!1,n=s.length-1;n>=0;n--)f(r[s[n]])&&!i(r[s[n]],s[n])?delete r[s[n]]:o=!0;if(o)return}}function f(e){return void 0===e||null===e||"object"==typeof e&&(h(e)?!e.length:!Object.keys(e).length)}function l(e,t,n){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:n,obj:e}}var c=e("fast-isnumeric"),h=e("./is_array");t.exports=function(e,t){if(c(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,i,o,u=0,a=t.split(".");u<a.length;){if(n=String(a[u]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])a[u]=n[1];else{if(0!==u)throw"bad property string";a.splice(0,1)}for(i=n[2].substr(1,n[2].length-2).split("]["),o=0;o<i.length;o++)u++,a.splice(u,0,Number(i[o]))}u++}return"object"!=typeof e?l(e,t,a):{set:s(e,a),get:r(e,a),astr:t,parts:a,obj:e}}},{"./is_array":658,"fast-isnumeric":106}],664:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),s=[];t.exports=function(e,t){function n(e){e.duration(700).style("opacity",0).each("end",function(e){var t=s.indexOf(e);t!==-1&&s.splice(t,1),r.select(this).remove()})}if(s.indexOf(e)===-1){s.push(e);var o=1e3;i(t)?o=t:"long"===t&&(o=3e3);var u=r.select("body").selectAll(".plotly-notifier").data([0]);u.enter().append("div").classed("plotly-notifier",!0);var f=u.selectAll(".notifier-note").data(s);f.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var t=r.select(this);t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(n)}),t.append("p").html(e),t.transition().duration(700).style("opacity",1).transition().delay(o).call(n)})}}},{d3:97,"fast-isnumeric":106}],665:[function(e,t,n){"use strict";var r=e("./matrix").dot,i=t.exports={};i.tester=function(e){function t(e,t){var n=e[0],r=e[1];return!(n<i||n>s||r<o||r>u)&&(!t||!f(e))}function n(e,t){var n=e[0],a=e[1];if(n<i||n>s||a<o||a>u)return!1;var f,l,c,h,p,d=r.length,v=r[0][0],m=r[0][1],g=0;for(f=1;f<d;f++)if(l=v,c=m,v=r[f][0],m=r[f][1],h=Math.min(l,v),!(n<h||n>Math.max(l,v)||a>Math.max(c,m)))if(a<Math.min(c,m))n!==h&&g++;else{if(p=v===l?a:c+(n-l)*(m-c)/(v-l),a===p)return 1!==f||!t;a<=p&&n!==h&&g++}return g%2===1}var r=e.slice(),i=r[0][0],s=i,o=r[0][1],u=o;r.push(r[0]);for(var a=1;a<r.length;a++)i=Math.min(i,r[a][0]),s=Math.max(s,r[a][0]),o=Math.min(o,r[a][1]),u=Math.max(u,r[a][1]);var f,l=!1;return 5===r.length&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(l=!0,f=function(e){return e[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(l=!0,f=function(e){return e[1]===r[0][1]})),{xmin:i,xmax:s,ymin:o,ymax:u,pts:r,contains:l?t:n,isRect:l}};var s=i.isSegmentBent=function(e,t,n,i){var s,o,u,a=e[t],f=[e[n][0]-a[0],e[n][1]-a[1]],l=r(f,f),c=Math.sqrt(l),h=[-f[1]/c,f[0]/c];for(s=t+1;s<n;s++)if(o=[e[s][0]-a[0],e[s][1]-a[1]],u=r(o,f),u<0||u>l||Math.abs(r(o,h))>i)return!0;return!1};i.filter=function(e,t){function n(n){e.push(n);var u=r.length,f=i;r.splice(o+1);for(var l=f+1;l<e.length;l++)(l===e.length-1||s(e,f,l+1,t))&&(r.push(e[l]),r.length<u-2&&(i=l,o=r.length-1),f=l)}var r=[e[0]],i=0,o=0;if(e.length>1){var u=e.pop();n(u)}return{addPt:n,raw:e,filtered:r}}},{"./matrix":661}],666:[function(e,t,n){"use strict";function r(e,t){for(var n,r=[],s=0;s<t.length;s++)n=t[s],n===e?r[s]=n:"object"==typeof n?r[s]=Array.isArray(n)?i.extendDeep([],n):i.extendDeepAll({},n):r[s]=n;return r}var i=e("../lib"),s=e("../plot_api/plot_config"),o={};o.add=function(e,t,n,r,i){var o,u;return e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},u=e.undoQueue.index,e.autoplay?void (e.undoQueue.inSequence||(e.autoplay=!1)):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(u,e.undoQueue.queue.length-u,o),e.undoQueue.index+=1):o=e.undoQueue.queue[u-1],e.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(t),o.undo.args.unshift(n),o.redo.calls.push(r),o.redo.args.push(i)),void (e.undoQueue.queue.length>s.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)))},o.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},o.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},o.undo=function(e){var t,n;if(e.framework&&e.framework.isPolar)return void e.framework.undo();if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)o.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},o.redo=function(e){var t,n;if(e.framework&&e.framework.isPolar)return void e.framework.redo();if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)o.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}},o.plotDo=function(e,t,n){e.autoplay=!0,n=r(e,n),t.apply(null,n)},t.exports=o},{"../lib":657,"../plot_api/plot_config":677}],667:[function(e,t,n){"use strict";function r(e,t){return e<t}function i(e,t){return e<=t}function s(e,t){return e>t}function o(e,t){return e>=t}var u=e("fast-isnumeric"),a=e("./loggers");n.findBin=function(e,t,n){if(u(t.start))return n?Math.ceil((e-t.start)/t.size)-1:Math.floor((e-t.start)/t.size);var f,c,h=0,p=t.length,d=0;for(c=t[t.length-1]>=t[0]?n?r:i:n?o:s;h<p&&d++<100;)f=Math.floor((h+p)/2),c(t[f],e)?h=f+1:p=f;return d>90&&a.log("Long binary search..."),h-1},n.sorterAsc=function(e,t){return e-t},n.sorterDes=function(e,t){return t-e},n.distinctVals=function(e){var t=e.slice();t.sort(n.sorterAsc);for(var r=t.length-1,i=t[r]-t[0]||1,s=i/(r||1)/1e4,o=[t[0]],u=0;u<r;u++)t[u+1]>t[u]+s&&(i=Math.min(i,t[u+1]-t[u]),o.push(t[u+1]));return{vals:o,minDiff:i}},n.roundUp=function(e,t,n){for(var r,i=0,s=t.length-1,o=0,u=n?0:1,a=n?1:0,f=n?Math.ceil:Math.floor;i<s&&o++<100;)r=f((i+s)/2),t[r]<=e?i=r+u:s=r-a;return t[i]}},{"./loggers":660,"fast-isnumeric":106}],668:[function(e,t,n){"use strict";t.exports=function(e,t){(e.attr("class")||"").split(" ").forEach(function(t){0===t.indexOf("cursor-")&&e.classed(t,!1)}),t&&e.classed("cursor-"+t,!0)}},{}],669:[function(e,t,n){"use strict";var r=e("../components/color"),i=function(){};t.exports=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=i);e.destroy=function(){e.container.parentNode.removeChild(e.container)};var n=document.createElement("div");return n.textContent="Webgl is not supported by your browser - visit http://get.webgl.org for more info",n.style.cursor="pointer",n.style.fontSize="24px",n.style.color=r.defaults[0],e.container.appendChild(n),e.container.style.background="#FFFFFF",e.container.onclick=function(){window.open("http://get.webgl.org")},!1}},{"../components/color":557}],670:[function(e,t,n){"use strict";var r=e("fast-isnumeric");n.aggNums=function(e,t,i,s){var o,u;if(s||(s=i.length),r(t)||(t=!1),Array.isArray(i[0])){for(u=new Array(s),o=0;o<s;o++)u[o]=n.aggNums(e,t,i[o]);i=u}for(o=0;o<s;o++)r(t)?r(i[o])&&(t=e(+t,+i[o])):t=i[o];return t},n.len=function(e){return n.aggNums(function(e){return e+1},0,e)},n.mean=function(e,t){return t||(t=n.len(e)),n.aggNums(function(e,t){return e+t},0,e)/t},n.variance=function(e,t,i){return t||(t=n.len(e)),r(i)||(i=n.mean(e,t)),n.aggNums(function(e,t){return e+Math.pow(t-i,2)},0,e)/t},n.stdev=function(e,t,r){return Math.sqrt(n.variance(e,t,r))},n.interp=function(e,t){if(!r(t))throw"n should be a finite number";if(t=t*e.length-.5,t<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},{"fast-isnumeric":106}],671:[function(e,t,n){"use strict";function r(e){return e=i(e),s.str2RgbaArray(e.toRgbString())}var i=e("tinycolor2"),s=e("arraytools");t.exports=r},{arraytools:35,tinycolor2:495}],672:[function(e,t,n){"use strict";function r(e,t){return e.node().getBoundingClientRect()[t]}function i(e){return e.replace(/(<|&lt;|&#60;)/g,"\\lt ").replace(/(>|&gt;|&#62;)/g,"\\gt ")}function s(e,t,n){var r="math-output-"+h.randstr([],64),s=c.select("body").append("div").attr({id:r}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(i(e));MathJax.Hub.Queue(["Typeset",MathJax.Hub,s.node()],function(){var t=c.select("body").select("#MathJax_SVG_glyphs");if(s.select(".MathJax_SVG").empty()||!s.select("svg").node())h.log("There was an error in the tex syntax.",e),n();else{var r=s.select("svg").node().getBoundingClientRect();n(s.select(".MathJax_SVG"),t,r)}s.remove()})}function o(e,t){for(var n=e||"",r=0;r<t.length;r++){var i=t[r];n=n.replace(i.regExp,i.sub)}return n}function u(e){return o(e,y)}function a(e){return o(e,b)}function f(e){e=u(e);for(var t=e.split(/(<[^<>]*>)/).map(function(e){var t=e.match(/<(\/?)([^ >]*)\s*(.*)>/i),r=t&&t[2].toLowerCase(),i=v[r];if(void 0!==i){var s=t[1],o=t[3],u=o.match(/^style\s*=\s*"([^"]+)"\s*/i);if("a"===r){if(s)return"</a>";if("href"!==o.substr(0,4).toLowerCase())return"<a>";var f=o.substr(4).replace(/["']/g,"").replace(/=/,""),l=document.createElement("a");return l.href=f,m.indexOf(l.protocol)===-1?"<a>":'<a xlink:show="new" xlink:href="'+a(f)+'">'}if("br"===r)return"<br>";if(s)return"sup"===r?'</tspan><tspan dy="0.42em">&#x200b;</tspan>':"sub"===r?'</tspan><tspan dy="-0.21em">&#x200b;</tspan>':"</tspan>";var c="<tspan";return"sup"!==r&&"sub"!==r||(c="&#x200b;"+c),u&&(u=u[1].replace(/(^|;)\s*color:/,"$1 fill:"),i=(i?i+";":"")+a(u)),c+(i?' style="'+i+'"':"")+">"}return n.xml_entity_encode(e).replace(/</g,"&lt;")}),r=[],i=t.indexOf("<br>");i>0;i=t.indexOf("<br>",i+1))r.push(i);var s=0;r.forEach(function(e){for(var n=e+s,r=t.slice(0,n),i="",o=r.length-1;o>=0;o--){var u=r[o].match(/<(\/?).*>/i);if(u&&"<br>"!==r[o]){u[1]||(i=r[o]);break}}i&&(t.splice(n+1,0,i),t.splice(n,0,"</tspan>"),s+=2)});var o=t.join(""),f=o.split(/<br>/gi);return f.length>1&&(t=f.map(function(e,t){return'<tspan class="line" dy="'+1.3*t+'em">'+e+"</tspan>"})),t.join("")}function l(e,t,n){var r,i,s,o=n.horizontalAlign,u=n.verticalAlign||"top",a=e.node().getBoundingClientRect(),f=t.node().getBoundingClientRect();return i="bottom"===u?function(){return a.bottom-r.height}:"middle"===u?function(){return a.top+(a.height-r.height)/2}:function(){return a.top},s="right"===o?function(){return a.right-r.width}:"center"===o?function(){return a.left+(a.width-r.width)/2}:function(){return a.left},function(){return r=this.node().getBoundingClientRect(),this.style({top:i()-f.top+"px",left:s()-f.left+"px","z-index":1e3}),this}}var c=e("d3"),h=e("../lib"),p=e("../constants/xmlns_namespaces"),d=e("../constants/string_mappings");c.selection.prototype.appendSVG=function(e){for(var t=['<svg xmlns="',p.svg,'" ','xmlns:xlink="',p.xlink,'">',e,"</svg>"].join(""),n=(new DOMParser).parseFromString(t,"application/xml"),r=n.documentElement.firstChild;r;)this.node().appendChild(this.node().ownerDocument.importNode(r,!0)),r=r.nextSibling;return n.querySelector("parsererror")?(h.log(n.querySelector("parsererror div").textContent),null):c.select(this.node().lastChild)},n.html_entity_decode=function(e){var t=c.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":t.html(e).text()});return t.remove(),n},n.xml_entity_encode=function(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")},n.convertToTspans=function(e,t){function n(){p.empty()||(d=u.attr("class")+"-math",p.select("svg."+d).remove()),e.text("").style({visibility:"inherit","white-space":"pre"}),l=e.appendSVG(o),l||e.text(i),e.select("a").size()&&e.style("pointer-events","all"),t&&t.call(u)}var i=e.text(),o=f(i),u=e,a=!u.attr("data-notex")&&o.match(/([^$]*)([$]+[^$]*[$]+)([^$]*)/),l=i,p=c.select(u.node().parentNode);if(!p.empty()){var d=u.attr("class")?u.attr("class").split(" ")[0]:"text";d+="-math",p.selectAll("svg."+d).remove(),p.selectAll("g."+d+"-group").remove(),e.style({visibility:null});for(var v=e.node();v&&v.removeAttribute;v=v.parentNode)v.removeAttribute("data-bb");if(a){var m=h.getPlotDiv(u.node());(m&&m._promises||[]).push(new Promise(function(e){u.style({visibility:"hidden"});var i={fontSize:parseInt(u.style("font-size"),10)};s(a[2],i,function(i,s,o){p.selectAll("svg."+d).remove(),p.selectAll("g."+d+"-group").remove();var a=i&&i.select("svg");if(!a||!a.node())return n(),void e();var f=p.append("g").classed(d+"-group",!0).attr({"pointer-events":"none"});f.node().appendChild(a.node()),s&&s.node()&&a.node().insertBefore(s.node().cloneNode(!0),a.node().firstChild),a.attr({"class":d,height:o.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var l=u.style("fill")||"black";a.select("g").attr({fill:l,stroke:l});var c=r(a,"width"),h=r(a,"height"),v=+u.attr("x")-c*{start:0,middle:.5,end:1}[u.attr("text-anchor")||"start"],m=parseInt(u.style("font-size"),10)||r(u,"height"),g=-m/4;"y"===d[0]?(f.attr({transform:"rotate("+[-90,+u.attr("x"),+u.attr("y")]+") translate("+[-c/2,g-h/2]+")"}),a.attr({x:+u.attr("x"),y:+u.attr("y")})):"l"===d[0]?a.attr({x:u.attr("x"),y:g-h/2}):"a"===d[0]?a.attr({x:0,y:g}):a.attr({x:v,y:+u.attr("y")+g-h/2}),t&&t.call(u,f),e(f)})}))}else n();return e}};var v={sup:'font-size:70%" dy="-0.6em',sub:'font-size:70%" dy="0.3em',b:"font-weight:bold",i:"font-style:italic",a:"",span:"",br:"",em:"font-style:italic;font-weight:bold"},m=["http:","https:","mailto:"],g=new RegExp("</?("+Object.keys(v).join("|")+")( [^>]*)?/?>","g"),y=Object.keys(d.entityToUnicode).map(function(e){return{regExp:new RegExp("&"+e+";","g"),sub:d.entityToUnicode[e]}}),b=Object.keys(d.unicodeToEntity).map(function(e){return{regExp:new RegExp(e,"g"),sub:"&"+d.unicodeToEntity[e]+";"}});n.plainText=function(e){return(e||"").replace(g," ")},n.makeEditable=function(e,t,n){function r(){s(),o.style({opacity:0});var e,t=f.attr("class");e=t?"."+t.split(" ")[0]+"-math-group":"[class*=-math-group]",e&&c.select(o.node().parentNode).select(e).style({opacity:0})}function i(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),t.focus()}function s(){var e=c.select(h.getPlotDiv(o.node())),t=e.select(".svg-container"),r=t.append("div");r.classed("plugin-editable editable",!0).style({position:"absolute","font-family":o.style("font-family")||"Arial","font-size":o.style("font-size")||12,color:n.fill||o.style("fill")||"black",opacity:1,"background-color":n.background||"transparent",outline:"#ffffff33 1px solid",margin:[-parseFloat(o.style("font-size"))/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(n.text||o.attr("data-unformatted")).call(l(o,t,n)).on("blur",function(){o.text(this.textContent).style({opacity:1});var e,t=c.select(this).attr("class");e=t?"."+t.split(" ")[0]+"-math-group":"[class*=-math-group]",e&&c.select(o.node().parentNode).select(e).style({opacity:0});var n=this.textContent;c.select(this).transition().duration(0).remove(),c.select(document).on("mouseup",null),u.edit.call(o,n)}).on("focus",function(){var e=this;c.select(document).on("mouseup",function(){return c.event.target!==e&&void (document.activeElement===r.node()&&r.node().blur())})}).on("keyup",function(){27===c.event.which?(o.style({opacity:1}),c.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),u.cancel.call(o,this.textContent)):(u.input.call(o,this.textContent),c.select(this).call(l(o,t,n)))}).on("keydown",function(){13===c.event.which&&this.blur()}).call(i)}n||(n={});var o=this,u=c.dispatch("edit","input","cancel"),a=c.select(this.node()).style({"pointer-events":"all"}),f=t||a;return t&&a.style({"pointer-events":"none"}),n.immediate?r():f.on("click",r),c.rebind(this,u,"on")}},{"../constants/string_mappings":641,"../constants/xmlns_namespaces":642,"../lib":657,d3:97}],673:[function(e,t,n){"use strict";var r=t.exports={},i=e("../plots/geo/constants").locationmodeToLayer,s=e("topojson-client").feature;r.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")},r.getTopojsonPath=function(e,t){return e+t+".json"},r.getTopojsonFeatures=function(e,t){var n=i[e.locationmode],r=t.objects[n];return s(t,r).features}},{"../plots/geo/constants":711,"topojson-client":497}],674:[function(e,t,n){"use strict";function r(e,t){for(var n=new Float32Array(t),r=0;r<t;r++)n[r]=e[r];return n}function i(e,t){for(var n=new Float64Array(t),r=0;r<t;r++)n[r]=e[r];return n}t.exports=function(e,t){if(e instanceof Float32Array)return r(e,t);if(e instanceof Float64Array)return i(e,t);throw new Error("This array type is not yet supported by `truncate`.")}},{}],675:[function(e,t,n){"use strict";function r(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=c.cleanId(n,r))}function i(e){var t="middle",n="center";return e.indexOf("top")!==-1?t="top":e.indexOf("bottom")!==-1&&(t="bottom"),e.indexOf("left")!==-1?n="left":e.indexOf("right")!==-1&&(n="right"),t+" "+n}function s(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}var o=e("fast-isnumeric"),u=e("gl-mat4/fromQuat"),a=e("../registry"),f=e("../lib"),l=e("../plots/plots"),c=e("../plots/cartesian/axes"),h=e("../components/color");n.getGraphDiv=function(e){var t;if("string"==typeof e){if(t=document.getElementById(e),null===t)throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null===e||void 0===e)throw new Error("DOM element provided is null or undefined");return e},n.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&f.log("Clearing previous rejected promises from queue."),e._promises=[]},n.cleanLayout=function(e){var t,n;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1);var i=c.list({_fullLayout:e});for(t=0;t<i.length;t++){var o=i[t];o.anchor&&"free"!==o.anchor&&(o.anchor=c.cleanId(o.anchor)),o.overlaying&&(o.overlaying=c.cleanId(o.overlaying)),o.type||(o.isdate?o.type="date":o.islog?o.type="log":o.isdate===!1&&o.islog===!1&&(o.type="linear")),"withzero"!==o.autorange&&"tozero"!==o.autorange||(o.autorange=!0,o.rangemode="tozero"),delete o.islog,delete o.isdate,delete o.categories,s(o,"domain")&&delete o.domain,void 0!==o.autotick&&(void 0===o.tickmode&&(o.tickmode=o.autotick?"auto":"linear"),delete o.autotick)}var a=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<a;t++){var p=e.annotations[t];f.isPlainObject(p)&&(p.ref&&("paper"===p.ref?(p.xref="paper",p.yref="paper"):"data"===p.ref&&(p.xref="x",p.yref="y"),delete p.ref),r(p,"xref"),r(p,"yref"))}var d=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<d;t++){var v=e.shapes[t];f.isPlainObject(v)&&(r(v,"xref"),r(v,"yref"))}var m=e.legend;m&&(m.x>3?(m.x=1.02,m.xanchor="left"):m.x<-2&&(m.x=-0.02,m.xanchor="right"),m.y>3?(m.y=1.02,m.yanchor="bottom"):m.y<-2&&(m.y=-0.02,m.yanchor="top")),"rotate"===e.dragmode&&(e.dragmode="orbit"),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var g=l.getSubplotIds(e,"gl3d");for(t=0;t<g.length;t++){var y=e[g[t]],b=y.cameraposition;if(Array.isArray(b)&&4===b[0].length){var w=b[0],E=b[1],S=b[2],x=u([],w),T=[];for(n=0;n<3;++n)T[n]=E[t]+S*x[2+4*n];y.camera={eye:{x:T[0],y:T[1],z:T[2]},center:{x:E[0],y:E[1],z:E[2]},up:{x:x[1],y:x[5],z:x[9]}},delete y.cameraposition}}return h.clean(e),e},n.cleanData=function(e,t){for(var r=[],o=e.concat(Array.isArray(t)?t:[]).filter(function(e){return"uid"in e}).map(function(e){return e.uid}),u=0;u<e.length;u++){var p,d=e[u];if(!("uid"in d)||r.indexOf(d.uid)!==-1){var v;for(p=0;p<100&&(v=f.randstr(o),r.indexOf(v)!==-1);p++);d.uid=f.randstr(o),o.push(d.uid)}if(r.push(d.uid),"histogramy"===d.type&&"xbins"in d&&!("ybins"in d)&&(d.ybins=d.xbins,delete d.xbins),d.error_y&&"opacity"in d.error_y){var m=h.defaults,g=d.error_y.color||(a.traceIs(d,"bar")?h.defaultLine:m[u%m.length]);d.error_y.color=h.addOpacity(h.rgb(g),h.opacity(g)*d.error_y.opacity),delete d.error_y.opacity}if("bardir"in d&&("h"!==d.bardir||!a.traceIs(d,"bar")&&"histogram"!==d.type.substr(0,9)||(d.orientation="h",n.swapXYData(d)),delete d.bardir),"histogramy"===d.type&&n.swapXYData(d),"histogramx"!==d.type&&"histogramy"!==d.type||(d.type="histogram"),"scl"in d&&(d.colorscale=d.scl,delete d.scl),"reversescl"in d&&(d.reversescale=d.reversescl,delete d.reversescl),d.xaxis&&(d.xaxis=c.cleanId(d.xaxis,"x")),d.yaxis&&(d.yaxis=c.cleanId(d.yaxis,"y")),a.traceIs(d,"gl3d")&&d.scene&&(d.scene=l.subplotsRegistry.gl3d.cleanId(d.scene)),a.traceIs(d,"pie")||a.traceIs(d,"bar")||(Array.isArray(d.textposition)?d.textposition=d.textposition.map(i):d.textposition&&(d.textposition=i(d.textposition))),a.traceIs(d,"2dMap")&&("YIGnBu"===d.colorscale&&(d.colorscale="YlGnBu"),"YIOrRd"===d.colorscale&&(d.colorscale="YlOrRd")),a.traceIs(d,"markerColorscale")&&d.marker){var y=d.marker;"YIGnBu"===y.colorscale&&(y.colorscale="YlGnBu"),"YIOrRd"===y.colorscale&&(y.colorscale="YlOrRd")}if("surface"===d.type&&f.isPlainObject(d.contours)){var b=["x","y","z"];for(p=0;p<b.length;p++){var w=d.contours[b[p]];f.isPlainObject(w)&&(w.highlightColor&&(w.highlightcolor=w.highlightColor,delete w.highlightColor),w.highlightWidth&&(w.highlightwidth=w.highlightWidth,delete w.highlightWidth))}}if(Array.isArray(d.transforms)){var E=d.transforms;for(p=0;p<E.length;p++){var S=E[p];f.isPlainObject(S)&&"filter"===S.type&&(S.filtersrc&&(S.target=S.filtersrc,delete S.filtersrc),S.calendar&&(S.valuecalendar||(S.valuecalendar=S.calendar),delete S.calendar))}}s(d,"line")&&delete d.line,"marker"in d&&(s(d.marker,"line")&&delete d.marker.line,s(d,"marker")&&delete d.marker),h.clean(d)}},n.swapXYData=function(e){var t;if(f.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var n=e.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);f.swapAttrs(e,["error_?.copy_ystyle"]),r&&f.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if(e.hoverinfo){var i=e.hoverinfo.split("+");for(t=0;t<i.length;t++)"x"===i[t]?i[t]="y":"y"===i[t]&&(i[t]="x");e.hoverinfo=i.join("+")}},n.coerceTraceIndices=function(e,t){return o(t)?[t]:Array.isArray(t)&&t.length?t:e.data.map(function(e,t){return t})},n.manageArrayContainers=function(e,t,n){var r=e.obj,i=e.parts,s=i.length,u=i[s-1],a=o(u);if(a&&null===t){var l=i.slice(0,s-1).join("."),c=f.nestedProperty(r,l).get();c.splice(u,1)}else a&&void 0===e.get()?(void 0===e.get()&&(n[e.astr]=null),e.set(t)):e.set(t)}},{"../components/color":557,"../lib":657,"../plots/cartesian/axes":689,"../plots/plots":749,"../registry":764,"fast-isnumeric":106,"gl-mat4/fromQuat":151}],676:[function(e,t,n){"use strict";function r(e,t){e._fullLayout._paperdiv.style("background","white"),y.defaultConfig.setBackground(e,t)}function i(e,t){e._context||(e._context=b.extendFlat({},y.defaultConfig));var n=e._context;t&&(Object.keys(t).forEach(function(e){e in n&&("setBackground"===e&&"opaque"===t[e]?n[e]=r:n[e]=t[e])}),t.plot3dPixelRatio&&!n.plotGlPixelRatio&&(n.plotGlPixelRatio=n.plot3dPixelRatio)),n.staticPlot&&(n.editable=!1,n.autosizable=!1,n.scrollZoom=!1,n.doubleClick=!1,n.showTips=!1,n.showLink=!1,n.displayModeBar=!1)}function s(e,t,n){var r=m.select(e).selectAll(".plot-container").data([0]);r.enter().insert("div",":first-child").classed("plot-container plotly",!0);var i=r.selectAll(".svg-container").data([0]);i.enter().append("div").classed("svg-container",!0).style("position","relative"),i.html(""),t&&(e.data=t),n&&(e.layout=n),N.manager.fillLayout(e),i.style({width:e._fullLayout.width+"px",height:e._fullLayout.height+"px"}),e.framework=N.manager.framework(e),e.framework({data:e.data,layout:e.layout},i.node()),e.framework.setUndoPoint();var s=e.framework.svg(),o=1,u=e._fullLayout.title;""!==u&&u||(o=0);var a="Click to enter title",f=function(){this.call(A.convertToTspans)},l=s.select(".title-group text").call(f);if(e._context.editable){l.attr({"data-unformatted":u}),u&&u!==a||(o=.2,l.attr({"data-unformatted":a}).text(a).style({opacity:o}).on("mouseover.opacity",function(){m.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){m.select(this).transition().duration(1e3).style("opacity",0)}));var c=function(){this.call(A.makeEditable).on("edit",function(t){e.framework({layout:{title:t}}),this.attr({"data-unformatted":t}).text(t).call(f),this.call(c)}).on("cancel",function(){var e=this.attr("data-unformatted");this.text(e).call(f)})};l.call(c)}return e._context.setBackground(e,e._fullLayout.paper_bgcolor),x.addLinks(e),Promise.resolve()}function o(e,t){var n,r,i=t+1,s=[];for(n=0;n<e.length;n++)r=e[n],r<0?s.push(i+r):s.push(r);return s}function u(e,t,n){var r,i;for(r=0;r<t.length;r++){if(i=t[r],i!==parseInt(i,10))throw new Error("all values in "+n+" must be integers");if(i>=e.data.length||i<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(t.indexOf(i,r+1)>-1||i>=0&&t.indexOf(-e.data.length+i)>-1||i<0&&t.indexOf(e.data.length+i)>-1)throw new Error("each index in "+n+" must be unique.")}}function a(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if("undefined"==typeof t)throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),u(e,t,"currentIndices"),"undefined"==typeof n||Array.isArray(n)||(n=[n]),"undefined"!=typeof n&&u(e,n,"newIndices"),"undefined"!=typeof n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function f(e,t,n){var r,i;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if("undefined"==typeof t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if(i=t[r],"object"!=typeof i||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if("undefined"==typeof n||Array.isArray(n)||(n=[n]),"undefined"!=typeof n&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function l(e,t,n,r){var i=b.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!b.isPlainObject(t))throw new Error("update must be a key:value object");if("undefined"==typeof n)throw new Error("indices must be an integer or array of integers");u(e,n,"indices");for(var s in t){if(!Array.isArray(t[s])||t[s].length!==n.length)throw new Error("attribute "+s+" must be an array of length equal to indices array length");if(i&&(!(s in r)||!Array.isArray(r[s])||r[s].length!==t[s].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function c(e,t,n,r){var i,s,u,a,f,l=b.isPlainObject(r),c=[];Array.isArray(n)||(n=[n]),n=o(n,e.data.length-1);for(var h in t)for(var p=0;p<n.length;p++){if(i=e.data[n[p]],u=b.nestedProperty(i,h),s=u.get(),a=t[h][p],!Array.isArray(a))throw new Error("attribute: "+h+" index: "+p+" must be an array");if(!Array.isArray(s))throw new Error("cannot extend missing or non-array attribute: "+h);f=l?r[h][p]:r,g(f)||(f=-1),c.push({prop:u,target:s,insert:a,maxp:Math.floor(f)})}return c}function h(e,t,n,r,i,s){l(e,t,n,r);for(var o,u,a,f=c(e,t,n,r),h=[],p={},d={},v=0;v<f.length;v++)u=f[v].prop,a=f[v].maxp,o=i(f[v].target,f[v].insert),a>=0&&a<o.length&&(h=s(o,a)),a=f[v].target.length,u.set(o),Array.isArray(p[u.astr])||(p[u.astr]=[]),Array.isArray(d[u.astr])||(d[u.astr]=[]),p[u.astr].push(h),d[u.astr].push(a);return{update:p,maxPoints:d}}function p(e,t,n){function r(){return p.map(function(){})}function i(e){var t=y.Axes.id2name(e);f.indexOf(t)===-1&&f.push(t)}function s(e){return"LAYOUT"+e+".autorange"}function o(e){return"LAYOUT"+e+".range"}function u(n,i,s){if(Array.isArray(n))return void n.forEach(function(e){u(e,i,s)});if(!(n in t)){var o;o="LAYOUT"===n.substr(0,6)?b.nestedProperty(e.layout,n.replace("LAYOUT","")):b.nestedProperty(h[p[s]],n),n in m||(m[n]=r()),void 0===m[n][s]&&(m[n][s]=o.get()),void 0!==i&&o.set(i)}}var a,f,l=e._fullLayout,c=e._fullData,h=e.data,p=O.coerceTraceIndices(e,n),d={docalc:!1,docalcAutorange:!1,doplot:!1,dostyle:!1,docolorbars:!1,autorangeOn:!1,clearCalc:!1,fullReplot:!1},v={},m={},g={},w=["mode","visible","type","orientation","fill","histfunc","histnorm","text","x","y","z","a","b","c","open","high","low","close","base","width","offset","xtype","x0","dx","ytype","y0","dy","xaxis","yaxis","line.width","connectgaps","transpose","zsmooth","showscale","marker.showscale","zauto","marker.cauto","autocolorscale","marker.autocolorscale","colorscale","marker.colorscale","reversescale","marker.reversescale","autobinx","nbinsx","xbins","xbins.start","xbins.end","xbins.size","autobiny","nbinsy","ybins","ybins.start","ybins.end","ybins.size","autocontour","ncontours","contours","contours.coloring","error_y","error_y.visible","error_y.value","error_y.type","error_y.traceref","error_y.array","error_y.symmetric","error_y.arrayminus","error_y.valueminus","error_y.tracerefminus","error_x","error_x.visible","error_x.value","error_x.type","error_x.traceref","error_x.array","error_x.symmetric","error_x.arrayminus","error_x.valueminus","error_x.tracerefminus","swapxy","swapxyaxes","orientationaxes","marker.colors","values","labels","label0","dlabel","sort","textinfo","textposition","textfont.size","textfont.family","textfont.color","insidetextfont.size","insidetextfont.family","insidetextfont.color","outsidetextfont.size","outsidetextfont.family","outsidetextfont.color","hole","scalegroup","domain","domain.x","domain.y","domain.x[0]","domain.x[1]","domain.y[0]","domain.y[1]","tilt","tiltaxis","depth","direction","rotation","pull","line.showscale","line.cauto","line.autocolorscale","line.reversescale","marker.line.showscale","marker.line.cauto","marker.line.autocolorscale","marker.line.reversescale","xcalendar","ycalendar"];for(a=0;a<p.length;a++)if(S.traceIs(c[p[a]],"box")){w.push("name");break}var E=["marker","marker.size","textfont","boxpoints","jitter","pointpos","whiskerwidth","boxmean","tickwidth"],T=["zmin","zmax","zauto","xgap","ygap","marker.cmin","marker.cmax","marker.cauto","line.cmin","line.cmax","marker.line.cmin","marker.line.cmax","contours.start","contours.end","contours.size","contours.showlines","line","line.smoothing","line.shape","error_y.width","error_x.width","error_x.copy_ystyle","marker.maxdisplayed"],N=["type","x","y","x0","y0","orientation","xaxis","yaxis"],C=["zmin","zmax"],k=["xbins.start","xbins.end","xbins.size"],L=["ybins.start","ybins.end","ybins.size"],A=["contours.start","contours.end","contours.size"],M=["cartesian","pie","ternary"];l._basePlotModules.forEach(function(e){M.indexOf(e.name)===-1&&(d.docalc=!0)});for(var _ in t){var D,P,H,B,j,F=t[_];if(v[_]=F,"LAYOUT"!==_.substr(0,6)){for(m[_]=r(),a=0;a<p.length;a++)if(D=h[p[a]],P=c[p[a]],H=b.nestedProperty(D,_),B=H.get(),j=Array.isArray(F)?F[a%F.length]:F,void 0!==j){if(C.indexOf(_)!==-1)u("zauto",!1,a);else if("colorscale"===_)u("autocolorscale",!1,a);else if("autocolorscale"===_)u("colorscale",void 0,a);else if("marker.colorscale"===_)u("marker.autocolorscale",!1,a);else if("marker.autocolorscale"===_)u("marker.colorscale",void 0,a);else if("zauto"===_)u(C,void 0,a);else if(k.indexOf(_)!==-1)u("autobinx",!1,a);else if("autobinx"===_)u(k,void 0,a);else if(L.indexOf(_)!==-1)u("autobiny",!1,a);else if("autobiny"===_)u(L,void 0,a);else if(A.indexOf(_)!==-1)u("autocontour",!1,a);else if("autocontour"===_)u(A,void 0,a);else if(["x0","dx"].indexOf(_)!==-1&&P.x&&"scaled"!==P.xtype)u("xtype","scaled",a);else if(["y0","dy"].indexOf(_)!==-1&&P.y&&"scaled"!==P.ytype)u("ytype","scaled",a);else if("colorbar.thicknessmode"===_&&H.get()!==j&&["fraction","pixels"].indexOf(j)!==-1&&P.colorbar){var I=["top","bottom"].indexOf(P.colorbar.orient)!==-1?l.height-l.margin.t-l.margin.b:l.width-l.margin.l-l.margin.r;u("colorbar.thickness",P.colorbar.thickness*("fraction"===j?1/I:I),a)}else if("colorbar.lenmode"===_&&H.get()!==j&&["fraction","pixels"].indexOf(j)!==-1&&P.colorbar){var q=["top","bottom"].indexOf(P.colorbar.orient)!==-1?l.width-l.margin.l-l.margin.r:l.height-l.margin.t-l.margin.b;u("colorbar.len",P.colorbar.len*("fraction"===j?1/q:q),a)}else"colorbar.tick0"===_||"colorbar.dtick"===_?u("colorbar.tickmode","linear",a):"colorbar.tickmode"===_&&u(["colorbar.tick0","colorbar.dtick"],void 0,a);if("type"===_&&"pie"===j!=("pie"===B)){var R="x",U="y";"bar"!==j&&"bar"!==B||"h"!==D.orientation||(R="y",U="x"),b.swapAttrs(D,["?","?src"],"labels",R),b.swapAttrs(D,["d?","?0"],"label",R),b.swapAttrs(D,["?","?src"],"values",U),"pie"===B?(b.nestedProperty(D,"marker.color").set(b.nestedProperty(D,"marker.colors").get()),l._pielayer.selectAll("g.trace").remove()):S.traceIs(D,"cartesian")&&(b.nestedProperty(D,"marker.colors").set(b.nestedProperty(D,"marker.color").get()),g[D.xaxis||"x"]=!0,g[D.yaxis||"y"]=!0)}m[_][a]=B;var z=["swapxy","swapxyaxes","orientation","orientationaxes"];if(z.indexOf(_)!==-1){if("orientation"===_){if(H.set(j),H.get()===m[_][a])continue}else"orientationaxes"===_&&(D.orientation={v:"h",h:"v"}[P.orientation]);O.swapXYData(D)}else x.dataArrayContainers.indexOf(H.parts[0])!==-1?(O.manageArrayContainers(H,j,m),d.docalc=!0):H.set(j)}if(["swapxyaxes","orientationaxes"].indexOf(_)!==-1&&y.Axes.swap(e,p),"orientationaxes"===_){var W=b.nestedProperty(e.layout,"hovermode");"x"===W.get()?W.set("y"):"y"===W.get()&&W.set("x")}if(p.indexOf(0)!==-1&&N.indexOf(_)!==-1&&(y.Axes.clearTypes(e,p),d.docalc=!0),["autobinx","autobiny","zauto"].indexOf(_)!==-1&&j===!1||(d.dostyle=!0),(["colorbar","line"].indexOf(H.parts[0])!==-1||"marker"===H.parts[0]&&"colorbar"===H.parts[1])&&(d.docolorbars=!0),w.indexOf(_)!==-1){if(["orientation","type"].indexOf(_)!==-1){for(f=[],a=0;a<p.length;a++){var X=h[p[a]];S.traceIs(X,"cartesian")&&(i(X.xaxis||"x"),i(X.yaxis||"y"),"type"===_&&u(["autobinx","autobiny"],!0,a))}u(f.map(s),!0,0),u(f.map(o),[0,1],0)}d.docalc=!0}else T.indexOf(_)!==-1?d.doplot=!0:E.indexOf(_)!==-1&&(d.docalcAutorange=!0)}else H=b.nestedProperty(e.layout,_.replace("LAYOUT","")),m[_]=[H.get()],H.set(Array.isArray(F)?F[0]:F),d.docalc=!0}y.Axes.list(e).forEach(function(e){e.autorange&&(d.autorangeOn=!0)});var V=Object.keys(g);e:for(a=0;a<V.length;a++){for(var $=V[a],J=$.charAt(0),K=J+"axis",Q=0;Q<h.length;Q++)if(S.traceIs(h[Q],"cartesian")&&(h[Q][K]||J)===$)continue e;u("LAYOUT"+y.Axes.id2name($),null,0)}return(d.docalc||d.docalcAutorange&&d.autorangeOn)&&(d.clearCalc=!0),(d.docalc||d.doplot||d.docalcAutorange)&&(d.fullReplot=!0),{flags:d,undoit:m,redoit:v,traces:p,eventData:b.extendDeepNoArrays([],[v,p])}}function d(e,t){function n(e,r){if(Array.isArray(e))return void e.forEach(function(e){n(e,r)});if(!(e in t)){var i=b.nestedProperty(s,e);e in v||(v[e]=i.get()),void 0!==r&&i.set(r)}}function r(e,t){var n=y.Axes.id2name(e[t+"ref"]||t);return(o[n]||{}).autorange}var i,s=e.layout,o=e._fullLayout,u=Object.keys(t),a=y.Axes.list(e);for(i=0;i<u.length;i++)if(0===u[i].indexOf("allaxes")){for(var f=0;f<a.length;f++){var l=a[f]._id.substr(1),c=l.indexOf("scene")!==-1?l+".":"",h=u[i].replace("allaxes",c+a[f]._name);t[h]||(t[h]=t[u[i]])}delete t[u[i]]}var p={dolegend:!1,doticks:!1,dolayoutstyle:!1,doplot:!1,docalc:!1,domodebar:!1,layoutReplot:!1},d={},v={};for(var m in t){var g=b.nestedProperty(s,m),w=t[m],E=g.parts.length,T="string"==typeof g.parts[E-1]?E-1:E-2,N=g.parts[T],C=g.parts[T-1]+"."+N,k=g.parts.slice(0,T).join("."),L=b.nestedProperty(e.layout,k).get(),A=b.nestedProperty(o,k).get();if(void 0!==w){if(d[m]=w,v[m]="reverse"===N?w:g.get(),["width","height"].indexOf(m)!==-1&&null===w?e._fullLayout[m]=e._initialAutoSize[m]:C.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/)?n(k+".autorange",!1):C.match(/^[xyz]axis[0-9]*\.autorange$/)?n([k+".range[0]",k+".range[1]"],void 0):C.match(/^aspectratio\.[xyz]$/)?n(g.parts[0]+".aspectmode","manual"):C.match(/^aspectmode$/)?n([k+".x",k+".y",k+".z"],void 0):"tick0"===N||"dtick"===N?n(k+".tickmode","linear"):"tickmode"===N?n([k+".tick0",k+".dtick"],void 0):/[xy]axis[0-9]*?$/.test(N)&&!Object.keys(w||{}).length?p.docalc=!0:/[xy]axis[0-9]*\.categoryorder$/.test(C)?p.docalc=!0:/[xy]axis[0-9]*\.categoryarray/.test(C)&&(p.docalc=!0),C.indexOf("rangeslider")!==-1&&(p.docalc=!0),"type"===N&&"log"===A.type!=("log"===w)){var M=L;if(M&&M.range)if(A.autorange)"log"===w&&(M.range=M.range[1]>M.range[0]?[1,2]:[2,1]);else{var _=M.range[0],D=M.range[1];"log"===w?(_<=0&&D<=0&&n(k+".autorange",!0),_<=0?_=D/1e6:D<=0&&(D=_/1e6),n(k+".range[0]",Math.log(_)/Math.LN10),n(k+".range[1]",Math.log(D)/Math.LN10)):(n(k+".range[0]",Math.pow(10,_)),n(k+".range[1]",Math.pow(10,D)))}else n(k+".autorange",!0)}if("reverse"===N)L.range?L.range.reverse():(n(k+".autorange",!0),L.range=[1,0]),A.autorange?p.docalc=!0:p.doplot=!0;else if("annotations"===g.parts[0]||"shapes"===g.parts[0]){var P=g.parts[1],H=g.parts[0],B=s[H]||[],j=B[P]||{};2===g.parts.length&&(null===w&&(t[m]="remove"),"add"===t[m]||b.isPlainObject(t[m])?v[m]="remove":"remove"===t[m]?P===-1?(v[H]=B,delete v[m]):v[m]=j:b.log("???",t)),!r(j,"x")&&!r(j,"y")||b.containsAny(m,["color","opacity","align","dash"])||(p.docalc=!0);var F=S.getComponentMethod(H,"drawOne");F(e,P,g.parts.slice(2).join("."),t[m]),delete t[m]}else if(x.layoutArrayContainers.indexOf(g.parts[0])!==-1||"mapbox"===g.parts[0]&&"layers"===g.parts[1])O.manageArrayContainers(g,w,v),p.doplot=!0;else{var I=String(g.parts[1]||"");0===g.parts[0].indexOf("scene")?p.doplot=!0:0===g.parts[0].indexOf("geo")?p.doplot=!0:0===g.parts[0].indexOf("ternary")?p.doplot=!0:"paper_bgcolor"===m?p.doplot=!0:!o._has("gl2d")||m.indexOf("axis")===-1&&"plot_bgcolor"!==g.parts[0]?"hiddenlabels"===m?p.docalc=!0:g.parts[0].indexOf("legend")!==-1?p.dolegend=!0:m.indexOf("title")!==-1?p.doticks=!0:g.parts[0].indexOf("bgcolor")!==-1?p.dolayoutstyle=!0:g.parts.length>1&&b.containsAny(I,["tick","exponent","grid","zeroline"])?p.doticks=!0:m.indexOf(".linewidth")!==-1&&m.indexOf("axis")!==-1?p.doticks=p.dolayoutstyle=!0:g.parts.length>1&&I.indexOf("line")!==-1?p.dolayoutstyle=!0:g.parts.length>1&&"mirror"===I?p.doticks=p.dolayoutstyle=!0:"margin.pad"===m?p.doticks=p.dolayoutstyle=!0:"margin"===g.parts[0]||"autorange"===g.parts[1]||"rangemode"===g.parts[1]||"type"===g.parts[1]||"domain"===g.parts[1]||m.indexOf("calendar")!==-1||m.match(/^(bar|box|font)/)?p.docalc=!0:["hovermode","dragmode"].indexOf(m)!==-1?p.domodebar=!0:["hovermode","dragmode","height","width","autosize"].indexOf(m)===-1&&(p.doplot=!0):p.doplot=!0,g.set(w)}}}var q=e._fullLayout.width,R=e._fullLayout.height;x.supplyDefaults(e),e.layout.autosize&&x.plotAutoSize(e,e.layout,e._fullLayout);var U=t.height||t.width||e._fullLayout.width!==q||e._fullLayout.height!==R;return U&&(p.docalc=!0),(p.doplot||p.docalc)&&(p.layoutReplot=!0),{flags:p,undoit:v,redoit:d,eventData:b.extendDeep({},d)}}function v(e){var t=m.select(e),n=e._fullLayout;if(n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([0]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._geocontainer=n._paperdiv.selectAll(".geo-container").data([0]),n._geocontainer.enter().append("div").classed("geo-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var r=[];m.selectAll("defs").each(function(){this.id&&r.push(this.id.split("-")[1])}),n._uid=b.randstr(r)}n._paperdiv.selectAll(".main-svg").attr(L.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._draggers=n._paper.append("g").classed("draglayer",!0);var i=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=i.append("g").classed("imagelayer",!0),n._shapeLowerLayer=i.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0);var s=n._paper.append("g").classed("layer-above",!0);n._imageUpperLayer=s.append("g").classed("imagelayer",!0),n._shapeUpperLayer=s.append("g").classed("shapelayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0),n._geoimages=n._paper.append("g").classed("geoimages",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._toppaper.append("g").classed("hoverlayer",!0),e.emit("plotly_framework")}var m=e("d3"),g=e("fast-isnumeric"),y=e("../plotly"),b=e("../lib"),w=e("../lib/events"),E=e("../lib/queue"),S=e("../registry"),x=e("../plots/plots"),T=e("../plots/cartesian/graph_interact"),N=e("../plots/polar"),C=e("../components/drawing"),k=e("../components/errorbars"),L=e("../constants/xmlns_namespaces"),A=e("../lib/svg_text_utils"),O=e("./helpers"),M=e("./subroutines");y.plot=function(e,t,n,r){function o(){if(E)return y.addFrames(e,E)}function u(){for(var t=_._basePlotModules,n=0;n<t.length;n++)t[n].drawFramework&&t[n].drawFramework(e);return b.syncOrAsync([M.layoutStyles,h,T.init],e)}function a(){var t,n,r,i=e.calcdata;for(S.getComponentMethod("legend","draw")(e),S.getComponentMethod("rangeselector","draw")(e),S.getComponentMethod("updatemenus","draw")(e),S.getComponentMethod("sliders","draw")(e),t=0;t<i.length;t++)n=i[t],r=n[0].trace,r.visible===!0&&r._module.colorbar?r._module.colorbar(e,n):x.autoMargin(e,"cb"+r.uid);return x.doAutoMargin(e),x.previousPromises(e)}function f(){var t=JSON.stringify(_._size)===H?[]:[a,M.layoutStyles];return t=t.concat(T.init),b.syncOrAsync(t,e)}function l(){if(D){for(var t,n,r=x.getSubplotIds(_,"cartesian"),i=_._modules,s=0;s<r.length;s++){t=_._plots[r[s]];for(var o=0;o<i.length;o++)n=i[o],n.setPositions&&n.setPositions(e,t)}return k.calc(e),b.syncOrAsync([S.getComponentMethod("shapes","calcAutorange"),S.getComponentMethod("annotations","calcAutorange"),c],e)}}function c(){if(!e._transitioning)for(var t=y.Axes.list(e,"",!0),n=0;n<t.length;n++)y.Axes.doAutoRange(t[n])}function h(){return y.Axes.doTicks(e,"redraw")}function p(){var t,n=e.calcdata;for(t=0;t<n.length;t++){var r=n[t][0].trace,i=r.visible===!0,s=r.uid;i&&S.traceIs(r,"2dMap")||_._paper.selectAll(".hm"+s+",.contour"+s+",#clip"+s).remove(),i&&r._module.colorbar||_._infolayer.selectAll(".cb"+s).remove()}var o=_._basePlotModules;for(t=0;t<o.length;t++)o[t].plot(e);var u=_._paper.selectAll(".layer-subplot");return _._imageSubplotLayer=u.selectAll(".imagelayer"),_._shapeSubplotLayer=u.selectAll(".shapelayer"),x.style(e),S.getComponentMethod("shapes","draw")(e),S.getComponentMethod("annotations","draw")(e),x.addLinks(e),e._replotting=!1,x.previousPromises(e)}function d(){S.getComponentMethod("shapes","draw")(e),S.getComponentMethod("images","draw")(e),S.getComponentMethod("annotations","draw")(e),S.getComponentMethod("legend","draw")(e),S.getComponentMethod("rangeslider","draw")(e),S.getComponentMethod("rangeselector","draw")(e),S.getComponentMethod("updatemenus","draw")(e),S.getComponentMethod("sliders","draw")(e)}function g(){e.emit("plotly_afterplot")}var E;if(e=O.getGraphDiv(e),w.init(e),b.isPlainObject(t)){var N=t;t=N.data,n=N.layout,r=N.config,E=N.frames}var L=w.triggerHandler(e,"plotly_beforeplot",[t,n,r]);if(L===!1)return Promise.reject();t||n||b.isPlotDiv(e)||b.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",e),i(e,r),n||(n={}),m.select(e).classed("js-plotly-plot",!0),C.makeTester(e),e._promises=[];var A=0===(e.data||[]).length&&Array.isArray(t);if(Array.isArray(t)&&(O.cleanData(t,e.data),A?e.data=t:e.data.push.apply(e.data,t),e.empty=!1),e.layout&&!A||(e.layout=O.cleanLayout(n)),e._dragging&&!e._transitioning)return e._replotPending=!0,Promise.reject();if(e._replotPending=!1,x.supplyDefaults(e),t&&t[0]&&t[0].r)return s(e,t,n);e._replotting=!0,A&&v(e),e.framework!==v&&(e.framework=v,v(e)),A&&y.Axes.saveRangeInitial(e);var _=e._fullLayout,D=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;D&&x.doCalcdata(e);for(var P=0;P<e.calcdata.length;P++)e.calcdata[P][0].trace=e._fullData[P];var H=JSON.stringify(_._size);return b.syncOrAsync([x.previousPromises,o,u,a,f,l,M.layoutStyles,h,p,d],e,g),Promise.all(e._promises).then(function(){return e})},y.redraw=function(e){if(e=O.getGraphDiv(e),!b.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return O.cleanData(e.data,e.data),O.cleanLayout(e.layout),e.calcdata=void 0,y.plot(e).then(function(){return e.emit("plotly_redraw"),e})},y.newPlot=function(e,t,n,r){return e=O.getGraphDiv(e),x.cleanPlot([],{},e._fullData||{},e._fullLayout||{}),x.purge(e),y.plot(e,t,n,r)},y.extendTraces=function _(e,t,n,r){e=O.getGraphDiv(e);var i=h(e,t,n,r,function(e,t){return e.concat(t)},function(e,t){return e.splice(0,e.length-t)}),s=y.redraw(e),o=[e,i.update,n,i.maxPoints];return E.add(e,y.prependTraces,o,_,arguments),s},y.prependTraces=function D(e,t,n,r){e=O.getGraphDiv(e);var i=h(e,t,n,r,function(e,t){return t.concat(e)},function(e,t){return e.splice(t,e.length)}),s=y.redraw(e),o=[e,i.update,n,i.maxPoints];return E.add(e,y.extendTraces,o,D,arguments),s},y.addTraces=function P(e,t,n){e=O.getGraphDiv(e);var r,i,s=[],o=y.deleteTraces,u=P,l=[e,s],c=[e,t];for(f(e,t,n),Array.isArray(t)||(t=[t]),t=t.map(function(e){return b.extendFlat({},e)}),O.cleanData(t,e.data),r=0;r<t.length;r++)e.data.push(t[r]);for(r=0;r<t.length;r++)s.push(-t.length+r);if("undefined"==typeof n)return i=y.redraw(e),E.add(e,o,l,u,c),i;Array.isArray(n)||(n=[n]);try{a(e,s,n)}catch(P){throw e.data.splice(e.data.length-t.length,t.length),P}return E.startSequence(e),E.add(e,o,l,u,c),i=y.moveTraces(e,s,n),E.stopSequence(e),i},y.deleteTraces=function H(e,t){e=O.getGraphDiv(e);var n,r,i=[],s=y.addTraces,a=H,f=[e,i,t],l=[e,t];if("undefined"==typeof t)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(t)||(t=[t]),u(e,t,"indices"),t=o(t,e.data.length-1),t.sort(b.sorterDes),n=0;n<t.length;n+=1)r=e.data.splice(t[n],1)[0],i.push(r);var c=y.redraw(e);return E.add(e,s,f,a,l),c},y.moveTraces=function B(e,t,n){e=O.getGraphDiv(e);var r,i=[],s=[],u=B,f=B,l=[e,n,t],c=[e,t,n];if(a(e,t,n),t=Array.isArray(t)?t:[t],"undefined"==typeof n)for(n=[],r=0;r<t.length;r++)n.push(-t.length+r);for(n=Array.isArray(n)?n:[n],t=o(t,e.data.length-1),n=o(n,e.data.length-1),r=0;r<e.data.length;r++)t.indexOf(r)===-1&&i.push(e.data[r]);for(r=0;r<t.length;r++)s.push({newIndex:n[r],trace:e.data[t[r]]});for(s.sort(function(e,t){return e.newIndex-t.newIndex}),r=0;r<s.length;r+=1)i.splice(s[r].newIndex,0,s[r].trace);e.data=i;var h=y.redraw(e);return E.add(e,u,l,f,c),h},y.restyle=function j(e,t,n,r){e=O.getGraphDiv(e),O.clearPromiseQueue(e);var i={};if("string"==typeof t)i[t]=n;else{if(!b.isPlainObject(t))return b.warn("Restyle fail.",t,n,r),Promise.reject();i=t,void 0===r&&(r=n)}Object.keys(i).length&&(e.changed=!0);var s=p(e,i,r),o=s.flags;o.clearCalc&&(e.calcdata=void 0);var u=[];o.fullReplot?u.push(y.plot):(u.push(x.previousPromises),x.supplyDefaults(e),o.dostyle&&u.push(M.doTraceStyle),o.docolorbars&&u.push(M.doColorBars)),E.add(e,j,[e,s.undoit,s.traces],j,[e,s.redoit,s.traces]);var a=b.syncOrAsync(u,e);return a&&a.then||(a=Promise.resolve()),a.then(function(){return e.emit("plotly_restyle",s.eventData),e})},y.relayout=function F(e,t,n){if(e=O.getGraphDiv(e),O.clearPromiseQueue(e),e.framework&&e.framework.isPolar)return Promise.resolve(e);var r={};if("string"==typeof t)r[t]=n;else{if(!b.isPlainObject(t))return b.warn("Relayout fail.",t,n),Promise.reject();r=t}Object.keys(r).length&&(e.changed=!0);var i=d(e,r),s=i.flags;s.docalc&&(e.calcdata=void 0);var o=[];s.layoutReplot?o.push(M.layoutReplot):Object.keys(r).length&&(o.push(x.previousPromises),x.supplyDefaults(e),s.dolegend&&o.push(M.doLegend),s.dolayoutstyle&&o.push(M.layoutStyles),s.doticks&&o.push(M.doTicksRelayout),s.domodebar&&o.push(M.doModeBar)),E.add(e,F,[e,i.undoit],F,[e,i.redoit]);var u=b.syncOrAsync(o,e);return u&&u.then||(u=Promise.resolve(e)),u.then(function(){return e.emit("plotly_relayout",i.eventData),e})},y.update=function I(e,t,n,r){if(e=O.getGraphDiv(e),O.clearPromiseQueue(e),e.framework&&e.framework.isPolar)return Promise.resolve(e);b.isPlainObject(t)||(t={}),b.isPlainObject(n)||(n={}),Object.keys(t).length&&(e.changed=!0),Object.keys(n).length&&(e.changed=!0);var i=p(e,t,r),s=i.flags,o=d(e,n),u=o.flags;(s.clearCalc||u.docalc)&&(e.calcdata=void 0);var a=[];if(s.fullReplot&&u.layoutReplot){var f=e.data,l=e.layout;e.data=void 0,e.layout=void 0,a.push(function(){return y.plot(e,f,l)})}else s.fullReplot?a.push(y.plot):u.layoutReplot?a.push(M.layoutReplot):(a.push(x.previousPromises),x.supplyDefaults(e),s.dostyle&&a.push(M.doTraceStyle),s.docolorbars&&a.push(M.doColorBars),u.dolegend&&a.push(M.doLegend),u.dolayoutstyle&&a.push(M.layoutStyles),u.doticks&&a.push(M.doTicksRelayout),u.domodebar&&a.push(M.doModeBar));E.add(e,I,[e,i.undoit,o.undoit,i.traces],I,[e,i.redoit,o.redoit,i.traces]);var c=b.syncOrAsync(a,e);return c&&c.then||(c=Promise.resolve(e)),c.then(function(){return e.emit("plotly_update",{data:i.eventData,layout:o.eventData}),e})},y.animate=function(e,t,n){function r(e){return Array.isArray(u)?e>=u.length?u[0]:u[e]:u}function i(e){return Array.isArray(a)?e>=a.length?a[0]:a[e]:a}function s(e,t){var n=0;return function(){if(e&&++n===t)return e()}}if(e=O.getGraphDiv(e),!b.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var o=e._transitionData;o._frameQueue||(o._frameQueue=[]),n=x.supplyAnimationDefaults(n);var u=n.transition,a=n.frame;return void 0===o._frameWaitingCnt&&(o._frameWaitingCnt=0),new Promise(function(a,f){function l(){if(0!==o._frameQueue.length){for(;o._frameQueue.length;){var t=o._frameQueue.pop();t.onInterrupt&&t.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}function c(t){if(0!==t.length){for(var u=0;u<t.length;u++){var l;l="byname"===t[u].type?x.computeFrame(e,t[u].name):t[u].data;var c=i(u),h=r(u);h.duration=Math.min(h.duration,c.duration);var p={frame:l,name:t[u].name,frameOpts:c,transitionOpts:h};u===t.length-1&&(p.onComplete=s(a,2),p.onInterrupt=f),o._frameQueue.push(p)}"immediate"===n.mode&&(o._lastFrameAt=-1/0),o._animationRaf||d()}}function h(){e.emit("plotly_animated"),window.cancelAnimationFrame(o._animationRaf),o._animationRaf=null}function p(){o._currentFrame&&o._currentFrame.onComplete&&o._currentFrame.onComplete();var t=o._currentFrame=o._frameQueue.shift();if(t){var n=t.name?t.name.toString():null;e._fullLayout._currentFrame=n,o._lastFrameAt=Date.now(),o._timeToNext=t.frameOpts.duration,x.transition(e,t.frame.data,t.frame.layout,O.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then(function(){t.onComplete&&t.onComplete()}),e.emit("plotly_animatingframe",{name:n,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})}else h()}function d(){e.emit("plotly_animating"),o._lastFrameAt=-1/0,o._timeToNext=0,o._runningTransitions=0,o._currentFrame=null;var t=function(){o._animationRaf=window.requestAnimationFrame(t),Date.now()-o._lastFrameAt>o._timeToNext&&p()};t()}function v(e){return Array.isArray(u)?y>=u.length?e.transitionOpts=u[y]:e.transitionOpts=u[0]:e.transitionOpts=u,y++,e}var m,g,y=0,w=[],E=void 0===t||null===t,S=Array.isArray(t),T=!E&&!S&&b.isPlainObject(t);if(T)w.push({type:"object",data:v(b.extendFlat({},t))});else if(E||["string","number"].indexOf(typeof t)!==-1)for(m=0;m<o._frames.length;m++)g=o._frames[m],g&&(E||String(g.group)===String(t))&&w.push({type:"byname",name:String(g.name),data:v({name:g.name})});else if(S)for(m=0;m<t.length;m++){var N=t[m];["number","string"].indexOf(typeof N)!==-1?(N=String(N),w.push({type:"byname",name:N,data:v({name:N})})):b.isPlainObject(N)&&w.push({type:"object",data:v(b.extendFlat({},N))})}for(m=0;m<w.length;m++)if(g=w[m],"byname"===g.type&&!o._frameHash[g.data.name])return b.warn('animate failure: frame not found: "'+g.data.name+'"'),void f();["next","immediate"].indexOf(n.mode)!==-1&&l(),"reverse"===n.direction&&w.reverse();var C=e._fullLayout._currentFrame;if(C&&n.fromcurrent){var k=-1;for(m=0;m<w.length;m++)if(g=w[m],"byname"===g.type&&g.name===C){k=m;break}if(k>0&&k<w.length-1){var L=[];for(m=0;m<w.length;m++)g=w[m],("byname"!==w[m].type||m>k)&&L.push(g);w=L}}w.length>0?c(w):(e.emit("plotly_animated"),a())})},y.addFrames=function(e,t,n){e=O.getGraphDiv(e);var r=0;if(null===t||void 0===t)return Promise.resolve();if(!b.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var i,s,o,u,a=e._transitionData._frames,f=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var l=a.length+2*t.length,c=[];for(i=t.length-1;i>=0;i--)if(b.isPlainObject(t[i])){var h=(f[t[i].name]||{}).name,p=t[i].name;h&&p&&"number"==typeof p&&f[h]&&(r++,b.warn('addFrames: overwriting frame "'+f[h].name+'" with a frame whose name of type "number" also equates to "'+h+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),r>5&&b.warn("addFrames: This API call has yielded too many warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),c.push({frame:x.supplyFrameDefaults(t[i]),index:n&&void 0!==n[i]&&null!==n[i]?n[i]:l+i})}c.sort(function(e,t){return e.index>t.index?-1:e.index<t.index?1:0});var d=[],v=[],m=a.length;for(i=c.length-1;i>=0;i--){if(s=c[i].frame,"number"==typeof s.name&&b.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!s.name)for(;f[s.name="frame "+e._transitionData._counter++];);if(f[s.name]){for(o=0;o<a.length&&(a[o]||{}).name!==s.name;o++);d.push({type:"replace",index:o,value:s}),v.unshift({type:"replace",index:o,value:a[o]})}else u=Math.max(0,Math.min(c[i].index,m)),d.push({type:"insert",index:u,value:s}),v.unshift({type:"delete",index:u}),m++}var g=x.modifyFrames,y=x.modifyFrames,w=[e,v],S=[e,d];return E&&E.add(e,g,w,y,S),x.modifyFrames(e,d)},y.deleteFrames=function(e,t){if(e=O.getGraphDiv(e),!b.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,i=e._transitionData._frames,s=[],o=[];for(t=t.slice(0),t.sort(),n=t.length-1;n>=0;n--)r=t[n],s.push({type:"delete",index:r}),o.unshift({type:"insert",index:r,value:i[r]});var u=x.modifyFrames,a=x.modifyFrames,f=[e,o],l=[e,s];return E&&E.add(e,u,f,a,l),x.modifyFrames(e,s)},y.purge=function(e){e=O.getGraphDiv(e);var t=e._fullLayout||{},n=e._fullData||[];return x.cleanPlot([],{},n,t),x.purge(e),w.purge(e),t._container&&t._container.remove(),delete e._context,delete e._replotPending,delete e._mouseDownTime,delete e._hmpixcount,delete e._hmlumcount,e}},{"../components/drawing":580,"../components/errorbars":586,"../constants/xmlns_namespaces":642,"../lib":657,"../lib/events":649,"../lib/queue":666,"../lib/svg_text_utils":672,"../plotly":684,"../plots/cartesian/graph_interact":696,"../plots/plots":749,"../plots/polar":752,"../registry":764,"./helpers":675,"./subroutines":681,d3:97,"fast-isnumeric":106}],677:[function(e,t,n){"use strict";function r(e,n){try{e._fullLayout._paper.style("background",n)}catch(e){t.exports.logging>0&&console.error(e)}}t.exports={staticPlot:!1,editable:!1,autosizable:!1,queueLength:0,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:r,topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:!1,globalTransforms:[]}},{}],678:[function(e,t,n){"use strict";function r(e){var t,n;"area"===e?(t={attributes:y},n={}):(t=h.modules[e]._module,n=t.basePlotModule);var r={};r.type=null,E(r,d),E(r,t.attributes),n.attributes&&E(r,n.attributes),Object.keys(h.componentsRegistry).forEach(function(t){var n=h.componentsRegistry[t];n.schema&&n.schema.traces&&n.schema.traces[e]&&Object.keys(n.schema.traces[e]).forEach(function(t){c(r,n.schema.traces[e][t],t)})}),r.type=e;var i={meta:t.meta||{},attributes:o(r)};if(t.layoutAttributes){var s={};E(s,t.layoutAttributes),i.layoutAttributes=o(s)}return i}function i(){var e={};return E(e,v),Object.keys(h.subplotsRegistry).forEach(function(t){var n=h.subplotsRegistry[t];if(n.layoutAttributes)if("cartesian"===n.name)l(e,n,"xaxis"),l(e,n,"yaxis");else{var r="subplot"===n.attr?n.name:n.attr;l(e,n,r)}}),e=f(e),Object.keys(h.componentsRegistry).forEach(function(t){var n=h.componentsRegistry[t];n.layoutAttributes&&(n.schema&&n.schema.layout?Object.keys(n.schema.layout).forEach(function(t){c(e,n.schema.layout[t],t)}):c(e,n.layoutAttributes,n.name))}),{layoutAttributes:o(e)}}function s(e){var t=h.transformsRegistry[e],n=E({},t.attributes);return Object.keys(h.componentsRegistry).forEach(function(t){var r=h.componentsRegistry[t];r.schema&&r.schema.transforms&&r.schema.transforms[e]&&Object.keys(r.schema.transforms[e]).forEach(function(t){c(n,r.schema.transforms[e][t],t)})}),{attributes:o(n)}}function o(e){return u(e),a(e),e}function u(e){function t(e){return{valType:"string"}}function r(e,r,i){n.isValObject(e)?"data_array"===e.valType?(e.role="data",i[r+"src"]=t(r)):e.arrayOk===!0&&(i[r+"src"]=t(r)):p.isPlainObject(e)&&(e.role="object")}n.crawl(e,r)}function a(e){function t(e,t,n){if(e){var r=e[x];r&&(delete e[x],n[t]={items:{}},n[t].items[r]=e,n[t].role="object")}}n.crawl(e,t)}function f(e){return w(e,{radialaxis:b.radialaxis,angularaxis:b.angularaxis}),w(e,b.layout),e}function l(e,t,n){var r=p.nestedProperty(e,n),i=E({},t.layoutAttributes);i[S]=!0,r.set(i)}function c(e,t,n){var r=p.nestedProperty(e,n);r.set(E(r.get()||{},t))}var h=e("../registry"),p=e("../lib"),d=e("../plots/attributes"),v=e("../plots/layout_attributes"),m=e("../plots/frame_attributes"),g=e("../plots/animation_attributes"),y=e("../plots/polar/area_attributes"),b=e("../plots/polar/axis_attributes"),w=p.extendFlat,E=p.extendDeep,S="_isSubplotObj",x="_isLinkedToArray",T="_deprecated",N=[S,x,T];n.IS_SUBPLOT_OBJ=S,n.IS_LINKED_TO_ARRAY=x,n.DEPRECATED=T,n.UNDERSCORE_ATTRS=N,n.get=function(){var e={};h.allTypes.concat("area").forEach(function(t){e[t]=r(t)});var t={};return Object.keys(h.transformsRegistry).forEach(function(e){t[e]=s(e)}),{defs:{valObjects:p.valObjects,metaKeys:N.concat(["description","role"])},traces:e,layout:i(),transforms:t,frames:o(m),animation:o(g)}},n.crawl=function(e,t,r){var i=r||0;Object.keys(e).forEach(function(r){var s=e[r];N.indexOf(r)===-1&&(t(s,r,e,i),n.isValObject(s)||p.isPlainObject(s)&&n.crawl(s,t,i+1))})},n.isValObject=function(e){return e&&void 0!==e.valType},n.findArrayAttributes=function(e){function t(t,n,o,u){s=s.slice(0,u).concat([n]);var a=t&&("data_array"===t.valType||t.arrayOk===!0);if(a){var f=r(s),l=p.nestedProperty(e,f).get();Array.isArray(l)&&i.push(f)}}function r(e){return e.join(".")}var i=[],s=[];if(n.crawl(e._module.attributes,t),e.transforms)for(var o=e.transforms,u=0;u<o.length;u++){var a=o[u];s=["transforms["+u+"]"],n.crawl(a._module.attributes,t,1)}return e._fullInput&&(n.crawl(e._fullInput._module.attributes,t),i=p.filterUnique(i)),i}},{"../lib":657,"../plots/animation_attributes":685,"../plots/attributes":687,"../plots/frame_attributes":710,"../plots/layout_attributes":740,"../plots/polar/area_attributes":750,"../plots/polar/axis_attributes":751,"../registry":764}],679:[function(e,t,n){"use strict";function r(e){o.register(e,e.name,e.categories,e.meta),o.subplotsRegistry[e.basePlotModule.name]||o.registerSubplot(e.basePlotModule)}function i(e){if("string"!=typeof e.name)throw new Error("Transform module *name* must be a string.");var t="Transform module "+e.name,n="function"==typeof e.transform,r="function"==typeof e.calcTransform;if(!n&&!r)throw new Error(t+" is missing a *transform* or *calcTransform* method.");n&&r&&u.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),u.isPlainObject(e.attributes)||u.log(t+" registered without an *attributes* object."),"function"!=typeof e.supplyDefaults&&u.log(t+" registered without a *supplyDefaults* method."),o.transformsRegistry[e.name]=e}function s(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");o.registerComponent(e)}var o=e("../registry"),u=e("../lib");t.exports=function(e){if(!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":r(n);break;case"transform":i(n);break;case"component":s(n);break;default:throw new Error("Invalid module was attempted to be registered!")}}}},{"../lib":657,"../registry":764}],680:[function(e,t,n){"use strict";var r=e("../plotly"),i=e("../lib");t.exports=function(e){return i.extendFlat(r.defaultConfig,e)}},{"../lib":657,"../plotly":684}],681:[function(e,t,n){"use strict";var r=e("../plotly"),i=e("../registry"),s=e("../plots/plots"),o=e("../lib"),u=e("../components/color"),a=e("../components/drawing"),f=e("../components/titles"),l=e("../components/modebar");n.layoutStyles=function(e){return o.syncOrAsync([s.doAutoMargin,n.lsInner],e)},n.lsInner=function(e){var t,i=e._fullLayout,s=i._size,f=r.Axes.list(e);for(t=0;t<f.length;t++)f[t]._linepositions={};i._paperdiv.style({width:i.width+"px",height:i.height+"px"}).selectAll(".main-svg").call(a.setSize,i.width,i.height),e._context.setBackground(e,i.paper_bgcolor);var h=[];return i._paper.selectAll("g.subplot").each(function(t){var n=i._plots[t],f=r.Axes.getFromId(e,t,"x"),l=r.Axes.getFromId(e,t,"y");f.setScale(),l.setScale(),n.bg&&n.bg.call(a.setRect,f._offset-s.p,l._offset-s.p,f._length+2*s.p,l._length+2*s.p).call(u.fill,i.plot_bgcolor),n.clipId="clip"+i._uid+t+"plot";var c=i._defs.selectAll("g.clips").selectAll("#"+n.clipId).data([0]);c.enter().append("clipPath").attr({"class":"plotclip",id:n.clipId}).append("rect"),c.selectAll("rect").attr({width:f._length,height:l._length}),n.plot.call(o.setTranslate,f._offset,l._offset),n.plot.call(a.setClipUrl,n.clipId);var p=a.crispRound(e,f.linewidth,1),d=a.crispRound(e,l.linewidth,1),v=s.p+d,m="M"+ -v+",",g="h"+(f._length+2*v),y="free"===f.anchor&&h.indexOf(f._id)===-1,b=s.h*(1-(f.position||0))+p/2%1,w=f.anchor===l._id&&(f.mirror||"top"!==f.side)||"all"===f.mirror||"allticks"===f.mirror||f.mirrors&&f.mirrors[l._id+"bottom"],E=l._length+s.p+p/2,S=f.anchor===l._id&&(f.mirror||"top"===f.side)||"all"===f.mirror||"allticks"===f.mirror||f.mirrors&&f.mirrors[l._id+"top"],x=-s.p-p/2,T=s.p,N=w?0:p,C=S?0:p,k=","+(-T-C)+"v"+(l._length+2*T+C+N),L="free"===l.anchor&&h.indexOf(l._id)===-1,A=s.w*(l.position||0)+d/2%1,O=l.anchor===f._id&&(l.mirror||"right"!==l.side)||"all"===l.mirror||"allticks"===l.mirror||l.mirrors&&l.mirrors[f._id+"left"],M=-s.p-d/2,_=l.anchor===f._id&&(l.mirror||"right"===l.side)||"all"===l.mirror||"allticks"===l.mirror||l.mirrors&&l.mirrors[f._id+"right"],D=f._length+s.p+d/2;f._linepositions[t]=[w?E:void 0,S?x:void 0,y?b:void 0],f.anchor===l._id?f._linepositions[t][3]="top"===f.side?x:E:y&&(f._linepositions[t][3]=b),l._linepositions[t]=[O?M:void 0,_?D:void 0,L?A:void 0],l.anchor===f._id?l._linepositions[t][3]="right"===l.side?D:M:L&&(l._linepositions[t][3]=A);var P="translate("+f._offset+","+l._offset+")",H=P,B=P;y&&(H="translate("+f._offset+","+s.t+")",x+=l._offset-s.t,E+=l._offset-s.t),L&&(B="translate("+s.l+","+l._offset+")",M+=f._offset-s.l,D+=f._offset-s.l),n.xlines.attr("transform",H).attr("d",(w?m+E+g:"")+(S?m+x+g:"")+(y?m+b+g:"")||"M0,0").style("stroke-width",p+"px").call(u.stroke,f.showline?f.linecolor:"rgba(0,0,0,0)"),n.ylines.attr("transform",B).attr("d",(O?"M"+M+k:"")+(_?"M"+D+k:"")+(L?"M"+A+k:"")||"M0,0").attr("stroke-width",d+"px").call(u.stroke,l.showline?l.linecolor:"rgba(0,0,0,0)"),n.xaxislayer.attr("transform",H),n.yaxislayer.attr("transform",B),n.gridlayer.attr("transform",P),n.zerolinelayer.attr("transform",P),n.draglayer.attr("transform",P),y&&h.push(f._id),L&&h.push(l._id)}),r.Axes.makeClipPaths(e),n.drawMainTitle(e),l.manage(e),e._promises.length&&Promise.all(e._promises)},n.drawMainTitle=function(e){var t=e._fullLayout;f.draw(e,"gtitle",{propContainer:t,propName:"title",dfltName:"Plot",attributes:{x:t.width/2,y:t._size.t/2,"text-anchor":"middle"}})},n.doTraceStyle=function(e){for(var t=0;t<e.calcdata.length;t++){var n=e.calcdata[t],r=((n[0]||{}).trace||{})._module||{},o=r.arraysToCalcdata;o&&o(n,n[0].trace)}return s.style(e),i.getComponentMethod("legend","draw")(e),s.previousPromises(e)},n.doColorBars=function(e){for(var t=0;t<e.calcdata.length;t++){var n=e.calcdata[t][0];if((n.t||{}).cb){var r=n.trace,o=n.t.cb;i.traceIs(r,"contour")&&o.line({width:r.contours.showlines!==!1?r.line.width:0,dash:r.line.dash,color:"line"===r.contours.coloring?o._opts.line.color:r.line.color}),i.traceIs(r,"markerColorscale")?o.options(r.marker.colorbar)():o.options(r.colorbar)()}}return s.previousPromises(e)},n.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,r.plot(e,"",t)},n.doLegend=function(e){return i.getComponentMethod("legend","draw")(e),s.previousPromises(e)},n.doTicksRelayout=function(e){return r.Axes.doTicks(e,"redraw"),n.drawMainTitle(e),s.previousPromises(e)},n.doModeBar=function(e){var t,n,i=e._fullLayout;for(l.manage(e),r.Fx.supplyLayoutDefaults(e.layout,e._fullLayout,e._fullData),r.Fx.init(e),t=s.getSubplotIds(i,"gl3d"),n=0;n<t.length;n++){var o=i[t[n]]._scene;o.updateFx(i.dragmode,i.hovermode)}for(t=s.getSubplotIds(i,"gl2d"),n=0;n<t.length;n++){var u=i._plots[t[n]]._scene2d;u.updateFx(i)}for(t=s.getSubplotIds(i,"geo"),n=0;n<t.length;n++){var a=i[t[n]]._subplot;a.updateFx(i.hovermode)}return s.previousPromises(e)}},{"../components/color":557,"../components/drawing":580,"../components/modebar":603,"../components/titles":631,"../lib":657,"../plotly":684,"../plots/plots":749,"../registry":764}],682:[function(e,t,n){"use strict";function r(e,t){var n=new Promise(function(n,r){function h(){var e=u.getDelay(v._fullLayout);return new Promise(function(n,r){setTimeout(function(){var e=f(v),i=document.createElement("canvas");i.id=o.randstr(),l({format:t.format,width:v._fullLayout.width,height:v._fullLayout.height,canvas:i,svg:e,promise:!0}).then(function(e){v&&document.body.removeChild(v),n(e)}).catch(function(e){r(e)})},e)})}t=t||{},t.format=t.format||"png";var p=function(e){return void 0===e||null===e||!!(i(e)&&e>1)};p(t.width)&&p(t.height)||r(new Error("Height and width should be pixel values."));var d=a(e,{format:"png",height:t.height,width:t.width}),v=d.gd;v.style.position="absolute",v.style.left="-5000px",document.body.appendChild(v);var m=u.getRedrawFunc(v);s.plot(v,d.data,d.layout,d.config).then(m).then(h).then(function(e){n(e)}).catch(function(e){r(e)})});return n}var i=e("fast-isnumeric"),s=e("../plotly"),o=e("../lib"),u=e("../snapshot/helpers"),a=e("../snapshot/cloneplot"),f=e("../snapshot/tosvg"),l=e("../snapshot/svgtoimg");t.exports=r},{"../lib":657,"../plotly":684,"../snapshot/cloneplot":765,"../snapshot/helpers":768,"../snapshot/svgtoimg":770,"../snapshot/tosvg":772,"fast-isnumeric":106}],683:[function(e,t,n){"use strict";function r(e,t,n,i,s,f){f=f||[];for(var l=Object.keys(e),h=0;h<l.length;h++){var p=l[h];if("transforms"!==p){var m=f.slice();m.push(p);var g=e[p],y=t[p],b=a(n,p),w="info_array"===(b||{}).valType;if(u(n,p))if(d(g)&&d(y))r(g,y,b,i,s,m);else if(b.items&&!w&&v(g)){var E,S,x=b.items,T=x[Object.keys(x)[0]],N=[];for(E=0;E<y.length;E++){var C=y[E]._index||E;S=m.slice(),S.push(C),d(g[C])&&d(y[E])&&(N.push(C),r(g[C],y[E],T,i,s,S))}for(E=0;E<g.length;E++)S=m.slice(),S.push(E),d(g[E])?N.indexOf(E)===-1&&i.push(o("unused",s,S)):i.push(o("object",s,S,g[E]))}else!d(g)&&d(y)?i.push(o("object",s,m,g)):v(g)||!v(y)||w?p in t?c.validate(g,b)||i.push(o("value",s,m,g)):i.push(o("unused",s,m,g)):i.push(o("array",s,m,g));else i.push(o("schema",s,m))}}return i}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n].type,i=e.traces[r].layoutAttributes;i&&c.extendFlat(e.layout.layoutAttributes,i)}return e.layout.layoutAttributes}function s(e){return v(e)?"In data trace "+e[1]+", ":"In "+e+", "}function o(e,t,n,r){n=n||"";var i,s;v(t)?(i=t[0],s=t[1]):(i=t,s=null);var o=l(n),u=m[e](t,o,r);return c.log(u),{code:e,container:i,trace:s,path:n,astr:o,msg:u}}function u(e,t){var n=f(t),r=n.keyMinusId,i=n.id;return!!(r in e&&e[r]._isSubplotObj&&i)||t in e}function a(e,t){var n=f(t);return e[n.keyMinusId]}function f(e){var t=/([2-9]|[1-9][0-9]+)$/,n=e.split(t)[0],r=e.substr(n.length,e.length);return{keyMinusId:n,id:r}}function l(e){if(!v(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"==typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}var c=e("../lib"),h=e("../plots/plots"),p=e("./plot_schema"),d=c.isPlainObject,v=Array.isArray;t.exports=function(e,t){var n,s,u=p.get(),a=[],f={};v(e)?(f.data=c.extendDeep([],e),n=e):(f.data=[],n=[],a.push(o("array","data"))),d(t)?(f.layout=c.extendDeep({},t),s=t):(f.layout={},s={},arguments.length>1&&a.push(o("object","layout"))),h.supplyDefaults(f);for(var l=f._fullData,m=n.length,g=0;g<m;g++){var y=n[g],b=["data",g];if(d(y)){var w=l[g],E=w.type,S=u.traces[E].attributes;S.type={valType:"enumerated",values:[E]},w.visible===!1&&y.visible!==!1&&a.push(o("invisible",b)),r(y,w,S,a,b);var x=y.transforms,T=w.transforms;if(x){v(x)||a.push(o("array",b,["transforms"])),b.push("transforms");for(var N=0;N<x.length;N++){var C=["transforms",N],k=x[N].type;if(d(x[N])){var L=u.transforms[k]?u.transforms[k].attributes:{};L.type={valType:"enumerated",values:Object.keys(u.transforms)},r(x[N],T[N],L,a,b,C)}else a.push(o("object",b,C))}}}else a.push(o("object",b))}var A=f._fullLayout,O=i(u,l);return r(s,A,O,a,"layout"),0===a.length?void 0:a};var m={object:function(e,t){var n;return n="layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":s(e)+"key "+t,n+" must be linked to an object container"},array:function(e,t){var n;return n="data"===e?"The data argument":s(e)+"key "+t,n+" must be linked to an array container"},schema:function(e,t){return s(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){var r=d(n)?"container":"key";return s(e)+r+" "+t+" did not get coerced"},invisible:function(e){return"Trace "+e[1]+" got defaulted to be not visible"},value:function(e,t,n){return[s(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}}},{"../lib":657,"../plots/plots":749,"./plot_schema":678}],684:[function(e,t,n){"use strict";n.defaultConfig=e("./plot_api/plot_config"),n.Plots=e("./plots/plots"),n.Axes=e("./plots/cartesian/axes"),n.Fx=e("./plots/cartesian/graph_interact"),n.ModeBar=e("./components/modebar"),e("./plot_api/plot_api")},{"./components/modebar":603,"./plot_api/plot_api":676,"./plot_api/plot_config":677,"./plots/cartesian/axes":689,"./plots/cartesian/graph_interact":696,"./plots/plots":749}],685:[function(e,t,n){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}}},{}],686:[function(e,t,n){"use strict";var r=e("../lib");t.exports=function(e,t,n){for(var i=n.name,s=Array.isArray(e[i])?e[i]:[],o=t[i]=[],u=0;u<s.length;u++){var a=s[u],f={},l={};r.isPlainObject(a)||(l.itemIsNotPlainObject=!0,a={}),n.handleItemDefaults(a,f,t,n,l),f._input=a,f._index=u,o.push(f)}}},{"../lib":657}],687:[function(e,t,n){"use strict";t.exports={type:{valType:"enumerated",values:[],dflt:"scatter"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0},showlegend:{valType:"boolean",dflt:!0},legendgroup:{valType:"string",dflt:""},opacity:{valType:"number",min:0,max:1,dflt:1},name:{valType:"string"},uid:{valType:"string",dflt:""},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],dflt:"all"},stream:{token:{valType:"string",noBlank:!0,strict:!0},maxpoints:{valType:"number",min:0,max:1e4,dflt:500}}}},{}],688:[function(e,t,n){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x"},yaxis:{valType:"subplotid",dflt:"y"}}},{}],689:[function(e,t,n){"use strict";function r(e,t,n,r,i){function s(t){return(1+100*(t-e)/n.dtick)%100<2}for(var o=0,u=0,a=0,f=0,l=0;l<t.length;l++)t[l]%1===0?a++:b(t[l])||f++,s(t[l])&&o++,s(t[l]+n.dtick/2)&&u++;var c=t.length-f;if(a===c&&"date"!==n.type)n.dtick<1?e=r-.5*n.dtick:e-=.5;else if(u<.1*c&&(o>.3*c||s(r)||s(i))){var h=n.dtick/2;e+=e+h<r?h:-h}return e}function i(e,t,n,r,i){var s=E.findExactDates(t,i),o=.8;if(s.exactDays>o){var u=Number(n.substr(1));s.exactYears>o&&u%12===0?e=H.tickIncrement(e,"M6","reverse")+1.5*O:s.exactMonths>o?e=H.tickIncrement(e,"M1","reverse")+15.5*O:e-=O/2;var a=H.tickIncrement(e,n);if(a<=r)return a}return e}function s(e){var t,n,r=e.tickvals,i=e.ticktext,s=new Array(r.length),o=E.simpleMap(e.range,e.r2l),u=1.0001*o[0]-1e-4*o[1],f=1.0001*o[1]-1e-4*o[0],l=Math.min(u,f),c=Math.max(u,f),h=0;Array.isArray(i)||(i=[]);var p="category"===e.type?e.d2l_noadd:e.d2l;for("log"===e.type&&"L"!==String(e.dtick).charAt(0)&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1)),n=0;n<r.length;n++)t=p(r[n]),t>l&&t<c&&(void 0===i[n]?s[h]=H.tickText(e,t):s[h]=a(e,t,String(i[n])),h++);return h<r.length&&s.splice(h,r.length-h),s}function o(e,t,n){return t*E.roundUp(e/t,n)}function u(e){var t=e.dtick;if(e._tickexponent=0,b(t)||"string"==typeof t||(t=1),"category"===e.type&&(e._tickround=null),"date"===e.type){var n=e.r2l(e.tick0),r=e.l2r(n).replace(/(^-|i)/g,""),i=r.length;if("M"===String(t).charAt(0))i>10||"01-01"!==r.substr(5)?e._tickround="d":e._tickround=+t.substr(1)%12===0?"y":"m";else if(t>=O&&i<=10||t>=15*O)e._tickround="d";else if(t>=_&&i<=16||t>=M)e._tickround="M";else if(t>=D&&i<=19||t>=_)e._tickround="S";else{var s=e.l2r(n+t).replace(/^-/,"").length;e._tickround=Math.max(i,s)-20}}else if(b(t)||"L"===t.charAt(0)){var o=e.range.map(e.r2d||Number);b(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var u=Math.max(Math.abs(o[0]),Math.abs(o[1])),a=Math.floor(Math.log(u)/Math.LN10+.01);Math.abs(a)>3&&("SI"===e.exponentformat||"B"===e.exponentformat?e._tickexponent=3*Math.round((a-1)/3):e._tickexponent=a)}else e._tickround=null}function a(e,t,n){var r=e.tickfont||e._gd._fullLayout.font;return{x:t,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontColor:r.color}}function f(e,t,n,r){var i=e._tickround,s=n&&e.hoverformat||e.tickformat;r&&(i=b(i)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[i]);var o,u=E.formatDate(t.x,s,i,e.calendar),a=u.indexOf("\n");a!==-1&&(o=u.substr(a+1),u=u.substr(0,a)),r&&("00:00:00"===u||"00:00"===u?(u=o,o=""):8===u.length&&(u=u.replace(/:00$/,""))),o&&(n?"d"===i?u+=", "+o:u=o+(u?", "+u:""):e._inCalcTicks&&o===e._prevDateHead||(u+="<br>"+o,e._prevDateHead=o)),t.text=u}function l(e,t,n,r,i){var s=e.dtick,o=t.x;if(!r||"string"==typeof s&&"L"===s.charAt(0)||(s="L3"),e.tickformat||"string"==typeof s&&"L"===s.charAt(0))t.text=p(Math.pow(10,o),e,i,r);else if(b(s)||"D"===s.charAt(0)&&E.mod(o+.01,1)<.1)if(["e","E","power"].indexOf(e.exponentformat)!==-1){var u=Math.round(o);0===u?t.text=1:1===u?t.text="10":u>1?t.text="10<sup>"+u+"</sup>":t.text="10<sup>"+ -u+"</sup>",t.fontSize*=1.25}else t.text=p(Math.pow(10,o),e,"","fakehover"),"D1"===s&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6);else{if("D"!==s.charAt(0))throw"unrecognized dtick "+String(s);t.text=String(Math.round(Math.pow(10,E.mod(o,1)))),t.fontSize*=.75}if("D1"===e.dtick){var a=String(t.text).charAt(0);"0"!==a&&"1"!==a||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(o<0?.5:.25)))}}function c(e,t){var n=e._categories[Math.round(t.x)];void 0===n&&(n=""),t.text=String(n)}function h(e,t,n,r,i){"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(i="hide"),t.text=p(t.x,e,i,r)}function p(e,t,n,r){var i=e<0,s=t._tickround,o=n||t.exponentformat||"B",a=t._tickexponent,f=t.tickformat,l=t.separatethousands;if(r){var c={exponentformat:t.exponentformat,dtick:"none"===t.showexponent?t.dtick:b(e)?Math.abs(e)||1:1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]};u(c),s=(Number(c._tickround)||0)+4,a=c._tickexponent,t.hoverformat&&(f=t.hoverformat)}if(f)return y.format(f)(e).replace(/-/g,"");var h=Math.pow(10,-s)/2;if("none"===o&&(a=0),e=Math.abs(e),e<h)e="0",i=!1;else{if(e+=h,a&&(e*=Math.pow(10,-a),s+=a),0===s)e=String(Math.floor(e));else if(s<0){e=String(Math.round(e)),e=e.substr(0,e.length+s);for(var p=s;p<0;p++)e+="0"}else{e=String(e);var d=e.indexOf(".")+1;d&&(e=e.substr(0,d+s).replace(/\.?0+$/,""))}e=E.numSeparate(e,t._gd._fullLayout.separators,l)}if(a&&"hide"!==o){var v;v=a<0?""+ -a:"power"!==o?"+"+a:String(a),"e"===o||("SI"===o||"B"===o)&&(a>12||a<-15)?e+="e"+v:"E"===o?e+="E"+v:"power"===o?e+="10<sup>"+v+"</sup>":"B"===o&&9===a?e+="B":"SI"!==o&&"B"!==o||(e+=z[a/3+5])}return i?""+e:e}function d(e,t){var n,r,i=[];for(n=0;n<t.length;n++){var s=[],o=e._fullData[t[n]].xaxis,u=e._fullData[t[n]].yaxis;if(o&&u){for(r=0;r<i.length;r++)i[r].x.indexOf(o)===-1&&i[r].y.indexOf(u)===-1||s.push(r);if(s.length){var a,f=i[s[0]];if(s.length>1)for(r=1;r<s.length;r++)a=i[s[r]],v(f.x,a.x),v(f.y,a.y);v(f.x,[o]),v(f.y,[u])}else i.push({x:[o],y:[u]})}}return i}function v(e,t){for(var n=0;n<t.length;n++)e.indexOf(t[n])===-1&&e.push(t[n])}function m(e,t,n){var r,i,s=[],o=[],u=e.layout;for(r=0;r<t.length;r++)s.push(H.getFromId(e,t[r]));for(r=0;r<n.length;r++)o.push(H.getFromId(e,n[r]));var a=Object.keys(s[0]),f=["anchor","domain","overlaying","position","side","tickangle"],l=["linear","log"];for(r=0;r<a.length;r++){var c=a[r],h=s[0][c],p=o[0][c],d=!0,v=!1,m=!1;if("_"!==c.charAt(0)&&"function"!=typeof h&&f.indexOf(c)===-1){for(i=1;i<s.length&&d;i++){var y=s[i][c];"type"===c&&l.indexOf(h)!==-1&&l.indexOf(y)!==-1&&h!==y?v=!0:y!==h&&(d=!1)}for(i=1;i<o.length&&d;i++){var b=o[i][c];"type"===c&&l.indexOf(p)!==-1&&l.indexOf(b)!==-1&&p!==b?m=!0:o[i][c]!==p&&(d=!1)}d&&(v&&(u[s[0]._name].type="linear"),m&&(u[o[0]._name].type="linear"),g(u,c,s,o))}}for(r=0;r<e._fullLayout.annotations.length;r++){var w=e._fullLayout.annotations[r];t.indexOf(w.xref)!==-1&&n.indexOf(w.yref)!==-1&&E.swapAttrs(u.annotations[r],["?"])}}function g(e,t,n,r){var i,s=E.nestedProperty,o=s(e[n[0]._name],t).get(),u=s(e[r[0]._name],t).get();for("title"===t&&("Click to enter X axis title"===o&&(o="Click to enter Y axis title"),"Click to enter Y axis title"===u&&(u="Click to enter X axis title")),i=0;i<n.length;i++)s(e,n[i]._name+"."+t).set(u);for(i=0;i<r.length;i++)s(e,r[i]._name+"."+t).set(o)}var y=e("d3"),b=e("fast-isnumeric"),w=e("../../registry"),E=e("../../lib"),S=e("../../lib/svg_text_utils"),x=e("../../components/titles"),T=e("../../components/color"),N=e("../../components/drawing"),C=e("../../constants/numerical"),k=C.FP_SAFE,L=C.ONEAVGYEAR,A=C.ONEAVGMONTH,O=C.ONEDAY,M=C.ONEHOUR,_=C.ONEMIN,D=C.ONESEC,P=C.BADNUM,H=t.exports={};H.layoutAttributes=e("./layout_attributes"),H.supplyLayoutDefaults=e("./layout_defaults"),H.setConvert=e("./set_convert");var B=e("./axis_ids");H.id2name=B.id2name,H.cleanId=B.cleanId,H.list=B.list,H.listIds=B.listIds,H.getFromId=B.getFromId,H.getFromTrace=B.getFromTrace,H.coerceRef=function(e,t,n,r,i,s){var o=r.charAt(r.length-1),u=n._fullLayout._has("gl2d")?[]:H.listIds(n,o),a=r+"ref",f={};return i||(i=u[0]||s),s||(s=i),f[a]={valType:"enumerated",values:u.concat(s?[s]:[]),dflt:i},E.coerce(e,t,f,a)},H.coercePosition=function(e,t,n,r,i,s){var o,u;if("paper"===r||"pixel"===r)o=n(i,s);else{var a=H.getFromId(t,r);if(s=a.fraction2r(s),o=n(i,s),"category"===a.type){if("string"==typeof o&&(a._categories||[]).length)return u=a._categories.indexOf(o),void (e[i]=u===-1?s:u)}else if("date"===a.type)return void (e[i]=E.cleanDate(o,P,a.calendar))}e[i]=b(o)?Number(o):s},H.clearTypes=function(e,t){Array.isArray(t)&&t.length||(t=e._fullData.map(function(e,t){return t})),t.forEach(function(t){var n=e.data[t];delete (H.getFromId(e,n.xaxis)||{}).type,delete (H.getFromId(e,n.yaxis)||{}).type})},H.counterLetter=function(e){var t=e.charAt(0);return"x"===t?"y":"y"===t?"x":void 0},H.minDtick=function(e,t,n,r){["log","category"].indexOf(e.type)===-1&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):((t/e._minDtick+1e-6)%1>2e-6||((n-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0)):e._minDtick=0},H.getAutoRange=function(e){var t,n=[],r=e._min[0].val,i=e._max[0].val;for(t=1;t<e._min.length&&r===i;t++)r=Math.min(r,e._min[t].val);for(t=1;t<e._max.length&&r===i;t++)i=Math.max(i,e._max[t].val);var s,o,u,a,f,l,c,h=0,p=!1;if(e.range){var d=E.simpleMap(e.range,e.r2l);p=d[1]<d[0]}for("reversed"===e.autorange&&(p=!0,e.autorange=!0),t=0;t<e._min.length;t++)for(o=e._min[t],s=0;s<e._max.length;s++)u=e._max[s],c=u.val-o.val,l=e._length-o.pad-u.pad,c>0&&l>0&&c/l>h&&(a=o,f=u,h=c/l);if(r===i){var v=r-1,m=r+1;n="tozero"===e.rangemode?r<0?[v,0]:[0,m]:"nonnegative"===e.rangemode?[Math.max(0,v),Math.max(0,m)]:[v,m]}else h&&("linear"!==e.type&&"-"!==e.type||("tozero"===e.rangemode?(a.val>=0&&(a={val:0,pad:0}),f.val<=0&&(f={val:0,pad:0})):"nonnegative"===e.rangemode&&(a.val-h*a.pad<0&&(a={val:0,pad:0}),f.val<0&&(f={val:1,pad:0})),h=(f.val-a.val)/(e._length-a.pad-f.pad)),n=[a.val-h*a.pad,f.val+h*f.pad]);return n[0]===n[1]&&("tozero"===e.rangemode?n=n[0]<0?[n[0],0]:n[0]>0?[0,n[0]]:[0,1]:(n=[n[0]-1,n[0]+1],"nonnegative"===e.rangemode&&(n[0]=Math.max(0,n[0])))),p&&n.reverse(),E.simpleMap(n,e.l2r||Number)},H.doAutoRange=function(e){e._length||e.setScale();var t=e._min&&e._max&&e._min.length&&e._max.length;if(e.autorange&&t){e.range=H.getAutoRange(e);var n=e._gd.layout[e._name];n||(e._gd.layout[e._name]=n={}),n!==e&&(n.range=e.range.slice(),n.autorange=e.autorange)}},H.saveRangeInitial=function(e,t){for(var n=H.list(e,"",!0),r=!1,i=0;i<n.length;i++){var s=n[i],o=void 0===s._rangeInitial,u=o||s.range[0]!==s._rangeInitial[0]||s.range[1]!==s._rangeInitial[1];(o&&s.autorange===!1||t&&u)&&(s._rangeInitial=s.range.slice(),r=!0)}return r},H.expand=function(e,t,n){function r(e){if(Array.isArray(e))return function(t){return Math.max(Number(e[t]||0),0)};var t=Math.max(Number(e||0),0);return function(){return t}}function i(n){function r(e){return b(e)&&Math.abs(e)<k}if(a=t[n],b(a)){if(c=w(n)+g,h=E(n)+g,d=a-x(n),v=a+S(n),"log"===e.type&&d<v/10&&(d=v/10),f=e.c2l(d),l=e.c2l(v),y&&(f=Math.min(0,f),l=Math.max(0,l)),r(f)){for(p=!0,o=0;o<e._min.length&&p;o++)u=e._min[o],u.val<=f&&u.pad>=h?p=!1:u.val>=f&&u.pad<=h&&(e._min.splice(o,1),o--);p&&e._min.push({val:f,pad:y&&0===f?0:h})}if(r(l)){for(p=!0,o=0;o<e._max.length&&p;o++)u=e._max[o],u.val>=l&&u.pad>=c?p=!1:u.val<=l&&u.pad<=c&&(e._max.splice(o,1),o--);p&&e._max.push({val:l,pad:y&&0===l?0:c})}}}if((e.autorange||e._needsExpand)&&t){e._min||(e._min=[]),e._max||(e._max=[]),n||(n={}),e._m||e.setScale();var s,o,u,a,f,l,c,h,p,d,v,m=t.length,g=n.padded?.05*e._length:0,y=n.tozero&&("linear"===e.type||"-"===e.type),w=r((e._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),E=r((e._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),S=r(n.vpadplus||n.vpad),x=r(n.vpadminus||n.vpad);for(s=0;s<6;s++)i(s);for(s=m-1;s>5;s--)i(s)}},H.autoBin=function(e,t,n,s,o){var u=E.aggNums(Math.min,null,e),a=E.aggNums(Math.max,null,e);if(o||(o=t.calendar),"category"===t.type)return{start:u-.5,end:a+.5,size:1};var f;if(n)f=(a-u)/n;else{var l=E.distinctVals(e),c=Math.pow(10,Math.floor(Math.log(l.minDiff)/Math.LN10)),h=c*E.roundUp(l.minDiff/c,[.9,1.9,4.9,9.9],!0);f=Math.max(h,2*E.stdev(e)/Math.pow(e.length,s?.25:.4))}var p;p="log"===t.type?{type:"linear",range:[u,a]}:{type:t.type,range:E.simpleMap([u,a],t.c2r,0,o),calendar:o},H.setConvert(p),H.autoTicks(p,f);var d,v=H.tickIncrement(H.tickFirst(p),p.dtick,"reverse",o);if("number"==typeof p.dtick){v=r(v,e,p,u,a);var m=1+Math.floor((a-v)/p.dtick);d=v+m*p.dtick}else for("M"===p.dtick.charAt(0)&&(v=i(v,e,p.dtick,u,o)),d=v;d<=a;)d=H.tickIncrement(d,p.dtick,!1,o);return{start:t.c2r(v,0,o),end:t.c2r(d,0,o),size:p.dtick}},H.calcTicks=function(e){var t=E.simpleMap(e.range,e.r2l);if("auto"===e.tickmode||!e.dtick){var n,r=e.nticks;r||("category"===e.type?(n=e.tickfont?1.2*(e.tickfont.size||12):15,r=e._length/n):(n="y"===e._id.charAt(0)?40:80,r=E.constrain(e._length/n,4,9)+1)),"array"===e.tickmode&&(r*=100),H.autoTicks(e,Math.abs(t[1]-t[0])/r),e._minDtick>0&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}if(e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),u(e),"array"===e.tickmode)return s(e);e._tmin=H.tickFirst(e);var i=t[1]<t[0],o=[],a=1.0001*t[1]-1e-4*t[0];"category"===e.type&&(a=i?Math.max(-0.5,a):Math.min(e._categories.length-.5,a));for(var f=e._tmin;(i?f>=a:f<=a)&&(o.push(f),!(o.length>1e3));f=H.tickIncrement(f,e.dtick,i,e.calendar));e._tmax=o[o.length-1],e._prevDateHead="",e._inCalcTicks=!0;for(var l=new Array(o.length),c=0;c<o.length;c++)l[c]=H.tickText(e,o[c]);return e._inCalcTicks=!1,l};var j=[2,5,10],F=[1,2,3,6,12],I=[1,2,5,10,15,30],q=[1,2,3,7,14],R=[-0.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],U=[-0.301,0,.301,.699,1];H.autoTicks=function(e,t){var n;if("date"===e.type){e.tick0=E.dateTick0(e.calendar);var r=2*t;r>L?(t/=L,n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),e.dtick="M"+12*o(t,n,j)):r>A?(t/=A,e.dtick="M"+o(t,1,F)):r>O?(e.dtick=o(t,O,q),e.tick0=E.dateTick0(e.calendar,!0)):r>M?e.dtick=o(t,M,F):r>_?e.dtick=o(t,_,I):r>D?e.dtick=o(t,D,I):(n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),e.dtick=o(t,n,j))}else if("log"===e.type){e.tick0=0;var i=E.simpleMap(e.range,e.r2l);if(t>.7)e.dtick=Math.ceil(t);else if(Math.abs(i[1]-i[0])<1){var s=1.5*Math.abs((i[1]-i[0])/t);t=Math.abs(Math.pow(10,i[1])-Math.pow(10,i[0]))/s,n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),e.dtick="L"+o(t,n,j)}else e.dtick=t>.3?"D2":"D1"}else"category"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):(e.tick0=0,n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),e.dtick=o(t,n,j));if(0===e.dtick&&(e.dtick=1),!b(e.dtick)&&"string"!=typeof e.dtick){var u=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(u)}},H.tickIncrement=function(e,t,n,r){var i=n?-1:1;if(b(t))return e+i*t;var s=t.charAt(0),o=i*Number(t.substr(1));if("M"===s)return E.incrementMonth(e,o,r);if("L"===s)return Math.log(Math.pow(10,e)+o)/Math.LN10;if("D"===s){var u="D2"===t?U:R,a=e+.01*i,f=E.roundUp(E.mod(a,1),u,n);return Math.floor(a)+Math.log(y.round(Math.pow(10,f),1))/Math.LN10}throw"unrecognized dtick "+String(t)},H.tickFirst=function(e){var t=e.r2l||Number,n=E.simpleMap(e.range,t),r=n[1]<n[0],i=r?Math.floor:Math.ceil,s=1.0001*n[0]-1e-4*n[1],o=e.dtick,u=t(e.tick0);if(b(o)){var a=i((s-u)/o)*o+u;return"category"===e.type&&(a=E.constrain(a,0,e._categories.length-1)),a}var f=o.charAt(0),l=Number(o.substr(1));if("M"===f){for(var c,h,p,d=0,v=u;d<10;){if(c=H.tickIncrement(v,o,r,e.calendar),(c-s)*(v-s)<=0)return r?Math.min(v,c):Math.max(v,c);h=(s-(v+c)/2)/(c-v),p=f+(Math.abs(Math.round(h))||1)*l,v=H.tickIncrement(v,p,h<0?!r:r,e.calendar),d++}return E.error("tickFirst did not converge",e),v}if("L"===f)return Math.log(i((Math.pow(10,s)-u)/l)*l+u)/Math.LN10;if("D"===f){var m="D2"===o?U:R,g=E.roundUp(E.mod(s,1),m,r);return Math.floor(s)+Math.log(y.round(Math.pow(10,g),1))/Math.LN10}throw"unrecognized dtick "+String(o)},H.tickText=function(e,t,n){function r(r){var i;return void 0===r||(n?"none"===r:(i={first:e._tmin,last:e._tmax}[r],"all"!==r&&t!==i))}var i,s,o=a(e,t),u="array"===e.tickmode,p=n||u,d="category"===e.type?e.d2l_noadd:e.d2l;if(u&&Array.isArray(e.ticktext)){var v=E.simpleMap(e.range,e.r2l),m=Math.abs(v[1]-v[0])/1e4;for(s=0;s<e.ticktext.length&&!(Math.abs(t-d(e.tickvals[s]))<m);s++);if(s<e.ticktext.length)return o.text=String(e.ticktext[s]),o}return i="none"!==e.exponentformat&&r(e.showexponent)?"hide":"","date"===e.type?f(e,o,n,p):"log"===e.type?l(e,o,n,p,i):"category"===e.type?c(e,o):h(e,o,n,p,i),e.tickprefix&&!r(e.showtickprefix)&&(o.text=e.tickprefix+o.text),e.ticksuffix&&!r(e.showticksuffix)&&(o.text+=e.ticksuffix),o};var z=["f","p","n","","m","","k","M","G","T"];H.subplotMatch=/^x([0-9]*)y([0-9]*)$/,H.getSubplots=function(e,t){function n(e,t){return e.indexOf(t._id)!==-1}var r,i,s,o=[],u=e._fullData||e.data||[];for(r=0;r<u.length;r++){var a=u[r];if(a.visible!==!1&&"legendonly"!==a.visible&&(w.traceIs(a,"cartesian")||w.traceIs(a,"gl2d"))){var f=a.xaxis||"x",l=a.yaxis||"y";s=f+l,o.indexOf(s)===-1&&o.push(s)}}var c=H.list(e,"",!0);for(r=0;r<c.length;r++){var h=c[r],p=h._id.charAt(0),d="free"===h.anchor?"x"===p?"y":"x":h.anchor,v=H.getFromId(e,d),m=!1;for(i=0;i<o.length;i++)if(n(o[i],h)){m=!0;break}"free"===h.anchor&&m||v&&(s="x"===p?h._id+v._id:v._id+h._id,o.indexOf(s)===-1&&o.push(s))}var g=H.subplotMatch,y=[];for(r=0;r<o.length;r++)s=o[r],g.test(s)&&y.push(s);return y.sort(function(e,t){var n=e.match(g),r=t.match(g);return n[1]===r[1]?+(n[2]||1)-(r[2]||1):+(n[1]||0)-(r[1]||0)}),t?H.findSubplotsWithAxis(y,t):y},H.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],i=0;i<e.length;i++){var s=e[i];n.test(s)&&r.push(s)}return r},H.makeClipPaths=function(e){var t,n,r=e._fullLayout,i=r._defs,s={_offset:0,_length:r.width,_id:""},o={_offset:0,_length:r.height,_id:""},u=H.list(e,"x",!0),a=H.list(e,"y",!0),f=[];for(t=0;t<u.length;t++)for(f.push({x:u[t],y:o}),n=0;n<a.length;n++)0===t&&f.push({x:s,y:a[n]}),f.push({x:u[t],y:a[n]});var l=i.selectAll("g.clips").data([0]);l.enter().append("g").classed("clips",!0);var c=l.selectAll(".axesclip").data(f,function(e){return e.x._id+e.y._id});c.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+r._uid+e.x._id+e.y._id}).append("rect"),c.exit().remove(),c.each(function(e){y.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})},H.doTicks=function(e,t,n){function r(e){var t=f.l2p(e.x);return t>1&&t<f._length-1}function i(e,t){var n=e.selectAll("path."+L).data("inside"===f.ticks?U:C,k);t&&f.ticks?(n.enter().append("path").classed(L,1).classed("ticks",1).classed("crisp",1).call(T.stroke,f.tickcolor).style("stroke-width",F+"px").attr("d",t),n.attr("transform",p),n.exit().remove()):n.remove()}function s(n,r){function i(e,t){e.each(function(e){var n=d(t),r=y.select(this),i=r.select(".text-math-group"),s=p(e)+(b(t)&&0!==+t?" rotate("+t+","+c(e)+","+(h(e)-e.fontSize/2)+")":"");if(i.empty()){var o=r.select("text").attr({transform:s,"text-anchor":n});o.empty()||o.selectAll("tspan.line").attr({x:o.attr("x"),y:o.attr("y")})}else{var u=N.bBox(i.node()).width*{end:-0.5,start:.5}[n];i.attr("transform",s+(u?"translate("+u+",0)":""))}})}function s(){return A.length&&Promise.all(A)}function u(){if(i(l,f.tickangle),"x"===m&&!b(f.tickangle)&&("log"!==f.type||"D"!==String(f.dtick).charAt(0))){var e=[];for(l.each(function(t){var n=y.select(this),r=n.select(".text-math-group"),i=f.l2p(t.x);r.empty()&&(r=n.select("text"));var s=N.bBox(r.node());e.push({top:0,bottom:10,height:10,left:i-s.width/2,right:i+s.width/2+2,width:s.width+2})}),v=0;v<e.length-1;v++)if(E.bBoxIntersect(e[v],e[v+1])){T=30;break}if(T){var n=Math.abs((C[C.length-1].x-C[0].x)*f._m)/(C.length-1);n<2.5*x&&(T=90),i(l,T)}f._lastangle=T}return o(t),t+" done"}function a(){f._boundingBox=n.node().getBoundingClientRect()}var l=n.selectAll("g."+L).data(C,k);if(!f.showticklabels||!b(r))return l.remove(),void o(t);var c,h,d,g,w;"x"===m?(w="bottom"===q?1:-1,c=function(e){return e.dx+D*w},g=r+(_+M)*w,h=function(e){return e.dy+g+e.fontSize*("bottom"===q?1:-0.5)},d=function(e){return b(e)&&0!==e&&180!==e?e*w<0?"end":"start":"middle"}):(w="right"===q?1:-1,h=function(e){return e.dy+e.fontSize/2-D*w},c=function(e){return e.dx+r+(_+M+(90===Math.abs(f.tickangle)?e.fontSize/2:0))*w},d=function(e){return b(e)&&90===Math.abs(e)?"middle":"right"===q?"start":"end"});var x=0,T=0,A=[];l.enter().append("g").classed(L,1).append("text").attr("text-anchor","middle").each(function(t){var n=y.select(this),r=e._promises.length;n.call(N.setPosition,c(t),h(t)).call(N.font,t.font,t.fontSize,t.fontColor).text(t.text).call(S.convertToTspans),r=e._promises[r],r?A.push(e._promises.pop().then(function(){i(n,f.tickangle)})):i(n,f.tickangle)}),l.exit().remove(),l.each(function(e){x=Math.max(x,e.fontSize)}),i(l,f._lastangle||f.tickangle);var O=E.syncOrAsync([s,u,a]);return O&&O.then&&e._promises.push(O),O}function o(t){if(!n){var r,i,s,o,u=B.getFromId(e,t),a=y.select(e).selectAll("g."+t+"tick"),f={selection:a,side:u.side},c=t.charAt(0),h=e._fullLayout._size,p=1.5,d=u.titlefont.size;if(a.size()){var v=y.select(a.node().parentNode).attr("transform").match(/translate\(([-\.\d]+),([-\.\d]+)\)/);v&&(f.offsetLeft=+v[1],f.offsetTop=+v[2])}"x"===c?(i="free"===u.anchor?{_offset:h.t+(1-(u.position||0))*h.h,_length:0}:B.getFromId(e,u.anchor),s=u._offset+u._length/2,o=i._offset+("top"===u.side?-10-d*(p+(u.showticklabels?1:0)):i._length+10+d*(p+(u.showticklabels?1.5:.5))),u.rangeslider&&u.rangeslider.visible&&u._boundingBox&&(o+=(l.height-l.margin.b-l.margin.t)*u.rangeslider.thickness+u._boundingBox.height),f.side||(f.side="bottom")):(i="free"===u.anchor?{_offset:h.l+(u.position||0)*h.w,_length:0}:B.getFromId(e,u.anchor),o=u._offset+u._length/2,s=i._offset+("right"===u.side?i._length+10+d*(p+(u.showticklabels?1:.5)):-10-d*(p+(u.showticklabels?.5:0))),r={rotate:"-90",offset:0},f.side||(f.side="left")),x.draw(e,t+"title",{propContainer:u,propName:u._name+".title",dfltName:c.toUpperCase()+" axis",avoid:f,transform:r,attributes:{x:s,y:o,"text-anchor":"middle"}})}}function u(e,t){return e.visible===!0&&e.xaxis+e.yaxis===t&&(!!w.traceIs(e,"bar")&&e.orientation==={x:"h",y:"v"}[m]||e.fill&&e.fill.charAt(e.fill.length-1)===m)}function a(t,n,i){var s=t.gridlayer,o=t.zerolinelayer,a=t["hidegrid"+m]?[]:U,l=f._gridpath||"M0,0"+("x"===m?"v":"h")+n._length,c=s.selectAll("path."+A).data(f.showgrid===!1?[]:a,k);if(c.enter().append("path").classed(A,1).classed("crisp",1).attr("d",l).each(function(e){f.zeroline&&("linear"===f.type||"-"===f.type)&&Math.abs(e.x)<f.dtick/100&&y.select(this).remove()}),c.attr("transform",p).call(T.stroke,f.gridcolor||"#ddd").style("stroke-width",P+"px"),c.exit().remove(),o){for(var h=!1,d=0;d<e._fullData.length;d++)if(u(e._fullData[d],i)){h=!0;break}var v=E.simpleMap(f.range,f.r2l),g=v[0]*v[1]<=0&&f.zeroline&&("linear"===f.type||"-"===f.type)&&a.length&&(h||r({x:0})||!f.showline),b=o.selectAll("path."+O).data(g?[{x:0}]:[]);b.enter().append("path").classed(O,1).classed("zl",1).classed("crisp",1).attr("d",l),b.attr("transform",p).call(T.stroke,f.zerolinecolor||T.defaultLine).style("stroke-width",j+"px"),b.exit().remove()}}var f,l=e._fullLayout,c=!1;if("object"==typeof t)f=t,t=f._id,c=!0;else if(f=H.getFromId(e,t),"redraw"===t&&l._paper.selectAll("g.subplot").each(function(e){var t=l._plots[e],n=t.xaxis,r=t.yaxis;t.xaxislayer.selectAll("."+n._id+"tick").remove(),t.yaxislayer.selectAll("."+r._id+"tick").remove(),t.gridlayer.selectAll("path").remove(),t.zerolinelayer.selectAll("path").remove()}),!t||"redraw"===t)return E.syncOrAsync(H.list(e,"",!0).map(function(n){return function(){if(n._id){var r=H.doTicks(e,n._id);return"redraw"===t&&(n._r=n.range.slice(),n._rl=E.simpleMap(n._r,n.r2l)),r}}}));f.tickformat||(["none","e","E","power","SI","B"].indexOf(f.exponentformat)===-1&&(f.exponentformat="e"),["all","first","last","none"].indexOf(f.showexponent)===-1&&(f.showexponent="all")),f.setScale();var h,p,d,v,m=t.charAt(0),g=H.counterLetter(t),C=H.calcTicks(f),k=function(e){return e.text+e.x+f.mirror},L=t+"tick",A=t+"grid",O=t+"zl",M=(f.linewidth||1)/2,_=("outside"===f.ticks?f.ticklen:1)+(f.linewidth||0),D=0,P=N.crispRound(e,f.gridwidth,1),j=N.crispRound(e,f.zerolinewidth,P),F=N.crispRound(e,f.tickwidth,1);if(f._counterangle&&"outside"===f.ticks){var I=f._counterangle*Math.PI/180;_=f.ticklen*Math.cos(I)+(f.linewidth||0),D=f.ticklen*Math.sin(I)}if("x"===m)h=["bottom","top"],p=function(e){return"translate("+f.l2p(e.x)+",0)"},d=function(e,t){if(f._counterangle){var n=f._counterangle*Math.PI/180;return"M0,"+e+"l"+Math.sin(n)*t+","+Math.cos(n)*t}return"M0,"+e+"v"+t};else{if("y"!==m)return void E.warn("Unrecognized doTicks axis:",t);h=["left","right"],p=function(e){return"translate(0,"+f.l2p(e.x)+")"},d=function(e,t){if(f._counterangle){var n=f._counterangle*Math.PI/180;return"M"+e+",0l"+Math.cos(n)*t+","+ -Math.sin(n)*t}return"M"+e+",0h"+t}}var q=f.side||h[0],R=[-1,1,q===h[1]?1:-1];"inside"!==f.ticks==("x"===m)&&(R=R.map(function(e){return-e}));var U=C.filter(r);if(c){if(i(f._axislayer,d(f._pos+M*R[2],R[2]*f.ticklen)),f._counteraxis){var z={gridlayer:f._gridlayer,zerolinelayer:f._zerolinelayer};a(z,f._counteraxis)}return s(f._axislayer,f._pos)}var W=H.getSubplots(e,f).map(function(e){var t=l._plots[e];if(l._has("cartesian")){var n=t[m+"axislayer"],r=f._linepositions[e]||[],o=t[g+"axis"],u=o._id===f.anchor,c=[!1,!1,!1],p="";if("allticks"===f.mirror?c=[!0,!0,!1]:u&&("ticks"===f.mirror?c=[!0,!0,!1]:c[h.indexOf(q)]=!0),f.mirrors)for(v=0;v<2;v++){var y=f.mirrors[o._id+h[v]];"ticks"!==y&&"labels"!==y||(c[v]=!0)}return void 0!==r[2]&&(c[2]=!0),c.forEach(function(e,t){var n=r[t],i=R[t];e&&b(n)&&(p+=d(n+M*i,i*f.ticklen))}),i(n,p),a(t,o,e),s(n,r[3])}}).filter(function(e){return e&&e.then});return W.length?Promise.all(W):0},H.swap=function(e,t){for(var n=d(e,t),r=0;r<n.length;r++)m(e,n[r].x,n[r].y)}},{"../../components/color":557,"../../components/drawing":580,"../../components/titles":631,"../../constants/numerical":640,"../../lib":657,"../../lib/svg_text_utils":672,"../../registry":764,"./axis_ids":692,"./layout_attributes":698,"./layout_defaults":699,"./set_convert":703,d3:97,"fast-isnumeric":106}],690:[function(e,t,n){"use strict";function r(e){if(!e)return!1;for(var t=0;t<e.length;t++)if(o(e[t]))return!0;return!1}function i(e,t){for(var n,r=0,i=0,s=Math.max(1,(e.length-1)/1e3),a=0;a<e.length;a+=s)n=e[Math.round(a)],u.isDateTime(n,t)&&(r+=1),o(n)&&(i+=1);return r>2*i}function s(e){for(var t,n=Math.max(1,(e.length-1)/1e3),r=0,i=0,s=0;s<e.length;s+=n)t=e[Math.round(s)],u.cleanNumber(t)!==a?r++:"string"==typeof t&&""!==t&&"None"!==t&&i++;return i>2*r}var o=e("fast-isnumeric"),u=e("../../lib"),a=e("../../constants/numerical").BADNUM;t.exports=function(e,t){return i(e,t)?"date":s(e)?"category":r(e)?"linear":"-"}},{"../../constants/numerical":640,"../../lib":657,"fast-isnumeric":106}],691:[function(e,t,n){"use strict";function r(e,t){if("-"===e.type){var n=e._id,r=n.charAt(0);n.indexOf("scene")!==-1&&(n=r);var u=o(t,n,r);if(u){if("histogram"===u.type&&r==={v:"y",h:"x"}[u.orientation||"v"])return void (e.type="linear");var a=r+"calendar",l=u[a];if(s(u,r)){for(var c,h=i(u),p=[],d=0;d<t.length;d++)c=t[d],f.traceIs(c,"box")&&(c[r+"axis"]||r)===n&&(void 0!==c[h]?p.push(c[h][0]):void 0!==c.name?p.push(c.name):p.push("text"),c[a]!==l&&(l=void 0));e.type=w(p,l)}else e.type=w(u[r]||[u[r+"0"]],l)}}}function i(e){return{v:"x",h:"y"}[e.orientation||"v"]}function s(e,t){var n=i(e);return f.traceIs(e,"box")&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}function o(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if((i[n+"axis"]||n)===t){if(s(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}var u=e("fast-isnumeric"),a=e("tinycolor2").mix,f=e("../../registry"),l=e("../../lib"),c=e("../../components/color/attributes").lightFraction,h=e("./layout_attributes"),p=e("./tick_value_defaults"),d=e("./tick_mark_defaults"),v=e("./tick_label_defaults"),m=e("./category_order_defaults"),g=e("./set_convert"),y=e("./ordered_categories"),b=e("./axis_ids"),w=e("./axis_autotype");t.exports=function(e,t,n,i){function s(n,r){return l.coerce2(e,t,h,n,r)}var o=i.letter,w=i.font||{},E="Click to enter "+(i.title||o.toUpperCase()+" axis")+" title";i.name&&(t._name=i.name,t._id=b.name2id(i.name));var S=n("type");if("-"===S&&(r(t,i.data),"-"===t.type?t.type="linear":S=e.type=t.type),"date"===S){var T=f.getComponentMethod("calendars","handleDefaults");T(e,t,"calendar",i.calendar)}g(t);var N=n("color"),C=N===e.color?N:w.color;n("title",E),l.coerceFont(n,"titlefont",{family:w.family,size:Math.round(1.2*w.size),color:C});var k=2===(e.range||[]).length&&u(t.r2l(e.range[0]))&&u(t.r2l(e.range[1])),L=n("autorange",!k);L&&n("rangemode"),n("range"),t.cleanRange(),n("fixedrange"),p(e,t,n,S),v(e,t,n,S,i),d(e,t,n,i),m(e,t,n);var A=s("linecolor",N),O=s("linewidth"),M=n("showline",!!A||!!O);M||(delete t.linecolor,delete t.linewidth),(M||t.ticks)&&n("mirror");var _=s("gridcolor",a(N,i.bgColor,c).toRgbString()),D=s("gridwidth"),P=n("showgrid",i.showGrid||!!_||!!D);P||(delete t.gridcolor,delete t.gridwidth);var H=s("zerolinecolor",N),B=s("zerolinewidth"),j=n("zeroline",i.showGrid||!!H||!!B);return j||(delete t.zerolinecolor,delete t.zerolinewidth),t._initialCategories="category"===S?y(o,t.categoryorder,t.categoryarray,i.data):[],t}},{"../../components/color/attributes":556,"../../lib":657,"../../registry":764,"./axis_autotype":690,"./axis_ids":692,"./category_order_defaults":693,"./layout_attributes":698,"./ordered_categories":700,"./set_convert":703,"./tick_label_defaults":704,"./tick_mark_defaults":705,"./tick_value_defaults":706,"fast-isnumeric":106,tinycolor2:495}],692:[function(e,t,n){"use strict";function r(e,t,n){function r(e,n){for(var r=Object.keys(e),i=/^[xyz]axis[0-9]*/,s=[],o=0;o<r.length;o++){var u=r[o];t&&u.charAt(0)!==t||i.test(u)&&s.push(n+u)}return s.sort()}var i=e._fullLayout;if(!i)return[];var o=r(i,"");if(n)return o;for(var u=s.getSubplotIds(i,"gl3d")||[],f=0;f<u.length;f++){var l=u[f];o=o.concat(r(i[l],l+"."))}return o}var i=e("../../registry"),s=e("../plots"),o=e("../../lib"),u=e("./constants");n.id2name=function(e){if("string"==typeof e&&e.match(u.AX_ID_PATTERN)){var t=e.substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},n.name2id=function(e){if(e.match(u.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},n.cleanId=function(e,t){if(e.match(u.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)){var n=e.substr(1).replace(/^0+/,"");return"1"===n&&(n=""),e.charAt(0)+n}},n.list=function(e,t,n){return r(e,t,n).map(function(t){return o.nestedProperty(e._fullLayout,t).get()})},n.listIds=function(e,t){return r(e,t,!0).map(n.name2id)},n.getFromId=function(e,t,r){var i=e._fullLayout;return"x"===r?t=t.replace(/y[0-9]*/,""):"y"===r&&(t=t.replace(/x[0-9]*/,"")),i[n.id2name(t)]},n.getFromTrace=function(e,t,r){var s=e._fullLayout,o=null;if(i.traceIs(t,"gl3d")){var u=t.scene;"scene"===u.substr(0,5)&&(o=s[u][r+"axis"])}else o=n.getFromId(e,t[r+"axis"]||r);return o}},{"../../lib":657,"../../registry":764,"../plots":749,"./constants":694}],693:[function(e,t,n){"use strict";t.exports=function(e,t,n){if("category"===t.type){var r,i=e.categoryarray,s=Array.isArray(i)&&i.length>0;s&&(r="array");var o=n("categoryorder",r);"array"===o&&n("categoryarray"),s||"array"!==o||(t.categoryorder="trace")}}},{}],694:[function(e,t,n){"use strict";t.exports={idRegex:{x:/^x([2-9]|[1-9][0-9]+)?$/,y:/^y([2-9]|[1-9][0-9]+)?$/},attrRegex:{x:/^xaxis([2-9]|[1-9][0-9]+)?$/,y:/^yaxis([2-9]|[1-9][0-9]+)?$/},xAxisMatch:/^xaxis[0-9]*$/,yAxisMatch:/^yaxis[0-9]*$/,AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,DBLCLICKDELAY:300,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,MAXDIST:20,YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,BENDPX:1.5,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4]}},{}],695:[function(e,t,n){"use strict";function r(e,t){var n,r=e.range[t],i=Math.abs(r-e.range[1-t]);return"date"===e.type?r:"log"===e.type?(n=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,u.format("."+n+"g")(Math.pow(10,r))):(n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,u.format("."+String(n)+"g")(r))}function i(e,t){return e?"nsew"===e?"pan"===t?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}function s(e){u.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function o(e){var t=["lasso","select"];return t.indexOf(e)!==-1}var u=e("d3"),a=e("tinycolor2"),f=e("../../plotly"),l=e("../../registry"),c=e("../../lib"),h=e("../../lib/svg_text_utils"),p=e("../../components/color"),d=e("../../components/drawing"),v=e("../../lib/setcursor"),m=e("../../components/dragelement"),g=e("./axes"),y=e("./select"),b=e("./constants"),w=!0;t.exports=function(e,t,n,u,E,S,T,N){function C(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function k(){U=[t.xaxis],z=[t.yaxis],W=U[0]._length,X=z[0]._length;for(var e=1;e<R.length;e++){var n=R[e].xaxis,r=R[e].yaxis;U.indexOf(n)===-1&&U.push(n),z.indexOf(r)===-1&&z.push(r)}Y=U.concat(z),Z=C(U,N),et=C(z,T),tt=i(et+Z,q.dragmode),mt=t.xaxis._offset,gt=t.yaxis._offset,st.xa=U,st.ya=z}function L(t,n,r){var i=it.getBoundingClientRect();ot=n-i.left,ut=r-i.top,at={l:ot,r:ot,w:0,t:ut,b:ut,h:0},ft=e._hmpixcount?e._hmlumcount/e._hmpixcount:a(e._fullLayout.plot_bgcolor).getLuminance(),lt="M0,0H"+W+"V"+X+"H0V0",ct=!1,ht="xy",pt=vt.append("path").attr("class","zoombox").style({fill:ft>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+mt+", "+gt+")").attr("d",lt+"Z"),dt=vt.append("path").attr("class","zoombox-corners").style({fill:p.background,stroke:p.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+mt+", "+gt+")").attr("d","M0,0Z"),A()}function A(){vt.selectAll(".select-outline").remove()}function O(t,n){if(e._transitioningWithDuration)return!1;var r=Math.max(0,Math.min(W,t+ot)),i=Math.max(0,Math.min(X,n+ut)),s=Math.abs(r-ot),o=Math.abs(i-ut),u=Math.floor(Math.min(o,s,$)/2);at.l=Math.min(ot,r),at.r=Math.max(ot,r),at.t=Math.min(ut,i),at.b=Math.max(ut,i),!et||o<Math.min(Math.max(.6*s,V),$)?s<V?(ht="",at.r=at.l,at.t=at.b,dt.attr("d","M0,0Z")):(at.t=0,at.b=X,ht="x",dt.attr("d","M"+(at.l-.5)+","+(ut-$-.5)+"h-3v"+(2*$+1)+"h3ZM"+(at.r+.5)+","+(ut-$-.5)+"h3v"+(2*$+1)+"h-3Z")):!Z||s<Math.min(.6*o,$)?(at.l=0,at.r=W,ht="y",dt.attr("d","M"+(ot-$-.5)+","+(at.t-.5)+"v-3h"+(2*$+1)+"v3ZM"+(ot-$-.5)+","+(at.b+.5)+"v3h"+(2*$+1)+"v-3Z")):(ht="xy",dt.attr("d","M"+(at.l-3.5)+","+(at.t-.5+u)+"h3v"+ -u+"h"+u+"v-3h-"+(u+3)+"ZM"+(at.r+3.5)+","+(at.t-.5+u)+"h-3v"+ -u+"h"+ -u+"v-3h"+(u+3)+"ZM"+(at.r+3.5)+","+(at.b+.5-u)+"h-3v"+u+"h"+ -u+"v3h"+(u+3)+"ZM"+(at.l-3.5)+","+(at.b+.5-u)+"h3v"+u+"h"+u+"v3h-"+(u+3)+"Z")),at.w=at.r-at.l,at.h=at.b-at.t,pt.attr("d",lt+"M"+at.l+","+at.t+"v"+at.h+"h"+at.w+"v-"+at.h+"h-"+at.w+"Z"),ct||(pt.transition().style("fill",ft>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),dt.transition().style("opacity",1).duration(200),ct=!0)}function M(e,t,n){var r,i,s,o;for(r=0;r<e.length;r++)i=e[r],i.fixedrange||(s=i._rl[0],o=i._rl[1]-s,i.range=[i.l2r(s+o*t),i.l2r(s+o*n)])}function _(t,n){return Math.min(at.h,at.w)<2*V?(2===n&&j(),s(e)):("xy"!==ht&&"x"!==ht||M(U,at.l/W,at.r/W),"xy"!==ht&&"y"!==ht||M(z,(X-at.b)/X,(X-at.t)/X),s(e),F(ht),void (w&&e.data&&e._context.showTips&&(c.notifier("Double-click to<br>zoom back out","long"),w=!1)))}function D(t,n){var i=1===(T+N).length;if(t)F();else if(2!==n||i){if(1===n&&i){var s=T?z[0]:U[0],o="s"===T||"w"===N?0:1,u=s._name+".range["+o+"]",a=r(s,o),l="left",c="middle";if(s.fixedrange)return;T?(c="n"===T?"top":"bottom","right"===s.side&&(l="right")):"e"===N&&(l="right"),rt.call(h.makeEditable,null,{immediate:!0,background:q.paper_bgcolor,text:String(a),fill:s.tickfont?s.tickfont.color:"#444",horizontalAlign:l,verticalAlign:c}).on("edit",function(t){var n=s.d2r(t);void 0!==n&&f.relayout(e,u,n)})}}else j()}function P(t){function n(e,t,n){function r(t){return e.l2r(s+(t-s)*n)}if(!e.fixedrange){var i=c.simpleMap(e.range,e.r2l),s=i[0]+(i[1]-i[0])*t;e.range=i.map(r)}}if(e._context.scrollZoom||q._enablescrollzoom){if(e._transitioningWithDuration)return c.pauseEvent(t);var r=e.querySelector(".plotly");if(k(),!(r.scrollHeight-r.clientHeight>10||r.scrollWidth-r.clientWidth>10)){clearTimeout(bt);var i=-t.deltaY;if(isFinite(i)||(i=t.wheelDelta/10),!isFinite(i))return void c.log("Did not find wheel motion attributes: ",t);var s,o=Math.exp(-Math.min(Math.max(i,-20),20)/100),u=Et.draglayer.select(".nsewdrag").node().getBoundingClientRect(),a=(t.clientX-u.left)/u.width,f=yt[0]+yt[2]*a,l=(u.bottom-t.clientY)/u.height,h=yt[1]+yt[3]*(1-l);if(N){for(s=0;s<U.length;s++)n(U[s],a,o);yt[2]*=o,yt[0]=f-yt[2]*a}if(T){for(s=0;s<z.length;s++)n(z[s],l,o);yt[3]*=o,yt[1]=h-yt[3]*(1-l)}return I(yt),B(T,N),bt=setTimeout(function(){yt=[0,0,W,X],F()},wt),c.pauseEvent(t)}}}function H(t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.fixedrange||(r.range=[r.l2r(r._rl[0]-t/r._m),r.l2r(r._rl[1]-t/r._m)])}}function i(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-0.3)+3.222))}function s(e,t,n){for(var r,s,o=1-t,u=0;u<e.length;u++){var a=e[u];if(!a.fixedrange){r=a,s=a._rl[o]+(a._rl[t]-a._rl[o])/i(n/a._length);var f=a.l2r(s);f!==!1&&void 0!==f&&(a.range[t]=f)}}return r._length*(r._rl[t]-s)/(r._rl[t]-r._rl[o])}if(!e._transitioningWithDuration){if(k(),"ew"===Z||"ns"===et)return Z&&r(U,t),et&&r(z,n),I([Z?-t:0,et?-n:0,W,X]),void B(et,Z);"w"===Z?t=s(U,0,t):"e"===Z?t=s(U,1,-t):Z||(t=0),"n"===et?n=s(z,1,n):"s"===et?n=s(z,0,-n):et||(n=0),I(["w"===Z?t:0,"n"===et?n:0,W-t,X-n]),B(et,Z)}}function B(t,n){function r(e){for(s=0;s<e.length;s++)e[s].fixedrange||o.push(e[s]._id)}function i(r,i){for(s=0;s<r.length;s++){var u=r[s];(n&&o.indexOf(u.xref)!==-1||t&&o.indexOf(u.yref)!==-1)&&i(e,s)}}var s,o=[];for(n&&r(U),t&&r(z),s=0;s<o.length;s++)g.doTicks(e,o[s],!0);i(q.annotations||[],l.getComponentMethod("annotations","drawOne")),i(q.shapes||[],l.getComponentMethod("shapes","drawOne")),i(q.images||[],l.getComponentMethod("images","draw"))}function j(){if(!e._transitioningWithDuration){var t,n,r,i=e._context.doubleClick,s=(Z?U:[]).concat(et?z:[]),o={};if("autosize"===i)for(n=0;n<s.length;n++)t=s[n],t.fixedrange||(o[t._name+".autorange"]=!0);else if("reset"===i)for(n=0;n<s.length;n++)t=s[n],t._rangeInitial?(r=t._rangeInitial.slice(),o[t._name+".range[0]"]=r[0],o[t._name+".range[1]"]=r[1]):o[t._name+".autorange"]=!0;else if("reset+autosize"===i)for(n=0;n<s.length;n++)t=s[n],t.fixedrange||(void 0===t._rangeInitial||t.range[0]===t._rangeInitial[0]&&t.range[1]===t._rangeInitial[1]?o[t._name+".autorange"]=!0:(r=t._rangeInitial.slice(),o[t._name+".range[0]"]=r[0],o[t._name+".range[1]"]=r[1]));e.emit("plotly_doubleclick",null),f.relayout(e,o)}}function F(t){for(var n={},r=0;r<Y.length;r++){var i=Y[r];t&&t.indexOf(i._id.charAt(0))===-1||(i._r[0]!==i.range[0]&&(n[i._name+".range[0]"]=i.range[0]),i._r[1]!==i.range[1]&&(n[i._name+".range[1]"]=i.range[1]),i.range=i._r.slice())}I([0,0,W,X]),f.relayout(e,n)}function I(e){for(var t,n=q._plots,r=Object.keys(n),i=0;i<r.length;i++){var s=n[r[i]],o=s.xaxis,u=s.yaxis,a=N&&!o.fixedrange,f=T&&!u.fixedrange;if(a){var l=!1;for(t=0;t<U.length;t++)if(U[t]._id===o._id){l=!0;break}a=a&&l}if(f){var h=!1;for(t=0;t<z.length;t++)if(z[t]._id===u._id){h=!0;break}f=f&&h}var p=a?o._length/e[2]:1,d=f?u._length/e[3]:1,v=a?e[0]:0,m=f?e[1]:0,g=a?e[0]/e[2]*o._length:0,y=f?e[1]/e[3]*u._length:0,b=o._offset-g,w=u._offset-y;q._defs.selectAll("#"+s.clipId).call(c.setTranslate,v,m).call(c.setScale,1/p,1/d),s.plot.call(c.setTranslate,b,w).call(c.setScale,p,d).selectAll(".points").selectAll(".point").call(c.setPointGroupScale,1/p,1/d)}}for(var q=e._fullLayout,R=[t].concat(T&&N?t.overlays:[]),U=[t.xaxis],z=[t.yaxis],W=U[0]._length,X=z[0]._length,V=b.MINDRAG,$=b.MINZOOM,J=T+N==="nsew",K=1;K<R.length;K++){var Q=R[K].xaxis,G=R[K].yaxis;U.indexOf(Q)===-1&&U.push(Q),z.indexOf(G)===-1&&z.push(G)}var Y=U.concat(z),Z=C(U,N),et=C(z,T),tt=i(et+Z,q.dragmode),nt=T+N+"drag",rt=t.draglayer.selectAll("."+nt).data([0]);rt.enter().append("rect").classed("drag",!0).classed(nt,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id),rt.call(d.setRect,n,u,E,S).call(v,tt);var it=rt.node();if(!et&&!Z&&!o(q.dragmode))return it.onmousedown=null,it.style.pointerEvents=J?"all":"none",it;var st={element:it,gd:e,plotinfo:t,xaxes:U,yaxes:z,doubleclick:j,prepFn:function(t,n,r){var i=e._fullLayout.dragmode;J?t.shiftKey&&(i="pan"===i?"zoom":"pan"):i="pan","lasso"===i?st.minDrag=1:st.minDrag=void 0,"zoom"===i?(st.moveFn=O,st.doneFn=_,L(t,n,r)):"pan"===i?(st.moveFn=H,st.doneFn=D,A()):o(i)&&y(t,n,r,st,i)}};m.init(st);var ot,ut,at,ft,lt,ct,ht,pt,dt,vt=e._fullLayout._zoomlayer,mt=t.xaxis._offset,gt=t.yaxis._offset,yt=[0,0,W,X],bt=null,wt=b.REDRAWDELAY,Et=t.mainplot?q._plots[t.mainplot]:t;return T.length*N.length!==1&&(void 0!==it.onwheel?it.onwheel=P:void 0!==it.onmousewheel&&(it.onmousewheel=P)),it}},{"../../components/color":557,"../../components/dragelement":578,"../../components/drawing":580,"../../lib":657,"../../lib/setcursor":668,"../../lib/svg_text_utils":672,"../../plotly":684,"../../registry":764,"./axes":689,"./constants":694,"./select":702,d3:97,tinycolor2:495}],696:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=e.length;r>0;r--)n.push(t);return n}function i(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].p2c(t));return n}function s(e,t){return function(n){var r=e(n),i=t(n);return Math.sqrt(r*r+i*i)}}function o(e,t,n){if("pie"===n)return void e.emit("plotly_hover",{points:[t]});n||(n="xy");var s=Array.isArray(n)?n:[n],o=e._fullLayout,p=o._plots||[],d=p[n];if(d){var y=d.overlays.map(function(e){return e.id});s=s.concat(y)}for(var w=s.length,T=new Array(w),N=new Array(w),C=0;C<w;C++){var k=s[C],L=p[k];if(L)T[C]=S.getFromId(e,L.xaxis._id),N[C]=S.getFromId(e,L.yaxis._id);else{var A=o[k]._subplot;T[C]=A.xaxis,N[C]=A.yaxis}}var O=t.hovermode||o.hovermode;if(["x","y","closest"].indexOf(O)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return E.unhoverRaw(e,t);var M,_,D,P,H,B,j,F,I,q,R,U,z,W=[],X=[];if(Array.isArray(t))for(O="array",D=0;D<t.length;D++)H=e.calcdata[t[D].curveNumber||0],"skip"!==H[0].trace.hoverinfo&&X.push(H);else{for(P=0;P<e.calcdata.length;P++)H=e.calcdata[P],B=H[0].trace,"skip"!==B.hoverinfo&&s.indexOf(u(B))!==-1&&X.push(H);var V,$;if(t.target&&"clientX"in t&&"clientY"in t){if(g.triggerHandler(e,"plotly_beforehover",t)===!1)return;var J=t.target.getBoundingClientRect();if(V=t.clientX-J.left,$=t.clientY-J.top,V<0||V>J.width||$<0||$>J.height)return E.unhoverRaw(e,t)}else V="xpx"in t?t.xpx:T[0]._length/2,$="ypx"in t?t.ypx:N[0]._length/2;if(M="xval"in t?r(s,t.xval):i(T,V),_="yval"in t?r(s,t.yval):i(N,$),!v(M[0])||!v(_[0]))return m.warn("Fx.hover failed",t,e),E.unhoverRaw(e,t)}var K=1/0;for(P=0;P<X.length;P++)if(H=X[P],H&&H[0]&&H[0].trace&&H[0].trace.visible===!0){if(B=H[0].trace,j=u(B),F=s.indexOf(j),I=O,U={cd:H,trace:B,xa:T[F],ya:N[F],name:e.data.length>1||B.hoverinfo.indexOf("name")!==-1?B.name:void 0,index:!1,distance:Math.min(K,x.MAXDIST),color:b.defaultLine,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},o[j]&&(U.subplot=o[j]._subplot),z=W.length,"array"===I){var Q=t[P];"pointNumber"in Q?(U.index=Q.pointNumber,I="closest"):(I="","xval"in Q&&(q=Q.xval,I="x"),"yval"in Q&&(R=Q.yval,I=I?"closest":"y"))}else q=M[F],R=_[F];if(B._module&&B._module.hoverPoints){var G=B._module.hoverPoints(U,q,R,I);if(G)for(var Y,Z=0;Z<G.length;Z++)Y=G[Z],v(Y.x0)&&v(Y.y0)&&W.push(a(Y,O))}else m.log("Unrecognized trace type in hover:",B);"closest"===O&&W.length>z&&(W.splice(0,z),K=W[0].distance)}if(0===W.length)return E.unhoverRaw(e,t);var et="y"===O&&X.length>1;W.sort(function(e,t){return e.distance-t.distance});var tt=b.combine(o.plot_bgcolor||b.background,o.paper_bgcolor),nt={hovermode:O,rotateLabels:et,bgColor:tt,container:o._hoverlayer,outerContainer:o._paperdiv},rt=f(W,nt);l(W,et?"xa":"ya"),c(rt,et);var it=e._hoverdata,st=[];for(D=0;D<W.length;D++){var ot=W[D],ut={data:ot.trace._input,fullData:ot.trace,curveNumber:ot.trace.index,pointNumber:ot.index};ot.trace._module.eventData?ut=ot.trace._module.eventData(ut,ot):(ut.x=ot.xVal,ut.y=ot.yVal,ut.xaxis=ot.xa,ut.yaxis=ot.ya,void 0!==ot.zLabelVal&&(ut.z=ot.zLabelVal)),st.push(ut)}e._hoverdata=st,h(e,t,it)&&(it&&e.emit("plotly_unhover",{points:it}),e.emit("plotly_hover",{points:e._hoverdata,xaxes:T,yaxes:N,xvals:M,yvals:_}))}function u(e){return e.subplot||e.xaxis+e.yaxis||e.geo}function a(e,t){e.posref="y"===t?(e.x0+e.x1)/2:(e.y0+e.y1)/2,e.x0=m.constrain(e.x0,0,e.xa._length),e.x1=m.constrain(e.x1,0,e.xa._length),e.y0=m.constrain(e.y0,0,e.ya._length),e.y1=m.constrain(e.y1,0,e.ya._length);var n;if(void 0!==e.xLabelVal){n="log"===e.xa.type&&e.xLabelVal<=0;var r=S.tickText(e.xa,e.xa.c2l(n?-e.xLabelVal:e.xLabelVal),"hover");n?0===e.xLabelVal?e.xLabel="0":e.xLabel="-"+r.text:e.xLabel=r.text,e.xVal=e.xa.c2d(e.xLabelVal)}if(void 0!==e.yLabelVal){n="log"===e.ya.type&&e.yLabelVal<=0;var i=S.tickText(e.ya,e.ya.c2l(n?-e.yLabelVal:e.yLabelVal),"hover");n?0===e.yLabelVal?e.yLabel="0":e.yLabel="-"+i.text:e.yLabel=i.text,e.yVal=e.ya.c2d(e.yLabelVal)}if(void 0!==e.zLabelVal&&(e.zLabel=String(e.zLabelVal)),!(isNaN(e.xerr)||"log"===e.xa.type&&e.xerr<=0)){var s=S.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;void 0!==e.xerrneg?e.xLabel+=" +"+s+" / -"+S.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+="  "+s,"x"===t&&(e.distance+=1)}if(!(isNaN(e.yerr)||"log"===e.ya.type&&e.yerr<=0)){var o=S.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;void 0!==e.yerrneg?e.yLabel+=" +"+o+" / -"+S.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+="  "+o,"y"===t&&(e.distance+=1)}var u=e.trace.hoverinfo;return"all"!==u&&(u=u.split("+"),u.indexOf("x")===-1&&(e.xLabel=void 0),u.indexOf("y")===-1&&(e.yLabel=void 0),u.indexOf("z")===-1&&(e.zLabel=void 0),u.indexOf("text")===-1&&(e.text=void 0),u.indexOf("name")===-1&&(e.name=void 0)),e}function f(e,t){var n,r,i=t.hovermode,s=t.rotateLabels,o=t.bgColor,u=t.container,a=t.outerContainer,f=e[0],l=f.xa,c=f.ya,h="y"===i?"yLabel":"xLabel",v=f[h],m=(String(v)||"").split(" ")[0],g=a.node().getBoundingClientRect(),E=g.top,S=g.width,T=g.height,N=f.distance<=x.MAXDIST&&("x"===i||"y"===i);for(n=0;n<e.length;n++){r=e[n].trace.hoverinfo;var C=r.split("+");if(C.indexOf("all")===-1&&C.indexOf(i)===-1){N=!1;break}}var L=u.selectAll("g.axistext").data(N?[0]:[]);L.enter().append("g").classed("axistext",!0),L.exit().remove(),L.each(function(){var t=p.select(this),n=t.selectAll("path").data([0]),r=t.selectAll("text").data([0]);n.enter().append("path").style({fill:b.defaultLine,"stroke-width":"1px",stroke:b.background}),r.enter().append("text").call(w.font,H,P,b.background).attr("data-notex",1),r.text(v).call(y.convertToTspans).call(w.setPosition,0,0).selectAll("tspan.line").call(w.setPosition,0,0),t.attr("transform","");var s=r.node().getBoundingClientRect();if("x"===i){r.attr("text-anchor","middle").call(w.setPosition,0,"top"===l.side?E-s.bottom-_-D:E-s.top+_+D).selectAll("tspan.line").attr({x:r.attr("x"),y:r.attr("y")});var o="top"===l.side?"-":"";n.attr("d","M0,0L"+_+","+o+_+"H"+(D+s.width/2)+"v"+o+(2*D+s.height)+"H-"+(D+s.width/2)+"V"+o+_+"H-"+_+"Z"),t.attr("transform","translate("+(l._offset+(f.x0+f.x1)/2)+","+(c._offset+("top"===l.side?0:c._length))+")")}else{r.attr("text-anchor","right"===c.side?"start":"end").call(w.setPosition,("right"===c.side?1:-1)*(D+_),E-s.top-s.height/2).selectAll("tspan.line").attr({x:r.attr("x"),y:r.attr("y")});var u="right"===c.side?"":"-";n.attr("d","M0,0L"+u+_+","+_+"V"+(D+s.height/2)+"h"+u+(2*D+s.width)+"V-"+(D+s.height/2)+"H"+u+_+"V-"+_+"Z"),t.attr("transform","translate("+(l._offset+("right"===c.side?l._length:0))+","+(c._offset+(f.y0+f.y1)/2)+")")}e=e.filter(function(e){return void 0!==e.zLabelVal||(e[h]||"").split(" ")[0]===m})});var A=u.selectAll("g.hovertext").data(e,function(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")});return A.enter().append("g").classed("hovertext",!0).each(function(){var e=p.select(this);e.append("rect").call(b.fill,b.addOpacity(o,.8)),e.append("text").classed("name",!0).call(w.font,H,P),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(w.font,H,P)}),A.exit().remove(),A.each(function(e){var t=p.select(this).attr("transform",""),n="",r="",u=b.opacity(e.color)?e.color:b.defaultLine,a=b.combine(u,o),f=d(a).getBrightness()>128?"#000":b.background;if(e.name&&void 0===e.zLabelVal){var l=document.createElement("p");l.innerHTML=e.name,n=l.textContent||"",n.length>15&&(n=n.substr(0,12)+"...")}void 0!==e.extraText&&(r+=e.extraText),void 0!==e.zLabel?(void 0!==e.xLabel&&(r+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(r+="y: "+e.yLabel+"<br>"),r+=(r?"z: ":"")+e.zLabel):N&&e[i+"Label"]===v?r=e[("x"===i?"y":"x")+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&(r=e.yLabel):r=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",e.text&&!Array.isArray(e.text)&&(r+=(r?"<br>":"")+e.text),""===r&&(""===n&&t.remove(),r=n);var c=t.select("text.nums").style("fill",f).call(w.setPosition,0,0).text(r).attr("data-notex",1).call(y.convertToTspans);c.selectAll("tspan.line").call(w.setPosition,0,0);var h=t.select("text.name"),m=0;n&&n!==r?(h.style("fill",a).text(n).call(w.setPosition,0,0).attr("data-notex",1).call(y.convertToTspans),h.selectAll("tspan.line").call(w.setPosition,0,0),m=h.node().getBoundingClientRect().width+2*D):(h.remove(),t.select("rect").remove()),t.select("path").style({fill:a,stroke:f});var g,x,C=c.node().getBoundingClientRect(),L=e.xa._offset+(e.x0+e.x1)/2,A=e.ya._offset+(e.y0+e.y1)/2,O=Math.abs(e.x1-e.x0),M=Math.abs(e.y1-e.y0),P=C.width+_+D+m;e.ty0=E-C.top,e.bx=C.width+2*D,e.by=C.height+2*D,e.anchor="start",e.txwidth=C.width,e.tx2width=m,e.offset=0,s?(e.pos=L,g=A+M/2+P<=T,x=A-M/2-P>=0,"top"!==e.idealAlign&&g||!x?g?(A+=M/2,e.anchor="start"):e.anchor="middle":(A-=M/2,e.anchor="end")):(e.pos=A,g=L+O/2+P<=S,x=L-O/2-P>=0,"left"!==e.idealAlign&&g||!x?g?(L+=O/2,e.anchor="start"):e.anchor="middle":(L-=O/2,e.anchor="end")),c.attr("text-anchor",e.anchor),m&&h.attr("text-anchor",e.anchor),t.attr("transform","translate("+L+","+A+")"+(s?"rotate("+k+")":""))}),A}function l(e,t){function n(e){var t=e[0],n=e[e.length-1];if(i=t.pmin-t.pos-t.dp+t.size,s=n.pos+n.dp+n.size-t.pmax,i>.01){for(u=e.length-1;u>=0;u--)e[u].dp+=i;r=!1}if(!(s<.01)){if(i<-0.01){for(u=e.length-1;u>=0;u--)e[u].dp-=s;r=!1}if(r){var f=0;for(o=0;o<e.length;o++)a=e[o],a.pos+a.dp+a.size>t.pmax&&f++;for(o=e.length-1;o>=0&&!(f<=0);o--)a=e[o],a.pos>t.pmax-1&&(a.del=!0,f--);for(o=0;o<e.length&&!(f<=0);o++)if(a=e[o],a.pos<t.pmin+1)for(a.del=!0,f--,s=2*a.size,u=e.length-1;u>=0;u--)e[u].dp-=s;for(o=e.length-1;o>=0&&!(f<=0);o--)a=e[o],a.pos+a.dp+a.size>t.pmax&&(a.del=!0,f--)}}}for(var r,i,s,o,u,a,f,l=0,c=e.map(function(e,n){var r=e[t];return[{i:n,dp:0,pos:e.pos,posref:e.posref,size:e.by*("x"===r._id.charAt(0)?A:1)/2,pmin:r._offset,pmax:r._offset+r._length}]}).sort(function(e,t){return e[0].posref-t[0].posref});!r&&l<=e.length;){for(l++,r=!0,o=0;o<c.length-1;){var h=c[o],p=c[o+1],d=h[h.length-1],v=p[0];if(i=d.pos+d.dp+d.size-v.pos-v.dp+v.size,i>.01&&d.pmin===v.pmin&&d.pmax===v.pmax){for(u=p.length-1;u>=0;u--)p[u].dp+=i;for(h.push.apply(h,p),c.splice(o+1,1),f=0,u=h.length-1;u>=0;u--)f+=h[u].dp;for(s=f/h.length,u=h.length-1;u>=0;u--)h[u].dp-=s;r=!1}else o++}c.forEach(n)}for(o=c.length-1;o>=0;o--){var m=c[o];for(u=m.length-1;u>=0;u--){var g=m[u],y=e[g.i];y.offset=g.dp,y.del=g.del}}}function c(e,t){e.each(function(e){var n=p.select(this);if(e.del)return void n.remove();var r="end"===e.anchor?-1:1,i=n.select("text.nums"),s={start:1,end:-1,middle:0}[e.anchor],o=s*(_+D),u=o+s*(e.txwidth+D),a=0,f=e.offset;"middle"===e.anchor&&(o-=e.tx2width/2,u-=e.tx2width/2),t&&(f*=-M,a=e.offset*O),n.select("path").attr("d","middle"===e.anchor?"M-"+e.bx/2+",-"+e.by/2+"h"+e.bx+"v"+e.by+"h-"+e.bx+"Z":"M0,0L"+(r*_+a)+","+(_+f)+"v"+(e.by/2-_)+"h"+r*e.bx+"v-"+e.by+"H"+(r*_+a)+"V"+(f-_)+"Z"),i.call(w.setPosition,o+a,f+e.ty0-e.by/2+D).selectAll("tspan.line").attr({x:i.attr("x"),y:i.attr("y")}),e.tx2width&&(n.select("text.name, text.name tspan.line").call(w.setPosition,u+s*D+a,f+e.ty0-e.by/2+D),n.select("rect").call(w.setRect,u+(s-1)*e.tx2width/2+a,f-e.by/2-1,e.tx2width,e.by+2))})}function h(e,t,n){if(!t.target)return!1;if(!n||n.length!==e._hoverdata.length)return!0;for(var r=n.length-1;r>=0;r--){var i=n[r],s=e._hoverdata[r];if(i.curveNumber!==s.curveNumber||String(i.pointNumber)!==String(s.pointNumber))return!0}return!1}var p=e("d3"),d=e("tinycolor2"),v=e("fast-isnumeric"),m=e("../../lib"),g=e("../../lib/events"),y=e("../../lib/svg_text_utils"),b=e("../../components/color"),w=e("../../components/drawing"),E=e("../../components/dragelement"),S=e("./axes"),x=e("./constants"),T=e("./dragbox"),N=e("../layout_attributes"),C=t.exports={};C.unhover=E.unhover,C.layoutAttributes={},C.supplyLayoutDefaults=function(e,t,n){function r(n,r){return m.coerce(e,t,N,n,r)}r("dragmode");var i;if(t._has("cartesian")){var s=t._isHoriz=C.isHoriz(n);i=s?"y":"x"}else i="closest";r("hovermode",i)},C.isHoriz=function(e){for(var t=!0,n=0;n<e.length;n++){var r=e[n];if("h"!==r.orientation){t=!1;break}}return t},C.init=function(e){var t=e._fullLayout;if(t._has("cartesian")&&!e._context.staticPlot){var n=Object.keys(t._plots||{}).sort(function(e,n){if((t._plots[e].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var r=e.split("y"),i=n.split("y");return r[0]===i[0]?Number(r[1]||1)-Number(i[1]||1):Number(r[0]||1)-Number(i[0]||1)}return t._plots[e].mainplot?1:-1});n.forEach(function(n){var r=t._plots[n];if(t._has("cartesian")){var i=r.xaxis,s=r.yaxis,o=(i._linepositions[n]||[])[3],u=(s._linepositions[n]||[])[3],a=x.DRAGGERSIZE;if(v(o)&&"top"===i.side&&(o-=a),v(u)&&"right"!==s.side&&(u-=a),!r.mainplot){var f=T(e,r,0,0,i._length,s._length,"ns","ew");f.onmousemove=function(r){C.hover(e,r,n),t._lasthover=f,t._hoversubplot=n},f.onmouseout=function(t){e._dragging||E.unhover(e,t)},f.onclick=function(t){C.click(e,t)},T(e,r,-a,-a,a,a,"n","w"),T(e,r,i._length,-a,a,a,"n","e"),T(e,r,-a,s._length,a,a,"s","w"),T(e,r,i._length,s._length,a,a,"s","e")}v(o)&&("free"===i.anchor&&(o-=t._size.h*(1-s.domain[1])),T(e,r,.1*i._length,o,.8*i._length,a,"","ew"),T(e,r,0,o,.1*i._length,a,"","w"),T(e,r,.9*i._length,o,.1*i._length,a,"","e")),v(u)&&("free"===s.anchor&&(u-=t._size.w*i.domain[0]),T(e,r,u,.1*s._length,a,.8*s._length,"ns",""),T(e,r,u,.9*s._length,a,.1*s._length,"s",""),T(e,r,u,0,a,.1*s._length,"n",""))}});var r=t._hoverlayer.node();r.onmousemove=function(n){n.target=t._lasthover,C.hover(e,n,t._hoversubplot)},r.onclick=function(n){n.target=t._lasthover,C.click(e,n)},r.onmousedown=function(e){t._lasthover.onmousedown(e)}}};var k=x.YANGLE,L=Math.PI*k/180,A=1/Math.sin(L),O=Math.cos(L),M=Math.sin(L),_=x.HOVERARROWSIZE,D=x.HOVERTEXTPAD,P=x.HOVERFONTSIZE,H=x.HOVERFONT;C.hover=function(e,t,n){return"string"==typeof e&&(e=document.getElementById(e)),void 0===e._lastHoverTime&&(e._lastHoverTime=0),void 0!==e._hoverTimer&&(clearTimeout(e._hoverTimer),e._hoverTimer=void 0),Date.now()>e._lastHoverTime+x.HOVERMINTIME?(o(e,t,n),void (e._lastHoverTime=Date.now())):void (e._hoverTimer=setTimeout(function(){o(e,t,n),e._lastHoverTime=Date.now(),e._hoverTimer=void 0},x.HOVERMINTIME))},C.getDistanceFunction=function(e,t,n,r){return"closest"===e?r||s(t,n):"x"===e?t:n},C.getClosest=function(e,t,n){if(n.index!==!1)n.index>=0&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var i=t(e[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},C.loneHover=function(e,t){var n={color:e.color||b.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},r=p.select(t.container),i=t.outerContainer?p.select(t.outerContainer):r,s={hovermode:"closest",rotateLabels:!1,bgColor:t.bgColor||b.background,container:r,outerContainer:i},o=f([n],s);return c(o,s.rotateLabels),o.node()},C.loneUnhover=function(e){var t=e instanceof p.selection?e:p.select(e);t.selectAll("g.hovertext").remove()},C.click=function(e,t){e._hoverdata&&t&&t.target&&(e.emit("plotly_click",{points:e._hoverdata}),t.stopImmediatePropagation&&t.stopImmediatePropagation())},C.inbox=function(e,t){return e*t<0||0===e?x.MAXDIST*(.6-.3/Math.max(3,Math.abs(e-t))):1/0}},{"../../components/color":557,"../../components/dragelement":578,"../../components/drawing":580,"../../lib":657,"../../lib/events":649,"../../lib/svg_text_utils":672,"../layout_attributes":740,"./axes":689,"./constants":694,"./dragbox":695,d3:97,"fast-isnumeric":106,tinycolor2:495}],697:[function(e,t,n){"use strict";function r(e,t,n,r,i){var s=e._fullLayout,o=s._modules;t.plot&&t.plot.selectAll("g:not(.scatterlayer)").selectAll("g.trace").remove();for(var u=0;u<o.length;u++){var a=o[u];if("cartesian"===a.basePlotModule.name){for(var f=[],l=0;l<n.length;l++){var c=n[l],h=c[0].trace;h._module===a&&h.visible===!0&&f.push(c)}a.plot(e,t,f,r,i)}}}function i(e){for(var t=e._fullLayout,n=Object.keys(t._plots),r=[],i=[],s=0;s<n.length;s++){var o=n[s],u=t._plots[o],a=u.xaxis,f=u.yaxis,l=c.getFromId(e,a.overlaying)||a;l!==a&&l.overlaying&&(l=a,a.overlaying=!1);var h=c.getFromId(e,f.overlaying)||f;h!==f&&h.overlaying&&(h=f,f.overlaying=!1);var p=l._id+h._id;p!==o&&n.indexOf(p)!==-1?(u.mainplot=p,u.mainplotinfo=t._plots[p],i.push(o),a.domain=l.domain.slice(),f.domain=h.domain.slice()):r.push(o)}return r=r.concat(i)}function s(e){function t(e){u(e,"g","imagelayer"),u(e,"g","maplayer"),u(e,"g","barlayer"),u(e,"g","boxlayer"),u(e,"g","scatterlayer")}var n=e.plotgroup,r=e.id;if(e.mainplot){var i=e.mainplotinfo;e.gridlayer=u(i.overgrid,"g",r),e.zerolinelayer=u(i.overzero,"g",r),e.plot=u(i.overplot,"g",r),e.xlines=u(i.overlines,"path",r),e.ylines=u(i.overlines,"path",r),e.xaxislayer=u(i.overaxes,"g",r),e.yaxislayer=u(i.overaxes,"g",r)}else{e.bg=u(n,"rect","bg"),e.bg.style("stroke-width",0);var s=u(n,"g","layer-subplot");e.shapelayer=u(s,"g","shapelayer"),e.imagelayer=u(s,"g","imagelayer"),e.gridlayer=u(n,"g","gridlayer"),e.overgrid=u(n,"g","overgrid"),e.zerolinelayer=u(n,"g","zerolinelayer"),e.overzero=u(n,"g","overzero"),e.plot=u(n,"g","plot"),e.overplot=u(n,"g","overplot"),e.xlines=u(n,"path","xlines"),e.ylines=u(n,"path","ylines"),e.overlines=u(n,"g","overlines"),e.xaxislayer=u(n,"g","xaxislayer"),e.yaxislayer=u(n,"g","yaxislayer"),e.overaxes=u(n,"g","overaxes")}e.plot.call(t),e.xlines.style("fill","none").classed("crisp",!0),e.ylines.style("fill","none").classed("crisp",!0)}function o(e,t){e&&e.each(function(e){var n=a.select(this),r="clip"+t._uid+e+"plot";n.remove(),t._draggers.selectAll("g."+e).remove(),t._defs.select("#"+r).remove()})}function u(e,t,n){var r=e.selectAll("."+n).data([0]);return r.enter().append(t).classed(n,!0),r}var a=e("d3"),f=e("../../lib"),l=e("../plots"),c=e("./axes"),h=e("./constants");n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=h.idRegex,n.attrRegex=h.attrRegex,n.attributes=e("./attributes"),n.layoutAttributes=e("./layout_attributes"),n.transitionAxes=e("./transition_axes"),n.plot=function(e,t,n,i){var s,o=e._fullLayout,u=l.getSubplotIds(o,"cartesian"),a=e.calcdata;if(!Array.isArray(t))for(t=[],s=0;s<a.length;s++)t.push(s);for(s=0;s<u.length;s++){for(var f,c=u[s],h=o._plots[c],p=[],d=0;d<a.length;d++){var v=a[d],m=v[0].trace;m.xaxis+m.yaxis===c&&(t.indexOf(m.index)!==-1&&(f&&f[0].trace.xaxis+f[0].trace.yaxis===c&&["tonextx","tonexty","tonext"].indexOf(m.fill)!==-1&&p.indexOf(f)===-1&&p.push(f),p.push(v)),f=v)}r(e,h,p,n,i)}},n.clean=function(e,t,n,r){var i,s,u,a=r._modules||[],f=t._modules||[];for(u=0;u<a.length;u++)if("scatter"===a[u].name){i=!0;break}for(u=0;u<f.length;u++)if("scatter"===f[u].name){s=!0;break}if(i&&!s){var l=r._plots,c=Object.keys(l||{});for(u=0;u<c.length;u++){var h=l[c[u]];h.plot&&h.plot.select("g.scatterlayer").selectAll("g.trace").remove()}}var p=r._has&&r._has("cartesian"),d=t._has&&t._has("cartesian");if(p&&!d){var v=r._cartesianlayer.selectAll(".subplot");v.call(o,r),r._defs.selectAll(".axesclip").remove()}},n.drawFramework=function(e){var t=e._fullLayout,n=i(e),r=t._cartesianlayer.selectAll(".subplot").data(n,f.identity);r.enter().append("g").attr("class",function(e){return"subplot "+e}),r.order(),r.exit().call(o,t),r.each(function(e){var n=t._plots[e];if(n.plotgroup=a.select(this),n.overlays=[],s(n),n.mainplot){var r=t._plots[n.mainplot];r.overlays.push(n)}n.draglayer=u(t._draggers,"g",e)})},n.rangePlot=function(e,t,n){s(t),r(e,t,n),l.style(e)}},{"../../lib":657,"../plots":749,"./attributes":688,"./axes":689,"./constants":694,"./layout_attributes":698,"./transition_axes":707,d3:97}],698:[function(e,t,n){"use strict";var r=e("../font_attributes"),i=e("../../components/color/attributes"),s=e("../../lib/extend").extendFlat,o=e("./constants");t.exports={color:{valType:"color",dflt:i.defaultLine},title:{valType:"string"},titlefont:s({},r,{}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal"},range:{valType:"info_array",items:[{valType:"any"},{valType:"any"}]},fixedrange:{valType:"boolean",dflt:!1},tickmode:{valType:"enumerated",values:["auto","linear","array"]},nticks:{valType:"integer",min:0,dflt:0},tick0:{valType:"any"},dtick:{valType:"any"},tickvals:{valType:"data_array"},ticktext:{valType:"data_array"},ticks:{valType:"enumerated",values:["outside","inside",""]},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1},ticklen:{valType:"number",min:0,dflt:5},tickwidth:{valType:"number",min:0,dflt:1},tickcolor:{valType:"color",dflt:i.defaultLine},showticklabels:{valType:"boolean",dflt:!0},tickfont:s({},r,{}),tickangle:{valType:"angle",dflt:"auto"},tickprefix:{valType:"string",dflt:""},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},ticksuffix:{valType:"string",dflt:""},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B"},separatethousands:{valType:"boolean",dflt:!1},tickformat:{valType:"string",dflt:""},hoverformat:{valType:"string",dflt:""},showline:{valType:"boolean",dflt:!1},linecolor:{valType:"color",dflt:i.defaultLine},linewidth:{valType:"number",min:0,dflt:1},showgrid:{valType:"boolean"},gridcolor:{valType:"color",dflt:i.lightLine},gridwidth:{valType:"number",min:0,dflt:1},zeroline:{valType:"boolean"},zerolinecolor:{valType:"color",dflt:i.defaultLine},zerolinewidth:{valType:"number",dflt:1},anchor:{valType:"enumerated",values:["free",o.idRegex.x.toString(),o.idRegex.y.toString()]},side:{valType:"enumerated",values:["top","bottom","left","right"]},overlaying:{valType:"enumerated",values:["free",o.idRegex.x.toString(),o.idRegex.y.toString()]},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},position:{valType:"number",min:0,max:1,dflt:0},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace"},categoryarray:{valType:"data_array"},_deprecated:{autotick:{valType:"boolean"}}}},{"../../components/color/attributes":556,"../../lib/extend":650,"../font_attributes":709,"./constants":694}],699:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../lib"),s=e("../../components/color"),o=e("../layout_attributes"),u=e("./constants"),a=e("./layout_attributes"),f=e("./axis_defaults"),l=e("./position_defaults"),c=e("./axis_ids");t.exports=function(e,t,n){function p(e,t){var n=Number(e.substr(5)||1),r=Number(t.substr(5)||1);return n-r}var d,v=Object.keys(e),m=[],g=[],y=[],b=[],w={},E={};for(d=0;d<n.length;d++){var S,x,T=n[d];if(r.traceIs(T,"cartesian"))S=m,x=g;else{if(!r.traceIs(T,"gl2d"))continue;S=y,x=b}var N=c.id2name(T.xaxis),C=c.id2name(T.yaxis);if(N&&S.indexOf(N)===-1&&S.push(N),C&&x.indexOf(C)===-1&&x.push(C),r.traceIs(T,"2dMap")&&(w[N]=!0,w[C]=!0),r.traceIs(T,"oriented")){var k="h"===T.orientation?C:N;E[k]=!0}}var L=t._has("gl3d")||t._has("geo");if(!L)for(d=0;d<v.length;d++){var A=v[d];y.indexOf(A)===-1&&m.indexOf(A)===-1&&u.xAxisMatch.test(A)?m.push(A):b.indexOf(A)===-1&&g.indexOf(A)===-1&&u.yAxisMatch.test(A)&&g.push(A)}m.length&&g.length&&i.pushUnique(t._basePlotModules,r.subplotsRegistry.cartesian);var O=m.concat(y).sort(p),M=g.concat(b).sort(p),_=O.concat(M),D=s.background;O.length&&M.length&&(D=i.coerce(e,t,o,"plot_bgcolor"));var P=s.combine(D,t.paper_bgcolor);_.forEach(function(r){function s(e,t){return i.coerce(u,p,a,e,t)}var o=r.charAt(0),u=e[r]||{},p={},d={letter:o,font:t.font,outerTicks:w[r],showGrid:!E[r],name:r,data:n,bgColor:P,calendar:t.calendar},v={letter:o,counterAxes:{x:M,y:O}[o].map(c.name2id),overlayableAxes:{x:O,y:M}[o].filter(function(t){return t!==r&&!(e[t]||{}).overlaying}).map(c.name2id)};f(u,p,s,d,t),l(u,p,s,v),t[r]=p,e[r]||"-"===u.type||(e[r]={type:u.type})});var H=r.getComponentMethod("rangeslider","handleDefaults"),B=r.getComponentMethod("rangeselector","handleDefaults");_.forEach(function(n){var r=n.charAt(0),i=e[n],s=t[n],o={x:M,y:O}[r];H(e,t,n,o),"x"===r&&"date"===s.type&&B(i,s,t,o,s.calendar)})}},{"../../components/color":557,"../../lib":657,"../../registry":764,"../layout_attributes":740,"./axis_defaults":691,"./axis_ids":692,"./constants":694,"./layout_attributes":698,"./position_defaults":701}],700:[function(e,t,n){"use strict";function r(e,t,n){var r,s,o,u,a,f=[],l=n.map(function(t){return t[e]}),c=i.bisector(t).left;for(r=0;r<l.length;r++)for(o=l[r],s=0;s<o.length;s++)u=o[s],null!==u&&void 0!==u&&(a=c(f,u),a<f.length&&f[a]===u||f.splice(a,0,u));return f}var i=e("d3");t.exports=function(e,t,n,s){switch(t){case"array":return Array.isArray(n)?n.slice():[];case"category ascending":return r(e,i.ascending,s);case"category descending":return r(e,i.descending,s);case"trace":return[];default:return[]}}},{d3:97}],701:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib");t.exports=function(e,t,n,s){var o=s.counterAxes||[],u=s.overlayableAxes||[],a=s.letter,f=i.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(o),dflt:r(e.position)?"free":o[0]||"free"}},"anchor");"free"===f&&n("position"),i.coerce(e,t,{side:{valType:"enumerated",values:"x"===a?["bottom","top"]:["left","right"],dflt:"x"===a?"bottom":"left"}},"side");var l=!1;if(u.length&&(l=i.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!l){var c=n("domain");c[0]>c[1]-.01&&(t.domain=[0,1]),i.noneOrAll(e.domain,t.domain,[0,1])}return t}},{"../../lib":657,"fast-isnumeric":106}],702:[function(e,t,n){"use strict";function r(e){return e._id}var i=e("../../lib/polygon"),s=e("../../components/color"),o=e("./axes"),u=e("./constants"),a=i.filter,f=i.tester,l=u.MINSELECT;t.exports=function(e,t,n,i,h){function p(e){var t="y"===e._id.charAt(0)?1:0;return function(n){return e.p2d(n[t])}}function d(e,t){return e-t}var v,m=i.gd._fullLayout._zoomlayer,g=i.element.getBoundingClientRect(),y=i.plotinfo.xaxis._offset,b=i.plotinfo.yaxis._offset,w=t-g.left,E=n-g.top,S=w,x=E,T="M"+w+","+E,N=i.xaxes[0]._length,C=i.yaxes[0]._length,k=i.xaxes.map(r),L=i.yaxes.map(r),A=i.xaxes.concat(i.yaxes);"lasso"===h&&(v=a([[w,E]],u.BENDPX));var O=m.selectAll("path.select-outline").data([1,2]);O.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e}).attr("transform","translate("+y+", "+b+")").attr("d",T+"Z");var M,_,D,P,H,B=m.append("path").attr("class","zoombox-corners").style({fill:s.background,stroke:s.defaultLine,"stroke-width":1}).attr("transform","translate("+y+", "+b+")").attr("d","M0,0Z"),j=[],F=i.gd,I=[];for(M=0;M<F.calcdata.length;M++)if(_=F.calcdata[M],D=_[0].trace,D._module&&D._module.selectPoints)if(i.subplot){if(D.subplot!==i.subplot)continue;j.push({selectPoints:D._module.selectPoints,cd:_,xaxis:i.xaxes[0],yaxis:i.yaxes[0]})}else{if(k.indexOf(D.xaxis)===-1)continue;if(L.indexOf(D.yaxis)===-1)continue;j.push({selectPoints:D._module.selectPoints,cd:_,xaxis:o.getFromId(F,D.xaxis),yaxis:o.getFromId(F,D.yaxis)})}i.moveFn=function(e,t){var n,r;S=Math.max(0,Math.min(N,e+w)),x=Math.max(0,Math.min(C,t+E));var s=Math.abs(S-w),o=Math.abs(x-E);for("select"===h?(o<Math.min(.6*s,l)?(n=f([[w,0],[w,C],[S,C],[S,0]]),B.attr("d","M"+n.xmin+","+(E-l)+"h-4v"+2*l+"h4ZM"+(n.xmax-1)+","+(E-l)+"h4v"+2*l+"h-4Z")):s<Math.min(.6*o,l)?(n=f([[0,E],[0,x],[N,x],[N,E]]),B.attr("d","M"+(w-l)+","+n.ymin+"v-4h"+2*l+"v4ZM"+(w-l)+","+(n.ymax-1)+"v4h"+2*l+"v-4Z")):(n=f([[w,E],[w,x],[S,x],[S,E]]),B.attr("d","M0,0Z")),O.attr("d","M"+n.xmin+","+n.ymin+"H"+(n.xmax-1)+"V"+(n.ymax-1)+"H"+n.xmin+"Z")):"lasso"===h&&(v.addPt([S,x]),n=f(v.filtered),O.attr("d","M"+v.filtered.join("L")+"Z")),I=[],M=0;M<j.length;M++)P=j[M],[].push.apply(I,P.selectPoints(P,n));if(H={points:I},"select"===h){var u,a=H.range={};for(M=0;M<A.length;M++)r=A[M],u=r._id.charAt(0),a[r._id]=[r.p2d(n[u+"min"]),r.p2d(n[u+"max"])].sort(d)}else{var m=H.lassoPoints={};for(M=0;M<A.length;M++)r=A[M],m[r._id]=v.filtered.map(p(r))}i.gd.emit("plotly_selecting",H)},i.doneFn=function(e,t){if(B.remove(),e||2!==t)i.gd.emit("plotly_selected",H);else{for(O.remove(),M=0;M<j.length;M++)P=j[M],P.selectPoints(P,!1);F.emit("plotly_deselect",null)}}}},{"../../components/color":557,"../../lib/polygon":665,"./axes":689,"./constants":694}],703:[function(e,t,n){"use strict";function r(e){return Math.pow(10,e)}function i(e){return o(e)?(e=Number(e),e<-h||e>h?p:o(e)?Number(e):p):p}var s=e("d3"),o=e("fast-isnumeric"),u=e("../../lib"),a=u.cleanNumber,f=u.ms2DateTime,l=u.dateTime2ms,c=e("../../constants/numerical"),h=c.FP_SAFE,p=c.BADNUM,d=e("./constants"),v=e("./axis_ids");t.exports=function(e){function t(t,n){if(t>0)return Math.log(t)/Math.LN10;if(t<=0&&n&&e.range&&2===e.range.length){var r=e.range[0],i=e.range[1];return.5*(r+i-3*S*Math.abs(r-i))}return p}function n(t,n,r){var i=l(t,r||e.calendar);if(i===p){if(!o(t))return p;i=l(new Date(+t))}return i}function c(t,n,r){return f(t,n,r||e.calendar)}function g(t){return e._categories[Math.round(t)]}function y(t){if(null!==t&&void 0!==t){var n=e._categories.indexOf(t);return n===-1?(e._categories.push(t),e._categories.length-1):n}return p}function b(t){var n=e._categories.indexOf(t);return n!==-1?n:"number"==typeof t?t:void 0}function w(t){return o(t)?s.round(e._b+e._m*t,2):p}function E(t){return(t-e._b)/e._m}var S=10;e.c2l="log"===e.type?t:i,e.l2c="log"===e.type?r:i,e.l2p=w,e.p2l=E,e.c2p="log"===e.type?function(e,n){return w(t(e,n))}:w,e.p2c="log"===e.type?function(e){return r(E(e))}:E,["linear","-"].indexOf(e.type)!==-1?(e.d2r=e.r2d=e.d2c=e.r2c=e.d2l=e.r2l=a,e.c2d=e.c2r=e.l2d=e.l2r=i,e.d2p=e.r2p=function(e){return w(a(e))},e.p2d=e.p2r=E):"log"===e.type?(e.d2r=e.d2l=function(e,n){return t(a(e),n)},e.r2d=e.r2c=function(e){return r(a(e))},e.d2c=e.r2l=a,e.c2d=e.l2r=i,e.c2r=t,e.l2d=r,e.d2p=function(t,n){return w(e.d2r(t,n))},e.p2d=function(e){return r(E(e))},e.r2p=function(e){return w(a(e))},e.p2r=E):"date"===e.type?(e.d2r=e.r2d=u.identity,e.d2c=e.r2c=e.d2l=e.r2l=n,e.c2d=e.c2r=e.l2d=e.l2r=c,e.d2p=e.r2p=function(e,t,r){return w(n(e,0,r))},e.p2d=e.p2r=function(e,t,n){return c(E(e),t,n)}):"category"===e.type&&(e.d2r=e.d2c=e.d2l=y,e.r2d=e.c2d=e.l2d=g,e.d2l_noadd=b,e.r2l=e.l2r=e.r2c=e.c2r=i,e.d2p=function(e){return w(b(e))},e.p2d=function(e){return g(E(e))},e.r2p=w,e.p2r=E),e.fraction2r=function(t){var n=e.r2l(e.range[0]),r=e.r2l(e.range[1]);return e.l2r(n+t*(r-n))},e.r2fraction=function(t){var n=e.r2l(e.range[0]),r=e.r2l(e.range[1]);return(e.r2l(t)-n)/(r-n)},e.cleanRange=function(t){t||(t="range");var n,r,i=e[t],s=(e._id||"x").charAt(0);if(r="date"===e.type?u.dfltRange(e.calendar):"y"===s?d.DFLTRANGEY:d.DFLTRANGEX,r=r.slice(),!i||2!==i.length)return void (e[t]=r);for("date"===e.type&&(i[0]=u.cleanDate(i[0],p,e.calendar),i[1]=u.cleanDate(i[1],p,e.calendar)),n=0;n<2;n++)if("date"===e.type){if(!u.isDateTime(i[n],e.calendar)){e[t]=r;break}if(e.r2l(i[0])===e.r2l(i[1])){var a=u.constrain(e.r2l(i[0]),u.MIN_MS+1e3,u.MAX_MS-1e3);i[0]=e.l2r(a-1e3),i[1]=e.l2r(a+1e3);break}}else{if(!o(i[n])){if(!o(i[1-n])){e[t]=r;break}i[n]=i[1-n]*(n?10:.1)}if(i[n]<-h?i[n]=-h:i[n]>h&&(i[n]=h),i[0]===i[1]){var f=Math.max(1,Math.abs(1e-6*i[0]));i[0]-=f,i[1]+=f}}},e.setScale=function(t){var n=e._gd._fullLayout._size,r=e._id.charAt(0);if(e._categories||(e._categories=[]),e.overlaying){var i=v.getFromId(e._gd,e.overlaying);e.domain=i.domain}var s=t&&e._r?"_r":"range",o=e.calendar;e.cleanRange(s);var a=e.r2l(e[s][0],o),f=e.r2l(e[s][1],o);if("y"===r?(e._offset=n.t+(1-e.domain[1])*n.h,e._length=n.h*(e.domain[1]-e.domain[0]),e._m=e._length/(a-f),e._b=-e._m*f):(e._offset=n.l+e.domain[0]*n.w,e._length=n.w*(e.domain[1]-e.domain[0]),e._m=e._length/(f-a),e._b=-e._m*a),!isFinite(e._m)||!isFinite(e._b))throw u.notifier("Something went wrong with axis scaling","long"),e._gd._replotting=!1,new Error("axis scaling")},e.makeCalcdata=function(t,n){var r,i,s,o="date"===e.type&&t[n+"calendar"];if(n in t)for(r=t[n],i=new Array(r.length),s=0;s<r.length;s++)i[s]=e.d2c(r[s],0,o);else{var u=n+"0"in t?e.d2c(t[n+"0"],0,o):0,a=t["d"+n]?Number(t["d"+n]):1;for(r=t[{x:"y",y:"x"}[n]],i=new Array(r.length),s=0;s<r.length;s++)i[s]=u+s*a}return i},e._min=[],e._max=[],delete e._minDtick,delete e._forceTick0}},{"../../constants/numerical":640,"../../lib":657,"./axis_ids":692,"./constants":694,d3:97,"fast-isnumeric":106}],704:[function(e,t,n){"use strict";function r(e){var t=["showexponent","showtickprefix","showticksuffix"],n=t.filter(function(t){return void 0!==e[t]}),r=function(t){return e[t]===e[n[0]]};if(n.every(r)||1===n.length)return e[n[0]]}var i=e("../../lib");t.exports=function(e,t,n,s,o){var u=r(e),a=n("tickprefix");a&&n("showtickprefix",u);var f=n("ticksuffix");f&&n("showticksuffix",u);var l=n("showticklabels");if(l){var c=o.font||{},h=t.color===e.color?t.color:c.color;if(i.coerceFont(n,"tickfont",{family:c.family,size:c.size,color:h}),n("tickangle"),"category"!==s){var p=n("tickformat");p||"date"===s||(n("showexponent",u),n("exponentformat"),n("separatethousands"))}}"category"===s||o.noHover||n("hoverformat")}},{"../../lib":657}],705:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./layout_attributes");t.exports=function(e,t,n,s){var o=r.coerce2(e,t,i,"ticklen"),u=r.coerce2(e,t,i,"tickwidth"),a=r.coerce2(e,t,i,"tickcolor",t.color),f=n("ticks",s.outerTicks||o||u||a?"outside":"");f||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":657,"./layout_attributes":698}],706:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("../../constants/numerical").ONEDAY;t.exports=function(e,t,n,o){var u="auto";"array"!==e.tickmode||"log"!==o&&"date"!==o||(e.tickmode="auto"),Array.isArray(e.tickvals)?u="array":e.dtick&&(u="linear");var f=n("tickmode",u);if("auto"===f)n("nticks");else if("linear"===f){var l="date"===o?s:1,c=n("dtick",l);if(r(c))t.dtick=c>0?Number(c):l;else if("string"!=typeof c)t.dtick=l;else{var h=c.charAt(0),p=c.substr(1);p=r(p)?Number(p):0,(p<=0||!("date"===o&&"M"===h&&p===Math.round(p)||"log"===o&&"L"===h||"log"===o&&"D"===h&&(1===p||2===p)))&&(t.dtick=l)}var d="date"===o?i.dateTick0(t.calendar):0,v=n("tick0",d);"date"===o?t.tick0=i.cleanDate(v,d):r(v)&&"D1"!==c&&"D2"!==c?t.tick0=Number(v):t.tick0=d}else{var m=n("tickvals");void 0===m?t.tickmode="auto":n("ticktext")}}},{"../../constants/numerical":640,"../../lib":657,"fast-isnumeric":106}],707:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../plotly"),s=e("../../registry"),o=e("../../lib"),u=e("./axes"),a=/((x|y)([2-9]|[1-9][0-9]+)?)axis$/;t.exports=function(e,t,n,f){function c(e){var t,n,r,i,s,o={};for(t in e)if(n=t.split("."),r=n[0].match(a)){var u=r[1],f=u+"axis";if(i=b[f],s={},Array.isArray(e[t])?s.to=e[t].slice(0):Array.isArray(e[t].range)&&(s.to=e[t].range.slice(0)),!s.to)continue;s.axisName=f,s.length=i._length,w.push(u),o[u]=s}return o}function h(e,t,n){var r,i,s,o=e._plots,u=[];for(r in o){var a=o[r];if(u.indexOf(a)===-1){var f=a.xaxis._id,l=a.yaxis._id,c=a.xaxis.range,h=a.yaxis.range;a.xaxis._r=a.xaxis.range.slice(),a.yaxis._r=a.yaxis.range.slice(),i=n[f]?n[f].to:c,s=n[l]?n[l].to:h,c[0]===i[0]&&c[1]===i[1]&&h[0]===s[0]&&h[1]===s[1]||t.indexOf(f)===-1&&t.indexOf(l)===-1||u.push(a)}}return u}function p(t,n){function r(t,n){for(i=0;i<t.length;i++){var r=t[i];o.indexOf(r.xref)===-1&&o.indexOf(r.yref)===-1||n(e,i)}}var i,o=[];for(o=[t._id,n._id],i=0;i<o.length;i++)u.doTicks(e,o[i],!0);r(b.annotations||[],s.getComponentMethod("annotations","drawOne")),r(b.shapes||[],s.getComponentMethod("shapes","drawOne")),r(b.images||[],s.getComponentMethod("images","draw"))}function d(e){var t=e.xaxis,n=e.yaxis;b._defs.selectAll("#"+e.clipId).call(o.setTranslate,0,0).call(o.setScale,1,1),e.plot.call(o.setTranslate,t._offset,n._offset).call(o.setScale,1,1).selectAll(".points").selectAll(".point").call(o.setPointGroupScale,1,1)}function v(t,n){var r,i,s,u=E[t.xaxis._id],a=E[t.yaxis._id],f=[];if(u){r=e._fullLayout[u.axisName],i=r._r,s=u.to,f[0]=(i[0]*(1-n)+n*s[0]-i[0])/(i[1]-i[0])*t.xaxis._length;var l=i[1]-i[0],c=s[1]-s[0];r.range[0]=i[0]*(1-n)+n*s[0],r.range[1]=i[1]*(1-n)+n*s[1],f[2]=t.xaxis._length*(1-n+n*c/l)}else f[0]=0,f[2]=t.xaxis._length;if(a){r=e._fullLayout[a.axisName],i=r._r,s=a.to,f[1]=(i[1]*(1-n)+n*s[1]-i[1])/(i[0]-i[1])*t.yaxis._length;var h=i[1]-i[0],d=s[1]-s[0];r.range[0]=i[0]*(1-n)+n*s[0],r.range[1]=i[1]*(1-n)+n*s[1],f[3]=t.yaxis._length*(1-n+n*d/h)}else f[1]=0,f[3]=t.yaxis._length;p(t.xaxis,t.yaxis);var v=t.xaxis,m=t.yaxis,g=!!u,y=!!a,w=g?v._length/f[2]:1,S=y?m._length/f[3]:1,x=g?f[0]:0,T=y?f[1]:0,N=g?f[0]/f[2]*v._length:0,C=y?f[1]/f[3]*m._length:0,k=v._offset-N,L=m._offset-C;b._defs.selectAll("#"+t.clipId).call(o.setTranslate,x,T).call(o.setScale,1/w,1/S),t.plot.call(o.setTranslate,k,L).call(o.setScale,w,S).selectAll(".points").selectAll(".point").call(o.setPointGroupScale,1/w,1/S)}function m(){for(var t={},n=0;n<S.length;n++){var r=e._fullLayout[E[S[n]].axisName],s=E[S[n]].to;t[r._name+".range[0]"]=s[0],t[r._name+".range[1]"]=s[1],r.range=s.slice()}return T&&T(),i.relayout(e,t).then(function(){for(var e=0;e<x.length;e++)d(x[e])})}function g(){for(var t={},n=0;n<S.length;n++){var r=e._fullLayout[S[n]+"axis"];t[r._name+".range[0]"]=r.range[0],t[r._name+".range[1]"]=r.range[1],r.range=r._r.slice()}return i.relayout(e,t).then(function(){for(var e=0;e<x.length;e++)d(x[e])})}function y(){C=Date.now();for(var e=Math.min(1,(C-N)/n.duration),t=L(e),r=0;r<x.length;r++)v(x[r],t);C-N>n.duration?(m(),k=window.cancelAnimationFrame(y)):k=window.requestAnimationFrame(y)}var b=e._fullLayout,w=[],E=c(t),S=Object.keys(E),x=h(b,S,E);if(!x.length)return!1;var T;f&&(T=f());var N,C,k,L=r.ease(n.easing);return e._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(k),k=null,g()}),N=Date.now(),k=window.requestAnimationFrame(y),Promise.resolve()}},{"../../lib":657,"../../plotly":684,"../../registry":764,"./axes":689,d3:97}],708:[function(e,t,n){"use strict";function r(e,t,n){var r,i,s,o=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return i=f.nestedProperty(r,t.prop).get(),s=n[t.type]=n[t.type]||{},s.hasOwnProperty(t.prop)&&s[t.prop]!==i&&(o=!0),s[t.prop]=i,{changed:o,value:i}}function i(e,t){return Array.isArray(t[0])&&1===t[0].length&&["string","number"].indexOf(typeof t[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}function s(e,t){var n=[],r=t[0],i={};if("string"==typeof r)i[r]=t[1];else{if(!f.isPlainObject(r))return n;i=r}return u(i,function(e,t,r){n.push({type:"layout",prop:e,value:r})},"",0),n}function o(e,t){var n,r,i,s,o=[];if(r=t[0],i=t[1],n=t[2],s={},"string"==typeof r)s[r]=i;else{if(!f.isPlainObject(r))return o;s=r,void 0===n&&(n=i)}return void 0===n&&(n=null),u(s,function(t,r,i){var s;if(Array.isArray(i)){var u=Math.min(i.length,e.data.length);n&&(u=Math.min(u,n.length)),s=[];for(var a=0;a<u;a++)s[a]=n?n[a]:a}else s=n?n.slice(0):null;if(null===s)Array.isArray(i)&&(i=i[0]);else if(Array.isArray(s)){if(!Array.isArray(i)){var f=i;i=[];for(var l=0;l<s.length;l++)i[l]=f}i.length=Math.min(s.length,i.length)}o.push({type:"data",prop:t,traces:s,value:i})},"",0),o}function u(e,t,n,r){Object.keys(e).forEach(function(i){var s=e[i];if("_"!==i[0]){var o=n+(r>0?".":"")+i;f.isPlainObject(s)?u(s,t,o,r+1):t(o,i,s)}})}var a=e("../plotly"),f=e("../lib");n.manageCommandObserver=function(e,t,i,s){var o={},u=!0;t&&t._commandObserver&&(o=t._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var a=n.hasSimpleAPICommandBindings(e,i,o.lookupTable);if(t&&t._commandObserver){if(a)return o;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,o}if(a){r(e,a,o.cache),o.check=function(){if(u){var t=r(e,a,o.cache);return t.changed&&s&&void 0!==o.lookupTable[t.value]&&(o.disable(),Promise.resolve(s({value:t.value,type:a.type,prop:a.prop,traces:a.traces,index:o.lookupTable[t.value]})).then(o.enable,o.enable)),t.changed}};for(var l=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],c=0;c<l.length;c++)e._internalOn(l[c],o.check);o.remove=function(){for(var t=0;t<l.length;t++)e._removeInternalListener(l[t],o.check)}}else f.warn("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){u=!1},o.enable=function(){u=!0},t&&(t._commandObserver=o),o},n.hasSimpleAPICommandBindings=function(e,t,r){var i,s,o=t.length;for(i=0;i<o;i++){var u,a=t[i],f=a.method,l=a.args;if(!f)return!1;var c=n.computeAPICommandBindings(e,f,l);if(1!==c.length)return!1;if(s){if(u=c[0],u.type!==s.type)return!1;if(u.prop!==s.prop)return!1;if(Array.isArray(s.traces)){if(!Array.isArray(u.traces))return!1;u.traces.sort();for(var h=0;h<s.traces.length;h++)if(s.traces[h]!==u.traces[h])return!1}else if(u.prop!==s.prop)return!1}else s=c[0],Array.isArray(s.traces)&&s.traces.sort();u=c[0];var p=u.value;if(Array.isArray(p)){if(1!==p.length)return!1;p=p[0]}r&&(r[p]=i)}return s},n.executeAPICommand=function(e,t,n){for(var r=a[t],i=[e],s=0;s<n.length;s++)i.push(n[s]);return r.apply(null,i).catch(function(e){return f.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)})},n.computeAPICommandBindings=function(e,t,n){var r;switch(t){case"restyle":r=o(e,n);break;case"relayout":r=s(e,n);break;case"update":r=o(e,[n[0],n[2]]).concat(s(e,[n[1]]));break;case"animate":r=i(e,n);break;default:r=[]}return r}},{"../lib":657,"../plotly":684}],709:[function(e,t,n){"use strict";t.exports={family:{valType:"string",noBlank:!0,strict:!0},size:{valType:"number",min:1},color:{valType:"color"}}},{}],710:[function(e,t,n){"use strict";t.exports={group:{valType:"string"},name:{valType:"string"},traces:{valType:"data_array"},baseframe:{valType:"string"},data:{valType:"data_array"},layout:{valType:"any"}}},{}],711:[function(e,t,n){"use strict";var r=t.exports={};r.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3"},r.axesNames=["lonaxis","lataxis"],r.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},r.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},r.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,80],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},r.clipPad=.001,r.precision=.1,r.landColor="#F0DC82",r.waterColor="#3399FF",r.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},r.sphereSVG={type:"Sphere"},r.fillLayers=["ocean","land","lakes"],r.lineLayers=["subunits","countries","coastlines","rivers","frame"],r.baseLayers=["ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame"],r.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"},r.baseLayersOverChoropleth=["rivers","lakes"]},{}],712:[function(e,t,n){"use strict";function r(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.container=e.container,this.topojsonURL=e.topojsonURL,this.hoverContainer=null,this.topojsonName=null,this.topojson=null,this.projectionType=null,this.projection=null,this.clipAngle=null,this.setScale=null,this.path=null,this.zoom=null,this.zoomReset=null,this.xaxis=null,this.yaxis=null,this.makeFramework(),this.updateFx(t.hovermode),this.traceHash={}}function i(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r[0].trace;i.visible===!0&&t.push(r)}return t}function s(e,t,n){return l.geo.graticule().extent([[e[0],t[0]],[e[1],t[1]]]).step(n)}function o(e,t,n){var r=b.layerNameToAdjective[t];e.select("."+t).selectAll("path").attr("stroke","none").call(c.fill,n[r+"color"])}function u(e,t,n){var r=b.layerNameToAdjective[t];e.select("."+t).selectAll("path").attr("fill","none").call(c.stroke,n[r+"color"]).call(h.dashLine,"",n[r+"width"])}function a(e,t,n){e.select("."+t+"graticule").selectAll("path").attr("fill","none").call(c.stroke,n[t].gridcolor).call(h.dashLine,"",n[t].gridwidth)}function f(e){var t={type:"linear",showexponent:"all",exponentformat:p.layoutAttributes.exponentformat.dflt,_gd:{_fullLayout:e}};return p.setConvert(t),t}var l=e("d3"),c=e("../../components/color"),h=e("../../components/drawing"),p=e("../../plots/cartesian/axes"),d=e("../../plots/cartesian/graph_interact"),v=e("./projections"),m=e("./set_scale"),g=e("./zoom"),y=e("./zoom_reset"),b=e("./constants"),w=e("../../constants/xmlns_namespaces"),E=e("../../lib/topojson_utils"),S=e("topojson-client").feature;v(l),t.exports=r;var x=r.prototype;x.plot=function(e,t,n){var r,i,s=this,o=t[s.id],u=t._size;s.projection=null,s.setScale=m(o,u),s.makeProjection(o),s.makePath(),s.adjustLayout(o,u),s.zoom=g(s,o),s.zoomReset=y(s,o),s.mockAxis=f(t),s.framework.call(s.zoom).on("dblclick.zoom",s.zoomReset),s.framework.on("mousemove",function(){var e=l.mouse(this),t=s.projection.invert(e);if(!isNaN(t[0])&&!isNaN(t[1])){var n={target:!0,xpx:e[0],ypx:e[1]};s.xaxis.c2p=function(){return e[0]},s.xaxis.p2c=function(){return t[0]},s.yaxis.c2p=function(){return e[1]},s.yaxis.p2c=function(){return t[1]},d.hover(s.graphDiv,n,s.id)}}),s.framework.on("mouseout",function(){d.loneUnhover(t._toppaper)}),s.framework.on("click",function(){d.click(s.graphDiv,{target:!0})}),r=E.getTopojsonName(o),null===s.topojson||r!==s.topojsonName?(s.topojsonName=r,void 0!==PlotlyGeoAssets.topojson[s.topojsonName]?(s.topojson=PlotlyGeoAssets.topojson[s.topojsonName],s.onceTopojsonIsLoaded(e,o)):(i=E.getTopojsonPath(s.topojsonURL,s.topojsonName),n.push(new Promise(function(t,n){l.json(i,function(r,u){return r?void n(404===r.status?new Error(["plotly.js could not find topojson file at",i,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",i].join(" "))):(s.topojson=u,PlotlyGeoAssets.topojson[s.topojsonName]=u,s.onceTopojsonIsLoaded(e,o),void t())})})))):s.onceTopojsonIsLoaded(e,o)},x.onceTopojsonIsLoaded=function(e,t){var n;this.drawLayout(t);var r=this.traceHash,s={};for(n=0;n<e.length;n++){var o=e[n],u=o[0].trace;s[u.type]=s[u.type]||[],s[u.type].push(o)}var a=Object.keys(r),f=Object.keys(s);for(n=0;n<a.length;n++){var l=a[n];if(f.indexOf(l)===-1){var c=r[l][0],h=c[0].trace;h.visible=!1,s[l]=[c]}}for(f=Object.keys(s),n=0;n<f.length;n++){var p=s[f[n]],d=p[0][0].trace._module;d.plot(this,i(p),t)}this.traceHash=s,this.render()},x.updateFx=function(e){this.showHover=e!==!1},x.makeProjection=function(e){var t,n=e.projection,r=n.type,i=null===this.projection||r!==this.projectionType;i?(this.projectionType=r,t=this.projection=l.geo[b.projNames[r]]()):t=this.projection,t.translate(n._translate0).precision(b.precision),e._isAlbersUsa||t.rotate(n._rotate).center(n._center),e._clipAngle?(this.clipAngle=e._clipAngle,t.clipAngle(e._clipAngle-b.clipPad)):this.clipAngle=null,n.parallels&&t.parallels(n.parallels),i&&this.setScale(t),t.translate(n._translate).scale(n._scale)},x.makePath=function(){this.path=l.geo.path().projection(this.projection)},x.makeFramework=function(){var e=this.geoDiv=l.select(this.container).append("div");e.attr("id",this.id).style("position","absolute");var t=this.hoverContainer=e.append("svg");t.attr(w.svgAttrs).style({position:"absolute","z-index":20,"pointer-events":"none"});var n=this.framework=e.append("svg");n.attr(w.svgAttrs).attr({position:"absolute",preserveAspectRatio:"none"}),n.append("g").attr("class","bglayer").append("rect"),n.append("g").attr("class","baselayer"),n.append("g").attr("class","choroplethlayer"),n.append("g").attr("class","baselayeroverchoropleth"),n.append("g").attr("class","scattergeolayer"),n.on("dblclick.zoom",null),this.xaxis={_id:"x"},this.yaxis={_id:"y"}},x.adjustLayout=function(e,t){var n=e.domain,r=t.l+t.w*n.x[0]+e._marginX,i=t.t+t.h*(1-n.y[1])+e._marginY;this.geoDiv.style({left:r+"px",top:i+"px",width:e._width+"px",height:e._height+"px"}),this.hoverContainer.attr({width:e._width,height:e._height}),this.framework.attr({width:e._width,height:e._height}),this.framework.select(".bglayer").select("rect").attr({width:e._width,height:e._height}).call(c.fill,e.bgcolor),this.xaxis._offset=r,this.xaxis._length=e._width,this.yaxis._offset=i,this.yaxis._length=e._height},x.drawTopo=function(e,t,n){if(n["show"+t]===!0){var r=this.topojson,i="frame"===t?b.sphereSVG:S(r,r.objects[t]);e.append("g").datum(i).attr("class",t).append("path").attr("class","basepath")}},x.drawGraticule=function(e,t,n){var r=n[t];if(r.showgrid===!0){var i=b.scopeDefaults[n.scope],o=i.lonaxisRange,u=i.lataxisRange,a="lonaxis"===t?[r.dtick]:[0,r.dtick],f=s(o,u,a);e.append("g").datum(f).attr("class",t+"graticule").append("path").attr("class","graticulepath")}},x.drawLayout=function(e){var t,n=this.framework.select("g.baselayer"),r=b.baseLayers,i=b.axesNames;n.selectAll("*").remove();for(var s=0;s<r.length;s++)t=r[s],i.indexOf(t)!==-1?this.drawGraticule(n,t,e):this.drawTopo(n,t,e);this.styleLayout(e)},x.styleLayer=function(e,t,n){var r=b.fillLayers,i=b.lineLayers;r.indexOf(t)!==-1?o(e,t,n):i.indexOf(t)!==-1&&u(e,t,n)},x.styleLayout=function(e){for(var t,n=this.framework.select("g.baselayer"),r=b.baseLayers,i=b.axesNames,s=0;s<r.length;s++)t=r[s],i.indexOf(t)!==-1?a(n,t,e):this.styleLayer(n,t,e)},x.isLonLatOverEdges=function(e){var t=this.clipAngle;if(null===t)return!1;var n=this.projection.rotate(),r=l.geo.distance(e,[-n[0],-n[1]]),i=t*Math.PI/180;return r>i},x.render=function(){function e(e){var t=n.projection(e.lonlat);return t?"translate("+t[0]+","+t[1]+")":null}function t(e){return n.isLonLatOverEdges(e.lonlat)?"0":"1.0"}var n=this,r=n.framework,i=r.select("g.choroplethlayer"),s=r.select("g.scattergeolayer"),o=n.path;r.selectAll("path.basepath").attr("d",o),r.selectAll("path.graticulepath").attr("d",o),i.selectAll("path.choroplethlocation").attr("d",o),i.selectAll("path.basepath").attr("d",o),s.selectAll("path.js-line").attr("d",o),null!==n.clipAngle?(s.selectAll("path.point").style("opacity",t).attr("transform",e),s.selectAll("text").style("opacity",t).attr("transform",e)):(s.selectAll("path.point").attr("transform",e),s.selectAll("text").attr("transform",e))}},{"../../components/color":557,"../../components/drawing":580,"../../constants/xmlns_namespaces":642,"../../lib/topojson_utils":673,"../../plots/cartesian/axes":689,"../../plots/cartesian/graph_interact":696,"./constants":711,"./projections":719,"./set_scale":720,"./zoom":721,"./zoom_reset":722,d3:97,"topojson-client":497}],713:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],s=i[0].trace;s.geo===t&&n.push(i)}return n}var i=e("./geo"),s=e("../../plots/plots");n.name="geo",n.attr="geo",n.idRoot="geo",n.idRegex=/^geo([2-9]|[1-9][0-9]+)?$/,n.attrRegex=/^geo([2-9]|[1-9][0-9]+)?$/,n.attributes=e("./layout/attributes"),n.layoutAttributes=e("./layout/layout_attributes"),n.supplyLayoutDefaults=e("./layout/defaults"),n.plot=function(e){var t=e._fullLayout,n=e.calcdata,o=s.getSubplotIds(t,"geo");void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}});for(var u=0;u<o.length;u++){var f=o[u],l=r(n,f),c=t[f]._subplot;void 0===c&&(c=new i({id:f,graphDiv:e,container:t._geocontainer.node(),topojsonURL:e._context.topojsonURL},t),t[f]._subplot=c),c.plot(l,t,e._promises)}},n.clean=function(e,t,n,r){for(var i=s.getSubplotIds(r,"geo"),o=0;o<i.length;o++){var u=i[o],f=r[u]._subplot;!t[u]&&f&&f.geoDiv.remove()}},n.toSVG=function(e){for(var t=e._fullLayout,n=s.getSubplotIds(t,"geo"),r=t._size,i=0;i<n.length;i++){var o=t[n[i]],u=o.domain,f=o._subplot.framework;f.attr("style",null),f.attr({x:r.l+r.w*u.x[0]+o._marginX,y:r.t+r.h*(1-u.y[1])+o._marginY,width:o._width,height:o._height}),t._geoimages.node().appendChild(f.node())}}},{"../../plots/plots":749,"./geo":712,"./layout/attributes":714,"./layout/defaults":717,"./layout/layout_attributes":718}],714:[function(e,t,n){"use strict";t.exports={geo:{valType:"subplotid",dflt:"geo"}}},{}],715:[function(e,t,n){"use strict";var r=e("../../../components/color/attributes");t.exports={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:r.lightLine},gridwidth:{valType:"number",min:0,dflt:1}}},{"../../../components/color/attributes":556}],716:[function(e,t,n){"use strict";var r=e("../../../lib"),i=e("../constants"),s=e("./axis_attributes");t.exports=function(e,t){function n(e,t){return r.coerce(u,f,s,e,t)}function o(e){var n,r,s,o,u,a,f=t.scope;return"world"===f?(n=t.projection,r=n.type,s=n.rotation,u=i[e+"Span"],a=void 0!==u[r]?u[r]/2:u["*"]/2,o="lonaxis"===e?s.lon:s.lat,[o-a,o+a]):i.scopeDefaults[f][e+"Range"]}for(var u,f,l=i.axesNames,c=0;c<l.length;c++){var h=l[c];u=e[h]||{},f={};var p=o(h),d=n("range",p);r.noneOrAll(u.range,f.range,[0,1]),n("tick0",d[0]),n("dtick","lonaxis"===h?30:10);var v=n("showgrid");v&&(n("gridcolor"),n("gridwidth")),t[h]=f,t[h]._fullRange=p}}},{"../../../lib":657,"../constants":711,"./axis_attributes":715}],717:[function(e,t,n){"use strict";function r(e,t,n){var r,i=n("scope"),o="world"!==i,f=s.scopeDefaults[i],l=n("resolution"),c=n("projection.type",f.projType),h="albers usa"===c,p=c.indexOf("conic")!==-1;if(p){var d=f.projParallels||[0,60];n("projection.parallels",d)}if(h)t.scope="usa";else{var v=f.projRotate||[0,0,0];n("projection.rotation.lon",v[0]),n("projection.rotation.lat",v[1]),n("projection.rotation.roll",v[2]),r=n("showcoastlines",!o),r&&(n("coastlinecolor"),n("coastlinewidth")),r=n("showocean"),r&&n("oceancolor")}n("projection.scale"),r=n("showland"),r&&n("landcolor"),r=n("showlakes"),r&&n("lakecolor"),r=n("showrivers"),r&&(n("rivercolor"),n("riverwidth")),r=n("showcountries",o&&"usa"!==i),r&&(n("countrycolor"),n("countrywidth")),("usa"===i||"north america"===i&&50===l)&&(n("showsubunits",!0),n("subunitcolor"),n("subunitwidth")),o||(r=n("showframe",!0),r&&(n("framecolor"),n("framewidth"))),n("bgcolor"),u(e,t),t._isHighRes=50===l,t._clipAngle=s.lonaxisSpan[c]/2,t._isAlbersUsa=h,t._isConic=p,t._isScoped=o;var m=t.projection.rotation||{};t.projection._rotate=[-m.lon||0,-m.lat||0,m.roll||0]}var i=e("../../subplot_defaults"),s=e("../constants"),o=e("./layout_attributes"),u=e("./axis_defaults");t.exports=function(e,t,n){i(e,t,n,{type:"geo",attributes:o,handleDefaults:r,partition:"y"})}},{"../../subplot_defaults":756,"../constants":711,"./axis_defaults":716,"./layout_attributes":718}],718:[function(e,t,n){"use strict";var r=e("../../../components/color/attributes"),i=e("../constants"),s=e("./axis_attributes");t.exports={domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(i.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(i.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,max:10,dflt:1}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:r.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:i.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:i.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:i.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:i.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:r.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:r.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:r.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:r.background},lonaxis:s,lataxis:s}},{"../../../components/color/attributes":556,"../constants":711,"./axis_attributes":715}],719:[function(e,t,n){"use strict";function r(e){function t(e,t){return{type:"Feature",id:e.id,properties:e.properties,geometry:n(e.geometry,t)}}function n(t,r){if(!t)return null;if("GeometryCollection"===t.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(e){return n(e,r)})};if(!L.hasOwnProperty(t.type))return null;var i=L[t.type];return e.geo.stream(t,r(i)),i.result()}function r(){}function i(e){if((t=e.length)<4)return!1;for(var t,n=0,r=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];++n<t;)r+=e[n-1][1]*e[n][0]-e[n-1][0]*e[n][1];return r<=0}function s(e,t){for(var n=t[0],r=t[1],i=!1,s=0,o=e.length,u=o-1;s<o;u=s++){var a=e[s],f=a[0],l=a[1],c=e[u],h=c[0],p=c[1];l>r^p>r&&n<(h-f)*(r-l)/(p-l)+f&&(i=!i)}return i}function o(e){return e?e/Math.sin(e):1}function u(e){return e>1?_:e<-1?-_:Math.asin(e)}function a(e){return e>1?0:e<-1?M:Math.acos(e)}function f(e,t){var n=(2+_)*Math.sin(t);t/=2;for(var r=0,i=1/0;r<10&&Math.abs(i)>A;r++){var s=Math.cos(t);t-=i=(t+Math.sin(t)*(s+2)-n)/(2*s*(1+s))}return[2/Math.sqrt(M*(4+M))*e*(1+Math.cos(t)),2*Math.sqrt(M/(4+M))*Math.sin(t)]}function l(e,t){function n(n,r){var i=j(n/t,r);return i[0]*=e,i}return arguments.length<2&&(t=e),1===t?j:t===1/0?h:(n.invert=function(n,r){var i=j.invert(n/e,r);return i[0]*=t,i},n)}function c(){var e=2,t=B(l),n=t(e);return n.coefficient=function(n){return arguments.length?t(e=+n):e},n}function h(e,t){return[e*Math.cos(t)/Math.cos(t/=2),2*Math.sin(t)]}function p(e,t){return[3*e/(2*M)*Math.sqrt(M*M/3-t*t),t]}function d(e,t){return[e,1.25*Math.log(Math.tan(M/4+.4*t))]}function v(e){return function(t){var n,r=e*Math.sin(t),i=30;do t-=n=(t+Math.sin(t)-r)/(1+Math.cos(t));while(Math.abs(n)>A&&--i>0);return t/2}}function m(e,t,n){function r(n,r){return[e*n*Math.cos(r=i(r)),t*Math.sin(r)]}var i=v(n);return r.invert=function(r,i){var s=u(i/t);return[r/(e*Math.cos(s)),u((2*s+Math.sin(2*s))/n)]},r}function g(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-0.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-0.044475+.028874*n-.005916*r)))]}function y(e,t){var n,r=Math.min(18,36*Math.abs(t)/M),i=Math.floor(r),s=r-i,o=(n=I[i])[0],u=n[1],a=(n=I[++i])[0],f=n[1],l=(n=I[Math.min(19,++i)])[0],c=n[1];return[e*(a+s*(l-o)/2+s*s*(l-2*a+o)/2),(t>0?_:-_)*(f+s*(c-u)/2+s*s*(c-2*f+u)/2)]}function b(e,t){return[e*Math.cos(t),t]}function w(e,t){var n=Math.cos(t),r=o(a(n*Math.cos(e/=2)));return[2*n*Math.sin(e)*r,Math.sin(t)*r]}function E(e,t){var n=w(e,t);return[(n[0]+e/_)/2,(n[1]+t)/2]}e.geo.project=function(e,t){var r=t.stream;if(!r)throw new Error("not yet supported");return(e&&S.hasOwnProperty(e.type)?S[e.type]:n)(e,r)};var S={Feature:t,FeatureCollection:function(e,n){return{type:"FeatureCollection",features:e.features.map(function(e){return t(e,n)})}}},x=[],T=[],N={point:function(e,t){x.push([e,t])},result:function(){var e=x.length?x.length<2?{type:"Point",coordinates:x[0]}:{type:"MultiPoint",coordinates:x}:null;return x=[],e}},C={lineStart:r,point:function(e,t){x.push([e,t])},lineEnd:function(){x.length&&(T.push(x),x=[])},result:function(){var e=T.length?T.length<2?{type:"LineString",coordinates:T[0]}:{type:"MultiLineString",coordinates:T}:null;return T=[],e}},k={polygonStart:r,lineStart:r,point:function(e,t){x.push([e,t])},lineEnd:function(){var e=x.length;if(e){do x.push(x[0].slice());while(++e<4);T.push(x),x=[]}},polygonEnd:r,result:function(){if(!T.length)return null;var e=[],t=[];return T.forEach(function(n){i(n)?e.push([n]):t.push(n)}),t.forEach(function(t){var n=t[0];e.some(function(e){if(s(e[0],n))return e.push(t),!0})||e.push([t])}),T=[],e.length?e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}:null}},L={Point:N,MultiPoint:N,LineString:C,MultiLineString:C,Polygon:k,MultiPolygon:k,Sphere:k},A=1e-6,O=A*A,M=Math.PI,_=M/2,D=(Math.sqrt(M),M/180),P=180/M,H=e.geo.projection,B=e.geo.projectionMutator;e.geo.interrupt=function(t){function n(e,n){for(var r=n<0?-1:1,i=a[+(n<0)],s=0,o=i.length-1;s<o&&e>i[s][2][0];++s);var u=t(e-i[s][1][0],n);return u[0]+=t(i[s][1][0],r*n>r*i[s][0][1]?i[s][0][1]:n)[0],u}function r(){u=a.map(function(e){return e.map(function(e){var n,r=t(e[0][0],e[0][1])[0],i=t(e[2][0],e[2][1])[0],s=t(e[1][0],e[0][1])[1],o=t(e[1][0],e[1][1])[1];return s>o&&(n=s,s=o,o=n),[[r,s],[i,o]]})})}function i(){for(var t=1e-6,n=[],r=0,i=a[0].length;r<i;++r){var o=a[0][r],u=180*o[0][0]/M,f=180*o[0][1]/M,l=180*o[1][1]/M,c=180*o[2][0]/M,h=180*o[2][1]/M;n.push(s([[u+t,f+t],[u+t,l-t],[c-t,l-t],[c-t,h+t]],30))}for(var r=a[1].length-1;r>=0;--r){var o=a[1][r],u=180*o[0][0]/M,f=180*o[0][1]/M,l=180*o[1][1]/M,c=180*o[2][0]/M,h=180*o[2][1]/M;n.push(s([[c-t,h-t],[c-t,l+t],[u+t,l+t],[u+t,f-t]],30))}return{type:"Polygon",coordinates:[e.merge(n)]}}function s(e,t){for(var n,r,i,s=-1,o=e.length,u=e[0],a=[];++s<o;){n=e[s],r=(n[0]-u[0])/t,i=(n[1]-u[1])/t;for(var f=0;f<t;++f)a.push([u[0]+f*r,u[1]+f*i]);u=n}return a.push(n),a}function o(e,t){return Math.abs(e[0]-t[0])<A&&Math.abs(e[1]-t[1])<A}var u,a=[[[[-M,0],[0,_],[M,0]]],[[[-M,0],[0,-_],[M,0]]]];t.invert&&(n.invert=function(e,r){for(var i=u[+(r<0)],s=a[+(r<0)],f=0,l=i.length;f<l;++f){var c=i[f];if(c[0][0]<=e&&e<c[1][0]&&c[0][1]<=r&&r<c[1][1]){var h=t.invert(e-t(s[f][1][0],0)[0],r);return h[0]+=s[f][1][0],o(n(h[0],h[1]),[e,r])?h:null}}});var f=e.geo.projection(n),l=f.stream;return f.stream=function(t){var n=f.rotate(),r=l(t),s=(f.rotate([0,0]),l(t));return f.rotate(n),r.sphere=function(){e.geo.stream(i(),s)},r},f.lobes=function(e){return arguments.length?(a=e.map(function(e){return e.map(function(e){return[[e[0][0]*M/180,e[0][1]*M/180],[e[1][0]*M/180,e[1][1]*M/180],[e[2][0]*M/180,e[2][1]*M/180]]})}),r(),f):a.map(function(e){return e.map(function(e){return[[180*e[0][0]/M,180*e[0][1]/M],[180*e[1][0]/M,180*e[1][1]/M],[180*e[2][0]/M,180*e[2][1]/M]]})})},f},f.invert=function(e,t){var n=.5*t*Math.sqrt((4+M)/M),r=u(n),i=Math.cos(r);return[e/(2/Math.sqrt(M*(4+M))*(1+i)),u((r+n*(i+2))/(2+_))]},(e.geo.eckert4=function(){return H(f)}).raw=f;var j=e.geo.azimuthalEqualArea.raw;h.invert=function(e,t){var n=2*u(t/2);return[e*Math.cos(n/2)/Math.cos(n),n]},(e.geo.hammer=c).raw=l,p.invert=function(e,t){return[2/3*M*e/Math.sqrt(M*M/3-t*t),t]},(e.geo.kavrayskiy7=function(){return H(p)}).raw=p,d.invert=function(e,t){return[e,2.5*Math.atan(Math.exp(.8*t))-.625*M]},(e.geo.miller=function(){return H(d)}).raw=d;var F=(v(M),m(Math.SQRT2/_,Math.SQRT2,M));(e.geo.mollweide=function(){return H(F)}).raw=F,g.invert=function(e,t){var n,r=t,i=25;do{var s=r*r,o=s*s;r-=n=(r*(1.007226+s*(.015085+o*(-0.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.045255+o*(-0.311325+.259866*s-.005916*11*o)))}while(Math.abs(n)>A&&--i>0);return[e/(.8707+(s=r*r)*(-0.131979+s*(-0.013791+s*s*s*(.003971-.001529*s)))),r]},(e.geo.naturalEarth=function(){return H(g)}).raw=g;var I=[[.9986,-0.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];I.forEach(function(e){e[1]*=1.0144}),y.invert=function(e,t){var n=t/_,r=90*n,i=Math.min(18,Math.abs(r/5)),s=Math.max(0,Math.floor(i));do{var o=I[s][1],u=I[s+1][1],a=I[Math.min(19,s+2)][1],f=a-o,l=a-2*u+o,c=2*(Math.abs(n)-u)/f,h=l/f,p=c*(1-h*c*(1-2*h*c));if(p>=0||1===s){r=(t>=0?5:-5)*(p+i);var d,v=50;do i=Math.min(18,Math.abs(r)/5),s=Math.floor(i),p=i-s,o=I[s][1],u=I[s+1][1],a=I[Math.min(19,s+2)][1],r-=(d=(t>=0?_:-_)*(u+p*(a-o)/2+p*p*(a-2*u+o)/2)-t)*P;while(Math.abs(d)>O&&--v>0);break}}while(--s>=0);var m=I[s][0],g=I[s+1][0],y=I[Math.min(19,s+2)][0];return[e/(g+p*(y-m)/2+p*p*(y-2*g+m)/2),r*D]},(e.geo.robinson=function(){return H(y)}).raw=y,b.invert=function(e,t){return[e/Math.cos(t),t]},(e.geo.sinusoidal=function(){return H(b)}).raw=b,w.invert=function(e,t){if(!(e*e+4*t*t>M*M+A)){var n=e,r=t,i=25;do{var s,o=Math.sin(n),u=Math.sin(n/2),f=Math.cos(n/2),l=Math.sin(r),c=Math.cos(r),h=Math.sin(2*r),p=l*l,d=c*c,v=u*u,m=1-d*f*f,g=m?a(c*f)*Math.sqrt(s=1/m):s=0,y=2*g*c*u-e,b=g*l-t,w=s*(d*v+g*c*f*p),E=s*(.5*o*h-2*g*l*u),S=.25*s*(h*u-g*l*d*o),x=s*(p*f+g*v*c),T=E*S-x*w;if(!T)break;var N=(b*E-y*x)/T,C=(y*S-b*w)/T;n-=N,r-=C}while((Math.abs(N)>A||Math.abs(C)>A)&&--i>0);return[n,r]}},(e.geo.aitoff=function(){return H(w)}).raw=w,E.invert=function(e,t){var n=e,r=t,i=25;do{var s,o=Math.cos(r),u=Math.sin(r),f=Math.sin(2*r),l=u*u,c=o*o,h=Math.sin(n),p=Math.cos(n/2),d=Math.sin(n/2),v=d*d,m=1-c*p*p,g=m?a(o*p)*Math.sqrt(s=1/m):s=0,y=.5*(2*g*o*d+n/_)-e,b=.5*(g*u+r)-t,w=.5*s*(c*v+g*o*p*l)+.5/_,E=s*(h*f/4-g*u*d),S=.125*s*(f*d-g*u*c*h),x=.5*s*(l*p+g*v*o)+.5,T=E*S-x*w,N=(b*E-y*x)/T,C=(y*S-b*w)/T;n-=N,r-=C}while((Math.abs(N)>A||Math.abs(C)>A)&&--i>0);return[n,r]},(e.geo.winkel3=function(){return H(E)}).raw=E}t.exports=r},{}],720:[function(e,t,n){"use strict";function r(e,t){var n=e.projection,r=e.lonaxis,o=e.lataxis,f=e.domain,l=e.framewidth||0,c=t.w*(f.x[1]-f.x[0]),h=t.h*(f.y[1]-f.y[0]),p=r.range[0]+u,d=r.range[1]-u,v=o.range[0]+u,m=o.range[1]-u,g=r._fullRange[0]+u,y=r._fullRange[1]-u,b=o._fullRange[0]+u,w=o._fullRange[1]-u;n._translate0=[t.l+c/2,t.t+h/2];var E=d-p,S=m-v,x=[p+E/2,v+S/2],T=n._rotate;n._center=[x[0]+T[0],x[1]+T[1]];var N=function(t){function r(e){return Math.min(S*c/(e[1][0]-e[0][0]),S*h/(e[1][1]-e[0][1]))}var o,u,f,E,S=t.scale(),x=n._translate0,T=i(p,v,d,m),N=i(g,b,y,w);f=s(t,T),o=r(f),E=s(t,N),n._fullScale=r(E),t.scale(o),f=s(t,T),u=[x[0]-f[0][0]+l,x[1]-f[0][1]+l],n._translate=u,t.translate(u),f=s(t,T),e._isAlbersUsa||t.clipExtent(f),o=n.scale*o,n._scale=o,e._width=Math.round(f[1][0])+l,e._height=Math.round(f[1][1])+l,e._marginX=(c-Math.round(f[1][0]))/2,e._marginY=(h-Math.round(f[1][1]))/2};return N}function i(e,t,n,r){var i=(n-e)/4;return{type:"Polygon",coordinates:[[[e,t],[e,r],[e+i,r],[e+2*i,r],[e+3*i,r],[n,r],[n,t],[n-i,t],[n-2*i,t],[n-3*i,t],[e,t]]]}}function s(e,t){return o.geo.path().projection(e).bounds(t)}var o=e("d3"),u=e("./constants").clipPad;t.exports=r},{"./constants":711,d3:97}],721:[function(e,t,n){"use strict";function r(e,t){var n;return(n=t._isScoped?s:t._clipAngle?u:o)(e,t.projection)}function i(e,t){var n=t._fullScale;return E.behavior.zoom().translate(e.translate()).scale(e.scale()).scaleExtent([.5*n,100*n])}function s(e,t){function n(){E.select(this).style(T)}function r(){o.scale(E.event.scale).translate(E.event.translate),e.render()}function s(){E.select(this).style(N)}var o=e.projection,u=i(o,t);return u.on("zoomstart",n).on("zoom",r).on("zoomend",s),u}function o(e,t){function n(e){return m.invert(e)}function r(e){var t=m(n(e));return Math.abs(t[0]-e[0])>y||Math.abs(t[1]-e[1])>y}function s(){E.select(this).style(T),a=E.mouse(this),f=m.rotate(),l=m.translate(),c=f,h=n(a)}function o(){return p=E.mouse(this),r(a)?(g.scale(m.scale()),void g.translate(m.translate())):(m.scale(E.event.scale),m.translate([l[0],E.event.translate[1]]),h?n(p)&&(v=n(p),d=[c[0]+(v[0]-h[0]),f[1],f[2]],m.rotate(d),c=d):(a=p,h=n(a)),void e.render())}function u(){E.select(this).style(N)}var a,f,l,c,h,p,d,v,m=e.projection,g=i(m,t),y=2;return g.on("zoomstart",s).on("zoom",o).on("zoomend",u),g}function u(e,t){function n(e){g++||e({type:"zoomstart"})}function r(e){e({type:"zoom"})}function s(e){--g||e({type:"zoomend"})}var o,u=e.projection,p={r:u.rotate(),k:u.scale()},d=i(u,t),v=w(d,"zoomstart","zoom","zoomend"),g=0,y=d.on;return d.on("zoomstart",function(){E.select(this).style(T);var e=E.mouse(this),t=u.rotate(),i=t,s=u.translate(),g=f(t);o=a(u,e),y.call(d,"zoom",function(){var n=E.mouse(this);if(u.scale(p.k=E.event.scale),o){if(a(u,n)){u.rotate(t).translate(s);var f=a(u,n),d=c(o,f),y=m(l(g,d)),b=p.r=h(y,o,i);isFinite(b[0])&&isFinite(b[1])&&isFinite(b[2])||(b=i),u.rotate(b),i=b}}else e=n,o=a(u,e);r(v.of(this,arguments))}),n(v.of(this,arguments))}).on("zoomend",function(){E.select(this).style(N),y.call(d,"zoom",null),s(v.of(this,arguments))}).on("zoom.redraw",function(){e.render()}),E.rebind(d,v,"on")}function a(e,t){var n=e.invert(t);return n&&isFinite(n[0])&&isFinite(n[1])&&g(n)}function f(e){var t=.5*e[0]*S,n=.5*e[1]*S,r=.5*e[2]*S,i=Math.sin(t),s=Math.cos(t),o=Math.sin(n),u=Math.cos(n),a=Math.sin(r),f=Math.cos(r);return[s*u*f+i*o*a,i*u*f-s*o*a,s*o*f+i*u*a,s*u*a-i*o*f]}function l(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],o=t[0],u=t[1],a=t[2],f=t[3];return[n*o-r*u-i*a-s*f,n*u+r*o+i*f-s*a,n*a-r*f+i*o+s*u,n*f+r*a-i*u+s*o]}function c(e,t){if(e&&t){var n=b(e,t),r=Math.sqrt(y(n,n)),i=.5*Math.acos(Math.max(-1,Math.min(1,y(e,t)))),s=Math.sin(i)/r;return r&&[Math.cos(i),n[2]*s,-n[1]*s,n[0]*s]}}function h(e,t,n){var r=v(t,2,e[0]);r=v(r,1,e[1]),r=v(r,0,e[2]-n[2]);var i,s,o=t[0],u=t[1],a=t[2],f=r[0],l=r[1],c=r[2],h=Math.atan2(u,o)*x,d=Math.sqrt(o*o+u*u);Math.abs(l)>d?(s=(l>0?90:-90)-h,i=0):(s=Math.asin(l/d)*x-h,i=Math.sqrt(d*d-l*l));var m=180-s-2*h,g=(Math.atan2(c,f)-Math.atan2(a,i))*x,y=(Math.atan2(c,f)-Math.atan2(a,-i))*x,b=p(n[0],n[1],s,g),w=p(n[0],n[1],m,y);return b<=w?[s,g,n[2]]:[m,y,n[2]]}function p(e,t,n,r){var i=d(n-e),s=d(r-t);return Math.sqrt(i*i+s*s)}function d(e){return(e%360+540)%360-180}function v(e,t,n){var r=n*S,i=e.slice(),s=0===t?1:0,o=2===t?1:2,u=Math.cos(r),a=Math.sin(r);return i[s]=e[s]*u-e[o]*a,i[o]=e[o]*u+e[s]*a,i}function m(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*x,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*x,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*x]}function g(e){var t=e[0]*S,n=e[1]*S,r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function y(e,t){for(var n=0,r=0,i=e.length;r<i;++r)n+=e[r]*t[r];return n}function b(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function w(e){for(var t=0,n=arguments.length,r=[];++t<n;)r.push(arguments[t]);var i=E.dispatch.apply(null,r);return i.of=function(t,n){return function(r){var s;try{s=r.sourceEvent=E.event,r.target=e,E.event=r,i[r.type].apply(t,n)}finally{E.event=s}}},i}var E=e("d3"),S=Math.PI/180,x=180/Math.PI,T={cursor:"pointer"},N={cursor:"auto"};t.exports=r},{d3:97}],722:[function(e,t,n){"use strict";function r(e,t){var n=e.projection,r=e.zoom,s=function(){e.makeProjection(t),e.makePath(),r.scale(n.scale()),r.translate(n.translate()),i.loneUnhover(e.hoverContainer),e.render()};return s}var i=e("../cartesian/graph_interact");t.exports=r},{"../cartesian/graph_interact":696}],723:[function(e,t,n){"use strict";function r(e,t){this.element=e,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxStart=[0,0],this.boxEnd=[0,0]}function i(e){function t(){e.xaxis.autorange=!1,e.yaxis.autorange=!1}var n=e.mouseContainer,i=e.glplot,u=new r(n,i);return u.mouseListener=s(n,function(n,r,s){function o(t,n,r){var i=Math.min(n,r),s=Math.max(n,r);i!==s?(a[t]=i,a[t+2]=s,u.dataBox=a,e.setRanges(a)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}var a=e.calcDataBox(),f=i.viewBox,l=u.lastPos[0],c=u.lastPos[1];switch(r*=i.pixelRatio,s*=i.pixelRatio,s=f[3]-f[1]-s,e.fullLayout.dragmode){case"zoom":if(n){var h=r/(f[2]-f[0])*(a[2]-a[0])+a[0],p=s/(f[3]-f[1])*(a[3]-a[1])+a[1];u.boxEnabled||(u.boxStart[0]=h,u.boxStart[1]=p),u.boxEnd[0]=h,u.boxEnd[1]=p,u.boxEnabled=!0}else u.boxEnabled&&(o(0,u.boxStart[0],u.boxEnd[0]),o(1,u.boxStart[1],u.boxEnd[1]),t(),u.boxEnabled=!1);break;case"pan":if(u.boxEnabled=!1,n){var d=(l-r)*(a[2]-a[0])/(i.viewBox[2]-i.viewBox[0]),v=(c-s)*(a[3]-a[1])/(i.viewBox[3]-i.viewBox[1]);a[0]+=d,a[2]+=d,a[1]+=v,a[3]+=v,e.setRanges(a),u.lastInputTime=Date.now(),t(),e.cameraChanged()}}u.lastPos[0]=r,u.lastPos[1]=s}),u.wheelListener=o(n,function(n,r){var s=e.calcDataBox(),o=i.viewBox,a=u.lastPos[0],f=u.lastPos[1];switch(e.fullLayout.dragmode){case"zoom":break;case"pan":var l=Math.exp(.1*r/(o[3]-o[1])),c=a/(o[2]-o[0])*(s[2]-s[0])+s[0],h=f/(o[3]-o[1])*(s[3]-s[1])+s[1];s[0]=(s[0]-c)*l+c,s[2]=(s[2]-c)*l+c,s[1]=(s[1]-h)*l+h,s[3]=(s[3]-h)*l+h,e.setRanges(s),u.lastInputTime=Date.now(),t(),e.cameraChanged()}return!0}),u}var s=e("mouse-change"),o=e("mouse-wheel");t.exports=i},{"mouse-change":418,"mouse-wheel":420}],724:[function(e,t,n){"use strict";function r(e){this.scene=e,this.gl=e.gl,this.pixelRatio=e.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}function i(e){return new r(e)}var s=e("../plots"),o=e("../cartesian/axes"),u=e("../../lib/html2unicode"),a=e("../../lib/str2rgbarray"),f=r.prototype,l=["xaxis","yaxis"];f.merge=function(e){this.titleEnable=!1,this.backgroundColor=a(e.plot_bgcolor);var t,n,r,i,s,o,f,h,p,d,v;for(d=0;d<2;++d){for(t=l[d],n=e[this.scene[t]._name],r=/Click to enter .+ title/.test(n.title)?"":n.title,v=0;v<=2;v+=2)this.labelEnable[d+v]=!1,this.labels[d+v]=u(r),this.labelColor[d+v]=a(n.titlefont.color),this.labelFont[d+v]=n.titlefont.family,this.labelSize[d+v]=n.titlefont.size,this.labelPad[d+v]=this.getLabelPad(t,n),this.tickEnable[d+v]=!1,this.tickColor[d+v]=a((n.tickfont||{}).color),this.tickAngle[d+v]="auto"===n.tickangle?0:Math.PI*-n.tickangle/180,this.tickPad[d+v]=this.getTickPad(n),this.tickMarkLength[d+v]=0,this.tickMarkWidth[d+v]=n.tickwidth||0,this.tickMarkColor[d+v]=a(n.tickcolor),this.borderLineEnable[d+v]=!1,this.borderLineColor[d+v]=a(n.linecolor),this.borderLineWidth[d+v]=n.linewidth||0;f=this.hasSharedAxis(n),s=this.hasAxisInDfltPos(t,n)&&!f,o=this.hasAxisInAltrPos(t,n)&&!f,i=n.mirror||!1,h=f?String(i).indexOf("all")!==-1:!!i,p=f?"allticks"===i:String(i).indexOf("ticks")!==-1,s?this.labelEnable[d]=!0:o&&(this.labelEnable[d+2]=!0),s?this.tickEnable[d]=n.showticklabels:o&&(this.tickEnable[d+2]=n.showticklabels),(s||h)&&(this.borderLineEnable[d]=n.showline),(o||h)&&(this.borderLineEnable[d+2]=n.showline),(s||p)&&(this.tickMarkLength[d]=this.getTickMarkLength(n)),(o||p)&&(this.tickMarkLength[d+2]=this.getTickMarkLength(n)),this.gridLineEnable[d]=n.showgrid,this.gridLineColor[d]=a(n.gridcolor),this.gridLineWidth[d]=n.gridwidth,this.zeroLineEnable[d]=n.zeroline,this.zeroLineColor[d]=a(n.zerolinecolor),this.zeroLineWidth[d]=n.zerolinewidth}},f.hasSharedAxis=function(e){var t=this.scene,n=s.getSubplotIds(t.fullLayout,"gl2d"),r=o.findSubplotsWithAxis(n,e);return 0!==r.indexOf(t.id)},f.hasAxisInDfltPos=function(e,t){var n=t.side;return"xaxis"===e?"bottom"===n:"yaxis"===e?"left"===n:void 0},f.hasAxisInAltrPos=function(e,t){var n=t.side;return"xaxis"===e?"top"===n:"yaxis"===e?"right"===n:void 0},f.getLabelPad=function(e,t){var n=1.5,r=t.titlefont.size,i=t.showticklabels;return"xaxis"===e?"top"===t.side?-10+r*(n+(i?1:0)):-10+r*(n+(i?.5:0)):"yaxis"===e?"right"===t.side?10+r*(n+(i?1:.5)):10+r*(n+(i?.5:0)):void 0},f.getTickPad=function(e){return"outside"===e.ticks?10+e.ticklen:15},f.getTickMarkLength=function(e){if(!e.ticks)return 0;var t=e.ticklen;return"inside"===e.ticks?-t:t},t.exports=i},{"../../lib/html2unicode":656,"../../lib/str2rgbarray":671,"../cartesian/axes":689,"../plots":749}],725:[function(e,t,n){"use strict";var r=e("./scene2d"),i=e("../plots"),s=e("../../constants/xmlns_namespaces");n.name="gl2d",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex={x:/^x([2-9]|[1-9][0-9]+)?$/,y:/^y([2-9]|[1-9][0-9]+)?$/},n.attrRegex={x:/^xaxis([2-9]|[1-9][0-9]+)?$/,y:/^yaxis([2-9]|[1-9][0-9]+)?$/},n.attributes=e("../cartesian/attributes"),n.plot=function(e){for(var t=e._fullLayout,n=e._fullData,s=i.getSubplotIds(t,"gl2d"),o=0;o<s.length;o++){var u=s[o],a=t._plots[u],f=i.getSubplotData(n,"gl2d",u),l=a._scene2d;void 0===l&&(l=new r({id:u,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio},t),a._scene2d=l),l.plot(f,e.calcdata,t,e.layout)}},n.clean=function(e,t,n,r){for(var s=i.getSubplotIds(r,"gl2d"),o=0;o<s.length;o++){var u=s[o],a=r._plots[u];if(a._scene2d){var f=i.getSubplotData(e,"gl2d",u);0===f.length&&(a._scene2d.destroy(),delete r._plots[u])}}},n.toSVG=function(e){for(var t=e._fullLayout,n=i.getSubplotIds(t,"gl2d"),r=0;r<n.length;r++){var o=t._plots[n[r]],u=o._scene2d,f=u.toImage("png"),l=t._glimages.append("svg:image");l.attr({xmlns:s.svg,"xlink:href":f,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),u.destroy()}}},{"../../constants/xmlns_namespaces":642,"../cartesian/attributes":688,"../plots":749,"./scene2d":726}],726:[function(e,t,n){"use strict";function r(e,t){this.container=e.container,this.graphDiv=e.graphDiv,this.pixelRatio=e.plotGlPixelRatio||window.devicePixelRatio,this.id=e.id,this.staticPlot=!!e.staticPlot,this.fullLayout=t,this.fullData=null,this.updateAxes(t),this.makeFramework(),this.glplotOptions=p(this),this.glplotOptions.merge(t),this.glplot=f(this.glplotOptions),this.camera=d(this),this.traces={},this._inputs={},this.spikes=l(this.glplot),this.selectBox=c(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.bounds=[1/0,1/0,-1/0,-1/0],this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw()}function i(e,t){for(var n=0;n<2;++n){var r=e[n],i=t[n];if(r.length!==i.length)return!0;for(var s=0;s<r.length;++s)if(r[s].x!==i[s].x)return!0}return!1}var s,o,u=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/graph_interact"),f=e("gl-plot2d"),l=e("gl-spikes2d"),c=e("gl-select-box"),h=e("webgl-context"),p=e("./convert"),d=e("./camera"),v=e("../../lib/html2unicode"),m=e("../../lib/show_no_webgl_msg"),g=["xaxis","yaxis"];t.exports=r;var y=r.prototype;y.makeFramework=function(){if(this.staticPlot){if(!o&&(s=document.createElement("canvas"),o=h({canvas:s,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!o))throw new Error("Error creating static canvas/context for image server");this.canvas=s,this.gl=o}else{var e=document.createElement("canvas"),t=h({canvas:e,premultipliedAlpha:!0});t||m(this),this.canvas=e,this.gl=t}var n=this.canvas;n.style.width="100%",n.style.height="100%",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["pointer-events"]="none",this.updateSize(n),n.className+="user-select-none";var r=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",r.style["z-index"]=20,r.style["pointer-events"]="none";var i=this.mouseContainer=document.createElement("div");i.style.position="absolute";var u=this.container;u.appendChild(n),u.appendChild(r),u.appendChild(i)},y.toImage=function(e){e||(e="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(s),this.updateSize(this.canvas),this.glplot.setDirty(),this.glplot.draw();var t=this.glplot.gl,n=t.drawingBufferWidth,r=t.drawingBufferHeight;t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new Uint8Array(n*r*4);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,i);for(var o=0,u=r-1;o<u;++o,--u)for(var a=0;a<n;++a)for(var f=0;f<4;++f){var l=i[4*(n*o+a)+f];i[4*(n*o+a)+f]=i[4*(n*u+a)+f],i[4*(n*u+a)+f]=l}var c=document.createElement("canvas");c.width=n,c.height=r;var h=c.getContext("2d"),p=h.createImageData(n,r);p.data.set(i),h.putImageData(p,0,0);var d;switch(e){case"jpeg":d=c.toDataURL("image/jpeg");break;case"webp":d=c.toDataURL("image/webp");break;default:d=c.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(s),d},y.updateSize=function(e){e||(e=this.canvas);var t=this.pixelRatio,n=this.fullLayout,r=n.width,i=n.height,s=0|Math.ceil(t*r),o=0|Math.ceil(t*i);return e.width===s&&e.height===o||(e.width=s,e.height=o),e},y.computeTickMarks=function(){this.xaxis._length=this.glplot.viewBox[2]-this.glplot.viewBox[0],this.yaxis._length=this.glplot.viewBox[3]-this.glplot.viewBox[1];for(var e=[u.calcTicks(this.xaxis),u.calcTicks(this.yaxis)],t=0;t<2;++t)for(var n=0;n<e[t].length;++n)e[t][n].text=v(e[t][n].text+"");return e},y.updateAxes=function(e){var t=u.subplotMatch,n="xaxis"+this.id.match(t)[1],r="yaxis"+this.id.match(t)[2];this.xaxis=e[n],this.yaxis=e[r]},y.updateFx=function(e){var t=this.fullLayout;t.dragmode=e.dragmode,t.hovermode=e.hovermode};var b=function(e){var t=e.xaxis.range,n=e.yaxis.range;e.graphDiv.layout.xaxis.autorange=e.xaxis.autorange,e.graphDiv.layout.xaxis.range=t.slice(0),e.graphDiv.layout.yaxis.autorange=e.yaxis.autorange,e.graphDiv.layout.yaxis.range=n.slice(0);var r={lastInputTime:e.camera.lastInputTime};r[e.xaxis._name]=t.slice(),r[e.yaxis._name]=n.slice(),e.graphDiv.emit("plotly_relayout",r)};y.cameraChanged=function(){var e=this.camera;this.glplot.setDataBox(this.calcDataBox());var t=this.computeTickMarks(),n=this.glplotOptions.ticks;i(t,n)&&(this.glplotOptions.ticks=t,this.glplotOptions.dataBox=e.dataBox,this.glplot.update(this.glplotOptions),b(this))},y.destroy=function(){var e=this.traces;e&&Object.keys(e).map(function(t){e[t].dispose(),delete e[t]}),this.glplot.dispose(),this.staticPlot||this.container.removeChild(this.canvas),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this._inputs=null,this.glplot=null,this.stopped=!0},y.plot=function(e,t,n){var r=this.glplot;this.fullLayout=n,this.updateAxes(n),this.updateTraces(e,t);var i=n.width,s=n.height;this.updateSize(this.canvas);var o=this.glplotOptions;o.merge(n),o.screenBox=[0,0,i,s];var a=n._size,f=this.xaxis.domain,l=this.yaxis.domain;o.viewBox=[a.l+f[0]*a.w,a.b+l[0]*a.h,i-a.r-(1-f[1])*a.w,s-a.t-(1-l[1])*a.h],this.mouseContainer.style.width=a.w*(f[1]-f[0])+"px",this.mouseContainer.style.height=a.h*(l[1]-l[0])+"px",this.mouseContainer.height=a.h*(l[1]-l[0]),this.mouseContainer.style.left=a.l+f[0]*a.w+"px",this.mouseContainer.style.top=a.t+(1-l[1])*a.h+"px";var c=this.bounds;c[0]=c[1]=1/0,c[2]=c[3]=-1/0;var h,p,d=Object.keys(this.traces);for(p=0;p<d.length;++p)for(var v=this.traces[d[p]],m=0;m<2;++m)c[m]=Math.min(c[m],v.bounds[m]),c[m+2]=Math.max(c[m+2],v.bounds[m+2]);for(p=0;p<2;++p)c[p]>c[p+2]&&(c[p]=-1,c[p+2]=1),h=this[g[p]],h._length=o.viewBox[p+2]-o.viewBox[p],u.doAutoRange(h);o.ticks=this.computeTickMarks(),o.dataBox=this.calcDataBox(),o.merge(n),r.update(o),this.glplot.draw()},y.calcDataBox=function(){var e=this.xaxis,t=this.yaxis,n=e.range,r=t.range,i=e.r2l,s=t.r2l;return[i(n[0]),s(r[0]),i(n[1]),s(r[1])]},y.setRanges=function(e){var t=this.xaxis,n=this.yaxis,r=t.l2r,i=n.l2r;t.range=[r(e[0]),r(e[2])],n.range=[i(e[1]),i(e[3])]},y.updateTraces=function(e,t){var n,r,i,s=Object.keys(this.traces);this.fullData=e;e:for(n=0;n<s.length;n++){var o=s[n],u=this.traces[o];for(r=0;r<e.length;r++)if(i=e[r],i.uid===o&&i.type===u.type)continue e;u.dispose(),delete this.traces[o]}for(n=0;n<e.length;n++){i=e[n],this._inputs[i.uid]=n;var a=t[n],f=this.traces[i.uid];f?f.update(i,a):(f=i._module.plot(this,i,a),this.traces[i.uid]=f)}},y.emitPointAction=function(e,t){var n=this._inputs[e.trace.uid];this.graphDiv.emit(t,{points:[{x:e.traceCoord[0],y:e.traceCoord[1],curveNumber:n,pointNumber:e.pointIndex,data:this.fullData[n]._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis}]})},y.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var e=this.glplot,t=this.camera,n=t.mouseListener,r=1===this.lastButtonState&&0===n.buttons,i=this.fullLayout;this.lastButtonState=n.buttons,this.cameraChanged();var s=n.x*e.pixelRatio,o=this.canvas.height-e.pixelRatio*n.y;if(t.boxEnabled&&"zoom"===i.dragmode)this.selectBox.enabled=!0,this.selectBox.selectBox=[Math.min(t.boxStart[0],t.boxEnd[0]),Math.min(t.boxStart[1],t.boxEnd[1]),Math.max(t.boxStart[0],t.boxEnd[0]),Math.max(t.boxStart[1],t.boxEnd[1])],e.setDirty();else{this.selectBox.enabled=!1;var u=i._size,f=this.xaxis.domain,l=this.yaxis.domain,c=e.pick(s/e.pixelRatio+u.l+f[0]*u.w,o/e.pixelRatio-(u.t+(1-l[1])*u.h)),h=c&&c.object._trace.handlePick(c);if(h&&r&&this.emitPointAction(h,"plotly_click"),c&&"skip"!==c.object._trace.hoverinfo&&i.hovermode){if(h&&(!this.lastPickResult||this.lastPickResult.traceUid!==h.trace.uid||this.lastPickResult.dataCoord[0]!==h.dataCoord[0]||this.lastPickResult.dataCoord[1]!==h.dataCoord[1])){var p=h;this.lastPickResult={traceUid:h.trace?h.trace.uid:null,dataCoord:h.dataCoord.slice()},this.spikes.update({center:c.dataCoord}),p.screenCoord=[((e.viewBox[2]-e.viewBox[0])*(c.dataCoord[0]-e.dataBox[0])/(e.dataBox[2]-e.dataBox[0])+e.viewBox[0])/e.pixelRatio,(this.canvas.height-(e.viewBox[3]-e.viewBox[1])*(c.dataCoord[1]-e.dataBox[1])/(e.dataBox[3]-e.dataBox[1])-e.viewBox[1])/e.pixelRatio],this.emitPointAction(h,"plotly_hover");var d=p.hoverinfo;if("all"!==d){var v=d.split("+");v.indexOf("x")===-1&&(p.traceCoord[0]=void 0),v.indexOf("y")===-1&&(p.traceCoord[1]=void 0),v.indexOf("z")===-1&&(p.traceCoord[2]=void 0),v.indexOf("text")===-1&&(p.textLabel=void 0),v.indexOf("name")===-1&&(p.name=void 0)}a.loneHover({x:p.screenCoord[0],y:p.screenCoord[1],xLabel:this.hoverFormatter("xaxis",p.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",p.traceCoord[1]),zLabel:p.traceCoord[2],text:p.textLabel,name:p.name,color:p.color},{container:this.svgContainer})}}else!c&&this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),a.loneUnhover(this.svgContainer))}e.draw()}},y.hoverFormatter=function(e,t){if(void 0!==t){var n=this[e];return u.tickText(n,n.c2l(t),"hover").text}}},{"../../lib/html2unicode":656,"../../lib/show_no_webgl_msg":669,"../../plots/cartesian/axes":689,"../../plots/cartesian/graph_interact":696,"./camera":723,"./convert":724,"gl-plot2d":192,"gl-select-box":223,"gl-spikes2d":232,"webgl-context":524}],727:[function(e,t,n){"use strict";function r(e,t){e=e||document.body,t=t||{};var n=[.01,1/0];"distanceLimits"in t&&(n[0]=t.distanceLimits[0],n[1]=t.distanceLimits[1]),"zoomMin"in t&&(n[0]=t.zoomMin),"zoomMax"in t&&(n[1]=t.zoomMax);var r=s({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:n}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0,c=e.clientWidth,h=e.clientHeight,p={keyBindingMode:"rotate",view:r,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:r.modes,tick:function(){var t=i(),n=this.delay,s=t-2*n;r.idle(t-n),r.recalcMatrix(s),r.flush(t-(100+2*n));for(var o=!0,u=r.computedMatrix,a=0;a<16;++a)o=o&&f[a]===u[a],f[a]=u[a];var p=e.clientWidth===c&&e.clientHeight===h;return c=e.clientWidth,h=e.clientHeight,o?!p:(l=Math.exp(r.computedRadius[0]),!0)},lookAt:function(e,t,n){r.lookAt(r.lastT(),e,t,n)},rotate:function(e,t,n){r.rotate(r.lastT(),e,t,n)},pan:function(e,t,n){r.pan(r.lastT(),e,t,n)},translate:function(e,t,n){r.translate(r.lastT(),e,t,n)}};Object.defineProperties(p,{matrix:{get:function(){return r.computedMatrix},set:function(e){return r.setMatrix(r.lastT(),e),r.computedMatrix},enumerable:!0},mode:{get:function(){return r.getMode()},set:function(e){var t=r.computedUp.slice(),n=r.computedEye.slice(),s=r.computedCenter.slice();if(r.setMode(e),"turntable"===e){var o=i();r._active.lookAt(o,n,s,t),r._active.lookAt(o+500,n,s,[0,0,1]),r._active.flush(o)}return r.getMode()},enumerable:!0},center:{get:function(){return r.computedCenter},set:function(e){return r.lookAt(r.lastT(),null,e),r.computedCenter},enumerable:!0},eye:{get:function(){return r.computedEye},set:function(e){return r.lookAt(r.lastT(),e),r.computedEye},enumerable:!0},up:{get:function(){return r.computedUp},set:function(e){return r.lookAt(r.lastT(),null,null,e),r.computedUp},enumerable:!0},distance:{get:function(){return l},set:function(e){return r.setDistance(r.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return r.getDistanceLimits(n)},set:function(e){return r.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var d=0,v=0;return o(e,function(t,n,s,o){var u="rotate"===p.keyBindingMode,a="pan"===p.keyBindingMode,f="zoom"===p.keyBindingMode,c=!!o.control,h=!!o.alt,m=!!o.shift,g=!!(1&t),y=!!(2&t),b=!!(4&t),w=1/e.clientHeight,E=w*(n-d),S=w*(s-v),x=p.flipX?1:-1,T=p.flipY?1:-1,N=i(),C=Math.PI*p.rotateSpeed;if((u&&g&&!c&&!h&&!m||g&&!c&&!h&&m)&&r.rotate(N,x*C*E,-T*C*S,0),(a&&g&&!c&&!h&&!m||y||g&&c&&!h&&!m)&&r.pan(N,-p.translateSpeed*E*l,p.translateSpeed*S*l,0),f&&g&&!c&&!h&&!m||b||g&&!c&&h&&!m){var k=-p.zoomSpeed*S/window.innerHeight*(N-r.lastT())*100;r.pan(N,0,0,l*(Math.exp(k)-1))}return d=n,v=s,!0}),u(e,function(e,t){var n=p.flipX?1:-1,s=p.flipY?1:-1,o=i();if(Math.abs(e)>Math.abs(t))r.rotate(o,0,0,-e*n*Math.PI*p.rotateSpeed/window.innerWidth);else{var u=-p.zoomSpeed*s*t/window.innerHeight*(o-r.lastT())/100;r.pan(o,0,0,l*(Math.exp(u)-1))}},!0),p}t.exports=r;var i=e("right-now"),s=e("3d-view"),o=e("mouse-change"),u=e("mouse-wheel")},{"3d-view":29,"mouse-change":418,"mouse-wheel":420,"right-now":465}],728:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<3;++n){var r=u[n];t[r]._gd=e}}var i=e("./scene"),s=e("../plots"),o=e("../../constants/xmlns_namespaces"),u=["xaxis","yaxis","zaxis"];n.name="gl3d",n.attr="scene",n.idRoot="scene",n.idRegex=/^scene([2-9]|[1-9][0-9]+)?$/,n.attrRegex=/^scene([2-9]|[1-9][0-9]+)?$/,n.attributes=e("./layout/attributes"),n.layoutAttributes=e("./layout/layout_attributes"),n.supplyLayoutDefaults=e("./layout/defaults"),n.plot=function(e){var t=e._fullLayout,n=e._fullData,o=s.getSubplotIds(t,"gl3d");t._paperdiv.style({width:t.width+"px",height:t.height+"px"}),e._context.setBackground(e,t.paper_bgcolor);for(var u=0;u<o.length;u++){var f=o[u],l=s.getSubplotData(n,"gl3d",f),c=t[f],h=c._scene;void 0===h&&(r(e,c),h=new i({id:f,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio},t),c._scene=h),h.plot(l,t,e.layout)}},n.clean=function(e,t,n,r){for(var i=s.getSubplotIds(r,"gl3d"),o=0;o<i.length;o++){var u=i[o];!t[u]&&r[u]._scene&&r[u]._scene.destroy()}},n.toSVG=function(e){for(var t=e._fullLayout,n=s.getSubplotIds(t,"gl3d"),r=t._size,i=0;i<n.length;i++){var u=t[n[i]],f=u.domain,l=u._scene,c=l.toImage("png"),h=t._glimages.append("svg:image");h.attr({xmlns:o.svg,"xlink:href":c,x:r.l+r.w*f.x[0],y:r.t+r.h*(1-f.y[1]),width:r.w*(f.x[1]-f.x[0]),height:r.h*(f.y[1]-f.y[0]),preserveAspectRatio:"none"}),l.destroy()}},n.cleanId=function(e){if(e.match(/^scene[0-9]*$/)){var t=e.substr(5);return"1"===t&&(t=""),"scene"+t}},n.setConvert=e("./set_convert")},{"../../constants/xmlns_namespaces":642,"../plots":749,"./layout/attributes":729,"./layout/defaults":733,"./layout/layout_attributes":734,"./scene":738,"./set_convert":739}],729:[function(e,t,n){"use strict";t.exports={scene:{valType:"subplotid",dflt:"scene"}}},{}],730:[function(e,t,n){"use strict";var r=e("../../../components/color"),i=e("../../cartesian/layout_attributes"),s=e("../../../lib/extend").extendFlat;t.exports={showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:r.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:i.color,categoryorder:i.categoryorder,categoryarray:i.categoryarray,title:i.title,titlefont:i.titlefont,type:i.type,autorange:i.autorange,rangemode:i.rangemode,range:i.range,fixedrange:i.fixedrange,tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,mirror:i.mirror,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,tickfont:i.tickfont,tickangle:i.tickangle,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,separatethousands:i.separatethousands,tickformat:i.tickformat,hoverformat:i.hoverformat,showline:i.showline,linecolor:i.linecolor,linewidth:i.linewidth,showgrid:i.showgrid,gridcolor:s({},i.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:i.gridwidth,zeroline:i.zeroline,zerolinecolor:i.zerolinecolor,zerolinewidth:i.zerolinewidth}},{"../../../components/color":557,"../../../lib/extend":650,"../../cartesian/layout_attributes":698}],731:[function(e,t,n){"use strict";var r=e("tinycolor2").mix,i=e("../../../lib"),s=e("./axis_attributes"),o=e("../../cartesian/axis_defaults"),u=["xaxis","yaxis","zaxis"],a=13600/187;t.exports=function(e,t,n){function f(e,t){return i.coerce(c,h,s,e,t)}for(var c,h,p=0;p<u.length;p++){var d=u[p];c=e[d]||{},h={_id:d[0]+n.scene,_name:d},t[d]=h=o(c,h,f,{font:n.font,letter:d[0],data:n.data,showGrid:!0,bgColor:n.bgColor,calendar:n.calendar}),f("gridcolor",r(h.color,n.bgColor,a).toRgbString()),f("title",d[0]),h.setScale=i.noop,f("showspikes")&&(f("spikesides"),f("spikethickness"),f("spikecolor",h.color)),f("showaxeslabels"),f("showbackground")&&f("backgroundcolor")}}},{"../../../lib":657,"../../cartesian/axis_defaults":691,"./axis_attributes":730,tinycolor2:495}],732:[function(e,t,n){"use strict";function r(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=a(this.tickPad),this._defaultLabelPad=a(this.labelPad),this._defaultLineTickLength=a(this.lineTickLength)}function i(e){var t=new r;return t.merge(e),t}var s=e("arraytools"),o=e("../../../lib/html2unicode"),u=e("../../../lib/str2rgbarray"),a=s.copy1D,f=["xaxis","yaxis","zaxis"],l=r.prototype;l.merge=function(e){for(var t=this,n=0;n<3;++n){var r=e[f[n]];t.labels[n]=o(r.title),"titlefont"in r&&(r.titlefont.color&&(t.labelColor[n]=u(r.titlefont.color)),r.titlefont.family&&(t.labelFont[n]=r.titlefont.family),r.titlefont.size&&(t.labelSize[n]=r.titlefont.size)),"showline"in r&&(t.lineEnable[n]=r.showline),"linecolor"in r&&(t.lineColor[n]=u(r.linecolor)),"linewidth"in r&&(t.lineWidth[n]=r.linewidth),"showgrid"in r&&(t.gridEnable[n]=r.showgrid),"gridcolor"in r&&(t.gridColor[n]=u(r.gridcolor)),"gridwidth"in r&&(t.gridWidth[n]=r.gridwidth),"log"===r.type?t.zeroEnable[n]=!1:"zeroline"in r&&(t.zeroEnable[n]=r.zeroline),"zerolinecolor"in r&&(t.zeroLineColor[n]=u(r.zerolinecolor)),"zerolinewidth"in r&&(t.zeroLineWidth[n]=r.zerolinewidth),"ticks"in r&&r.ticks?t.lineTickEnable[n]=!0:t.lineTickEnable[n]=!1,"ticklen"in r&&(t.lineTickLength[n]=t._defaultLineTickLength[n]=r.ticklen),"tickcolor"in r&&(t.lineTickColor[n]=u(r.tickcolor)),"tickwidth"in r&&(t.lineTickWidth[n]=r.tickwidth),"tickangle"in r&&(t.tickAngle[n]="auto"===r.tickangle?0:Math.PI*-r.tickangle/180),"showticklabels"in r&&(t.tickEnable[n]=r.showticklabels),"tickfont"in r&&(r.tickfont.color&&(t.tickColor[n]=u(r.tickfont.color)),r.tickfont.family&&(t.tickFont[n]=r.tickfont.family),r.tickfont.size&&(t.tickSize[n]=r.tickfont.size)),"mirror"in r?["ticks","all","allticks"].indexOf(r.mirror)!==-1?(t.lineTickMirror[n]=!0,t.lineMirror[n]=!0):r.mirror===!0?(t.lineTickMirror[n]=!1,t.lineMirror[n]=!0):(t.lineTickMirror[n]=!1,t.lineMirror[n]=!1):t.lineMirror[n]=!1,"showbackground"in r&&r.showbackground!==!1?(t.backgroundEnable[n]=!0,t.backgroundColor[n]=u(r.backgroundcolor)):t.backgroundEnable[n]=!1}},t.exports=i},{"../../../lib/html2unicode":656,"../../../lib/str2rgbarray":671,arraytools:35}],733:[function(e,t,n){"use strict";function r(e,t,n,r){for(var s=n("bgcolor"),a=i.combine(s,r.paper_bgcolor),f=Object.keys(o.camera),l=0;l<f.length;l++)n("camera."+f[l]+".x"),n("camera."+f[l]+".y"),n("camera."+f[l]+".z");var c=!!n("aspectratio.x")&&!!n("aspectratio.y")&&!!n("aspectratio.z"),h=c?"manual":"auto",p=n("aspectmode",h);c||(e.aspectratio=t.aspectratio={x:1,y:1,z:1},"manual"===p&&(t.aspectmode="auto")),u(e,t,{font:r.font,scene:r.id,data:r.fullData,bgColor:a,calendar:r.calendar}),n("dragmode",r.getDfltFromLayout("dragmode")),n("hovermode",r.getDfltFromLayout("hovermode"))}var i=e("../../../components/color"),s=e("../../subplot_defaults"),o=e("./layout_attributes"),u=e("./axis_defaults");t.exports=function(e,t,n){function i(t){if(!u){var n=o[t].values.indexOf(e[t])!==-1;return n?e[t]:void 0}}var u=t._has("cartesian")||t._has("geo")||t._has("gl2d")||t._has("pie")||t._has("ternary");s(e,t,n,{type:"gl3d",attributes:o,handleDefaults:r,font:t.font,fullData:n,getDfltFromLayout:i,paper_bgcolor:t.paper_bgcolor,calendar:t.calendar})}},{"../../../components/color":557,"../../subplot_defaults":756,"./axis_defaults":731,"./layout_attributes":734}],734:[function(e,t,n){"use strict";function r(e,t,n){return{x:{valType:"number",dflt:e},y:{valType:"number",dflt:t},z:{valType:"number",dflt:n}}}var i=e("./axis_attributes"),s=e("../../../lib/extend").extendFlat;t.exports={bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},camera:{up:s(r(0,0,1),{}),center:s(r(0,0,0),{}),eye:s(r(1.25,1.25,1.25),{})},domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto"},aspectratio:{x:{valType:"number",min:0},y:{valType:"number",min:0},z:{valType:"number",min:0}},xaxis:i,yaxis:i,zaxis:i,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan"],dflt:"turntable"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest"},_deprecated:{cameraposition:{valType:"info_array"}}}},{"../../../lib/extend":650,"./axis_attributes":730}],735:[function(e,t,n){"use strict";function r(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}function i(e){var t=new r;return t.merge(e),t}var s=e("../../../lib/str2rgbarray"),o=["xaxis","yaxis","zaxis"],u=r.prototype;u.merge=function(e){for(var t=0;t<3;++t){var n=e[o[t]];this.enabled[t]=n.showspikes,this.colors[t]=s(n.spikecolor),this.drawSides[t]=n.spikesides,this.lineWidth[t]=n.spikethickness}},t.exports=i},{"../../../lib/str2rgbarray":671}],736:[function(e,t,n){"use strict";function r(e){for(var t=new Array(3),n=0;n<3;++n){for(var r=e[n],i=new Array(r.length),s=0;s<r.length;++s)i[s]=r[s].x;t[n]=i}return t}function i(e){for(var t=e.axesOptions,n=e.glplot.axesPixels,i=e.fullSceneLayout,c=[[],[],[]],h=0;h<3;++h){var p=i[a[h]];if(p._length=(n[h].hi-n[h].lo)*n[h].pixelsPerDataUnit/e.dataScale[h],Math.abs(p._length)===1/0)c[h]=[];else{p.range[0]=n[h].lo/e.dataScale[h],p.range[1]=n[h].hi/e.dataScale[h],p._m=1/(e.dataScale[h]*n[h].pixelsPerDataUnit),p.range[0]===p.range[1]&&(p.range[0]-=1,p.range[1]+=1);var d=p.tickmode;if("auto"===p.tickmode){p.tickmode="linear";var v=p.nticks||o.constrain(p._length/40,4,9);s.autoTicks(p,Math.abs(p.range[1]-p.range[0])/v)}for(var m=s.calcTicks(p),g=0;g<m.length;++g)m[g].x=m[g].x*e.dataScale[h],m[g].text=u(m[g].text);c[h]=m,p.tickmode=d}}t.ticks=c;for(var h=0;h<3;++h){f[h]=.5*(e.glplot.bounds[0][h]+e.glplot.bounds[1][h]);for(var g=0;g<2;++g)t.bounds[g][h]=e.glplot.bounds[g][h]}e.contourLevels=r(c)}t.exports=i;var s=e("../../cartesian/axes"),o=e("../../../lib"),u=e("../../../lib/html2unicode"),a=["xaxis","yaxis","zaxis"],f=[0,0,0]},{"../../../lib":657,"../../../lib/html2unicode":656,"../../cartesian/axes":689}],737:[function(e,t,n){"use strict";function r(e,t){var n,r,i=[0,0,0,0];for(n=0;n<4;++n)for(r=0;r<4;++r)i[r]+=e[4*n+r]*t[n];return i}function i(e,t){var n=r(e.projection,r(e.view,r(e.model,[t[0],t[1],t[2],1])));return n}t.exports=i},{}],738:[function(e,t,n){"use strict";function r(e){function t(t,n){if("string"==typeof n)return n;var r=e.fullSceneLayout[t];return v.tickText(r,r.c2l(n),"hover").text}var n,r=e.svgContainer,i=e.container.getBoundingClientRect(),s=i.width,o=i.height;r.setAttributeNS(null,"viewBox","0 0 "+s+" "+o),r.setAttributeNS(null,"width",s),r.setAttributeNS(null,"height",o),T(e),e.glplot.axes.update(e.axesOptions);for(var u=Object.keys(e.traces),a=null,f=e.glplot.selection,l=0;l<u.length;++l)n=e.traces[u[l]],"skip"!==n.data.hoverinfo&&n.handlePick(f)&&(a=n),n.setContourLevels&&n.setContourLevels();var c;if(null!==a){var h=w(e.glplot.cameraParams,f.dataCoordinate);n=a.data;var p=n.hoverinfo,d=t("xaxis",f.traceCoordinate[0]),g=t("yaxis",f.traceCoordinate[1]),y=t("zaxis",f.traceCoordinate[2]);if("all"!==p){var b=p.split("+");b.indexOf("x")===-1&&(d=void 0),b.indexOf("y")===-1&&(g=void 0),b.indexOf("z")===-1&&(y=void 0),b.indexOf("text")===-1&&(f.textLabel=void 0),b.indexOf("name")===-1&&(a.name=void 0)}e.fullSceneLayout.hovermode&&m.loneHover({x:(.5+.5*h[0]/h[3])*s,y:(.5-.5*h[1]/h[3])*o,xLabel:d,yLabel:g,zLabel:y,text:f.textLabel,name:a.name,color:a.color},{container:r});var E={points:[{x:d,y:g,z:y,data:n._input,fullData:n,curveNumber:n.index,pointNumber:f.data.index}]};f.buttons&&f.distance<5?e.graphDiv.emit("plotly_click",E):e.graphDiv.emit("plotly_hover",E),c=E}else m.loneUnhover(r),e.graphDiv.emit("plotly_unhover",c)}function i(e,t,n,i){var s={canvas:n,gl:i,container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1};if(e.staticMode){if(!c&&(l=document.createElement("canvas"),c=p({canvas:l,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!c))throw new Error("error creating static canvas/context for image server");s.pixelRatio=e.pixelRatio,s.gl=c,s.canvas=l}try{e.glplot=h(s)}catch(t){y(e)}var o=function(e){var t={};t[e.id]=f(e.camera),e.saveCamera(e.graphDiv.layout),e.graphDiv.emit("plotly_relayout",t)};if(e.glplot.canvas.addEventListener("mouseup",o.bind(null,e)),e.glplot.canvas.addEventListener("wheel",o.bind(null,e)),e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",function(e){d.warn("Lost WebGL context."),e.preventDefault()}),!e.camera){var u=e.fullSceneLayout.camera;e.camera=b(e.container,{center:[u.center.x,u.center.y,u.center.z],eye:[u.eye.x,u.eye.y,u.eye.z],up:[u.up.x,u.up.y,u.up.z],zoomMin:.1,zoomMax:100,mode:"orbit"})}return e.glplot.mouseListener.enabled=!1,e.glplot.camera=e.camera,e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=r.bind(null,e),e.traces={},!0}function s(e,t){var n=document.createElement("div"),r=e.container;this.graphDiv=e.graphDiv;var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.style.position="absolute",s.style.top=s.style.left="0px",s.style.width=s.style.height="100%",s.style["z-index"]=20,s.style["pointer-events"]="none",n.appendChild(s),this.svgContainer=s,n.id=e.id,n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",r.appendChild(n),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=S(t[this.id]),this.spikeOptions=x(t[this.id]),this.container=n,this.staticMode=!!e.staticPlot,this.pixelRatio=e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],!i(this,t)}function o(e,t,n,r,i){for(var s,o=0;o<t.length;++o)if(Array.isArray(t[o]))for(var u=0;u<t[o].length;++u)s=e.d2l(t[o][u],0,i),!isNaN(s)&&isFinite(s)&&(r[0][n]=Math.min(r[0][n],s),r[1][n]=Math.max(r[1][n],s));else s=e.d2l(t[o],0,i),!isNaN(s)&&isFinite(s)&&(r[0][n]=Math.min(r[0][n],s),r[1][n]=Math.max(r[1][n],s))}function u(e,t,n){var r=e.fullSceneLayout;o(r.xaxis,t.x,0,n,t.xcalendar),o(r.yaxis,t.y,1,n,t.ycalendar),o(r.zaxis,t.z,2,n,t.zcalendar)}function a(e){return[[e.eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]}function f(e){return{up:{x:e.up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]}}}var l,c,h=e("gl-plot3d"),p=e("webgl-context"),d=e("../../lib"),v=e("../../plots/cartesian/axes"),m=e("../../plots/cartesian/graph_interact"),g=e("../../lib/str2rgbarray"),y=e("../../lib/show_no_webgl_msg"),b=e("./camera"),w=e("./project"),E=e("./set_convert"),S=e("./layout/convert"),x=e("./layout/spikes"),T=e("./layout/tick_marks"),N=s.prototype;N.recoverContext=function(){function e(){return n.isContextLost()?void requestAnimationFrame(e):i(t,t.fullLayout,r,n)?void t.plot.apply(t,t.plotArgs):void d.error("Catastrophic and unrecoverable WebGL error. Context lost.")}var t=this,n=this.glplot.gl,r=this.glplot.canvas;this.glplot.dispose(),requestAnimationFrame(e)};var C=["xaxis","yaxis","zaxis"];N.plot=function(e,t,n){if(this.plotArgs=[e,t,n],!this.glplot.contextLost){var r,i,s,o,a,f,l=t[this.id],c=n[this.id];for(l.bgcolor?this.glplot.clearColor=g(l.bgcolor):this.glplot.clearColor=[0,0,0,0],this.glplot.snapToData=!0,this.fullSceneLayout=l,this.glplotLayout=l,this.axesOptions.merge(l),this.spikeOptions.merge(l),this.updateFx(l.dragmode,l.hovermode),this.glplot.update({}),s=0;s<3;++s)a=l[C[s]],E(a);e?Array.isArray(e)||(e=[e]):e=[];var h=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(s=0;s<e.length;++s)r=e[s],r.visible===!0&&u(this,r,h);var p=[1,1,1];for(o=0;o<3;++o)h[0][o]>h[1][o]?p[o]=1:h[1][o]===h[0][o]?p[o]=1:p[o]=1/(h[1][o]-h[0][o]);for(this.dataScale=p,s=0;s<e.length;++s)r=e[s],r.visible===!0&&(i=this.traces[r.uid],i?i.update(r):(i=r._module.plot(this,r),this.traces[r.uid]=i),i.name=r.name);var d=Object.keys(this.traces);e:for(s=0;s<d.length;++s){for(o=0;o<e.length;++o)if(e[o].uid===d[s]&&e[o].visible===!0)continue e;i=this.traces[d[s]],i.dispose(),delete this.traces[d[s]]}var v=[[0,0,0],[0,0,0]],m=[],y={};for(s=0;s<3;++s){if(a=l[C[s]],f=a.type,f in y?(y[f].acc*=p[s],y[f].count+=1):y[f]={acc:p[s],count:1},a.autorange){for(v[0][s]=1/0,v[1][s]=-1/0,o=0;o<this.glplot.objects.length;++o){var b=this.glplot.objects[o].bounds;v[0][s]=Math.min(v[0][s],b[0][s]/p[s]),v[1][s]=Math.max(v[1][s],b[1][s]/p[s])}if("rangemode"in a&&"tozero"===a.rangemode&&(v[0][s]=Math.min(v[0][s],0),v[1][s]=Math.max(v[1][s],0)),v[0][s]>v[1][s])v[0][s]=-1,v[1][s]=1;else{var w=v[1][s]-v[0][s];v[0][s]-=w/32,v[1][s]+=w/32}}else{var S=l[C[s]].range;v[0][s]=S[0],v[1][s]=S[1]}v[0][s]===v[1][s]&&(v[0][s]-=1,v[1][s]+=1),m[s]=v[1][s]-v[0][s],this.glplot.bounds[0][s]=v[0][s]*p[s],this.glplot.bounds[1][s]=v[1][s]*p[s]}var x=[1,1,1];for(s=0;s<3;++s){a=l[C[s]],f=a.type;var T=y[f];x[s]=Math.pow(T.acc,1/T.count)/p[s]}var N,k=4;if("auto"===l.aspectmode)N=Math.max.apply(null,x)/Math.min.apply(null,x)<=k?x:[1,1,1];else if("cube"===l.aspectmode)N=[1,1,1];else if("data"===l.aspectmode)N=x;else{if("manual"!==l.aspectmode)throw new Error("scene.js aspectRatio was not one of the enumerated types");var L=l.aspectratio;N=[L.x,L.y,L.z]}l.aspectratio.x=c.aspectratio.x=N[0],l.aspectratio.y=c.aspectratio.y=N[1],l.aspectratio.z=c.aspectratio.z=N[2],this.glplot.aspect=N;var A=l.domain||null,O=t._size||null;if(A&&O){var M=this.container.style;M.position="absolute",M.left=O.l+A.x[0]*O.w+"px",M.top=O.t+(1-A.y[1])*O.h+"px",M.width=O.w*(A.x[1]-A.x[0])+"px",M.height=O.h*(A.y[1]-A.y[0])+"px"}this.glplot.redraw()}},N.destroy=function(){this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null},N.setCameraToDefault=function(){this.setCamera({eye:{x:1.25,y:1.25,z:1.25},center:{x:0,y:0,z:0},up:{x:0,y:0,z:1}})},N.getCamera=function(){return this.glplot.camera.view.recalcMatrix(this.camera.view.lastT()),f(this.glplot.camera)},N.setCamera=function(e){var t={};t[this.id]=e,this.glplot.camera.lookAt.apply(this,a(e)),this.graphDiv.emit("plotly_relayout",t)},N.saveCamera=function(e){function t(e,t,n,r){var i=["up","center","eye"],s=["x","y","z"];return t[i[n]]&&e[i[n]][s[r]]===t[i[n]][s[r]]}var n=this.getCamera(),r=d.nestedProperty(e,this.id+".camera"),i=r.get(),s=!1;if(void 0===i)s=!0;else for(var o=0;o<3;o++)for(var u=0;u<3;u++)if(!t(n,i,o,u)){s=!0;break}return s&&r.set(n),s},N.updateFx=function(e,t){var n=this.camera;n&&("orbit"===e?(n.mode="orbit",n.keyBindingMode="rotate"):"turntable"===e?(n.up=[0,0,1],n.mode="turntable",n.keyBindingMode="rotate"):n.keyBindingMode=e),this.fullSceneLayout.hovermode=t},N.toImage=function(e){e||(e="png"),this.staticMode&&this.container.appendChild(l),this.glplot.redraw();var t=this.glplot.gl,n=t.drawingBufferWidth,r=t.drawingBufferHeight;t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new Uint8Array(n*r*4);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,i);for(var s=0,o=r-1;s<o;++s,--o)for(var u=0;u<n;++u)for(var a=0;a<4;++a){var f=i[4*(n*s+u)+a];i[4*(n*s+u)+a]=i[4*(n*o+u)+a],i[4*(n*o+u)+a]=f}var c=document.createElement("canvas");c.width=n,c.height=r;var h=c.getContext("2d"),p=h.createImageData(n,r);p.data.set(i),h.putImageData(p,0,0);var d;switch(e){case"jpeg":d=c.toDataURL("image/jpeg");break;case"webp":d=c.toDataURL("image/webp");break;default:d=c.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(l),d},t.exports=s},{"../../lib":657,"../../lib/show_no_webgl_msg":669,"../../lib/str2rgbarray":671,"../../plots/cartesian/axes":689,"../../plots/cartesian/graph_interact":696,"./camera":727,"./layout/convert":732,"./layout/spikes":735,"./layout/tick_marks":736,"./project":737,"./set_convert":739,"gl-plot3d":194,"webgl-context":524}],739:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../cartesian/axes");t.exports=function(e){i.setConvert(e),e.setScale=r.noop}},{"../../lib":657,"../cartesian/axes":689}],740:[function(e,t,n){"use strict";var r=e("../lib"),i=r.extendFlat,s=e("./font_attributes"),o=e("../components/color/attributes");t.exports={font:{family:i({},s.family,{dflt:'"Open Sans", verdana, arial, sans-serif'}),size:i({},s.size,{dflt:12}),color:i({},s.color,{dflt:o.defaultLine})},title:{valType:"string",dflt:"Click to enter Plot title"},titlefont:i({},s,{}),autosize:{valType:"boolean",dflt:!1},width:{valType:"number",min:10,dflt:700},height:{valType:"number",min:10,dflt:450},margin:{l:{valType:"number",min:0,dflt:80},r:{valType:"number",min:0,dflt:80},t:{valType:"number",min:0,dflt:100},b:{valType:"number",min:0,dflt:80},pad:{valType:"number",min:0,dflt:0},autoexpand:{valType:"boolean",dflt:!0}},paper_bgcolor:{valType:"color",dflt:o.background},plot_bgcolor:{valType:"color",dflt:o.background},separators:{valType:"string",dflt:".,"},hidesources:{valType:"boolean",dflt:!1},smith:{valType:"enumerated",values:[!1],dflt:!1},showlegend:{valType:"boolean"},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom"},hovermode:{valType:"enumerated",values:["x","y","closest",!1]}}},{"../components/color/attributes":556,"../lib":657,"./font_attributes":709}],741:[function(e,t,n){"use strict";t.exports={styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",controlContainerClassName:"mapboxgl-control-container",noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),mapOnErrorMsg:"Mapbox error."}},{}],742:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){var n=e.split(" "),i=n[0],s=n[1],o=Array.isArray(t)?r.mean(t):t,u=.5+o/100,a=1.5+o/100,f=["",""],l=[0,0];switch(i){case"top":f[0]="top",l[1]=-a;break;case"bottom":f[0]="bottom",l[1]=a}switch(s){case"left":f[1]="right",l[0]=-u;break;case"right":f[1]="left",l[0]=u}var c;return c=f[0]&&f[1]?f.join("-"):f[0]?f[0]:f[1]?f[1]:"center",{anchor:c,offset:l}}},{"../../lib":657}],743:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],s=i[0].trace;s.subplot===t&&n.push(i)}return n}function i(e,t){var n=e._fullLayout,r=e._context;if(""===r.mapboxAccessToken)return"";for(var i=r.mapboxAccessToken,s=0;s<t.length;s++){var o=n[t[s]];if(o.accesstoken){i=o.accesstoken;break}}if(!i)throw new Error(f.noAccessTokenErrorMsg);return i}var s=e("mapbox-gl"),o=e("../plots"),u=e("../../constants/xmlns_namespaces"),a=e("./mapbox"),f=e("./constants");n.name="mapbox",n.attr="subplot",n.idRoot="mapbox",n.idRegex=/^mapbox([2-9]|[1-9][0-9]+)?$/,n.attrRegex=/^mapbox([2-9]|[1-9][0-9]+)?$/,n.attributes={subplot:{valType:"subplotid",dflt:"mapbox"}},n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.plot=function(e){var t=e._fullLayout,n=e.calcdata,u=o.getSubplotIds(t,"mapbox"),f=i(e,u);s.accessToken=f;for(var c=0;c<u.length;c++){var h=u[c],p=r(n,h),d=t[h],v=d._subplot;d.accesstoken=f,v||(v=a({gd:e,container:t._glcontainer.node(),id:h,fullLayout:t,staticPlot:e._context.staticPlot}),t[h]._subplot=v),v.plot(p,t,e._promises)}},n.clean=function(e,t,n,r){for(var i=o.getSubplotIds(r,"mapbox"),s=0;s<i.length;s++){var u=i[s];!t[u]&&r[u]._subplot&&r[u]._subplot.destroy()}},n.toSVG=function(e){for(var t=e._fullLayout,n=o.getSubplotIds(t,"mapbox"),r=t._size,i=0;i<n.length;i++){var s=t[n[i]],a=s.domain,f=s._subplot,l=f.toImage("png"),c=t._glimages.append("svg:image");c.attr({xmlns:u.svg,"xlink:href":l,x:r.l+r.w*a.x[0],y:r.t+r.h*(1-a.y[1]),width:r.w*(a.x[1]-a.x[0]),height:r.h*(a.y[1]-a.y[0]),preserveAspectRatio:"none"}),f.destroy()}}},{"../../constants/xmlns_namespaces":642,"../plots":749,"./constants":741,"./layout_attributes":745,"./layout_defaults":746,"./mapbox":747,"mapbox-gl":309}],744:[function(e,t,n){"use strict";function r(e,t){this.mapbox=e,this.map=e.map,this.uid=e.uid+"-layer"+t,this.idSource=this.uid+"-source",this.idLayer=this.uid+"-layer",this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}function i(e){var t=e.source;return u.isPlainObject(t)||"string"==typeof t&&t.length>0}function s(e){var t={},n={};switch(e.type){case"circle":u.extendFlat(n,{"circle-radius":e.circle.radius,"circle-color":e.color,"circle-opacity":e.opacity});break;case"line":u.extendFlat(n,{"line-width":e.line.width,"line-color":e.color,"line-opacity":e.opacity});break;case"fill":u.extendFlat(n,{"fill-color":e.color,"fill-outline-color":e.fill.outlinecolor,"fill-opacity":e.opacity});break;case"symbol":var r=e.symbol,i=a(r.textposition,r.iconsize);u.extendFlat(t,{"icon-image":r.icon+"-15","icon-size":r.iconsize/10,"text-field":r.text,"text-size":r.textfont.size,"text-anchor":i.anchor,"text-offset":i.offset}),u.extendFlat(n,{"icon-color":e.color,"text-color":r.textfont.color,"text-opacity":e.opacity})}return{layout:t,paint:n}}function o(e){var t,n=e.sourcetype,r=e.source,i={type:n},s="string"==typeof r;return"geojson"===n?t="data":"vector"===n&&(t=s?"url":"tiles"),i[t]=r,i}var u=e("../../lib"),a=e("./convert_text_opts"),f=r.prototype;f.update=function(e){this.visible?this.needsNewSource(e)?(this.updateLayer(e),this.updateSource(e)):this.needsNewLayer(e)&&this.updateLayer(e):(this.updateSource(e),this.updateLayer(e)),this.updateStyle(e),this.visible=i(e)},f.needsNewSource=function(e){return this.sourceType!==e.sourcetype||this.source!==e.source||this.layerType!==e.type},f.needsNewLayer=function(e){return this.layerType!==e.type||this.below!==e.below},f.updateSource=function(e){var t=this.map;if(t.getSource(this.idSource)&&t.removeSource(this.idSource),this.sourceType=e.sourcetype,this.source=e.source,i(e)){var n=o(e);t.addSource(this.idSource,n)}},f.updateLayer=function(e){var t=this.map;if(t.getLayer(this.idLayer)&&t.removeLayer(this.idLayer),this.layerType=e.type,i(e)){t.addLayer({id:this.idLayer,source:this.idSource,"source-layer":e.sourcelayer||"",type:e.type},e.below);var n={visibility:"visible"};this.mapbox.setOptions(this.idLayer,"setLayoutProperty",n)}},f.updateStyle=function(e){var t=s(e);i(e)&&(this.mapbox.setOptions(this.idLayer,"setLayoutProperty",t.layout),this.mapbox.setOptions(this.idLayer,"setPaintProperty",t.paint))},f.dispose=function(){var e=this.map;e.removeLayer(this.idLayer),e.removeSource(this.idSource)},t.exports=function(e,t,n){var i=new r(e,t);return i.update(n),i}},{"../../lib":657,"./convert_text_opts":742}],745:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../components/color").defaultLine,s=e("../font_attributes"),o=e("../../traces/scatter/attributes").textposition;t.exports={domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],dflt:"basic"},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:{_isLinkedToArray:"layer",sourcetype:{valType:"enumerated",values:["geojson","vector"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},type:{valType:"enumerated",values:["circle","line","fill","symbol"],dflt:"circle"},below:{valType:"string",dflt:""},color:{valType:"color",dflt:i},opacity:{valType:"number",min:0,max:1,dflt:1},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2}},fill:{outlinecolor:{valType:"color",dflt:i}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},textfont:r.extendDeep({},s,{family:{dflt:"Open Sans Regular, Arial Unicode MS Regular"}}),textposition:r.extendFlat({},o,{arrayOk:!1})}}}},{"../../components/color":557,"../../lib":657,"../../traces/scatter/attributes":881,"../font_attributes":709}],746:[function(e,t,n){"use strict";function r(e,t,n){n("accesstoken"),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch"),i(e,t),t._input=e}function i(e,t){function n(e,t){return s.coerce(r,i,u.layers,e,t)}for(var r,i,o=e.layers||[],f=t.layers=[],l=0;l<o.length;l++)if(r=o[l],i={},s.isPlainObject(r)){var c=n("sourcetype");n("source"),"vector"===c&&n("sourcelayer");var h=n("type");n("below"),n("color"),n("opacity"),"circle"===h&&n("circle.radius"),"line"===h&&n("line.width"),"fill"===h&&n("fill.outlinecolor"),"symbol"===h&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),s.coerceFont(n,"symbol.textfont"),n("symbol.textposition")),i._index=l,f.push(i)}}var s=e("../../lib"),o=e("../subplot_defaults"),u=e("./layout_attributes");t.exports=function(e,t,n){o(e,t,n,{type:"mapbox",attributes:u,handleDefaults:r,partition:"y"})}},{"../../lib":657,"../subplot_defaults":756,"./layout_attributes":745}],747:[function(e,t,n){"use strict";function r(e){this.id=e.id,this.gd=e.gd,this.container=e.container,this.isStatic=e.staticPlot;var t=e.fullLayout;this.uid=t._uid+"-"+this.id,this.opts=t[this.id],this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(t),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[]}function i(e){var t=c.style.values,n=c.style.dflt,r={};return f.isPlainObject(e)?(r.id=e.id,r.style=e):"string"==typeof e?(r.id=e,r.style=t.indexOf(e)!==-1?s(e):e):(r.id=n,r.style=s(n)),r}function s(e){return l.styleUrlPrefix+e+"-"+l.styleUrlSuffix}function o(e){return[e.lon,e.lat]}var u=e("mapbox-gl"),a=e("../cartesian/graph_interact"),f=e("../../lib"),l=e("./constants"),c=e("./layout_attributes"),h=e("./layers"),p=r.prototype;t.exports=function(e){var t=new r(e);return t},p.plot=function(e,t,n){var r=this,i=r.opts=t[this.id];r.map&&i.accesstoken!==r.accessToken&&(r.map.remove(),r.map=null,r.styleObj=null,r.traceHash=[],r.layerList={});var s;s=r.map?new Promise(function(n,i){r.updateMap(e,t,n,i)}):new Promise(function(n,i){r.createMap(e,t,n,i)}),n.push(s)},p.createMap=function(e,t,n,r){function s(){a.loneUnhover(t._toppaper)}var c=this,h=c.gd,p=c.opts,d=c.styleObj=i(p.style);c.accessToken=p.accesstoken;var v=c.map=new u.Map({container:c.div,style:d.style,center:o(p.center),zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,interactive:!c.isStatic,preserveDrawingBuffer:c.isStatic}),m=l.controlContainerClassName,g=c.div.getElementsByClassName(m)[0];c.div.removeChild(g),c.rejectOnError(r),v.once("load",function(){c.updateData(e),c.updateLayout(t),c.resolveOnRender(n)}),v.on("moveend",function(e){if(c.map){var t=c.getView();if(p._input.center=p.center=t.center,p._input.zoom=p.zoom=t.zoom,p._input.bearing=p.bearing=t.bearing,p._input.pitch=p.pitch=t.pitch,e.originalEvent){var n={};n[c.id]=f.extendFlat({},t),h.emit("plotly_relayout",n)}}}),v.on("mousemove",function(e){var t=c.div.getBoundingClientRect();e.clientX=e.point.x+t.left,e.clientY=e.point.y+t.top,e.target.getBoundingClientRect=function(){return t},c.xaxis.p2c=function(){return e.lngLat.lng},c.yaxis.p2c=function(){return e.lngLat.lat},a.hover(h,e,c.id)}),v.on("click",function(){a.click(h,{target:!0})}),v.on("dragstart",s),v.on("zoomstart",s)},p.updateMap=function(e,t,n,r){var s=this,o=s.map;s.rejectOnError(r);var u=i(s.opts.style);s.styleObj.id!==u.id?(s.styleObj=u,o.setStyle(u.style),o.style.once("load",function(){s.traceHash={},s.updateData(e),s.updateLayout(t),s.resolveOnRender(n)})):(s.updateData(e),s.updateLayout(t),s.resolveOnRender(n))},p.updateData=function(e){var t,n,r,i,s=this.traceHash;for(r=0;r<e.length;r++){var o=e[r];n=o[0].trace,t=s[n.uid],t?t.update(o):n._module&&(s[n.uid]=n._module.plot(this,o))}var u=Object.keys(s);e:for(r=0;r<u.length;r++){var a=u[r];for(i=0;i<e.length;i++)if(n=e[i][0].trace,a===n.uid)continue e;t=s[a],t.dispose(),delete s[a]}},p.updateLayout=function(e){var t=this.map,n=this.opts;t.setCenter(o(n.center)),t.setZoom(n.zoom),t.setBearing(n.bearing),t.setPitch(n.pitch),this.updateLayers(),this.updateFramework(e),this.map.resize()},p.resolveOnRender=function(e){var t=this.map;t.on("render",function n(){t.loaded()&&(t.off("render",n),e())})},p.rejectOnError=function(e){function t(){e(new Error(l.mapOnErrorMsg))}var n=this.map;n.once("error",t),n.once("style.error",t),n.once("source.error",t),n.once("tile.error",t),n.once("layer.error",t)},p.createFramework=function(e){var t=this,n=t.div=document.createElement("div");n.id=t.uid,n.style.position="absolute",t.container.appendChild(n),t.xaxis={_id:"x",c2p:function(e){return t.project(e).x}},t.yaxis={_id:"y",c2p:function(e){return t.project(e).y}},t.updateFramework(e)},p.updateFramework=function(e){var t=e[this.id].domain,n=e._size,r=this.div.style;r.width=n.w*(t.x[1]-t.x[0])+"px",r.height=n.h*(t.y[1]-t.y[0])+"px",r.left=n.l+t.x[0]*n.w+"px",r.top=n.t+(1-t.y[1])*n.h+"px",this.xaxis._offset=n.l+t.x[0]*n.w,this.xaxis._length=n.w*(t.x[1]-t.x[0]),this.yaxis._offset=n.t+(1-t.y[1])*n.h,this.yaxis._length=n.h*(t.y[1]-t.y[0])},p.updateLayers=function(){var e,t=this.opts,n=t.layers,r=this.layerList;if(n.length!==r.length){for(e=0;e<r.length;e++)r[e].dispose();for(r=this.layerList=[],e=0;e<n.length;e++)r.push(h(this,e,n[e]))}else for(e=0;e<n.length;e++)r[e].update(n[e])},p.destroy=function(){this.map&&(this.map.remove(),this.map=null),this.container.removeChild(this.div)},p.toImage=function(){return this.map.getCanvas().toDataURL()},p.initSource=function(e){var t={type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[]}}};return this.map.addSource(e,t)},p.setSourceData=function(e,t){this.map.getSource(e).setData(t)},p.setOptions=function(e,t,n){for(var r=this.map,i=Object.keys(n),s=0;s<i.length;s++){var o=i[s];r[t](e,o,n[o])}},p.project=function(e){return this.map.project(new u.LngLat(e[0],e[1]))},p.getView=function(){var e=this.map,t=e.getCenter(),n={lon:t.lng,lat:t.lat};return{center:n,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch()}}},{"../../lib":657,"../cartesian/graph_interact":696,"./constants":741,"./layers":744,"./layout_attributes":745,"mapbox-gl":309}],748:[function(e,t,n){"use strict";t.exports={t:{valType:"number",dflt:0},r:{valType:"number",dflt:0},b:{valType:"number",dflt:0},l:{valType:"number",dflt:0}}},{}],749:[function(e,t,n){"use strict";function r(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)n.on("click",function(){d.sendDataToCloud(e)});else{var r=window.location.pathname.split("/"),i=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+i})}}function i(e,t){for(var n=h.isPlainObject,r=Array.isArray,s=Object.keys(t||{}),o=0;o<s.length;o++){var u=s[o],a=t[u],f=e[u];if("_"===u.charAt(0)||"function"==typeof a){if(u in e)continue;e[u]=a}else if(r(a)&&r(f)&&n(a[0]))for(var l=0;l<a.length;l++)n(a[l])&&n(f[l])&&i(f[l],a[l]);else n(a)&&n(f)&&(i(f,a),Object.keys(f).length||delete e[u])}}function s(e,t,n){var r=n._globalTransforms||[];if(Array.isArray(e.transforms)||0!==r.length)for(var i=e.transforms||[],s=r.concat(i),o=t.transforms=[],u=0;u<s.length;u++){var a,f=s[u],l=f.type,c=y[l];c||h.warn("Unrecognized transform type "+l+"."),c&&c.supplyDefaults?(a=c.supplyDefaults(f,t,n,e),a.type=l,a._module=c,h.pushUnique(n._transformModules,c)):a=h.extendFlat({},f),o.push(a)}}function o(e,t,n,r){for(var i=e.transforms,s=[e],o=0;o<i.length;o++){var u=i[o],a=y[u.type];a&&a.transform&&(s=a.transform(s,{transform:u,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:o}))}return s}function u(e){var t,n={left:0,right:0,bottom:0,top:0};if(e)for(t in e)e.hasOwnProperty(t)&&(n.left+=e[t].left||0,n.right+=e[t].right||0,n.bottom+=e[t].bottom||0,n.top+=e[t].top||0);return n}var a=e("d3"),f=e("fast-isnumeric"),l=e("../plotly"),c=e("../registry"),h=e("../lib"),p=e("../components/color"),d=t.exports={},v=e("./animation_attributes"),m=e("./frame_attributes");h.extendFlat(d,c),d.attributes=e("./attributes"),d.attributes.type.values=d.allTypes,d.fontAttrs=e("./font_attributes"),d.layoutAttributes=e("./layout_attributes"),d.fontWeight="normal";var g=d.subplotsRegistry,y=d.transformsRegistry,b=e("../components/errorbars"),w=e("./command");d.executeAPICommand=w.executeAPICommand,d.computeAPICommandBindings=w.computeAPICommandBindings,d.manageCommandObserver=w.manageCommandObserver,d.hasSimpleAPICommandBindings=w.hasSimpleAPICommandBindings,d.findSubplotIds=function(e,t){var n=[];if(void 0===d.subplotsRegistry[t])return n;for(var r=d.subplotsRegistry[t].attr,i=0;i<e.length;i++){var s=e[i];d.traceIs(s,t)&&n.indexOf(s[r])===-1&&n.push(s[r])}return n},d.getSubplotIds=function(e,t){var n=d.subplotsRegistry[t];if(void 0===n)return[];if(!("cartesian"!==t||e._has&&e._has("cartesian")))return[];if(!("gl2d"!==t||e._has&&e._has("gl2d")))return[];if("cartesian"===t||"gl2d"===t)return Object.keys(e._plots||{});for(var r=n.idRegex,i=Object.keys(e),s=[],o=0;o<i.length;o++){var u=i[o];r.test(u)&&s.push(u)}var a=n.idRoot.length;return s.sort(function(e,t){var n=+(e.substr(a)||1),r=+(t.substr(a)||1);return n-r}),s},d.getSubplotData=function(e,t,n){if(void 0===d.subplotsRegistry[t])return[];for(var r,i=d.subplotsRegistry[t].attr,s=[],o=0;o<e.length;o++)if(r=e[o],"gl2d"===t&&d.traceIs(r,"gl2d")){var u=l.Axes.subplotMatch,a="x"+n.match(u)[1],f="y"+n.match(u)[2];r[i[0]]===a&&r[i[1]]===f&&s.push(r)}else r[i]===n&&s.push(r);return s},d.redrawText=function(e){if(!(e.data&&e.data[0]&&e.data[0].r))return new Promise(function(t){setTimeout(function(){c.getComponentMethod("annotations","draw")(e),c.getComponentMethod("legend","draw")(e),(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()}),t(d.previousPromises(e))},300)})},d.resize=function(e){return new Promise(function(t,n){e&&"none"!==a.select(e).style("display")||n(new Error("Resize must be passed a plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._redrawTimer=setTimeout(function(){if(e.layout.width&&e.layout.height)return void t(e);delete e.layout.width,delete e.layout.height;var n=e.changed;e.autoplay=!0,l.relayout(e,{autosize:!0}).then(function(){e.changed=n,t(e)})},100)})},d.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},d.addLinks=function(e){var t=e._fullLayout,n=t._paper.selectAll("text.js-plot-link-container").data([0]);n.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:p.defaultLine,"pointer-events":"all"}).each(function(){var e=a.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)});var i=n.node(),s={y:t._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=t.width-20?(s["text-anchor"]="start",s.x=5):(s["text-anchor"]="end",s.x=t._paper.attr("width")-7),n.attr(s);var o=n.select(".js-link-to-tool"),u=n.select(".js-link-spacer"),f=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&r(e,o),u.text(o.text()&&f.text()?" - ":"")},d.sendDataToCloud=function(e){e.emit("plotly_beforeexport");var t=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",n=a.select(e).append("div").attr("id","hiddenform").style("display","none"),r=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"}),i=r.append("input").attr({type:"text",name:"data"});return i.node().value=d.graphJson(e,!1,"keepdata"),r.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1},d.supplyDefaults=function(e){var t,n=e._fullLayout||{},r=e._fullLayout={},s=e.layout||{},o=e._fullData||[],u=e._fullData=[],a=e.data||[];if(e._transitionData||d.createTransitionData(e),n._initialAutoSizeIsDone){var f=n.width,c=n.height;d.supplyLayoutGlobalDefaults(s,r),s.width||(r.width=f),s.height||(r.height=c)}else{d.supplyLayoutGlobalDefaults(s,r);var h=!s.width||!s.height,p=r.autosize,v=e._context&&e._context.autosizable,m=h&&(p||v);m?d.plotAutoSize(e,s,r):h&&d.sanitizeMargins(e),!p&&h&&(s.width=r.width,s.height=r.height)}r._initialAutoSizeIsDone=!0,r._dataLength=a.length,r._globalTransforms=(e._context||{}).globalTransforms,d.supplyDataDefaults(a,u,s,r),r._has=d._hasPlotType.bind(r);var g=r._modules;for(t=0;t<g.length;t++){var y=g[t];y.cleanData&&y.cleanData(u)}if(o.length===a.length)for(t=0;t<u.length;t++)i(u[t],o[t]);d.supplyLayoutModuleDefaults(s,r,u,e._transitionData),r._hasCartesian=r._has("cartesian"),r._hasGeo=r._has("geo"),r._hasGL3D=r._has("gl3d"),r._hasGL2D=r._has("gl2d"),r._hasTernary=r._has("ternary"),r._hasPie=r._has("pie"),d.cleanPlot(u,r,o,n),d.linkSubplots(u,r,o,n),i(r,n),d.doAutoMargin(e);var b=l.Axes.list(e);for(t=0;t<b.length;t++){var w=b[t];w._gd=e,w.setScale()}if((e.calcdata||[]).length===u.length)for(t=0;t<u.length;t++){var E=u[t];(e.calcdata[t][0]||{}).trace=E}},d.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},d._hasPlotType=function(e){for(var t=this._basePlotModules||[],n=0;n<t.length;n++){var r=t[n];if(r.name===e)return!0}return!1},d.cleanPlot=function(e,t,n,r){var i,s,o=r._basePlotModules||[];for(i=0;i<o.length;i++){var u=o[i];u.clean&&u.clean(e,t,n,r)}var a=!!r._paper,f=!!r._infolayer;e:for(i=0;i<n.length;i++){var l=n[i],c=l.uid;for(s=0;s<e.length;s++){var h=e[s];if(c===h.uid)continue e}a&&r._paper.selectAll(".hm"+c+",.contour"+c+",#clip"+c+",.trace"+c).remove(),f&&r._infolayer.selectAll(".cb"+c).remove()}},d.linkSubplots=function(e,t,n,r){for(var i=r._plots||{},s=t._plots={},o={_fullData:e,_fullLayout:t},u=l.Axes.getSubplots(o),a=0;a<u.length;a++){var f,c=u[a],h=i[c];h?f=s[c]=h:(f=s[c]={},f.id=c),f.xaxis=l.Axes.getFromId(o,c,"x"),f.yaxis=l.Axes.getFromId(o,c,"y")}},d.supplyDataDefaults=function(e,t,n,r){function i(e){t.push(e);var n=e._module;n&&(h.pushUnique(s,n),h.pushUnique(u,e._module.basePlotModule),a++)}var s=r._modules=[],u=r._basePlotModules=[],a=0;r._transformModules=[];for(var f=0;f<e.length;f++){var l=e[f],c=d.supplyTraceDefaults(l,a,r,f);if(c.index=f,c._input=l,c._expandedIndex=a,c.transforms&&c.transforms.length)for(var p=o(c,t,n,r),v=0;v<p.length;v++){var m=p[v],g=d.supplyTraceDefaults(m,a,r,f);m.uid=g.uid=c.uid+v,g.index=f,g._input=l,g._fullInput=c,g._expandedIndex=a,g._expandedInput=m,i(g)}else c._fullInput=c,c._expandedInput=c,i(c)}},d.supplyAnimationDefaults=function(e){function t(t,n){return h.coerce(e||{},r,v,t,n)}e=e||{};var n,r={};if(t("mode"),t("direction"),t("fromcurrent"),Array.isArray(e.frame))for(r.frame=[],n=0;n<e.frame.length;n++)r.frame[n]=d.supplyAnimationFrameDefaults(e.frame[n]||{});else r.frame=d.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(r.transition=[],n=0;n<e.transition.length;n++)r.transition[n]=d.supplyAnimationTransitionDefaults(e.transition[n]||{});else r.transition=d.supplyAnimationTransitionDefaults(e.transition||{});return r},d.supplyAnimationFrameDefaults=function(e){function t(t,r){return h.coerce(e||{},n,v.frame,t,r)}var n={};return t("duration"),t("redraw"),n},d.supplyAnimationTransitionDefaults=function(e){function t(t,r){return h.coerce(e||{},n,v.transition,t,r)}var n={};return t("duration"),t("easing"),n},d.supplyFrameDefaults=function(e){function t(t,r){return h.coerce(e,n,m,t,r)}var n={};return t("group"),t("name"),t("traces"),t("baseframe"),t("data"),t("layout"),n},d.supplyTraceDefaults=function(e,t,n,r){function i(t,n){return h.coerce(e,u,d.attributes,t,n)}function o(t,n){if(d.traceIs(u,t))return h.coerce(e,u,d.subplotsRegistry[t].attributes,n)}var u={},a=p.defaults[t%p.defaults.length],f=i("visible");i("type"),i("uid"),i("name","trace "+r);for(var l=Object.keys(g),c=0;c<l.length;c++){var v=l[c];if(["cartesian","gl2d"].indexOf(v)===-1){var m=g[v].attr;m&&o(v,m)}}if(f){var y=d.getModule(u);u._module=y,i("hoverinfo",1===n._dataLength?"x+y+z+text":void 0),y&&y.supplyDefaults(e,u,a,n),d.traceIs(u,"noOpacity")||i("opacity"),o("cartesian","xaxis"),o("cartesian","yaxis"),o("gl2d","xaxis"),o("gl2d","yaxis"),d.traceIs(u,"showLegend")&&(i("showlegend"),i("legendgroup")),s(e,u,n)}return u},d.supplyLayoutGlobalDefaults=function(e,t){function n(n,r){return h.coerce(e,t,d.layoutAttributes,n,r)}var r=h.coerceFont(n,"font");n("title"),h.coerceFont(n,"titlefont",{family:r.family,size:Math.round(1.4*r.size),color:r.color}),n("autosize",!e.width||!e.height),n("width"),n("height"),n("margin.l"),n("margin.r"),n("margin.t"),n("margin.b"),n("margin.pad"),n("margin.autoexpand"),e.width&&e.height&&d.sanitizeMargins(t),n("paper_bgcolor"),n("separators"),n("hidesources"),n("smith");var i=c.getComponentMethod("calendars","handleDefaults");i(e,t,"calendar")},d.plotAutoSize=function(e,t,n){var r,i,s=e._context||{},o=s.frameMargins,a=h.isPlotDiv(e);if(a&&e.emit("plotly_autosize"),s.fillFrame)r=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden";else if(f(o)&&o>0){var l=u(e._boundingBoxMargins),c=l.left+l.right,p=l.bottom+l.top,v=1-2*o,m=n._container&&n._container.node?n._container.node().getBoundingClientRect():{width:n.width,height:n.height};r=Math.round(v*(m.width-c)),i=Math.round(v*(m.height-p))}else{var g=a?window.getComputedStyle(e):{};r=parseFloat(g.width)||n.width,i=parseFloat(g.height)||n.height}var y=d.layoutAttributes.width.min,b=d.layoutAttributes.height.min;r<y&&(r=y),i<b&&(i=b);var w=!t.width&&Math.abs(n.width-r)>1,E=!t.height&&Math.abs(n.height-i)>1;(E||w)&&(w&&(n.width=r),E&&(n.height=i)),e._initialAutoSize||(e._initialAutoSize={width:r,height:i}),d.sanitizeMargins(n)},d.supplyLayoutModuleDefaults=function(e,t,n,r){var i,s;l.Axes.supplyLayoutDefaults(e,t,n);var o=t._basePlotModules;for(i=0;i<o.length;i++)s=o[i],"cartesian"!==s.name&&s.supplyLayoutDefaults&&s.supplyLayoutDefaults(e,t,n);var u=t._modules;for(i=0;i<u.length;i++)s=u[i],s.supplyLayoutDefaults&&s.supplyLayoutDefaults(e,t,n);var a=t._transformModules;for(i=0;i<a.length;i++)s=a[i],s.supplyLayoutDefaults&&s.supplyLayoutDefaults(e,t,n,r);l.Fx.supplyLayoutDefaults(e,t,n);var f=Object.keys(c.componentsRegistry);for(i=0;i<f.length;i++)s=c.componentsRegistry[f[i]],s.supplyLayoutDefaults&&s.supplyLayoutDefaults(e,t,n)},d.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&t._glcontainer.remove(),void 0!==t._geocontainer&&t._geocontainer.remove(),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.framework,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._tester,delete e._testref,delete e._promises,delete e._redrawTimer,delete e._replotting,delete e.firstscatter,delete e.hmlumcount,delete e.hmpixcount,delete e.numboxes,delete e._hoverTimer,delete e._lastHoverTime,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,e.removeAllListeners&&e.removeAllListeners()},d.style=function(e){for(var t=e._fullLayout._modules,n=0;n<t.length;n++){var r=t[n];r.style&&r.style(e)}},d.sanitizeMargins=function(e){if(e&&e.margin){var t,n=e.width,r=e.height,i=e.margin,s=n-(i.l+i.r),o=r-(i.t+i.b);s<0&&(t=(n-1)/(i.l+i.r),i.l=Math.floor(t*i.l),i.r=Math.floor(t*i.r)),o<0&&(t=(r-1)/(i.t+i.b),i.t=Math.floor(t*i.t),i.b=Math.floor(t*i.b))}},d.autoMargin=function(e,t,n){var r=e._fullLayout;if(r._pushmargin||(r._pushmargin={}),r.margin.autoexpand!==!1){if(n){var i=void 0===n.pad?12:n.pad;n.l+n.r>.5*r.width&&(n.l=n.r=0),n.b+n.t>.5*r.height&&(n.b=n.t=0),r._pushmargin[t]={l:{val:n.x,size:n.l+i},r:{val:n.x,size:n.r+i},b:{val:n.y,size:n.b+i},t:{val:n.y,size:n.t+i}}}else delete r._pushmargin[t];e._replotting||d.doAutoMargin(e)}},d.doAutoMargin=function(e){var t=e._fullLayout;t._size||(t._size={}),t._pushmargin||(t._pushmargin={});var n=t._size,r=JSON.stringify(n),i=Math.max(t.margin.l||0,0),s=Math.max(t.margin.r||0,0),o=Math.max(t.margin.t||0,0),u=Math.max(t.margin.b||0,0),a=t._pushmargin;if(t.margin.autoexpand!==!1&&(a.base={l:{val:0,size:i},r:{val:1,size:s},t:{val:1,size:o},b:{val:0,size:u}},Object.keys(a).forEach(function(e){var n=a[e].l||{},r=a[e].b||{},l=n.val,c=n.size,h=r.val,p=r.size;Object.keys(a).forEach(function(e){if(f(c)&&a[e].r){var n=a[e].r.val,r=a[e].r.size;if(n>l){var d=(c*n+(r-t.width)*l)/(n-l),v=(r*(1-l)+(c-t.width)*(1-n))/(n-l);d>=0&&v>=0&&d+v>i+s&&(i=d,s=v)}}if(f(p)&&a[e].t){var m=a[e].t.val,g=a[e].t.size;if(m>h){var y=(p*m+(g-t.height)*h)/(m-h),b=(g*(1-h)+(p-t.height)*(1-m))/(m-h);y>=0&&b>=0&&y+b>u+o&&(u=y,o=b)}}})})),n.l=Math.round(i),n.r=Math.round(s),n.t=Math.round(o),n.b=Math.round(u),n.p=Math.round(t.margin.pad),n.w=Math.round(t.width)-n.l-n.r,n.h=Math.round(t.height)-n.t-n.b,!e._replotting&&"{}"!==r&&r!==JSON.stringify(t._size))return l.plot(e)},d.graphJson=function(e,t,n,r,i){function s(e){if("function"==typeof e)return null;if(h.isPlainObject(e)){var t,r,i={};for(t in e)if("function"!=typeof e[t]&&["_","["].indexOf(t.charAt(0))===-1){if("keepdata"===n){if("src"===t.substr(t.length-3))continue}else if("keepstream"===n){if(r=e[t+"src"],"string"==typeof r&&r.indexOf(":")>0&&!h.isPlainObject(e.stream))continue}else if("keepall"!==n&&(r=e[t+"src"],"string"==typeof r&&r.indexOf(":")>0))continue;i[t]=s(e[t])}return i}return Array.isArray(e)?e.map(s):h.isJSDate(e)?h.ms2DateTimeLocal(+e):e}(i&&t&&!e._fullData||i&&!t&&!e._fullLayout)&&d.supplyDefaults(e);var o=i?e._fullData:e.data,u=i?e._fullLayout:e.layout,a=(e._transitionData||{})._frames,f={data:(o||[]).map(function(e){var n=s(e);return t&&delete n.fit,n})};return t||(f.layout=s(u)),e.framework&&e.framework.isPolar&&(f=e.framework.getConfig()),a&&(f.frames=s(a)),"object"===r?f:JSON.stringify(f)},d.modifyFrames=function(e,t){var n,r,i,s=e._transitionData._frames,o=e._transitionData._frameHash;for(n=0;n<t.length;n++)switch(r=t[n],r.type){case"replace":i=r.value;var u=(s[r.index]||{}).name,a=i.name;s[r.index]=o[a]=i,a!==u&&(delete o[u],o[a]=i);break;case"insert":i=r.value,o[i.name]=i,s.splice(r.index,0,i);break;case"delete":i=s[r.index],delete o[i.name],s.splice(r.index,1)}return Promise.resolve()},d.computeFrame=function(e,t){var n,r,i,s,o=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var u=o[t.toString()];if(!u)return!1;for(var a=[u],f=[u.name];u.baseframe&&(u=o[u.baseframe.toString()])&&f.indexOf(u.name)===-1;)a.push(u),f.push(u.name);for(var l={};u=a.pop();)if(u.layout&&(l.layout=d.extendLayout(l.layout,u.layout)),u.data){if(l.data||(l.data=[]),r=u.traces,!r)for(r=[],n=0;n<u.data.length;n++)r[n]=n;for(l.traces||(l.traces=[]),n=0;n<u.data.length;n++)i=r[n],void 0!==i&&null!==i&&(s=l.traces.indexOf(i),s===-1&&(s=l.data.length,l.traces[s]=i),l.data[s]=d.extendTrace(l.data[s],u.data[n]))}return l},d.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(t[i.name]=i)}},d.extendObjectWithContainers=function(e,t,n){var r,i,s,o,u,a,f,l,c=h.extendDeepNoArrays({},t||{}),p=h.expandObjectPaths(c),v={};if(n&&n.length)for(s=0;s<n.length;s++)r=h.nestedProperty(p,n[s]),i=r.get(),void 0===i?h.nestedProperty(v,n[s]).set(null):(r.set(null),h.nestedProperty(v,n[s]).set(i));if(e=h.extendDeepNoArrays(e||{},p),n&&n.length)for(s=0;s<n.length;s++)if(u=h.nestedProperty(v,n[s]),f=u.get()){for(a=h.nestedProperty(e,n[s]),l=a.get(),Array.isArray(l)||(l=[],a.set(l)),o=0;o<f.length;o++){var m=f[o];null===m?l[o]=null:l[o]=d.extendObjectWithContainers(l[o],m)}a.set(l)}return e},d.dataArrayContainers=["transforms"],d.layoutArrayContainers=c.layoutArrayContainers,d.extendTrace=function(e,t){return d.extendObjectWithContainers(e,t,d.dataArrayContainers)},d.extendLayout=function(e,t){return d.extendObjectWithContainers(e,t,d.layoutArrayContainers)},d.transition=function(e,t,n,r,i,s){function o(){var r;for(r=0;r<y.length;r++){var i=y[r],s=e._fullData[i],o=s._module;o&&(o.animatable&&w.push(i),e.data[y[r]]=d.extendTrace(e.data[y[r]],t[r]))}var u=h.expandObjectPaths(h.extendDeepNoArrays({},n)),a=/^[xy]axis[0-9]*$/;for(var f in u)a.test(f)&&delete u[f].range;return d.extendLayout(e.layout,u),d.supplyDefaults(e),d.doCalcdata(e),b.calc(e),Promise.resolve()}function u(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}function a(e){if(e)for(;e.length;)e.shift()}function f(){return e.emit("plotly_transitioning",[]),new Promise(function(t){function r(){return a++,function(){f++,E||f!==a||c(t)}}e._transitioning=!0,s.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){E=!0}),i.redraw&&e._transitionData._interruptCallbacks.push(function(){return l.redraw(e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var o,u,a=0,f=0,p=e._fullLayout._basePlotModules,d=!1;if(n)for(u=0;u<p.length;u++)if(p[u].transitionAxes){var v=h.expandObjectPaths(n);d=p[u].transitionAxes(e,v,s,r)||d}for(d?(o=h.extendFlat({},s),o.duration=0):o=s,u=0;u<p.length;u++)p[u].plot(e,w,o,r);setTimeout(r())})}function c(t){if(e._transitionData)return a(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(i.redraw)return l.redraw(e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(t)}function p(){if(e._transitionData)return e._transitioning=!1,u(e._transitionData._interruptCallbacks)}var v,m,g=Array.isArray(t)?t.length:0,y=r.slice(0,g),w=[],E=!1;for(v=0;v<y.length;v++){m=y[v];var S=e._fullData[m],T=S._module;if(T&&!T.animatable){var N={};for(var C in t[v])N[C]=[t[v][C]]}}var k=[d.previousPromises,p,o,f],L=h.syncOrAsync(k,e);return L&&L.then||(L=Promise.resolve()),L.then(function(){return e})},d.doCalcdata=function(e,t){var n,r,i,s,o=l.Axes.list(e),u=e._fullData,a=e._fullLayout,f=new Array(u.length),c=(e.calcdata||[]).slice(0);for(e.calcdata=f,e.firstscatter=!0,e.numboxes=0,e._hmpixcount=0,e._hmlumcount=0,a._piecolormap={},a._piedefaultcolorcount=0,i=0;i<o.length;i++)o[i]._categories=o[i]._initialCategories.slice();for(i=0;i<u.length;i++)Array.isArray(t)&&t.indexOf(i)===-1&&(f[i]=c[i]);var h=!1;for(i=0;i<u.length;i++)if(n=u[i],n.visible===!0&&n.transforms)for(r=n._module,r&&r.calc&&r.calc(e,n),s=0;s<n.transforms.length;s++){var p=n.transforms[s];r=y[p.type],r&&r.calcTransform&&(h=!0,r.calcTransform(e,n,p))}if(h)for(i=0;i<o.length;i++)o[i]._min=[],o[i]._max=[],o[i]._categories=[];for(i=0;i<u.length;i++){var d=[];n=u[i],n.visible===!0&&(r=n._module,r&&r.calc&&(d=r.calc(e,n))),Array.isArray(d)&&d[0]||(d=[{x:!1,y:!1,placeholder:!0}]),d[0].t||(d[0].t={}),d[0].trace=n,f[i]=d}}},{"../components/color":557,"../components/errorbars":586,"../lib":657,"../plotly":684,"../registry":764,"./animation_attributes":685,"./attributes":687,"./command":708,"./font_attributes":709,"./frame_attributes":710,"./layout_attributes":740,d3:97,"fast-isnumeric":106}],750:[function(e,t,n){"use strict";var r=e("../../traces/scatter/attributes"),i=r.marker;t.exports={r:r.r,t:r.t,marker:{color:i.color,size:i.size,symbol:i.symbol,opacity:i.opacity}}},{"../../traces/scatter/attributes":881}],751:[function(e,t,n){"use strict";function r(e,t){var n={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}};return s({},t,n)}var i=e("../cartesian/layout_attributes"),s=e("../../lib/extend").extendFlat,o=s({},i.domain,{});t.exports={radialaxis:r("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:o,orientation:{valType:"number"}}),angularaxis:r("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:o}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}}},{"../../lib/extend":650,"../cartesian/layout_attributes":698}],752:[function(e,t,n){"use strict";var r=t.exports=e("./micropolar");r.manager=e("./micropolar_manager")},{"./micropolar":753,"./micropolar_manager":754}],753:[function(e,t,n){var r=e("d3"),i=e("../../lib"),s=i.extendDeepAll,o=t.exports={version:"0.2.2"};o.Axis=function(){function e(e){n=e||n;var l=f.data,h=f.layout;return("string"==typeof n||n.nodeName)&&(n=r.select(n)),n.datum(l).each(function(e,n){function f(e,t){return u(e)%360+h.orientation}var l=e.slice();c={data:o.util.cloneJson(l),layout:o.util.cloneJson(h)};var p=0;l.forEach(function(e,t){e.color||(e.color=h.defaultColorRange[p],p=(p+1)%h.defaultColorRange.length),e.strokeColor||(e.strokeColor="LinePlot"===e.geometry?e.color:r.rgb(e.color).darker().toString()),c.data[t].color=e.color,c.data[t].strokeColor=e.strokeColor,c.data[t].strokeDash=e.strokeDash,c.data[t].strokeSize=e.strokeSize});var d=l.filter(function(e,t){var n=e.visible;return"undefined"==typeof n||n===!0}),v=!1,m=d.map(function(e,t){return v=v||"undefined"!=typeof e.groupId,e});if(v){var g=r.nest().key(function(e,t){return"undefined"!=typeof e.groupId?e.groupId:"unstacked"}).entries(m),y=[],b=g.map(function(e,t){if("unstacked"===e.key)return e.values;var n=e.values[0].r.map(function(e,t){return 0});return e.values.forEach(function(e,t,r){e.yStack=[n],y.push(n),n=o.util.sumArrays(e.r,n)}),e.values});d=r.merge(b)}d.forEach(function(e,t){e.t=Array.isArray(e.t[0])?e.t:[e.t],e.r=Array.isArray(e.r[0])?e.r:[e.r]});var w=Math.min(h.width-h.margin.left-h.margin.right,h.height-h.margin.top-h.margin.bottom)/2;w=Math.max(10,w);var E,S=[h.margin.left+w,h.margin.top+w];if(v){var x=r.max(o.util.sumArrays(o.util.arrayLast(d).r[0],o.util.arrayLast(y)));E=[0,x]}else E=r.extent(o.util.flattenArray(d.map(function(e,t){return e.r})));h.radialAxis.domain!=o.DATAEXTENT&&(E[0]=0),i=r.scale.linear().domain(h.radialAxis.domain!=o.DATAEXTENT&&h.radialAxis.domain?h.radialAxis.domain:E).range([0,w]),c.layout.radialAxis.domain=i.domain();var T,N=o.util.flattenArray(d.map(function(e,t){return e.t})),C="string"==typeof N[0];C&&(N=o.util.deduplicate(N),T=N.slice(),N=r.range(N.length),d=d.map(function(e,t){var n=e;return e.t=[N],v&&(n.yStack=e.yStack),n}));var k=d.filter(function(e,t){return"LinePlot"===e.geometry||"DotPlot"===e.geometry}).length===d.length,L=null===h.needsEndSpacing?C||!k:h.needsEndSpacing,A=h.angularAxis.domain&&h.angularAxis.domain!=o.DATAEXTENT&&!C&&h.angularAxis.domain[0]>=0,O=A?h.angularAxis.domain:r.extent(N),M=Math.abs(N[1]-N[0]);k&&!C&&(M=0);var _=O.slice();L&&C&&(_[1]+=M);var D=h.angularAxis.ticksCount||4;D>8&&(D=D/(D/8)+D%8),h.angularAxis.ticksStep&&(D=(_[1]-_[0])/D);var P=h.angularAxis.ticksStep||(_[1]-_[0])/(D*(h.minorTicks+1));T&&(P=Math.max(Math.round(P),1)),_[2]||(_[2]=P);var H=r.range.apply(this,_);if(H=H.map(function(e,t){return parseFloat(e.toPrecision(12))}),u=r.scale.linear().domain(_.slice(0,2)).range("clockwise"===h.direction?[0,360]:[360,0]),c.layout.angularAxis.domain=u.domain(),c.layout.angularAxis.endPadding=L?M:0,t=r.select(this).select("svg.chart-root"),"undefined"==typeof t||t.empty()){var B="<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>",j=(new DOMParser).parseFromString(B,"application/xml"),F=this.appendChild(this.ownerDocument.importNode(j.documentElement,!0));t=r.select(F)}t.select(".guides-group").style({"pointer-events":"none"}),t.select(".angular.axis-group").style({"pointer-events":"none"}),t.select(".radial.axis-group").style({"pointer-events":"none"});var I,q=t.select(".chart-group"),R={fill:"none",stroke:h.tickColor},U={"font-size":h.font.size,"font-family":h.font.family,fill:h.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(e,t){return" "+e+" 0 "+h.font.outlineColor}).join(",")};if(h.showLegend){I=t.select(".legend-group").attr({transform:"translate("+[w,h.margin.top]+")"}).style({display:"block"});var z=d.map(function(e,t){var n=o.util.cloneJson(e);return n.symbol="DotPlot"===e.geometry?e.dotType||"circle":"LinePlot"!=e.geometry?"square":"line",n.visibleInLegend="undefined"==typeof e.visibleInLegend||e.visibleInLegend,n.color="LinePlot"===e.geometry?e.strokeColor:e.color,n});o.Legend().config({data:d.map(function(e,t){return e.name||"Element"+t}),legendConfig:s({},o.Legend.defaultConfig().legendConfig,{container:I,elements:z,reverseOrder:h.legend.reverseOrder})})();var W=I.node().getBBox();w=Math.min(h.width-W.width-h.margin.left-h.margin.right,h.height-h.margin.top-h.margin.bottom)/2,w=Math.max(10,w),S=[h.margin.left+w,h.margin.top+w],i.range([0,w]),c.layout.radialAxis.domain=i.domain(),I.attr("transform","translate("+[S[0]+w,S[1]-w]+")")}else I=t.select(".legend-group").style({display:"none"});t.attr({width:h.width,height:h.height}).style({opacity:h.opacity}),q.attr("transform","translate("+S+")").style({cursor:"crosshair"});var X=[(h.width-(h.margin.left+h.margin.right+2*w+(W?W.width:0)))/2,(h.height-(h.margin.top+h.margin.bottom+2*w))/2];if(X[0]=Math.max(0,X[0]),X[1]=Math.max(0,X[1]),t.select(".outer-group").attr("transform","translate("+X+")"),h.title){var V=t.select("g.title-group text").style(U).text(h.title),$=V.node().getBBox();V.attr({x:S[0]-$.width/2,y:S[1]-w-20})}var J=t.select(".radial.axis-group");if(h.radialAxis.gridLinesVisible){var K=J.selectAll("circle.grid-circle").data(i.ticks(5));K.enter().append("circle").attr({"class":"grid-circle"}).style(R),K.attr("r",i),K.exit().remove()}J.select("circle.outside-circle").attr({r:w}).style(R);var Q=t.select("circle.background-circle").attr({r:w}).style({fill:h.backgroundColor,stroke:h.stroke});if(h.radialAxis.visible){var G=r.svg.axis().scale(i).ticks(5).tickSize(5);J.call(G).attr({transform:"rotate("+h.radialAxis.orientation+")"}),J.selectAll(".domain").style(R),J.selectAll("g>text").text(function(e,t){return this.textContent+h.radialAxis.ticksSuffix}).style(U).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(e,t){return"horizontal"===h.radialAxis.tickOrientation?"rotate("+ -h.radialAxis.orientation+") translate("+[0,U["font-size"]]+")":"translate("+[0,U["font-size"]]+")"}}),J.selectAll("g>line").style({stroke:"black"})}var Y=t.select(".angular.axis-group").selectAll("g.angular-tick").data(H),Z=Y.enter().append("g").classed("angular-tick",!0);Y.attr({transform:function(e,t){return"rotate("+f(e,t)+")"}}).style({display:h.angularAxis.visible?"block":"none"}),Y.exit().remove(),Z.append("line").classed("grid-line",!0).classed("major",function(e,t){return t%(h.minorTicks+1)==0}).classed("minor",function(e,t){return t%(h.minorTicks+1)!=0}).style(R),Z.selectAll(".minor").style({stroke:h.minorTickColor}),Y.select("line.grid-line").attr({x1:h.tickLength?w-h.tickLength:0,x2:w}).style({display:h.angularAxis.gridLinesVisible?"block":"none"}),Z.append("text").classed("axis-text",!0).style(U);var et=Y.select("text.axis-text").attr({x:w+h.labelOffset,dy:".35em",transform:function(e,t){var n=f(e,t),r=w+h.labelOffset,i=h.angularAxis.tickOrientation;return"horizontal"==i?"rotate("+ -n+" "+r+" 0)":"radial"==i?n<270&&n>90?"rotate(180 "+r+" 0)":null:"rotate("+(n<=180&&n>0?-90:90)+" "+r+" 0)"}}).style({"text-anchor":"middle",display:h.angularAxis.labelsVisible?"block":"none"}).text(function(e,t){return t%(h.minorTicks+1)!=0?"":T?T[e]+h.angularAxis.ticksSuffix:e+h.angularAxis.ticksSuffix}).style(U);h.angularAxis.rewriteTicks&&et.text(function(e,t){return t%(h.minorTicks+1)!=0?"":h.angularAxis.rewriteTicks(this.textContent,t)});var tt=r.max(q.selectAll(".angular-tick text")[0].map(function(e,t){return e.getCTM().e+e.getBBox().width}));I.attr({transform:"translate("+[w+tt,h.margin.top]+")"});var nt=t.select("g.geometry-group").selectAll("g").size()>0,rt=t.select("g.geometry-group").selectAll("g.geometry").data(d);if(rt.enter().append("g").attr({"class":function(e,t){return"geometry geometry"+t}}),rt.exit().remove(),d[0]||nt){var it=[];d.forEach(function(e,t){var n={};n.radialScale=i,n.angularScale=u,n.container=rt.filter(function(e,n){return n==t}),n.geometry=e.geometry,n.orientation=h.orientation,n.direction=h.direction,n.index=t,it.push({data:e,geometryConfig:n})});var st=r.nest().key(function(e,t){return"undefined"!=typeof e.data.groupId||"unstacked"}).entries(it),ot=[];st.forEach(function(e,t){"unstacked"===e.key?ot=ot.concat(e.values.map(function(e,t){return[e]})):ot.push(e.values)}),ot.forEach(function(e,t){var n;n=Array.isArray(e)?e[0].geometryConfig.geometry:e.geometryConfig.geometry;var r=e.map(function(e,t){return s(o[n].defaultConfig(),e)});o[n]().config(r)()})}var ut,at,ft=t.select(".guides-group"),lt=t.select(".tooltips-group"),ct=o.tooltipPanel().config({container:lt,fontSize:8})(),ht=o.tooltipPanel().config({container:lt,fontSize:8})(),pt=o.tooltipPanel().config({container:lt,hasTick:!0})();if(!C){var dt=ft.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});q.on("mousemove.angular-guide",function(e,t){var n=o.util.getMousePos(Q).angle;dt.attr({x2:-w,transform:"rotate("+n+")"}).style({opacity:.5});var r=(n+180+360-h.orientation)%360;ut=u.invert(r);var i=o.util.convertToCartesian(w+12,n+180);ct.text(o.util.round(ut)).move([i[0]+S[0],i[1]+S[1]])}).on("mouseout.angular-guide",function(e,t){ft.select("line").style({opacity:0})})}var vt=ft.select("circle").style({stroke:"grey",fill:"none"});q.on("mousemove.radial-guide",function(e,t){var n=o.util.getMousePos(Q).radius;vt.attr({r:n}).style({opacity:.5}),at=i.invert(o.util.getMousePos(Q).radius);var r=o.util.convertToCartesian(n,h.radialAxis.orientation);ht.text(o.util.round(at)).move([r[0]+S[0],r[1]+S[1]])}).on("mouseout.radial-guide",function(e,t){vt.style({opacity:0}),pt.hide(),ct.hide(),ht.hide()}),t.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,n){var i=r.select(this),s=i.style("fill"),u="black",a=i.style("opacity")||1;if(i.attr({"data-opacity":a}),"none"!=s){i.attr({"data-fill":s}),u=r.hsl(s).darker().toString(),i.style({fill:u,opacity:1});var f={t:o.util.round(e[0]),r:o.util.round(e[1])};C&&(f.t=T[e[0]]);var l="t: "+f.t+", r: "+f.r,c=this.getBoundingClientRect(),h=t.node().getBoundingClientRect(),p=[c.left+c.width/2-X[0]-h.left,c.top+c.height/2-X[1]-h.top];pt.config({color:u}).text(l),pt.move(p)}else s=i.style("stroke"),i.attr({"data-stroke":s}),u=r.hsl(s).darker().toString(),i.style({stroke:u,opacity:1})}).on("mousemove.tooltip",function(e,t){return 0==r.event.which&&void (r.select(this).attr("data-fill")&&pt.show())}).on("mouseout.tooltip",function(e,t){pt.hide();var n=r.select(this),i=n.attr("data-fill");i?n.style({fill:i,opacity:n.attr("data-opacity")}):n.style({stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})}),p}var t,n,i,u,f={data:[],layout:{}},l={},c={},h=r.dispatch("hover"),p={};return p.render=function(t){return e(t),this},p.config=function(e){if(!arguments.length)return f;var t=o.util.cloneJson(e);return t.data.forEach(function(e,t){f.data[t]||(f.data[t]={}),s(f.data[t],o.Axis.defaultConfig().data[0]),s(f.data[t],e)}),s(f.layout,o.Axis.defaultConfig().layout),s(f.layout,t.layout),this},p.getLiveConfig=function(){return c},p.getinputConfig=function(){return l},p.radialScale=function(e){return i},p.angularScale=function(e){return u},p.svg=function(){return t},r.rebind(p,h,"on"),p},o.Axis.defaultConfig=function(e,t){var n={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:r.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}};return n},o.util={},o.DATAEXTENT="dataExtent",o.AREA="AreaChart",o.LINE="LinePlot",o.DOT="DotPlot",o.BAR="BarChart",o.util._override=function(e,t){for(var n in e)n in t&&(t[n]=e[n])},o.util._extend=function(e,t){for(var n in e)t[n]=e[n]},o.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},o.util.dataFromEquation2=function(e,t){var n=t||6,i=r.range(0,360+n,n).map(function(t,n){var r=t*Math.PI/180,i=e(r);return[t,i]});return i},o.util.dataFromEquation=function(e,t,n){var i=t||6,s=[],o=[];r.range(0,360+i,i).forEach(function(t,n){var r=t*Math.PI/180,i=e(r);s.push(t),o.push(i)});var u={t:s,r:o};return n&&(u.name=n),u},o.util.ensureArray=function(e,t){if("undefined"==typeof e)return null;var n=[].concat(e);return r.range(t).map(function(e,t){return n[t]||n[0]})},o.util.fillArrays=function(e,t,n){return t.forEach(function(t,r){e[t]=o.util.ensureArray(e[t],n)}),e},o.util.cloneJson=function(e){return JSON.parse(JSON.stringify(e))},o.util.validateKeys=function(e,t){"string"==typeof t&&(t=t.split("."));var n=t.shift();return e[n]&&(!t.length||objHasKeys(e[n],t))},o.util.sumArrays=function(e,t){return r.zip(e,t).map(function(e,t){return r.sum(e)})},o.util.arrayLast=function(e){return e[e.length-1]},o.util.arrayEqual=function(e,t){for(var n=Math.max(e.length,t.length,1);n-->=0&&e[n]===t[n];);return n===-2},o.util.flattenArray=function(e){for(var t=[];!o.util.arrayEqual(t,e);)t=e,e=[].concat.apply([],e);return e},o.util.deduplicate=function(e){return e.filter(function(e,t,n){return n.indexOf(e)==t})},o.util.convertToCartesian=function(e,t){var n=t*Math.PI/180,r=e*Math.cos(n),i=e*Math.sin(n);return[r,i]},o.util.round=function(e,t){var n=t||2,r=Math.pow(10,n);return Math.round(e*r)/r},o.util.getMousePos=function(e){var t=r.mouse(e.node()),n=t[0],i=t[1],s={};return s.x=n,s.y=i,s.pos=t,s.angle=180*(Math.atan2(i,n)+Math.PI)/Math.PI,s.radius=Math.sqrt(n*n+i*i),s},o.util.duplicatesCount=function(e){for(var t,n={},r={},i=0,s=e.length;i<s;i++)t=e[i],t in n?(n[t]++,r[t]=n[t]):n[t]=1;return r},o.util.duplicates=function(e){return Object.keys(o.util.duplicatesCount(e))},o.util.translator=function(e,t,n,r){if(r){var i=n.slice();n=t,t=i}var s=t.reduce(function(e,t){if("undefined"!=typeof e)return e[t]},e);"undefined"!=typeof s&&(t.reduce(function(e,n,r){if("undefined"!=typeof e)return r===t.length-1&&delete e[n],e[n]},e),n.reduce(function(e,t,r){return"undefined"==typeof e[t]&&(e[t]={}),r===n.length-1&&(e[t]=s),e[t]},e))},o.PolyChart=function(){function e(){var e=n[0].geometryConfig,t=e.container;"string"==typeof t&&(t=r.select(t)),t.datum(n).each(function(t,n){function i(t,n){var r=e.radialScale(t[1]),i=(e.angularScale(t[0])+e.orientation)*Math.PI/180;return{r:r,t:i}}function s(e){var t=e.r*Math.cos(e.t),n=e.r*Math.sin(e.t);return{x:t,y:n}}var o=!!t[0].data.yStack,a=t.map(function(e,t){return o?r.zip(e.data.t[0],e.data.r[0],e.data.yStack[0]):r.zip(e.data.t[0],e.data.r[0])}),f=e.angularScale,l=e.radialScale.domain()[0],c={};c.bar=function(n,i,s){var o=t[s].data,u=e.radialScale(n[1])-e.radialScale(0),a=e.radialScale(n[2]||0),l=o.barWidth;r.select(this).attr({"class":"mark bar",d:"M"+[[u+a,-l/2],[u+a,l/2],[a,l/2],[a,-l/2]].join("L")+"Z",transform:function(t,n){return"rotate("+(e.orientation+f(t[0]))+")"}})},c.dot=function(e,n,o){var u=e[2]?[e[0],e[1]+e[2]]:e,a=r.svg.symbol().size(t[o].data.dotSize).type(t[o].data.dotType)(e,n);r.select(this).attr({"class":"mark dot",d:a,transform:function(e,t){var n=s(i(u));return"translate("+[n.x,n.y]+")"}})};var h=r.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});c.line=function(n,i,s){var o=n[2]?a[s].map(function(e,t){return[e[0],e[1]+e[2]]}):a[s];if(r.select(this).each(c.dot).style({opacity:function(e,n){return+t[s].data.dotVisible},fill:m.stroke(n,i,s)}).attr({"class":"mark dot"}),!(i>0)){var u=r.select(this.parentNode).selectAll("path.line").data([0]);u.enter().insert("path"),u.attr({"class":"line",d:h(o),transform:function(t,n){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(e,t){return m.fill(n,i,s)},"fill-opacity":0,stroke:function(e,t){return m.stroke(n,i,s)},"stroke-width":function(e,t){return m["stroke-width"](n,i,s)},"stroke-dasharray":function(e,t){return m["stroke-dasharray"](n,i,s)},opacity:function(e,t){return m.opacity(n,i,s)},display:function(e,t){return m.display(n,i,s)}})}};var p=e.angularScale.range(),d=Math.abs(p[1]-p[0])/a[0].length*Math.PI/180,v=r.svg.arc().startAngle(function(e){return-d/2}).endAngle(function(e){return d/2}).innerRadius(function(t){return e.radialScale(l+(t[2]||0))}).outerRadius(function(t){return e.radialScale(l+(t[2]||0))+e.radialScale(t[1])});c.arc=function(t,n,i){r.select(this).attr({"class":"mark arc",d:v,transform:function(t,n){return"rotate("+(e.orientation+f(t[0])+90)+")"}})};var m={fill:function(e,n,r){return t[r].data.color},stroke:function(e,n,r){return t[r].data.strokeColor},"stroke-width":function(e,n,r){return t[r].data.strokeSize+"px"},"stroke-dasharray":function(e,n,r){return u[t[r].data.strokeDash]},opacity:function(e,n,r){return t[r].data.opacity},display:function(e,n,r){return"undefined"==typeof t[r].data.visible||t[r].data.visible?"block":"none"}},g=r.select(this).selectAll("g.layer").data(a);g.enter().append("g").attr({"class":"layer"});var y=g.selectAll("path.mark").data(function(e,t){return e});y.enter().append("path").attr({"class":"mark"}),y.style(m).each(c[e.geometryType]),y.exit().remove(),g.exit().remove()})}var t,n=[o.PolyChart.defaultConfig()],i=r.dispatch("hover"),u={solid:"none",dash:[5,2],dot:[2,5]};return e.config=function(e){return arguments.length?(e.forEach(function(e,t){n[t]||(n[t]={}),s(n[t],o.PolyChart.defaultConfig()),s(n[t],e)}),this):n},e.getColorScale=function(){return t},r.rebind(e,i,"on"),e},o.PolyChart.defaultConfig=function(){var e={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:r.scale.category20()}};return e},o.BarChart=function(){return o.PolyChart()},o.BarChart.defaultConfig=function(){var e={geometryConfig:{geometryType:"bar"}};return e},o.AreaChart=function(){return o.PolyChart()},o.AreaChart.defaultConfig=function(){var e={geometryConfig:{geometryType:"arc"}};return e},o.DotPlot=function(){return o.PolyChart()},o.DotPlot.defaultConfig=function(){var e={geometryConfig:{geometryType:"dot",dotType:"circle"}};return e},o.LinePlot=function(){return o.PolyChart()},o.LinePlot.defaultConfig=function(){var e={geometryConfig:{geometryType:"line"}};return e},o.Legend=function(){function e(){var n=t.legendConfig,i=t.data.map(function(e,t){return[].concat(e).map(function(e,r){var i=s({},n.elements[t]);return i.name=e,i.color=[].concat(n.elements[t].color)[r],i})}),o=r.merge(i);o=o.filter(function(e,t){return n.elements[t]&&(n.elements[t].visibleInLegend||"undefined"==typeof n.elements[t].visibleInLegend)}),n.reverseOrder&&(o=o.reverse());var u=n.container;("string"==typeof u||u.nodeName)&&(u=r.select(u));var f=o.map(function(e,t){return e.color}),l=n.fontSize,c=null==n.isContinuous?"number"==typeof o[0]:n.isContinuous,h=c?n.height:l*o.length,p=u.classed("legend-group",!0),d=p.selectAll("svg").data([0]),v=d.enter().append("svg").attr({width:300,height:h+l,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});v.append("g").classed("legend-axis",!0),v.append("g").classed("legend-marks",!0);var m=r.range(o.length),g=r.scale[c?"linear":"ordinal"]().domain(m).range(f),y=r.scale[c?"linear":"ordinal"]().domain(m)[c?"range":"rangePoints"]([0,h]),b=function(e,t){var n=3*t;return"line"===e?"M"+[[-t/2,-t/12],[t/2,-t/12],[t/2,t/12],[-t/2,t/12]]+"Z":r.svg.symbolTypes.indexOf(e)!=-1?r.svg.symbol().type(e).size(n)():r.svg.symbol().type("square").size(n)()};if(c){var w=d.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(f);w.enter().append("stop"),w.attr({offset:function(e,t){return t/(f.length-1)*100+"%"}}).style({"stop-color":function(e,t){return e}}),d.append("rect").classed("legend-mark",!0).attr({height:n.height,width:n.colorBandWidth,fill:"url(#grad1)"})}else{var E=d.select(".legend-marks").selectAll("path.legend-mark").data(o);E.enter().append("path").classed("legend-mark",!0),E.attr({transform:function(e,t){return"translate("+[l/2,y(t)+l/2]+")"},d:function(e,t){var n=e.symbol;return b(n,l)},fill:function(e,t){return g(t)}}),E.exit().remove()}var S=r.svg.axis().scale(y).orient("right"),x=d.select("g.legend-axis").attr({transform:"translate("+[c?n.colorBandWidth:l,l/2]+")"}).call(S);return x.selectAll(".domain").style({fill:"none",stroke:"none"}),x.selectAll("line").style({fill:"none",stroke:c?n.textColor:"none"}),x.selectAll("text").style({fill:n.textColor,"font-size":n.fontSize}).text(function(e,t){return o[t].name}),e}var t=o.Legend.defaultConfig(),n=r.dispatch("hover");return e.config=function(e){return arguments.length?(s(t,e),this):t},r.rebind(e,n,"on"),e},o.Legend.defaultConfig=function(e,t){var n={data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}};return n},o.tooltipPanel=function(){var e,t,n,i={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},u="tooltip-"+o.tooltipPanel.uid++,f=10,l=function(){e=i.container.selectAll("g."+u).data([0]);var r=e.enter().append("g").classed(u,!0).style({"pointer-events":"none",display:"none"});return n=r.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),t=r.append("text").attr({dx:i.padding+f,dy:.3*+i.fontSize}),l};return l.text=function(s){var o=r.hsl(i.color).l,u=o>=.5?"#aaa":"white",a=o>=.5?"black":"white",c=s||"";t.style({fill:a,"font-size":i.fontSize+"px"}).text(c);var h=i.padding,p=t.node().getBBox(),d={fill:i.color,stroke:u,"stroke-width":"2px"},v=p.width+2*h+f,m=p.height+2*h;return n.attr({d:"M"+[[f,-m/2],[f,-m/4],[i.hasTick?0:f,0],[f,m/4],[f,m/2],[v,m/2],[v,-m/2]].join("L")+"Z"}).style(d),e.attr({transform:"translate("+[f,-m/2+2*h]+")"}),e.style({display:"block"}),l},l.move=function(t){if(e)return e.attr({transform:"translate("+[t[0],t[1]]+")"}).style({display:"block"}),l},l.hide=function(){if(e)return e.style({display:"none"}),l},l.show=function(){if(e)return e.style({display:"block"}),l},l.config=function(e){return s(i,e),l},l},o.tooltipPanel.uid=1,o.adapter={},o.adapter.plotly=function(){var e={};return e.convert=function(e,t){var n={};if(e.data&&(n.data=e.data.map(function(e,n){var r=s({},e),i=[[r,["marker","color"],["color"]],[r,["marker","opacity"],["opacity"]],[r,["marker","line","color"],["strokeColor"]],[r,["marker","line","dash"],["strokeDash"]],[r,["marker","line","width"],["strokeSize"]],[r,["marker","symbol"],["dotType"]],[r,["marker","size"],["dotSize"]],[r,["marker","barWidth"],["barWidth"]],[r,["line","interpolation"],["lineInterpolation"]],[r,["showlegend"],["visibleInLegend"]]];return i.forEach(function(e,n){o.util.translator.apply(null,e.concat(t))}),t||delete r.marker,t&&delete r.groupId,t?("LinePlot"===r.geometry?(r.type="scatter",r.dotVisible===!0?(delete r.dotVisible,r.mode="lines+markers"):r.mode="lines"):"DotPlot"===r.geometry?(r.type="scatter",r.mode="markers"):"AreaChart"===r.geometry?r.type="area":"BarChart"===r.geometry&&(r.type="bar"),delete r.geometry):("scatter"===r.type?"lines"===r.mode?r.geometry="LinePlot":"markers"===r.mode?r.geometry="DotPlot":"lines+markers"===r.mode&&(r.geometry="LinePlot",r.dotVisible=!0):"area"===r.type?r.geometry="AreaChart":"bar"===r.type&&(r.geometry="BarChart"),delete r.mode,delete r.type),r}),!t&&e.layout&&"stack"===e.layout.barmode)){var i=o.util.duplicates(n.data.map(function(e,t){return e.geometry}));n.data.forEach(function(e,t){var r=i.indexOf(e.geometry);r!=-1&&(n.data[t].groupId=r)})}if(e.layout){var u=s({},e.layout),f=[[u,["plot_bgcolor"],["backgroundColor"]],[u,["showlegend"],["showLegend"]],[u,["radialaxis"],["radialAxis"]],[u,["angularaxis"],["angularAxis"]],[u.angularaxis,["showline"],["gridLinesVisible"]],[u.angularaxis,["showticklabels"],["labelsVisible"]],[u.angularaxis,["nticks"],["ticksCount"]],[u.angularaxis,["tickorientation"],["tickOrientation"]],[u.angularaxis,["ticksuffix"],["ticksSuffix"]],[u.angularaxis,["range"],["domain"]],[u.angularaxis,["endpadding"],["endPadding"]],[u.radialaxis,["showline"],["gridLinesVisible"]],[u.radialaxis,["tickorientation"],["tickOrientation"]],[u.radialaxis,["ticksuffix"],["ticksSuffix"]],[u.radialaxis,["range"],["domain"]],[u.angularAxis,["showline"],["gridLinesVisible"]],[u.angularAxis,["showticklabels"],["labelsVisible"]],[u.angularAxis,["nticks"],["ticksCount"]],[u.angularAxis,["tickorientation"],["tickOrientation"]],[u.angularAxis,["ticksuffix"],["ticksSuffix"]],[u.angularAxis,["range"],["domain"]],[u.angularAxis,["endpadding"],["endPadding"]],[u.radialAxis,["showline"],["gridLinesVisible"]],[u.radialAxis,["tickorientation"],["tickOrientation"]],[u.radialAxis,["ticksuffix"],["ticksSuffix"]],[u.radialAxis,["range"],["domain"]],[u.font,["outlinecolor"],["outlineColor"]],[u.legend,["traceorder"],["reverseOrder"]],[u,["labeloffset"],["labelOffset"]],[u,["defaultcolorrange"],["defaultColorRange"]]];if(f.forEach(function(e,n){o.util.translator.apply(null,e.concat(t))}),t?("undefined"!=typeof u.tickLength&&(u.angularaxis.ticklen=u.tickLength,delete u.tickLength),u.tickColor&&(u.angularaxis.tickcolor=u.tickColor,delete u.tickColor)):(u.angularAxis&&"undefined"!=typeof u.angularAxis.ticklen&&(u.tickLength=u.angularAxis.ticklen),u.angularAxis&&"undefined"!=typeof u.angularAxis.tickcolor&&(u.tickColor=u.angularAxis.tickcolor)),u.legend&&"boolean"!=typeof u.legend.reverseOrder&&(u.legend.reverseOrder="normal"!=u.legend.reverseOrder),u.legend&&"boolean"==typeof u.legend.traceorder&&(u.legend.traceorder=u.legend.traceorder?"reversed":"normal",delete u.legend.reverseOrder),u.margin&&"undefined"!=typeof u.margin.t){var l=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],h={};r.entries(u.margin).forEach(function(e,t){h[c[l.indexOf(e.key)]]=e.value}),u.margin=h}t&&(delete u.needsEndSpacing,delete u.minorTickColor,delete u.minorTicks,delete u.angularaxis.ticksCount,delete u.angularaxis.ticksCount,delete u.angularaxis.ticksStep,delete u.angularaxis.rewriteTicks,delete u.angularaxis.nticks,delete u.radialaxis.ticksCount,delete u.radialaxis.ticksCount,delete u.radialaxis.ticksStep,delete u.radialaxis.rewriteTicks,delete u.radialaxis.nticks),n.layout=u}return n},e}},{"../../lib":657,d3:97}],754:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../lib"),s=e("../../components/color"),o=e("./micropolar"),u=e("./undo_manager"),a=i.extendDeepAll,f=t.exports={};f.framework=function(e){function t(t,i){return i&&(h=i),r.select(r.select(h).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),n=n?a(n,t):t,s||(s=o.Axis()),c=o.adapter.plotly().convert(n),s.config(c).render(h),e.data=n.data,e.layout=n.layout,f.fillLayout(e),n}var n,i,s,c,h,p=new u;return t.isPolar=!0,t.svg=function(){return s.svg()},t.getConfig=function(){return n},t.getLiveConfig=function(){return o.adapter.plotly().convert(s.getLiveConfig(),!0)},t.getLiveScales=function(){return{t:s.angularScale(),r:s.radialScale()}},t.setUndoPoint=function(){var e=this,t=o.util.cloneJson(n);!function(t,n){p.add({undo:function(){n&&e(n)},redo:function(){e(t)}})}(t,i),i=o.util.cloneJson(t)},t.undo=function(){p.undo()},t.redo=function(){p.redo()},t},f.fillLayout=function(e){var t=r.select(e).selectAll(".plot-container"),n=t.selectAll(".svg-container"),i=e.framework&&e.framework.svg&&e.framework.svg(),o={width:800,height:600,paper_bgcolor:s.background,_container:t,_paperdiv:n,_paper:i};e._fullLayout=a(o,e.layout)}},{"../../components/color":557,"../../lib":657,"./micropolar":753,"./undo_manager":755,d3:97}],755:[function(e,t,n){"use strict";t.exports=function(){function e(e,t){return e?(i=!0,e[t](),i=!1,this):this}var t,n=[],r=-1,i=!1;return{add:function(e){return i?this:(n.splice(r+1,n.length-r),n.push(e),r=n.length-1,this)},setCallback:function(e){t=e},undo:function(){var i=n[r];return i?(e(i,"undo"),r-=1,t&&t(i.undo),this):this},redo:function(){var i=n[r+1];return i?(e(i,"redo"),r+=1,t&&t(i.redo),this):this},clear:function(){n=[],r=-1},hasUndo:function(){return r!==-1},hasRedo:function(){return r<n.length-1},getCommands:function(){return n},getPreviousCommand:function(){return n[r-1]},getIndex:function(){return r}}}},{}],756:[function(e,t,n){"use strict";var r=e("../lib"),i=e("./plots");t.exports=function(e,t,n,s){function o(e,t){return r.coerce(u,a,l,e,t)}for(var u,a,f=s.type,l=s.attributes,c=s.handleDefaults,h=s.partition||"x",p=i.findSubplotIds(n,f),d=p.length,v=0;v<d;v++){var m=p[v];u=e[m]?e[m]:e[m]={},t[m]=a={},o("domain."+h,[v/d,(v+1)/d]),o("domain."+{x:"y",y:"x"}[h]),s.id=m,c(u,a,o,s)}}},{"../lib":657,"./plots":749}],757:[function(e,t,n){"use strict";var r=e("./ternary"),i=e("../../plots/plots");n.name="ternary",n.attr="subplot",n.idRoot="ternary",n.idRegex=/^ternary([2-9]|[1-9][0-9]+)?$/,n.attrRegex=/^ternary([2-9]|[1-9][0-9]+)?$/,n.attributes=e("./layout/attributes"),n.layoutAttributes=e("./layout/layout_attributes"),n.supplyLayoutDefaults=e("./layout/defaults"),n.plot=function(e){for(var t=e._fullLayout,n=e._fullData,s=i.getSubplotIds(t,"ternary"),o=0;o<s.length;o++){var u=s[o],a=i.getSubplotData(n,"ternary",u),f=t[u]._subplot;void 0===f&&(f=new r({id:u,graphDiv:e,container:t._ternarylayer.node()},t),t[u]._subplot=f),f.plot(a,t,e._promises)}},n.clean=function(e,t,n,r){for(var s=i.getSubplotIds(r,"ternary"),o=0;o<s.length;o++){var u=s[o],a=r[u]._subplot;!t[u]&&a&&(a.plotContainer.remove(),a.clipDef.remove())}}},{"../../plots/plots":749,"./layout/attributes":758,"./layout/defaults":761,"./layout/layout_attributes":762,"./ternary":763}],758:[function(e,t,n){"use strict";t.exports={subplot:{valType:"subplotid",dflt:"ternary"}}},{}],759:[function(e,t,n){"use strict";var r=e("../../cartesian/layout_attributes"),i=e("../../../lib/extend").extendFlat;t.exports={title:r.title,titlefont:r.titlefont,color:r.color,tickmode:r.tickmode,nticks:i({},r.nticks,{dflt:6,min:1}),tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,showtickprefix:r.showtickprefix,tickprefix:r.tickprefix,showticksuffix:r.showticksuffix,ticksuffix:r.ticksuffix,showexponent:r.showexponent,exponentformat:r.exponentformat,separatethousands:r.separatethousands,tickfont:r.tickfont,tickangle:r.tickangle,tickformat:r.tickformat,hoverformat:r.hoverformat,showline:i({},r.showline,{dflt:!0}),linecolor:r.linecolor,linewidth:r.linewidth,showgrid:i({},r.showgrid,{dflt:!0}),gridcolor:r.gridcolor,gridwidth:r.gridwidth,min:{valType:"number",dflt:0,min:0}}},{"../../../lib/extend":650,"../../cartesian/layout_attributes":698}],760:[function(e,t,n){"use strict";var r=e("tinycolor2").mix,i=e("../../../lib"),s=e("./axis_attributes"),o=e("../../cartesian/tick_label_defaults"),u=e("../../cartesian/tick_mark_defaults"),a=e("../../cartesian/tick_value_defaults");t.exports=function(e,t,n){function f(n,r){return i.coerce(e,t,s,n,r)}t.type="linear";var c=f("color"),h=c===e.color?c:n.font.color,p=t._name,d=p.charAt(0).toUpperCase(),v="Component "+d,m=f("title",v);t._hovertitle=m===v?m:d,i.coerceFont(f,"titlefont",{family:n.font.family,size:Math.round(1.2*n.font.size),color:h}),f("min"),a(e,t,f,"linear"),o(e,t,f,"linear",{noHover:!1}),u(e,t,f,{outerTicks:!0});var g=f("showticklabels");g&&(i.coerceFont(f,"tickfont",{family:n.font.family,size:n.font.size,color:h}),f("tickangle"),f("tickformat")),f("hoverformat");var y=f("showline");y&&(f("linecolor",c),f("linewidth"));var b=f("showgrid");b&&(f("gridcolor",r(c,n.bgColor,60).toRgbString()),f("gridwidth"))}},{"../../../lib":657,"../../cartesian/tick_label_defaults":704,"../../cartesian/tick_mark_defaults":705,"../../cartesian/tick_value_defaults":706,"./axis_attributes":759,tinycolor2:495}],761:[function(e,t,n){"use strict";function r(e,t,n,r){var s=n("bgcolor"),o=n("sum");r.bgColor=i.combine(s,r.paper_bgcolor);for(var f,c,h,p=0;p<a.length;p++)f=a[p],c=e[f]||{},h=t[f]={_name:f},u(c,h,r);var d=t.aaxis,v=t.baxis,m=t.caxis;d.min+v.min+m.min>=o&&(d.min=0,v.min=0,m.min=0,e.aaxis&&delete e.aaxis.min,e.baxis&&delete e.baxis.min,e.caxis&&delete e.caxis.min)}var i=e("../../../components/color"),s=e("../../subplot_defaults"),o=e("./layout_attributes"),u=e("./axis_defaults"),a=["aaxis","baxis","caxis"];t.exports=function(e,t,n){s(e,t,n,{type:"ternary",attributes:o,handleDefaults:r,font:t.font,paper_bgcolor:t.paper_bgcolor})}},{"../../../components/color":557,"../../subplot_defaults":756,"./axis_defaults":760,"./layout_attributes":762}],762:[function(e,t,n){"use strict";var r=e("../../../components/color/attributes"),i=e("./axis_attributes");t.exports={domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},bgcolor:{valType:"color",dflt:r.background},sum:{valType:"number",dflt:1,min:0},aaxis:i,baxis:i,caxis:i}},{"../../../components/color/attributes":556,"./axis_attributes":759}],763:[function(e,t,n){"use strict";function r(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.init(t),this.makeFramework()}function i(e){s.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var s=e("d3"),o=e("tinycolor2"),u=e("../../plotly"),a=e("../../lib"),f=e("../../components/color"),l=e("../../components/drawing"),c=e("../cartesian/set_convert"),h=e("../../lib/extend").extendFlat,p=e("../cartesian/axes"),d=e("../../components/dragelement"),v=e("../../components/titles"),m=e("../cartesian/select"),g=e("../cartesian/constants"),y=e("../cartesian/graph_interact");t.exports=r;var b=r.prototype;b.init=function(e){this.container=e._ternarylayer,this.defs=e._defs,this.layoutId=e._uid,this.traceHash={}},b.plot=function(e,t){var n,r=this,i=t[r.id],s=t._size;a.getPlotDiv(r.plotContainer.node())!==r.graphDiv&&(r.init(r.graphDiv._fullLayout),r.makeFramework()),r.adjustLayout(i,s);var o=r.traceHash,u={};for(n=0;n<e.length;n++){var l=e[n];u[l.type]=u[l.type]||[],u[l.type].push(l)}var c=Object.keys(o),h=Object.keys(u);for(n=0;n<c.length;n++){var p=c[n];if(h.indexOf(p)===-1){var d=o[p][0];d.visible=!1,u[p]=[d]}}for(h=Object.keys(u),n=0;n<h.length;n++){var v=u[h[n]],m=v[0]._module;m.plot(r,a.filterVisible(v),i)}r.traceHash=u,r.layers.plotbg.select("path").call(f.fill,i.bgcolor)},b.makeFramework=function(){var e=this,t=e.defs.selectAll("g.clips").data([0]);t.enter().append("g").classed("clips",!0);var n="clip"+e.layoutId+e.id;e.clipDef=t.selectAll("#"+n).data([0]),e.clipDef.enter().append("clipPath").attr("id",n).append("path").attr("d","M0,0Z"),e.plotContainer=e.container.selectAll("g."+e.id).data([0]),e.plotContainer.enter().append("g").classed(e.id,!0),e.layers={};var r=["draglayer","plotbg","backplot","grids","frontplot","zoom","aaxis","baxis","caxis","axlines"],i=e.plotContainer.selectAll("g.toplevel").data(r);i.enter().append("g").attr("class",function(e){return"toplevel "+e}).each(function(t){var n=s.select(this);e.layers[t]=n,"frontplot"===t?n.append("g").classed("scatterlayer",!0):"backplot"===t?n.append("g").classed("maplayer",!0):"plotbg"===t?n.append("path").attr("d","M0,0Z"):"axlines"===t&&n.selectAll("path").data(["aline","bline","cline"]).enter().append("path").each(function(e){s.select(this).classed(e,!0)})});var o=e.plotContainer.select(".grids").selectAll("g.grid").data(["agrid","bgrid","cgrid"]);o.enter().append("g").attr("class",function(e){return"grid "+e}).each(function(t){e.layers[t]=s.select(this)}),e.plotContainer.selectAll(".backplot,.frontplot,.grids").call(l.setClipUrl,n),e.graphDiv._context.staticPlot||e.initInteractions()};var w=Math.sqrt(4/3);b.adjustLayout=function(e,t){var n,r,i,s,o,u,a=this,l=e.domain,p=(l.x[0]+l.x[1])/2,d=(l.y[0]+l.y[1])/2,v=l.x[1]-l.x[0],m=l.y[1]-l.y[0],g=v*t.w,y=m*t.h,b=e.sum,E=e.aaxis.min,S=e.baxis.min,x=e.caxis.min;g>w*y?(s=y,i=s*w):(i=g,s=i/w),o=v*i/g,u=m*s/y,n=t.l+t.w*p-i/2,r=t.t+t.h*(1-d)-s/2,a.x0=n,a.y0=r,a.w=i,a.h=s,a.sum=b,a.xaxis={type:"linear",range:[E+2*x-b,b-E-2*S],domain:[p-o/2,p+o/2],_id:"x",_gd:a.graphDiv},c(a.xaxis),a.xaxis.setScale(),a.yaxis={type:"linear",range:[E,b-S-x],domain:[d-u/2,d+u/2],_id:"y",_gd:a.graphDiv},c(a.yaxis),a.yaxis.setScale();var T=a.yaxis.domain[0],N=a.aaxis=h({},e.aaxis,{range:[E,b-S-x],side:"left",_counterangle:30,tickangle:(+e.aaxis.tickangle||0)-30,domain:[T,T+u*w],_axislayer:a.layers.aaxis,_gridlayer:a.layers.agrid,_pos:0,_gd:a.graphDiv,_id:"y",_length:i,_gridpath:"M0,0l"+s+",-"+i/2});c(N);var C=a.baxis=h({},e.baxis,{range:[b-E-x,S],side:"bottom",_counterangle:30,domain:a.xaxis.domain,_axislayer:a.layers.baxis,_gridlayer:a.layers.bgrid,_counteraxis:a.aaxis,_pos:0,_gd:a.graphDiv,_id:"x",_length:i,_gridpath:"M0,0l-"+i/2+",-"+s});c(C),N._counteraxis=C;var k=a.caxis=h({},e.caxis,{range:[b-E-S,x],side:"right",_counterangle:30,tickangle:(+e.caxis.tickangle||0)+30,domain:[T,T+u*w],_axislayer:a.layers.caxis,_gridlayer:a.layers.cgrid,_counteraxis:a.baxis,_pos:0,_gd:a.graphDiv,_id:"y",_length:i,_gridpath:"M0,0l-"+s+","+i/2});c(k);var L="M"+n+","+(r+s)+"h"+i+"l-"+i/2+",-"+s+"Z";a.clipDef.select("path").attr("d",L),a.layers.plotbg.select("path").attr("d",L);var A="translate("+n+","+r+")";a.plotContainer.selectAll(".scatterlayer,.maplayer,.zoom").attr("transform",A);var O="translate("+n+","+(r+s)+")";a.layers.baxis.attr("transform",O),a.layers.bgrid.attr("transform",O);var M="translate("+(n+i/2)+","+r+")rotate(30)";a.layers.aaxis.attr("transform",M),a.layers.agrid.attr("transform",M);var _="translate("+(n+i/2)+","+r+")rotate(-30)";a.layers.caxis.attr("transform",_),a.layers.cgrid.attr("transform",_),a.drawAxes(!0),a.plotContainer.selectAll(".crisp").classed("crisp",!1);var D=a.layers.axlines;D.select(".aline").attr("d",N.showline?"M"+n+","+(r+s)+"l"+i/2+",-"+s:"M0,0").call(f.stroke,N.linecolor||"#000").style("stroke-width",(N.linewidth||0)+"px"),D.select(".bline").attr("d",C.showline?"M"+n+","+(r+s)+"h"+i:"M0,0").call(f.stroke,C.linecolor||"#000").style("stroke-width",(C.linewidth||0)+"px"),D.select(".cline").attr("d",k.showline?"M"+(n+i/2)+","+r+"l"+i/2+","+s:"M0,0").call(f.stroke,k.linecolor||"#000").style("stroke-width",(k.linewidth||0)+"px")},b.drawAxes=function(e){var t=this,n=t.graphDiv,r=t.id.substr(7)+"title",i=t.aaxis,s=t.baxis,o=t.caxis;if(p.doTicks(n,i,!0),p.doTicks(n,s,!0),p.doTicks(n,o,!0),e){var u=Math.max(i.showticklabels?i.tickfont.size/2:0,(o.showticklabels?.75*o.tickfont.size:0)+("outside"===o.ticks?.87*o.ticklen:0));v.draw(n,"a"+r,{propContainer:i,propName:t.id+".aaxis.title",dfltName:"Component A",attributes:{x:t.x0+t.w/2,y:t.y0-i.titlefont.size/3-u,"text-anchor":"middle"}});var a=(s.showticklabels?s.tickfont.size:0)+("outside"===s.ticks?s.ticklen:0)+3;v.draw(n,"b"+r,{propContainer:s,propName:t.id+".baxis.title",dfltName:"Component B",attributes:{x:t.x0-a,y:t.y0+t.h+.83*s.titlefont.size+a,"text-anchor":"middle"}}),v.draw(n,"c"+r,{propContainer:o,propName:t.id+".caxis.title",dfltName:"Component C",attributes:{x:t.x0+t.w+a,y:t.y0+t.h+.83*o.titlefont.size+a,"text-anchor":"middle"}})}};var E=g.MINZOOM/2+.87,S="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",x="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",T="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",N="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",C=!0;b.initInteractions=function(){function e(e,t,n){var r=q.getBoundingClientRect();E=t-r.left,L=n-r.top,O={a:I.aaxis.range[0],b:I.baxis.range[1],c:I.caxis.range[1]},D=O,_=I.aaxis.range[1]-O.a,P=o(I.graphDiv._fullLayout[I.id].bgcolor).getLuminance(),H="M0,"+I.h+"L"+I.w/2+", 0L"+I.w+","+I.h+"Z",B=!1,j=U.append("path").attr("class","zoombox").style({fill:P>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",H),F=U.append("path").attr("class","zoombox-corners").style({fill:f.background,stroke:f.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),v()}function t(e,t){return 1-t/I.h}function n(e,t){return 1-(e+(I.h-t)/Math.sqrt(3))/I.w}function r(e,t){return(e-(I.h-t)/Math.sqrt(3))/I.w}function s(e,i){var s=E+e,o=L+i,u=Math.max(0,Math.min(1,t(E,L),t(s,o))),a=Math.max(0,Math.min(1,n(E,L),n(s,o))),f=Math.max(0,Math.min(1,r(E,L),r(s,o))),l=(u/2+f)*I.w,c=(1-u/2-a)*I.w,h=(l+c)/2,p=c-l,d=(1-u)*I.h,v=d-p/w;p<g.MINZOOM?(D=O,j.attr("d",H),F.attr("d","M0,0Z")):(D={a:O.a+u*_,b:O.b+a*_,c:O.c+f*_},j.attr("d",H+"M"+l+","+d+"H"+c+"L"+h+","+v+"L"+l+","+d+"Z"),F.attr("d","M"+E+","+L+N+"M"+l+","+d+S+"M"+c+","+d+x+"M"+h+","+v+T)),B||(j.transition().style("fill",P>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),F.transition().style("opacity",1).duration(200),B=!0)}function l(e,t){if(D===O)return 2===t&&b(),i(R);i(R);var n={};n[I.id+".aaxis.min"]=D.a,n[I.id+".baxis.min"]=D.b,n[I.id+".caxis.min"]=D.c,u.relayout(R,n),C&&R.data&&R._context.showTips&&(a.notifier("Double-click to<br>zoom back out","long"),C=!1)}function c(){O={a:I.aaxis.range[0],b:I.baxis.range[1],c:I.caxis.range[1]},D=O}function h(e,t){var n=e/I.xaxis._m,r=t/I.yaxis._m;D={a:O.a-r,b:O.b+(n+r)/2,c:O.c-(n-r)/2};var i=[D.a,D.b,D.c].sort(),s={a:i.indexOf(D.a),b:i.indexOf(D.b),c:i.indexOf(D.c)};i[0]<0&&(i[1]+i[0]/2<0?(i[2]+=i[0]+i[1],i[0]=i[1]=0):(i[2]+=i[0]/2,i[1]+=i[0]/2,i[0]=0),D={a:i[s.a],b:i[s.b],c:i[s.c]},t=(O.a-D.a)*I.yaxis._m,e=(O.c-D.c-O.b+D.b)*I.xaxis._m);var o="translate("+(I.x0+e)+","+(I.y0+t)+")";I.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",o),I.aaxis.range=[D.a,I.sum-D.b-D.c],I.baxis.range=[I.sum-D.a-D.c,D.b],I.caxis.range=[I.sum-D.a-D.b,D.c],I.drawAxes(!1),I.plotContainer.selectAll(".crisp").classed("crisp",!1)}function p(e,t){if(e){var n={};n[I.id+".aaxis.min"]=D.a,n[I.id+".baxis.min"]=D.b,n[I.id+".caxis.min"]=D.c,u.relayout(R,n)}else 2===t&&b()}function v(){I.plotContainer.selectAll(".select-outline").remove()}function b(){var e={};e[I.id+".aaxis.min"]=0,e[I.id+".baxis.min"]=0,e[I.id+".caxis.min"]=0,R.emit("plotly_doubleclick",null),u.relayout(R,e)}var E,L,O,_,D,P,H,B,j,F,I=this,q=I.layers.plotbg.select("path").node(),R=I.graphDiv,U=I.layers.zoom,z={element:q,gd:R,plotinfo:{plot:U},doubleclick:b,subplot:I.id,prepFn:function(t,n,r){z.xaxes=[I.xaxis],z.yaxes=[I.yaxis];var i=R._fullLayout.dragmode;t.shiftKey&&(i="pan"===i?"zoom":"pan"),"lasso"===i?z.minDrag=1:z.minDrag=void 0,"zoom"===i?(z.moveFn=s,z.doneFn=l,e(t,n,r)):"pan"===i?(z.moveFn=h,z.doneFn=p,c(),v()):"select"!==i&&"lasso"!==i||m(t,n,r,z,i)}};q.onmousemove=function(e){y.hover(R,e,I.id),R._fullLayout._lasthover=q,R._fullLayout._hoversubplot=I.id},q.onmouseout=function(e){R._dragging||d.unhover(R,e)},q.onclick=function(e){y.click(R,e)},d.init(z)}},{"../../components/color":557,"../../components/dragelement":578,"../../components/drawing":580,"../../components/titles":631,"../../lib":657,"../../lib/extend":650,"../../plotly":684,"../cartesian/axes":689,"../cartesian/constants":694,"../cartesian/graph_interact":696,"../cartesian/select":702,"../cartesian/set_convert":703,d3:97,tinycolor2:495}],764:[function(e,t,n){"use strict";function r(e){return"object"==typeof e&&(e=e.type),e}var i=e("./lib"),s=e("./plots/attributes");n.modules={},n.allCategories={},n.allTypes=[],n.subplotsRegistry={},n.transformsRegistry={},n.componentsRegistry={},n.layoutArrayContainers=[],n.register=function(e,t,r,s){if(n.modules[t])return void i.log("Type "+t+" already registered");for(var o={},u=0;u<r.length;u++)o[r[u]]=!0,n.allCategories[r[u]]=!0;n.modules[t]={_module:e,categories:o},s&&Object.keys(s).length&&(n.modules[t].meta=s),n.allTypes.push(t)},n.registerSubplot=function(e){var t=e.name;return n.subplotsRegistry[t]?void i.log("Plot type "+t+" already registered."):void (n.subplotsRegistry[t]=e)},n.registerComponent=function(e){var t=e.name;n.componentsRegistry[t]=e,e.layoutAttributes&&e.layoutAttributes._isLinkedToArray&&i.pushUnique(n.layoutArrayContainers,t)},n.getModule=function(e){if(void 0!==e.r)return i.warn("Tried to put a polar trace on an incompatible graph of cartesian data. Ignoring this dataset.",e),!1;var t=n.modules[r(e)];return!!t&&t._module},n.traceIs=function(e,t){if(e=r(e),"various"===e)return!1;var o=n.modules[e];return o||(e&&"area"!==e&&i.log("Unrecognized trace type "+e+"."),o=n.modules[s.type.dflt]),!!o.categories[t]},n.getComponentMethod=function(e,t){var r=n.componentsRegistry[e];return r?r[t]:i.noop}},{"./lib":657,"./plots/attributes":687}],765:[function(e,t,n){"use strict";function r(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function i(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}var s=e("../lib"),o=e("../plots/plots"),u=s.extendFlat,a=s.extendDeep;t.exports=function(e,t){e.framework&&e.framework.isPolar&&(e=e.framework.getConfig());var n,s=e.data,f=e.layout,c=a([],s),h=a({},f,r(t.tileClass));if(t.width&&(h.width=t.width),t.height&&(h.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){h.annotations=[];var p=Object.keys(h);for(n=0;n<p.length;n++)i(p[n])&&(h[p[n]].title="");for(n=0;n<c.length;n++){var d=c[n];d.showscale=!1,d.marker&&(d.marker.showscale=!1),"pie"===d.type&&(d.textposition="none")}}if(Array.isArray(t.annotations))for(n=0;n<t.annotations.length;n++)h.annotations.push(t.annotations[n]);var v=o.getSubplotIds(h,"gl3d");if(v.length){var m={};for("thumbnail"===t.tileClass&&(m={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<v.length;n++){var g=v[n];u(h[g].xaxis,m),u(h[g].yaxis,m),u(h[g].zaxis,m),h[g]._scene=null}}var y=document.createElement("div");t.tileClass&&(y.className=t.tileClass);var b={gd:y,td:y,layout:h,data:c,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1}};return"transparent"!==t.setBackground&&(b.config.setBackground=t.setBackground||"opaque"),b.gd.defaultLayout=r(t.tileClass),b}},{"../lib":657,"../plots/plots":749}],766:[function(e,t,n){"use strict";function r(e,t){return t=t||{},t.format=t.format||"png",new Promise(function(n,r){e._snapshotInProgress&&r(new Error("Snapshotting already in progress.")),s.isIE()&&"svg"!==t.format&&r(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),e._snapshotInProgress=!0;var u=i(e,t),f=t.filename||e.fn||"newplot";f+="."+t.format,u.then(function(t){return e._snapshotInProgress=!1,o(t,f)}).then(function(e){n(e)}).catch(function(t){e._snapshotInProgress=!1,r(t)})})}var i=e("../plot_api/to_image"),s=e("../lib"),o=e("./filesaver");t.exports=r},{"../lib":657,"../plot_api/to_image":682,"./filesaver":767}],767:[function(e,t,n){"use strict";var r=function(e,t){var n=document.createElement("a"),r="download"in n,i=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),s=new Promise(function(s,o){"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&o(new Error("IE < 10 unsupported")),i&&(document.location.href="data:application/octet-stream"+e.slice(e.search(/[,;]/)),s(t)),t||(t="download"),r&&(n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),s(t)),"undefined"!=typeof navigator&&navigator.msSaveBlob&&(navigator.msSaveBlob(new Blob([e]),t),s(t)),o(new Error("download error"))});return s};t.exports=r},{}],768:[function(e,t,n){"use strict";n.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d"))?500:0},n.getRedrawFunc=function(e){if(!(e.data&&e.data[0]&&e.data[0].r))return function(){(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()})}}},{}],769:[function(e,t,n){"use strict";var r=e("./helpers"),i={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=i},{"./cloneplot":765,"./download":766,"./helpers":768,"./svgtoimg":770,"./toimage":771,"./tosvg":772}],770:[function(e,t,n){"use strict";function r(e){var t=e.emitter||new s,n=new Promise(function(r,s){var o=window.Image,u=e.svg,a=e.format||"png";if(i.isIE()&&(u=u.replace(/"/gi,"'"),u=u.replace(/(\('#)(.*)('\))/gi,'("$2")'),u=u.replace(/(\\')/gi,'"'),"svg"!==a)){var f=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return s(f),e.promise?n:t.emit("error",f)}var l=e.canvas,c=l.getContext("2d"),h=new o,p="data:image/svg+xml,"+encodeURIComponent(u);l.height=e.height||150,l.width=e.width||300,h.onload=function(){var n;switch("svg"!==a&&c.drawImage(h,0,0),a){case"jpeg":n=l.toDataURL("image/jpeg");break;case"png":n=l.toDataURL("image/png");break;case"webp":n=l.toDataURL("image/webp");break;case"svg":n=p;break;default:if(s(new Error("Image format is not jpeg, png or svg")),!e.promise)return t.emit("error","Image format is not jpeg, png or svg")}r(n),e.promise||t.emit("success",n)},h.onerror=function(n){if(s(n),!e.promise)return t.emit("error",n)},h.src=p});return e.promise?n:t}var i=e("../lib"),s=e("events").EventEmitter;t.exports=r},{"../lib":657,events:104}],771:[function(e,t,n){"use strict";function r(e,t){function n(){var e=u.getDelay(p._fullLayout);setTimeout(function(){var e=f(p),n=document.createElement("canvas");n.id=o.randstr(),r=l({format:t.format,width:p._fullLayout.width,height:p._fullLayout.height,canvas:n,emitter:r,svg:e}),r.clean=function(){p&&document.body.removeChild(p)}},e)}var r=new i,h=a(e,{format:"png"}),p=h.gd;p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var d=u.getRedrawFunc(p);return s.plot(p,h.data,h.layout,h.config).then(d).then(n).catch(function(e){r.emit("error",e)}),r}var i=e("events").EventEmitter,s=e("../plotly"),o=e("../lib"),u=e("./helpers"),a=e("./cloneplot"),f=e("./tosvg"),l=e("./svgtoimg");t.exports=r},{"../lib":657,"../plotly":684,"./cloneplot":765,"./helpers":768,"./svgtoimg":770,"./tosvg":772,events:104}],772:[function(e,t,n){"use strict";var r=e("d3"),i=e("../lib/svg_text_utils"),s=e("../components/drawing"),o=e("../components/color"),u=e("../constants/xmlns_namespaces");t.exports=function(e,t){var n,f=e._fullLayout,l=f._paper,c=f._toppaper;l.insert("rect",":first-child").call(s.setRect,0,0,f.width,f.height).call(o.fill,f.paper_bgcolor);var h=f._basePlotModules||[];for(n=0;n<h.length;n++){var p=h[n];p.toSVG&&p.toSVG(e)}if(c){var d=c.node().childNodes,v=Array.prototype.slice.call(d);for(n=0;n<v.length;n++){var m=v[n];m.childNodes.length&&l.node().appendChild(m)}}f._draggers&&f._draggers.remove(),l.node().style.background="",l.selectAll("text").attr("data-unformatted",null).each(function(){var e=r.select(this);if("hidden"===e.style("visibility"))return void e.remove();e.style("visibility","visible");var t=e.style("font-family");t&&t.indexOf('"')!==-1&&e.style("font-family",t.replace(/"/g,"TOBESTRIPPED"))}),"pdf"!==t&&"eps"!==t||l.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),l.node().setAttributeNS(u.xmlns,"xmlns",u.svg),l.node().setAttributeNS(u.xmlns,"xmlns:xlink",u.xlink);var g=(new window.XMLSerializer).serializeToString(l.node());return g=i.html_entity_decode(g),g=i.xml_entity_encode(g),g=g.replace(/("TOBESTRIPPED)|(TOBESTRIPPED")/g,"'")}},{"../components/color":557,"../components/drawing":580,"../constants/xmlns_namespaces":642,"../lib/svg_text_utils":672,d3:97}],773:[function(e,t,n){"use strict";var r=e("../../lib").mergeArray;t.exports=function(e,t){r(t.text,e,"tx");var n=t.marker;if(n){r(n.opacity,e,"mo"),r(n.color,e,"mc");var i=n.line;i&&(r(i.color,e,"mlc"),r(i.width,e,"mlw"))}}},{"../../lib":657}],774:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../components/colorscale/color_attributes"),s=e("../../components/errorbars/attributes"),o=e("../../components/colorbar/attributes"),u=e("../../plots/font_attributes"),a=e("../../lib/extend").extendFlat,f=e("../../lib/extend").extendDeep,l=f({},u);l.family.arrayOk=!0,l.size.arrayOk=!0,l.color.arrayOk=!0;var c=r.marker,h=c.line,p=a({},h.width,{dflt:0}),d=a({},{width:p},i("marker.line")),v=a({},{line:d},i("marker"),{showscale:c.showscale,colorbar:o});t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0},textfont:a({},l,{}),insidetextfont:a({},l,{}),outsidetextfont:a({},l,{}),orientation:{valType:"enumerated",values:["v","h"]},base:{valType:"any",dflt:null,arrayOk:!0},offset:{valType:"number",dflt:null,arrayOk:!0},width:{valType:"number",dflt:null,min:0,arrayOk:!0},marker:v,r:r.r,t:r.t,error_y:s,error_x:s,_deprecated:{bardir:{valType:"enumerated",values:["v","h"]}}}},{"../../components/colorbar/attributes":558,"../../components/colorscale/color_attributes":564,"../../components/errorbars/attributes":582,"../../lib/extend":650,"../../plots/font_attributes":709,"../scatter/attributes":881}],775:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../plots/cartesian/axes"),s=e("../../components/colorscale/has_colorscale"),o=e("../../components/colorscale/calc"),u=e("./arrays_to_calcdata");t.exports=function(e,t){var n,f,l,c,h,p=i.getFromId(e,t.xaxis||"x"),d=i.getFromId(e,t.yaxis||"y"),v=t.orientation||(t.x&&!t.y?"h":"v");"h"===v?(n=p,l=p.makeCalcdata(t,"x"),f=d.makeCalcdata(t,"y"),h=t.xcalendar):(n=d,l=d.makeCalcdata(t,"y"),f=p.makeCalcdata(t,"x"),h=t.ycalendar);var m=Math.min(f.length,l.length),g=[];for(c=0;c<m;c++)r(f[c])&&g.push({p:f[c]});var y,b=t.base;if(Array.isArray(b)){for(c=0;c<Math.min(b.length,g.length);c++)y=n.d2c(b[c],0,h),g[c].b=r(y)?y:0;for(;c<g.length;c++)g[c].b=0}else for(y=n.d2c(b,0,h),y=r(y)?y:0,c=0;c<g.length;c++)g[c].b=y;for(c=0;c<g.length;c++)r(l[c])&&(g[c].s=l[c]);return s(t,"marker")&&o(t,t.marker.color,"marker","c"),s(t,"marker.line")&&o(t,t.marker.line.color,"marker.line","c"),u(g,t),g}},{"../../components/colorscale/calc":563,"../../components/colorscale/has_colorscale":570,"../../plots/cartesian/axes":689,"./arrays_to_calcdata":773,"fast-isnumeric":106}],776:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../components/color"),s=e("../scatter/xy_defaults"),o=e("../bar/style_defaults"),u=e("../../components/errorbars/defaults"),a=e("./attributes");t.exports=function(e,t,n,f){function c(n,i){return r.coerce(e,t,a,n,i)}var h=r.coerceFont,p=s(e,t,f,c);if(!p)return void (t.visible=!1);c("orientation",t.x&&!t.y?"h":"v"),c("base"),c("offset"),c("width"),c("text");var d=c("textposition"),v=Array.isArray(d)||"auto"===d,m=v||"inside"===d,g=v||"outside"===d;if(m||g){var y=h(c,"textfont",f.font);m&&h(c,"insidetextfont",y),g&&h(c,"outsidetextfont",y)}o(e,t,c,n,f),u(e,t,i.defaultLine,{axis:"y"}),u(e,t,i.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":557,"../../components/errorbars/defaults":585,"../../lib":657,"../bar/style_defaults":785,"../scatter/xy_defaults":903,"./attributes":774}],777:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/graph_interact"),i=e("../../components/errorbars"),s=e("../../components/color");t.exports=function(e,t,n,o){var u,f=e.cd,l=f[0].trace,c=f[0].t,h=e.xa,p=e.ya,d="closest"===o?c.barwidth/2:c.bargroupwidth/2;u="closest"!==o?function(e){return e.p}:"h"===l.orientation?function(e){return e.y}:function(e){return e.x};var v,m;"h"===l.orientation?(v=function(e){return r.inbox(e.b-t,e.x-t)+(e.x-t)/(e.x-e.b)},m=function(e){var t=u(e)-n;return r.inbox(t-d,t+d)}):(m=function(e){return r.inbox(e.b-n,e.y-n)+(e.y-n)/(e.y-e.b)},v=function(e){var n=u(e)-t;return r.inbox(n-d,n+d)});var g=r.getDistanceFunction(o,v,m);if(r.getClosest(f,g,e),e.index!==!1){var y=f[e.index],b=y.mcc||l.marker.color,w=y.mlcc||l.marker.line.color,E=y.mlw||l.marker.line.width;s.opacity(b)?e.color=b:s.opacity(w)&&E&&(e.color=w);var S=l.base?y.b+y.s:y.s;return"h"===l.orientation?(e.x0=e.x1=h.c2p(y.x,!0),e.xLabelVal=S,e.y0=p.c2p(u(y)-d,!0),e.y1=p.c2p(u(y)+d,!0),e.yLabelVal=y.p):(e.y0=e.y1=p.c2p(y.y,!0),e.yLabelVal=S,e.x0=h.c2p(u(y)-d,!0),e.x1=h.c2p(u(y)+d,!0),e.xLabelVal=y.p),y.tx&&(e.text=y.tx),i.hoverInfo(y,l,e),[e]}}},{"../../components/color":557,"../../components/errorbars":586,"../../plots/cartesian/graph_interact":696}],778:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.layoutAttributes=e("./layout_attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("./layout_defaults"),r.calc=e("./calc"),r.setPositions=e("./set_positions"),r.colorbar=e("../scatter/colorbar"),r.arraysToCalcdata=e("./arrays_to_calcdata"),r.plot=e("./plot"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.moduleType="trace",r.name="bar",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","bar","oriented","markerColorscale","errorBarsOK","showLegend"],r.meta={},t.exports=r},{"../../plots/cartesian":697,"../scatter/colorbar":884,"./arrays_to_calcdata":773,"./attributes":774,"./calc":775,"./defaults":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./set_positions":782,"./style":784}],779:[function(e,t,n){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:""},bargap:{valType:"number",min:0,max:1},bargroupgap:{valType:"number",min:0,max:1,dflt:0}}},{}],780:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../plots/cartesian/axes"),s=e("../../lib"),o=e("./layout_attributes");t.exports=function(e,t,n){function u(n,r){return s.coerce(e,t,o,n,r)}for(var f=!1,l=!1,c=!1,h={},p=0;p<n.length;p++){var d=n[p];if(r.traceIs(d,"bar")){if(f=!0,"overlay"!==e.barmode&&"stack"!==e.barmode){var v=d.xaxis+d.yaxis;h[v]&&(c=!0),h[v]=!0}if(d.visible&&"histogram"===d.type){var m=i.getFromId({_fullLayout:t},d["v"===d.orientation?"xaxis":"yaxis"]);"category"!==m.type&&(l=!0)}}}if(f){var g=u("barmode");"overlay"!==g&&u("barnorm"),u("bargap",l&&!c?0:.2),u("bargroupgap")}}},{"../../lib":657,"../../plots/cartesian/axes":689,"../../registry":764,"./layout_attributes":779}],781:[function(e,t,n){"use strict";function r(e,t,n,r,o,h,p,d){function v(e,t,n){var r=e.append("text").attr("data-notex",1).text(t).attr({"class":"bartext",transform:"","data-bb":"","text-anchor":"middle",x:0,y:0}).call(T.font,n);return r.call(S.convertToTspans),r.selectAll("tspan.line").attr({x:0,y:0}),r}var m=n[0].trace,g=m.orientation,y=u(m,r);if(y){var b=a(m,r);if("none"!==b){var w,E,x,N,C=f(m,r,e._fullLayout.font),k=l(m,r,C),L=c(m,r,C),A=e._fullLayout.barmode,O="stack"===A,M="relative"===A,D=O||M,P=n[r],H=!D||P._outmost,B=Math.abs(h-o)-2*_,j=Math.abs(d-p)-2*_;if("outside"===b&&(H||(b="inside")),"auto"===b)if(H){w=v(t,y,k),E=T.bBox(w.node()),x=E.width,N=E.height;var F=x>0&&N>0,I=x<=B&&N<=j,q=x<=j&&N<=B,R="h"===g?B>=x*(j/N):j>=N*(B/x);F&&(I||q||R)?b="inside":(b="outside",w.remove(),w=null)}else b="inside";if(!w&&(w=v(t,y,"outside"===b?L:k),E=T.bBox(w.node()),x=E.width,N=E.height,x<=0||N<=0))return void w.remove();var U;U="outside"===b?s(o,h,p,d,E,g):i(o,h,p,d,E,g),w.attr("transform",U)}}}function i(e,t,n,r,i,s){var u,a,f,l,c,h=i.width,p=i.height,d=(i.left+i.right)/2,v=(i.top+i.bottom)/2,m=Math.abs(t-e),g=Math.abs(r-n);m>2*_&&g>2*_?(c=_,m-=2*c,g-=2*c):c=0;var y,b;return h<=m&&p<=g?(y=!1,b=1):h<=g&&p<=m?(y=!0,b=1):h<p==m<g?(y=!1,b=Math.min(m/h,g/p)):(y=!0,b=Math.min(g/h,m/p)),y&&(y=90),y?(u=b*p,a=b*h):(u=b*h,a=b*p),"h"===s?t<e?(f=t+c+u/2,l=(n+r)/2):(f=t-c-u/2,l=(n+r)/2):r>n?(f=(e+t)/2,l=r-c-a/2):(f=(e+t)/2,l=r+c+a/2),o(d,v,f,l,b,y)}function s(e,t,n,r,i,s){var u,a="h"===s?Math.abs(r-n):Math.abs(t-e);a>2*_&&(u=_,a-=2*u);var f,l,c,h,p=!1,d="h"===s?Math.min(1,a/i.height):Math.min(1,a/i.width),v=(i.left+i.right)/2,m=(i.top+i.bottom)/2;return p?(f=d*i.height,l=d*i.width):(f=d*i.width,l=d*i.height),"h"===s?t<e?(c=t-u-f/2,h=(n+r)/2):(c=t+u+f/2,h=(n+r)/2):r>n?(c=(e+t)/2,h=r+u+l/2):(c=(e+t)/2,h=r-u-l/2),o(v,m,c,h,d,p)}function o(e,t,n,r,i,s){var o,u,a;i<1?o="scale("+i+") ":(i=1,o=""),u=s?"rotate("+s+" "+e+" "+t+") ":"";var f=n-i*e,l=r-i*t;return a="translate("+f+" "+l+")",a+o+u}function u(e,t){var n=p(e.text,t);return d(k,n)}function a(e,t){var n=p(e.textposition,t);return v(L,n)}function f(e,t,n){return h(A,e.textfont,t,n)}function l(e,t,n){return h(O,e.insidetextfont,t,n)}function c(e,t,n){return h(M,e.outsidetextfont,t,n)}function h(e,t,n,r){t=t||{};var i=p(t.family,n),s=p(t.size,n),o=p(t.color,n);return{family:d(e.family,i,r.family),size:m(e.size,s,r.size),color:g(e.color,o,r.color)}}function p(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n}function d(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if("number"==typeof t&&!e.strict)return String(t);return void 0!==n?n:e.dflt}function v(e,t,n){return e.coerceNumber&&(t=+t),e.values.indexOf(t)!==-1?t:void 0!==n?n:e.dflt}function m(e,t,n){if(b(t)){t=+t;var r=e.min,i=e.max,s=void 0!==r&&t<r||void 0!==i&&t>i;if(!s)return t}return void 0!==n?n:e.dflt}function g(e,t,n){return w(t).isValid()?t:void 0!==n?n:e.dflt}var y=e("d3"),b=e("fast-isnumeric"),w=e("tinycolor2"),E=e("../../lib"),S=e("../../lib/svg_text_utils"),x=e("../../components/color"),T=e("../../components/drawing"),N=e("../../components/errorbars"),C=e("./attributes"),k=C.text,L=C.textposition,A=C.textfont,O=C.insidetextfont,M=C.outsidetextfont,_=3;t.exports=function(e,t,n){var i=t.xaxis,s=t.yaxis,o=e._fullLayout,u=t.plot.select(".barlayer").selectAll("g.trace.bars").data(n).enter().append("g").attr("class","trace bars");u.append("g").attr("class","points").each(function(t){var n=t[0].t,u=t[0].trace,a=n.poffset,f=Array.isArray(a),l=n.barwidth,c=Array.isArray(l);y.select(this).selectAll("g.point").data(E.identity).enter().append("g").classed("point",!0).each(function(n,h){function p(e){return 0===o.bargap&&0===o.bargroupgap?y.round(Math.round(e)-k,2):e}function d(e,t){return Math.abs(e-t)>=2?p(e):e>t?Math.ceil(e):Math.floor(e)}var v,m,g,w,E=n.p+(f?a[h]:a),S=E+(c?l[h]:l),T=n.b,N=T+n.s;if("h"===u.orientation?(g=s.c2p(E,!0),w=s.c2p(S,!0),v=i.c2p(T,!0),m=i.c2p(N,!0)):(v=i.c2p(E,!0),m=i.c2p(S,!0),g=s.c2p(T,!0),w=s.c2p(N,!0)),!(b(v)&&b(m)&&b(g)&&b(w)&&v!==m&&g!==w))return void y.select(this).remove();var C=(n.mlw+1||u.marker.line.width+1||(n.trace?n.trace.marker.line.width:0)+1)-1,k=y.round(C/2%1,2);if(!e._context.staticPlot){var L=x.opacity(n.mc||u.marker.color),A=L<1||C>.01?p:d;v=A(v,m),m=A(m,v),g=A(g,w),w=A(w,g)}var O=y.select(this);O.append("path").attr("d","M"+v+","+g+"V"+w+"H"+m+"V"+g+"Z"),r(e,O,t,h,v,m,g,w)})}),u.call(N.plot,t)}},{"../../components/color":557,"../../components/drawing":580,"../../components/errorbars":586,"../../lib":657,"../../lib/svg_text_utils":672,"./attributes":774,d3:97,"fast-isnumeric":106,tinycolor2:495}],782:[function(e,t,n){"use strict";function r(e,t,n,r){if(r.length){var u,a,f,l,c,h=e._fullLayout.barmode,p="overlay"===h,d="group"===h;if(p)i(e,t,n,r);else if(d){for(u=[],a=[],f=0;f<r.length;f++)l=r[f],c=l[0].trace,void 0===c.offset?a.push(l):u.push(l);a.length&&s(e,t,n,a),u.length&&i(e,t,n,u)}else{for(u=[],a=[],f=0;f<r.length;f++)l=r[f],c=l[0].trace,void 0===c.base?a.push(l):u.push(l);a.length&&o(e,t,n,a),u.length&&i(e,t,n,u)}}}function i(e,t,n,r){for(var i=e._fullLayout.barnorm,s=!1,o=!i,a=0;a<r.length;a++){var f=r[a],l=new w([f],s,o);u(e,t,l),i?(d(e,n,l),v(e,n,l)):h(e,n,l)}}function s(e,t,n,r){var i=e._fullLayout,s=i.barnorm,o=!1,u=!s,f=new w(r,o,u);a(e,t,f),s?(d(e,n,f),v(e,n,f)):h(e,n,f)}function o(e,t,n,r){var i=e._fullLayout,s=i.barmode,o="stack"===s,a="relative"===s,f=e._fullLayout.barnorm,l=a,c=!(f||o||a),h=new w(r,l,c);u(e,t,h),p(e,n,h);for(var d=0;d<r.length;d++)for(var m=r[d],y=0;y<m.length;y++){var b=m[y];if(g(b.s)){var E=b.b+b.s===h.get(b.p,b.s);E&&(b._outmost=!0)}}f&&v(e,n,h)}function u(e,t,n){var r,i,s,o,u=e._fullLayout,a=u.bargap,h=u.bargroupgap,p=n.minDiff,d=n.traces,v=p*(1-a),m=v,g=m*(1-h),y=-g/2;for(r=0;r<d.length;r++)i=d[r],s=i[0],o=s.t,o.barwidth=g,o.poffset=y,o.bargroupwidth=v;n.binWidth=d[0][0].t.barwidth/100,f(n),l(e,t,n),c(e,t,n)}function a(e,t,n){var r,i,s,o,u=e._fullLayout,a=u.bargap,h=u.bargroupgap,p=n.positions,d=n.distinctPositions,v=n.minDiff,m=n.traces,g=p.length!==d.length,y=m.length,b=v*(1-a),w=g?b/y:b,E=w*(1-h);for(r=0;r<y;r++){i=m[r],s=i[0];var S=g?((2*r+1-y)*w-E)/2:-E/2;o=s.t,o.barwidth=E,o.poffset=S,o.bargroupwidth=b}n.binWidth=m[0][0].t.barwidth/100,f(n),l(e,t,n),c(e,t,n,g)}function f(e){var t,n,r,i,s,o,u=e.traces;for(t=0;t<u.length;t++){n=u[t],r=n[0],i=r.trace,o=r.t;var a,f=i.offset,l=o.poffset;if(Array.isArray(f)){for(a=f.slice(0,n.length),s=0;s<a.length;s++)g(a[s])||(a[s]=l);for(s=a.length;s<n.length;s++)a.push(l);o.poffset=a}else void 0!==f&&(o.poffset=f);var c=i.width,h=o.barwidth;if(Array.isArray(c)){var p=c.slice(0,n.length);for(s=0;s<p.length;s++)g(p[s])||(p[s]=h);for(s=p.length;s<n.length;s++)p.push(h);if(o.barwidth=p,void 0===f){for(a=[],s=0;s<n.length;s++)a.push(l+(h-p[s])/2);o.poffset=a}}else void 0!==c&&(o.barwidth=c,void 0===f&&(o.poffset=l+(h-c)/2))}}function l(e,t,n){for(var r=n.traces,i=m(t),s=0;s<r.length;s++)for(var o=r[s],u=o[0].t,a=u.poffset,f=Array.isArray(a),l=u.barwidth,c=Array.isArray(l),h=0;h<o.length;h++){var p=o[h];p[i]=p.p+(f?a[h]:a)+(c?l[h]:l)/2}}function c(e,t,n,r){var i=n.traces,s=n.distinctPositions,o=s[0],u=n.minDiff,a=u/2;b.minDtick(t,u,o,r);for(var f=Math.min.apply(Math,s)-a,l=Math.max.apply(Math,s)+a,c=0;c<i.length;c++){var h=i[c],p=h[0],d=p.trace;if(void 0!==d.width||void 0!==d.offset)for(var v=p.t,m=v.poffset,g=v.barwidth,y=Array.isArray(m),w=Array.isArray(g),E=0;E<h.length;E++){var S=h[E],T=y?m[E]:m,N=w?g[E]:g,C=S.p,k=C+T,L=k+N;f=Math.min(f,k),l=Math.max(l,L)}}b.expand(t,[f,l],{padded:!1})}function h(e,t,n){for(var r=n.traces,i=m(t),s=t.l2c(t.c2l(0)),o=s,u=0;u<r.length;u++)for(var a=r[u],f=0;f<a.length;f++){var l=a[f],c=l.b,h=c+l.s;l[i]=h,g(t.c2l(h))&&(s=Math.max(s,h),o=Math.min(o,h)),g(t.c2l(c))&&(s=Math.max(s,c),o=Math.min(o,c))}b.expand(t,[o,s],{tozero:!0,padded:!0})}function p(e,t,n){var r,i,s,o,u=e._fullLayout,a=u.barnorm,f=m(t),l=n.traces,c=t.l2c(t.c2l(0)),h=c;for(r=0;r<l.length;r++)for(i=l[r],s=0;s<i.length;s++)if(o=i[s],g(o.s)){var p=n.put(o.p,o.b+o.s),d=p+o.b+o.s;o.b=p,o[f]=d,a||(g(t.c2l(d))&&(c=Math.max(c,d),h=Math.min(h,d)),g(t.c2l(p))&&(c=Math.max(c,p),h=Math.min(h,p)))}a||b.expand(t,[h,c],{tozero:!0,padded:!0})}function d(e,t,n){for(var r=n.traces,i=0;i<r.length;i++)for(var s=r[i],o=0;o<s.length;o++){var u=s[o];g(u.s)&&n.put(u.p,u.b+u.s)}}function v(e,t,n){for(var r=n.traces,i=m(t),s="fraction"===e._fullLayout.barnorm?1:100,o=s/1e9,u=0,a="stack"===e._fullLayout.barmode?s:0,f=!1,l=0;l<r.length;l++)for(var c=r[l],h=0;h<c.length;h++){var p=c[h];if(g(p.s)){var d=Math.abs(s/n.get(p.p,p.s));p.b*=d,p.s*=d;var v=p.b,y=v+p.s;p[i]=y,g(t.c2l(y))&&(y<u-o&&(f=!0,u=y),y>a+o&&(f=!0,a=y)),g(t.c2l(v))&&(v<u-o&&(f=!0,u=v),v>a+o&&(f=!0,a=v))}}b.expand(t,[u,a],{tozero:!0,padded:f})}function m(e){return e._id.charAt(0)}var g=e("fast-isnumeric"),y=e("../../registry"),b=e("../../plots/cartesian/axes"),w=e("./sieve.js");t.exports=function(e,t){var n,i=t.xaxis,s=t.yaxis,o=e._fullData,u=e.calcdata,a=[],f=[];for(n=0;n<o.length;n++){var l=o[n];l.visible===!0&&y.traceIs(l,"bar")&&l.xaxis===i._id&&l.yaxis===s._id&&("h"===l.orientation?a.push(u[n]):f.push(u[n]))}r(e,i,s,f),r(e,s,i,a)}},{"../../plots/cartesian/axes":689,"../../registry":764,"./sieve.js":783,"fast-isnumeric":106}],783:[function(e,t,n){"use strict";function r(e,t,n){this.traces=e,this.separateNegativeValues=t,this.dontMergeOverlappingData=n;for(var r=[],s=0;s<e.length;s++)for(var o=e[s],u=0;u<o.length;u++){var a=o[u];r.push(a.p)}this.positions=r;var f=i.distinctVals(this.positions);this.distinctPositions=f.vals,this.minDiff=f.minDiff,this.binWidth=this.minDiff,this.bins={}}t.exports=r;var i=e("../../lib");r.prototype.put=function(e,t){var n=this.getLabel(e,t),r=this.bins[n]||0;return this.bins[n]=r+t,r},r.prototype.get=function(e,t){var n=this.getLabel(e,t);return this.bins[n]||0},r.prototype.getLabel=function(e,t){var n=t<0&&this.separateNegativeValues?"v":"^",r=this.dontMergeOverlappingData?e:Math.round(e/this.binWidth);return n+r}},{"../../lib":657}],784:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/color"),s=e("../../components/drawing"),o=e("../../components/errorbars");t.exports=function(e){var t=r.select(e).selectAll("g.trace.bars"),n=t.size(),u=e._fullLayout;t.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===u.barmode&&n>1||0===u.bargap&&0===u.bargroupgap&&!e[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")}),t.selectAll("g.points").each(function(e){var t=e[0].trace,n=t.marker,o=n.line,u=s.tryColorscale(n,""),f=s.tryColorscale(n,"line");r.select(this).selectAll("path").each(function(e){var t,s,a=(e.mlw+1||o.width+1)-1,c=r.select(this);t="mc"in e?e.mcc=u(e.mc):Array.isArray(n.color)?i.defaultLine:n.color,c.style("stroke-width",a+"px").call(i.fill,t),a&&(s="mlc"in e?e.mlcc=f(e.mlc):Array.isArray(o.color)?i.defaultLine:o.color,c.call(i.stroke,s))})}),t.call(o.style)}},{"../../components/color":557,"../../components/drawing":580,"../../components/errorbars":586,d3:97}],785:[function(e,t,n){"use strict";var r=e("../../components/color"),i=e("../../components/colorscale/has_colorscale"),s=e("../../components/colorscale/defaults");t.exports=function(e,t,n,o,u){n("marker.color",o),i(e,"marker")&&s(e,t,u,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",r.defaultLine),i(e,"marker.line")&&s(e,t,u,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width")}},{"../../components/color":557,"../../components/colorscale/defaults":566,"../../components/colorscale/has_colorscale":570}],786:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../components/color/attributes"),s=e("../../lib/extend").extendFlat,o=r.marker,u=o.line;t.exports={y:{valType:"data_array"},x:{valType:"data_array"},x0:{valType:"any"},y0:{valType:"any"},xcalendar:r.xcalendar,ycalendar:r.ycalendar,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],dflt:"outliers"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],dflt:!1},jitter:{valType:"number",min:0,max:1},pointpos:{valType:"number",min:-2,max:2},orientation:{valType:"enumerated",values:["v","h"]},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)"},symbol:s({},o.symbol,{arrayOk:!1}),opacity:s({},o.opacity,{arrayOk:!1,dflt:1}),size:s({},o.size,{arrayOk:!1}),color:s({},o.color,{arrayOk:!1}),line:{color:s({},u.color,{arrayOk:!1,dflt:i.defaultLine}),width:s({},u.width,{arrayOk:!1,dflt:0}),outliercolor:{valType:"color"},outlierwidth:{valType:"number",min:0,dflt:1}}},line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:2}},fillcolor:r.fillcolor}},{"../../components/color/attributes":556,"../../lib/extend":650,"../scatter/attributes":881}],787:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("../../plots/cartesian/axes");t.exports=function(e,t){function n(e,t,n,s,o){var u;return n in t?v=s.makeCalcdata(t,n):(u=n+"0"in t?t[n+"0"]:"name"in t&&("category"===s.type||r(t.name)&&["linear","log"].indexOf(s.type)!==-1||i.isDateTime(t.name)&&"date"===s.type)?t.name:e.numboxes,u=s.d2c(u,0,t[n+"calendar"]),v=o.map(function(){return u})),v}function o(e,t,n,s,o){var u,a,f,l,c=s.length,h=t.length,p=[],d=[];for(u=0;u<c;++u)a=s[u],e[u]={pos:a},d[u]=a-o,p[u]=[];for(d.push(s[c-1]+o),u=0;u<h;++u)l=t[u],r(l)&&(f=i.findBin(n[u],d),f>=0&&f<h&&p[f].push(l));return p}function u(e,t){var n,r,s,o;for(o=0;o<t.length;++o)n=t[o].sort(i.sorterAsc),r=n.length,s=e[o],s.val=n,s.min=n[0],s.max=n[r-1],s.mean=i.mean(n,r),s.sd=i.stdev(n,r,s.mean),s.q1=i.interp(n,.25),s.med=i.interp(n,.5),s.q3=i.interp(n,.75),s.lf=Math.min(s.q1,n[Math.min(i.findBin(2.5*s.q1-1.5*s.q3,n,!0)+1,r-1)]),s.uf=Math.max(s.q3,n[Math.max(i.findBin(2.5*s.q3-1.5*s.q1,n),0)]),s.lo=4*s.q1-3*s.q3,s.uo=4*s.q3-3*s.q1}var f,l,c,h,p,d,v,m,g,y=s.getFromId(e,t.xaxis||"x"),b=s.getFromId(e,t.yaxis||"y"),w=t.orientation,E=[];"h"===w?(f=y,l="x",p=b,d="y"):(f=b,l="y",p=y,d="x"),c=f.makeCalcdata(t,l),s.expand(f,c,{padded:!0}),v=n(e,t,d,p,c);var S=i.distinctVals(v);return m=S.vals,g=S.minDiff/2,h=o(E,c,v,m,g),u(E,h),E=E.filter(function(e){return e.val&&e.val.length}),E.length?(E[0].t={boxnum:e.numboxes,dPos:g},e.numboxes++,E):[{t:{emptybox:!0}}]}},{"../../lib":657,"../../plots/cartesian/axes":689,"fast-isnumeric":106}],788:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../registry"),s=e("../../components/color"),o=e("./attributes");t.exports=function(e,t,n,u){function f(n,i){return r.coerce(e,t,o,n,i)}var l,c=f("y"),h=f("x");if(c&&c.length)l="v",h||f("x0");else{if(!h||!h.length)return void (t.visible=!1);l="h",f("y0")}var p=i.getComponentMethod("calendars","handleTraceDefaults");p(e,t,["x","y"],u),f("orientation",l),f("line.color",(e.marker||{}).color||n),f("line.width",2),f("fillcolor",s.addOpacity(t.line.color,.5)),f("whiskerwidth"),f("boxmean");var d=r.coerce2(e,t,o,"marker.outliercolor"),v=f("marker.line.outliercolor"),m=d||v?f("boxpoints","suspectedoutliers"):f("boxpoints");m&&(f("jitter","all"===m?.3:0),f("pointpos","all"===m?-1.5:0),f("marker.symbol"),f("marker.opacity"),f("marker.size"),f("marker.color",t.line.color),f("marker.line.color"),f("marker.line.width"),"suspectedoutliers"===m&&(f("marker.line.outliercolor",t.marker.color),f("marker.line.outlierwidth")))}},{"../../components/color":557,"../../lib":657,"../../registry":764,"./attributes":786}],789:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),i=e("../../plots/cartesian/graph_interact"),s=e("../../lib"),o=e("../../components/color");t.exports=function(e,t,n,u){var f,l,c,h,p,d,v,m,g,y=e.cd,b=y[0].trace,w=y[0].t,E=e.xa,S=e.ya,x=[];if(h="closest"===u?2.5*w.bdPos:w.bdPos,"h"===b.orientation?(f=function(e){return i.inbox(e.min-t,e.max-t)},l=function(e){var t=e.pos+w.bPos-n;return i.inbox(t-h,t+h)},p="y",d=S,m="x",g=E):(f=function(e){var n=e.pos+w.bPos-t;return i.inbox(n-h,n+h)},l=function(e){return i.inbox(e.min-n,e.max-n)},p="x",d=E,m="y",g=S),c=i.getDistanceFunction(u,f,l),i.getClosest(y,c,e),e.index!==!1){var T=y[e.index],N=b.line.color,C=(b.marker||{}).color;o.opacity(N)&&b.line.width?e.color=N:o.opacity(C)&&b.boxpoints?e.color=C:e.color=b.fillcolor,e[p+"0"]=d.c2p(T.pos+w.bPos-w.bdPos,!0),e[p+"1"]=d.c2p(T.pos+w.bPos+w.bdPos,!0),r.tickText(d,d.c2l(T.pos),"hover").text,e[p+"LabelVal"]=T.pos;var k,L,A={},O=["med","min","q1","q3","max"];b.boxmean&&O.push("mean"),b.boxpoints&&[].push.apply(O,["lf","uf"]);for(var M=0;M<O.length;M++)k=O[M],k in T&&!(T[k]in A)&&(A[T[k]]=!0,v=g.c2p(T[k],!0),L=s.extendFlat({},e),L[m+"0"]=L[m+"1"]=v,L[m+"LabelVal"]=T[k],L.attr=k,"mean"===k&&"sd"in T&&"sd"===b.boxmean&&(L[m+"err"]=T.sd),e.name="",x.push(L));return x}}},{"../../components/color":557,"../../lib":657,"../../plots/cartesian/axes":689,"../../plots/cartesian/graph_interact":696}],790:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.layoutAttributes=e("./layout_attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("./layout_defaults"),r.calc=e("./calc"),r.setPositions=e("./set_positions"),r.plot=e("./plot"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.moduleType="trace",r.name="box",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","symbols","oriented","box","showLegend"],r.meta={},t.exports=r},{"../../plots/cartesian":697,"./attributes":786,"./calc":787,"./defaults":788,"./hover":789,"./layout_attributes":791,"./layout_defaults":792,"./plot":793,"./set_positions":794,"./style":795}],791:[function(e,t,n){"use strict";t.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay"},boxgap:{valType:"number",min:0,max:1,dflt:.3},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3}}},{}],792:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../lib"),s=e("./layout_attributes");t.exports=function(e,t,n){function o(n,r){return i.coerce(e,t,s,n,r)}for(var u,f=0;f<n.length;f++)if(r.traceIs(n[f],"box")){u=!0;break}u&&(o("boxmode"),o("boxgap"),o("boxgroupgap"))}},{"../../lib":657,"../../registry":764,"./layout_attributes":791}],793:[function(e,t,n){"use strict";function r(){a=2e9}function i(){var e=a;return a=(69069*a+1)%4294967296,Math.abs(a-e)<429496729?i():a/4294967296}var s=e("d3"),o=e("../../lib"),u=e("../../components/drawing"),a=2e9,f=5,l=.01;t.exports=function(e,t,n){var a,h,p=e._fullLayout,d=t.xaxis,v=t.yaxis,m=t.plot.select(".boxlayer").selectAll("g.trace.boxes").data(n).enter().append("g").attr("class","trace boxes");m.each(function(t){var n=t[0].t,m=t[0].trace,g="group"===p.boxmode&&e.numboxes>1,y=n.dPos*(1-p.boxgap)*(1-p.boxgroupgap)/(g?e.numboxes:1),b=g?2*n.dPos*(-0.5+(n.boxnum+.5)/e.numboxes)*(1-p.boxgap):0,w=y*m.whiskerwidth;return m.visible!==!0||n.emptybox?void s.select(this).remove():("h"===m.orientation?(a=v,h=d):(a=d,h=v),n.bPos=b,n.bdPos=y,r(),s.select(this).selectAll("path.box").data(o.identity).enter().append("path").attr("class","box").each(function(e){var t=a.c2p(e.pos+b,!0),n=a.c2p(e.pos+b-y,!0),r=a.c2p(e.pos+b+y,!0),i=a.c2p(e.pos+b-w,!0),u=a.c2p(e.pos+b+w,!0),f=h.c2p(e.q1,!0),l=h.c2p(e.q3,!0),c=o.constrain(h.c2p(e.med,!0),Math.min(f,l)+1,Math.max(f,l)-1),p=h.c2p(m.boxpoints===!1?e.min:e.lf,!0),d=h.c2p(m.boxpoints===!1?e.max:e.uf,!0);"h"===m.orientation?s.select(this).attr("d","M"+c+","+n+"V"+r+"M"+f+","+n+"V"+r+"H"+l+"V"+n+"ZM"+f+","+t+"H"+p+"M"+l+","+t+"H"+d+(0===m.whiskerwidth?"":"M"+p+","+i+"V"+u+"M"+d+","+i+"V"+u)):s.select(this).attr("d","M"+n+","+c+"H"+r+"M"+n+","+f+"H"+r+"V"+l+"H"+n+"ZM"+t+","+f+"V"+p+"M"+t+","+l+"V"+d+(0===m.whiskerwidth?"":"M"+i+","+p+"H"+u+"M"+i+","+d+"H"+u))}),m.boxpoints&&s.select(this).selectAll("g.points").data(function(e){return e.forEach(function(e){e.t=n,e.trace=m}),e}).enter().append("g").attr("class","points").selectAll("path").data(function(e){var t,n,r,s,u,a,h,p="all"===m.boxpoints?e.val:e.val.filter(function(t){return t<e.lf||t>e.uf}),d=Math.max((e.max-e.min)/10,e.q3-e.q1),v=1e-9*d,g=d*l,w=[],E=0;if(m.jitter){if(0===d)for(E=1,w=new Array(p.length),t=0;t<p.length;t++)w[t]=1;else for(t=0;t<p.length;t++)n=Math.max(0,t-f),s=p[n],r=Math.min(p.length-1,t+f),u=p[r],"all"!==m.boxpoints&&(p[t]<e.lf?u=Math.min(u,e.lf):s=Math.max(s,e.uf)),a=Math.sqrt(g*(r-n)/(u-s+v))||0,a=o.constrain(Math.abs(a),0,1),w.push(a),E=Math.max(a,E);h=2*m.jitter/E}return p.map(function(t,n){var r,s=m.pointpos;return m.jitter&&(s+=h*w[n]*(i()-.5)),r="h"===m.orientation?{y:e.pos+s*y+b,x:t}:{x:e.pos+s*y+b,y:t},"suspectedoutliers"===m.boxpoints&&t<e.uo&&t>e.lo&&(r.so=!0),r})}).enter().append("path").call(u.translatePoints,d,v),void (m.boxmean&&s.select(this).selectAll("path.mean").data(o.identity).enter().append("path").attr("class","mean").style("fill","none").each(function(e){var t=a.c2p(e.pos+b,!0),n=a.c2p(e.pos+b-y,!0),r=a.c2p(e.pos+b+y,!0),i=h.c2p(e.mean,!0),o=h.c2p(e.mean-e.sd,!0),u=h.c2p(e.mean+e.sd,!0);"h"===m.orientation?s.select(this).attr("d","M"+i+","+n+"V"+r+("sd"!==m.boxmean?"":"m0,0L"+o+","+t+"L"+i+","+n+"L"+u+","+t+"Z")):s.select(this).attr("d","M"+n+","+i+"H"+r+("sd"!==m.boxmean?"":"m0,0L"+t+","+o+"L"+n+","+i+"L"+t+","+u+"Z"))})))})}},{"../../components/drawing":580,"../../lib":657,d3:97}],794:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../plots/cartesian/axes"),s=e("../../lib");t.exports=function(e,t){var n,o,u,f,l=e._fullLayout,c=t.xaxis,h=t.yaxis,p=["v","h"];for(o=0;o<p.length;++o){var d,v,m,g=p[o],y=[],b=[],w=0,E=0;for(n="h"===g?h:c,u=0;u<e.calcdata.length;++u)d=e.calcdata[u],v=d[0].t,m=d[0].trace,m.visible===!0&&r.traceIs(m,"box")&&!v.emptybox&&m.orientation===g&&m.xaxis===c._id&&m.yaxis===h._id&&(y.push(u),m.boxpoints!==!1&&(w=Math.max(w,m.jitter-m.pointpos-1),E=Math.max(E,m.jitter+m.pointpos-1)));for(u=0;u<y.length;u++)for(d=e.calcdata[y[u]],f=0;f<d.length;f++)b.push(d[f].pos);if(b.length){var S=s.distinctVals(b),x=S.minDiff/2;for(b.length===S.vals.length&&(e.numboxes=1),i.minDtick(n,S.minDiff,S.vals[0],!0),o=0;o<y.length;o++){var T=y[o];e.calcdata[T][0].t.dPos=x}var N=(1-l.boxgap)*(1-l.boxgroupgap)*x/e.numboxes;i.expand(n,S.vals,{vpadminus:x+w*N,vpadplus:x+E*N})}}}},{"../../lib":657,"../../plots/cartesian/axes":689,"../../registry":764}],795:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/color"),s=e("../../components/drawing");t.exports=function(e){var t=r.select(e).selectAll("g.trace.boxes");t.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){var t=e[0].trace,n=t.line.width;r.select(this).selectAll("path.box").style("stroke-width",n+"px").call(i.stroke,t.line.color).call(i.fill,t.fillcolor),r.select(this).selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(i.stroke,t.line.color),r.select(this).selectAll("g.points path").call(s.pointStyle,t)})}},{"../../components/color":557,"../../components/drawing":580,d3:97}],796:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../ohlc/attributes"),s=e("../box/attributes"),o={name:i.increasing.name,showlegend:i.increasing.showlegend,line:{color:r.extendFlat({},s.line.color),width:r.extendFlat({},s.line.width)},fillcolor:r.extendFlat({},s.fillcolor)};t.exports={x:i.x,open:i.open,high:i.high,low:i.low,close:i.close,line:{width:r.extendFlat({},s.line.width,{})},increasing:r.extendDeep({},o,{line:{color:{dflt:i.increasing.line.color.dflt}}}),decreasing:r.extendDeep({},o,{line:{color:{dflt:i.decreasing.line.color.dflt}}}),text:i.text,whiskerwidth:r.extendFlat({},s.whiskerwidth,{dflt:0})}},{"../../lib":657,"../box/attributes":786,"../ohlc/attributes":858}],797:[function(e,t,n){"use strict";function r(e,t,n,r){o(e,t,n,r),n(r+".line.color"),n(r+".line.width",t.line.width),n(r+".fillcolor")}var i=e("../../lib"),s=e("../ohlc/ohlc_defaults"),o=e("../ohlc/direction_defaults"),u=e("../ohlc/helpers"),a=e("./attributes");t.exports=function(e,t,n,o){function f(n,r){return i.coerce(e,t,a,n,r)}u.pushDummyTransformOpts(e,t);var c=s(e,t,f,o);return 0===c?void (t.visible=!1):(f("line.width"),r(e,t,f,"increasing"),r(e,t,f,"decreasing"),f("text"),void f("whiskerwidth"))}},{"../../lib":657,"../ohlc/direction_defaults":860,"../ohlc/helpers":861,"../ohlc/ohlc_defaults":863,"./attributes":796}],798:[function(e,t,n){"use strict";var r=e("../../plot_api/register");t.exports={moduleType:"trace",name:"candlestick",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","showLegend"],meta:{},attributes:e("./attributes"),supplyDefaults:e("./defaults")},r(e("../box")),r(e("./transform"))},{"../../plot_api/register":679,"../../plots/cartesian":697,"../box":790,"./attributes":796,"./defaults":797,"./transform":799}],799:[function(e,t,n){"use strict";function r(e,t,n){var r={type:"box",boxpoints:!1,visible:e.visible,hoverinfo:e.hoverinfo,opacity:e.opacity,xaxis:e.xaxis,yaxis:e.yaxis,transforms:s.makeTransform(e,t,n)},o=e[n];return o&&i.extendFlat(r,{x:e.x||[0],xcalendar:e.xcalendar,y:[].concat(e.low).concat(e.high),whiskerwidth:e.whiskerwidth,text:e.text,name:o.name,showlegend:o.showlegend,line:o.line,fillcolor:o.fillcolor}),r}var i=e("../../lib"),s=e("../ohlc/helpers");n.moduleType="transform",n.name="candlestick",n.attributes={},n.supplyDefaults=function(e,t,n,r){return s.clearEphemeralTransformOpts(r),s.copyOHLC(e,t),e},n.transform=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i];"candlestick"===o.type?n.push(r(o,t,"increasing"),r(o,t,"decreasing")):n.push(o)}return s.addRangeSlider(t.layout),n},n.calcTransform=function(e,t,n){for(var r=n.direction,i=s.getFilterFn(r),o=t.open,u=t.high,f=t.low,l=t.close,c=o.length,h=[],p=[],d=t._fullInput.x?function(e){var n=t.x[e];h.push(n,n,n,n,n,n)}:function(e){h.push(e,e,e,e,e,e)},v=function(e,t,n,r){p.push(n,e,r,r,r,t)},m=0;m<c;m++)i(o[m],l[m])&&(d(m),v(o[m],u[m],f[m],l[m]));t.x=h,t.y=p}},{"../../lib":657,"../ohlc/helpers":861}],800:[function(e,t,n){"use strict";var r=e("../scattergeo/attributes"),i=e("../../components/colorscale/attributes"),s=e("../../components/colorbar/attributes"),o=e("../../plots/attributes"),u=e("../../lib/extend").extendFlat,a=r.marker.line;t.exports=u({},{locations:{valType:"data_array"},locationmode:r.locationmode,z:{valType:"data_array"},text:{valType:"data_array"},marker:{line:{color:a.color,width:a.width}},hoverinfo:u({},o.hoverinfo,{flags:["location","z","text","name"]})},i,{colorbar:s})},{"../../components/colorbar/attributes":558,"../../components/colorscale/attributes":562,"../../lib/extend":650,"../../plots/attributes":687,"../scattergeo/attributes":910}],801:[function(e,t,n){"use strict";var r=e("../../components/colorscale/calc");t.exports=function(e,t){r(t,t.z,"","z")}},{"../../components/colorscale/calc":563}],802:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../components/colorscale/defaults"),s=e("./attributes");t.exports=function(e,t,n,o){function u(n,i){return r.coerce(e,t,s,n,i)}var f,l=u("locations");if(l&&(f=l.length),!l||!f)return void (t.visible=!1);var c=u("z");return Array.isArray(c)?(c.length>f&&(t.z=c.slice(0,f)),u("locationmode"),u("text"),u("marker.line.color"),u("marker.line.width"),i(e,t,o,u,{prefix:"",cLetter:"z"}),void u("hoverinfo",1===o._dataLength?"location+z+text":void 0)):void (t.visible=!1)}},{"../../components/colorscale/defaults":566,"../../lib":657,"./attributes":800}],803:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../heatmap/colorbar"),r.calc=e("./calc"),r.plot=e("./plot").plot,r.hoverPoints=function(){},r.moduleType="trace",r.name="choropleth",r.basePlotModule=e("../../plots/geo"),r.categories=["geo","noOpacity"],r.meta={},t.exports=r},{"../../plots/geo":713,"../heatmap/colorbar":821,"./attributes":800,"./calc":801,"./defaults":802,"./plot":804}],804:[function(e,t,n){"use strict";function r(e,t){function n(t){var n=e.mockAxis;return o.tickText(n,n.c2l(t),"hover").text}var r=t.hoverinfo;if("none"===r||"skip"===r)return function(e){delete e.nameLabel,delete e.textLabel};var i="all"===r?v.hoverinfo.flags:r.split("+"),s=i.indexOf("name")!==-1,u=i.indexOf("location")!==-1,a=i.indexOf("z")!==-1,f=i.indexOf("text")!==-1,l=!s&&u;return function(e){var r=[];l?e.nameLabel=e.id:(s&&(e.nameLabel=t.name),u&&r.push(e.id)),a&&r.push(n(e.z)),f&&r.push(e.tx),e.textLabel=r.join("<br>")}}function i(e){return function(t,n){return{points:[{data:e._input,fullData:e,curveNumber:e.index,pointNumber:n,location:t.id,z:t.z}]}}}var s=e("d3"),o=e("../../plots/cartesian/axes"),u=e("../../plots/cartesian/graph_interact"),a=e("../../components/color"),f=e("../../components/drawing"),l=e("../../components/colorscale"),c=e("../../lib/topojson_utils").getTopojsonFeatures,h=e("../../lib/geo_location_utils").locationToFeature,p=e("../../lib/array_to_calc_item"),d=e("../../plots/geo/constants"),v=e("./attributes"),m=t.exports={};m.calcGeoJSON=function(e,t){for(var n,r=[],i=e.locations,s=i.length,o=c(e,t),u=(e.marker||{}).line||{},a=0;a<s;a++)n=h(e.locationmode,i[a],o),n&&(n.z=e.z[a],void 0!==e.text&&(n.tx=e.text[a]),p(u.color,n,"mlc",a),p(u.width,n,"mlw",a),r.push(n));return r.length>0&&(r[0].trace=e),r},m.plot=function(e,t,n){function o(e){return e[0].trace.uid}var a,f=e.framework,l=f.select("g.choroplethlayer"),c=f.select("g.baselayer"),h=f.select("g.baselayeroverchoropleth"),p=d.baseLayersOverChoropleth,v=l.selectAll("g.trace.choropleth").data(t,o);v.enter().append("g").attr("class","trace choropleth"),v.exit().remove(),v.each(function(t){function n(t,n){if(e.showHover){var r=e.projection(t.properties.ct);l(t),u.loneHover({x:r[0],y:r[1],name:t.nameLabel,text:t.textLabel},{container:e.hoverContainer.node()}),h=c(t,n),e.graphDiv.emit("plotly_hover",h)}}function o(t,n){e.graphDiv.emit("plotly_click",c(t,n))}var a=t[0].trace,f=m.calcGeoJSON(a,e.topojson),l=r(e,a),c=i(a),h=null,p=s.select(this).selectAll("path.choroplethlocation").data(f);p.enter().append("path").classed("choroplethlocation",!0).on("mouseover",n).on("click",o).on("mouseout",function(){u.loneUnhover(e.hoverContainer),e.graphDiv.emit("plotly_unhover",h)}).on("mousedown",function(){u.loneUnhover(e.hoverContainer)}).on("mouseup",n),p.exit().remove()}),h.selectAll("*").remove();for(var y=0;y<p.length;y++)a=p[y],c.select("g."+a).remove(),e.drawTopo(h,a,n),e.styleLayer(h,a,n);m.style(e)},m.style=function(e){e.framework.selectAll("g.trace.choropleth").each(function(e){var t=e[0].trace,n=s.select(this),r=t.marker||{},i=r.line||{},o=l.makeColorScaleFunc(l.extractScale(t.colorscale,t.zmin,t.zmax));n.selectAll("path.choroplethlocation").each(function(e){s.select(this).attr("fill",function(e){return o(e.z)}).call(a.stroke,e.mlc||i.color).call(f.dashLine,"",e.mlw||i.width)})})}},{"../../components/color":557,"../../components/colorscale":571,"../../components/drawing":580,"../../lib/array_to_calc_item":645,"../../lib/geo_location_utils":653,"../../lib/topojson_utils":673,"../../plots/cartesian/axes":689,"../../plots/cartesian/graph_interact":696,"../../plots/geo/constants":711,"./attributes":800,d3:97}],805:[function(e,t,n){"use strict";var r=e("../heatmap/attributes"),i=e("../scatter/attributes"),s=e("../../components/colorscale/attributes"),o=e("../../components/colorbar/attributes"),u=e("../../lib/extend").extendFlat,a=i.line;t.exports=u({},{z:r.z,x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,transpose:r.transpose,xtype:r.xtype,ytype:r.ytype,connectgaps:r.connectgaps,autocontour:{valType:"boolean",dflt:!0},ncontours:{valType:"integer",dflt:15,min:1},contours:{start:{valType:"number",dflt:null},end:{valType:"number",dflt:null},size:{valType:"number",dflt:null,min:0},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill"},showlines:{valType:"boolean",dflt:!0}},line:{color:u({},a.color,{}),width:a.width,dash:a.dash,smoothing:u({},a.smoothing,{})}},s,{autocolorscale:u({},s.autocolorscale,{dflt:!1})},{colorbar:o})},{"../../components/colorbar/attributes":558,"../../components/colorscale/attributes":562,"../../lib/extend":650,"../heatmap/attributes":818,"../scatter/attributes":881}],806:[function(e,t,n){"use strict";function r(e,t,n){var r={type:"linear",range:[e,t]};return i.autoTicks(r,(t-e)/(n||15)),r}var i=e("../../plots/cartesian/axes"),s=e("../../lib").extendFlat,o=e("../heatmap/calc");t.exports=function(e,t){var n=o(e,t),u=t.contours;if(t.autocontour!==!1){var f=r(t.zmin,t.zmax,t.ncontours);u.size=f.dtick,u.start=i.tickFirst(f),f.range.reverse(),u.end=i.tickFirst(f),u.start===t.zmin&&(u.start+=u.size),u.end===t.zmax&&(u.end-=u.size),u.start>u.end&&(u.start=u.end=(u.start+u.end)/2),t._input.contours=s({},u)}else{var l=u.start,c=u.end,h=t._input.contours;if(l>c&&(u.start=h.start=c,c=u.end=h.end=l,l=u.start),!(u.size>0)){var p;p=l===c?1:r(l,c,t.ncontours).dtick,h.size=u.size=p}}return n}},{"../../lib":657,"../../plots/cartesian/axes":689,"../heatmap/calc":819}],807:[function(e,t,n){"use strict";var r=e("../../plots/plots"),i=e("../../components/colorbar/draw"),s=e("./make_color_map");t.exports=function(e,t){var n=t[0].trace,o="cb"+n.uid;if(e._fullLayout._infolayer.selectAll("."+o).remove(),n.showscale===!1)return void r.autoMargin(e,o);var u=i(e,o);t[0].t.cb=u;var f=n.contours,l=n.line,c=f.size||1,h=f.coloring,p=s(n,{isColorbar:!0});"heatmap"===h&&u.filllevels({start:n.zmin,end:n.zmax,size:(n.zmax-n.zmin)/254}),u.fillcolor("fill"===h||"heatmap"===h?p:"").line({color:"lines"===h?p:l.color,width:f.showlines!==!1?l.width:0,dash:l.dash}).levels({start:f.start,end:f.end,size:c}).options(n.colorbar)()}},{"../../components/colorbar/draw":560,"../../plots/plots":749,"./make_color_map":813}],808:[function(e,t,n){"use strict";t.exports.BOTTOMSTART=[1,9,13,104,713],t.exports.TOPSTART=[4,6,7,104,713],t.exports.LEFTSTART=[8,12,14,208,1114],t.exports.RIGHTSTART=[2,3,11,208,1114],t.exports.NEWDELTA=[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],t.exports.CHOOSESADDLE={104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},t.exports.SADDLEREMAINDER={1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11}},{}],809:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../heatmap/has_columns"),s=e("../heatmap/xyz_defaults"),o=e("../contour/style_defaults"),u=e("./attributes");t.exports=function(e,t,n,f){function l(n,i){return r.coerce(e,t,u,n,i)}var c=s(e,t,l,f);if(!c)return void (t.visible=!1);l("text"),l("connectgaps",i(t));var h,p=r.coerce2(e,t,u,"contours.start"),d=r.coerce2(e,t,u,"contours.end"),v=p===!1||d===!1,m=l("contours.size");h=v?t.autocontour=!0:l("autocontour",!1),!h&&m||l("ncontours"),o(e,t,l,f)}},{"../../lib":657,"../contour/style_defaults":817,"../heatmap/has_columns":825,"../heatmap/xyz_defaults":833,"./attributes":805}],810:[function(e,t,n){"use strict";function r(e,t){return Math.abs(e[0]-t[0])<.01&&Math.abs(e[1]-t[1])<.01}function i(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function s(e,t,n){function s(e){return m[e%m.length]}var c,h=t.join(","),p=h,d=e.crossings[p],v=o(d,n,t),m=[u(e,t,[-v[0],-v[1]])],g=v.join(","),y=e.z.length,b=e.z[0].length;for(c=0;c<1e4;c++){if(d>20?(d=f.CHOOSESADDLE[d][(v[0]||v[1])<0?0:1],e.crossings[p]=f.SADDLEREMAINDER[d]):delete e.crossings[p],v=f.NEWDELTA[d],!v){a.log("Found bad marching index:",d,t,e.level);break}if(m.push(u(e,t,v)),t[0]+=v[0],t[1]+=v[1],r(m[m.length-1],m[m.length-2])&&m.pop(),p=t.join(","),p===h&&v.join(",")===g||n&&(v[0]&&(t[0]<0||t[0]>b-2)||v[1]&&(t[1]<0||t[1]>y-2)))break;d=e.crossings[p]}1e4===c&&a.log("Infinite loop in contour?");var w,E,S,x,T,N,C,k=r(m[0],m[m.length-1]),L=0,A=.2*e.smoothing,O=[],M=0;for(c=1;c<m.length;c++)C=i(m[c],m[c-1]),L+=C,O.push(C);var _=L/O.length*A;for(c=m.length-2;c>=M;c--)if(w=O[c],w<_){for(S=0,E=c-1;E>=M&&w+O[E]<_;E--)w+=O[E];if(k&&c===m.length-2)for(S=0;S<E&&w+O[S]<_;S++)w+=O[S];T=c-E+S+1,N=Math.floor((c+E+S+2)/2),x=k||c!==m.length-2?k||E!==-1?T%2?s(N):[(s(N)[0]+s(N+1)[0])/2,(s(N)[1]+s(N+1)[1])/2]:m[0]:m[m.length-1],m.splice(E+1,c-E+1,x),c=E+1,S&&(M=S),k&&(c===m.length-2?m[S]=m[m.length-1]:0===c&&(m[m.length-1]=m[0]))}if(m.splice(0,M),!(m.length<2))if(k)m.pop(),e.paths.push(m);else{n||a.log("Unclosed interior contour?",e.level,h,m.join("L"));var D=!1;e.edgepaths.forEach(function(t,n){if(!D&&r(t[0],m[m.length-1])){m.pop(),D=!0;var i=!1;e.edgepaths.forEach(function(t,s){!i&&r(t[t.length-1],m[0])&&(i=!0,m.splice(0,1),e.edgepaths.splice(n,1),s===n?e.paths.push(m.concat(t)):e.edgepaths[s]=e.edgepaths[s].concat(m,t))}),i||(e.edgepaths[n]=m.concat(t))}}),e.edgepaths.forEach(function(t,n){!D&&r(t[t.length-1],m[0])&&(m.splice(0,1),e.edgepaths[n]=t.concat(m),D=!0)}),D||e.edgepaths.push(m)}}function o(e,t,n){var r=0,i=0;return e>20&&t?208===e||1114===e?r=0===n[0]?1:-1:i=0===n[1]?1:-1:f.BOTTOMSTART.indexOf(e)!==-1?i=1:f.LEFTSTART.indexOf(e)!==-1?r=1:f.TOPSTART.indexOf(e)!==-1?i=-1:r=-1,[r,i]}function u(e,t,n){var r=t[0]+Math.max(n[0],0),i=t[1]+Math.max(n[1],0),s=e.z[i][r],o=e.xaxis,u=e.yaxis;if(n[1]){var a=(e.level-s)/(e.z[i][r+1]-s);return[o.c2p((1-a)*e.x[r]+a*e.x[r+1],!0),u.c2p(e.y[i],!0)]}var f=(e.level-s)/(e.z[i+1][r]-s);return[o.c2p(e.x[r],!0),u.c2p((1-f)*e.y[i]+f*e.y[i+1],!0)]}var a=e("../../lib"),f=e("./constants");t.exports=function(e){var t,n,r,i,o;for(r=0;r<e.length;r++){for(i=e[r],o=0;o<i.starts.length;o++)n=i.starts[o],s(i,n,"edge");for(t=0;Object.keys(i.crossings).length&&t<1e4;)t++,n=Object.keys(i.crossings)[0].split(",").map(Number),s(i,n);1e4===t&&a.log("Infinite loop in contour?")}}},{"../../lib":657,"./constants":808}],811:[function(e,t,n){"use strict";var r=e("../heatmap/hover");t.exports=function(e,t,n,i){return r(e,t,n,i,!0)}},{"../heatmap/hover":826}],812:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("./style"),r.colorbar=e("./colorbar"),r.hoverPoints=e("./hover"),r.moduleType="trace",r.name="contour",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","2dMap","contour"],r.meta={},t.exports=r},{"../../plots/cartesian":697,"./attributes":805,"./calc":806,"./colorbar":807,"./defaults":809,"./hover":811,"./plot":815,"./style":816}],813:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/colorscale");t.exports=function(e){var t,n,s=e.contours,o=s.start,u=s.end,a=s.size||1,f=Math.floor((u+a/10-o)/a)+1,l="lines"===s.coloring?0:1,c=e.colorscale,h=c.length,p=new Array(h),d=new Array(h);if("heatmap"===s.coloring){for(e.zauto&&e.autocontour===!1&&(e.zmin=o-a/2,e.zmax=e.zmin+f*a),n=0;n<h;n++)t=c[n],p[n]=t[0]*(e.zmax-e.zmin)+e.zmin,d[n]=t[1];var v=r.extent([e.zmin,e.zmax,s.start,s.start+a*(f-1)]),m=v[e.zmin<e.zmax?0:1],g=v[e.zmin<e.zmax?1:0];m!==e.zmin&&(p.splice(0,0,m),d.splice(0,0,Range[0])),g!==e.zmax&&(p.push(g),d.push(d[d.length-1]))}else for(n=0;n<h;n++)t=c[n],p[n]=(t[0]*(f+l-1)-l/2)*a+o,d[n]=t[1];return i.makeColorScaleFunc({domain:p,range:d},{noNumericCheck:!0})}},{"../../components/colorscale":571,d3:97}],814:[function(e,t,n){"use strict";function r(e,t){var n=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(5===n||10===n){var r=(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4;return e>r?5===n?713:1114:5===n?104:208}return 15===n?0:n}var i=e("./constants");t.exports=function(e){var t,n,s,o,u,a,f,l,c,h=e[0].z,p=h.length,d=h[0].length,v=2===p||2===d;for(n=0;n<p-1;n++)for(o=[],0===n&&(o=o.concat(i.BOTTOMSTART)),n===p-2&&(o=o.concat(i.TOPSTART)),t=0;t<d-1;t++)for(s=o.slice(),0===t&&(s=s.concat(i.LEFTSTART)),t===d-2&&(s=s.concat(i.RIGHTSTART)),u=t+","+n,a=[[h[n][t],h[n][t+1]],[h[n+1][t],h[n+1][t+1]]],c=0;c<e.length;c++)l=e[c],f=r(l.level,a),f&&(l.crossings[u]=f,s.indexOf(f)!==-1&&(l.starts.push([t,n]),v&&s.indexOf(f,s.indexOf(f)+1)!==-1&&l.starts.push([t,n])))}},{"./constants":808}],815:[function(e,t,n){"use strict";function r(e,t,n){var r=n[0].trace,a=n[0].x,c=n[0].y,h=r.contours,p=r.uid,d=t.xaxis,y=t.yaxis,b=e._fullLayout,w="contour"+p,E=i(h,t,n[0]);if(r.visible!==!0)return b._paper.selectAll("."+w+",.hm"+p).remove(),void b._infolayer.selectAll(".cb"+p).remove();"heatmap"===h.coloring?(r.zauto&&r.autocontour===!1&&(r._input.zmin=r.zmin=h.start-h.size/2,r._input.zmax=r.zmax=r.zmin+E.length*h.size),v(e,t,[n])):b._paper.selectAll(".hm"+p).remove(),m(E),g(E);var S=d.c2p(a[0],!0),x=d.c2p(a[a.length-1],!0),T=y.c2p(c[0],!0),N=y.c2p(c[c.length-1],!0),C=[[S,N],[x,N],[x,T],[S,T]],k=s(t,n,w);o(k,C,h),u(k,E,C,h),f(k,E,h),l(k,t,n[0],C)}function i(e,t,n){for(var r=e.size,i=[],s=e.start;s<e.end+r/10;s+=r)if(i.push({level:s,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:n.x,y:n.y,z:n.z,smoothing:n.trace.line.smoothing}),i.length>1e3){p.warn("Too many contours, clipping at 1000",e);break}return i}function s(e,t,n){var r=e.plot.select(".maplayer").selectAll("g.contour."+n).data(t);return r.enter().append("g").classed("contour",!0).classed(n,!0),r.exit().remove(),r}function o(e,t,n){var r=e.selectAll("g.contourbg").data([0]);r.enter().append("g").classed("contourbg",!0);var i=r.selectAll("path").data("fill"===n.coloring?[0]:[]);i.enter().append("path"),i.exit().remove(),i.attr("d","M"+t.join("L")+"Z").style("stroke","none")}function u(e,t,n,r){var i=e.selectAll("g.contourfill").data([0]);i.enter().append("g").classed("contourfill",!0);var s=i.selectAll("path").data("fill"===r.coloring?t:[]);s.enter().append("path"),s.exit().remove(),s.each(function(e){var t=a(e,n);t?h.select(this).attr("d",t).style("stroke","none"):h.select(this).remove()})}function a(e,t){function n(e){return Math.abs(e[1]-t[0][1])<.01}function r(e){return Math.abs(e[1]-t[2][1])<.01}function i(e){return Math.abs(e[0]-t[0][0])<.01}function s(e){return Math.abs(e[0]-t[2][0])<.01}for(var o,u,a,f,l,c,h=e.edgepaths.length||e.z[0][0]<e.level?"":"M"+t.join("L")+"Z",v=0,m=e.edgepaths.map(function(e,t){return t}),g=!0;m.length;){for(c=d.smoothopen(e.edgepaths[v],e.smoothing),h+=g?c:c.replace(/^M/,"L"),m.splice(m.indexOf(v),1),o=e.edgepaths[v][e.edgepaths[v].length-1],f=-1,a=0;a<4;a++){if(!o){p.log("Missing end?",v,e);break}for(n(o)&&!s(o)?u=t[1]:i(o)?u=t[0]:r(o)?u=t[3]:s(o)&&(u=t[2]),l=0;l<e.edgepaths.length;l++){var y=e.edgepaths[l][0];Math.abs(o[0]-u[0])<.01?Math.abs(o[0]-y[0])<.01&&(y[1]-o[1])*(u[1]-y[1])>=0&&(u=y,f=l):Math.abs(o[1]-u[1])<.01?Math.abs(o[1]-y[1])<.01&&(y[0]-o[0])*(u[0]-y[0])>=0&&(u=y,f=l):p.log("endpt to newendpt is not vert. or horz.",o,u,y)}if(o=u,f>=0)break;h+="L"+u}if(f===e.edgepaths.length){p.log("unclosed perimeter path");break}v=f,g=m.indexOf(v)===-1,g&&(v=m[0],h+="Z")}for(v=0;v<e.paths.length;v++)h+=d.smoothclosed(e.paths[v],e.smoothing);return h}function f(e,t,n){var r=t[0].smoothing,i=e.selectAll("g.contourlevel").data(n.showlines===!1?[]:t);i.enter().append("g").classed("contourlevel",!0),i.exit().remove();var s=i.selectAll("path.openline").data(function(e){return e.edgepaths});s.enter().append("path").classed("openline",!0),s.exit().remove(),s.attr("d",function(e){return d.smoothopen(e,r)}).style("stroke-miterlimit",1);var o=i.selectAll("path.closedline").data(function(e){return e.paths});o.enter().append("path").classed("closedline",!0),o.exit().remove(),o.attr("d",function(e){return d.smoothclosed(e,r)}).style("stroke-miterlimit",1)}function l(e,t,n,r){var i="clip"+n.trace.uid,s=t.plot.selectAll("defs").data([0]);s.enter().append("defs");var o=s.selectAll("#"+i).data(n.trace.connectgaps?[]:[0]);if(o.enter().append("clipPath").attr("id",i),o.exit().remove(),n.trace.connectgaps===!1){var u={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:n.x,y:n.y,z:c(n),smoothing:0};m([u]),g([u]);var f=a(u,r),l=o.selectAll("path").data([0]);l.enter().append("path"),l.attr("d",f)}else i=null;e.call(d.setClipUrl,i),t.plot.selectAll(".hm"+n.trace.uid).call(d.setClipUrl,i)}function c(e){var t,n,r=e.trace._emptypoints,i=[],s=e.z.length,o=e.z[0].length,u=[];for(t=0;t<o;t++)u.push(1);for(t=0;t<s;t++)i.push(u.slice());for(t=0;t<r.length;t++)n=r[t],i[n[0]][n[1]]=0;return e.zmask=i,i}var h=e("d3"),p=e("../../lib"),d=e("../../components/drawing"),v=e("../heatmap/plot"),m=e("./make_crossings"),g=e("./find_all_paths");t.exports=function(e,t,n){for(var i=0;i<n.length;i++)r(e,t,n[i])}},{"../../components/drawing":580,"../../lib":657,"../heatmap/plot":831,"./find_all_paths":810,"./make_crossings":814,d3:97}],816:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/drawing"),s=e("../heatmap/style"),o=e("./make_color_map");t.exports=function(e){var t=r.select(e).selectAll("g.contour");t.style("opacity",function(e){return e.trace.opacity}),t.each(function(e){var t=r.select(this),n=e.trace,s=n.contours,u=n.line,a=s.size||1,f=s.start,l=o(n);t.selectAll("g.contourlevel").each(function(e,t){r.select(this).selectAll("path").call(i.lineGroupStyle,u.width,"lines"===s.coloring?l(f+t*a):u.color,u.dash)}),t.selectAll("g.contourbg path").style("fill",l(f-a/2)),t.selectAll("g.contourfill path").style("fill",function(e,t){return l(f+(t+.5)*a)})}),s(e)}},{"../../components/drawing":580,"../heatmap/style":832,"./make_color_map":813,d3:97}],817:[function(e,t,n){"use strict";var r=e("../../components/colorscale/defaults");t.exports=function(e,t,n,i){var s,o=n("contours.coloring");"fill"===o&&(s=n("contours.showlines")),s!==!1&&("lines"!==o&&n("line.color","#000"),n("line.width",.5),n("line.dash")),n("line.smoothing"),"none"!==(t.contours||{}).coloring&&r(e,t,i,n,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":566}],818:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../components/colorscale/attributes"),s=e("../../components/colorbar/attributes"),o=e("../../lib/extend").extendFlat;t.exports=o({},{z:{valType:"data_array"},x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:{valType:"data_array"},transpose:{valType:"boolean",dflt:!1},xtype:{valType:"enumerated",values:["array","scaled"]},ytype:{valType:"enumerated",values:["array","scaled"]},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1},connectgaps:{valType:"boolean",dflt:!1},xgap:{valType:"number",dflt:0,min:0},ygap:{valType:"number",dflt:0,min:0}},i,{autocolorscale:o({},i.autocolorscale,{dflt:!1})},{colorbar:s})},{"../../components/colorbar/attributes":558,"../../components/colorscale/attributes":562,"../../lib/extend":650,"../scatter/attributes":881}],819:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../lib"),s=e("../../plots/cartesian/axes"),o=e("../histogram2d/calc"),u=e("../../components/colorscale/calc"),a=e("./has_columns"),f=e("./convert_column_xyz"),l=e("./max_row_length"),c=e("./clean_2d_array"),h=e("./interp2d"),p=e("./find_empties"),d=e("./make_bound_array");t.exports=function(e,t){function n(e){L=t._input.zsmooth=t.zsmooth=!1,i.notifier("cannot fast-zsmooth: "+e)}var v,m,g,y,b,w,E,S,x=s.getFromId(e,t.xaxis||"x"),T=s.getFromId(e,t.yaxis||"y"),N=r.traceIs(t,"contour"),C=r.traceIs(t,"histogram"),k=r.traceIs(t,"gl2d"),L=N?"best":t.zsmooth;if(x._minDtick=0,T._minDtick=0,C){var A=o(e,t);v=A.x,m=A.x0,g=A.dx,y=A.y,b=A.y0,w=A.dy,E=A.z}else a(t)&&f(t,x,T),v=t.x?x.makeCalcdata(t,"x"):[],y=t.y?T.makeCalcdata(t,"y"):[],m=t.x0||0,g=t.dx||1,b=t.y0||0,w=t.dy||1,E=c(t.z,t.transpose),(N||t.connectgaps)&&(t._emptypoints=p(E),t._interpz=h(E,t._emptypoints,t._interpz));if("fast"===L)if("log"===x.type||"log"===T.type)n("log axis found");else if(!C){if(v.length){var O=(v[v.length-1]-v[0])/(v.length-1),M=Math.abs(O/100);for(S=0;S<v.length-1;S++)if(Math.abs(v[S+1]-v[S]-O)>M){n("x scale is not linear");break}}if(y.length&&"fast"===L){var _=(y[y.length-1]-y[0])/(y.length-1),D=Math.abs(_/100);for(S=0;S<y.length-1;S++)if(Math.abs(y[S+1]-y[S]-_)>D){n("y scale is not linear");break}}}var P=l(E),H="scaled"===t.xtype?"":v,B=d(t,H,m,g,P,x),j="scaled"===t.ytype?"":y,F=d(t,j,b,w,E.length,T);k||(s.expand(x,B),s.expand(T,F));var I={x:B,y:F,z:E};if(u(t,E,"","z"),N&&t.contours&&"heatmap"===t.contours.coloring){var q={type:"contour"===t.type?"heatmap":"histogram2d",xcalendar:t.xcalendar,ycalendar:t.ycalendar};I.xfill=d(q,H,m,g,P,x),I.yfill=d(q,j,b,w,E.length,T)}return[I]}},{"../../components/colorscale/calc":563,"../../lib":657,"../../plots/cartesian/axes":689,"../../registry":764,"../histogram2d/calc":847,"./clean_2d_array":820,"./convert_column_xyz":822,"./find_empties":824,"./has_columns":825,"./interp2d":828,"./make_bound_array":829,"./max_row_length":830}],820:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e,t){function n(e){if(r(e))return+e}var i,s,o,u,a,f;if(t){for(i=0,a=0;a<e.length;a++)i=Math.max(i,e[a].length);if(0===i)return!1;o=function(e){return e.length},u=function(e,t,n){return e[n][t]}}else i=e.length,o=function(e,t){return e[t].length},u=function(e,t,n){return e[t][n]};var l=new Array(i);for(a=0;a<i;a++)for(s=o(e,a),l[a]=new Array(s),f=0;f<s;f++)l[a][f]=n(u(e,a,f));return l}},{"fast-isnumeric":106}],821:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("../../plots/plots"),o=e("../../components/colorscale"),u=e("../../components/colorbar/draw");t.exports=function(e,t){var n=t[0].trace,f="cb"+n.uid,l=n.zmin,c=n.zmax;if(r(l)||(l=i.aggNums(Math.min,null,n.z)),r(c)||(c=i.aggNums(Math.max,null,n.z)),e._fullLayout._infolayer.selectAll("."+f).remove(),!n.showscale)return void s.autoMargin(e,f);var h=t[0].t.cb=u(e,f),p=o.makeColorScaleFunc(o.extractScale(n.colorscale,l,c),{noNumericCheck:!0});h.fillcolor(p).filllevels({start:l,end:c,size:(c-l)/254}).options(n.colorbar)()}},{"../../components/colorbar/draw":560,"../../components/colorscale":571,"../../lib":657,"../../plots/plots":749,"fast-isnumeric":106}],822:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t,n){var i,s=e.x.slice(),o=e.y.slice(),u=e.z,a=e.text,f=Math.min(s.length,o.length,u.length),l=void 0!==a&&!Array.isArray(a[0]),c=e.xcalendar,h=e.ycalendar;for(f<s.length&&(s=s.slice(0,f)),f<o.length&&(o=o.slice(0,f)),i=0;i<f;i++)s[i]=t.d2c(s[i],0,c),o[i]=n.d2c(o[i],0,h);var p,d,v,m=r.distinctVals(s),g=m.vals,y=r.distinctVals(o),b=y.vals,w=r.init2dArray(b.length,g.length);for(l&&(v=r.init2dArray(b.length,g.length)),i=0;i<f;i++)p=r.findBin(s[i]+m.minDiff/2,g),d=r.findBin(o[i]+y.minDiff/2,b),w[d][p]=u[i],l&&(v[d][p]=a[i]);e.x=g,e.y=b,e.z=w,l&&(e.text=v)}},{"../../lib":657}],823:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./has_columns"),s=e("./xyz_defaults"),o=e("../../components/colorscale/defaults"),u=e("./attributes");t.exports=function(e,t,n,f){function l(n,i){return r.coerce(e,t,u,n,i)}var c=s(e,t,l,f);if(!c)return void (t.visible=!1);l("text");var h=l("zsmooth");h===!1&&(l("xgap"),l("ygap")),l("connectgaps",i(t)&&t.zsmooth!==!1),o(e,t,f,l,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":566,"../../lib":657,"./attributes":818,"./has_columns":825,"./xyz_defaults":833}],824:[function(e,t,n){"use strict";var r=e("./max_row_length");t.exports=function(e){var t,n,i,s,o,u,a,f,l=[],c={},h=[],p=e[0],d=[],v=[0,0,0],m=r(e);for(n=0;n<e.length;n++)for(t=d,d=p,p=e[n+1]||[],i=0;i<m;i++)void 0===d[i]&&(u=(void 0!==d[i-1]?1:0)+(void 0!==d[i+1]?1:0)+(void 0!==t[i]?1:0)+(void 0!==p[i]?1:0),u?(0===n&&u++,0===i&&u++,n===e.length-1&&u++,i===d.length-1&&u++,u<4&&(c[[n,i]]=[n,i,u]),l.push([n,i,u])):h.push([n,i]));for(;h.length;){for(a={},f=!1,o=h.length-1;o>=0;o--)s=h[o],n=s[0],i=s[1],u=((c[[n-1,i]]||v)[2]+(c[[n+1,i]]||v)[2]+(c[[n,i-1]]||v)[2]+(c[[n,i+1]]||v)[2])/20,u&&(a[s]=[n,i,u],h.splice(o,1),f=!0);if(!f)throw"findEmpties iterated with no new neighbors";for(s in a)c[s]=a[s],l.push(a[s])}return l.sort(function(e,t){return t[2]-e[2]})}},{"./max_row_length":830}],825:[function(e,t,n){"use strict";t.exports=function(e){return!Array.isArray(e.z[0])}},{}],826:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/graph_interact"),i=e("../../lib"),s=e("../../plots/cartesian/constants").MAXDIST;t.exports=function(e,t,n,o,u){if(!(e.distance<s)){var f,l,c,h,p=e.cd[0],d=p.trace,v=e.xa,m=e.ya,g=p.x,y=p.y,b=p.z,w=p.zmask,E=g,S=y;if(e.index!==!1){try{c=Math.round(e.index[1]),h=Math.round(e.index[0])}catch(t){return void i.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(c<0||c>=b[0].length||h<0||h>b.length)return}else{if(r.inbox(t-g[0],t-g[g.length-1])>s||r.inbox(n-y[0],n-y[y.length-1])>s)return;if(u){var x;for(E=[2*g[0]-g[1]],x=1;x<g.length;x++)E.push((g[x]+g[x-1])/2);for(E.push([2*g[g.length-1]-g[g.length-2]]),S=[2*y[0]-y[1]],x=1;x<y.length;x++)S.push((y[x]+y[x-1])/2);S.push([2*y[y.length-1]-y[y.length-2]])}c=Math.max(0,Math.min(E.length-2,i.findBin(t,E))),h=Math.max(0,Math.min(S.length-2,i.findBin(n,S)))}var T=v.c2p(g[c]),N=v.c2p(g[c+1]),C=m.c2p(y[h]),k=m.c2p(y[h+1]);u?(N=T,f=g[c],k=C,l=y[h]):(f=(g[c]+g[c+1])/2,l=(y[h]+y[h+1])/2,d.zsmooth&&(T=N=(T+N)/2,C=k=(C+k)/2));var L=b[h][c];w&&!w[h][c]&&(L=void 0);var A;return Array.isArray(d.text)&&Array.isArray(d.text[h])&&(A=d.text[h][c]),[i.extendFlat(e,{index:[h,c],distance:s+10,x0:T,x1:N,y0:C,y1:k,xLabelVal:f,yLabelVal:l,zLabelVal:L,text:A})]}}},{"../../lib":657,"../../plots/cartesian/constants":694,"../../plots/cartesian/graph_interact":696}],827:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.plot=e("./plot"),r.colorbar=e("./colorbar"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.moduleType="trace",r.name="heatmap",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","2dMap"],r.meta={},t.exports=r},{"../../plots/cartesian":697,"./attributes":818,"./calc":819,"./colorbar":821,"./defaults":823,"./hover":826,"./plot":831,"./style":832}],828:[function(e,t,n){"use strict";function r(e){return.5-.25*Math.min(1,.5*e)}function i(e,t,n){var r,i,s,o,a,f,l,c,h,p,d,v,m,g=0;for(o=0;o<t.length;o++){for(r=t[o],i=r[0],s=r[1],d=e[i][s],p=0,h=0,a=0;a<4;a++)f=u[a],l=e[i+f[0]],l&&(c=l[s+f[1]],void 0!==c&&(0===p?v=m=c:(v=Math.min(v,c),m=Math.max(m,c)),h++,p+=c));if(0===h)throw"iterateInterp2d order is wrong: no defined neighbors";e[i][s]=p/h,void 0===d?h<4&&(g=1):(e[i][s]=(1+n)*e[i][s]-n*d,m>v&&(g=Math.max(g,Math.abs(e[i][s]-d)/(m-v))))}return g}var s=e("../../lib"),o=.01,u=[[-1,0],[1,0],[0,-1],[0,1]];t.exports=function(e,t,n){var u,f,l=1;if(Array.isArray(n))for(u=0;u<t.length;u++)f=t[u],e[f[0]][f[1]]=n[f[0]][f[1]];else i(e,t);for(u=0;u<t.length&&!(t[u][2]<4);u++);for(t=t.slice(u),u=0;u<100&&l>o;u++)l=i(e,t,r(l));return l>o&&s.log("interp2d didn't converge quickly",l),e}},{"../../lib":657}],829:[function(e,t,n){"use strict";var r=e("../../registry");t.exports=function(e,t,n,i,s,o){var u,a,f,l=[],c=r.traceIs(e,"contour"),h=r.traceIs(e,"histogram"),p=r.traceIs(e,"gl2d"),d=Array.isArray(t)&&t.length>1;if(d&&!h&&"category"!==o.type){var v=t.length;if(!(v<=s))return c?t.slice(0,s):t.slice(0,s+1);if(c||p)l=t.slice(0,s);else if(1===s)l=[t[0]-.5,t[0]+.5];else{for(l=[1.5*t[0]-.5*t[1]],f=1;f<v;f++)l.push(.5*(t[f-1]+t[f]));l.push(1.5*t[v-1]-.5*t[v-2])}if(v<s){var m=l[l.length-1],g=m-l[l.length-2];for(f=v;f<s;f++)m+=g,l.push(m)}}else{a=i||1;var y=e[o._id.charAt(0)+"calendar"];for(u=h||"category"===o.type?o.r2c(n,0,y)||0:Array.isArray(t)&&1===t.length?t[0]:void 0===n?0:o.d2c(n,0,y),f=c||p?0:-0.5;f<s;f++)l.push(u+a*f)}return l}},{"../../registry":764}],830:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n].length);return t}},{}],831:[function(e,t,n){"use strict";function r(e,t,n){function r(e,t){var n=t.length-2,r=o.constrain(o.findBin(e,t),0,n),i=t[r],s=t[r+1],u=o.constrain(r+(e-i)/(s-i)-.5,0,n),a=Math.round(u),f=Math.abs(u-a);return u&&u!==n&&f?{bin0:a,frac:f,bin1:Math.round(a+f/(u-a))}:{bin0:a,bin1:a,frac:0}}function c(e,t,n,r,i,s,o,u,a){var f={x0:t,x1:n,y0:r,y1:i},l=2*e.xgap/3,c=2*e.ygap/3,h=e.xgap/3,p=e.ygap/3;return u===a-1&&(f.y1=i-c),s===o-1&&(f.x0=t+l),0===u&&(f.y0=r+c),0===s&&(f.x1=n-l),s>0&&s<o-1&&(f.x0=t+h,f.x1=n-h),u>0&&u<a-1&&(f.y0=r+p,f.y1=i-p),f}function h(e,t){if(void 0!==e){var n=$(e);return n[0]=Math.round(n[0]),n[1]=Math.round(n[1]),n[2]=Math.round(n[2]),st+=t,ot+=n[0]*t,ut+=n[1]*t,at+=n[2]*t,n}return[0,0,0,0]}function p(e,t,n){e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=Math.round(255*n[3])}function d(e,t,n,r){var i=e[n.bin0];if(void 0===i)return h(void 0,1);var s,o=e[n.bin1],u=t[n.bin0],a=t[n.bin1],f=o-i||0,l=u-i||0;return s=void 0===o?void 0===a?0:void 0===u?2*(a-i):2*(2*a-u-i)/3:void 0===a?void 0===u?0:2*(2*i-o-u)/3:void 0===u?2*(2*a-o-i)/3:a+i-o-u,h(i+n.frac*f+r.frac*(l+n.frac*s))}var v=n[0].trace,m=v.uid,g=t.xaxis,y=t.yaxis,b=e._fullLayout,w="hm"+m;if(b._paper.selectAll(".contour"+m).remove(),v.visible!==!0)return b._paper.selectAll("."+w).remove(),void b._infolayer.selectAll(".cb"+m).remove();var E,S,x,T,N,C,k=n[0].z,L=n[0].x,A=n[0].y,O=s.traceIs(v,"contour"),M=O?"best":v.zsmooth,_=k.length,D=f(k),P=!1,H=!1;for(C=0;void 0===E&&C<L.length-1;)E=g.c2p(L[C]),C++;for(C=L.length-1;void 0===S&&C>0;)S=g.c2p(L[C]),C--;for(S<E&&(x=S,S=E,E=x,P=!0),C=0;void 0===T&&C<A.length-1;)T=y.c2p(A[C]),C++;for(C=A.length-1;void 0===N&&C>0;)N=y.c2p(A[C]),C--;if(N<T&&(x=T,T=N,N=x,H=!0),O&&(L=n[0].xfill,A=n[0].yfill),"fast"!==M){var B="best"===M?0:.5;E=Math.max(-B*g._length,E),S=Math.min((1+B)*g._length,S),T=Math.max(-B*y._length,T),N=Math.min((1+B)*y._length,N)}var j=Math.round(S-E),F=Math.round(N-T),I=j<=0||F<=0,q=t.plot.select(".imagelayer").selectAll("g.hm."+w).data(I?[]:[0]);if(q.enter().append("g").classed("hm",!0).classed(w,!0),q.exit().remove(),!I){var R,U;"fast"===M?(R=D,U=_):(R=j,U=F);var z=document.createElement("canvas");z.width=R,z.height=U;var W,X,V=z.getContext("2d"),$=u.makeColorScaleFunc(u.extractScale(v.colorscale,v.zmin,v.zmax),{noNumericCheck:!0,returnArray:!0});"fast"===M?(W=P?function(e){return D-1-e}:o.identity,X=H?function(e){return _-1-e}:o.identity):(W=function(e){return o.constrain(Math.round(g.c2p(L[e])-E),0,j)},X=function(e){return o.constrain(Math.round(y.c2p(A[e])-T),0,F)});var J,K,Q,G,Y,Z,et,tt=X(0),nt=[tt,tt],rt=P?0:1,it=H?0:1,st=0,ot=0,ut=0,at=0;if(M){var ft=0,lt=new Uint8Array(j*F*4);if("best"===M){var ct,ht,pt,dt=new Array(L.length),vt=new Array(A.length),mt=new Array(j);for(C=0;C<L.length;C++)dt[C]=Math.round(g.c2p(L[C])-E);for(C=0;C<A.length;C++)vt[C]=Math.round(y.c2p(A[C])-T);for(C=0;C<j;C++)mt[C]=r(C,dt);for(Q=0;Q<F;Q++)for(ct=r(Q,vt),ht=k[ct.bin0],pt=k[ct.bin1],C=0;C<j;C++,ft+=4)et=d(ht,pt,mt[C],ct),p(lt,ft,et)}else for(Q=0;Q<_;Q++)for(Z=k[Q],nt=X(Q),C=0;C<j;C++)et=h(Z[C],1),ft=4*(nt*j+W(C)),p(lt,ft,et);var gt=V.createImageData(j,F);gt.data.set(lt),V.putImageData(gt,0,0)}else for(Q=0;Q<_;Q++)if(Z=k[Q],nt.reverse(),nt[it]=X(Q+1),nt[0]!==nt[1]&&void 0!==nt[0]&&void 0!==nt[1])for(G=W(0),K=[G,G],C=0;C<D;C++)K.reverse(),K[rt]=W(C+1),K[0]!==K[1]&&void 0!==K[0]&&void 0!==K[1]&&(Y=Z[C],et=h(Y,(K[1]-K[0])*(nt[1]-nt[0])),V.fillStyle="rgba("+et.join(",")+")",J=c(v,K[0],K[1],nt[0],nt[1],C,D,Q,_),V.fillRect(J.x0,J.y0,J.x1-J.x0,J.y1-J.y0));ot=Math.round(ot/st),ut=Math.round(ut/st),at=Math.round(at/st);var yt=i("rgb("+ot+","+ut+","+at+")");e._hmpixcount=(e._hmpixcount||0)+st,e._hmlumcount=(e._hmlumcount||0)+st*yt.getLuminance();var bt=q.selectAll("image").data(n);bt.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),bt.attr({height:F,width:j,x:E,y:T,"xlink:href":z.toDataURL("image/png")}),bt.exit().remove()}}var i=e("tinycolor2"),s=e("../../registry"),o=e("../../lib"),u=e("../../components/colorscale"),a=e("../../constants/xmlns_namespaces"),f=e("./max_row_length");t.exports=function(e,t,n){for(var i=0;i<n.length;i++)r(e,t,n[i])}},{"../../components/colorscale":571,"../../constants/xmlns_namespaces":642,"../../lib":657,"../../registry":764,"./max_row_length":830,tinycolor2:495}],832:[function(e,t,n){"use strict";var r=e("d3");t.exports=function(e){r.select(e).selectAll(".hm image").style("opacity",function(e){return e.trace.opacity})}},{d3:97}],833:[function(e,t,n){"use strict";function r(e,t){var n=t(e),r=n?t(e+"type","array"):"scaled";return"scaled"===r&&(t(e+"0"),t("d"+e)),n}function i(e){for(var t,n=!0,r=!1,i=!1,o=0;o<e.length;o++){if(t=e[o],!Array.isArray(t)){n=!1;break}t.length>0&&(r=!0);for(var u=0;u<t.length;u++)if(s(t[u])){i=!0;break}}return n&&r&&i}var s=e("fast-isnumeric"),o=e("../../registry"),u=e("./has_columns");t.exports=function(e,t,n,s){var a,f,l=n("z");if(void 0===l||!l.length)return 0;if(u(e)){if(a=n("x"),f=n("y"),!a||!f)return 0}else{if(a=r("x",n),f=r("y",n),!i(l))return 0;n("transpose")}var c=o.getComponentMethod("calendars","handleTraceDefaults");return c(e,t,["x","y"],s),t.z.length}},{"../../registry":764,"./has_columns":825,"fast-isnumeric":106}],834:[function(e,t,n){"use strict";for(var r=e("../heatmap/attributes"),i=e("../../components/colorscale/attributes"),s=e("../../components/colorbar/attributes"),o=e("../../lib/extend").extendFlat,u=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],a={},f=0;f<u.length;f++){var l=u[f];a[l]=r[l]}o(a,i,{autocolorscale:o({},i.autocolorscale,{dflt:!1})},{colorbar:s}),t.exports=a},{"../../components/colorbar/attributes":558,"../../components/colorscale/attributes":562,"../../lib/extend":650,"../heatmap/attributes":818}],835:[function(e,t,n){"use strict";function r(e,t){this.scene=e,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=o(e.glplot,this.options),this.heatmap._trace=this}function i(e){for(var t=e.colorscale,n=e.zmin,r=e.zmax,i=t.length,s=new Array(i),o=new Array(4*i),u=0;u<i;u++){var f=t[u],c=a(f[1]);s[u]=n+f[0]*(r-n);for(var h=0;h<4;h++)o[4*u+h]=c[h]}return{colorLevels:s,colorValues:o}}function s(e,t,n){var i=new r(e,t.uid);return i.update(t,n),i}var o=e("gl-heatmap2d"),u=e("../../plots/cartesian/axes"),a=e("../../lib/str2rgbarray"),f=r.prototype;f.handlePick=function(e){var t=this.options,n=t.shape,r=e.pointId,i=r%n[0],s=Math.floor(r/n[0]),o=r;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[i],t.y[s],t.z[o]],textLabel:this.textLabels[r],name:this.name,pointIndex:[i,s],hoverinfo:this.hoverinfo}},f.update=function(e,t){var n=t[0];this.name=e.name,this.hoverinfo=e.hoverinfo;var r=n.z;this.options.z=[].concat.apply([],r);var s=r[0].length,o=r.length;this.options.shape=[s,o],this.options.x=n.x,this.options.y=n.y;var a=i(e);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],e.text),this.heatmap.update(this.options),u.expand(this.scene.xaxis,n.x),u.expand(this.scene.yaxis,n.y)},f.dispose=function(){this.heatmap.dispose()},t.exports=s},{"../../lib/str2rgbarray":671,"../../plots/cartesian/axes":689,"gl-heatmap2d":139}],836:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("../heatmap/defaults"),r.colorbar=e("../heatmap/colorbar"),r.calc=e("../heatmap/calc"),r.plot=e("./convert"),r.moduleType="trace",r.name="heatmapgl",r.basePlotModule=e("../../plots/gl2d"),r.categories=["gl2d","2dMap"],r.meta={},t.exports=r},{"../../plots/gl2d":725,"../heatmap/calc":819,"../heatmap/colorbar":821,"../heatmap/defaults":823,"./attributes":834,"./convert":835}],837:[function(e,t,n){"use strict";function r(e){return{start:{valType:"any",dflt:null},end:{valType:"any",dflt:null},size:{valType:"any",dflt:null}}}var i=e("../bar/attributes");t.exports={x:{valType:"data_array"},y:{valType:"data_array"},text:i.text,orientation:i.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:""},autobinx:{valType:"boolean",dflt:null},nbinsx:{valType:"integer",min:0,dflt:0},xbins:r("x"),autobiny:{valType:"boolean",dflt:null},nbinsy:{valType:"integer",min:0,dflt:0},ybins:r("y"),marker:i.marker,error_y:i.error_y,error_x:i.error_x,_deprecated:{bardir:i._deprecated.bardir}}},{"../bar/attributes":774}],838:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=e.length,r=0,i=0;i<n;i++)t[i]?(e[i]/=t[i],r+=e[i]):e[i]=null;return r}},{}],839:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){return n("histnorm"),r.forEach(function(e){n(e+"bins.start"),n(e+"bins.end"),n(e+"bins.size"),n("autobin"+e),n("nbins"+e)}),t}},{}],840:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,i){var s=i[t];return r(s)?(s=Number(s),n[e]+=s,s):0},avg:function(e,t,n,i,s){var o=i[t];return r(o)&&(o=Number(o),n[e]+=o,s[e]++),0},min:function(e,t,n,i){var s=i[t];if(r(s)){if(s=Number(s),!r(n[e]))return n[e]=s,s;if(n[e]>s)return n[e]=s,s-n[e]}return 0},max:function(e,t,n,i){var s=i[t];if(r(s)){if(s=Number(s),!r(n[e]))return n[e]=s,s;if(n[e]<s)return n[e]=s,s-n[e]}return 0}}},{"fast-isnumeric":106}],841:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("../../plots/cartesian/axes"),o=e("./bin_functions"),u=e("./norm_functions"),a=e("./average"),f=e("./clean_bins");t.exports=function(e,t){if(t.visible===!0){var n,c=[],h=[],p=s.getFromId(e,"h"===t.orientation?t.yaxis||"y":t.xaxis||"x"),d="h"===t.orientation?"y":"x",v={x:"y",y:"x"}[d],m=t[d+"calendar"];f(t,p,d);var g=p.makeCalcdata(t,d);t["autobin"+d]===!1&&d+"bins"in t||(t[d+"bins"]=s.autoBin(g,p,t["nbins"+d],!1,m),t._input[d+"bins"]=t[d+"bins"]);var y,b,w,E,S=t[d+"bins"],x="string"==typeof S.size,T=x?[]:S,N=[],C=[],k=0,L=t.histnorm,A=t.histfunc,O=L.indexOf("density")!==-1,M="max"===A||"min"===A,_=M?null:0,D=o.count,P=u[L],H=!1,B=function(e){return p.r2c(e,0,m)};for(Array.isArray(t[v])&&"count"!==A&&(E=t[v],H="avg"===A,D=o[A]),n=B(S.start),b=B(S.end)+(n-s.tickIncrement(n,S.size,!1,m))/1e6;n<b&&c.length<5e3;)y=s.tickIncrement(n,S.size,!1,m),c.push((n+y)/2),h.push(_),x&&T.push(n),O&&N.push(1/(y-n)),H&&C.push(0),n=y;x||"date"!==p.type||(T={start:B(T.start),end:B(T.end),size:T.size});var j=h.length;for(n=0;n<g.length;n++)w=i.findBin(g[n],T),w>=0&&w<j&&(k+=D(w,n,h,E,C));H&&(k=a(h,C)),P&&P(h,k,N);var F=Math.min(c.length,h.length),I=[],q=0,R=F-1;for(n=0;n<F;n++)if(h[n]){q=n;break}for(n=F-1;n>q;n--)if(h[n]){R=n;break}for(n=q;n<=R;n++)r(c[n])&&r(h[n])&&I.push({p:c[n],s:h[n],b:0});return I}}},{"../../lib":657,"../../plots/cartesian/axes":689,"./average":838,"./bin_functions":840,"./clean_bins":842,"./norm_functions":845,"fast-isnumeric":106}],842:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib").cleanDate,s=e("../../constants/numerical"),o=s.ONEDAY,u=s.BADNUM;t.exports=function(e,t,n){var s=t.type,a=n+"bins",f=e[a];f||(f=e[a]={});var l="date"===s?function(e){return e||0===e?i(e,u,f.calendar):null}:function(e){return r(e)?Number(e):null};f.start=l(f.start),f.end=l(f.end);var c="date"===s?o:1,h=f.size;if(r(h))f.size=h>0?Number(h):c;else if("string"!=typeof h)f.size=c;else{var p=h.charAt(0),d=h.substr(1);d=r(d)?Number(d):0,(d<=0||"date"!==s||"M"!==p||d!==Math.round(d))&&(f.size=c)}var v="autobin"+n;"boolean"!=typeof e[v]&&(e[v]=!f.start&&0!==f.start||!f.end&&0!==f.end),e[v]||delete e["nbins"+n]}},{"../../constants/numerical":640,"../../lib":657,"fast-isnumeric":106}],843:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../lib"),s=e("../../components/color"),o=e("./bin_defaults"),u=e("../bar/style_defaults"),a=e("../../components/errorbars/defaults"),f=e("./attributes");t.exports=function(e,t,n,c){function h(n,r){return i.coerce(e,t,f,n,r)}var p=h("x"),d=h("y");h("text");var v=h("orientation",d&&!p?"h":"v"),m=t["v"===v?"x":"y"];if(!m||!m.length)return void (t.visible=!1);var g=r.getComponentMethod("calendars","handleTraceDefaults");g(e,t,["x","y"],c);var y=t["h"===v?"x":"y"];y&&h("histfunc");var b="h"===v?["y"]:["x"];o(e,t,h,b),u(e,t,h,n,c),a(e,t,s.defaultLine,{axis:"y"}),a(e,t,s.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":557,"../../components/errorbars/defaults":585,"../../lib":657,"../../registry":764,"../bar/style_defaults":785,"./attributes":837,"./bin_defaults":839}],844:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.layoutAttributes=e("../bar/layout_attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("../bar/layout_defaults"),r.calc=e("./calc"),r.setPositions=e("../bar/set_positions"),r.plot=e("../bar/plot"),r.style=e("../bar/style"),r.colorbar=e("../scatter/colorbar"),r.hoverPoints=e("../bar/hover"),r.moduleType="trace",r.name="histogram",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","bar","histogram","oriented","errorBarsOK","showLegend"],r.meta={},t.exports=r},{"../../plots/cartesian":697,"../bar/hover":777,"../bar/layout_attributes":779,"../bar/layout_defaults":780,"../bar/plot":781,"../bar/set_positions":782,"../bar/style":784,"../scatter/colorbar":884,"./attributes":837,"./calc":841,"./defaults":843}],845:[function(e,t,n){"use strict";t.exports={percent:function(e,t){for(var n=e.length,r=100/t,i=0;i<n;i++)e[i]*=r},probability:function(e,t){for(var n=e.length,r=0;r<n;r++)e[r]/=t},density:function(e,t,n,r){var i=e.length;r=r||1;for(var s=0;s<i;s++)e[s]*=n[s]*r},"probability density":function(e,t,n,r){var i=e.length;r&&(t/=r);for(var s=0;s<i;s++)e[s]*=n[s]/t}}},{}],846:[function(e,t,n){"use strict";var r=e("../histogram/attributes"),i=e("../heatmap/attributes"),s=e("../../components/colorscale/attributes"),o=e("../../components/colorbar/attributes"),u=e("../../lib/extend").extendFlat;t.exports=u({},{x:r.x,y:r.y,z:{valType:"data_array"},marker:{color:{valType:"data_array"}},histnorm:r.histnorm,histfunc:r.histfunc,autobinx:r.autobinx,nbinsx:r.nbinsx,xbins:r.xbins,autobiny:r.autobiny,nbinsy:r.nbinsy,ybins:r.ybins,xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth},s,{autocolorscale:u({},s.autocolorscale,{dflt:!1})},{colorbar:o})},{"../../components/colorbar/attributes":558,"../../components/colorscale/attributes":562,"../../lib/extend":650,"../heatmap/attributes":818,"../histogram/attributes":837}],847:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/axes"),s=e("../histogram/bin_functions"),o=e("../histogram/norm_functions"),u=e("../histogram/average"),a=e("../histogram/clean_bins");t.exports=function(e,t){var n,f,c,h,p,d,v=i.getFromId(e,t.xaxis||"x"),m=t.x?v.makeCalcdata(t,"x"):[],g=i.getFromId(e,t.yaxis||"y"),y=t.y?g.makeCalcdata(t,"y"):[],b=t.xcalendar,w=t.ycalendar,E=function(e){return v.r2c(e,0,b)},S=function(e){return g.r2c(e,0,w)},x=function(e){return v.c2r(e,0,b)},T=function(e){return g.c2r(e,0,w)};a(t,v,"x"),a(t,g,"y");var N=Math.min(m.length,y.length);m.length>N&&m.splice(N,m.length-N),y.length>N&&y.splice(N,y.length-N),!t.autobinx&&"xbins"in t||(t.xbins=i.autoBin(m,v,t.nbinsx,"2d",b),"histogram2dcontour"===t.type&&(t.xbins.start=x(i.tickIncrement(E(t.xbins.start),t.xbins.size,!0,b)),t.xbins.end=x(i.tickIncrement(E(t.xbins.end),t.xbins.size,!1,b))),t._input.xbins=t.xbins),!t.autobiny&&"ybins"in t||(t.ybins=i.autoBin(y,g,t.nbinsy,"2d",w),"histogram2dcontour"===t.type&&(t.ybins.start=T(i.tickIncrement(S(t.ybins.start),t.ybins.size,!0,w)),t.ybins.end=T(i.tickIncrement(S(t.ybins.end),t.ybins.size,!1,w))),t._input.ybins=t.ybins),p=[];var C,k,L=[],A=[],O="string"==typeof t.xbins.size,M="string"==typeof t.ybins.size,_=O?[]:t.xbins,D=M?[]:t.ybins,P=0,H=[],B=t.histnorm,j=t.histfunc,F=B.indexOf("density")!==-1,I="max"===j||"min"===j,q=I?null:0,R=s.count,U=o[B],z=!1,W=[],X=[],V="z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:"";V&&"count"!==j&&(z="avg"===j,R=s[j]);var $=t.xbins,J=E($.start),K=E($.end)+(J-i.tickIncrement(J,$.size,!1,b))/1e6;for(d=J;d<K;d=i.tickIncrement(d,$.size,!1,b))L.push(q),O&&_.push(d),z&&A.push(0);O&&_.push(d);var Q=L.length;n=t.xbins.start;var G=E(n);for(f=(d-G)/Q,n=x(G+f/2),$=t.ybins,J=S($.start),K=S($.end)+(J-i.tickIncrement(J,$.size,!1,w))/1e6,d=J;d<K;d=i.tickIncrement(d,$.size,!1,w))p.push(L.concat()),M&&D.push(d),z&&H.push(A.concat());M&&D.push(d);var Y=p.length;c=t.ybins.start;var Z=S(c);for(h=(d-Z)/Y,c=T(Z+h/2),F&&(W=L.map(function(e,t){return O?1/(_[t+1]-_[t]):1/f}),X=p.map(function(e,t){return M?1/(D[t+1]-D[t]):1/h})),O||"date"!==v.type||(_={start:E(_.start),end:E(_.end),size:_.size}),M||"date"!==g.type||(D={start:S(D.start),end:S(D.end),size:D.size}),d=0;d<N;d++)C=r.findBin(m[d],_),k=r.findBin(y[d],D),C>=0&&C<Q&&k>=0&&k<Y&&(P+=R(C,d,p[k],V,H[k]));if(z)for(k=0;k<Y;k++)P+=u(p[k],H[k]);if(U)for(k=0;k<Y;k++)U(p[k],P,W,X[k]);return{x:m,x0:n,dx:f,y:y,y0:c,dy:h,z:p}}},{"../../lib":657,"../../plots/cartesian/axes":689,"../histogram/average":838,"../histogram/bin_functions":840,"../histogram/clean_bins":842,"../histogram/norm_functions":845}],848:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./sample_defaults"),s=e("../../components/colorscale/defaults"),o=e("./attributes");t.exports=function(e,t,n,u){function f(n,i){return r.coerce(e,t,o,n,i)}i(e,t,f,u);var l=f("zsmooth");l===!1&&(f("xgap"),f("ygap")),s(e,t,u,f,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":566,"../../lib":657,"./attributes":846,"./sample_defaults":850}],849:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("../heatmap/calc"),r.plot=e("../heatmap/plot"),r.colorbar=e("../heatmap/colorbar"),r.style=e("../heatmap/style"),r.hoverPoints=e("../heatmap/hover"),r.moduleType="trace",r.name="histogram2d",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","2dMap","histogram"],r.meta={},t.exports=r},{"../../plots/cartesian":697,"../heatmap/calc":819,"../heatmap/colorbar":821,"../heatmap/hover":826,"../heatmap/plot":831,"../heatmap/style":832,"./attributes":846,"./defaults":848}],850:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../histogram/bin_defaults");t.exports=function(e,t,n,s){var o=n("x"),u=n("y");if(!(o&&o.length&&u&&u.length))return void (t.visible=!1);var a=r.getComponentMethod("calendars","handleTraceDefaults");a(e,t,["x","y"],s);var f=n("z")||n("marker.color");f&&n("histfunc");var l=["x","y"];i(e,t,n,l)}},{"../../registry":764,"../histogram/bin_defaults":839}],851:[function(e,t,n){"use strict";var r=e("../histogram2d/attributes"),i=e("../contour/attributes"),s=e("../../components/colorscale/attributes"),o=e("../../components/colorbar/attributes"),u=e("../../lib/extend").extendFlat;t.exports=u({},{x:r.x,y:r.y,z:r.z,marker:r.marker,histnorm:r.histnorm,histfunc:r.histfunc,autobinx:r.autobinx,nbinsx:r.nbinsx,xbins:r.xbins,autobiny:r.autobiny,nbinsy:r.nbinsy,ybins:r.ybins,autocontour:i.autocontour,ncontours:i.ncontours,contours:i.contours,line:i.line},s,{colorbar:o})},{"../../components/colorbar/attributes":558,"../../components/colorscale/attributes":562,"../../lib/extend":650,"../contour/attributes":805,"../histogram2d/attributes":846}],852:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../histogram2d/sample_defaults"),s=e("../contour/style_defaults"),o=e("./attributes");t.exports=function(e,t,n,u){function f(n,i){return r.coerce(e,t,o,n,i)}i(e,t,f,u);var l=r.coerce2(e,t,o,"contours.start"),c=r.coerce2(e,t,o,"contours.end"),h=f("autocontour",!l||!c);f(h?"ncontours":"contours.size"),s(e,t,f,u)}},{"../../lib":657,"../contour/style_defaults":817,"../histogram2d/sample_defaults":850,"./attributes":851}],853:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("../contour/calc"),r.plot=e("../contour/plot"),r.style=e("../contour/style"),r.colorbar=e("../contour/colorbar"),r.hoverPoints=e("../contour/hover"),r.moduleType="trace",r.name="histogram2dcontour",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","2dMap","contour","histogram"],r.meta={},t.exports=r},{"../../plots/cartesian":697,"../contour/calc":806,"../contour/colorbar":807,"../contour/hover":811,"../contour/plot":815,"../contour/style":816,"./attributes":851,"./defaults":852}],854:[function(e,t,n){"use strict";var r=e("../../components/colorscale/attributes"),i=e("../../components/colorbar/attributes"),s=e("../surface/attributes"),o=e("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},i:{valType:"data_array"},j:{valType:"data_array"},k:{valType:"data_array"},delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z"},alphahull:{valType:"number",dflt:-1},intensity:{valType:"data_array"},color:{valType:"color"},vertexcolor:{valType:"data_array"},facecolor:{valType:"data_array"},opacity:o({},s.opacity),flatshading:{valType:"boolean",dflt:!1},contour:{show:o({},s.contours.x.show,{}),color:o({},s.contours.x.color),width:o({},s.contours.x.width)},colorscale:r.colorscale,reversescale:r.reversescale,showscale:r.showscale,colorbar:i,lightposition:{x:o({},s.lightposition.x,{dflt:1e5}),y:o({},s.lightposition.y,{dflt:1e5}),z:o({},s.lightposition.z,{dflt:0})},lighting:o({},{vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6}},s.lighting)}},{"../../components/colorbar/attributes":558,"../../components/colorscale/attributes":562,"../../lib/extend":650,"../surface/attributes":937}],855:[function(e,t,n){"use strict";function r(e,t,n){this.scene=e,this.uid=n,this.mesh=t,this.name="",this.color="#fff",this.data=null,this.showContour=!1}function i(e){return e.map(function(e){var t=e[0],n=f(e[1]),r=n.toRgb();return{index:t,rgb:[r.r,r.g,r.b,1]}})}function s(e){return e.map(p)}function o(e,t,n){for(var r=new Array(e.length),i=0;i<e.length;++i)r[i]=[e[i],t[i],n[i]];return r}function u(e,t){var n=e.glplot.gl,i=a({gl:n}),s=new r(e,i,t.uid);return s.update(t),e.glplot.add(i),s}var a=e("gl-mesh3d"),f=e("tinycolor2"),l=e("delaunay-triangulate"),c=e("alpha-shape"),h=e("convex-hull"),p=e("../../lib/str2rgbarray"),d=r.prototype;d.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index;return e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},d.update=function(e){function t(e,t,n,r){return t.map(function(t){return e.d2l(t,0,r)*n})}var n=this.scene,r=n.fullSceneLayout;this.data=e;var u,a=o(t(r.xaxis,e.x,n.dataScale[0],e.xcalendar),t(r.yaxis,e.y,n.dataScale[1],e.ycalendar),t(r.zaxis,e.z,n.dataScale[2],e.zcalendar));if(e.i&&e.j&&e.k)u=o(e.i,e.j,e.k);else if(0===e.alphahull)u=h(a);else if(e.alphahull>0)u=c(e.alphahull,a);else{var f=["x","y","z"].indexOf(e.delaunayaxis);u=l(a.map(function(e){return[e[(f+1)%3],e[(f+2)%3]]}))}var d={positions:a,cells:u,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:p(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};e.intensity?(this.color="#fff",d.vertexIntensity=e.intensity,d.colormap=i(e.colorscale)):e.vertexcolor?(this.color=e.vertexcolors[0],d.vertexColors=s(e.vertexcolor)):e.facecolor?(this.color=e.facecolor[0],d.cellColors=s(e.facecolor)):(this.color=e.color,d.meshColor=p(e.color)),this.mesh.update(d)},d.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},t.exports=u},{"../../lib/str2rgbarray":671,"alpha-shape":34,"convex-hull":86,"delaunay-triangulate":98,"gl-mesh3d":178,tinycolor2:495}],856:[function(e,t,n){"use strict";var r=e("../../registry"),i=e("../../lib"),s=e("../../components/colorbar/defaults"),o=e("./attributes");t.exports=function(e,t,n,u){function f(n,r){return i.coerce(e,t,o,n,r)}function l(e){var t=e.map(function(e){var t=f(e);return t&&Array.isArray(t)?t:null});return t.every(function(e){return e&&e.length===t[0].length})&&t}var c=l(["x","y","z"]),h=l(["i","j","k"]);if(!c)return void (t.visible=!1);h&&h.forEach(function(e){for(var t=0;t<e.length;++t)e[t]|=0});var p=r.getComponentMethod("calendars","handleTraceDefaults");p(e,t,["x","y","z"],u),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","contour.show","contour.color","contour.width","colorscale","reversescale","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(e){f(e)}),"intensity"in e?(f("intensity"),f("showscale",!0)):(t.showscale=!1,"vertexcolor"in e?f("vertexcolor"):"facecolor"in e?f("facecolor"):f("color",n)),t.reversescale&&(t.colorscale=t.colorscale.map(function(e){return[1-e[0],e[1]]}).reverse()),t.showscale&&s(e,t,u)}},{"../../components/colorbar/defaults":559,"../../lib":657,"../../registry":764,"./attributes":854}],857:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../heatmap/colorbar"),r.plot=e("./convert"),r.moduleType="trace",r.name="mesh3d",r.basePlotModule=e("../../plots/gl3d"),r.categories=["gl3d"],r.meta={},t.exports=r},{"../../plots/gl3d":728,"../heatmap/colorbar":821,"./attributes":854,"./convert":855,"./defaults":856}],858:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../scatter/attributes"),s="#3D9970",o="#FF4136",u=i.line,a={name:{valType:"string"},showlegend:{valType:"boolean",dflt:!0},line:{color:r.extendFlat({},u.color),width:r.extendFlat({},u.width),dash:r.extendFlat({},u.dash)}};t.exports={x:{valType:"data_array"},open:{valType:"data_array",dflt:[]},high:{valType:"data_array",dflt:[]},low:{valType:"data_array",dflt:[]},close:{valType:"data_array",dflt:[]},line:{width:r.extendFlat({},u.width,{}),dash:r.extendFlat({},u.dash,{})},increasing:r.extendDeep({},a,{line:{color:{dflt:s}}}),decreasing:r.extendDeep({},a,{line:{color:{dflt:o}}}),text:{valType:"string",dflt:"",arrayOk:!0},tickwidth:{valType:"number",min:0,max:.5,dflt:.3}}},{"../../lib":657,"../scatter/attributes":881}],859:[function(e,t,n){"use strict";function r(e,t,n,r){o(e,t,n,r),n(r+".line.color"),n(r+".line.width",t.line.width),n(r+".line.dash",t.line.dash)}var i=e("../../lib"),s=e("./ohlc_defaults"),o=e("./direction_defaults"),u=e("./attributes"),a=e("./helpers");t.exports=function(e,t,n,o){function f(n,r){return i.coerce(e,t,u,n,r)}a.pushDummyTransformOpts(e,t);var c=s(e,t,f,o);return 0===c?void (t.visible=!1):(f("line.width"),f("line.dash"),r(e,t,f,"increasing"),r(e,t,f,"decreasing"),f("text"),void f("tickwidth"))}},{"../../lib":657,"./attributes":858,"./direction_defaults":860,"./helpers":861,"./ohlc_defaults":863}],860:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){n(r+".showlegend"),e.showlegend===!1&&(t[r].showlegend=!1);var i=t.name+" - "+r;n(r+".name",i)}},{}],861:[function(e,t,n){"use strict";var r=e("../../lib");n.pushDummyTransformOpts=function(e,t){var n={type:t.type,_ephemeral:!0};Array.isArray(e.transforms)?e.transforms.push(n):e.transforms=[n]},n.clearEphemeralTransformOpts=function(e){var t=e.transforms;if(Array.isArray(t)){for(var n=0;n<t.length;n++)t[n]._ephemeral&&t.splice(n,1);0===t.length&&delete e.transforms}},n.copyOHLC=function(e,t){e.open&&(t.open=e.open),e.high&&(t.high=e.high),e.low&&(t.low=e.low),e.close&&(t.close=e.close)},n.makeTransform=function(e,t,n){var i=r.extendFlat([],e.transforms);return i[t.transformIndex]={type:e.type,direction:n,open:e.open,high:e.high,low:e.low,close:e.close},i},n.getFilterFn=function(e){switch(e){case"increasing":return function(e,t){return e<=t};case"decreasing":return function(e,t){return e>t}}},n.addRangeSlider=function(e){e.xaxis||(e.xaxis={}),e.xaxis.rangeslider||(e.xaxis.rangeslider={})}},{"../../lib":657}],862:[function(e,t,n){"use strict";var r=e("../../plot_api/register");t.exports={moduleType:"trace",name:"ohlc",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","showLegend"],meta:{},attributes:e("./attributes"),supplyDefaults:e("./defaults")},r(e("../scatter")),r(e("./transform"))},{"../../plot_api/register":679,"../../plots/cartesian":697,"../scatter":891,"./attributes":858,"./defaults":859,"./transform":864}],863:[function(e,t,n){"use strict";var r=e("../../registry");t.exports=function(e,t,n,i){var s,o=n("x"),u=n("open"),a=n("high"),f=n("low"),l=n("close"),c=r.getComponentMethod("calendars","handleTraceDefaults");return c(e,t,["x"],i),s=Math.min(u.length,a.length,f.length,l.length),o&&(s=Math.min(s,o.length),s<o.length&&(t.x=o.slice(0,s))),s<u.length&&(t.open=u.slice(0,s)),s<a.length&&(t.high=a.slice(0,s)),s<f.length&&(t.low=f.slice(0,s)),s<l.length&&(t.close=l.slice(0,s)),s}},{"../../registry":764}],864:[function(e,t,n){"use strict";function r(e,t,n){var r={type:"scatter",mode:"lines",connectgaps:!1,visible:e.visible,opacity:e.opacity,xaxis:e.xaxis,yaxis:e.yaxis,hoverinfo:i(e),transforms:u.makeTransform(e,t,n)},s=e[n];return s&&o.extendFlat(r,{x:e.x||[0],xcalendar:e.xcalendar,y:[].concat(e.low).concat(e.high),text:e.text,name:s.name,showlegend:s.showlegend,line:s.line}),r}function i(e){var t=e.hoverinfo;if("all"===t)return"x+text+name";var n=t.split("+"),r=n.indexOf("y"),i=n.indexOf("text");return r!==-1&&(n.splice(r,1),i===-1&&n.push("text")),n.join("+")}function s(e,t,n){var r=n._fullInput,i=r.tickwidth,s=r._minDiff;if(!s){var u=e._fullData,a=[];s=1/0;var f;for(f=0;f<u.length;f++){var l=u[f]._fullInput;if("ohlc"===l.type&&l.visible===!0&&l.xaxis===t._id&&(a.push(l),l.x&&l.x.length>1)){var c=o.simpleMap(l.x,t.d2c,0,n.xcalendar),h=o.distinctVals(c).minDiff;s=Math.min(s,h)}}for(s===1/0&&(s=1),f=0;f<a.length;f++)a[f]._minDiff=s}return s*i}var o=e("../../lib"),u=e("./helpers"),a=e("../../plots/cartesian/axes"),f=e("../../plots/cartesian/axis_ids");n.moduleType="transform",n.name="ohlc",n.attributes={},n.supplyDefaults=function(e,t,n,r){return u.clearEphemeralTransformOpts(r),u.copyOHLC(e,t),e},n.transform=function(e,t){for(var n=[],i=0;i<e.length;i++){var s=e[i];"ohlc"===s.type?n.push(r(s,t,"increasing"),r(s,t,"decreasing")):n.push(s)}return u.addRangeSlider(t.layout),n},n.calcTransform=function(e,t,n){var r,i=n.direction,o=u.getFilterFn(i),c=f.getFromTrace(e,t,"x"),h=f.getFromTrace(e,t,"y"),p=s(e,c,t),d=t.open,v=t.high,m=t.low,g=t.close,y=t.text,b=d.length,w=[],E=[],S=[];r=t._fullInput.x?function(e){var n=t.x[e],r=t.xcalendar,i=c.d2c(n,0,r);w.push(c.c2d(i-p,0,r),n,n,n,n,c.c2d(i+p,0,r),null)}:function(e){w.push(e-p,e,e,e,e,e+p,null)};for(var x=function(e,t,n,r){E.push(e,e,t,n,r,r,null)},T=function(e,t){return a.tickText(e,e.c2l(t),"hover").text},N=t._fullInput.hoverinfo,C=N.split("+"),k="all"===N,L=k||C.indexOf("y")!==-1,A=k||C.indexOf("text")!==-1,O=Array.isArray(y)?function(e){return y[e]||""}:function(){return y},M=function(e,t,n,r,i){var s=[];L&&(s.push("Open: "+T(h,t)),s.push("High: "+T(h,n)),s.push("Low: "+T(h,r)),s.push("Close: "+T(h,i))),A&&s.push(O(e));var o=s.join("<br>");S.push(o,o,o,o,o,o,null)},_=0;_<b;_++)o(d[_],g[_])&&(r(_),x(d[_],v[_],m[_],g[_]),M(_,d[_],v[_],m[_],g[_]));t.x=w,t.y=E,t.text=S}},{"../../lib":657,"../../plots/cartesian/axes":689,"../../plots/cartesian/axis_ids":692,"./helpers":861}],865:[function(e,t,n){"use strict";var r=e("../../components/color/attributes"),i=e("../../plots/font_attributes"),s=e("../../plots/attributes"),o=e("../../lib/extend").extendFlat;t.exports={labels:{valType:"data_array"},label0:{valType:"number",dflt:0},dlabel:{valType:"number",dflt:1},values:{valType:"data_array"},marker:{colors:{valType:"data_array"},line:{color:{valType:"color",dflt:r.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}}},text:{valType:"data_array"},scalegroup:{valType:"string",dflt:""},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"]},hoverinfo:o({},s.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0},textfont:o({},i,{}),insidetextfont:o({},i,{}),outsidetextfont:o({},i,{}),domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},hole:{valType:"number",min:0,max:1,dflt:0},sort:{valType:"boolean",dflt:!0},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise"},rotation:{valType:"number",min:-360,max:360,dflt:0},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0}}},{"../../components/color/attributes":556,"../../lib/extend":650,"../../plots/attributes":687,"../../plots/font_attributes":709}],866:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],s=i[0].trace;s._module===t&&s.visible===!0&&n.push(i)}return n}var i=e("../../registry");n.name="pie",n.plot=function(e){var t=i.getModule("pie"),n=r(e.calcdata,t);n.length&&t.plot(e,n)},n.clean=function(e,t,n,r){var i=r._has&&r._has("pie"),s=t._has&&t._has("pie");i&&!s&&r._pielayer.selectAll("g.trace").remove()}},{"../../registry":764}],867:[function(e,t,n){"use strict";function r(e){if(!a){var t=o.defaults;a=t.slice();var n;for(n=0;n<t.length;n++)a.push(s(t[n]).lighten(20).toHexString());for(n=0;n<o.defaults.length;n++)a.push(s(t[n]).darken(20).toHexString())}return a[e%a.length]}var i=e("fast-isnumeric"),s=e("tinycolor2"),o=e("../../components/color"),u=e("./helpers");t.exports=function(e,t){var n,a,f,l,c,h,p=t.values,d=t.labels,v=[],m=e._fullLayout,g=m._piecolormap,y={},b=!1,w=0,E=m.hiddenlabels||[];if(t.dlabel)for(d=new Array(p.length),n=0;n<p.length;n++)d[n]=String(t.label0+n*t.dlabel);for(n=0;n<p.length;n++)a=p[n],i(a)&&(a=+a,a<0||(f=d[n],void 0!==f&&""!==f||(f=n),f=String(f),void 0===y[f]&&(y[f]=!0,l=s(t.marker.colors[n]),l.isValid()?(l=o.addOpacity(l,l.getAlpha()),g[f]||(g[f]=l)):g[f]?l=g[f]:(l=!1,b=!0),c=E.indexOf(f)!==-1,c||(w+=a),v.push({v:a,label:f,color:l,i:n,hidden:c}))));if(t.sort&&v.sort(function(e,t){return t.v-e.v}),b)for(n=0;n<v.length;n++)h=v[n],h.color===!1&&(g[h.label]=h.color=r(m._piedefaultcolorcount),m._piedefaultcolorcount++);if(v[0]&&(v[0].vTotal=w),t.textinfo&&"none"!==t.textinfo){var S,x=t.textinfo.indexOf("label")!==-1,T=t.textinfo.indexOf("text")!==-1,N=t.textinfo.indexOf("value")!==-1,C=t.textinfo.indexOf("percent")!==-1,k=m.separators;for(n=0;n<v.length;n++)h=v[n],S=x?[h.label]:[],T&&t.text[h.i]&&S.push(t.text[h.i]),N&&S.push(u.formatPieValue(h.v,k)),C&&S.push(u.formatPiePercent(h.v/w,k)),h.text=S.join("<br>")}return v};var a},{"../../components/color":557,"./helpers":869,"fast-isnumeric":106,tinycolor2:495}],868:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes");t.exports=function(e,t,n,s){function o(n,s){return r.coerce(e,t,i,n,s)}var u=r.coerceFont,a=o("values");if(!Array.isArray(a)||!a.length)return void (t.visible=!1);var f=o("labels");Array.isArray(f)||(o("label0"),o("dlabel"));var l=o("marker.line.width");l&&o("marker.line.color");var c=o("marker.colors");Array.isArray(c)||(t.marker.colors=[]),o("scalegroup");var h=o("text"),p=o("textinfo",Array.isArray(h)?"text+percent":"percent");if(o("hoverinfo",1===s._dataLength?"label+text+value+percent":void 0),p&&"none"!==p){var d=o("textposition"),v=Array.isArray(d)||"auto"===d,m=v||"inside"===d,g=v||"outside"===d;if(m||g){var y=u(o,"textfont",s.font);m&&u(o,"insidetextfont",y),g&&u(o,"outsidetextfont",y)}}o("domain.x"),o("domain.y"),o("hole"),o("sort"),o("direction"),o("rotation"),o("pull")}},{"../../lib":657,"./attributes":865}],869:[function(e,t,n){"use strict";var r=e("../../lib");n.formatPiePercent=function(e,t){var n=(100*e).toPrecision(3);return n.lastIndexOf(".")!==-1&&(n=n.replace(/[.]?0+$/,"")),r.numSeparate(n,t)+"%"},n.formatPieValue=function(e,t){var n=e.toPrecision(10);return n.lastIndexOf(".")!==-1&&(n=n.replace(/[.]?0+$/,"")),r.numSeparate(n,t)}},{"../../lib":657}],870:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("./layout_defaults"),r.layoutAttributes=e("./layout_attributes"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("./style"),r.styleOne=e("./style_one"),r.moduleType="trace",r.name="pie",r.basePlotModule=e("./base_plot"),r.categories=["pie","showLegend"],r.meta={},t.exports=r},{"./attributes":865,"./base_plot":866,"./calc":867,"./defaults":868,"./layout_attributes":871,"./layout_defaults":872,"./plot":873,"./style":874,"./style_one":875}],871:[function(e,t,n){"use strict";t.exports={hiddenlabels:{valType:"data_array"}}},{}],872:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./layout_attributes");t.exports=function(e,t){function n(n,s){return r.coerce(e,t,i,n,s)}n("hiddenlabels")}},{"../../lib":657,"./layout_attributes":871}],873:[function(e,t,n){"use strict";function r(e,t,n){var r=Math.sqrt(e.width*e.width+e.height*e.height),s=e.width/e.height,o=Math.PI*Math.min(t.v/n.vTotal,.5),u=1-n.trace.hole,a=i(t,n),f={scale:a*n.r*2/r,rCenter:1-a,rotate:0};if(f.scale>=1)return f;var l=s+1/(2*Math.tan(o)),c=n.r*Math.min(1/(Math.sqrt(l*l+.5)+l),u/(Math.sqrt(s*s+u/2)+s)),h={scale:2*c/e.height,rCenter:Math.cos(c/n.r)-c*s/n.r,rotate:(180/Math.PI*t.midangle+720)%180-90},p=1/s,d=p+1/(2*Math.tan(o)),v=n.r*Math.min(1/(Math.sqrt(d*d+.5)+d),u/(Math.sqrt(p*p+u/2)+p)),m={scale:2*v/e.width,rCenter:Math.cos(v/n.r)-v/s/n.r,rotate:(180/Math.PI*t.midangle+810)%180-90},g=m.scale>h.scale?m:h;return f.scale<1&&g.scale>f.scale?g:f}function i(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;var n=Math.PI*Math.min(e.v/t.vTotal,.5);return Math.min(1/(1+1/Math.sin(n)),(1-t.trace.hole)/2)}function s(e,t){var n=t.pxmid[0],r=t.pxmid[1],i=e.width/2,s=e.height/2;return n<0&&(i*=-1),r<0&&(s*=-1),{scale:1,rCenter:1,rotate:0,x:i+Math.abs(s)*(i>0?1:-1)/2,y:s/(1+n*n/(r*r)),outside:!0}}function o(e,t){function n(e,t){return e.pxmid[1]-t.pxmid[1]}function r(e,t){return t.pxmid[1]-e.pxmid[1]}function i(e,n){n||(n={});var r,i,s,u,h,p,v=n.labelExtraY+(o?n.yLabelMax:n.yLabelMin),m=o?e.yLabelMin:e.yLabelMax,g=o?e.yLabelMax:e.yLabelMin,y=e.cyFinal+f(e.px0[1],e.px1[1]),b=v-m;if(b*c>0&&(e.labelExtraY=b),Array.isArray(t.pull))for(i=0;i<d.length;i++)s=d[i],s===e||(t.pull[e.i]||0)>=t.pull[s.i]||((e.pxmid[1]-s.pxmid[1])*c>0?(u=s.cyFinal+f(s.px0[1],s.px1[1]),b=u-m-e.labelExtraY,b*c>0&&(e.labelExtraY+=b)):(g+e.labelExtraY-y)*c>0&&(r=3*l*Math.abs(i-d.indexOf(e)),h=s.cxFinal+a(s.px0[0],s.px1[0]),p=h+r-(e.cxFinal+e.pxmid[0])-e.labelExtraX,p*l>0&&(e.labelExtraX+=p)))}var s,o,u,a,f,l,c,h,p,d,v,m,g;for(o=0;o<2;o++)for(u=o?n:r,f=o?Math.max:Math.min,c=o?1:-1,s=0;s<2;s++){for(a=s?Math.max:Math.min,l=s?1:-1,h=e[o][s],h.sort(u),p=e[1-o][s],d=p.concat(h),m=[],v=0;v<h.length;v++)void 0!==h[v].yLabelMid&&m.push(h[v]);for(g=!1,v=0;o&&v<p.length;v++)if(void 0!==p[v].yLabelMid){g=p[v];break}for(v=0;v<m.length;v++){var y=v&&m[v-1];g&&!v&&(y=g),i(m[v],y)}}}function u(e,t){var n,r,i,s,o,u,a,l,c,h,p=[];for(i=0;i<e.length;i++){if(o=e[i][0],u=o.trace,n=t.w*(u.domain.x[1]-u.domain.x[0]),r=t.h*(u.domain.y[1]-u.domain.y[0]),a=u.tiltaxis*Math.PI/180,l=u.pull,Array.isArray(l))for(l=0,s=0;s<u.pull.length;s++)u.pull[s]>l&&(l=u.pull[s]);o.r=Math.min(n/f(u.tilt,Math.sin(a),u.depth),r/f(u.tilt,Math.cos(a),u.depth))/(2+2*l),o.cx=t.l+t.w*(u.domain.x[1]+u.domain.x[0])/2,o.cy=t.t+t.h*(2-u.domain.y[1]-u.domain.y[0])/2,u.scalegroup&&p.indexOf(u.scalegroup)===-1&&p.push(u.scalegroup)}for(s=0;s<p.length;s++){for(h=1/0,c=p[s],i=0;i<e.length;i++)o=e[i][0],o.trace.scalegroup===c&&(h=Math.min(h,o.r*o.r/o.vTotal));for(i=0;i<e.length;i++)o=e[i][0],o.trace.scalegroup===c&&(o.r=Math.sqrt(h*o.vTotal))}}function a(e){function t(e){var t=c.r*Math.sin(e),n=-c.r*Math.cos(e);return p?[t*(1-u*r*r)+n*o*u,t*o*u+n*(1-u*i*i),Math.sin(s)*(n*i-t*r)]:[t,n]}var n,r,i,s,o,u,a,f,l,c=e[0],h=c.trace,p=h.tilt,d=h.rotation*Math.PI/180,v=2*Math.PI/c.vTotal,m="px0",g="px1";if("counterclockwise"===h.direction){for(a=0;a<e.length&&e[a].hidden;a++);if(a===e.length)return;d+=v*e[a].v,v*=-1,m="px1",g="px0"}for(p&&(s=p*Math.PI/180,n=h.tiltaxis*Math.PI/180,o=Math.sin(n)*Math.cos(n),u=1-Math.cos(s),r=Math.sin(n),i=Math.cos(n)),l=t(d),a=0;a<e.length;a++)f=e[a],f.hidden||(f[m]=l,d+=v*f.v/2,f.pxmid=t(d),f.midangle=d,d+=v*f.v/2,l=t(d),f[g]=l,f.largeArc=f.v>c.vTotal/2?1:0)}function f(e,t,n){if(!e)return 1;var r=Math.sin(e*Math.PI/180);return Math.max(.01,n*r*Math.abs(t)+2*Math.sqrt(1-r*r*t*t))}var l=e("d3"),c=e("../../plots/cartesian/graph_interact"),h=e("../../components/color"),p=e("../../components/drawing"),d=e("../../lib/svg_text_utils"),v=e("./helpers");t.exports=function(e,t){var n=e._fullLayout;u(t,n._size);var f=n._pielayer.selectAll("g.trace").data(t);f.enter().append("g").attr({"stroke-linejoin":"round","class":"trace"}),f.exit().remove(),f.order(),f.each(function(t){var u=l.select(this),f=t[0],g=f.trace,y=0,b=(g.depth||0)*f.r*Math.sin(y)/2,w=g.tiltaxis||0,E=w*Math.PI/180,S=[b*Math.sin(E),b*Math.cos(E)],x=f.r*Math.cos(y),T=u.selectAll("g.part").data(g.tilt?["top","sides"]:["top"]);T.enter().append("g").attr("class",function(e){return e+" part"}),T.exit().remove(),T.order(),a(t),u.selectAll(".top").each(function(){var u=l.select(this).selectAll("g.slice").data(t);u.enter().append("g").classed("slice",!0),u.exit().remove();var a=[[[],[]],[[],[]]],y=!1;u.each(function(o){function u(t){var r=e._fullLayout,s=e._fullData[g.index],u=s.hoverinfo;if("all"===u&&(u="label+text+value+percent+name"),!e._dragging&&r.hovermode!==!1&&"none"!==u&&"skip"!==u&&u){var a=i(o,f),l=T+o.pxmid[0]*(1-a),h=N+o.pxmid[1]*(1-a),p=n.separators,d=[];u.indexOf("label")!==-1&&d.push(o.label),s.text&&s.text[o.i]&&u.indexOf("text")!==-1&&d.push(s.text[o.i]),u.indexOf("value")!==-1&&d.push(v.formatPieValue(o.v,p)),u.indexOf("percent")!==-1&&d.push(v.formatPiePercent(o.v/f.vTotal,p)),c.loneHover({x0:l-a*f.r,x1:l+a*f.r,y:h,text:d.join("<br>"),name:u.indexOf("name")!==-1?s.name:void 0,color:o.color,idealAlign:o.pxmid[0]<0?"left":"right"},{container:r._hoverlayer.node(),outerContainer:r._paper.node()}),c.hover(e,t,"pie"),L=!0}}function h(t){e.emit("plotly_unhover",{points:[t]}),L&&(c.loneUnhover(n._hoverlayer.node()),L=!1)}function b(){e._hoverdata=[o],e._hoverdata.trace=t.trace,c.click(e,{target:!0})}function E(e,t,n,r){return"a"+r*f.r+","+r*x+" "+w+" "+o.largeArc+(n?" 1 ":" 0 ")+r*(t[0]-e[0])+","+r*(t[1]-e[1])}if(o.hidden)return void l.select(this).selectAll("path,g").remove();a[o.pxmid[1]<0?0:1][o.pxmid[0]<0?0:1].push(o);var T=f.cx+S[0],N=f.cy+S[1],C=l.select(this),k=C.selectAll("path.surface").data([o]),L=!1;if(k.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),C.select("path.textline").remove(),C.on("mouseover",u).on("mouseout",h).on("click",b),g.pull){var A=+(Array.isArray(g.pull)?g.pull[o.i]:g.pull)||0;A>0&&(T+=A*o.pxmid[0],N+=A*o.pxmid[1])}o.cxFinal=T,o.cyFinal=N;var O=g.hole;if(o.v===f.vTotal){var M="M"+(T+o.px0[0])+","+(N+o.px0[1])+E(o.px0,o.pxmid,!0,1)+E(o.pxmid,o.px0,!0,1)+"Z";O?k.attr("d","M"+(T+O*o.px0[0])+","+(N+O*o.px0[1])+E(o.px0,o.pxmid,!1,O)+E(o.pxmid,o.px0,!1,O)+"Z"+M):k.attr("d",M)}else{var D=E(o.px0,o.px1,!0,1);if(O){var P=1-O;k.attr("d","M"+(T+O*o.px1[0])+","+(N+O*o.px1[1])+E(o.px1,o.px0,!1,O)+"l"+P*o.px0[0]+","+P*o.px0[1]+D+"Z")}else k.attr("d","M"+T+","+N+"l"+o.px0[0]+","+o.px0[1]+D+"Z")}var H=Array.isArray(g.textposition)?g.textposition[o.i]:g.textposition,B=C.selectAll("g.slicetext").data(o.text&&"none"!==H?[0]:[]);B.enter().append("g").classed("slicetext",!0),B.exit().remove(),B.each(function(){var e=l.select(this).selectAll("text").data([0]);e.enter().append("text").attr("data-notex",1),e.exit().remove(),e.text(o.text).attr({"class":"slicetext",transform:"","data-bb":"","text-anchor":"middle",x:0,y:0}).call(p.font,"outside"===H?g.outsidetextfont:g.insidetextfont).call(d.convertToTspans),e.selectAll("tspan.line").attr({x:0,y:0});var t,n=p.bBox(e.node());"outside"===H?t=s(n,o):(t=r(n,o,f),"auto"===H&&t.scale<1&&(e.call(p.font,g.outsidetextfont),g.outsidetextfont.family===g.insidetextfont.family&&g.outsidetextfont.size===g.insidetextfont.size||(e.attr({"data-bb":""}),n=p.bBox(e.node())),t=s(n,o)));var i=T+o.pxmid[0]*t.rCenter+(t.x||0),u=N+o.pxmid[1]*t.rCenter+(t.y||0);t.outside&&(o.yLabelMin=u-n.height/2,o.yLabelMid=u,o.yLabelMax=u+n.height/2,o.labelExtraX=0,o.labelExtraY=0,y=!0),e.attr("transform","translate("+i+","+u+")"+(t.scale<1?"scale("+t.scale+")":"")+(t.rotate?"rotate("+t.rotate+")":"")+"translate("+ -(n.left+n.right)/2+","+ -(n.top+n.bottom)/2+")")})}),y&&o(a,g),u.each(function(e){if(e.labelExtraX||e.labelExtraY){var t=l.select(this),n=t.select("g.slicetext text");n.attr("transform","translate("+e.labelExtraX+","+e.labelExtraY+")"+n.attr("transform"));var r=e.cxFinal+e.pxmid[0],i=e.cyFinal+e.pxmid[1],s="M"+r+","+i,o=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var u=e.labelExtraX*e.pxmid[1]/e.pxmid[0],a=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);s+=Math.abs(u)>Math.abs(a)?"l"+a*e.pxmid[0]/e.pxmid[1]+","+a+"H"+(r+e.labelExtraX+o):"l"+e.labelExtraX+","+u+"v"+(a-u)+"h"+o}else s+="V"+(e.yLabelMid+e.labelExtraY)+"h"+o;t.append("path").classed("textline",!0).call(h.stroke,g.outsidetextfont.color).attr({"stroke-width":Math.min(2,g.outsidetextfont.size/8),d:s,fill:"none"})}})})}),setTimeout(function(){f.selectAll("tspan").each(function(){var e=l.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)}},{"../../components/color":557,"../../components/drawing":580,"../../lib/svg_text_utils":672,"../../plots/cartesian/graph_interact":696,"./helpers":869,d3:97}],874:[function(e,t,n){"use strict";var r=e("d3"),i=e("./style_one");t.exports=function(e){e._fullLayout._pielayer.selectAll(".trace").each(function(e){var t=e[0],n=t.trace,s=r.select(this);s.style({opacity:n.opacity}),s.selectAll(".top path.surface").each(function(e){r.select(this).call(i,e,n)})})}},{"./style_one":875,d3:97}],875:[function(e,t,n){"use strict";var r=e("../../components/color");t.exports=function(e,t,n){var i=n.marker.line.color;Array.isArray(i)&&(i=i[t.i]||r.defaultLine);var s=n.marker.line.width||0;Array.isArray(s)&&(s=s[t.i]||0),e.style({"stroke-width":s,fill:t.color}).call(r.stroke,i)}},{"../../components/color":557}],876:[function(e,t,n){"use strict";var r=e("../scattergl/attributes");t.exports={x:r.x,y:r.y,xy:{valType:"data_array"},indices:{valType:"data_array"},xbounds:{valType:"data_array"},ybounds:{valType:"data_array"},text:r.text,marker:{color:{valType:"color",arrayOk:!1},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1},blend:{valType:"boolean",dflt:null},sizemin:{valType:"number",min:.1,max:2,dflt:.5},sizemax:{valType:"number",min:.1,dflt:20},border:{color:{valType:"color",arrayOk:!1},arearatio:{valType:"number",min:0,max:1,dflt:0}}}}},{"../scattergl/attributes":917}],877:[function(e,t,n){"use strict";function r(e,t){this.scene=e,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=s(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}function i(e,t){var n=new r(e,t.uid);return n.update(t),n}var s=e("gl-pointcloud2d"),o=e("../../lib/str2rgbarray"),u=e("../scatter/get_trace_color"),a=["xaxis","yaxis"],f=r.prototype;f.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},f.update=function(e){this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=u(e,{})},f.updateFast=function(e){var t,n,r,i,s,u,a=this.xData=this.pickXData=e.x,f=this.yData=this.pickYData=e.y,l=this.pickXYData=e.xy,c=e.xbounds&&e.ybounds,h=e.indices,p=this.bounds;if(l){if(r=l,t=l.length>>>1,c)p[0]=e.xbounds[0],p[2]=e.xbounds[1],p[1]=e.ybounds[0],p[3]=e.ybounds[1];else for(u=0;u<t;u++)i=r[2*u],s=r[2*u+1],i<p[0]&&(p[0]=i),i>p[2]&&(p[2]=i),s<p[1]&&(p[1]=s),s>p[3]&&(p[3]=s);if(h)n=h;else for(n=new Int32Array(t),u=0;u<t;u++)n[u]=u}else for(t=a.length,r=new Float32Array(2*t),n=new Int32Array(t),u=0;u<t;u++)i=a[u],s=f[u],n[u]=u,r[2*u]=i,r[2*u+1]=s,i<p[0]&&(p[0]=i),i>p[2]&&(p[2]=i),s<p[1]&&(p[1]=s),s>p[3]&&(p[3]=s);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=r;var d=o(e.marker.color),v=o(e.marker.border.color),m=e.opacity*e.marker.opacity;d[3]*=m,this.pointcloudOptions.color=d;var g=e.marker.blend;if(null===g){var y=100;g=a.length<y||f.length<y}this.pointcloudOptions.blend=g,v[3]*=m,this.pointcloudOptions.borderColor=v;var b=e.marker.sizemin,w=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=b,this.pointcloudOptions.sizeMax=w,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions),this.expandAxesFast(p,w/2)},f.expandAxesFast=function(e,t){for(var n,r,i,s=t||.5,o=0;o<2;o++)n=this.scene[a[o]],r=n._min,r||(r=[]),r.push({val:e[o],pad:s}),i=n._max,i||(i=[]),i.push({val:e[o+2],pad:s})},f.dispose=function(){this.pointcloud.dispose()},t.exports=i},{"../../lib/str2rgbarray":671,"../scatter/get_trace_color":889,"gl-pointcloud2d":203}],878:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes");t.exports=function(e,t,n){function s(n,s){return r.coerce(e,t,i,n,s)}s("x"),s("y"),s("xbounds"),s("ybounds"),e.xy&&e.xy instanceof Float32Array&&(t.xy=e.xy),e.indices&&e.indices instanceof Int32Array&&(t.indices=e.indices),s("text"),s("marker.color",n),s("marker.opacity"),s("marker.blend"),s("marker.sizemin"),s("marker.sizemax"),s("marker.border.color",n),s("marker.border.arearatio")}},{"../../lib":657,"./attributes":876}],879:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("../scatter3d/calc"),r.plot=e("./convert"),r.moduleType="trace",r.name="pointcloud",r.basePlotModule=e("../../plots/gl2d"),r.categories=["gl2d","showLegend"],r.meta={},t.exports=r},{"../../plots/gl2d":725,"../scatter3d/calc":905,"./attributes":876,"./convert":877,"./defaults":878}],880:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){r.mergeArray(t.text,e,"tx"),r.mergeArray(t.textposition,e,"tp"),t.textfont&&(r.mergeArray(t.textfont.size,e,"ts"),r.mergeArray(t.textfont.color,e,"tc"),r.mergeArray(t.textfont.family,e,"tf"));var n=t.marker;if(n){r.mergeArray(n.size,e,"ms"),r.mergeArray(n.opacity,e,"mo"),r.mergeArray(n.symbol,e,"mx"),r.mergeArray(n.color,e,"mc");var i=n.line;n.line&&(r.mergeArray(i.color,e,"mlc"),r.mergeArray(i.width,e,"mlw"))}}},{"../../lib":657}],881:[function(e,t,n){"use strict";var r=e("../../components/colorscale/color_attributes"),i=e("../../components/errorbars/attributes"),s=e("../../components/colorbar/attributes"),o=e("../../components/drawing"),u=(e("./constants"),e("../../lib/extend").extendFlat);t.exports={x:{valType:"data_array"},x0:{valType:"any",dflt:0},dx:{valType:"number",dflt:1},y:{valType:"data_array"},y0:{valType:"any",dflt:0},dy:{valType:"number",dflt:1},ids:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},hoveron:{valType:"flaglist",flags:["points","fills"]},line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:2},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear"},smoothing:{valType:"number",min:0,max:1.3,dflt:1},dash:{valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid"},simplify:{valType:"boolean",dflt:!0}},connectgaps:{valType:"boolean",dflt:!1},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none"},fillcolor:{valType:"color"},marker:u({},{symbol:{valType:"enumerated",values:o.symbolList,dflt:"circle",arrayOk:!0},opacity:{valType:"number",min:0,max:1,arrayOk:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0},maxdisplayed:{valType:"number",min:0,dflt:0},sizeref:{valType:"number",dflt:1},sizemin:{valType:"number",min:0,dflt:0},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter"},showscale:{valType:"boolean",dflt:!1},colorbar:s,line:u({},{width:{valType:"number",min:0,arrayOk:!0}},r("marker.line"))},r("marker")),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0},textfont:{family:{valType:"string",noBlank:!0,strict:!0,arrayOk:!0},size:{valType:"number",min:1,arrayOk:!0},color:{valType:"color",arrayOk:!0}},r:{valType:"data_array"},t:{valType:"data_array"},error_y:i,error_x:i}},{"../../components/colorbar/attributes":558,"../../components/colorscale/color_attributes":564,"../../components/drawing":580,"../../components/errorbars/attributes":582,"../../lib/extend":650,"./constants":886}],882:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../plots/cartesian/axes"),s=e("./subtypes"),o=e("./colorscale_calc"),u=e("./arrays_to_calcdata");t.exports=function(e,t){var n,f,l,c=i.getFromId(e,t.xaxis||"x"),h=i.getFromId(e,t.yaxis||"y"),p=c.makeCalcdata(t,"x"),d=h.makeCalcdata(t,"y"),v=Math.min(p.length,d.length);c._minDtick=0,h._minDtick=0,p.length>v&&p.splice(v,p.length-v),d.length>v&&d.splice(v,d.length-v);var m={padded:!0},g={padded:!0};if(s.hasMarkers(t)){if(n=t.marker,f=n.size,Array.isArray(f)){var y={type:"linear"};i.setConvert(y),f=y.makeCalcdata(t.marker,"size"),f.length>v&&f.splice(v,f.length-v)}var b,w=1.6*(t.marker.sizeref||1);b="area"===t.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/w),3)}:function(e){return Math.max((e||0)/w,3)},m.ppad=g.ppad=Array.isArray(f)?f.map(b):b(f)}o(t),!("tozerox"===t.fill||"tonextx"===t.fill&&e.firstscatter)||p[0]===p[v-1]&&d[0]===d[v-1]?t.error_y.visible||["tonexty","tozeroy"].indexOf(t.fill)===-1&&(s.hasMarkers(t)||s.hasText(t))||(m.padded=!1,m.ppad=0):m.tozero=!0,!("tozeroy"===t.fill||"tonexty"===t.fill&&e.firstscatter)||p[0]===p[v-1]&&d[0]===d[v-1]?["tonextx","tozerox"].indexOf(t.fill)!==-1&&(g.padded=!1):g.tozero=!0,i.expand(c,p,m),i.expand(h,d,g);var E=new Array(v);for(l=0;l<v;l++)E[l]=r(p[l])&&r(d[l])?{x:p[l],y:d[l]}:{x:!1,y:!1},t.ids&&(E[l].id=String(t.ids[l]));return u(E,t),e.firstscatter=!1,E}},{"../../plots/cartesian/axes":689,"./arrays_to_calcdata":880,"./colorscale_calc":885,"./subtypes":901,"fast-isnumeric":106}],883:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var i=t-1;i>=0;i--){var s=e[i];if("scatter"===s.type&&s.xaxis===n.xaxis&&s.yaxis===n.yaxis){s.opacity=void 0;break}}}}}},{}],884:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("../../plots/plots"),o=e("../../components/colorscale"),u=e("../../components/colorbar/draw");t.exports=function(e,t){var n=t[0].trace,f=n.marker,l="cb"+n.uid;if(e._fullLayout._infolayer.selectAll("."+l).remove(),void 0===f||!f.showscale)return void s.autoMargin(e,l);var c=f.color,h=f.cmin,p=f.cmax;r(h)||(h=i.aggNums(Math.min,null,c)),r(p)||(p=i.aggNums(Math.max,null,c));var d=t[0].t.cb=u(e,l),v=o.makeColorScaleFunc(o.extractScale(f.colorscale,h,p),{noNumericCheck:!0});d.fillcolor(v).filllevels({start:h,end:p,size:(p-h)/254}).options(f.colorbar)()}},{"../../components/colorbar/draw":560,"../../components/colorscale":571,"../../lib":657,"../../plots/plots":749,"fast-isnumeric":106}],885:[function(e,t,n){"use strict";var r=e("../../components/colorscale/has_colorscale"),i=e("../../components/colorscale/calc"),s=e("./subtypes");t.exports=function(e){s.hasLines(e)&&r(e,"line")&&i(e,e.line.color,"line","c"),s.hasMarkers(e)&&(r(e,"marker")&&i(e,e.marker.color,"marker","c"),r(e,"marker.line")&&i(e,e.marker.line.color,"marker.line","c"))}},{"../../components/colorscale/calc":563,"../../components/colorscale/has_colorscale":570,"./subtypes":901}],886:[function(e,t,n){"use strict";t.exports={PTS_LINESONLY:20}},{}],887:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes"),s=e("./constants"),o=e("./subtypes"),u=e("./xy_defaults"),a=e("./marker_defaults"),f=e("./line_defaults"),l=e("./line_shape_defaults"),c=e("./text_defaults"),h=e("./fillcolor_defaults"),p=e("../../components/errorbars/defaults");t.exports=function(e,t,n,v){function m(n,s){return r.coerce(e,t,i,n,s)}var g=u(e,t,v,m),y=g<s.PTS_LINESONLY?"lines+markers":"lines";if(!g)return void (t.visible=!1);m("text"),m("mode",y),m("ids"),o.hasLines(t)&&(f(e,t,n,v,m),l(e,t,m),m("connectgaps"),m("line.simplify")),o.hasMarkers(t)&&a(e,t,n,v,m),o.hasText(t)&&c(e,t,v,m);var b=[];(o.hasMarkers(t)||o.hasText(t))&&(m("marker.maxdisplayed"),b.push("points")),m("fill"),"none"!==t.fill&&(h(e,t,n,m),o.hasLines(t)||l(e,t,m)),"tonext"!==t.fill&&"toself"!==t.fill||b.push("fills"),m("hoveron",b.join("+")||"points"),p(e,t,n,{axis:"y"}),p(e,t,n,{axis:"x",inherit:"y"})}},{"../../components/errorbars/defaults":585,"../../lib":657,"./attributes":881,"./constants":886,"./fillcolor_defaults":888,"./line_defaults":892,"./line_shape_defaults":894,"./marker_defaults":897,"./subtypes":901,"./text_defaults":902,"./xy_defaults":903}],888:[function(e,t,n){"use strict";var r=e("../../components/color");t.exports=function(e,t,n,i){var s=!1;if(t.marker){var o=t.marker.color,u=(t.marker.line||{}).color;o&&!Array.isArray(o)?s=o:u&&!Array.isArray(u)&&(s=u)}i("fillcolor",r.addOpacity((t.line||{}).color||s||n,.5))}},{"../../components/color":557}],889:[function(e,t,n){"use strict";var r=e("../../components/color"),i=e("./subtypes");t.exports=function(e,t){var n,s;if("lines"===e.mode)return n=e.line.color,n&&r.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var o=t.mcc||(e.marker||{}).color,u=t.mlcc||((e.marker||{}).line||{}).color;return s=o&&r.opacity(o)?o:u&&r.opacity(u)&&(t.mlw||((e.marker||{}).line||{}).width)?u:"",s?r.opacity(s)<.3?r.addOpacity(s,.3):s:(n=(e.line||{}).color,n&&r.opacity(n)&&i.hasLines(e)&&e.line.width?n:e.fillcolor)}},{"../../components/color":557,"./subtypes":901}],890:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/graph_interact"),s=e("../../plots/cartesian/constants"),o=e("../../components/errorbars"),u=e("./get_trace_color"),a=e("../../components/color");t.exports=function(e,t,n,f){var c=e.cd,h=c[0].trace,p=e.xa,d=e.ya,v=p.c2p(t),m=d.c2p(n),g=[v,m];if(h.hoveron.indexOf("points")!==-1){var y=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(p.c2p(e.x)-v)-t,1-3/t)},b=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(d.c2p(e.y)-m)-t,1-3/t)},w=function(e){var t=Math.max(3,e.mrc||0),n=p.c2p(e.x)-v,r=d.c2p(e.y)-m;return Math.max(Math.sqrt(n*n+r*r)-t,1-3/t)},E=i.getDistanceFunction(f,y,b,w);if(i.getClosest(c,E,e),e.index!==!1){var S=c[e.index],x=p.c2p(S.x,!0),T=d.c2p(S.y,!0),N=S.mrc||1;return r.extendFlat(e,{color:u(h,S),x0:x-N,x1:x+N,xLabelVal:S.x,y0:T-N,y1:T+N,yLabelVal:S.y}),S.tx?e.text=S.tx:h.text&&(e.text=h.text),o.hoverInfo(S,h,e),[e]}}if(h.hoveron.indexOf("fills")!==-1&&h._polygons){var C,k,L,A,O,M,_,D,P,H=h._polygons,B=[],j=!1,F=1/0,I=-1/0,q=1/0,R=-1/0;for(C=0;C<H.length;C++)L=H[C],L.contains(g)&&(j=!j,B.push(L),q=Math.min(q,L.ymin),R=Math.max(R,L.ymax));if(j){q=Math.max(q,0),R=Math.min(R,d._length);var U=(q+R)/2;for(C=0;C<B.length;C++)for(A=B[C].pts,k=1;k<A.length;k++)D=A[k-1][1],P=A[k][1],D>U!=P>=U&&(M=A[k-1][0],_=A[k][0],O=M+(_-M)*(U-D)/(P-D),F=Math.min(F,O),I=Math.max(I,O));F=Math.max(F,0),I=Math.min(I,p._length);var z=a.defaultLine;return a.opacity(h.fillcolor)?z=h.fillcolor:a.opacity((h.line||{}).color)&&(z=h.line.color),r.extendFlat(e,{distance:s.MAXDIST+10,x0:F,x1:I,y0:U,y1:U,color:z}),delete e.index,h.text&&!Array.isArray(h.text)?e.text=String(h.text):e.text=h.name,[e]}}}},{"../../components/color":557,"../../components/errorbars":586,"../../lib":657,"../../plots/cartesian/constants":694,"../../plots/cartesian/graph_interact":696,"./get_trace_color":889}],891:[function(e,t,n){"use strict";var r={},i=e("./subtypes");r.hasLines=i.hasLines,r.hasMarkers=i.hasMarkers,r.hasText=i.hasText,r.isBubble=i.isBubble,r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.cleanData=e("./clean_data"),r.calc=e("./calc"),r.arraysToCalcdata=e("./arrays_to_calcdata"),r.plot=e("./plot"),r.colorbar=e("./colorbar"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.selectPoints=e("./select"),r.animatable=!0,r.moduleType="trace",r.name="scatter",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","symbols","markerColorscale","errorBarsOK","showLegend"],r.meta={},t.exports=r},{"../../plots/cartesian":697,"./arrays_to_calcdata":880,"./attributes":881,"./calc":882,"./clean_data":883,"./colorbar":884,"./defaults":887,"./hover":890,"./plot":898,"./select":899,"./style":900,"./subtypes":901}],892:[function(e,t,n){"use strict";var r=e("../../components/colorscale/has_colorscale"),i=e("../../components/colorscale/defaults");t.exports=function(e,t,n,s,o){var u=(e.marker||{}).color;if(o("line.color",n),r(e,"line"))i(e,t,s,o,{prefix:"line.",cLetter:"c"});else{var a=!Array.isArray(u)&&u||n;o("line.color",a)}o("line.width"),o("line.dash")}},{"../../components/colorscale/defaults":566,"../../components/colorscale/has_colorscale":570}],893:[function(e,t,n){"use strict";var r=e("../../constants/numerical").BADNUM;t.exports=function(e,t){function n(t){var n=S.c2p(e[t].x),i=x.c2p(e[t].y);return n!==r&&i!==r&&[n,i]}function i(e){var t=e[0]/S._length,n=e[1]/x._length;return(1+10*Math.max(0,-t,t-1,-n,n-1))*C}function s(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S=t.xaxis,x=t.yaxis,T=t.simplify,N=t.connectGaps,C=t.baseTolerance,k=t.linear,L=[],A=.2,O=new Array(e.length),M=0;for(T||(C=A=-1),o=0;o<e.length;o++)if(u=n(o)){for(M=0,O[M++]=u,o++;o<e.length;o++){if(f=n(o),!f){if(N)continue;break}if(k){if(h=s(f,u),!(h<i(f)*A)){for(d=[(f[0]-u[0])/h,(f[1]-u[1])/h],l=u,m=h,g=b=w=0,p=!1,a=f,o++;o<e.length;o++){if(c=n(o),!c){if(N)continue;break}if(v=[c[0]-u[0],c[1]-u[1]],E=v[0]*d[1]-v[1]*d[0],b=Math.min(b,E),w=Math.max(w,E),w-b>i(c))break;a=c,y=v[0]*d[0]+v[1]*d[1],y>m?(m=y,f=c,p=!1):y<g&&(g=y,l=c,p=!0)}if(p?(O[M++]=f,a!==l&&(O[M++]=l)):(l!==u&&(O[M++]=l),a!==f&&(O[M++]=f)),O[M++]=a,o>=e.length||!c)break;O[M++]=c,u=c}}else O[M++]=f}L.push(O.slice(0,M))}return L}},{"../../constants/numerical":640}],894:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=n("line.shape");"spline"===r&&n("line.smoothing")}},{}],895:[function(e,t,n){"use strict";t.exports=function(e,t,n){for(var r,i,s=null,o=0;o<n.length;++o)r=n[o],i=r[0].trace,i.visible===!0?(i._nexttrace=null,["tonextx","tonexty","tonext"].indexOf(i.fill)!==-1&&(i._prevtrace=s,s&&(s._nexttrace=i)),s=i):i._prevtrace=i._nexttrace=null}},{}],896:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e){var t=e.marker,n=t.sizeref||1,i=t.sizemin||0,s="area"===t.sizemode?function(e){return Math.sqrt(e/n)}:function(e){return e/n};return function(e){var t=s(e/2);return r(t)&&t>0?Math.max(t,i):0}}},{"fast-isnumeric":106}],897:[function(e,t,n){"use strict";var r=e("../../components/color"),i=e("../../components/colorscale/has_colorscale"),s=e("../../components/colorscale/defaults"),o=e("./subtypes");t.exports=function(e,t,n,u,f){var l,c=o.isBubble(e),h=(e.line||{}).color;h&&(n=h),f("marker.symbol"),f("marker.opacity",c?.7:1),f("marker.size"),f("marker.color",n),i(e,"marker")&&s(e,t,u,f,{prefix:"marker.",cLetter:"c"}),l=h&&!Array.isArray(h)&&t.marker.color!==h?h:c?r.background:r.defaultLine,f("marker.line.color",l),i(e,"marker.line")&&s(e,t,u,f,{prefix:"marker.line.",cLetter:"c"}),f("marker.line.width",c?1:0),c&&(f("marker.sizeref"),f("marker.sizemin"),f("marker.sizemode"))}},{"../../components/color":557,"../../components/colorscale/defaults":566,"../../components/colorscale/has_colorscale":570,"./subtypes":901}],898:[function(e,t,n){"use strict";function r(e,t){var n;t.selectAll("g.trace").each(function(e){var t=o.select(this);if(n=e[0].trace,n._nexttrace){if(n._nextFill=t.select(".js-fill.js-tonext"),!n._nextFill.size()){var r=":first-child";t.select(".js-fill.js-tozero").size()&&(r+=" + *"),n._nextFill=t.insert("path",r).attr("class","js-fill js-tonext")}}else t.selectAll(".js-fill.js-tonext").remove(),n._nextFill=null;n.fill&&("tozero"===n.fill.substr(0,6)||"toself"===n.fill||"to"===n.fill.substr(0,2)&&!n._prevtrace)?(n._ownFill=t.select(".js-fill.js-tozero"),n._ownFill.size()||(n._ownFill=t.insert("path",":first-child").attr("class","js-fill js-tozero"))):(t.selectAll(".js-fill.js-tozero").remove(),n._ownFill=null)})}function i(e,t,n,r,i,h,v){function m(e){return T?e.transition():e}function g(e){return e.filter(function(e){return e.vis})}function y(e){return e.id}function b(e){if(e.ids)return y}function w(){return!1}function E(e){var t,n,r=e[0].trace,i=o.select(this),s=l.hasMarkers(r),f=l.hasText(r),c=b(r),h=w,p=w;s&&(h=r.marker.maxdisplayed?g:u.identity),f&&(p=r.marker.maxdisplayed?g:u.identity),n=i.selectAll("path.point"),t=n.data(h,c);var d=t.enter().append("path").classed("point",!0);d.call(a.pointStyle,r).call(a.translatePoints,N,C,r),T&&d.style("opacity",0).transition().style("opacity",1),t.each(function(e){var t=m(o.select(this));a.translatePoint(e,t,N,C),a.singlePointStyle(e,t,r)}),T?t.exit().transition().style("opacity",0).remove():t.exit().remove(),n=i.selectAll("g"),t=n.data(p,c),t.enter().append("g").append("text"),t.each(function(e){var t=m(o.select(this).select("text"));a.translatePoint(e,t,N,C)}),t.selectAll("text").call(a.textPointStyle,r).each(function(e){var t=e.xp||N.c2p(e.x),n=e.yp||C.c2p(e.y);o.select(this).selectAll("tspan").each(function(){m(o.select(this)).attr({x:t,y:n})})}),t.exit().remove()}var S,x;s(e,t,n,r,i);var T=!!v&&v.duration>0,N=n.xaxis,C=n.yaxis,k=r[0].trace,L=k.line,A=o.select(h);if(A.call(f.plot,n,v),k.visible===!0){m(A).style("opacity",k.opacity);var O,M,_=k.fill.charAt(k.fill.length-1);"x"!==_&&"y"!==_&&(_=""),r[0].node3=A;var D="",P=[],H=k._prevtrace;H&&(D=H._prevRevpath||"",M=H._nextFill,P=H._polygons);var B,j,F,I,q,R,U,z,W,X="",V="",$=[],J=[],K=u.noop;if(O=k._ownFill,l.hasLines(k)||"none"!==k.fill){for(M&&M.datum(r),["hv","vh","hvh","vhv"].indexOf(L.shape)!==-1?(F=a.steps(L.shape),I=a.steps(L.shape.split("").reverse().join(""))):F=I="spline"===L.shape?function(e){var t=e[e.length-1];return e[0][0]===t[0]&&e[0][1]===t[1]?a.smoothclosed(e.slice(1),L.smoothing):a.smoothopen(e,L.smoothing)}:function(e){return"M"+e.join("L")},q=function(e){return I(e.reverse())},$=c(r,{xaxis:N,yaxis:C,connectGaps:k.connectgaps,baseTolerance:Math.max(L.width||1,3)/4,linear:"linear"===L.shape,simplify:L.simplify}),W=k._polygons=new Array($.length),x=0;x<$.length;x++)k._polygons[x]=p($[x]);$.length&&(R=$[0][0],U=$[$.length-1],z=U[U.length-1]),J=$.filter(function(e){return e.length>1}),K=function(e){return function(t){if(B=F(t),j=q(t),X?_?(X+="L"+B.substr(1),V=j+("L"+V.substr(1))):(X+="Z"+B,V=j+"Z"+V):(X=B,V=j),l.hasLines(k)&&t.length>1){var n=o.select(this);if(n.datum(r),e)m(n.style("opacity",0).attr("d",B).call(a.lineGroupStyle)).style("opacity",1);else{var i=m(n);i.attr("d",B),a.singleLineStyle(r,i)}}}}}var Q=A.selectAll(".js-line").data(J);m(Q.exit()).style("opacity",0).remove(),Q.each(K(!1)),Q.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(a.lineGroupStyle).each(K(!0)),$.length&&(O?R&&z&&(_?("y"===_?R[1]=z[1]=C.c2p(0,!0):"x"===_&&(R[0]=z[0]=N.c2p(0,!0)),m(O).attr("d","M"+z+"L"+R+"L"+X.substr(1))):m(O).attr("d",X+"Z")):"tonext"===k.fill.substr(0,6)&&X&&D&&("tonext"===k.fill?m(M).attr("d",X+"Z"+D+"Z"):m(M).attr("d",X+"L"+D.substr(1)+"Z"),k._polygons=k._polygons.concat(P)),k._prevRevpath=V,k._prevPolygons=W);var G=A.selectAll(".points");S=G.data([r]),G.each(E),S.enter().append("g").classed("points",!0).each(E),S.exit().remove()}}function s(e,t,n,r,i){var s=n.xaxis,a=n.yaxis,f=o.extent(u.simpleMap(s.range,s.r2c)),c=o.extent(u.simpleMap(a.range,a.r2c)),h=r[0].trace;if(l.hasMarkers(h)){var p=h.marker.maxdisplayed;if(0!==p){var d=r.filter(function(e){return e.x>=f[0]&&e.x<=f[1]&&e.y>=c[0]&&e.y<=c[1]}),v=Math.ceil(d.length/p),m=0;i.forEach(function(e,n){var r=e[0].trace;l.hasMarkers(r)&&r.marker.maxdisplayed>0&&n<t&&m++});var g=Math.round(m*v/3+Math.floor(m/3)*v/7.1);r.forEach(function(e){delete e.vis}),d.forEach(function(e,t){0===Math.round((t+g)%v)&&(e.vis=!0)})}}}var o=e("d3"),u=e("../../lib"),a=e("../../components/drawing"),f=e("../../components/errorbars"),l=e("./subtypes"),c=e("./line_points"),h=e("./link_traces"),p=e("../../lib/polygon").tester;t.exports=function(e,t,n,s,u){var a,f,l,c,p,d=t.plot.select("g.scatterlayer"),v=!s,m=!!s&&s.duration>0;for(l=d.selectAll("g.trace"),c=l.data(n,function(e){return e[0].trace.uid}),c.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2),h(e,t,n),r(e,d),a=0,f=[];a<n.length;a++)f[a]=n[a][0].trace.uid;if(d.selectAll("g.trace").sort(function(e,t){var n=f.indexOf(e[0].trace.uid),r=f.indexOf(t[0].trace.uid);return n>r?1:-1}),m){u&&(p=u());var g=o.transition().duration(s.duration).ease(s.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()});g.each(function(){d.selectAll("g.trace").each(function(r,o){i(e,o,t,r,n,this,s)})})}else d.selectAll("g.trace").each(function(r,o){i(e,o,t,r,n,this,s)});v&&c.exit().remove(),d.selectAll("path:not([d])").remove()}},{"../../components/drawing":580,"../../components/errorbars":586,"../../lib":657,"../../lib/polygon":665,"./line_points":893,"./link_traces":895,"./subtypes":901,d3:97}],899:[function(e,t,n){"use strict";var r=e("./subtypes"),i=.2;t.exports=function(e,t){var n,s,o,u,a=e.cd,f=e.xaxis,l=e.yaxis,c=[],h=a[0].trace,p=h.index,d=h.marker,v=!r.hasMarkers(h)&&!r.hasText(h);if(h.visible===!0&&!v){var m=Array.isArray(d.opacity)?1:d.opacity;if(t===!1)for(n=0;n<a.length;n++)a[n].dim=0;else for(n=0;n<a.length;n++)s=a[n],o=f.c2p(s.x),u=l.c2p(s.y),t.contains([o,u])?(c.push({curveNumber:p,pointNumber:n,x:s.x,y:s.y,id:s.id}),s.dim=0):s.dim=1;return a[0].node3.selectAll("path.point").style("opacity",function(e){return((e.mo+1||m+1)-1)*(e.dim?i:1)}),a[0].node3.selectAll("text").style("opacity",function(e){return e.dim?i:1}),c}}},{"./subtypes":901}],900:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/drawing"),s=e("../../components/errorbars");t.exports=function(e){var t=r.select(e).selectAll("g.trace.scatter");t.style("opacity",function(e){return e[0].trace.opacity}),t.selectAll("g.points").each(function(e){r.select(this).selectAll("path.point").call(i.pointStyle,e.trace||e[0].trace),r.select(this).selectAll("text").call(i.textPointStyle,e.trace||e[0].trace)}),t.selectAll("g.trace path.js-line").call(i.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(i.fillGroupStyle),t.call(s.style)}},{"../../components/drawing":580,"../../components/errorbars":586,d3:97}],901:[function(e,t,n){"use strict";var r=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&e.mode&&e.mode.indexOf("markers")!==-1},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){return r.isPlainObject(e.marker)&&Array.isArray(e.marker.size)}}},{"../../lib":657}],902:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t,n,i){i("textposition"),r.coerceFont(i,"textfont",n.font)}},{"../../lib":657}],903:[function(e,t,n){"use strict";var r=e("../../registry");t.exports=function(e,t,n,i){var s,o=i("x"),u=i("y"),a=r.getComponentMethod("calendars","handleTraceDefaults");if(a(e,t,["x","y"],n),o)u?(s=Math.min(o.length,u.length),s<o.length&&(t.x=o.slice(0,s)),s<u.length&&(t.y=u.slice(0,s))):(s=o.length,i("y0"),i("dy"));else{if(!u)return 0;s=t.y.length,i("x0"),i("dx")}return s}},{"../../registry":764}],904:[function(e,t,n){"use strict";function r(e){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var i=e("../scatter/attributes"),s=e("../../components/colorscale/color_attributes"),o=e("../../components/errorbars/attributes"),u=e("../../constants/gl_markers"),a=e("../../lib/extend").extendFlat,f=i.line,l=i.marker,c=l.line;t.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},text:a({},i.text,{}),mode:a({},i.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:r("x"),y:r("y"),z:r("z")},connectgaps:i.connectgaps,line:a({},{width:f.width,dash:f.dash,showscale:{valType:"boolean",dflt:!1}},s("line")),marker:a({},{symbol:{valType:"enumerated",values:Object.keys(u),dflt:"circle",arrayOk:!0},size:a({},l.size,{dflt:8}),sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:a({},l.opacity,{arrayOk:!1}),showscale:l.showscale,colorbar:l.colorbar,line:a({},{width:a({},c.width,{arrayOk:!1})},s("marker.line"))},s("marker")),textposition:a({},i.textposition,{dflt:"top center"}),textfont:i.textfont,error_x:o,error_y:o,error_z:o}},{"../../components/colorscale/color_attributes":564,"../../components/errorbars/attributes":582,"../../constants/gl_markers":639,"../../lib/extend":650,"../scatter/attributes":881}],905:[function(e,t,n){"use strict";var r=e("../scatter/arrays_to_calcdata"),i=e("../scatter/colorscale_calc");t.exports=function(e,t){var n=[{x:!1,y:!1,trace:t,t:{}}];return r(n,t),i(t),n}},{"../scatter/arrays_to_calcdata":880,"../scatter/colorscale_calc":885}],906:[function(e,t,n){"use strict";function r(e,t,n){if(!t||!t.visible)return null;for(var r=o(t),i=new Array(e.length),s=0;s<e.length;s++){var u=r(+e[s],s);i[s]=[-u[0]*n,u[1]*n]}return i}function i(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}function s(e,t){var n=[r(e.x,e.error_x,t[0]),r(e.y,e.error_y,t[1]),r(e.z,e.error_z,t[2])],s=i(n);if(0===s)return null;for(var o=new Array(s),u=0;u<s;u++){for(var a=[[0,0,0],[0,0,0]],f=0;f<3;f++)if(n[f])for(var l=0;l<2;l++)a[l][f]=n[f][u][l];o[u]=a}return o}var o=e("../../components/errorbars/compute_error");t.exports=s},{"../../components/errorbars/compute_error":584}],907:[function(e,t,n){"use strict";function r(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}function i(e,t,n){var r,i=(n+1)%3,s=(n+2)%3,o=[],u=[];for(r=0;r<e.length;++r){var a=e[r];!isNaN(a[i])&&isFinite(a[i])&&!isNaN(a[s])&&isFinite(a[s])&&(o.push([a[i],a[s]]),u.push(r))}var f=g(o);for(r=0;r<f.length;++r)for(var l=f[r],c=0;c<l.length;++c)l[c]=u[l[c]];return{positions:e,cells:f,meshColor:t}}function s(e){for(var t=[0,0,0],n=[[0,0,0],[0,0,0],[0,0,0]],r=[0,0,0],i=0;i<3;i++){var s=e[i];s&&s.copy_zstyle!==!1&&(s=e[2]),s&&(t[i]=s.width/2,n[i]=b(s.color),r=s.thickness)}return{capSize:t,color:n,lineWidth:r}}function o(e){var t=[0,0];return Array.isArray(e)?[0,-1]:(e.indexOf("bottom")>=0&&(t[1]+=1),e.indexOf("top")>=0&&(t[1]-=1),e.indexOf("left")>=0&&(t[0]-=1),e.indexOf("right")>=0&&(t[0]+=1),t)}function u(e,t){return t(4*e)}function a(e){return x[e]}function f(e,t,n,r,i){var s=null;if(Array.isArray(e)){s=[];for(var o=0;o<t;o++)void 0===e[o]?s[o]=r:s[o]=n(e[o],i)}else s=n(e,y.identity);return s}function l(e,t){var n,r,i,l,c,h,p=[],d=e.fullSceneLayout,v=e.dataScale,m=d.xaxis,g=d.yaxis,S=d.zaxis,x=t.marker,N=t.line,C=t.x||[],k=t.y||[],L=t.z||[],O=C.length,M=t.xcalendar,D=t.ycalendar,P=t.zcalendar;for(r=0;r<O;r++)i=m.d2l(C[r],0,M)*v[0],l=g.d2l(k[r],0,D)*v[1],c=S.d2l(L[r],0,P)*v[2],p[r]=[i,l,c];if(Array.isArray(t.text))h=t.text;else if(void 0!==t.text)for(h=new Array(O),r=0;r<O;r++)h[r]=t.text;if(n={position:p,mode:t.mode,text:h},"line"in t&&(n.lineColor=w(N,1,O),n.lineWidth=N.width,n.lineDashes=N.dash),"marker"in t){var H=E(t);n.scatterColor=w(x,1,O),n.scatterSize=f(x.size,O,u,20,H),n.scatterMarker=f(x.symbol,O,a,""),n.scatterLineWidth=x.line.width,n.scatterLineColor=w(x.line,1,O),n.scatterAngle=0}"textposition"in t&&(n.textOffset=o(t.textposition),n.textColor=w(t.textfont,1,O),n.textSize=f(t.textfont.size,O,y.identity,12),n.textFont=t.textfont.family,n.textAngle=0);var B=["x","y","z"];for(n.project=[!1,!1,!1],n.projectScale=[1,1,1],n.projectOpacity=[1,1,1],r=0;r<3;++r){var j=t.projection[B[r]];(n.project[r]=j.show)&&(n.projectOpacity[r]=j.opacity,n.projectScale[r]=j.scale)}n.errorBounds=T(t,v);var F=s([t.error_x,t.error_y,t.error_z]);return n.errorColor=F.color,n.errorLineWidth=F.lineWidth,n.errorCapSize=F.capSize,n.delaunayAxis=t.surfaceaxis,n.delaunayColor=b(t.surfacecolor),n}function c(e){if(Array.isArray(e)){var t=e[0];return Array.isArray(t)&&(e=t),"rgb("+e.slice(0,3).map(function(e){return Math.round(255*e)})+")"}return null}function h(e,t){var n=new r(e,t.uid);return n.update(t),n}var p=e("gl-line3d"),d=e("gl-scatter3d"),v=e("gl-error3d"),m=e("gl-mesh3d"),g=e("delaunay-triangulate"),y=e("../../lib"),b=e("../../lib/str2rgbarray"),w=e("../../lib/gl_format_color"),E=e("../scatter/make_bubble_size_func"),S=e("../../constants/gl3d_dashes"),x=e("../../constants/gl_markers"),T=e("./calc_errors"),N=r.prototype;N.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),this.textLabels&&void 0!==this.textLabels[e.data.index]?e.textLabel=this.textLabels[e.data.index]:e.textLabel="";var t=e.data.index;return e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},N.update=function(e){var t,n,r,s,o=this.scene.glplot.gl,u=S.solid;this.data=e;var a=l(this.scene,e);"mode"in a&&(this.mode=a.mode),"lineDashes"in a&&a.lineDashes in S&&(u=S[a.lineDashes]),this.color=c(a.scatterColor)||c(a.lineColor),this.dataPoints=a.position,t={gl:o,position:a.position,color:a.lineColor,lineWidth:a.lineWidth||1,dashes:u[0],dashScale:u[1],opacity:e.opacity,connectGaps:e.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(t):(this.linePlot=p(t),this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var f=e.opacity;if(e.marker&&e.marker.opacity&&(f*=e.marker.opacity),n={gl:o,position:a.position,color:a.scatterColor,size:a.scatterSize,glyph:a.scatterMarker,opacity:f,orthographic:!0,lineWidth:a.scatterLineWidth,lineColor:a.scatterLineColor,project:a.project,projectScale:a.projectScale,projectOpacity:a.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(n):(this.scatterPlot=d(n),this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),s={gl:o,position:a.position,glyph:a.text,color:a.textColor,size:a.textSize,angle:a.textAngle,alignment:a.textOffset,font:a.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=a.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(s):(this.textMarkers=d(s),this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),r={gl:o,position:a.position,color:a.errorColor,error:a.errorBounds,lineWidth:a.errorLineWidth,capSize:a.errorCapSize,opacity:e.opacity},this.errorBars?a.errorBounds?this.errorBars.update(r):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):a.errorBounds&&(this.errorBars=v(r),this.scene.glplot.add(this.errorBars)),a.delaunayAxis>=0){var h=i(a.position,a.delaunayColor,a.delaunayAxis);h.opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(h):(h.gl=o,this.delaunayMesh=m(h),this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},N.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},t.exports=h},{"../../constants/gl3d_dashes":638,"../../constants/gl_markers":639,"../../lib":657,"../../lib/gl_format_color":655,"../../lib/str2rgbarray":671,"../scatter/make_bubble_size_func":896,"./calc_errors":906,"delaunay-triangulate":98,"gl-error3d":135,"gl-line3d":145,"gl-mesh3d":178,"gl-scatter3d":221}],908:[function(e,t,n){"use strict";function r(e,t,n,r){var s=0,o=n("x"),u=n("y"),a=n("z"),f=i.getComponentMethod("calendars","handleTraceDefaults");return f(e,t,["x","y","z"],r),o&&u&&a&&(s=Math.min(o.length,u.length,a.length),s<o.length&&(t.x=o.slice(0,s)),s<u.length&&(t.y=u.slice(0,s)),s<a.length&&(t.z=a.slice(0,s))),s}var i=e("../../registry"),s=e("../../lib"),o=e("../scatter/subtypes"),u=e("../scatter/marker_defaults"),a=e("../scatter/line_defaults"),f=e("../scatter/text_defaults"),l=e("../../components/errorbars/defaults"),c=e("./attributes");t.exports=function(e,t,n,i){function p(n,r){return s.coerce(e,t,c,n,r)}var d=r(e,t,p,i);if(!d)return void (t.visible=!1);p("text"),p("mode"),o.hasLines(t)&&(p("connectgaps"),a(e,t,n,i,p)),o.hasMarkers(t)&&u(e,t,n,i,p),o.hasText(t)&&f(e,t,i,p);var v=(t.line||{}).color,m=(t.marker||{}).color;p("surfaceaxis")>=0&&p("surfacecolor",v||m);for(var g=["x","y","z"],y=0;y<3;++y){var b="projection."+g[y];p(b+".show")&&(p(b+".opacity"),p(b+".scale"))}l(e,t,n,{axis:"z"}),l(e,t,n,{axis:"y",inherit:"z"}),l(e,t,n,{axis:"x",inherit:"z"})}},{"../../components/errorbars/defaults":585,"../../lib":657,"../../registry":764,"../scatter/line_defaults":892,"../scatter/marker_defaults":897,"../scatter/subtypes":901,"../scatter/text_defaults":902,"./attributes":904}],909:[function(e,t,n){"use strict";var r={};r.plot=e("./convert"),r.attributes=e("./attributes"),r.markerSymbols=e("../../constants/gl_markers"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/colorbar"),r.calc=e("./calc"),r.moduleType="trace",r.name="scatter3d",r.basePlotModule=e("../../plots/gl3d"),r.categories=["gl3d","symbols","markerColorscale","showLegend"],r.meta={},t.exports=r},{"../../constants/gl_markers":639,"../../plots/gl3d":728,"../scatter/colorbar":884,"./attributes":904,"./calc":905,"./convert":907,"./defaults":908}],910:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../plots/attributes"),s=e("../../components/colorscale/color_attributes"),o=e("../../lib/extend").extendFlat,u=r.marker,a=r.line,f=u.line;t.exports={lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],dflt:"ISO-3"},mode:o({},r.mode,{dflt:"markers"}),text:o({},r.text,{}),textfont:r.textfont,textposition:r.textposition,line:{color:a.color,width:a.width,dash:a.dash},connectgaps:r.connectgaps,marker:o({},{symbol:u.symbol,opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,showscale:u.showscale,colorbar:u.colorbar,line:o({},{width:f.width},s("marker.line"))},s("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:r.fillcolor,hoverinfo:o({},i.hoverinfo,{flags:["lon","lat","location","text","name"]})}},{"../../components/colorscale/color_attributes":564,"../../lib/extend":650,"../../plots/attributes":687,"../scatter/attributes":881}],911:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../scatter/colorscale_calc");t.exports=function(e,t){for(var n=Array.isArray(t.locations),s=n?t.locations.length:t.lon.length,o=[],u=0,a=0;a<s;a++){var f,l={};if(n){var c=t.locations[a];l.loc=c,f="string"!=typeof c}else{var h=t.lon[a],p=t.lat[a];l.lonlat=[+h,+p],f=!r(h)||!r(p)}f?u>0&&(o[u-1].gapAfter=!0):(u++,o.push(l))}return i(t),o}},{"../scatter/colorscale_calc":885,"fast-isnumeric":106}],912:[function(e,t,n){"use strict";function r(e,t,n){var r,i,s=0,o=n("locations");return o?(n("locationmode"),s=o.length):(r=n("lon")||[],i=n("lat")||[],s=Math.min(r.length,i.length),s<r.length&&(t.lon=r.slice(0,s)),s<i.length&&(t.lat=i.slice(0,s)),s)}var i=e("../../lib"),s=e("../scatter/subtypes"),o=e("../scatter/marker_defaults"),u=e("../scatter/line_defaults"),a=e("../scatter/text_defaults"),f=e("../scatter/fillcolor_defaults"),l=e("./attributes");t.exports=function(e,t,n,h){function p(n,r){return i.coerce(e,t,l,n,r)}var d=r(e,t,p);return d?(p("text"),p("mode"),s.hasLines(t)&&(u(e,t,n,h,p),p("connectgaps")),s.hasMarkers(t)&&o(e,t,n,h,p),s.hasText(t)&&a(e,t,h,p),p("fill"),"none"!==t.fill&&f(e,t,n,p),void p("hoverinfo",1===h._dataLength?"lon+lat+location+text":void 0)):void (t.visible=!1)}},{"../../lib":657,"../scatter/fillcolor_defaults":888,"../scatter/line_defaults":892,"../scatter/marker_defaults":897,"../scatter/subtypes":901,"../scatter/text_defaults":902,"./attributes":910}],913:[function(e,t,n){"use strict";t.exports=function(e,t){return e.lon=t.lon,e.lat=t.lat,e.location=t.lon?t.lon:null,e}},{}],914:[function(e,t,n){"use strict";function r(e,t,n){function r(e){return s.tickText(n,n.c2l(e),"hover").text+""}var i=e.hoverinfo,o="all"===i?u.hoverinfo.flags:i.split("+"),f=o.indexOf("location")!==-1&&Array.isArray(e.locations),l=o.indexOf("lon")!==-1,c=o.indexOf("lat")!==-1,h=o.indexOf("text")!==-1,p=[];if(f?p.push(t.loc):l&&c?p.push("("+r(t.lonlat[0])+", "+r(t.lonlat[1])+")"):l?p.push("lon: "+r(t.lonlat[0])):c&&p.push("lat: "+r(t.lonlat[1])),h){var d=t.tx||e.text;Array.isArray(d)||p.push(d)}return p.join("<br>")}var i=e("../../plots/cartesian/graph_interact"),s=e("../../plots/cartesian/axes"),o=e("../scatter/get_trace_color"),u=e("./attributes");t.exports=function(e){function t(e){return l.projection(e)}function n(e){var n=e.lonlat;if(null===n[0]||null===n[1])return 1/0;if(l.isLonLatOverEdges(n))return 1/0;var r=t(n),i=a.c2p(),s=f.c2p(),o=Math.abs(i-r[0]),u=Math.abs(s-r[1]),c=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(o*o+u*u)-c,1-3/c)}var s=e.cd,u=s[0].trace,a=e.xa,f=e.ya,l=e.subplot;if(!s[0].placeholder&&(i.getClosest(s,n,e),e.index!==!1)){var c=s[e.index],h=c.lonlat,p=t(h),d=c.mrc||1;return e.x0=p[0]-d,e.x1=p[0]+d,e.y0=p[1]-d,e.y1=p[1]+d,e.loc=c.loc,e.lat=h[0],e.lon=h[1],e.color=o(u,c),e.extraText=r(u,c,l.mockAxis),[e]}}},{"../../plots/cartesian/axes":689,"../../plots/cartesian/graph_interact":696,"../scatter/get_trace_color":889,"./attributes":910}],915:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/colorbar"),r.calc=e("./calc"),r.plot=e("./plot"),r.hoverPoints=e("./hover"),r.eventData=e("./event_data"),r.moduleType="trace",r.name="scattergeo",r.basePlotModule=e("../../plots/geo"),r.categories=["geo","symbols","markerColorscale","showLegend"],r.meta={},t.exports=r},{"../../plots/geo":713,"../scatter/colorbar":884,"./attributes":910,"./calc":911,"./defaults":912,"./event_data":913,"./hover":914,"./plot":916}],916:[function(e,t,n){"use strict";function r(e,t){if(!Array.isArray(e.locations))return f.identity;var n=l(e,t),r=e.locationmode;return function(e){var t=c(r,e.loc,n);return t?(e.lonlat=t.properties.ct,e):(e.lonlat=[null,null],!1)}}function i(e,t,n){function r(e,r){p(e,t,r,n)}var i=e.marker;if(r(e.text,"tx"),r(e.textposition,"tp"),e.textfont&&(r(e.textfont.size,"ts"),r(e.textfont.color,"tc"),r(e.textfont.family,"tf")),i&&i.line){var s=i.line;r(i.opacity,"mo"),r(i.symbol,"mx"),r(i.color,"mc"),r(i.size,"ms"),r(s.color,"mlc"),r(s.width,"mlw")}}function s(e){var t=e.framework.selectAll("g.trace.scattergeo");t.style("opacity",function(e){return e[0].trace.opacity}),t.each(function(e){var t=e[0].trace,n=o.select(this);n.selectAll("path.point").call(u.pointStyle,t),n.selectAll("text").call(u.textPointStyle,t)}),t.selectAll("path.js-line").style("fill","none").each(function(e){var t=o.select(this),n=e.trace,r=n.line||{};t.call(a.stroke,r.color).call(u.dashLine,r.dash||"",r.width||0),"none"!==n.fill&&t.call(a.fill,n.fillcolor)})}var o=e("d3"),u=e("../../components/drawing"),a=e("../../components/color"),f=e("../../lib"),l=e("../../lib/topojson_utils").getTopojsonFeatures,c=e("../../lib/geo_location_utils").locationToFeature,h=e("../../lib/geojson_utils"),p=e("../../lib/array_to_calc_item"),d=e("../scatter/subtypes");t.exports=function(e,t){function n(e){return e[0].trace.uid}var u=e.framework.select(".scattergeolayer").selectAll("g.trace.scattergeo").data(t,n);u.enter().append("g").attr("class","trace scattergeo"),u.exit().remove(),u.selectAll("*").remove(),u.each(function(t){var n=o.select(this),s=t[0].trace,u=r(s,e.topojson);t[0].placeholder&&n.remove();for(var a=[],f=0;f<t.length;f++){var l=u(t[f]);l&&(i(s,t[f],f),a.push(l))}if(d.hasLines(s)||"none"!==s.fill){var c=h.calcTraceToLineCoords(a),p="none"!==s.fill?h.makePolygon(c,s):h.makeLine(c,s);n.selectAll("path.js-line").data([p]).enter().append("path").classed("js-line",!0)}d.hasMarkers(s)&&n.selectAll("path.point").data(a).enter().append("path").classed("point",!0),d.hasText(s)&&n.selectAll("g").data(a).enter().append("g").append("text")}),s(e)}},{"../../components/color":557,"../../components/drawing":580,"../../lib":657,"../../lib/array_to_calc_item":645,"../../lib/geo_location_utils":653,"../../lib/geojson_utils":654,"../../lib/topojson_utils":673,"../scatter/subtypes":901,d3:97}],917:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../components/colorscale/color_attributes"),s=e("../../constants/gl2d_dashes"),o=e("../../constants/gl_markers"),u=e("../../lib/extend").extendFlat,a=e("../../lib/extend").extendDeep,f=r.line,l=r.marker,c=l.line;t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:u({},r.text,{}),mode:{valType:"flaglist",flags:["lines","markers"],extras:["none"]},line:{color:f.color,width:f.width,dash:{valType:"enumerated",values:Object.keys(s),dflt:"solid"}},marker:a({},i("marker"),{symbol:{valType:"enumerated",values:Object.keys(o),dflt:"circle",arrayOk:!0},size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:l.opacity,showscale:l.showscale,colorbar:l.colorbar,line:a({},i("marker.line"),{width:c.width})}),connectgaps:r.connectgaps,fill:u({},r.fill,{values:["none","tozeroy","tozerox"]}),fillcolor:r.fillcolor,error_y:r.error_y,error_x:r.error_x}},{"../../components/colorscale/color_attributes":564,"../../constants/gl2d_dashes":637,"../../constants/gl_markers":639,"../../lib/extend":650,"../scatter/attributes":881}],918:[function(e,t,n){"use strict";function r(e,t){this.scene=e,this.uid=t,this.type="scattergl",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.connectgaps=!0,this.idToIndex=[],this.bounds=[0,0,0,0],this.hasLines=!1,this.lineOptions={positions:new Float64Array(0),color:[0,0,0,1],width:1,fill:[!1,!1,!1,!1],fillColor:[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],dashes:[1]},this.line=p(e.glplot,this.lineOptions),this.line._trace=this,this.hasErrorX=!1,this.errorXOptions={positions:new Float64Array(0),errors:new Float64Array(0),lineWidth:1,capSize:0,color:[0,0,0,1]},this.errorX=d(e.glplot,this.errorXOptions),this.errorX._trace=this,this.hasErrorY=!1,this.errorYOptions={positions:new Float64Array(0),errors:new Float64Array(0),lineWidth:1,capSize:0,color:[0,0,0,1]},this.errorY=d(e.glplot,this.errorYOptions),this.errorY._trace=this,this.hasMarkers=!1,this.scatterOptions={positions:new Float64Array(0),sizes:[],colors:[],glyphs:[],borderWidths:[],borderColors:[],size:12,color:[0,0,0,1],borderSize:1,borderColor:[0,0,0,1]},this.scatter=c(e.glplot,this.scatterOptions),this.scatter._trace=this,this.fancyScatter=h(e.glplot,this.scatterOptions),this.fancyScatter._trace=this}function i(e,t,n){return Array.isArray(t)||(t=[t]),s(e,t,n)}function s(e,t,n){for(var r=new Array(n),i=t[0],s=0;s<n;++s)r[s]=e(s>=t.length?i:t[s]);return r}function o(e,t,n){return a(M(e,n),O(t,n),n)}function u(e,t,n,r){var i=S(e,t,r);return i=Array.isArray(i[0])?i:s(m.identity,[i],r),a(i,O(n,r),r)}function a(e,t,n){for(var r=new Array(4*n),i=0;i<n;++i){for(var s=0;s<3;++s)r[4*i+s]=e[i][s];r[4*i+3]=e[i][3]*t[i]}return r}function f(e){for(var t,n=e.length,r=Math.max(1,(n-1)/Math.min(Math.max(n,1),1e3)),i=0;i<n;i+=r)if(t=e[Math.floor(i)],!(v(t)||t instanceof Date))return!1;return!0}function l(e,t){var n=new r(e,t.uid);return n.update(t),n}var c=e("gl-scatter2d"),h=e("gl-scatter2d-fancy"),p=e("gl-line2d"),d=e("gl-error2d"),v=e("fast-isnumeric"),m=e("../../lib"),g=e("../../plots/cartesian/axes"),y=e("../../plots/cartesian/axis_autotype"),b=e("../../components/errorbars"),w=e("../../lib/str2rgbarray"),E=e("../../lib/typed_array_truncate"),S=e("../../lib/gl_format_color"),x=e("../scatter/subtypes"),T=e("../scatter/make_bubble_size_func"),N=e("../scatter/get_trace_color"),C=e("../../constants/gl_markers"),k=e("../../constants/gl2d_dashes"),L=["xaxis","yaxis"],A=r.prototype;A.handlePick=function(e){var t=e.pointId;(e.object!==this.line||this.connectgaps)&&(t=this.idToIndex[e.pointId]);var n=this.pickXData[t];return{trace:this,dataCoord:e.dataCoord,traceCoord:[v(n)||!m.isDateTime(n)?n:m.dateTime2ms(n),this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:Array.isArray(this.color)?this.color[t]:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},A.isFancy=function(e){if("linear"!==this.scene.xaxis.type&&"date"!==this.scene.xaxis.type)return!0;if("linear"!==this.scene.yaxis.type)return!0;if(!e.x||!e.y)return!0;if(this.hasMarkers){var t=e.marker||{};if(Array.isArray(t.symbol)||"circle"!==t.symbol||Array.isArray(t.size)||Array.isArray(t.color)||Array.isArray(t.line.width)||Array.isArray(t.line.color)||Array.isArray(t.opacity))return!0}return!!this.hasLines&&!this.connectgaps||!!this.hasErrorX||!!this.hasErrorY};var O=i.bind(null,function(e){return+e}),M=i.bind(null,w),_=i.bind(null,function(e){return C[e]||""});A.update=function(e){e.visible!==!0?(this.hasLines=!1,this.hasErrorX=!1,this.hasErrorY=!1,this.hasMarkers=!1):(this.hasLines=x.hasLines(e),this.hasErrorX=e.error_x.visible===!0,this.hasErrorY=e.error_y.visible===!0,this.hasMarkers=x.hasMarkers(e)),this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.connectgaps=!!e.connectgaps,this.isFancy(e)?this.updateFancy(e):this.updateFast(e),this.color=N(e,{})},A.updateFast=function(e){var t,n,r=this.xData=this.pickXData=e.x,i=this.yData=this.pickYData=e.y,s=r.length,o=new Array(s),u=new Float64Array(2*s),a=this.bounds,l=0,c=0,h=e.xcalendar,p=f(r),d=!p&&"date"===y(r,h);if(p||d)for(var g=0;g<s;++g)t=r[g],n=i[g],v(n)&&(p||(t=m.dateTime2ms(t,h)),o[l++]=g,u[c++]=t,u[c++]=n,a[0]=Math.min(a[0],t),a[1]=Math.min(a[1],n),a[2]=Math.max(a[2],t),a[3]=Math.max(a[3],n));u=E(u,c),this.idToIndex=o,this.updateLines(e,u),this.updateError("X",e),this.updateError("Y",e);var b;if(this.hasMarkers){this.scatterOptions.positions=u;var S=w(e.marker.color),x=w(e.marker.line.color),T=e.opacity*e.marker.opacity;S[3]*=T,this.scatterOptions.color=S,x[3]*=T,this.scatterOptions.borderColor=x,b=e.marker.size,this.scatterOptions.size=b,this.scatterOptions.borderSize=e.marker.line.width,this.scatter.update(this.scatterOptions)}else this.scatterOptions.positions=new Float64Array(0),this.scatterOptions.glyphs=[],this.scatter.update(this.scatterOptions);this.scatterOptions.positions=new Float64Array(0),this.scatterOptions.glyphs=[],this.fancyScatter.update(this.scatterOptions),this.expandAxesFast(a,b)},A.updateFancy=function(e){var t=this.scene,n=t.xaxis,r=t.yaxis,s=this.bounds,o=this.pickXData=n.makeCalcdata(e,"x").slice(),a=this.pickYData=r.makeCalcdata(e,"y").slice();this.xData=o.slice(),this.yData=a.slice();var f,l,c,h,p,d,v,m,g=b.calcFromTrace(e,t.fullLayout),y=o.length,w=new Array(y),S=new Float64Array(2*y),x=new Float64Array(4*y),N=new Float64Array(4*y),C=0,k=0,L=0,A=0,M="log"===n.type?n.d2l:function(e){return e},D="log"===r.type?r.d2l:function(e){return e};for(f=0;f<y;++f)this.xData[f]=c=M(o[f]),this.yData[f]=h=D(a[f]),isNaN(c)||isNaN(h)||(w[C++]=f,S[k++]=c,S[k++]=h,p=x[L++]=c-g[f].xs||0,d=x[L++]=g[f].xh-c||0,x[L++]=0,x[L++]=0,N[A++]=0,N[A++]=0,v=N[A++]=h-g[f].ys||0,m=N[A++]=g[f].yh-h||0,s[0]=Math.min(s[0],c-p),s[1]=Math.min(s[1],h-v),s[2]=Math.max(s[2],c+d),s[3]=Math.max(s[3],h+m));S=E(S,k),this.idToIndex=w,this.updateLines(e,S),this.updateError("X",e,S,x),this.updateError("Y",e,S,N);var P;if(this.hasMarkers){this.scatterOptions.positions=S,this.scatterOptions.sizes=new Array(C),this.scatterOptions.glyphs=new Array(C),this.scatterOptions.borderWidths=new Array(C),this.scatterOptions.colors=new Array(4*C),this.scatterOptions.borderColors=new Array(4*C);var H,B=T(e),j=e.marker,F=j.opacity,I=e.opacity,q=u(j,F,I,y),R=_(j.symbol,y),U=O(j.line.width,y),W=u(j.line,F,I,y);for(P=i(B,j.size,y),f=0;f<C;++f)for(H=w[f],this.scatterOptions.sizes[f]=4*P[H],this.scatterOptions.glyphs[f]=R[H],this.scatterOptions.borderWidths[f]=.5*U[H],l=0;l<4;++l)this.scatterOptions.colors[4*f+l]=q[4*H+l],this.scatterOptions.borderColors[4*f+l]=W[4*H+l];this.fancyScatter.update(this.scatterOptions)}else this.scatterOptions.positions=new Float64Array(0),this.scatterOptions.glyphs=[],this.fancyScatter.update(this.scatterOptions);this.scatterOptions.positions=new Float64Array(0),this.scatterOptions.glyphs=[],this.scatter.update(this.scatterOptions),this.expandAxesFancy(o,a,P)},A.updateLines=function(e,t){var n;if(this.hasLines){var r=t;if(!e.connectgaps){var i=0,s=this.xData,u=this.yData;for(r=new Float64Array(2*s.length),n=0;n<s.length;++n)r[i++]=s[n],r[i++]=u[n]}this.lineOptions.positions=r;var a=o(e.line.color,e.opacity,1),f=Math.round(.5*this.lineOptions.width),l=(k[e.line.dash]||[1]).slice();for(n=0;n<l.length;++n)l[n]*=f;switch(e.fill){case"tozeroy":this.lineOptions.fill=[!1,!0,!1,!1];break;case"tozerox":this.lineOptions.fill=[!0,!1,!1,!1];break;default:this.lineOptions.fill=[!1,!1,!1,!1]}var c=w(e.fillcolor);this.lineOptions.color=a,this.lineOptions.width=2*e.line.width,this.lineOptions.dashes=l,this.lineOptions.fillColor=[c,c,c,c]}else this.lineOptions.positions=new Float64Array(0);this.line.update(this.lineOptions)},A.updateError=function(e,t,n,r){var i=this["error"+e],s=t["error_"+e.toLowerCase()],u=this["error"+e+"Options"];"x"===e.toLowerCase()&&s.copy_ystyle&&(s=t.error_y),this["hasError"+e]?(u.positions=n,u.errors=r,u.capSize=s.width,u.lineWidth=s.thickness/2,u.color=o(s.color,1,1)):u.positions=new Float64Array(0),i.update(u)},A.expandAxesFast=function(e,t){for(var n,r,i,s=t||10,o=0;o<2;o++)n=this.scene[L[o]],r=n._min,r||(r=[]),r.push({val:e[o],pad:s}),i=n._max,i||(i=[]),i.push({val:e[o+2],pad:s})},A.expandAxesFancy=function(e,t,n){var r=this.scene,i={padded:!0,ppad:n};g.expand(r.xaxis,e,i),g.expand(r.yaxis,t,i)},A.dispose=function(){this.line.dispose(),this.errorX.dispose(),this.errorY.dispose(),this.scatter.dispose(),this.fancyScatter.dispose()},t.exports=l},{"../../components/errorbars":586,"../../constants/gl2d_dashes":637,"../../constants/gl_markers":639,"../../lib":657,"../../lib/gl_format_color":655,"../../lib/str2rgbarray":671,"../../lib/typed_array_truncate":674,"../../plots/cartesian/axes":689,"../../plots/cartesian/axis_autotype":690,"../scatter/get_trace_color":889,"../scatter/make_bubble_size_func":896,"../scatter/subtypes":901,"fast-isnumeric":106,"gl-error2d":133,"gl-line2d":143,"gl-scatter2d":218,"gl-scatter2d-fancy":213}],919:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../scatter/constants"),s=e("../scatter/subtypes"),o=e("../scatter/xy_defaults"),u=e("../scatter/marker_defaults"),a=e("../scatter/line_defaults"),f=e("../scatter/fillcolor_defaults"),l=e("../../components/errorbars/defaults"),c=e("./attributes");t.exports=function(e,t,n,p){function d(n,i){return r.coerce(e,t,c,n,i)}var v=o(e,t,p,d);return v?(d("text"),d("mode",v<i.PTS_LINESONLY?"lines+markers":"lines"),s.hasLines(t)&&(d("connectgaps"),a(e,t,n,p,d)),s.hasMarkers(t)&&u(e,t,n,p,d),d("fill"),"none"!==t.fill&&f(e,t,n,d),l(e,t,n,{axis:"y"}),void l(e,t,n,{axis:"x",inherit:"y"})):void (t.visible=!1)}},{"../../components/errorbars/defaults":585,"../../lib":657,"../scatter/constants":886,"../scatter/fillcolor_defaults":888,"../scatter/line_defaults":892,"../scatter/marker_defaults":897,"../scatter/subtypes":901,"../scatter/xy_defaults":903,"./attributes":917}],920:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/colorbar"),r.calc=e("../scatter3d/calc"),r.plot=e("./convert"),r.moduleType="trace",r.name="scattergl",r.basePlotModule=e("../../plots/gl2d"),r.categories=["gl2d","symbols","errorBarsOK","markerColorscale","showLegend"],r.meta={},t.exports=r},{"../../plots/gl2d":725,"../scatter/colorbar":884,"../scatter3d/calc":905,"./attributes":917,"./convert":918,"./defaults":919}],921:[function(e,t,n){"use strict";var r=e("../scattergeo/attributes"),i=e("../scatter/attributes"),s=e("../../plots/mapbox/layout_attributes"),o=e("../../plots/attributes"),u=e("../../components/colorbar/attributes"),a=e("../../lib/extend").extendFlat,f=r.line,l=r.marker;t.exports={lon:r.lon,lat:r.lat,mode:{valType:"flaglist",flags:["lines","markers","text"],dflt:"markers",extras:["none"]},text:a({},i.text,{}),line:{color:f.color,width:f.width,dash:f.dash},connectgaps:i.connectgaps,marker:{symbol:{valType:"string",dflt:"circle",arrayOk:!0},opacity:a({},l.opacity,{arrayOk:!1}),size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,color:l.color,colorscale:l.colorscale,cauto:l.cauto,cmax:l.cmax,cmin:l.cmin,autocolorscale:l.autocolorscale,reversescale:l.reversescale,showscale:l.showscale,colorbar:u},fill:r.fill,fillcolor:i.fillcolor,textfont:s.layers.symbol.textfont,textposition:s.layers.symbol.textposition,hoverinfo:a({},o.hoverinfo,{flags:["lon","lat","text","name"]})}},{"../../components/colorbar/attributes":558,"../../lib/extend":650,"../../plots/attributes":687,"../../plots/mapbox/layout_attributes":745,"../scatter/attributes":881,"../scattergeo/attributes":910}],922:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("../../components/colorscale"),o=e("../scatter/subtypes"),u=e("../scatter/colorscale_calc"),a=e("../scatter/make_bubble_size_func");t.exports=function(e,t){var n=t.lon.length,f=t.marker,c=o.hasMarkers(t),h=c&&Array.isArray(f.color),p=c&&Array.isArray(f.size),d=c&&Array.isArray(f.symbol),v=Array.isArray(t.text);u(t);for(var m=s.hasColorscale(t,"marker")?s.makeColorScaleFunc(s.extractScale(f.colorscale,f.cmin,f.cmax)):i.identity,g=o.isBubble(t)?a(t):i.identity,y=[],b=0,w=0;w<n;w++){var E=t.lon[w],S=t.lat[w];if(r(E)&&r(S)){var x={};if(b++,x.lonlat=[+E,+S],c){if(h){var T=f.color[w];x.mc=T,x.mcc=m(T)}if(p){var N=f.size[w];x.ms=N,x.mrc=g(N)}if(d){var C=f.symbol[w];x.mx="string"==typeof C?C:"circle"}}if(v){var k=t.text[w];x.tx="string"==typeof k?k:""}y.push(x)}else b>0&&(y[b-1].gapAfter=!0)}return y}},{"../../components/colorscale":571,"../../lib":657,"../scatter/colorscale_calc":885,"../scatter/make_bubble_size_func":896,"../scatter/subtypes":901,"fast-isnumeric":106}],923:[function(e,t,n){"use strict";function r(){return{geojson:c.makeBlank(),layout:{visibility:"none"},paint:{}}}function i(e,t){function n(e,n,r,i){void 0===t[n][r]&&(t[n][r]=i),e[n]=t[n][r]}for(var r=e[0].trace,i=r.marker,s=Array.isArray(i.color),o=Array.isArray(i.size),u=[],a=0;a<e.length;a++){var f=e[a],l={};s&&n(l,d,f.mcc,a),o&&n(l,v,f.mrc,a),u.push({type:"Feature",geometry:{type:"Point",coordinates:f.lonlat},properties:l})}return{type:"FeatureCollection",features:u}}function s(e){for(var t=e[0].trace,n=t.marker||{},r=n.symbol,i=t.text,s="circle"!==r?a(r):f,o=h.hasText(t)?a(i):f,u=[],l=0;l<e.length;l++){var c=e[l];u.push({type:"Feature",geometry:{type:"Point",coordinates:c.lonlat},properties:{symbol:s(c.mx),text:o(c.tx)}})}return{type:"FeatureCollection",features:u}}function o(e,t){var n,r=e.marker;if(Array.isArray(r.color)){for(var i=Object.keys(t[d]),s=[],o=0;o<i.length;o++){var u=i[o];s.push([t[d][u],u])}n={property:d,stops:s}}else n=r.color;return n}function u(e,t){var n,r=e.marker;if(Array.isArray(r.size)){for(var i=Object.keys(t[v]),s=[],o=0;o<i.length;o++){var u=i[o];s.push([t[v][u],+u])}s.sort(function(e,t){return e[0]-t[0]}),n={property:v,stops:s}}else n=r.size/2;return n}function a(e){return Array.isArray(e)?function(e){return e}:e?function(){return e}:f}function f(){return""}var l=e("../../lib"),c=e("../../lib/geojson_utils"),h=e("../scatter/subtypes"),p=e("../../plots/mapbox/convert_text_opts"),d="circle-color",v="circle-radius";t.exports=function(e){var t=e[0].trace,n=t.visible===!0,a="none"!==t.fill,f=h.hasLines(t),g=h.hasMarkers(t),y=h.hasText(t),b=g&&"circle"===t.marker.symbol,w=g&&"circle"!==t.marker.symbol,E=r(),S=r(),x=r(),T=r(),N={fill:E,line:S,circle:x,symbol:T};if(!n||e[0].placeholder)return N;var C;if((a||f)&&(C=c.calcTraceToLineCoords(e)),a&&(E.geojson=c.makePolygon(C),E.layout.visibility="visible",l.extendFlat(E.paint,{"fill-color":t.fillcolor})),f&&(S.geojson=c.makeLine(C),S.layout.visibility="visible",l.extendFlat(S.paint,{"line-width":t.line.width,"line-color":t.line.color,"line-opacity":t.opacity})),b){var k={};k[d]={},k[v]={},x.geojson=i(e,k),x.layout.visibility="visible",l.extendFlat(x.paint,{"circle-opacity":t.opacity*t.marker.opacity,"circle-color":o(t,k),"circle-radius":u(t,k)})}if((w||y)&&(T.geojson=s(e),l.extendFlat(T.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),w&&(l.extendFlat(T.layout,{"icon-size":t.marker.size/10}),l.extendFlat(T.paint,{"icon-opacity":t.opacity*t.marker.opacity,"icon-color":t.marker.color})),y)){var L=(t.marker||{}).size,A=p(t.textposition,L);l.extendFlat(T.layout,{"text-size":t.textfont.size,"text-anchor":A.anchor,"text-offset":A.offset}),l.extendFlat(T.paint,{"text-color":t.textfont.color,"text-opacity":t.opacity})}return N}},{"../../lib":657,"../../lib/geojson_utils":654,"../../plots/mapbox/convert_text_opts":742,"../scatter/subtypes":901}],924:[function(e,t,n){"use strict";function r(e,t,n){var r=n("lon")||[],i=n("lat")||[],s=Math.min(r.length,i.length);return s<r.length&&(t.lon=r.slice(0,s)),s<i.length&&(t.lat=i.slice(0,s)),s}var i=e("../../lib"),s=e("../scatter/subtypes"),o=e("../scatter/marker_defaults"),u=e("../scatter/line_defaults"),a=e("../scatter/text_defaults"),f=e("../scatter/fillcolor_defaults"),l=e("./attributes"),c=e("../scatter/attributes");t.exports=function(e,t,n,p){function d(n,r){return i.coerce(e,t,l,n,r)}function v(n,r){var s=n.indexOf(".line")===-1?l:c;return i.coerce(e,t,s,n,r)}var m=r(e,t,d);if(!m)return void (t.visible=!1);if(d("text"),d("mode"),s.hasLines(t)&&(u(e,t,n,p,d),d("connectgaps")),s.hasMarkers(t)){o(e,t,n,p,v);var g=t.marker;"circle"!==g.symbol&&(Array.isArray(g.size)&&(g.size=g.size[0]),Array.isArray(g.color)&&(g.color=g.color[0]))}s.hasText(t)&&a(e,t,p,d),d("fill"),"none"!==t.fill&&f(e,t,n,d),d("hoverinfo",1===p._dataLength?"lon+lat+text":void 0)}},{"../../lib":657,"../scatter/attributes":881,"../scatter/fillcolor_defaults":888,"../scatter/line_defaults":892,"../scatter/marker_defaults":897,"../scatter/subtypes":901,"../scatter/text_defaults":902,"./attributes":921}],925:[function(e,t,n){"use strict";t.exports=function(e,t){return e.lon=t.lon,e.lat=t.lat,e}},{}],926:[function(e,t,n){"use strict";function r(e,t){function n(e){return e+""}var r=e.hoverinfo.split("+"),i=r.indexOf("all")!==-1,s=r.indexOf("lon")!==-1,o=r.indexOf("lat")!==-1,u=t.lonlat,a=[];if(i||s&&o?a.push("("+n(u[0])+", "+n(u[1])+")"):s?a.push("lon: "+n(u[0])):o&&a.push("lat: "+n(u[1])),i||r.indexOf("text")!==-1){var f=t.tx||e.text;Array.isArray(f)||a.push(f)}return a.join("<br>")}var i=e("../../plots/cartesian/graph_interact"),s=e("../scatter/get_trace_color");t.exports=function(e,t,n){function o(e){var t=e.lonlat,r=Math.abs(l.c2p(t)-l.c2p([d,t[1]])),i=Math.abs(c.c2p(t)-c.c2p([t[0],n])),s=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(r*r+i*i)-s,1-3/s)}var u=e.cd,f=u[0].trace,l=e.xa,c=e.ya;if(!u[0].placeholder){var h=t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360),p=360*h,d=t-p;if(i.getClosest(u,o,e),e.index!==!1){var v=u[e.index],m=v.lonlat,g=[m[0]+p,m[1]],y=l.c2p(g),b=c.c2p(g),w=v.mrc||1;return e.x0=y-w,e.x1=y+w,e.y0=b-w,e.y1=b+w,e.color=s(f,v),e.extraText=r(f,v),[e]}}}},{"../../plots/cartesian/graph_interact":696,"../scatter/get_trace_color":889}],927:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/colorbar"),r.calc=e("./calc"),r.hoverPoints=e("./hover"),r.eventData=e("./event_data"),r.plot=e("./plot"),r.moduleType="trace",r.name="scattermapbox",r.basePlotModule=e("../../plots/mapbox"),r.categories=["mapbox","gl","symbols","markerColorscale","showLegend"],r.meta={},t.exports=r},{"../../plots/mapbox":743,"../scatter/colorbar":884,"./attributes":921,"./calc":922,"./defaults":924,"./event_data":925,"./hover":926,"./plot":928}],928:[function(e,t,n){"use strict";function r(e,t){this.mapbox=e,this.map=e.map,this.uid=t,this.idSourceFill=t+"-source-fill",this.idSourceLine=t+"-source-line",this.idSourceCircle=t+"-source-circle",this.idSourceSymbol=t+"-source-symbol",this.idLayerFill=t+"-layer-fill",this.idLayerLine=t+"-layer-line",this.idLayerCircle=t+"-layer-circle",this.idLayerSymbol=t+"-layer-symbol",this.mapbox.initSource(this.idSourceFill),this.mapbox.initSource(this.idSourceLine),this.mapbox.initSource(this.idSourceCircle),this.mapbox.initSource(this.idSourceSymbol),this.map.addLayer({id:this.idLayerFill,source:this.idSourceFill,type:"fill"}),this.map.addLayer({id:this.idLayerLine,source:this.idSourceLine,type:"line"}),this.map.addLayer({id:this.idLayerCircle,source:this.idSourceCircle,type:"circle"}),this.map.addLayer({id:this.idLayerSymbol,source:this.idSourceSymbol,type:"symbol"})}function i(e){return"visible"===e.layout.visibility}var s=e("./convert"),o=r.prototype;o.update=function(e){var t=this.mapbox,n=s(e);t.setOptions(this.idLayerFill,"setLayoutProperty",n.fill.layout),t.setOptions(this.idLayerLine,"setLayoutProperty",n.line.layout),t.setOptions(this.idLayerCircle,"setLayoutProperty",n.circle.layout),t.setOptions(this.idLayerSymbol,"setLayoutProperty",n.symbol.layout),i(n.fill)&&(t.setSourceData(this.idSourceFill,n.fill.geojson),t.setOptions(this.idLayerFill,"setPaintProperty",n.fill.paint)),i(n.line)&&(t.setSourceData(this.idSourceLine,n.line.geojson),t.setOptions(this.idLayerLine,"setPaintProperty",n.line.paint)),i(n.circle)&&(t.setSourceData(this.idSourceCircle,n.circle.geojson),t.setOptions(this.idLayerCircle,"setPaintProperty",n.circle.paint)),i(n.symbol)&&(t.setSourceData(this.idSourceSymbol,n.symbol.geojson),t.setOptions(this.idLayerSymbol,"setPaintProperty",n.symbol.paint))},o.dispose=function(){var e=this.map;e.removeLayer(this.idLayerFill),e.removeLayer(this.idLayerLine),e.removeLayer(this.idLayerCircle),e.removeLayer(this.idLayerSymbol),e.removeSource(this.idSourceFill),e.removeSource(this.idSourceLine),e.removeSource(this.idSourceCircle),e.removeSource(this.idSourceSymbol)},t.exports=function(e,t){var n=t[0].trace,i=new r(e,n.uid);return i.update(t),i}},{"./convert":923}],929:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../plots/attributes"),s=e("../../components/colorscale/color_attributes"),o=e("../../components/colorbar/attributes"),u=e("../../lib/extend").extendFlat,a=r.marker,f=r.line,l=a.line;t.exports={a:{valType:"data_array"},b:{valType:"data_array"},c:{valType:"data_array"},sum:{valType:"number",dflt:0,min:0},mode:u({},r.mode,{dflt:"markers"}),text:u({},r.text,{}),line:{color:f.color,width:f.width,dash:f.dash,shape:u({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing},connectgaps:r.connectgaps,fill:u({},r.fill,{values:["none","toself","tonext"]}),fillcolor:r.fillcolor,marker:u({},{symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:u({},{width:l.width},s("marker".line))},s("marker"),{showscale:a.showscale,colorbar:o}),textfont:r.textfont,textposition:r.textposition,hoverinfo:u({},i.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:r.hoveron}},{"../../components/colorbar/attributes":558,"../../components/colorscale/color_attributes":564,"../../lib/extend":650,"../../plots/attributes":687,"../scatter/attributes":881}],930:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../plots/cartesian/axes"),s=e("../scatter/subtypes"),o=e("../scatter/colorscale_calc"),u=e("../scatter/arrays_to_calcdata"),a=["a","b","c"],f={a:["b","c"],b:["a","c"],c:["a","b"]};t.exports=function(e,t){var n,c,h,p,d,v,m=e._fullLayout[t.subplot],g=m.sum,y=t.sum||g;for(n=0;n<a.length;n++)if(h=a[n],!t[h]){for(d=t[f[h][0]],v=t[f[h][1]],p=new Array(d.length),c=0;c<d.length;c++)p[c]=y-d[c]-v[c];t[h]=p}var b,w,E,S,x,T,N=t.a.length,C=new Array(N);for(n=0;n<N;n++)b=t.a[n],w=t.b[n],E=t.c[n],r(b)&&r(w)&&r(E)?(b=+b,w=+w,E=+E,S=g/(b+w+E),1!==S&&(b*=S,w*=S,E*=S),T=b,x=E-w,C[n]={x:x,y:T,a:b,b:w,c:E}):C[n]={x:!1,y:!1};var k,L;if(s.hasMarkers(t)&&(k=t.marker,L=k.size,Array.isArray(L))){var A={type:"linear"};i.setConvert(A),L=A.makeCalcdata(t.marker,"size"),L.length>N&&L.splice(N,L.length-N)}return o(t),u(C,t),C}},{"../../plots/cartesian/axes":689,"../scatter/arrays_to_calcdata":880,"../scatter/colorscale_calc":885,"../scatter/subtypes":901,"fast-isnumeric":106}],931:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../scatter/constants"),s=e("../scatter/subtypes"),o=e("../scatter/marker_defaults"),u=e("../scatter/line_defaults"),a=e("../scatter/line_shape_defaults"),f=e("../scatter/text_defaults"),l=e("../scatter/fillcolor_defaults"),c=e("./attributes");t.exports=function(e,t,n,p){function d(n,i){return r.coerce(e,t,c,n,i)}var v,m=d("a"),g=d("b"),y=d("c");if(m?(v=m.length,g?(v=Math.min(v,g.length),y&&(v=Math.min(v,y.length))):v=y?Math.min(v,y.length):0):g&&y&&(v=Math.min(g.length,y.length)),!v)return void (t.visible=!1);m&&v<m.length&&(t.a=m.slice(0,v)),g&&v<g.length&&(t.b=g.slice(0,v)),y&&v<y.length&&(t.c=y.slice(0,v)),d("sum"),d("text");var b=v<i.PTS_LINESONLY?"lines+markers":"lines";d("mode",b),s.hasLines(t)&&(u(e,t,n,p,d),a(e,t,d),d("connectgaps")),s.hasMarkers(t)&&o(e,t,n,p,d),s.hasText(t)&&f(e,t,p,d);var w=[];(s.hasMarkers(t)||s.hasText(t))&&(d("marker.maxdisplayed"),w.push("points")),d("fill"),"none"!==t.fill&&(l(e,t,n,d),s.hasLines(t)||a(e,t,d)),d("hoverinfo",1===p._dataLength?"a+b+c+text":void 0),"tonext"!==t.fill&&"toself"!==t.fill||w.push("fills"),d("hoveron",w.join("+")||"points")}},{"../../lib":657,"../scatter/constants":886,"../scatter/fillcolor_defaults":888,"../scatter/line_defaults":892,"../scatter/line_shape_defaults":894,"../scatter/marker_defaults":897,"../scatter/subtypes":901,"../scatter/text_defaults":902,"./attributes":929}],932:[function(e,t,n){"use strict";var r=e("../scatter/hover"),i=e("../../plots/cartesian/axes");t.exports=function(e,t,n,s){function o(e,t){g.push(e._hovertitle+": "+i.tickText(e,t,"hover").text)}var u=r(e,t,n,s);if(u&&u[0].index!==!1){var a=u[0];if(void 0===a.index){var f=1-a.y0/e.ya._length,l=e.xa._length,c=l*f/2,h=l-c;return a.x0=Math.max(Math.min(a.x0,h),c),a.x1=Math.max(Math.min(a.x1,h),c),u}var p=a.cd[a.index];a.a=p.a,a.b=p.b,a.c=p.c,a.xLabelVal=void 0,a.yLabelVal=void 0;var d=a.trace,v=d._ternary,m=d.hoverinfo.split("+"),g=[];return m.indexOf("all")!==-1&&(m=["a","b","c"]),m.indexOf("a")!==-1&&o(v.aaxis,p.a),m.indexOf("b")!==-1&&o(v.baxis,p.b),m.indexOf("c")!==-1&&o(v.caxis,p.c),a.extraText=g.join("<br>"),u}}},{"../../plots/cartesian/axes":689,"../scatter/hover":890}],933:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/colorbar"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.selectPoints=e("./select"),r.moduleType="trace",r.name="scatterternary",r.basePlotModule=e("../../plots/ternary"),r.categories=["ternary","symbols","markerColorscale","showLegend"],r.meta={},t.exports=r},{"../../plots/ternary":757,"../scatter/colorbar":884,"./attributes":929,"./calc":930,"./defaults":931,"./hover":932,"./plot":934,"./select":935,"./style":936}],934:[function(e,t,n){"use strict";var r=e("../scatter/plot");t.exports=function(e,t){var n=e.plotContainer;n.select(".scatterlayer").selectAll("*").remove();for(var i={xaxis:e.xaxis,yaxis:e.yaxis,plot:n},s=new Array(t.length),o=e.graphDiv.calcdata,u=0;u<o.length;u++){var a=t.indexOf(o[u][0].trace);a!==-1&&(s[a]=o[u],t[a]._ternary=e)}r(e.graphDiv,i,s)}},{"../scatter/plot":898}],935:[function(e,t,n){"use strict";var r=e("../scatter/select");t.exports=function(e,t){var n=r(e,t);if(n){var i,s,o,u=e.cd;for(o=0;o<n.length;o++)i=n[o],s=u[i.pointNumber],i.a=s.a,i.b=s.b,i.c=s.c,delete i.x,delete i.y;return n}}},{"../scatter/select":899}],936:[function(e,t,n){"use strict";var r=e("../scatter/style");t.exports=function(e){for(var t=e._fullLayout._modules,n=0;n<t.length;n++)if("scatter"===t[n].name)return;r(e)}},{"../scatter/style":900}],937:[function(e,t,n){"use strict";function r(e){return{valType:"boolean",dflt:!1}}function i(e){return{show:{valType:"boolean",dflt:!1},project:{x:r("x"),y:r("y"),z:r("z")},color:{valType:"color",dflt:s.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:s.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var s=e("../../components/color"),o=e("../../components/colorscale/attributes"),u=e("../../components/colorbar/attributes"),a=e("../../lib/extend").extendFlat;t.exports={z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"data_array"},surfacecolor:{valType:"data_array"},cauto:o.zauto,cmin:o.zmin,cmax:o.zmax,colorscale:o.colorscale,autocolorscale:a({},o.autocolorscale,{dflt:!1}),reversescale:o.reversescale,showscale:o.showscale,colorbar:u,contours:{x:i("x"),y:i("y"),z:i("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_deprecated:{zauto:a({},o.zauto,{}),zmin:a({},o.zmin,{}),zmax:a({},o.zmax,{})}}},{"../../components/color":557,"../../components/colorbar/attributes":558,"../../components/colorscale/attributes":562,"../../lib/extend":650}],938:[function(e,t,n){"use strict";var r=e("../../components/colorscale/calc");t.exports=function(e,t){t.surfacecolor?r(t,t.surfacecolor,"","c"):r(t,t.z,"","c")}},{"../../components/colorscale/calc":563}],939:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("../../plots/plots"),o=e("../../components/colorscale"),u=e("../../components/colorbar/draw");t.exports=function(e,t){var n=t[0].trace,f="cb"+n.uid,l=n.cmin,c=n.cmax,h=n.surfacecolor||n.z;if(r(l)||(l=i.aggNums(Math.min,null,h)),r(c)||(c=i.aggNums(Math.max,null,h)),e._fullLayout._infolayer.selectAll("."+f).remove(),!n.showscale)return void s.autoMargin(e,f);var p=t[0].t.cb=u(e,f),d=o.makeColorScaleFunc(o.extractScale(n.colorscale,l,c),{noNumericCheck:!0});p.fillcolor(d).filllevels({start:l,end:c,size:(c-l)/254}).options(n.colorbar)()}},{"../../components/colorbar/draw":560,"../../components/colorscale":571,"../../lib":657,"../../plots/plots":749,"fast-isnumeric":106}],940:[function(e,t,n){"use strict";function r(e,t,n){this.scene=e,this.uid=n,this.surface=t,this.data=null,this.showContour=[!1,!1,!1],this.dataScale=1}function i(e,t){return void 0===t&&(t=1),e.map(function(e){var n=e[0],r=d(e[1]),i=r.toRgb();return{index:n,rgb:[i.r,i.g,i.b,t]}})}function s(e){var t=e[0].rgb,n=e[e.length-1].rgb;return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function o(e){var t=e.shape,n=[t[0]+2,t[1]+2],r=l(new Float32Array(n[0]*n[1]),n);return p.assign(r.lo(1,1).hi(t[0],t[1]),e),p.assign(r.lo(1).hi(t[0],1),e.hi(t[0],1)),p.assign(r.lo(1,n[1]-1).hi(t[0],1),e.lo(0,t[1]-1).hi(t[0],1)),p.assign(r.lo(0,1).hi(1,t[1]),e.hi(1)),p.assign(r.lo(n[0]-1,1).hi(1,t[1]),e.lo(t[0]-1)),r.set(0,0,e.get(0,0)),r.set(0,n[1]-1,e.get(0,t[1]-1)),r.set(n[0]-1,0,e.get(t[0]-1,0)),r.set(n[0]-1,n[1]-1,e.get(t[0]-1,t[1]-1)),r}function u(e){var t=Math.max(e[0].shape[0],e[0].shape[1]);if(t<m){for(var n=m/t,r=[0|Math.floor(e[0].shape[0]*n+1),0|Math.floor(e[0].shape[1]*n+1)],i=r[0]*r[1],s=0;s<e.length;++s){var u=o(e[s]),a=l(new Float32Array(i),r);c(a,u,[n,0,0,0,n,0,0,0,1]),e[s]=a}return n}return 1}function a(e,t){var n=e.glplot.gl,i=f({gl:n}),s=new r(e,i,t.uid);return s.update(t),e.glplot.add(i),s}var f=e("gl-surface3d"),l=e("ndarray"),c=e("ndarray-homography"),h=e("ndarray-fill"),p=e("ndarray-ops"),d=e("tinycolor2"),v=e("../../lib/str2rgbarray"),m=128,g=r.prototype;g.handlePick=function(e){if(e.object===this.surface){var t=[Math.min(0|Math.round(e.data.index[0]/this.dataScale-1),this.data.z[0].length-1),Math.min(0|Math.round(e.data.index[1]/this.dataScale-1),this.data.z.length-1)],n=[0,0,0];Array.isArray(this.data.x[0])?n[0]=this.data.x[t[1]][t[0]]:n[0]=this.data.x[t[0]],Array.isArray(this.data.y[0])?n[1]=this.data.y[t[1]][t[0]]:n[1]=this.data.y[t[1]],n[2]=this.data.z[t[1]][t[0]],e.traceCoordinate=n;var r=this.scene.fullSceneLayout;e.dataCoordinate=[r.xaxis.d2l(n[0],0,this.data.xcalendar)*this.scene.dataScale[0],r.yaxis.d2l(n[1],0,this.data.ycalendar)*this.scene.dataScale[1],r.zaxis.d2l(n[2],0,this.data.zcalendar)*this.scene.dataScale[2]];var i=this.data.text;return i&&i[t[1]]&&void 0!==i[t[1]][t[0]]?e.textLabel=i[t[1]][t[0]]:e.textLabel="",e.data.dataCoordinate=e.dataCoordinate.slice(),this.surface.highlight(e.data),this.scene.glplot.spikes.position=e.dataCoordinate,!0}},g.setContourLevels=function(){for(var e=[[],[],[]],t=!1,n=0;n<3;++n)this.showContour[n]&&(t=!0,e[n]=this.scene.contourLevels[n]);t&&this.surface.update({levels:e})},g.update=function(e){var t,n=this.scene,r=n.fullSceneLayout,o=this.surface,a=e.opacity,f=i(e.colorscale,a),c=e.z,p=e.x,d=e.y,m=r.xaxis,g=r.yaxis,y=r.zaxis,b=n.dataScale,w=c[0].length,E=c.length,S=[l(new Float32Array(w*E),[w,E]),l(new Float32Array(w*E),[w,E]),l(new Float32Array(w*E),[w,E])],x=S[0],T=S[1],N=n.contourLevels;this.data=e;var C=e.xcalendar,k=e.ycalendar,L=e.zcalendar;h(S[2],function(e,t){return y.d2l(c[t][e],0,L)*b[2]}),Array.isArray(p[0])?h(x,function(e,t){return m.d2l(p[t][e],0,C)*b[0]}):h(x,function(e){return m.d2l(p[e],0,C)*b[0]}),Array.isArray(d[0])?h(T,function(e,t){return g.d2l(d[t][e],0,k)*b[1]}):h(T,function(e,t){return g.d2l(d[t],0,k)*b[1]});var A={colormap:f,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!e.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:1};if(A.intensityBounds=[e.cmin,e.cmax],e.surfacecolor){var O=l(new Float32Array(w*E),[w,E]);h(O,function(t,n){return e.surfacecolor[n][t]}),S.push(O)}else A.intensityBounds[0]*=b[2],A.intensityBounds[1]*=b[2];this.dataScale=u(S),e.surfacecolor&&(A.intensity=S.pop()),"opacity"in e&&e.opacity<1&&(A.opacity=.25*e.opacity);var M=[!0,!0,!0],_=["x","y","z"];for(t=0;t<3;++t){var D=e.contours[_[t]];M[t]=D.highlight,A.showContour[t]=D.show||D.highlight,A.showContour[t]&&(A.contourProject[t]=[D.project.x,D.project.y,D.project.z],D.show?(this.showContour[t]=!0,A.levels[t]=N[t],o.highlightColor[t]=A.contourColor[t]=v(D.color),D.usecolormap?o.highlightTint[t]=A.contourTint[t]=0:o.highlightTint[t]=A.contourTint[t]=1,A.contourWidth[t]=D.width):this.showContour[t]=!1,D.highlight&&(A.dynamicColor[t]=v(D.highlightcolor),A.dynamicWidth[t]=D.highlightwidth))}s(f)&&(A.vertexColor=!0),A.coords=S,o.update(A),o.visible=e.visible,o.enableDynamic=M,o.snapToData=!0,"lighting"in e&&(o.ambientLight=e.lighting.ambient,o.diffuseLight=e.lighting.diffuse,o.specularLight=e.lighting.specular,o.roughness=e.lighting.roughness,o.fresnel=e.lighting.fresnel),"lightposition"in e&&(o.lightPosition=[e.lightposition.x,e.lightposition.y,e.lightposition.z]),a&&a<1&&(o.supportsTransparency=!0)},g.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},t.exports=a},{"../../lib/str2rgbarray":671,"gl-surface3d":236,ndarray:432,"ndarray-fill":422,"ndarray-homography":424,"ndarray-ops":426,tinycolor2:495}],941:[function(e,t,n){"use strict";function r(e,t,n){t in e&&!(n in e)&&(e[n]=e[t])}var i=e("../../registry"),s=e("../../lib"),o=e("../../components/colorscale/defaults"),u=e("./attributes");t.exports=function(e,t,n,f){function l(n,r){return s.coerce(e,t,u,n,r)}var c,h,p=l("z");if(!p)return void (t.visible=!1);var d=p[0].length,v=p.length;l("x"),l("y");var m=i.getComponentMethod("calendars","handleTraceDefaults");if(m(e,t,["x","y","z"],f),!Array.isArray(t.x))for(t.x=[],c=0;c<d;++c)t.x[c]=c;if(l("text"),!Array.isArray(t.y))for(t.y=[],c=0;c<v;++c)t.y[c]=c;["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","opacity"].forEach(function(e){l(e)});var g=l("surfacecolor");l("colorscale");var y=["x","y","z"];for(c=0;c<3;++c){var b="contours."+y[c],w=l(b+".show"),E=l(b+".highlight");if(w||E)for(h=0;h<3;++h)l(b+".project."+y[h]);w&&(l(b+".color"),l(b+".width"),l(b+".usecolormap")),E&&(l(b+".highlightcolor"),l(b+".highlightwidth"))}g||(r(e,"zmin","cmin"),r(e,"zmax","cmax"),r(e,"zauto","cauto")),o(e,t,f,l,{prefix:"",cLetter:"c"})}},{"../../components/colorscale/defaults":566,"../../lib":657,"../../registry":764,"./attributes":937}],942:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("./colorbar"),r.calc=e("./calc"),r.plot=e("./convert"),r.moduleType="trace",r.name="surface",r.basePlotModule=e("../../plots/gl3d"),r.categories=["gl3d","noOpacity"],r.meta={},t.exports=r},{"../../plots/gl3d":728,"./attributes":937,"./calc":938,"./colorbar":939,"./convert":940,"./defaults":941}],943:[function(e,t,n){"use strict";function r(e,t){if("string"==typeof t&&t){var n=o.nestedProperty(e,t).get();return Array.isArray(n)?n:[]}return!!Array.isArray(t)&&t.slice()}function i(e,t,n){var r;if(Array.isArray(n)){if(r={type:l(n),_categories:[]},c(r),"category"===r.type)for(var i=0;i<n.length;i++)r.d2c(n[i])}else r=f.getFromTrace(e,t,n);return r?r.d2c:"ids"===n?function(e){return String(e)}:function(e){return+e}}function s(e,t,n){function r(e){return e.indexOf(s)!==-1}var i,s=e.operation,o=e.value,u=Array.isArray(o),a=function(n){return t(n,0,e.valuecalendar)},f=function(e){return t(e,0,n)};switch(r(h)?i=a(u?o[0]:o):r(p)?i=u?[a(o[0]),a(o[1])]:[a(o),a(o)]:r(d)&&(i=u?o.map(a):[a(o)]),s){case"=":return function(e){return f(e)===i};case"<":return function(e){return f(e)<i};case"<=":return function(e){return f(e)<=i};case">":return function(e){return f(e)>i};case">=":return function(e){return f(e)>=i};case"[]":return function(e){var t=f(e);return t>=i[0]&&t<=i[1]};case"()":return function(e){var t=f(e);return t>i[0]&&t<i[1]};case"[)":return function(e){var t=f(e);return t>=i[0]&&t<i[1]};case"(]":return function(e){var t=f(e);return t>i[0]&&t<=i[1]};case"][":return function(e){var t=f(e);return t<=i[0]||t>=i[1]};case")(":return function(e){var t=f(e);return t<i[0]||t>i[1]};case"](":return function(e){var t=f(e);return t<=i[0]||t>i[1]};case")[":return function(e){var t=f(e);return t<i[0]||t>=i[1]};case"{}":return function(e){return i.indexOf(f(e))!==-1};case"}{":return function(e){return i.indexOf(f(e))===-1}}}var o=e("../lib"),u=e("../registry"),a=e("../plot_api/plot_schema"),f=e("../plots/cartesian/axis_ids"),l=e("../plots/cartesian/axis_autotype"),c=e("../plots/cartesian/set_convert"),h=["=","<",">=",">","<="],p=["[]","()","[)","(]","][",")(","](",")["],d=["{}","}{"];n.moduleType="transform",n.name="filter",n.attributes={enabled:{valType:"boolean",dflt:!0},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x"},operation:{valType:"enumerated",values:[].concat(h).concat(p).concat(d),dflt:"="},value:{valType:"any",dflt:0}},n.supplyDefaults=function(e){function t(t,i){return o.coerce(e,r,n.attributes,t,i)}var r={},i=t("enabled");if(i){t("operation"),t("value"),t("target");var s=u.getComponentMethod("calendars","handleDefaults");s(e,r,"valuecalendar",null),s(e,r,"targetcalendar",null)}return r},n.calcTransform=function(e,t,n){function u(e,n){var r=y[e],i=o.nestedProperty(t,e).get();i.push(r[n])}if(n.enabled){var f=n.target,l=r(t,f),c=l.length;if(c){var h=n.targetcalendar;if("string"==typeof f){var p=o.nestedProperty(t,f+"calendar").get();p&&(h=p)}for(var d="x"===f||"y"===f||"z"===f?f:l,v=i(e,t,d),m=s(n,v,h),g=a.findArrayAttributes(t),y={},b=0;b<g.length;b++){var w=g[b],E=o.nestedProperty(t,w);y[w]=o.extendDeep([],E.get()),E.set([])}for(var S=0;S<c;S++){var x=l[S];if(m(x))for(var T=0;T<g.length;T++)u(g[T],S)}}}}},{"../lib":657,"../plot_api/plot_schema":678,"../plots/cartesian/axis_autotype":690,"../plots/cartesian/axis_ids":692,"../plots/cartesian/set_convert":703,"../registry":764}],944:[function(e,t,n){"use strict";function r(e,t){o.nestedProperty(e,t).set([])}function i(e,t,n,r){o.nestedProperty(e,r).set(o.nestedProperty(e,r).get().concat([o.nestedProperty(t,r).get()[n]]))}function s(e,t){var n=t.transform,s=e.transforms[t.transformIndex].groups;if(!Array.isArray(s)||0===s.length)return e;for(var a=o.filterUnique(s),f=new Array(a.length),l=s.length,c=u.findArrayAttributes(e),h=n.style||{},p=0;p<a.length;p++){var d=a[p],v=f[p]=o.extendDeepNoArrays({},e);c.forEach(r.bind(null,v));for(var m=0;m<l;m++)s[m]===d&&c.forEach(i.bind(0,v,e,m));v.name=d,v=o.extendDeepNoArrays(v,h[d]||{})}return f}var o=e("../lib"),u=e("../plot_api/plot_schema");n.moduleType="transform",n.name="groupby",n.attributes={enabled:{valType:"boolean",dflt:!0},groups:{valType:"data_array",dflt:[]},style:{valType:"any",dflt:{}}},n.supplyDefaults=function(e){function t(t,i){return o.coerce(e,r,n.attributes,t,i)}var r={},i=t("enabled");return i?(t("groups"),t("style"),r):r},n.transform=function(e,t){for(var n=[],r=0;r<e.length;r++)n=n.concat(s(e[r],t));return n}},{"../lib":657,"../plot_api/plot_schema":678}]},{},[17])(17)});